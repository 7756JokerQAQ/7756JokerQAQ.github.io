<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>面试题2 | JokerQAQ的博客</title><meta name="keywords" content="面试"><meta name="author" content="LiYiChen"><meta name="copyright" content="LiYiChen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="一些常提问面试题">
<meta property="og:type" content="article">
<meta property="og:title" content="面试题2">
<meta property="og:url" content="https://7756jokerqaq.github.io/2023/03/19/%E9%9D%A2%E8%AF%95%E9%A2%98/%E9%9D%A2%E8%AF%95%E9%A2%982/index.html">
<meta property="og:site_name" content="JokerQAQ的博客">
<meta property="og:description" content="一些常提问面试题">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191547821.png">
<meta property="article:published_time" content="2023-03-18T16:00:00.000Z">
<meta property="article:modified_time" content="2023-03-19T07:52:40.488Z">
<meta property="article:author" content="LiYiChen">
<meta property="article:tag" content="面试">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191547821.png"><link rel="shortcut icon" href="https://raw.githubusercontent.com/7756JokerQAQ/picodemoo/main/img/WebImg.png"><link rel="canonical" href="https://7756jokerqaq.github.io/2023/03/19/%E9%9D%A2%E8%AF%95%E9%A2%98/%E9%9D%A2%E8%AF%95%E9%A2%982/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":null},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: LiYiChen","link":"链接: ","source":"来源: JokerQAQ的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '面试题2',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-03-19 15:52:40'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/self/duotone.css"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/wallhaven-4y6170_1920x1080.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191547821.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">JokerQAQ的博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">面试题2</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-03-18T16:00:00.000Z" title="发表于 2023-03-19 00:00:00">2023-03-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-03-19T07:52:40.488Z" title="更新于 2023-03-19 15:52:40">2023-03-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>22分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="面试题2"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="面试题2"><a href="#面试题2" class="headerlink" title="面试题2"></a>面试题2</h1><h4 id="1-什么是-IOC，简单讲一下-Spring-IOC-的实现机制？"><a href="#1-什么是-IOC，简单讲一下-Spring-IOC-的实现机制？" class="headerlink" title="1.什么是 IOC，简单讲一下 Spring IOC 的实现机制？"></a>1.什么是 IOC，简单讲一下 Spring IOC 的实现机制？</h4><p><strong>什么是IOC</strong></p>
<p>IOC是控制反转的意思是spring框架的核心内容，IOC容器主要负责对象的实例化、配置和管理对象的Bean，并将它们之间的依赖关系进行注入，spring框架通过IOC容器实现了高度的可重用性和松偶性、开发者只需要关心bean的定义和依赖关系配置，不需要关心他们如何被创建</p>
<p><strong>Spring IOC的实现机制：</strong>工厂模式+反射机制</p>
<ol>
<li><p><strong>配置Bean：</strong></p>
<ul>
<li>xml配置：将bean的信息配置到xml文件，让spring加载并且创建bean</li>
<li>容器初始化：当spring IOC启动时，会读取配置文件，创建对象并将其放入到容器中，同时建立对象间得依赖关系</li>
<li>对象注入：当需要使用某个对象时，容器会将它注入到需要的对象中</li>
</ul>
<p>Bean的注册方式：</p>
<ul>
<li><p>通过@Bean和@Configuration的方式直接定义要创建的对象与对象的关系</p>
</li>
<li><p>通过@Component定义类需要定义ComponentScan的扫描路径</p>
<p>2.<strong>创建IOC容器：</strong>通过ApplicationContext接口的实现类来创建IOC容器</p>
</li>
</ul>
<p><strong>3.加载配置文件</strong>：IOC容器通过读取配置文件或者注解方式获取Bean的定义和配置信息</p>
<p><strong>4.创建Bean实例</strong>：利用反射机制，根据配置文件中的信息实例化Bean</p>
<p><strong>5.依赖注入</strong>：spring IOC提供了三种注入方法：</p>
<ul>
<li>Setter注入：通过Setter方法将对象注入到属性中</li>
<li>构造器注入：通过构造器将对象注入到属性中</li>
<li>接口注入：通过实现接口将对象注入到属性中</li>
</ul>
</li>
</ol>
<p>​      <strong>6.初始化Bean</strong>：调用Bean实例的初始化方法，完成Bean的实例；</p>
<p>​      <strong>7.Bean的正常使用</strong></p>
<p>​      <strong>8.Bean的销毁</strong>：调用DisposableBean的destory（）方法；或者Bean实现了DisposableBean接口直接调用destory方法；</p>
<h4 id="2-一条-SQL-语句在-MySQL-中的执行过程是怎样的？"><a href="#2-一条-SQL-语句在-MySQL-中的执行过程是怎样的？" class="headerlink" title="2.一条 SQL 语句在 MySQL 中的执行过程是怎样的？"></a>2.一条 SQL 语句在 MySQL 中的执行过程是怎样的？</h4><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303021654539.png" alt=""></p>
<p><strong>连接器过程：</strong></p>
<ol>
<li>建立链接：同客户端进行TCP三次握手建立链接</li>
<li>校验密码：校验客户端的用户名和密码</li>
<li>权限判断：密码通过读取该用户权限</li>
</ol>
<p><strong>查询缓存过程：</strong></p>
<ol>
<li>解析SQL语句的第一个字段</li>
<li>如果是select语句，Mysql先去查询缓存，命中直接返回给客户端，如果没有继续往下执行，并将结果存入缓存</li>
</ol>
<p><strong>版本变动：Mysql8.0将查询缓存删除了</strong></p>
<p><strong>解析SQL过程：</strong>对sql语句进行词法、语法分析</p>
<p><strong>执行SQL过程</strong>：</p>
<p>​    分析器：对要执行的SQL预计进行解析，并得到抽象语法树</p>
<p>​    优化器：查询优化器会找出执行该语句所有可能的使用方案，选择一条最优的查询路径</p>
<p>​    执行器：根据执行计划完成SQL语句操作，执行前会校验该用户有没有权限，yes:嗲用查询引擎 （no：返回错误）</p>
<h4 id="3-并发和并行有什么区别？同步和异步有什么区别？"><a href="#3-并发和并行有什么区别？同步和异步有什么区别？" class="headerlink" title="3.并发和并行有什么区别？同步和异步有什么区别？"></a>3.并发和并行有什么区别？同步和异步有什么区别？</h4><p><strong>并发和并行的区别</strong></p>
<ul>
<li>并发：指的是两个及两个以上的作业在同一时间段内执行（共享时间：俩人在一段时间内咦前一后走同一条路）</li>
<li>并行：两个及两个以上的作业在同一时刻进行（共享空间：相当于俩人同时并排走一条路）</li>
</ul>
<p>关键点：是<strong>空间和时间共享</strong></p>
<p><strong>同步和异步的区别：</strong></p>
<ul>
<li>同步：发出一个调用，没收到结果之前，该调用就不可以返回一直等待（安全性高效率低）</li>
<li>异步：调用发出后，不用等待返回结果，而是继续执行下一个任务，当任务完成后再进行相应的处理（安全性低效率高）</li>
</ul>
<h4 id="4-String-和-StringBuffer、StringBuilder-的区别是什么？"><a href="#4-String-和-StringBuffer、StringBuilder-的区别是什么？" class="headerlink" title="4. String 和 StringBuffer、StringBuilder 的区别是什么？"></a>4. String 和 StringBuffer、StringBuilder 的区别是什么？</h4><p>三者都是用来处理字符串的类，他们的主要区别在于可变性和线程安全性：</p>
<ul>
<li>String类：是不可变的底层被final修饰，所以是个不可变的对象，每次进行字符串的修改就会产生新的String对象，它是线程安全的；</li>
<li>StringBuffer：它是线程安全的底层是char[],但是它的每个方法上被加了sychronized，它的长度是可变的主要用于字符串的拼接，内部也封装也多种方法</li>
<li>StringBuilder他和StringBuffer功能一样唯一的不同就是它是线程不安全的，他们两个都是操作本身</li>
</ul>
<p>string是存储在字符串常量空间里的、StringBuild存储在堆内存里、stringBuffer存储在堆内存里</p>
<h4 id="5-MySQL-中的索引是怎么实现的？B-树是什么，B-树和-B-树的区别，为什么-MySQL-要用-B-树？"><a href="#5-MySQL-中的索引是怎么实现的？B-树是什么，B-树和-B-树的区别，为什么-MySQL-要用-B-树？" class="headerlink" title="5. MySQL 中的索引是怎么实现的？B+ 树是什么，B 树和 B+ 树的区别，为什么 MySQL 要用 B+ 树？"></a>5. MySQL 中的索引是怎么实现的？B+ 树是什么，B 树和 B+ 树的区别，为什么 MySQL 要用 B+ 树？</h4><p>Mysql的索引是依靠B+树来实现的。</p>
<p>B+树是一个多路搜索树，是对B树的一个改进</p>
<p><strong>B+树：</strong></p>
<p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303021728268.png" alt="B+树"></p>
<p><strong>B树</strong></p>
<p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303022138478.jpeg" alt="B树"></p>
<p><strong>B+树是什么？</strong></p>
<p>B+树是一个多叉树，其非叶子节点都是键值的一部分，它可以将数据按照一定的顺序组织起来从而提高查询效率；</p>
<p><strong>B+树和B树的区别：</strong></p>
<ul>
<li>叶子节点（最底部的节点）才会存放实际数据（索引+记录），非叶子节点只会存放索引</li>
<li>所有索引都会有叶子节点出现，叶子节点之间构成一个有序链表</li>
<li>非叶子节点的索引也会同时存在于子节点中，并且是在子节点中所有索引的最大（或最小）</li>
<li>非叶子节点中有多少个子节点，就有多少个索引</li>
</ul>
<p>性能差别：</p>
<ol>
<li>单点查询<ul>
<li>数据量相同的情况下，相比于存储及存索引又记录的B树，B+树的非叶子节点可以存放更多的索引，因此B+树更【矮胖】查询底层节点的磁盘I/O次数会更少</li>
</ul>
</li>
<li>插入和删除的效率<ul>
<li>因为有冗余节点的存在，B+树的插入和删除效率更高</li>
</ul>
</li>
<li>查询范围<ul>
<li>B+树的所有叶子节点间还有一个链表进行链接</li>
</ul>
</li>
</ol>
<p><strong>Mysql中的B+树：</strong></p>
<p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303022151984.png" alt="image.png"></p>
<p><strong>为什么Mysql要用B+树？</strong></p>
<ul>
<li>B+树的非叶子节点，不存放实际的记录数据，进仅存放索引，因此数据量相同的情况下，相比于存储即存索引又存记录的B树，B+树的非叶子节点可以存放更多的索引，因此B+树可以比B树更【矮胖】，查询底层节点的磁盘I/O次数会更少</li>
<li>B+树种有大量的冗余节点（所有的非叶子节点都是冗余节点），这些冗余索引让B+树在插入、删除的效率都很高，比如删除根节点的时候，不会像B树一样发生复杂的树变化；</li>
<li>B+树叶子节点之间用链表链接起来了，有利于范围查询，而B树要实现的范围查询，因此只能通过树的遍历来完成范围的查询，这会涉及多个节点的磁盘I/O操作，范围查询效率不如B+树</li>
</ul>
<h4 id="6-Spring中都用到了什么设计模式？"><a href="#6-Spring中都用到了什么设计模式？" class="headerlink" title="6.Spring中都用到了什么设计模式？"></a>6.Spring中都用到了什么设计模式？</h4><ul>
<li>单例模式：spring的Bean默认是单例模式，通过Spring容器IOC管理Bean的生命周期，只被创建一次，可以被复用</li>
<li>工厂模式：通过BeanFactory和ApplicationContext创建并且管理Bean对象</li>
<li>代理模式：Spring AOP 基于动态代理技术面向切面编程，提供了AOP编程的支持</li>
<li>责任链模式：spring的过滤器和拦截器使用了责任链模式，多个过滤器和拦截器按照一定的顺序执行，每个过滤器和拦截可以拦截请求或者相应并作出相应的处理</li>
</ul>
<h4 id="7-MySQL-事务有哪些隔离级别、分别有什么特点，以及-MySQL-的默认隔离级别是什么？"><a href="#7-MySQL-事务有哪些隔离级别、分别有什么特点，以及-MySQL-的默认隔离级别是什么？" class="headerlink" title="7.MySQL 事务有哪些隔离级别、分别有什么特点，以及 MySQL 的默认隔离级别是什么？"></a>7.MySQL 事务有哪些隔离级别、分别有什么特点，以及 MySQL 的默认隔离级别是什么？</h4><ul>
<li>读未提交<ul>
<li>允许一个事务读取另一个事务未提交的数据，这种隔离级别容易出现脏读、不可重复度和幻读的问题</li>
</ul>
</li>
<li>读已提交<ul>
<li>保重一个事务提交后才能被另一个事务读取，这种隔离级别避免了脏读的问题，但是仍然会出现不可重复读和幻读问题</li>
</ul>
</li>
<li>可重复读<ul>
<li>保证一个事务在多次执行同一个查询时，结果是一致的，避免了脏读和不可重复读问题、这种隔离级别容易出现幻读</li>
</ul>
</li>
<li>串行化<ul>
<li>最高级别的隔离级别，保证事务的串行化执行，避免了脏读、不可重复读，幻读的问题，但是效率很低</li>
</ul>
</li>
</ul>
<p>​    Mysql的默认级别是可重复读，因为在大多数应用中，可重复读级别能够提供足够的隔离性，同时性能相对较好，隔离级别需要按场景来进行调整，如在高并发情况下，需要将隔离级别调整为读已提交或者序列化来提高效率。</p>
<h4 id="8-Redis的单线程模型，IO-多路复用是什么？"><a href="#8-Redis的单线程模型，IO-多路复用是什么？" class="headerlink" title="8.Redis的单线程模型，IO 多路复用是什么？"></a>8.Redis的单线程模型，IO 多路复用是什么？</h4><p><strong>Redis的单线程模型：</strong></p>
<p>Redis是基于内存的高性能键值存储系统、采用单线程模型设计、在Redis中所有的客户端的请求都是有一个<strong>单线程进行处理</strong>，这个单线程不断的从客户端套接字读取命令请求，并将命令请求放入一个队列中、Redis的事情处理器会按照一定的规则选择一个请求进行处理、处理完毕后将相应结果返回客户端。</p>
<p>​    <strong>优势：</strong></p>
<ol>
<li>简单高效：单线程避免了多线程之间的竞争和上下文切换开销、可以更高效的利用CUP和内存资源</li>
<li>可靠性高：单线程避免了多线程之间竞争和死锁的问题，提高系统的可靠性</li>
<li>易于维护：单线程简化了Redis的代码结构和网络通信。</li>
</ol>
<p><strong>Redis的IO多路复用：</strong></p>
<p>指的是利用操作系统的一些特性，通过监听多个文件描述符来实现同时处理多个连接的I/O操作，在Redis中通过使用多路复用技术、主线程可以同时监听多个客户端的连接、当某个客户端出现了I/O事件时，主线程便可以及时的处理该事件，从而提高了Redis的I/O效率</p>
<h4 id="9-什么是-BIO、NIO、AIO？"><a href="#9-什么是-BIO、NIO、AIO？" class="headerlink" title="9. 什么是 BIO、NIO、AIO？"></a>9. 什么是 BIO、NIO、AIO？</h4><p>三者都是Java中关于网络编程的不同实现方式，主要的区别在于IO操作的方式和实现方式。</p>
<ul>
<li>BIO（同步阻塞IO）</li>
</ul>
<p>指的是<strong>在IO操作时，必须等待IO完成才能进行下一步的操作</strong>，在服务器端，每个链接都需要独立的线程完成数据的读取和处理，如果连接数过多，会导致系统资源消耗严重，性能下降。在客户端，如果连接远程服务器时，服务器相应时间过长，客户端会一直等待，造成堵塞。<strong>它的并发性低。</strong></p>
<ul>
<li>NIO（同步非阻塞IO）</li>
</ul>
<p>指的是在进行IO操作时不需要等待IO完成才能进行下一步操作，而是通过轮询机制来实现IO操作的异步执行。在<strong>服务器端</strong>，可以使用一个线程处理多个连接的数据读写，大大降低了系统资源的消耗，提高了系统的可扩展性和性能，在<strong>客户端</strong>，连接远程服务器时，如果服务器响应时间过长，客户端可以进行其他操作，不会造成堵塞，虽然弥补了并发能力，<strong>NIO代码比较复杂</strong>，适合的场景<strong>连接数多而且变化较少</strong></p>
<ul>
<li>AIO(异步非阻塞IO)</li>
</ul>
<p>java1.7之后增加的IO模型，它支持<strong>异步非IO操作</strong>，与NIO区别<strong>不需要像NIO一样轮询</strong>，而是通过<strong>回调函数</strong>的方式在数据准备好后通知应用程序进行数据的读取，这样可以更加高效的利用系统的资源，提高吞吐量，代码实现复杂，<strong>连接数非常多而且连接时间较长</strong></p>
<h4 id="10-Redis-基础类型中的-String-底层实现是什么？"><a href="#10-Redis-基础类型中的-String-底层实现是什么？" class="headerlink" title="10. Redis 基础类型中的 String 底层实现是什么？"></a>10. Redis 基础类型中的 String 底层实现是什么？</h4><p>Redis的底层实现类型是一个动态的字符串SDS，他没有直接复用C语言的字符串而是新建了属于自己的结构SDS，Redis中所有的键都是由字符串对象实现的即底层都是SDS；它的优势：</p>
<ul>
<li>字符串的长度处理：直接记录当前的字符串的长度，时间复杂度O（1），相比于C语言的时间复杂度O(n)强悍了亿点点</li>
<li>内存的重新分配，先说C语言，会出现数组下标越级或者内存分配溢出，然而！SDS有两个重要的空间管理方案<ul>
<li>空间预分配：SDS修改后，len长度小于1M，将会分配相同长度的未使用空间，反之，将会分配1M的使用空间</li>
<li>惰性空间释放：SDS缩短时并不会回收多余的内存空间，而是使用free字段将多出来的空间记录下来，如果有后续变更操作直接使用free记录的空间</li>
</ul>
</li>
<li>二进制安全：根据len的长度来判断字符串的结束，而C语言时读取‘\0’ 可能存在提前结束情况</li>
<li>SDS 对内存的分配和释放进行了封装，使得字符串的空间可以根据需要进行增长或缩减，避免了 C 语言字符串需要手动分配空间的问题。</li>
<li>提供了字符串追加操作，可以在 O(1) 的时间内完成追加操作。</li>
</ul>
<h4 id="11-Spring、SpringMVC、SpringBoot-三者之间是什么关系？"><a href="#11-Spring、SpringMVC、SpringBoot-三者之间是什么关系？" class="headerlink" title="11. Spring、SpringMVC、SpringBoot 三者之间是什么关系？"></a>11. Spring、SpringMVC、SpringBoot 三者之间是什么关系？</h4><p>Spring、SpringMVC、SpringBoot 是<strong>三个独立的框架</strong>，它们之间的关系是：</p>
<ul>
<li>spring是一个开源的轻量级java开发框架，它提供了依赖注入和面向切面编程等，可以使得java开发更简单、高效、灵活和可维护它提供了IOC和AOP的支持，用于构建企业级的项目，spring包含多个模块Spring Core、Spring Context、Spring JDBC 、Spring Web等每个模块提供了不同的功能。</li>
<li>Spring MVC是spring框架的一部分，是基于MVC（model 、view、Controller）设计模式的框架，用于构建web框架，它提供了控制器、视图解析器、数据绑定、异常处理等使得开发web应用程序更加简单、springMVC也支持restful架构</li>
<li>springboot 是基于spring框架的一个开发框架，用于快速构建独立的生产级别的spring应用程序，它通过自动配置和约定优于配置的方式，简化了spring应用程序的配置和开发过程，提高了开发效率、springboot集成了很多常用的第三方库和工具例如springData、spring Security、Thymeleaf、Logback等、sprinboot内置了tomcat和Undertow等服务器，不需要像SSM一样自己去配置Tomcat环境简化了开发</li>
</ul>
<p>因此springBoot可以看作是在spring的基础上，通过自动配置和约定优于配置的方式，提供了更加方便的体验、springMVC则是在spring的框架中构建web应用程序 模块.</p>
<h4 id="12-意向锁是什么？有什么作用？它是表级锁还是行级锁？"><a href="#12-意向锁是什么？有什么作用？它是表级锁还是行级锁？" class="headerlink" title="12.意向锁是什么？有什么作用？它是表级锁还是行级锁？"></a>12.意向锁是什么？有什么作用？它是表级锁还是行级锁？</h4><p>意向锁是一种 MySQL 数据库中的锁，用于表级锁协调多个行级锁的使用。在表级锁定一个表之前，MySQL 需要先获得一个意向锁，以表明要获取的锁类型（读锁或写锁），避免其他事务锁定整个表或锁定一部分表时引发死锁。</p>
<ul>
<li><strong>意向锁是什么？</strong><ul>
<li>使用InnoDB引擎表里时对某些记录加上【共享锁】之前，需要先在表级别上加上一个【意向共享锁】</li>
<li>使用InnoDB引擎表里时对某些记录加上【独占锁】之前，需要先在表级别上加上一个【意向独占锁】</li>
</ul>
</li>
<li><strong>意向锁的作用</strong></li>
</ul>
<p>意向锁是表级锁，不会和行级的共享锁和独占锁发生冲突，而且 意向锁之间也不会发生冲突、只会和<strong>共享锁</strong>和<strong>独占表锁</strong>发生冲突。</p>
<p>意向锁可以提高数据库并发性能，防止死锁的发生。它是表级锁，而不是行级锁。</p>
<p>表锁和行锁是满足读读共享、读写互斥、写写互斥的</p>
<p>作用：<strong>为了快速判断表里是否有记录被加锁</strong></p>
<ul>
<li>如果<strong>没有意向锁</strong>，那么加独占表锁时，就需要遍历表里的所有记录，查看是否有记录存在独占锁、这样效率会特别慢</li>
<li>有了意向锁，加【独占表锁】前，先回加上表级别的意向独占锁、那么在加【独占表锁】时，直接查该表是否有意向独占锁、如果有则意味着表里面已经有记录被加了独占锁、这样就不用遍历表里面的内容</li>
</ul>
<p>​    <strong>意向锁是表级锁还是行级锁</strong></p>
<p>表级锁有：表锁、元数据锁、<strong>意向锁</strong>、AUTO-INC锁 </p>
<p><strong>其他：</strong></p>
<p>普通的select是不会加行级锁的、普通的select语句是利用MVCC实现的一致性读是无锁的、不过select也是可以对记录加共享锁和独占锁的。</p>
<h4 id="13、硬链接和软连接是什么，二者有什么区别？"><a href="#13、硬链接和软连接是什么，二者有什么区别？" class="headerlink" title="13、硬链接和软连接是什么，二者有什么区别？"></a>13、硬链接和软连接是什么，二者有什么区别？</h4><p>在 Linux 文件系统中，硬链接（hard link）和软链接（symbolic link）都是一种文件链接的方式，可以用于将一个文件链接到另一个文件上。它们的主要区别在于创建方式、所占空间和使用限制等方面。</p>
<p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303161435329.png" alt="image-20230316143503168"></p>
<p><strong>硬链接：</strong></p>
<p>Linux下文件时通过索引节点Inode来识别文件，硬链接当中、多个文件名可以指向同一个索引节点，当创建一个硬链接的时候，文件系统会维护一个引用计数、只要有文件指向这个 区块，他就不会从硬盘中消失、两个文件拥有相同的inode、通过查看文件内容也会发现是同一个文件，只删除一个连接并不影响索引节点本身和其他的连接、只有当最后一个连接也被删除后文件的数据块及目录的连接才会被释放，也就是真正的删除(一句话硬链接就是单纯的copy一份也就是镜像文件，要想删除完毕必须全部删除)</p>
<p><strong>软连接：</strong></p>
<p>又叫做符号连接、这个文件包含了另一个文件的路径名，软连接可以是任意文件或目录，可以连接不同的系统文件、在对符号文件进行读或写操作的时候，系统会自动将这些操作转换为对源文件的操作、但删除链接文件时，系统仅仅删除链接文件而不是删除源文件本身（一句话类似于桌面的快捷方式能快速打开，但是无法从根底删除）</p>
<p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303161443166.jpeg" alt="img"></p>
<h4 id="14-JVM-内存模型，分为哪些区域？各区域的作用是什么？"><a href="#14-JVM-内存模型，分为哪些区域？各区域的作用是什么？" class="headerlink" title="14.JVM 内存模型，分为哪些区域？各区域的作用是什么？"></a>14.JVM 内存模型，分为哪些区域？各区域的作用是什么？</h4><p><strong>划分区域：</strong></p>
<p>运行时的数据区：程序计数器、java虚拟机栈、本地方法栈、java堆、方法区</p>
<ul>
<li>程序计数器：每个线程都有自己的程序计数器，用于指示当前线程执行的字节码指令的行号，以便线程执行时能够回到正确的位置。是个线程不共享区域，如果线程正在执行 Native方法，计数器值为空。</li>
<li>java虚拟机栈：也成为java方法栈，用于存放方法执行时的局部变量表、操作数栈、动态链接方法出口等信息。每一个线程在执行一个方法时都会为该方法分配一个栈帧、并将栈帧压入虚拟机栈，当方法执行完毕后、虚拟机会将其出栈。线程不共享区域</li>
<li>本地方法栈：类似于java虚拟机栈，面向的native方法线程不共享区域</li>
<li>堆：存放对象实列：线程共享区域</li>
<li>方法区：用于存储已经被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据、方法区也是被线程所共享的</li>
<li>运行时的常量池：时方法区的一部分，用于存储编译期间生成的各种字面量和符号引用。</li>
</ul>
<p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303161454441.png" alt="image-20230316145426321"></p>
<h4 id="15-有哪些注解可以注入-Bean？-Autowired-和-Resource-的区别？"><a href="#15-有哪些注解可以注入-Bean？-Autowired-和-Resource-的区别？" class="headerlink" title="15.有哪些注解可以注入 Bean？@Autowired 和 @Resource 的区别？"></a>15.有哪些注解可以注入 Bean？@Autowired 和 @Resource 的区别？</h4><p>spring内置的@Autowired以及JDK内置的@Resource和@Inject都可以注入Bean</p>
<p>@Autowire和@Resource用的多</p>
<ul>
<li>@Autowire是spring提供的注解、@Resource是JDK提供的注解</li>
<li>@Autowire默认的注入方法是byType（根据类型进行匹配）@Resource默认的方式是ByName（根据名字进行匹配）</li>
<li>当一个接口存在多个实现类的情况下、@Autowire和@Resource都需要通过名称才能正确的匹配到对应的Bean，Autowire可以通过@Qualifier注解来指定名称，@Resource可以通过name属性来指定</li>
</ul>
<h4 id="16-线程的生命周期是什么，线程有几种状态，什么是上下文切换？"><a href="#16-线程的生命周期是什么，线程有几种状态，什么是上下文切换？" class="headerlink" title="16.线程的生命周期是什么，线程有几种状态，什么是上下文切换？"></a>16.线程的生命周期是什么，线程有几种状态，什么是上下文切换？</h4><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303161501277.png" alt="image-20230316150137090"></p>
<ul>
<li>【初始状态】:创建线程对象</li>
<li>【可运行状态】：（就绪状态）指该线程已经被创建，可以由CPU调度运行</li>
<li>【运行状态】：指获取CPU时间片运行中的状态当CPU时间用完，会从【运行状态】转换为可运行状态，会导致线程的上下文切换</li>
<li>【阻塞状态】：如果调用了阻塞API如BIO读写文件、这时该线程实际不会用到CPU，会导致线程上下文切换</li>
<li>【终止状态】：表示线程已经执行完毕、生命周期已经结束、不会再转换为其他状态</li>
</ul>
<p>线程上下文切换：CPU通过分配时间片来执行任务，当一个任务的时间片用完，就会切换到另一个任务，在切换之前会保存上一个任务的状态，当下次再切换到该任务，就会加载这个状态</p>
<p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303161512149.png" alt="image-20230316151226093"></p>
<h4 id="17-什么是网关，网关有哪些作用？"><a href="#17-什么是网关，网关有哪些作用？" class="headerlink" title="17. 什么是网关，网关有哪些作用？"></a>17. 什么是网关，网关有哪些作用？</h4><p><strong>什么是网关：</strong>是连接两个或者多个不同的网络设备，可以实现协议的转换，数据的转发和安全策略的实现功能、简单来说网关是设备与路由器之间的桥梁，由它将不同的网络间进行访问控制，转换交接等等</p>
<p>常见的网关有：应用网关、协议网关、安全网关</p>
<p><strong>作用：</strong></p>
<ul>
<li>实现协议的转换：不同网络之间通常使用不同的网络协议，通过网关可以实现协议的转换。使得不同网络之间能够相互通信</li>
<li>提供数据转发功能：网关可以传输的数据进行过滤、路由转发等处理、确保数据的安全有效</li>
<li>实现安全策略：网关可以对传输的数据进行加密、认证授权等操作、保证数据的安全性和可靠性</li>
<li>提供缓存功能：网关可以将 一部分的数据缓存起来，提高数据的访问速度和响应性能。</li>
<li>支持负载均衡：网关可以将请求分配到不同的服务器上，实现负载均衡、提高系统的可用性和性能</li>
<li>实现访问控制：网关可以对访问进行控制防止未授权的访问和攻击，提高系统的安全性</li>
</ul>
<p>网关可以分为以下几种：</p>
<ol>
<li>应用网关：用于应用层协议的处理：如HTTp、STMP等</li>
<li>数据库网关：用于数据库的访问的控制和管理</li>
<li>通信网关：用于不同通信协议之间的数据交换如TCP/IP、UDP/IP等</li>
<li>API网关：用于管理API请求，实现API的授权、限流、监控等功能</li>
</ol>
<h4 id="18-使用-Redis-实现一个排行榜？"><a href="#18-使用-Redis-实现一个排行榜？" class="headerlink" title="18.使用 Redis 实现一个排行榜？"></a>18.使用 Redis 实现一个排行榜？</h4><p>主要使用的是ZSet进行实现，下面是为什么选用ZSet：</p>
<ul>
<li>有序性：排行榜肯定需要实现一个排序的功能，在Redis中有序的数据结构有List和ZSet；</li>
<li>支持分数操作：ZSet可以对集合中的元素进行增删改查操作，十分贴合排行榜中用户分数动态变化的场景，而List并不能针对分数进行操作，只有其中的value进行操作；</li>
<li>支持范围查询：ZSet可以按照分数进行范围查询，如排行榜中的Top10需求就可通过该特性进行实现；</li>
<li>支持去重：由于ZSet属于Set的特殊数据结构，因此同样拥有Set不可重复的特性，对于排行榜中不可出现重复项的需求也十分贴合，而List只能手动去重。</li>
</ul>
<p>因此选择Zset实现排行榜相对list会更加合适高效:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"># 添加示例数据<br>ZADD scores <span class="hljs-number">90</span> <span class="hljs-string">&quot;张三&quot;</span><br>ZADD scores <span class="hljs-number">85</span> <span class="hljs-string">&quot;李四&quot;</span><br>ZADD scores <span class="hljs-number">95</span> <span class="hljs-string">&quot;王五&quot;</span><br>ZADD scores <span class="hljs-number">92</span> <span class="hljs-string">&quot;赵六&quot;</span><br># 查询排名前<span class="hljs-number">3</span>的学生信息<br>ZRANGE scores <span class="hljs-number">0</span> <span class="hljs-number">2</span> WITHSCORES<br># 查询排名前<span class="hljs-number">3</span>的打印<br><span class="hljs-number">1</span>) <span class="hljs-string">&quot;王五&quot;</span><br><span class="hljs-number">2</span>) <span class="hljs-string">&quot;95&quot;</span><br><span class="hljs-number">3</span>) <span class="hljs-string">&quot;赵六&quot;</span><br><span class="hljs-number">4</span>) <span class="hljs-string">&quot;92&quot;</span><br><span class="hljs-number">5</span>) <span class="hljs-string">&quot;张三&quot;</span><br><span class="hljs-number">6</span>) <span class="hljs-string">&quot;90&quot;</span><br># 删除学生“李四”的成绩信息<br>ZREM scores <span class="hljs-string">&quot;李四&quot;</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>下面是SpringBoot整合Redis进行实现</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 添加学生成绩</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addScore</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> score)</span> &#123;<br>    redisTemplate.opsForZSet().add(<span class="hljs-string">&quot;scores&quot;</span>, name, score);<br>&#125;<br><br><span class="hljs-comment">// 查询排名前N的学生成绩</span><br><span class="hljs-keyword">public</span> List&lt;Map.Entry&lt;String, Double&gt;&gt; getTopScores(<span class="hljs-type">int</span> n) &#123;<br>    <span class="hljs-keyword">return</span> redisTemplate.opsForZSet().reverseRangeWithScores(<span class="hljs-string">&quot;scores&quot;</span>, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>)<br>            .stream()<br>            .map(tuple -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbstractMap</span>.SimpleEntry&lt;&gt;(tuple.getValue(), tuple.getScore()))<br>            .collect(Collectors.toList());<br>&#125;<br><br><span class="hljs-comment">// 删除某个学生的成绩</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeScore</span><span class="hljs-params">(String name)</span> &#123;<br>    redisTemplate.opsForZSet().remove(<span class="hljs-string">&quot;scores&quot;</span>, name);<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="19-Nginx-是什么？它有哪些应用场景？"><a href="#19-Nginx-是什么？它有哪些应用场景？" class="headerlink" title="19.Nginx 是什么？它有哪些应用场景？"></a>19.Nginx 是什么？它有哪些应用场景？</h4><p>Nginx是一款高性能的Web服务器软件，也可以作为反向代理服务器、负载均衡器、http缓存和安全防护等多种用途，Nginx可以将服务器上的静态文件（html、css、图片）通过HTTP协议返回给浏览器客户端。同时Nginx是基于REST架构风格、以统一资源描述符URL或者统一资源定位符URL作为沟通依据，通过HTTP协议提供各种网络服务。它支持高达50000个并发连接数</p>
<p>Nginx的应用场景包括：</p>
<ul>
<li>Web服务器：Nginx可以作为Web服务器，提供静态文件和动态文件（如PHP）的处理，静态HTML页面，CSS、JavaScript、图片等，它能够快速响应客户端的请求，提高网站的访问速度。</li>
<li>反向代理服务器：Nginx可以作为反向代理服务器，将请求转发到后端服务器，实现负载均衡和高可用性</li>
<li>负载均衡器：Nginx可以作为负载均衡器，将客户端的请求均衡分配到多个应用服务器上，从而达到分摊负载的效果、提高系统的可靠性和性能</li>
<li>HTTP缓存：Nginx可以作为HTTP缓存，缓存静态文件和动态文件，从而减少后端应用服务器的负载，提高网站的访问速度</li>
<li>安全防护服务器：Nginx可以作为安全防护服务器，通过设置防火墙，反向代理等技术，防止恶意攻击和DDos攻击，保障网站的安全性。</li>
<li>WebSocket服务器：Nginx支持WebSocket协议，可以作为WebSocket服务器，实现实时通信即时聊天等功能</li>
<li>Nginx支持热部署、启动简单可以做到7*24小时不间断运行不需要重新启动</li>
</ul>
<h4 id="Redis-的持久化机制有哪些？说说各自的优缺点和应用场景？"><a href="#Redis-的持久化机制有哪些？说说各自的优缺点和应用场景？" class="headerlink" title="Redis 的持久化机制有哪些？说说各自的优缺点和应用场景？"></a>Redis 的持久化机制有哪些？说说各自的优缺点和应用场景？</h4><p>Redis的持久化包括RDB快照和AOF日志两种持久化方式，快照是一次全量的备份，AOF日志是连续的增量备份，快照是内存数据的二进制序列化形式，在存储上非常紧凑，而AOF日志记录的是内存数据修改的指令记录文本。</p>
<p><strong>RDB（默认）的优缺点：</strong></p>
<ul>
<li>优点：RDB文件小，适合定时备份，用于灾难恢复，Redis加载RDB文件的速度比AOF快很多、因为RDB文件中直接存储的时内存数据，而AOF文件存储的是一条条命令，需要重演命令。</li>
<li>缺点：RDB无法做到实时的持久化，若在两次的bgsave（background save）间宕机，则会丢失区间（分钟级）的增量数据，不适用于实时性要求较高的场景，RDB的cow（Copy On Write）机制中，fock子进程属于重量级操作，而且会阻塞redis的主进程。存在老版本的redis不兼容新版本的RDB格式文件问题</li>
</ul>
<p><strong>AOF日志（Append only file）优缺点：</strong></p>
<p>AOF日志会在持续运行中持续的增大，需要定期的进行AOF重写，对AOF进行瘦身</p>
<p><strong>优点：</strong>AOF只是追加写日志文件、对服务器性能影响较小、速度比RDB要快、可以保证数据不会因为断电或者崩溃等原因丢失；适用于对数据安全性要求较高的场景</p>
<p><strong>缺点：</strong>AOF方式生成的日志文件太大，需要不断的AOF重写，进行瘦身。即使经过AOF重写瘦身，由于文件是文本文件，文件体积较大（相对于RDB的二进制文件）。AOF重演命令式的恢复数据速度比RDB要慢.<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/126327543">Redis持久化</a></p>
<p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303171502847.png" alt="image-20230317150220593"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://7756jokerqaq.github.io">LiYiChen</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://7756jokerqaq.github.io/2023/03/19/%E9%9D%A2%E8%AF%95%E9%A2%98/%E9%9D%A2%E8%AF%95%E9%A2%982/">https://7756jokerqaq.github.io/2023/03/19/面试题/面试题2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://7756jokerqaq.github.io" target="_blank">JokerQAQ的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E9%9D%A2%E8%AF%95/">面试</a></div><div class="post_share"><div class="social-share" data-image="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191547821.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/03/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Eureka%E5%92%8CRibbon/"><img class="prev-cover" src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191548952.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Eureka And Ribbon</div></div></a></div><div class="next-post pull-right"><a href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Java%E5%9F%BA%E7%A1%80%E5%88%B7%E9%A2%98/"><img class="next-cover" src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/wallhaven-01o8k3_1920x1080.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java基础刷题</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/mainshi/" title="面试题1"><img class="cover" src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191547821.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-27</div><div class="title">面试题1</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="lv-container" data-id="city"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/wallhaven-4y6170_1920x1080.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">LiYiChen</div><div class="author-info__description">日常学习记录</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/7756JokerQAQ"><i class="fab fa-github"></i><span>Github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/7756JokerQAQ" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:2677006173@qq.com" target="_blank" title="QQ邮箱"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://7756jokerqaq.github.io" target="_blank" title="博客"><i class="fa-brands fa-blogger"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">日常学习java后端和前端</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%982"><span class="toc-number">1.</span> <span class="toc-text">面试题2</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AF-IOC%EF%BC%8C%E7%AE%80%E5%8D%95%E8%AE%B2%E4%B8%80%E4%B8%8B-Spring-IOC-%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6%EF%BC%9F"><span class="toc-number">1.0.0.1.</span> <span class="toc-text">1.什么是 IOC，简单讲一下 Spring IOC 的实现机制？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%B8%80%E6%9D%A1-SQL-%E8%AF%AD%E5%8F%A5%E5%9C%A8-MySQL-%E4%B8%AD%E7%9A%84%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84%EF%BC%9F"><span class="toc-number">1.0.0.2.</span> <span class="toc-text">2.一条 SQL 语句在 MySQL 中的执行过程是怎样的？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%B9%B6%E5%8F%91%E5%92%8C%E5%B9%B6%E8%A1%8C%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F%E5%90%8C%E6%AD%A5%E5%92%8C%E5%BC%82%E6%AD%A5%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">1.0.0.3.</span> <span class="toc-text">3.并发和并行有什么区别？同步和异步有什么区别？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-String-%E5%92%8C-StringBuffer%E3%80%81StringBuilder-%E7%9A%84%E5%8C%BA%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.0.0.4.</span> <span class="toc-text">4. String 和 StringBuffer、StringBuilder 的区别是什么？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-MySQL-%E4%B8%AD%E7%9A%84%E7%B4%A2%E5%BC%95%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9FB-%E6%A0%91%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8CB-%E6%A0%91%E5%92%8C-B-%E6%A0%91%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88-MySQL-%E8%A6%81%E7%94%A8-B-%E6%A0%91%EF%BC%9F"><span class="toc-number">1.0.0.5.</span> <span class="toc-text">5. MySQL 中的索引是怎么实现的？B+ 树是什么，B 树和 B+ 树的区别，为什么 MySQL 要用 B+ 树？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-Spring%E4%B8%AD%E9%83%BD%E7%94%A8%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9F"><span class="toc-number">1.0.0.6.</span> <span class="toc-text">6.Spring中都用到了什么设计模式？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-MySQL-%E4%BA%8B%E5%8A%A1%E6%9C%89%E5%93%AA%E4%BA%9B%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E3%80%81%E5%88%86%E5%88%AB%E6%9C%89%E4%BB%80%E4%B9%88%E7%89%B9%E7%82%B9%EF%BC%8C%E4%BB%A5%E5%8F%8A-MySQL-%E7%9A%84%E9%BB%98%E8%AE%A4%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.0.0.7.</span> <span class="toc-text">7.MySQL 事务有哪些隔离级别、分别有什么特点，以及 MySQL 的默认隔离级别是什么？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-Redis%E7%9A%84%E5%8D%95%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B%EF%BC%8CIO-%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.0.0.8.</span> <span class="toc-text">8.Redis的单线程模型，IO 多路复用是什么？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E4%BB%80%E4%B9%88%E6%98%AF-BIO%E3%80%81NIO%E3%80%81AIO%EF%BC%9F"><span class="toc-number">1.0.0.9.</span> <span class="toc-text">9. 什么是 BIO、NIO、AIO？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-Redis-%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B%E4%B8%AD%E7%9A%84-String-%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.0.0.10.</span> <span class="toc-text">10. Redis 基础类型中的 String 底层实现是什么？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11-Spring%E3%80%81SpringMVC%E3%80%81SpringBoot-%E4%B8%89%E8%80%85%E4%B9%8B%E9%97%B4%E6%98%AF%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB%EF%BC%9F"><span class="toc-number">1.0.0.11.</span> <span class="toc-text">11. Spring、SpringMVC、SpringBoot 三者之间是什么关系？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12-%E6%84%8F%E5%90%91%E9%94%81%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%E6%9C%89%E4%BB%80%E4%B9%88%E4%BD%9C%E7%94%A8%EF%BC%9F%E5%AE%83%E6%98%AF%E8%A1%A8%E7%BA%A7%E9%94%81%E8%BF%98%E6%98%AF%E8%A1%8C%E7%BA%A7%E9%94%81%EF%BC%9F"><span class="toc-number">1.0.0.12.</span> <span class="toc-text">12.意向锁是什么？有什么作用？它是表级锁还是行级锁？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13%E3%80%81%E7%A1%AC%E9%93%BE%E6%8E%A5%E5%92%8C%E8%BD%AF%E8%BF%9E%E6%8E%A5%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E4%BA%8C%E8%80%85%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">1.0.0.13.</span> <span class="toc-text">13、硬链接和软连接是什么，二者有什么区别？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#14-JVM-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%8C%E5%88%86%E4%B8%BA%E5%93%AA%E4%BA%9B%E5%8C%BA%E5%9F%9F%EF%BC%9F%E5%90%84%E5%8C%BA%E5%9F%9F%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">1.0.0.14.</span> <span class="toc-text">14.JVM 内存模型，分为哪些区域？各区域的作用是什么？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#15-%E6%9C%89%E5%93%AA%E4%BA%9B%E6%B3%A8%E8%A7%A3%E5%8F%AF%E4%BB%A5%E6%B3%A8%E5%85%A5-Bean%EF%BC%9F-Autowired-%E5%92%8C-Resource-%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">1.0.0.15.</span> <span class="toc-text">15.有哪些注解可以注入 Bean？@Autowired 和 @Resource 的区别？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16-%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%8C%E7%BA%BF%E7%A8%8B%E6%9C%89%E5%87%A0%E7%A7%8D%E7%8A%B6%E6%80%81%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%EF%BC%9F"><span class="toc-number">1.0.0.16.</span> <span class="toc-text">16.线程的生命周期是什么，线程有几种状态，什么是上下文切换？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#17-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BD%91%E5%85%B3%EF%BC%8C%E7%BD%91%E5%85%B3%E6%9C%89%E5%93%AA%E4%BA%9B%E4%BD%9C%E7%94%A8%EF%BC%9F"><span class="toc-number">1.0.0.17.</span> <span class="toc-text">17. 什么是网关，网关有哪些作用？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#18-%E4%BD%BF%E7%94%A8-Redis-%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E6%8E%92%E8%A1%8C%E6%A6%9C%EF%BC%9F"><span class="toc-number">1.0.0.18.</span> <span class="toc-text">18.使用 Redis 实现一个排行榜？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#19-Nginx-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%E5%AE%83%E6%9C%89%E5%93%AA%E4%BA%9B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9F"><span class="toc-number">1.0.0.19.</span> <span class="toc-text">19.Nginx 是什么？它有哪些应用场景？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Redis-%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96%E6%9C%BA%E5%88%B6%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F%E8%AF%B4%E8%AF%B4%E5%90%84%E8%87%AA%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%E5%92%8C%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%EF%BC%9F"><span class="toc-number">1.0.0.20.</span> <span class="toc-text">Redis 的持久化机制有哪些？说说各自的优缺点和应用场景？</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/03/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Eureka%E5%92%8CRibbon/" title="Eureka And Ribbon"><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191548952.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Eureka And Ribbon"/></a><div class="content"><a class="title" href="/2023/03/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Eureka%E5%92%8CRibbon/" title="Eureka And Ribbon">Eureka And Ribbon</a><time datetime="2023-03-18T16:00:00.000Z" title="发表于 2023-03-19 00:00:00">2023-03-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/19/%E9%9D%A2%E8%AF%95%E9%A2%98/%E9%9D%A2%E8%AF%95%E9%A2%982/" title="面试题2"><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191547821.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="面试题2"/></a><div class="content"><a class="title" href="/2023/03/19/%E9%9D%A2%E8%AF%95%E9%A2%98/%E9%9D%A2%E8%AF%95%E9%A2%982/" title="面试题2">面试题2</a><time datetime="2023-03-18T16:00:00.000Z" title="发表于 2023-03-19 00:00:00">2023-03-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Java%E5%9F%BA%E7%A1%80%E5%88%B7%E9%A2%98/" title="Java基础刷题"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/wallhaven-01o8k3_1920x1080.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java基础刷题"/></a><div class="content"><a class="title" href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Java%E5%9F%BA%E7%A1%80%E5%88%B7%E9%A2%98/" title="Java基础刷题">Java基础刷题</a><time datetime="2023-02-26T16:00:00.000Z" title="发表于 2023-02-27 00:00:00">2023-02-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SDK%E7%9A%84make/" title="SDK的制作"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/aaaa.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SDK的制作"/></a><div class="content"><a class="title" href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SDK%E7%9A%84make/" title="SDK的制作">SDK的制作</a><time datetime="2023-02-26T16:00:00.000Z" title="发表于 2023-02-27 00:00:00">2023-02-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Zookeeper%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/" title="Zookeeper的基本使用"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/hellopicture.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Zookeeper的基本使用"/></a><div class="content"><a class="title" href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Zookeeper%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/" title="Zookeeper的基本使用">Zookeeper的基本使用</a><time datetime="2023-02-26T16:00:00.000Z" title="发表于 2023-02-27 00:00:00">2023-02-27</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191547821.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By LiYiChen</div><div class="footer_custom_text">Hi,welcome to my <a href="https://7756jokerqaq.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadLivere () {
  if (typeof LivereTower === 'object') {
    window.LivereTower.init()
  }
  else {
    (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
    })(document, 'script');
  }
}

if ('Livere' === 'Livere' || !false) {
  if (false) btf.loadComment(document.getElementById('lv-container'), loadLivere)
  else loadLivere()
}
else {
  function loadOtherComment () {
    loadLivere()
  }
}</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="ftrue"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>