<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Linux学习笔记 | JokerQAQ的博客</title><meta name="keywords" content="Linux"><meta name="author" content="LiYiChen"><meta name="copyright" content="LiYiChen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="主要学习一些linux的常见指令和shell脚本的书写以及日志管理网路服务等基础内容">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux学习笔记">
<meta property="og:url" content="https://7756jokerqaq.github.io/2022/10/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/LINUX%E7%90%86%E8%AE%BA%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="JokerQAQ的博客">
<meta property="og:description" content="主要学习一些linux的常见指令和shell脚本的书写以及日志管理网路服务等基础内容">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/hellopicture.png">
<meta property="article:published_time" content="2022-10-18T16:00:00.000Z">
<meta property="article:modified_time" content="2022-10-19T07:10:39.956Z">
<meta property="article:author" content="LiYiChen">
<meta property="article:tag" content="Java后端">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/hellopicture.png"><link rel="shortcut icon" href="https://raw.githubusercontent.com/7756JokerQAQ/picodemoo/main/img/WebImg.png"><link rel="canonical" href="https://7756jokerqaq.github.io/2022/10/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/LINUX%E7%90%86%E8%AE%BA%E5%AD%A6%E4%B9%A0/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":null},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: LiYiChen","link":"链接: ","source":"来源: JokerQAQ的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux学习笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-10-19 15:10:39'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/self/duotone.css"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/wallhaven-4y6170_1920x1080.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/hellopicture.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">JokerQAQ的博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-10-18T16:00:00.000Z" title="发表于 2022-10-19 00:00:00">2022-10-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-19T07:10:39.956Z" title="更新于 2022-10-19 15:10:39">2022-10-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">29k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>101分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux学习笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="LINUX理论学习"><a href="#LINUX理论学习" class="headerlink" title="LINUX理论学习"></a>LINUX理论学习</h1><p>网络链接的三种模式：</p>
<p>1.桥接模式，虚拟系统可以和外部系统通讯，但容易造成IP冲突</p>
<p>2.NAT模式，网络地址转换模式，虚拟系统可以和外部系统通讯，不造成IP冲突</p>
<p>3.主机模式：独立的系统</p>
<h4 id="2-虚拟机克隆"><a href="#2-虚拟机克隆" class="headerlink" title="2.虚拟机克隆"></a>2.虚拟机克隆</h4><ol>
<li>直接拷贝一份安装好的虚拟机文件</li>
<li>使用vmware软件</li>
<li>注意科隆时关闭虚拟机linux系统</li>
</ol>
<h4 id="3-虚拟机的快照"><a href="#3-虚拟机的快照" class="headerlink" title="3.虚拟机的快照"></a>3.虚拟机的快照</h4><p>如果在使用虚拟机系统的时候，想回到原先的某一个状态，也就是担心有可能进行误操作造成的系统的异常，需要回到原先某个正常运行的状态，vmware也提供了这样的功能叫做快照管理。</p>
<p>应用实例：</p>
<ol>
<li>安装好系统以后，先做一个快照A</li>
<li>进入到系统创建一个文件夹，再存一个快照b</li>
<li>回到系统刚刚安装好的状态即快照A</li>
</ol>
<h4 id="3-Linux目录结构"><a href="#3-Linux目录结构" class="headerlink" title="3. Linux目录结构"></a>3. Linux目录结构</h4><ol>
<li>Linux的文件系统时采用级层式的树状目录结构</li>
<li>在Linux 中一切皆文件</li>
</ol>
<p><strong>目录结构详解</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/d253f567a574442c98facc4e74aebf66.bmp" alt="img"></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><strong>目录</strong></th>
<th style="text-align:center"><strong>注解</strong></th>
<th style="text-align:center"><strong>介绍</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">/bin</td>
<td style="text-align:center">常用</td>
<td style="text-align:center">是 Binary 的缩写, 这个目录存放着最经常使用的命令；子目录：/usr/bin 和 /usr/local/bin</td>
</tr>
<tr>
<td style="text-align:center">/sbin</td>
<td style="text-align:center"></td>
<td style="text-align:center">s 就是 Super User 的意思，这里存放的是系统管理员使用的系统管理程序；子目录：/usr/sbin 和 /usr/local/sbin</td>
</tr>
<tr>
<td style="text-align:center">/home</td>
<td style="text-align:center">常用</td>
<td style="text-align:center">存放普通用户的主目录，在 Linux 中每个用户都有一个自己的目录，一般该目录名是以用户的账号命名</td>
</tr>
<tr>
<td style="text-align:center">/root</td>
<td style="text-align:center">常用</td>
<td style="text-align:center">该目录为系统管理员，也称作超级权限者的用户主目录</td>
</tr>
<tr>
<td style="text-align:center">/lib</td>
<td style="text-align:center"></td>
<td style="text-align:center">系统开机所需要最基本的动态连接共享库，其作用类似于 Windows 里的 DLL 文件。几乎所有的应用程序都需要用到这些共享库</td>
</tr>
<tr>
<td style="text-align:center">/etc</td>
<td style="text-align:center">常用</td>
<td style="text-align:center">所有的系统管理所需要的配置文件和子目录, 比如安装 mysql 数据库 my.conf</td>
</tr>
<tr>
<td style="text-align:center">/user</td>
<td style="text-align:center">常用</td>
<td style="text-align:center">这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似与 windows 下的 program files 目录</td>
</tr>
<tr>
<td style="text-align:center">/boot</td>
<td style="text-align:center">常用</td>
<td style="text-align:center">存放的是启动 Linux 时使用的一些核心文件，包括一些连接文件以及镜像文件</td>
</tr>
<tr>
<td style="text-align:center">/proc</td>
<td style="text-align:center"></td>
<td style="text-align:center">这个目录是一个虚拟的目录，它是系统内存的映射，访问这个目录来获取系统信息</td>
</tr>
<tr>
<td style="text-align:center">/srv</td>
<td style="text-align:center"></td>
<td style="text-align:center">service 缩写，该目录存放一些服务启动之后需要提取的数据</td>
</tr>
<tr>
<td style="text-align:center">/sys</td>
<td style="text-align:center"></td>
<td style="text-align:center">这是 linux2.6 内核的一个很大的变化。该目录下安装了 2.6 内核中新出现的一个文件系统 sysfs</td>
</tr>
<tr>
<td style="text-align:center">/tmp</td>
<td style="text-align:center"></td>
<td style="text-align:center">这个目录是用来存放一些临时文件的</td>
</tr>
<tr>
<td style="text-align:center">/dev</td>
<td style="text-align:center"></td>
<td style="text-align:center">类似于 windows 的设备管理器，把所有的硬件用文件的形式存储</td>
</tr>
<tr>
<td style="text-align:center">/media</td>
<td style="text-align:center">常用</td>
<td style="text-align:center">linux 系统会自动识别一些设备，例如 U 盘、光驱等等，当识别后，linux 会把识别的设备挂载到这个目录下</td>
</tr>
<tr>
<td style="text-align:center">/mnt</td>
<td style="text-align:center">常用</td>
<td style="text-align:center">系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mnt/上，然后进入该目录就可以查看里的内容了。 (比如共享文件)</td>
</tr>
<tr>
<td style="text-align:center">/opt</td>
<td style="text-align:center"></td>
<td style="text-align:center">这是给主机额外安装软件所存放的目录(想要安装某个软件，把它的安装软件放在这个目录下)。如想要在虚拟系统上安装 ORACLE 数据库就可以先把其安装文件放在该目录下。默认为空</td>
</tr>
<tr>
<td style="text-align:center">/user/local</td>
<td style="text-align:center">常用</td>
<td style="text-align:center">这是另一个给主机额外安装软件所安装的目录(软件安装后的目标目录)。一般是通过编译源码方式安装的程序</td>
</tr>
<tr>
<td style="text-align:center">/var</td>
<td style="text-align:center">常用</td>
<td style="text-align:center">这个目录中存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下。包括各种日志文件</td>
</tr>
<tr>
<td style="text-align:center">/selinux</td>
<td style="text-align:center">security-enhanced linux</td>
<td style="text-align:center">SELinux 是一种安全子系统,它能控制程序只能访问特定文件, 有三种工作模式，可以自行设置. 类似于360，保证系统安全。这个目录看不到，因为没有被启用</td>
</tr>
</tbody>
</table>
</div>
<h4 id="4-为什么需要远程登录Linux"><a href="#4-为什么需要远程登录Linux" class="headerlink" title="4.为什么需要远程登录Linux"></a>4.为什么需要远程登录Linux</h4><p>说明: 公司开发时候，具体的应用场景是这样的：</p>
<ol>
<li>linux 服务器是开发小组共享 </li>
<li>正式上线的项目是运行在公网</li>
<li>因此程序员需要远程登录到 Linux 进行项目管理或者开发</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/6db4149faa9c4a2f82cce5210927803e.bmp" alt="img"></p>
<p><strong>Xshell和Xftp6</strong></p>
<p>远程登录工具Xshell：<br>    1.Xshell 是目前最好的远程登录到 Linux 操作的软件，流畅的速度并且完美解决了中文乱码的问题，是目前程序员首选的软件。<br>    2.Xshell 是一个强大的安全终端模拟软件，它支持 SSH1, SSH2, 以及 Microsoft Windows 平台的 TELNET 协议。<br>    3.Xshell 可以在 Windows 界面下用来访问远端不同系统下的服务器，从而比较好的达到远程控制终端的目的。</p>
<p>注意：<br>1.使用Xshell之前，需要知道Linux的ip地址<br>    如何知道ip地址？<br>        在Linux中，鼠标右击桌面打开终端，输入ifconfig指令，ens33中，就可以知道ip地址了。<br>2.要保证本机可以ping通虚拟主机<br>    在本机DOS命令窗口中输入命令：ping 虚拟主机ip地址</p>
<p>登录Xshell：<br>    打开Xshell—-&gt;添加会话—-&gt;主机(虚拟主机ip地址)—-&gt;确定<br>    双击密钥—-&gt;选择接受并保存主机密钥(就不用重复接受了)<br>    远程登陆成功</p>
<p>远程上传下载文件Xftp：<br>    是一个基于 windows 平台的功能强大的 SFTP、FTP 文件传输软件。<br>    使用了 Xftp 以后，windows 用户能安全地在 UNIX/Linux 和 Windows PC 之间传输文件</p>
<pre><code>操作同上
注意：xftp打开时乱码：属性---&gt;选项---&gt;UTF-8编码
</code></pre><h4 id="5-vi-和-vim-的基本介绍"><a href="#5-vi-和-vim-的基本介绍" class="headerlink" title="5. vi 和 vim 的基本介绍"></a>5. vi 和 vim 的基本介绍</h4><p> <strong>Linux 系统会内置 vi 文本编辑器</strong></p>
<p>​     Vim可以看作是Vi的增强版本，Vim 具有程序编辑的能力，可以主动的以字体颜色辨别语法的正确性，方便程序设计。代码补完、编译及错误跳转等方便编程的功能特别丰富。</p>
<p> <strong>vi 和 vim 常用的三种模式</strong></p>
<ol>
<li>正常模式： 以 vim 打开一个档案就直接进入一般模式了(这是默认的模式)。 在这个模式中，你可以使用『上下左右』按键来移动光标， 可以使用『删除字符』或『删除整行』来处理档案内容， 也可以使用『复制、粘贴』来处理你的文件数据。</li>
<li>插入模式 按下 i, I, o, O, a, A, r, R 等任何一个字母之后才会进入编辑模式, 一般来说按 i 即可. 可以写东西了。 </li>
<li>命令行模式 在这个模式当中，可以提供你相关指令，完成读取、存盘、替换、离开 vim，显示行号等动作。</li>
</ol>
<p><strong>例子：</strong></p>
<figure class="highlight tcl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs tcl">案例：使用 vim 开发一个 Hello.java 程序<br>使用xshell登录编写(因为以后工作都是这样写的)：<br>	首先输入：vi Hello.java 或者 vim Hello.java (使用vim编辑器编写java程序)<br>	回车后进入正常模式<br>	之后输入i等字母，进入插入模式(编辑模式)<br>	然后可是写代码：<br>		public class Hello{<br>			public static void main(String[] args){<br>				System.out.println(<span class="hljs-string">"Hello World"</span>);<br>			}<br>		}<br>	然后保存，怎么保存？<br>		先 按 Esc 回到正常模式<br>		然后输入冒号:  接着输入wq (代表写入并退出write quit)<br>		回车<br>	结束<br>	输入ls命令，就可以看到Hello.java文件<br>	还想修该文件：再输入 vim Hello.java (按Tab键 代码补全) 就有回到了上面<br><br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/138b0786b5ae48c8a5d0fdbc2c712419.bmp" alt="img"></p>
<p> <strong>vi 和 vim 快捷键</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">快捷键</th>
<th style="text-align:center">模式</th>
<th style="text-align:center">介绍</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">yy</td>
<td style="text-align:center">正常模式</td>
<td style="text-align:center">复制当前行</td>
</tr>
<tr>
<td style="text-align:center">p</td>
<td style="text-align:center">正常模式</td>
<td style="text-align:center">粘贴</td>
</tr>
<tr>
<td style="text-align:center">5yy</td>
<td style="text-align:center">正常模式</td>
<td style="text-align:center">复制当前行向下的5行</td>
</tr>
<tr>
<td style="text-align:center">dd</td>
<td style="text-align:center">正常模式</td>
<td style="text-align:center">删除当前行</td>
</tr>
<tr>
<td style="text-align:center">5dd</td>
<td style="text-align:center">正常模式</td>
<td style="text-align:center">删除当前行向下的5行</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight tcl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs tcl">在文件中查找某个单词：<br>	初始在正常模式，输入/，进入命令行模式，然后输入要查找的单词，回车查找<br>	输入n查找到下一个<br>	想查找另一个单词：输入/，重复上述即可<br>正常模式---&gt;命令行模式<br>给文件每行设置行号：<br>	先冒号: <br>	然后<span class="hljs-keyword">set</span> nu  (<span class="hljs-keyword">set</span> number)<br>	回车<br>取消行号：<br>	先冒号:<br>	然后<span class="hljs-keyword">set</span> nonu<br>	回车<br>快捷键到该文档的最首行(正常模式)：gg<br>快捷键到该文档的最末行(正常模式)：G<br>撤销动作(比如删除某一行，发现删错了，然后恢复这一行)(正常模式)：u<br>在某个文件中，想让光标移动到第<span class="hljs-number">20</span>行(正常模式)：输入<span class="hljs-number">20</span>，再输入 shift+g<br>更多的快捷键：有整理的文档和下图<br><br></code></pre></td></tr></tbody></table></figure>
<p> <strong>关机和重启命令</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">命令</th>
<th style="text-align:center">介绍</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>shutdown -h now</code></td>
<td style="text-align:center">立即关机(h—&gt;halt停止)</td>
</tr>
<tr>
<td style="text-align:center"><code>halt</code></td>
<td style="text-align:center">立即关机，同上</td>
</tr>
<tr>
<td style="text-align:center"><code>shutdown</code></td>
<td style="text-align:center">1分钟后关机</td>
</tr>
<tr>
<td style="text-align:center"><code>shutdown -h 1</code></td>
<td style="text-align:center">同上，给每一个登录到Linux系统的用户发一条消息：1分钟后关机</td>
</tr>
<tr>
<td style="text-align:center"><code>shutdown -h 2</code></td>
<td style="text-align:center">2分钟后关机</td>
</tr>
<tr>
<td style="text-align:center"><code>shutdonw -r now</code></td>
<td style="text-align:center">现在重新启动(r—&gt;rboot重启)</td>
</tr>
<tr>
<td style="text-align:center"><code>reboot</code></td>
<td style="text-align:center">现在重新启动，同上</td>
</tr>
<tr>
<td style="text-align:center"><code>sync</code></td>
<td style="text-align:center">把内存的数据同步到磁盘</td>
</tr>
<tr>
<td style="text-align:center">注意</td>
<td style="text-align:center">不管是重启还是关机，首先要运行 sync 命令，把内存中的数据写到磁盘中；目前的 <code>shutdown/reboot/halt</code> 等命令均已经在关机前进行了sync，但还是手动执行一下sync保险</td>
</tr>
</tbody>
</table>
</div>
<p> <strong>用户登录和注销</strong></p>
<p><strong>用户登录：</strong><br>    登录时尽量少用 root 帐号登录，因为它是系统管理员，最大的权限，避免操作失误。<br>    而且以后也用不到root，除非你是系统管理员。<br>    可以利用普通用户登录，登录后再用”su - 用户名’命令来切换成系统管理员身份.</p>
<p><strong>注销：</strong><br>    在提示符下输入 logout  即可注销用户</p>
<p>注意：logout 注销指令在图形运行级别无效，在运行级别 3 下有效.<br>运行级别后面讲。</p>
<p><strong>验证：</strong><br>    使用普通用户登录<br>    使用Xshell远程登陆Linux<br>    输入命令：su - root   变为root用户<br>    再输入：logout  注销用户回到普通用户<br>    再输入：logout 退出系统</p>
<p><strong>注意：</strong>退出系统后，如何要重新连接到Linux，双击左栏会话再重新输入即可。</p>
<h4 id="6-Linux-实操篇"><a href="#6-Linux-实操篇" class="headerlink" title="6.Linux 实操篇"></a>6.Linux 实操篇</h4><ol>
<li><strong>介绍</strong></li>
</ol>
<p>Linux 系统是一个多用户多任务的操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。</p>
<p>一个Linux系统中只有一个root用户，但是由root用户可以创建多个其他用户，可以给这些用户分配权限，<br>其中每个用户会对应一个目录，这个目录叫做家目录。</p>
<ol>
<li><strong>添加用户</strong></li>
</ol>
<p>语法：<strong>useradd 用户名</strong><br>比如：useradd milan 注册新用户milan</p>
<p>注意：当创建用户成功后，会自动创建和用户同名的家目录，该用户的家目录默认在home目录下</p>
<p>也可以给新用户指定家目录：<strong>useradd -d 指定目录 新用户名</strong><br>比如：<strong>useradd -d /home/test king 创建一个新用户king，其家目录test</strong></p>
<ol>
<li><strong>指定修改密码</strong></li>
</ol>
<p>语法：<strong>passwd 用户名</strong>  给某个用户设置/更改密码</p>
<p>注意：要写用户名。不写用户名默认设置当前用户，如果当前用户是root就麻烦了。</p>
<p>比如：给milan设置密码 </p>
<p>命令：pwd —-&gt;显示当前用户所在目录 Print Working Directory</p>
<ol>
<li><strong>删除账户</strong></li>
</ol>
<p>语法： <strong>userdel 用户名</strong></p>
<p>普通用户不能删除别的用户，只有root用户可以；并且不能自己删除自己</p>
<ul>
<li><p>删掉用户，但是保留其家目录：    userdel 用户名</p>
</li>
<li><p>将用户和其家目录一起删除(这个操作要谨慎)：  user -r 用户名</p>
</li>
</ul>
<p>​     一般情况，建议保留家目录(不删除)</p>
<ol>
<li><strong>查询用户信息</strong></li>
</ol>
<p><strong>语法：id 用户名</strong><br>id root:<br><code>uid=0(root) gid=0(root) 组=0(root)  userid是0 gruopid组id是0 所在组0</code></p>
<p>当用户不存在：返回无此用户 no such user</p>
<ol>
<li><strong>切换用户</strong></li>
</ol>
<p>在操作 Linux 中，如果当前用户的权限不够，可以通过 su - 指令，切换到高权限用户(比如 root)</p>
<p>语法： <strong>su - 切换用户名</strong></p>
<p>注意：</p>
<ul>
<li>从权限高的用户切换到权限低的用户，不需要输入密码，反之需要。</li>
<li>当需要返回到原来用户时，使用 exit/logout 指令</li>
</ul>
<ol>
<li><strong>查看当前用户</strong></li>
</ol>
<p><strong>语法：who am i 或者 who am I</strong><br><code>who am i ---&gt;第一个登录该系统的用户信息</code></p>
<p>假设A用户登录系统，切换到B用户，B输入命令who am i，输出的还是A用户的信息</p>
<ol>
<li><strong>用户组</strong></li>
</ol>
<p>介绍：类似于角色，系统可以对有共性/有相同的权限的多个用户进行统一的管理</p>
<p><strong>新增组：groupadd 组名</strong></p>
<p>介绍：类似于角色，系统可以对有共性/有相同的权限的多个用户进行统一的管理<br><strong>新增组：groupadd 组名</strong><br>    例子：增加一个用户zwj，把他直接放到组wudang中<br>    命令：<br>        <strong><code>groupadd wudang</code></strong><br>        <strong><code>useradd -g wudang zwj</code></strong><br><code>id zwj：uid=1001(zwj) gid=1001(wudang) 组=1001(wudang)</code><br>修改用户的组：<strong>usermod -g 用户组 用户名</strong><br>    例子：把zwj 放到组 mojiao 中<br>    命令：<br>        <code>groupadd mojiao</code><br>        <code>usermod -g mojiao zwj</code><br>        <code>id zwj：uid=1001(zwj) gid=1002(mojiao) 组=1002(mojiao)</code><br>    新增一个用户john，怎么把john放进组mojiao中？<br>        <code>useradd jhon</code><br>        <code>usermod -g mojiao jhon</code><br>        新增一个用户john，john在以自己的名字命名的组john中，从john组到mojiao组<br><strong>删除组：groupdel 组名</strong></p>
<ol>
<li><strong>用户和组的相关文件</strong></li>
</ol>
<p>(1)<code>/etc/passwd</code> 文件<br>每增加一个用户，就会把用户的信息保存到该文件。<br>用户（user）的配置文件，记录用户的各种信息<br>每行都是一个用户，每行的含义：用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell</p>
<p>主目录：用户所在的家目录</p>
<p>shell：命令解释程序<br>    将发布的指令通过shell解析，再传给Linux内核<br>    Linux是看不懂发布的指令的<br>    shell有很多种，中国一般用的是bash</p>
<p>命令：<code>vim /etc/passwd</code> 可以查看该文件(还有其他命令)</p>
<p>(2)/etc/shadow 文件<br>口令的配置文件<br>每行的含义：登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志</p>
<p>(3)<code>/etc/group</code> 文件<br>组(group)的配置文件，记录 Linux 包含的组的信息每行含义：组名:口令:组标识号:组内用户列表</p>
<h4 id="7-Linux-实操篇-实用指令"><a href="#7-Linux-实操篇-实用指令" class="headerlink" title="7.Linux 实操篇-实用指令"></a>7.Linux 实操篇-实用指令</h4><ol>
<li>运行级别</li>
</ol>
<p>Linux系统运行级别：<br>0：关机<br>1：单用户【可以找回丢失密码】<br>2：多用户状态没有网络服务(一般不用，没网络)<br>3：多用户状态有网络服务<br>4：系统未使用保留给用户<br>5：图形界面<br>6：系统重启<br>常用运行级别是 3 和 5</p>
<p>切换运行级别命令：init 选0-6</p>
<p>指定默认运行级别：<br>    CentOS7之前是在文件<code>/etc/inittab</code>文件中设置<br>    CentOS7之后对设置进行了简化：<br>        用 <code>multi-user.target</code> 代表3运行级别<br>        用 <code>graphical.target</code> 代表5运行级别<br>        7版本之后主要用3和5运行级别。</p>
<p>用命令：<code>systemctl get-default</code> 查看当前系统运行级别<br>用命令：<code>systemctl set-default multi-user.target /graphical.target</code>  设置默认运行级别</p>
<ol>
<li><strong>帮助指令</strong></li>
</ol>
<p><strong>语法：man 命令或配置文件</strong><br>是manual的简写，manual是手册的意思</p>
<p>功能：获得帮助信息<br>例子：查看ls命令的帮助信息</p>
<p>输入 man ls 之后，会看到ls的具体信息(要回到前一个页面，输入q)<br>注意：可能不止一页，使用空格或下键，可以往下看</p>
<p>ls命令：列出目录内容<br>格式：<code>ls [选项] [文件名...]</code><br>     <code>ls  -a</code>  —-&gt;列出所有文件，包括隐藏文件(隐藏文件以 . 开头)<br>     <code>ls  -l</code>  —-&gt;单列输出 </p>
<p>选项以 - 开始<br>选项可以组合使用，没有顺序：<br>比如： ls -al  也可以 ls -a -l  表示列出所有的文件 并 单列输出</p>
<p>ls默认是对当前目录下的文件<br>也可以指定某个目录：</p>
<p>如： <code>ls -al /root</code>  把root目录下的所有文件单列输出</p>
<p>语法：help 命令<br>功能：获得 shell 内置命令的帮助信息<br>例子：查看 cd 命令的帮助信息<code>help cd</code></p>
<p>语法：man [命令或配置文件]<br>功能：获得帮助信息<br>例子：查看ls命令的帮助信息<code>man ls</code></p>
<ol>
<li><strong>文件目录指令</strong></li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">基本语法：pwd    (print working directory)<br>功能：显示当前目录的绝对路径<br>---------------------------------------------------------------------<br><br>基本语法：ls [选项] [目录或是文件]<br>常用选项：<br>	-a：显示当前目录所有的文件和目录，包括隐藏的。<br>	-l：以列表的方式显示信息<br>---------------------------------------------------------------------<br><br>基本语法：cd [参数]	<br>功能：切换到指定目录<br><br>cd ~ 或者 cd ---&gt;回到当前用户的家目录 <br>cd ..   ---&gt;回到当前目录的上一级目录<br><br>案例 1：使用绝对路径切换到 root 目录<br>	cd /root<br>	<br>案例 2：使用相对路径到 root 目录<br>	比如当前在 /home/tom <br>		cd ../../root    ../..回到了根目录,再/root<br>		<br>---------------------------------------------------------------------<br><br>基本语法：mkdir [选项] 要创建的目录路径<br>功能：创建目录<br>常用选项：<br>	-p：创建多级目录<br><br>案例1：在home下创建一个目录dog<br>	mkdir /home/dog<br>	<br>案例2：在home下创建多级目录 /home/animal/tiger <br>	mkdir -p /home/animal/tiger<br><br>---------------------------------------------------------------------<br><br>基本语法：rmdir [选项] 要删除的空目录路径<br>功能：删除一个空目录<br><br>案例:删除一个目录 /home/dog<br>	rmdir /home/dog<br><br>注意：<br>	rmdir 删除的是空目录，如果目录下有内容是无法删除的。<br>	如果需要删除非空目录，需要使用命令：rm -rf 要删除的目录<br>	比如： 删除animal目录<br>		rm -rf /home/animal<br>---------------------------------------------------------------------<br><br>基本语法：touch 文件名称<br>功能：创建空文件<br><br>案例:：在/home 目录下，创建一个空文件 hello.txt<br>	touch /home/hello.txt<br>	或者当前目录是home：touch hello.text<br><br>---------------------------------------------------------------------<br><br>基本语法：cp [选项] 被拷贝的文件 拷贝到哪个地方<br>功能：拷贝文件到指定目录<br>常用选项：<br>	-r：递归复制整个文件夹<br><br>案例1：将 /home/hello.txt  拷贝到	/home/bbb  目录下<br>	若在根目录下操作：<br>	先创建 bbb目录<br>		mkdir /home/bbb<br>	然后复制<br>		cp /home/hello.txt /home/bbb<br>	<br>案例2：递归复制整个文件夹，比如将 /home/bbb 整个目录，拷贝到 /opt <br>	cp -r /home/bbb /opt<br><br>注意：强制覆盖不提示的方法：\cp	<br>	\cp -r /home/bbb /opt<br><br>---------------------------------------------------------------------<br><br>基本语法：rm	[选项] 要删除的文件或目录<br>功能：移除文件或目录<br>常用选项：<br>	-r：递归删除整个文件夹<br>	-f：强制删除不提示<br><br>案例1：将 /home/hello.txt 删除 <br>	rm	/home/hello.txt<br>	<br>案例2：递归删除整个文件夹 /home/bbb ，并不提示<br>	rm -rf /home/bbb <br>	<br>注意：强制删除不提示的方法：带上 -f 参数即可<br>---------------------------------------------------------------------<br><br>功能：移动文件与目录或重命名<br>基本语法：<br>	mv	原文件名 新文件名 	     (功能描述：重命名)<br>	mv  被移动的文件 移动到哪   (功能描述：移动文件)<br><br>案例 1: 将 /home/cat.txt 文件 重新命名为 pig.txt<br>	[root@hspEdu01 ~]# cd /home<br>	[root@hspEdu01 home]# touch cat.txt<br>	[root@hspEdu01 home]# ls<br>	cat.txt  jack  king  milan  zwj<br>	[root@hspEdu01 home]# mv cat.txt pig.txt<br>	[root@hspEdu01 home]# ls<br>	jack  king  milan  pig.txt  zwj<br><br>案例 2:将 /home/pig.txt	文件 移动到 /root 目录下<br>	[root@hspEdu01 home]# mv pig.txt /root<br>	[root@hspEdu01 home]# ls<br>	jack  king  milan  zwj<br>	[root@hspEdu01 home]# cd /root<br>	[root@hspEdu01 ~]# ls	<br>	Hello.java  pig.txt <br><br>移动并重名：mv pig.txt /root/cow.txt<br><br>案例 3: 移动整个目录,比如将 /opt/bbb  移动到 /home 下<br>	 mv /opt/bbb /home/<br><br>---------------------------------------------------------------------<br>前面学过一个查看：vim<br>cat也可以查看，cat只能查看不能修改，cat更安全。<br><br>基本语法：cat	[选项] 要查看的文件<br>功能：查看文件内容<br>常用选项：<br>	-n：显示行号<br><br>案例1：查看 /etc/profile 文件内容，并显示行号。<br>	cat	-n /etc/profile <br>注意：<br>	cat 只能浏览文件，而不能修改文件；为了浏览方便再加上管道命令 | more <br>	管道命令：把前面的结果再交给下一个指令进行处理。<br>		语法：| 其他指令<br>		<br>	cat	-n /etc/profile | more <br>		意思：先执行cat -n /etc/profile 然后，按回车键输出一行，按空格翻页等。<br><br>---------------------------------------------------------------------<br><br>基本语法：more 要查看的文件<br>功能：<br>more 指令是一个基于 VI 编辑器的文本过滤器，它以全屏幕的方式按页显示文本文件的内容。<br>more 指令中内置了若干快捷键(交互的指令)，详见操作说明：<br><br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/567c27b6513c4c8f948226bc232b38dc.bmp" alt="img"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">基本语法：less 要查看的文件<br>功能：<br>less 指令用来分屏查看文件内容，它的功能与 more 指令类似，但是比 more 指令更加强大，支持各种显示终端。<br>less 指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，对于显示大型文件具有较高的效率。<br><br>有一个文件是100M，用vim查看会将其全部加载再显示出来，这样会很慢。<br>使用less，会先加载一部分显示出来，再根据指令显示剩下的，这样更快。<br><br>所以要查找一些大的文件，建议用less。<br>案例: 采用 less 查看一个大文件文件 /opt/杂文.txt<br>首先使用xftp将杂文.txt传输到opt下<br>然后输入指令：less /opt/杂文.txt  <br><br>下面操作中：<br>	想要找某个字或词<br>	输入：/要找的字或词    然后按n向下找  按N向上找<br>操作说明：<br></code></pre></td></tr></tbody></table></figure>
<h2 id="第七章-Linux-实操-开机、重启和用户注销"><a href="#第七章-Linux-实操-开机、重启和用户注销" class="headerlink" title="第七章 Linux 实操-开机、重启和用户注销"></a>第七章 Linux 实操-开机、重启和用户注销</h2><h3 id="7-1-关机-amp-重启命令"><a href="#7-1-关机-amp-重启命令" class="headerlink" title="7.1 关机&amp;重启命令"></a>7.1 关机&amp;重启命令</h3><ul>
<li><code>shutdown</code>   -h   now     立刻进行关机</li>
<li>shutdown   -h     1               “hello,1分钟后就会关机了” </li>
<li>shutdown    -r     now             现在重新启动计算机</li>
<li>halt                                            关机</li>
<li>reboot                                      现在重新启动计算机</li>
<li>sync                                           把内存的数据同步到磁盘上</li>
</ul>
<p>注意：不管重启系统还是关闭系统，首先要运行sync命令，把内存的数据写到磁盘中</p>
<p>其中<code>shutdown/reboot/halt</code> 等命令均已在关机前进行了sync</p>
<h3 id="7-2-用户登录和注销"><a href="#7-2-用户登录和注销" class="headerlink" title="7.2  用户登录和注销"></a>7.2  用户登录和注销</h3><ol>
<li><code>su -用户名</code>用来切换成管理员身份和用户身份</li>
<li><code>logout</code> 立即注销用户</li>
</ol>
<p>注意：<code>logout</code>注销命令在图形运行级别无效，在运行级别3以下有效</p>
<h2 id="第八章-LINUX实操篇-用户管理"><a href="#第八章-LINUX实操篇-用户管理" class="headerlink" title="第八章 LINUX实操篇-用户管理"></a>第八章 LINUX实操篇-用户管理</h2><h3 id="8-1-基本介绍"><a href="#8-1-基本介绍" class="headerlink" title="8.1 基本介绍"></a>8.1 基本介绍</h3><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221019090240881.png" alt="image-20221019090240881"></p>
<h3 id="8-2-添加用户"><a href="#8-2-添加用户" class="headerlink" title="8.2 添加用户"></a>8.2 添加用户</h3><h4 id="8-2-1-基本语法"><a href="#8-2-1-基本语法" class="headerlink" title="8.2.1 基本语法"></a>8.2.1 基本语法</h4><p><code>useradd</code> 用户名</p>
<ul>
<li>细节:当创建用户完成后，会自动创建和用户同名的家目录</li>
<li>也可以通过useradd -d 指定目录 新的用户名 ，给新创建的用户指定家目录</li>
</ul>
<h3 id="8-3-指定修改密码"><a href="#8-3-指定修改密码" class="headerlink" title="8.3 指定修改密码"></a>8.3 指定修改密码</h3><p><code>passwd</code> 用户名           例子：  passwd    milan   给米蓝 指定密码</p>
<h3 id="8-4-删除用户"><a href="#8-4-删除用户" class="headerlink" title="8.4 删除用户"></a>8.4 删除用户</h3><p><code>userdel</code>   用户名</p>
<ul>
<li>userdel  milan  删除用户但是保留家目录</li>
<li>删除用户及用户的主目录：userdel -r tom</li>
</ul>
<h3 id="8-5-查询用户信息指令"><a href="#8-5-查询用户信息指令" class="headerlink" title="8.5 查询用户信息指令"></a>8.5 查询用户信息指令</h3><p>id 用户名       例如   # id  root    查询root的信息 </p>
<p>细节：当用户不存在是，返回无此用户</p>
<h3 id="8-6-切换用户"><a href="#8-6-切换用户" class="headerlink" title="8.6 切换用户"></a>8.6 切换用户</h3><p>su       切换用户名</p>
<ul>
<li>从权限高的用户切换到权限低的用户，不需要输入密码反之需要</li>
<li>当需要返回到原来用户的桌面是，使用exit/logout 指令</li>
</ul>
<h3 id="8-7-查看当前用户-登录用户"><a href="#8-7-查看当前用户-登录用户" class="headerlink" title="8.7 查看当前用户/登录用户"></a>8.7 查看当前用户/登录用户</h3><p><code>whoami/ who  an  i</code></p>
<h3 id="8-8-用户组"><a href="#8-8-用户组" class="headerlink" title="8.8 用户组"></a>8.8 用户组</h3><p><code>groupadd</code>   组名</p>
<p>删除组：<code>gropudel</code> 组名</p>
<ul>
<li>增加用户时直接加入组</li>
<li>useradd -g 用户组  用户名</li>
<li>增加一个用户 zwj  直接指定他的组为 wudang</li>
<li>groupadd wudang           useradd -g wudang zwj</li>
</ul>
<p>修改用户的组</p>
<figure class="highlight plaintext"><figcaption><span>-g```  用户组  用户名</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><code class="hljs usermod"><br>### 8.9 用户和组的相关文件<br><br>`/etc/passwd` 文件 每行的含义 :用户名：口令：用户标识符：注释性描述：主目录：登录Shell<br><br>`/etc/shadow` 文件 每行的含义：登录名：加密口令：最后一次修改的时间：最小时间间隔：最大时间间隔：不活动时间：失效时间：标志<br><br>`/etc/group` 文件  每行的含义:组名：组标识号：组内用户列表<br><br>## 第九章 LINUX实操篇-实用指令<br><br>0：关机<br><br>1：单用户【可以找回丢失密码】<br><br>2：多用户状态没有网络服务(一般不用，没网络) <br><br>3：多用户状态有网络服务 <br><br>4：系统未使用保留给用户 <br><br>5：图形界面 <br><br>6：系统重启<br><br>常用运行级别是 3 和 5  切换运行级别命令：init  * (选则0-6的一个)<br><br>CentOS7之前是在文件/etc/inittab文件中设置在其之后设置进行了简化：<br><br>`multi-user.target:analogous to runlevel 3`<br><br>`graphical.target:analogous to runlevel 5`<br><br>`systemctl get-default` 查看当前系统运行级别<br><br>`systemctl set-default multi-user.target /graphical.target`  设置默认运行级别<br><br>**找回用户密码**<br><br>1. 再开机启动进入开机界面按'e'进入编辑界面然后<br>2. 找到以 LINXU16开头的行 在最后输入的`init=/bin/sh`<br>3. 输入完成后按`Ctrl+x`进入单用户模式<br>4. 接着在光标闪烁的位置中输入 : `mount -o remount,rw /` 每个单词间有空格 完成后回车<br>5. 在新的一行最后输入: passwd  完成修改 再次输入密码<br>6. 接着在鼠标闪烁的最后一行中输入:`touch /.autorelable`  (注意touch与/后有一个空格)完成后回车<br>7. 接着在输入 `exec /sbin/init` 完成后回车等待系统重启<br><br>**帮助指令**<br><br>man 【命令或配置文件】<br><br>例如 输入 `man ls` 之后，会看到ls的具体信息(要回到前一个页面，输入q)<br><br>ls   （列出目录内容）<br><br>指令：ls [选项] [文件名...]<br><br>​            ls  -a  ---&gt;列出所有文件，包括隐藏文件(隐藏文件以 . 开头)<br><br>​			ls  -l  ---&gt;单列输出 <br><br>可以以 -开始使用组合，没有顺序<br><br>例如： `ls -al`  或者 `ls -a -l`  ：表示列出所有的文件并单列输出<br><br>​			`ls -al /root`  ：把root目录下的所有文件单列输出<br><br>`help` 命令：获得 shell 内置命令的帮助信息<br><br> **关于文件目录的指令**<br><br>`pwd    (print working directory)` ：显示当前目录的绝对路径<br><br>基本语法：`ls  [选项] [目录或是文件]`<br><br>常用选项：`-a：显示当前目录所有的文件和目录，包括隐藏的。`<br><br>​					`-l：以列表的方式显示信息`<br><br>基本语法：`cd [参数]`	  ：切换到指定目录<br><br>​					`cd ~ 或者 cd` ：回到当前用户的家目录 <br><br>​					`cd ..`  ：回到当前目录的上一级目录<br><br>​					`cd /root`：使用绝对路径切换到 root 目录<br><br>基本语法：`mkdir [选项] 要创建的目录路径` ：创建目录<br><br>​					`madir -p 要创建的目录路径` :   创建多级目录<br><br>例如： `mkdir /home/dog` ：在home下创建一个目录dog<br><br>​			`mkdir -p /home/animal/tiger`  ：在home下创建多级目录 /home/animal/tiger <br><br>基本语法：`rmdir [选项] 要删除的空目录路径`  ：删除一个空目录<br><br>注意： rmdir 删除的是空目录，如果目录下有内容是无法删除的。 如果需要删除非空目录，需要使用命令：rm -rf 要删除的目录<br><br>例如：`rm -rf /home/animal` ：删除animal目录<br><br>基本语法：`touch 文件名称 ` ：创建空文件<br><br>例如; `touch /home/hello.txt`  :在/home 目录下，创建一个空文件 hello.txt<br><br>基本语法：`cp [选项] 被拷贝的文件 拷贝到哪个地方 ` :拷贝文件到指定目录<br><br>​	选项		-r：递归复制整个文件夹<br><br> 例如：`cp /home/hello.txt /home/bbb` ：将 /home/hello.txt  拷贝到/home/bbb  目录下<br><br>​			`cp -r /home/bbb /opt `：递归复制整个文件夹，比如将 /home/bbb 整个目录，拷贝到 /opt <br><br>​			`\cp -r /home/bbb /opt` ：强制覆盖不提示的方法：\cp	<br><br>基本语法：`rm	[选项] 要删除的文件或目录` ：移除文件或目录<br><br>常用选项：-r：递归删除整个文件夹<br><br>​					-f：强制删除不提示<br><br>例如： `rm -rf /home/bbb`  ：递归删除整个文件夹 /home/bbb ，并不提示<br><br>注意：强制删除不提示的方法：带上 -f 参数即可<br><br>```shell<br>基本语法：<br>	mv	原文件名 新文件名 	     (功能描述：重命名)<br>	mv  被移动的文件 移动到哪   (功能描述：移动文件)<br>案例 :将 /home/cat.txt 文件 重新命名为 pig.txt<br>	[root@hspEdu01 ~]# cd /home<br>	[root@hspEdu01 home]# touch cat.txt<br>	[root@hspEdu01 home]# ls<br>	cat.txt  jack  king  milan  zwj<br>	[root@hspEdu01 home]# mv cat.txt pig.txt<br>	[root@hspEdu01 home]# ls<br>	jack  king  milan  pig.txt  zwj<br>案例 2:将 /home/pig.txt	文件 移动到 /root 目录下<br>	[root@hspEdu01 home]# mv pig.txt /root<br>	[root@hspEdu01 home]# ls<br>	jack  king  milan  zwj<br>	[root@hspEdu01 home]# cd /root<br>	[root@hspEdu01 ~]# ls	<br>	Hello.java  pig.txt <br>移动并重名：mv pig.txt /root/cow.txt<br>案例 3: 移动整个目录,比如将 /opt/bbb  移动到 /home 下<br>	 mv /opt/bbb /home/<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim 和 cat 都可以查看但是：cat只能查看不能修改，cat更安全。<br>基本语法：<br>cat	[选项] 要查看的文件<br>功能：查看文件内容<br>常用选项：<br>	-n：显示行号<br>案例1：查看 /etc/profile 文件内容，并显示行号。<br>		cat	-n /etc/profile<br>注意：        <br>cat 只能浏览文件，而不能修改文件；为了浏览方便再加上管道命令 | more <br>管道命令：把前面的结果再交给下一个指令进行处理。<br>	语法：| 其他指令		<br>		<br>cat	-n /etc/profile | more <br>意思：先执行cat -n /etc/profile 然后，按回车键输出一行，按空格翻页等。<br>基本语法：more 要查看的文件<br>功能:<br>more 指令是一个基于 VI 编辑器的文本过滤器，它以全屏幕的方式按页显示文本文件的内容。<br>more 指令中内置了若干快捷键(交互的指令)，详见操作说明：<br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221019100037822.png" alt="image-20221019100037822"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">基本语法：less 要查看的文件</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">功能：</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">less 指令用来分屏查看文件内容，它的功能与 more 指令类似，但是比 more 指令更加强大，支持各种显示终端。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">less 指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，对于显示大型文件具有较高的效率。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">有一个文件是100M，用vim查看会将其全部加载再显示出来，这样会很慢。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">使用less，会先加载一部分显示出来，再根据指令显示剩下的，这样更快。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">所以要查找一些大的文件，建议用less。</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例: 采用 less 查看一个大文件文件 /opt/杂文.txt</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">输入指令：</span><br>less /opt/杂文.txt  <br><span class="hljs-meta prompt_">#</span><span class="language-bash">下面操作中：</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	想要找某个字或词</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	输入：/要找的字或词    然后按n向下找  按N向上找</span><br></code></pre></td></tr></tbody></table></figure>
<p>操作说明：</p>
<p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221019100348211.png" alt="image-20221019100348211"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">基本语法：echo [选项]	[输出内容]<br><span class="hljs-meta prompt_">#</span><span class="language-bash">功能：输出内容到控制台</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例: 使用 <span class="hljs-built_in">echo</span>  指令输出环境变量</span><br>	echo $HOSTNAME (环境变量一般加$)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例: 使用 <span class="hljs-built_in">echo</span> 指令输出 hello,world!</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	输入：<span class="hljs-built_in">echo</span> hello,world!</span><br>		 echo "hello,world!"  #加不加引号都可以<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">功能：<span class="hljs-built_in">head</span> 用于显示文件的开头部分内容，默认情况下 <span class="hljs-built_in">head</span> 指令显示文件的前 10 行内容。</span><br>基本语法：<br>head  文件	    #(功能描述：查看文件头 10 行内容)<br>head -n 5 文件	#(功能描述：查看文件头 5 行内容，5 可以是任意行数)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例: 查看/etc/profile 的前面 5 行代码</span><br>	head -n 5 /etc/profile<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#功能：tail 用于输出文件中尾部的内容，默认情况下 tail 指令显示文件的前 10 行内容。</span></span><br>基本语法：<br>	tail 文件	    #（功能描述：查看文件尾 10 行内容）<br>	tail -n 5 文件	#（功能描述：查看文件尾 5 行内容，5 可以是任意行数）<br>	tail -f	文件	    #（功能描述：实时追踪该文档的所有更新，只要该文件改动了什么内容就可实时看到）<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">指令和&gt;&gt;指令：</span><br><span class="hljs-meta prompt_">	&gt; </span><span class="language-bash">输出重定向(覆盖)</span><br>    &gt;&gt; 追加<br>基本语法：<br>	ls -l &gt;文件1	         #(功能描述：将列表的内容写入文件1中(覆盖写))<br>	ls -al &gt;&gt;文件1        #(功能描述：将列表的内容追加到文件1的末尾)<br>	cat 文件 1 &gt; 文件 2	  #(功能描述：将文件 1 的内容覆盖到文件 2)<br>	echo "内容"&gt;&gt; 文件1     #(将内容追加到文件1的末尾)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 1: 将 /home 目录下的文件列表 写入到 /home/info.txt 中,覆盖写入。</span><br>	ls -l /home &gt; /home/info.txt	#[如果 info.txt 没有，则会自动创建] <br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 2: 将当前日历信息 追加到	/home/mycal 文件中</span><br>	cal &gt;&gt; /home/mycal<br><span class="hljs-meta prompt_">#</span><span class="language-bash">功能：给原文件创建一个软链接</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	 软链接也称为符号链接，类似于 windows 里的快捷方式，主要存放了链接其他文件的路径</span><br>基本语法：<br>	ln -s [原文件或目录] [软链接名] #（功能描述：给原文件创建一个软链接）<br>	ln是link<br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例1：在/home 目录下创建一个软连接 myroot，连接到 /root 目录</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">(这样 切换到myroot 其实就是切换到root)</span><br>	ln -s /root	/home/myroot<br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例2: 删除软连接 myroot</span> <br>	rm	/home/myroot<br><span class="hljs-meta prompt_">#</span><span class="language-bash">当我们使用 <span class="hljs-built_in">pwd</span> 指令查看目录时，仍然看到的是软链接所在目录。</span><br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">功能：查看已经执行过历史命令,也可以执行历史指令</span><br>基本语法：<br>	history #（功能描述：查看已经执行过历史命令）<br><span class="hljs-meta prompt_">#</span><span class="language-bash">	可以看其他登录的用户做了什么操作。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 1: 显示所有的历史命令</span><br>history<br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 2: 显示最近使用过的 10 个指令。</span><br>history 10<br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 3：执行历史编号为 5 的指令</span><br>!5<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs shell">date指令：<br>	1.显示当前日期<br>		基本语法：<br>			date	  （功能描述：显示当前时间）<br>			date +%Y  （功能描述：显示当前年份）<br>			date +%m  （功能描述：显示当前月份）<br>			date +%d  （功能描述：显示当前是哪一天）<br>			date "+%Y-%m-%d %H:%M:%S"（功能描述：显示年月日时分秒）<br>			Y year<br>			m month<br>			d day<br>			H hour<br>			M minute<br>			S second<br>		案例 1: 显示当前时间信息<br>		date<br>		案例 2: 显示当前时间年月日<br>		date "+%Y-%m-%d"<br>		案例 3: 显示当前时间年月日时分秒<br>		date "+%Y-%m-%d %H:%M:%S"<br><br>	2.设置日期<br>		基本语法：<br>			date -s	字符串时间<br>			<br>		案例 1: 设置系统当前时间<br>		date -s "2020-11-03 20:02:10"<br><br><br>cal指令：<br>	查看日历指令 cal<br>	<br>	基本语法：<br>	cal [选项]	（功能描述：不加选项，显示本月日历）<br>	<br>	案例 1: 显示当前日历 <br>	cal<br>	案例 2: 显示 2020 年日历 <br>	cal 2020<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">find 指令<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">从指定目录向下递归地遍历其各个子目录，将满足条件的文件或者目录显示在终端。</span><br>    <br>    基本语法：<br>	find [搜索范围] [选项]<br></code></pre></td></tr></tbody></table></figure>
<p>选项说明：</p>
<p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221019101315674.png" alt="image-20221019101315674"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 1: 按文件名：根据名称查找 /home 目录下的 hello.txt 文件</span><br>find /home -name hello.txt<br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 2：按拥有者：查找 /opt 目录下，用户名称为 nobody 的文件</span><br>find /opt -user nobody<br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 3：查找整个 linux 系统下大于 200M 的文件</span><br>	+n 大于<br>    -n 小于<br>    n 等于<br>	单位有 k,M,G <br>find / -size +200M	<br>例子：<br>[root@hspEdu01 opt]# find / -size +200M<br>/run/media/root/CentOS 7 x86_64/LiveOS/squashfs.img (这个文件大于200M)<br>[root@hspEdu01 opt]# cd /run/media/root/CentOS\ 7\ x86_64/LiveOS/<br>[root@hspEdu01 LiveOS]# ls<br>squashfs.img  TRANS.TBL<br>[root@hspEdu01 LiveOS]# ls -l<br>总用量 442741<br>-rw-r--r--. 1 root root 453365760 11月 26 2018 squashfs.img<br>-r--r--r--. 1 root root       224 11月 26 2018 TRANS.TBL<br>[root@hspEdu01 LiveOS]# ls -lh  #(上面的总用量大小看不懂，加上h human 能看懂的内容)<br>总用量 433M<br>-rw-r--r--. 1 root root 433M 11月 26 2018 squashfs.img<br>-r--r--r--. 1 root root  224 11月 26 2018 TRANS.TBL<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">locate 指令<br><span class="hljs-meta prompt_">#</span><span class="language-bash">	可以快速定位文件路径。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	利用事先建立的系统中所有文件名称及路径的 locate 数据库实现快速定位给定的文件。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	Locate 指令无需遍历整个文件系统，查询速度较快。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	为了保证查询结果的准确度，管理员必须定期更新 locate 时刻</span><br>	<br>	基本语法:<br>	locate 搜索文件<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	注意：</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	由于 locate 指令基于数据库进行查询，</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	所以第一次运行前，必须使用 updatedb 指令创建 locate 数据库。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	案例 1: 请使用 locate 指令快速定位 hello.txt 文件所在目录</span><br>	updatedb<br>	locate hello.txt<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell">grep 指令和 管道符号 |  <br><span class="hljs-meta prompt_">#</span><span class="language-bash">	grep指令往往和管道符号 | 结合使用</span><br>	grep：过滤查找<br>	管道符：“|”<br><span class="hljs-meta prompt_">#</span><span class="language-bash">	表示将前一个命令的处理结果输出传递给后面的命令处理。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	比如：先 <span class="hljs-built_in">cat</span> a.txt，然后又想看a.txt文件中有没有hello这个词</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	那么就 <span class="hljs-built_in">cat</span> a.txt | grep <span class="hljs-string">"hello"</span> ---&gt;先找到a.txt，然后再在a.txt中找hello</span><br><br>	基本语法：<br>	grep [选项] 查找内容 源文件<br>	常用选项：<br>		-n  显示匹配行及行号<br>		-i   忽略字母大小写<br><span class="hljs-meta prompt_">#</span><span class="language-bash">	案例 1: 请在 hello.txt 文件中，查找<span class="hljs-string">"yes"</span>所在行，并且显示行号</span><br>		写法 1: <br>        cat /home/hello.txt	| grep "yes"      #引号写不写都行<br>		cat /home/hello.txt	| grep -n "yes"   # 显示行号    			<br>		写法 2: <br>        grep -n "yes" /home/hello.txt<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell">gzip/gunzip 指令<br>	gzip    #用于压缩文件<br>	gunzip  #用于解压的<br>    基本语法：<br>	gzip 文件	  #功能描述：压缩文件，只能将文件压缩为*.gz 文件）<br>	gunzip 文件.gz #（功能描述：解压缩文件命令）<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#	案例 1: gzip 压缩，将 /home 下的 hello.txt 文件进行压缩</span></span><br>	gzip /home/hello.txt<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	案例 2: gunzip 解缩，将 /home 下的 hello.txt.gz 文件进行解压</span><br>	gunzip /home/hello.txt.gz<br><br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs shell">zip/unzip 指令<br>	zip 用于压缩文件<br>	unzip 用于解压的 <br><span class="hljs-meta prompt_">#</span><span class="language-bash">	（这个在项目打包发布中很有用的）</span><br>		<br>	基本语法：<br>	zip	[选项] XXX.zip 将要压缩的内容    #（功能描述：压缩文件和目录的命令）<br>	unzip [选项] XXX.zip	              #（功能描述：解压文件）<br>    <br>    zip 常用选项<br>		-r：递归压缩，即压缩目录<br>	<br>	unzip 的常用选项<br>		-d&lt;目录&gt; ：指定解压后文件的存放目录<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	案例 1:将 /home 下的所有文件/文件夹压缩成 myhome.zip</span><br>	zip -r myhome.zip /home/	#[将 home 目录及其包含的文件和子文件夹都压缩] <br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	案例 2:将 myhome.zip 解压到 /opt/tmp 目录下</span><br>	mkdir /opt/tmp<br>	unzip -d /opt/tmp /home/myhome.zip<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar 指令<br><span class="hljs-meta prompt_">#</span><span class="language-bash">	tar 指令是打包指令，最后打包后的文件是 .tar.gz 的文件。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	把一个或者多个文件（夹）用压缩软件进行压缩的过程，一般可称之为打包。</span><br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	tar指令可以压缩也可以解压。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	根据选项来 压缩还是解压。</span><br><br>	基本语法：<br>	tar	[选项] XXX.tar.gz 打包的内容	 # (功能描述：打包目录，压缩后的文件格式.tar.gz)<br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221019102258590.png" alt="image-20221019102258590"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 1:压缩多个文件，将 /home/pig.txt 和 /home/cat.txt 压缩成 pc.tar.gz</span> <br>tar -zcvf pc.tar.gz /home/pig.txt /home/cat.txt<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#	使用了选项：-z -c -v -f</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	多个文件就 空格直接写在后面就好了</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 2:将 /home 的文件夹压缩成 myhome.tar.gz</span> <br>tar -zcvf myhome.tar.gz /home/<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 3:将 pc.tar.gz 解压到当前目录</span><br>tar -zxvf pc.tar.gz<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 4:将 myhome.tar.gz 解压到 /opt/tmp2 目录下</span>	<br>	mkdir /opt/tmp2 <br>   tar -zxvf /home/myhome.tar.gz -C /opt/tmp2<br><span class="hljs-meta prompt_">#</span><span class="language-bash">注意：-C 后写要解压到的位置</span><br></code></pre></td></tr></tbody></table></figure>
<h2 id="第十章-LINXU组管理和权限管理"><a href="#第十章-LINXU组管理和权限管理" class="headerlink" title="第十章 LINXU组管理和权限管理"></a>第十章 LINXU组管理和权限管理</h2><p>在 linux 中的每个用户必须属于一个组，不能独立于组外。<br>在 linux 中每个文件都有所有者、所在组、其它组的概念。</p>
<p>1)    所有者<br>2)    所在组<br>3)    其它组<br>4)    改变用户所在的组</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">一般为文件的创建者，谁创建了该文件，就自然的成为该文件的所有者。<br>但是所有者也可以更改。<br><br>1.查看文件/目录的所有者(在/home下才能看到)<br>指令：ls –ahl<br>-ahl是三个选项<br>	-h human 让输出的结果方便人看(文件的大小容易看)<br><br>drwxr-xr-x.  6 root root   4.0K 2月  23 13:59 .<br>dr-xr-xr-x. 18 root root   4.0K 2月  20 16:45 ..<br>-rw-r--r--.  1 root root     24 2月  22 21:59 hello.txt<br>...<br>第三列就是文件的所有者<br><br>2.修改文件/目录所有者指令：chown 新所有者 文件名<br>案例：<br>	要求：使用 root 创建一个文件 apple.txt ，然后将其所有者修改成 tom<br>		  chown tom apple.txt<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">基本指令:<br>	groupadd 组名<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例：创建一个组 monster</span> <br>	groupadd monster<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">创建一个用户 fox ，并放入到	monster 组中</span><br>	useradd -g monster fox<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组(默认)。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">查看文件/目录所在组</span><br>	指令:<br>	ls –ahl  或者ll<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	ll并不是linux下一个基本的命令，它实际上是<span class="hljs-built_in">ls</span> -l的一个别名。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	Ubuntu默认不支持命令ll，必须用 <span class="hljs-built_in">ls</span> -l，这样使用起来不是很方便。</span><br>	<br>	案例：使用 fox 来创建一个文件，看看该文件属于哪个组?<br>	使用fox创建一个文件：<br>		su fox<br>		然后touch ok.txt<br>		然后ll<br>		<br>	-rw-r--r--. 1 fox monster 0 11 月 5 12:50 ok.txt<br><span class="hljs-meta prompt_">#</span><span class="language-bash">	第三列：文件的所有者(谁创建了这个文件，就是这个文件的所有者)</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	第四列：文件的所在组(某个用户创建了一个文件，该文件所在组=该用户所在组)</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	注意：/etc/group下存放着所有的组</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	使用指令：<span class="hljs-built_in">cat</span> /etc/group 可以查看所有的组</span><br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	比如查看有没有mojiao这个组</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	可以使用管道命令和grep过滤</span><br>		cat /etc/group | grep mojiao<br><span class="hljs-meta prompt_">#</span><span class="language-bash">	当一个文件很大，想找某个关键词就可以这个过滤！</span><br><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">修改文件/目录所在的组</span><br>	指令：<br>	chgrp 组名 文件名<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	案例：使用 root 用户创建文件 orange.txt ,看看当前这个文件属于哪个组，</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">		 然后将这个文件所在组，修改到 fruit 组。</span><br>	<br>		groupadd fruit<br>		touch orange.txt<br><span class="hljs-meta prompt_">#</span><span class="language-bash">		看看当前这个文件属于哪个组 -&gt; root 组</span><br>		chgrp fruit orange.txt<br></code></pre></td></tr></tbody></table></figure>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">在添加用户时，可以指定将该用户添加到哪个组中，同样的用 root 的管理权限可以改变某个用户所在的组。</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">改变用户所在组</span><br>	usermod	–g	新组名	用户名<br>	usermod	–d	目录名	用户名	 (改变该用户登陆的初始目录)<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">特别说明：用户需要有进入到新目录的权限。</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">如何查看用户所在的组？</span><br>	id 用户名  ---&gt;显示用户信息<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例：</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">将 zwj 这个用户从原来所在组，修改到 wudang 组</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">先查看zwj在哪个组：</span><br>	id zwj<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">然后查看有没有wudang这个组：</span><br>	cat /etc/group | grep wudang<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">修改：</span><br>	usermod -g wudang zwj<br><br></code></pre></td></tr></tbody></table></figure>
<p><strong>权限的基本介绍</strong></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">ls -l 中显示的内容如下：<br>-rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc<br>第一列共10位<br><br>0-9 位说明：<br>	 第 0 位确定文件类型(d, - , l , c , b)<br>		d 是目录，相当于 windows 的文件夹<br>		- 代表是普通文件(.txt)<br>		l 是链接，相当于 windows 的快捷方式<br>		c 是字符设备文件，比如鼠标，键盘    ---&gt; /dev/目录下可以看到<br>		b 是块设备，比如硬盘    ---&gt; /dev/目录下可以看到<br>		<br>	第 1-3 位确定 该文件的所有者 对该文件的 权限。---User<br>	第 4-6 位确定 该文件所属的组和该组中的用户 对该文件的 权限。---Group <br>	第 7-9 位确定 其他用户(不是所有者，也不是同一组的其他用户) 对该文件的权限 ---Other<br></code></pre></td></tr></tbody></table></figure>
<p>rwx权限的详解</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">权限有三种：<br>	r 代表可读(read)<br>	w 代表可写(write)<br>	x 代表可执行(execute)<br>	<br>rwx 作用到文件：<br>	r: 可以读取,查看<br>	w: 可以修改,但是不代表可以删除该文件<br>	   删除一个文件的前提条件是 对该文件所在的目录 有 写权限，才能删除该文件.<br>	x: 可以被执行,前提是可执行文件<br><br>rwx 作用到目录：<br>	r: 可以读取，可以用 ls 查看目录内容<br>	w: 可以修改, 可以对目录进行 创建+删除+重命名目录<br>	x: 可以进入该目录<br></code></pre></td></tr></tbody></table></figure>
<p><strong>文件/目录权限的实际案例</strong></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs shell">ls -l 中显示的内容如下：<br>-rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc<br><br>第一列中 10 个字符 确定不同用户能对文件干什么(权限)：<br>	第一个字符代表文件类型： - l d c b<br>	其余字符每 3 个一组(rwx) 读(r) 写(w) 执行(x) <br>	<br>	第一组 rwx：文件所有者的权限是 读、写和执行<br>	第二组 rw-：与文件所有者同一组的用户的权限是 读、写但不能执行<br>	第三组 r- ：不与文件拥所有者同组的其他用户 的权限是 读不能写和执行<br><br>也可以用数字表示对应的权限：<br>	r=4,w=2,x=1  <br>	因此 rwx=4+2+1=7 <br>	数字可以进行组合<br>	<br>其它说明：<br>	第二列：1				如果是普通文件，直接就是1；<br>							如果是目录，代表该目录下有多少内容(即子目录数+文件数)<br>							<br>	第三列：root				该文件/目录的所有者<br>	第四列：root				该文件/目录的所在组<br>	第五列：1213				文件大小(这里是字节)<br>	第六列：Feb 2 09:39		最后修改日期<br>	第七列：abc				文件名<br><br></code></pre></td></tr></tbody></table></figure>
<p><strong>修改权限</strong></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">基本说明：</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">通过 <span class="hljs-built_in">chmod</span> 指令，可以修改文件或者目录的权限。</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">第一种方式：通过 + 、-、=  变更权限</span><br>	u:所有者	<br>	g:所在组(同一个组的其他用户)	<br>	o:其他人(不同一个组的其他用户)	<br>	a:所有人(所有用户)(u、g、o 的总和)<br>	<br>	chmod 	u=rwx,g=rx,o=x	#文件/目录名  (该文件/目录的u的权限是rwx，g的权限是rx，o的权限是x)<br>	chmod	o+w				#文件/目录名  (该文件/目录的o的权限加上w)<br>	chmod	a-x				#文件/目录名  (取消该文件/目录的a的x权限)<br>	<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例演示：</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">1.给 abc 文件 的所有者读写执行的权限，给所在组读执行权限，给其它组读执行权限。</span><br>chmod u=rwx,g=rx,o=rx abc<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.给 abc 文件的所有者除去执行的权限，增加组写的权限</span><br>chmod u-x,g+w abc<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">3.给 abc 文件的所有用户添加读的权限</span><br>chmod a+r abc<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">注意：</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	可执行文件 	图标	   绿色</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	普通文件	 	图标    白色</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	目录/文件夹	图标    蓝色</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#	压缩文件		图标    红色</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">第二种方式：通过数字变更权限</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	权限可以用数字代替：r=4 w=2 x=1</span>	<br>	 <br>	chmod u=rwx,g=rx,o=x 文件/目录名<br><span class="hljs-meta prompt_">#</span><span class="language-bash">	相当于</span> <br>	chmod 751		     文件/目录名<br>	<br>	rwx=4+2+1=7<br>	rx=4+1=5<br>	x=1<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例演示</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">要求：将 /home/abc.txt 文件的权限修改成	rwxr-xr-x,使用给数字的方式实现：</span><br>	rwxr-xr-x：u-rwx g=r-x o=r-x<br>	chmod 755 /home/abc.txt<br><br></code></pre></td></tr></tbody></table></figure>
<p><strong>修改文件/目录的所有者-chown</strong></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell">基本介绍<br>chown	newowner			文件/目录	#(修改所有者)<br>chown 	newowner:newgroup	文件/目录 	#(同时修改所有者和所在组)<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">选项：-R	如果是目录 则使其下所有子文件或目录递归生效</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例演示</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">1.请将 /home/abc.txt 文件的所有者修改成 tom</span><br>chown tom /home/abc.txt<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.请将 /home/test 目录下所有的文件和目录的所有者都修改成 tom</span> <br>chown -R tom /home/test<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">R:Recursive递归</span><br></code></pre></td></tr></tbody></table></figure>
<p>修改文件/目录的所在组-chgrp</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">chgrp  newgroup  文件/目录	(改变所在组)<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例演示:</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">1.请将 /home/abc.txt 文件的所在组修改成 shaolin (少林)</span> <br>groupadd shaolin<br>chgrp shaolin /home/abc.txt<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.请将 /home/test 目录下所有的文件和目录的所在组都修改成 shaolin(少林)</span> <br>chgrp -R shaolin /home/test<br><br></code></pre></td></tr></tbody></table></figure>
<p>例子实验：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">有两个组：police组，bandit组</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">有四个用户：jackie,jerry,xh,xq</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">jackie,jerry: 警察</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">xh,xq: 土匪</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">1.创建组</span>	<br>	groupadd police<br>	groupadd bandit<br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.创建用户(直接放到对应组)</span><br>	useradd -g police jackie<br>	useradd -g police jerry<br>	useradd -g bandit xh<br>	useradd -g bandit xq<br><span class="hljs-meta prompt_">#</span><span class="language-bash">3.jackie 创建一个文件，自己可以读 r 写 w，本组人可以读，其它组没人任何权限</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	首先jackie登录，可以使用切换用户：su jackie ----&gt;这样不行，无法创建文件，权限不够</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	使用jackie登录，先设置密码123，然后退出系统用jackie登录：passwd jackie</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	然后创建文件：<span class="hljs-built_in">touch</span> jackie.txt</span> <br><span class="hljs-meta prompt_">#</span><span class="language-bash">	权限设置：</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">		原权限：rw-r--r--</span><br>		chmod o-r jackie.txt <br><span class="hljs-meta prompt_">#</span><span class="language-bash">		修改后权限：rw-r-----</span><br><span class="hljs-meta prompt_">		</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">		也可以直接使用数字方式：<span class="hljs-built_in">chmod</span> 640 jackie.txt</span><br><span class="hljs-meta prompt_">		</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">4.jackie 修改该文件，让其它组人可以读，本组人可以读写</span><br>	chmod g+w o+r jackie.txt <br><span class="hljs-meta prompt_">#</span><span class="language-bash">	或者</span><br>	chmod 664 jackie.txt<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#	改后权限：rw-rw-r--</span></span><br>	<br>5.xh投靠警察<br><span class="hljs-meta prompt_">#</span><span class="language-bash">	由root执行这条指令</span><br>	usermod -g police xh<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">6.测试xh和xq能不能对jackie.txt文件进行读写</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	分别使用xh和xq登录(首先对其设置密码123)</span><br><span class="hljs-meta prompt_">		</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	jackie.txt文件在jackie目录下</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	要想对jackie.txt文件进行操作，首先进入jackie目录</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	但是jackie目录权限是：rwx------</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	所以xh连jackie目录都进不去</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"><span class="hljs-comment">#	解决办法：登录jackie，对jackie目录权限进行修改(也可以登录root进行修改)(必须都在home下才能执行这个修改权限命令)</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">		登录</span><br>		cd /home/<br>		ll<br><span class="hljs-meta prompt_">#</span><span class="language-bash">		得到jackie原目录权限：rwx------</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">		修改权限：<span class="hljs-built_in">chmod</span> 770 jackie			(权限中有x才能进入目录)</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">		修改后jackie目录权限：rwxrwx---</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">		这时xh就可以进入jackie目录，并对jackie.txt进行读写</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">结论：如果要对目录内的文件进行操作，首先要有对该目录有相应权限</span><br></code></pre></td></tr></tbody></table></figure>
<p>联系2：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#1.建立两个组（神仙(sx),妖怪(yg)）</span></span><br>	groupadd sx<br>	groupadd yg<br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.建立四个用户(唐僧,悟空，八戒，沙僧)</span><br>	useradd ts<br>	useradd wk<br>	useradd bj<br>	useradd ss<br><span class="hljs-meta prompt_">#</span><span class="language-bash">3.设置密码(都为123)</span><br>	passwd ts<br>	passwd wk<br>	passwd bj<br>	passwd ss<br><span class="hljs-meta prompt_">#</span><span class="language-bash">4.妖怪组：悟空，八戒；神仙组：唐僧，沙僧</span><br>	usermod -g yg wk<br>	usermod -g yg bj<br>	usermod -g sx ts<br>	usermod -g sx ss<br><span class="hljs-meta prompt_">#</span><span class="language-bash">5.用悟空建立一个文件 monkey.txt ，该文件要输出 i am a monkey</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	先使用悟空登录</span><br>	vim monkey.txt<br>	i am a monkey<br>	:wq<br><span class="hljs-meta prompt_">#</span><span class="language-bash">6.给八戒一个可以 r w 的权限</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	悟空和八戒是一组的</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	当前monkey.txt权限：-rw-r--r--</span><br>3	此时八戒只能r<br><span class="hljs-meta prompt_">#</span><span class="language-bash">	命令：</span><br>	chmod g+w monkey.txt<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#	现在monkey.txt权限：-rw-rw-r--</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">7.八戒修改 monkey.txt 加入一句话( i am a pig)</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	monkey.txt文件在wk目录下</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	八戒要修改monkey.txt文件就要先进入wk目录</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	但是此时wk目录权限：rwx------</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	八戒进不去wk目录</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	所以先修改wk目录权限：<span class="hljs-built_in">chmod</span> g+r+w+x wk  (先把所以权限都给，在wk的home下写指令或root的home下写指令，因为目录在home下)</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	现在wk目录权限：rwxrwx---</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	这时八戒就能进入wk目录了</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">8.唐僧 沙僧 对该文件没有权限</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	唐僧和沙僧是其他组，进不去wk目录</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">9.把 沙僧 放入妖怪组</span><br>	usermod -g yg ss<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">10.让沙僧修改该文件 monkey.txt, 加入一句话 (<span class="hljs-string">"我是沙僧，我是妖怪!"</span>);</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	使用沙僧登录</span><br>	cd /home/wk<br>	viw monkey.txt<br>	...<br>	:wq<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">注意：</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">rwx权限对于 文件夹(目录) 的细节讨论和测试!!!</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	x: 表示可以进入到该目录,比如 <span class="hljs-built_in">cd</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	r: 表示可以 <span class="hljs-built_in">ls</span> ,将目录的内容显示</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	w: 表示可以在该目录下删除或者创建文件</span><br></code></pre></td></tr></tbody></table></figure>
<h2 id="第十一章Linux-定时任务调度"><a href="#第十一章Linux-定时任务调度" class="headerlink" title="第十一章Linux 定时任务调度"></a>第十一章Linux 定时任务调度</h2><p><strong>crond任务调度</strong></p>
<p>1.概述<br>任务调度：是指系统在某个时间执行特定的命令或程序。<br>crond—-&gt;周期任务<br>任务调度分类：<br>    (1)系统工作：有些重要的工作必须周而复始地执行。如病毒扫描等<br>    (2)个别用户工作：个别用户可能希望执行某些程序，比如对 mysql 数据库的备份。<br>示意图：</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019110415747.png" alt="image-20221019110415747"></p>
<p>2.基本语法<br>    <code>crontab [选项]</code><br>    功能：进行定时任务的设置<br>    <img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019110439761.png" alt="image-20221019110439761"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">4.快速入门</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">在/etc/下有一个crontab文件，在这个文件中写入所有的定时任务</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">输入</span><br>crontab -e  #就会进入crontab文件<br><span class="hljs-meta prompt_">#</span><span class="language-bash">然后在文件中写入定时任务：</span><br>*/1 * * * * ls –l	/etc/ &gt; /tmp/to.txt<br><span class="hljs-meta prompt_">#</span><span class="language-bash">意思说每小时的每分钟执行 <span class="hljs-built_in">ls</span> –l /etc/ &gt; /tmp/to.txt 命令</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">最后保存退出</span><br></code></pre></td></tr></tbody></table></figure>
<p>参数细节说明：</p>
<p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221019104157830.png" alt="image-20221019104157830"></p>
<p><strong>特殊符号说明</strong></p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019110548932.png" alt="image-20221019110548932"></p>
<p>特定的事件执行任务案例：</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019110616007.png" alt="image-20221019110616007"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">5.应用实例</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 1：每隔 1 分钟，就将当前的日期信息，追加到 /tmp/mydate 文件中</span><br>crontab -e<br>*/1 * * * * date &gt;&gt; /tmp/mydate<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 2：每隔 1 分钟，将当前日期和日历都追加到 /home/mycal 文件中</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">第一种方法：</span><br>	crontab -e<br><span class="hljs-meta prompt_">#</span><span class="language-bash">	在crontab文件中输入：</span><br>	*/1 * * * * date &gt;&gt; /home/mycal <br>	*/1 * * * * cal &gt;&gt; /home/mycal <br><span class="hljs-meta prompt_">#</span><span class="language-bash">	保存退出</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">第二种方法：</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	将 <span class="hljs-built_in">date</span> &gt;&gt; /home/mycal 和  cal &gt;&gt; /home/mycal 命令写在文件 /home/my.sh中</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	就是将命令都写在shell脚本中，直接调用shell脚本</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	步骤：</span><br>		vim /home/my.sh<br>		在my.sh中写入：<br>			date &gt;&gt; /home/mycal<br>			cal &gt;&gt; /home/mycal<br>			:wq<br><span class="hljs-meta prompt_">#</span><span class="language-bash">		给 my.sh 增加执行权限：<span class="hljs-built_in">chmod</span> u+x /home/my.sh (否则无法使用crontab命令)</span><br>		crontab -e<br>		在crontab中写入：*/1 * * * *	/home/my.sh<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">注意：可以写脚本也可以不写脚本</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 3:	每天凌晨 2:00  将 mysql 数据库 testdb 备份到文件中。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">提示: 指令为 mysqldump -u root -p密码 数据库 &gt; /home/db.bak</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">步骤(1)</span> <br>crontab -e<br><span class="hljs-meta prompt_">#</span><span class="language-bash">步骤(2)</span><br>0 2 * * * mysqldump -u root -proot testdb &gt; /home/db.bak<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">6. crond 相关指令</span><br>conrtab –r：#终止任务调度。<br>crontab –l：#列出当前有那些任务调度<br>service crond restart：重启任务调度<br><br></code></pre></td></tr></tbody></table></figure>
<p>at定时任务调度</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.基本介绍<br>(1)	at 命令是一次性定时计划任务，at 的守护进程 atd 会以后台模式运行，检查作业队列来运行；<br>(2) 每个作业队列(任务队列)中都有作业(作业里是指令/脚本)；<br>(3)	默认情况下，atd 守护进程每 60 秒检查作业队列；<br>	有作业时，会检查作业运行时间，如果时间与当前时间匹配，则运行此作业；<br>	运行完这个作业(任务)之后，这个作业就不会再被执行了；<br>(4)	at 命令是一次性定时计划任务，执行完一个任务后不再执行此任务了；<br>(5)	在使用 at 命令的时候，一定要保证 atd 进程的启动，可以使用相关指令来查看<br>	ps -ef	| grep atd //可以检测 atd 是否在运行<br>	ps -ef ---&gt; 查看所有的进程	<br>总结：at命令就是对某个定时任务只执行一次<br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019110826307.png" alt="image-20221019110826307"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">2. at 命令格式</span><br>	at [选项] [时间]<br>	然后输入两次：Ctrl + D	(结束 at 命令的输入)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">3. at 命令选项：</span><br><br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019113608977.png" alt="image-20221019113608977"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs shell">4. at 指定时间的方法：<br><br>(1)	接受在当天的 hh:mm（小时:分钟）式的时间指定。<br>	假如该时间已过去，那么就放在第二天执行。 例如：04:00<br>(2)	使用 midnight（深夜），noon（中午），teatime（饮茶时间，一般是下午 4 点）等比较模糊的词语来指定时间。<br>(3)	采用 12 小时计时制，即在时间后面加上 AM（上午）或 PM（下午）来说明是上午还是下午。 <br>	例如：12pm<br>(4)	指定命令执行的具体日期，指定格式为 month day（月 日）或 mm/dd/yy（月/日/年）或 dd.mm.yy（日.月.年），指定的日期必须跟在指定时间的后面。 <br>	例如：04:00 2021-03-1 (小的时间写前面，大的时间写后面)<br>(5)	使用相对计时法。<br>	指定格式为：now + count time-units<br>	now 就是当前时间，time-units 是时间单位，这里能够是 minutes（分钟）、hours（小时）、days（天）、weeks（星期）。<br>	count 是时间的数量，几天，几小时。 <br>	例如：now + 5 minutes<br>(6)	直接使用 today（今天）、tomorrow（明天）来指定完成命令的时间。<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">5.应用实例</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 1：2 天后的下午 5 点执行 /bin/ls /home</span><br>	at 5pm + 2 days<br>	/bin/ls /home<br><span class="hljs-meta prompt_">#</span><span class="language-bash">	两次ctrl+D</span><br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 2：atq 命令来查看系统中没有执行的工作任务</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	直接输入atq 查询</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 3：明天17点钟，输出时间到指定文件内 比如 /root/date100.<span class="hljs-built_in">log</span></span><br>	at 5pm tomorrow<br>	date &gt; /root/date100.log<br>	两次ctrl+D<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 4：2分钟后，输出时间到指定文件内 比如 /root/date200.<span class="hljs-built_in">log</span></span><br>	at now + 2 minutes<br>	date &gt; /root/date200.log<br>	两次ctrl+D<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">案例 5：删除已经设置的任务</span><br>	atrm 任务编号<br>	atrm 4   #//表示将 job 队列，编号为 4 的 job 删除.<br><br>	atq:<br>	2	Thu Feb 24 09:53:00 2022 a root<br>	1	Fri Feb 25 17:00:00 2022 a root<br><span class="hljs-meta prompt_">#</span><span class="language-bash">	第一列就是编号</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">注意：也可以执行脚本</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">比如：</span><br>	at now +2 minutes<br>	/root/my.sh  <br><span class="hljs-meta prompt_">#</span><span class="language-bash">	但要有这个脚本，并且有执行权限x</span><br><br></code></pre></td></tr></tbody></table></figure>
<h2 id="第十二章-Linux实操篇磁盘分区、挂载"><a href="#第十二章-Linux实操篇磁盘分区、挂载" class="headerlink" title="第十二章 Linux实操篇磁盘分区、挂载"></a>第十二章 Linux实操篇磁盘分区、挂载</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1) Linux 无论有几个分区，分给哪一目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构 <br>	Linux 中每个分区都是用来组成整个文件系统的一部分。<br><br>(2)	Linux 采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来。<br>	这时要载入的一个分区将使它的存储空间在一个目录下获得。<br>(3)图解：<br>硬盘上的一个分区 通过挂载mount机制 与文件系统中的某个目录联系起来<br>即分区挂载到目录<br>访问这个目录即访问这个分区<br>可以通过指令查看挂载情况，下面会说。<br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019113855644.png" alt="image-20221019113855644"></p>
<p><strong>硬盘说明：</strong></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1)	Linux 硬盘主要分为：<br>	 IDE 硬盘和 SCSI 硬盘<br>	 目前基本上是 SCSI 硬盘<br><br>(2)	对于 IDE 硬盘，驱动器标识符为“hdx~”<br>	其中“hd”表明分区所在设备的类型，这里是指 IDE 硬盘<br>	<br>	“x”为盘号<br>		a 为基本盘 第一个硬盘<br>		b 为基本从属盘 第二个硬盘<br>		c 为辅助主盘 第三个硬盘<br>		d 为辅助从属盘 第四个硬盘<br>		<br>	“~”代表分区<br>		前四个分区用数字 1 到 4 表示，它们是主分区或扩展分区，从 5 开始就是逻辑分区<br>	<br>	例：hda3 表示为第一个 IDE 硬盘上的第三个主分区或扩展分区<br>	     hdb2 表示为第二个 IDE 硬盘上的第二个主分区或扩展分区<br>	     <br>(3)	对于 SCSI 硬盘则标识为“sdx~”<br>	SCSI 硬盘是用“sd”来表示分区所在设备的类型的，其余则和 IDE 硬盘的表示方法一样<br><br></code></pre></td></tr></tbody></table></figure>
<p>查看所有设备挂载情况：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs shell">命令 ：lsblk	或者 lsblk -f<br><br>lsblk：list block devices <br><br>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT<br>sda      8:0    0   20G  0 disk <br>├─sda1   8:1    0    1G  0 part /boot<br>├─sda2   8:2    0    2G  0 part [SWAP]<br>└─sda3   8:3    0   17G  0 part /<br>sr0     11:0    1  4.3G  0 rom <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">sda1分区挂载到/boot目录</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">sda2分区挂载到swap目录</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">sda3分区挂载到根目录</span><br><br>lsblk -f  #(更加详细的显示)<br><br>NAME   FSTYPE  LABEL           UUID                                 MOUNTPOINT<br>sda                                                                 <br>├─sda1 ext4                    bd7b7249-b3fa-434f-acfd-5127a56c0673 /boot<br>├─sda2 swap                    4381675a-652c-4ffa-9a9d-cb23d19be79b [SWAP]<br>└─sda3 ext4                    531c2867-a7e9-4ae7-8f79-4453ceb76c5b /<br>sr0    iso9660 CentOS 7 x86_64 2018-11-25-23-54-16-00    <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">第一列可以看到设备/硬盘分区情况</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#FSTYPE:文件系统类型</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">UUID:格式化之后，会给每一个分区分配一个 唯一的 不重复的 40位 的 字符串</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">MOUNTPOINT:挂载点</span><br></code></pre></td></tr></tbody></table></figure>
<p>如何增加一块硬盘:</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">1)	虚拟机添加硬盘<br>2)	分区<br>3)	格式化<br>4)	挂载<br>5)	设置可以自动挂载<br></code></pre></td></tr></tbody></table></figure>
<ol>
<li>虚拟机添加硬盘</li>
</ol>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">在【虚拟机】菜单中选择【设置】<br>然后设备列表里添加硬盘<br>然后一路【下一步】<br>中间只有选择磁盘大小的地方需要修改，至到完成<br><br>使用命令lsblk发现没有新增的硬盘？<br>	需要重启系统（才能识别）<br><br>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT<br>sda      8:0    0   20G  0 disk <br>├─sda1   8:1    0    1G  0 part /boot<br>├─sda2   8:2    0    2G  0 part [SWAP]<br>└─sda3   8:3    0   17G  0 part /<br>sdb      8:16   0    1G  0 disk <br>sr0     11:0    1  4.3G  0 rom  <br>新增硬盘sdb，还未分区。<br></code></pre></td></tr></tbody></table></figure>
<ol>
<li>分区</li>
</ol>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs shell">对sdb进行分区：<br><br>分区命令：fdisk /dev/sdb   (dev目录下是一些设备)<br>步骤：<br>	开始分区后输入 n  (新增分区)<br>	然后选择 p     	(分区类型为主分区)<br>	两次回车<br>	最后输入 w  (写入分区并退出)(若不保存并退出输入 q，即上面步骤出错了想重来就可以输入q)<br><br>说明：<br>	m	显示命令列表           <br>	p	显示磁盘分区 (同 fdisk –l) <br>	n	新增分区<br>	d	删除分区<br>	w	写入并退出<br><br><br>命令(输入 m 获取帮助)：m<br>命令操作<br>   a   toggle a bootable flag<br>   b   edit bsd disklabel<br>   c   toggle the dos compatibility flag<br>   d   delete a partition<br>   g   create a new empty GPT partition table<br>   G   create an IRIX (SGI) partition table<br>   l   list known partition types<br>   m   print this menu<br>   n   add a new partition<br>   o   create a new empty DOS partition table<br>   p   print the partition table<br>   q   quit without saving changes<br>   s   create a new empty Sun disklabel<br>   t   change a partition's system id<br>   u   change display/entry units<br>   v   verify the partition table<br>   w   write table to disk and exit<br>   x   extra functionality (experts only)<br><br><br>选择分区类型：主分区/扩展分区<br>命令(输入 m 获取帮助)：n<br>Partition type:<br>   p   primary (0 primary, 0 extended, 4 free)<br>   e   extended<br>Select (default p): p<br><br><br>分区号 (1-4，默认 1)：                  ---&gt;输入2，硬盘就有2个分区<br>起始 扇区 (2048-2097151，默认为 2048)：<br>将使用默认值 2048<br>Last 扇区, +扇区 or +size{K,M,G} (2048-2097151，默认为 2097151)：<br>将使用默认值 2097151<br>分区 1 已设置为 Linux 类型，大小设为 1023 MiB<br><br><br>命令(输入 m 获取帮助)：w<br>The partition table has been altered!<br><br>Calling ioctl() to re-read partition table.<br>正在同步磁盘。<br><br><br>lsblk<br>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT<br>sda      8:0    0   20G  0 disk <br>├─sda1   8:1    0    1G  0 part /boot<br>├─sda2   8:2    0    2G  0 part [SWAP]<br>└─sda3   8:3    0   17G  0 part /<br>sdb      8:16   0    1G  0 disk <br>└─sdb1   8:17   0 1023M  0 part <br>sr0     11:0    1  4.3G  0 rom  <br>分区成功<br>硬盘sdb中只有一个分区sdb1<br></code></pre></td></tr></tbody></table></figure>
<ol>
<li>格式化</li>
</ol>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">格式化磁盘</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">为什么要格式化？</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	给这个分区指定它的文件类型</span><br><br>[root@Edu01 ~]# lsblk -f<br>NAME   FSTYPE  LABEL           UUID                                 MOUNTPOINT<br>sda                                                                 <br>├─sda1 ext4                    bd7b7249-b3fa-434f-acfd-5127a56c0673 /boot<br>├─sda2 swap                    4381675a-652c-4ffa-9a9d-cb23d19be79b [SWAP]<br>└─sda3 ext4                    531c2867-a7e9-4ae7-8f79-4453ceb76c5b /<br>sdb                                                                 <br>└─sdb1                                                              <br>sr0    iso9660 CentOS 7 x86_64 2018-11-25-23-54-16-00    <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">sdb1的UUID为空，说明还没有格式化。</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">格式化命令:</span><br>	mkfs -t	ext4 /dev/sdb1 		其中 ext4 是分区类型<br><br></code></pre></td></tr></tbody></table></figure>
<ol>
<li>挂载</li>
</ol>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">挂载: 将一个分区与一个目录联系起来，</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	命令：mount 设备名称 挂载目录</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">首先创建一个目录newdisk (目录位置随便)</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">假如在根目录下创建：<span class="hljs-built_in">mkdir</span> newdisk</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">进行挂载：mount /dev/sdb1 /newdisk</span><br><br>NAME   FSTYPE  LABEL           UUID                                 MOUNTPOINT<br>sda                                                                 <br>├─sda1 ext4                    bd7b7249-b3fa-434f-acfd-5127a56c0673 /boot<br>├─sda2 swap                    4381675a-652c-4ffa-9a9d-cb23d19be79b [SWAP]<br>└─sda3 ext4                    531c2867-a7e9-4ae7-8f79-4453ceb76c5b /<br>sdb                                                                 <br>└─sdb1 ext4                    d1856552-dee4-4fbc-9953-f650231ecaac /newdisk<br>sr0    iso9660 CentOS 7 x86_64 2018-11-25-23-54-16-00  <br><span class="hljs-meta prompt_">#</span><span class="language-bash">挂载点有了，挂载成功。</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">卸载(去除分区与目录的联系)：</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	命令：umount	设备名称 或者	挂载目录</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	例如：umount	/dev/sdb1 或者 umount /newdisk</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">注意: 用命令行挂载,重启后会失效。</span><br><br></code></pre></td></tr></tbody></table></figure>
<ol>
<li>设置可以自动挂载</li>
</ol>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs shell">解决  用命令行挂载,重启后会失效 问题<br><br>永久挂载: <br>	通过修改/etc/fstab 实现挂载<br>	添加完成后 执行 mount	–a 即刻生效 或者 重启系统reboot<br><br>步骤：<br>vim /etc/fstab<br>增加一行：UUID=上面sdb1的UUID    /newdisk    ext4    defaults     0 0<br>也可以是：/dev/sdb1    		  /newdisk    ext4    defaults     0 0<br><br><br><br><br>要挂载的设备或伪文件系统  挂载点  文件系统类型  挂载选项 转储频率 自检次序<br>UUID=上面sdb1的UUID   /newdisk    ext4    defaults   0 	   0<br><br>要挂载的设备或伪文件系统：<br>	设备文件、LABEL(LABEL="")、UUID(UUID="")、伪文件系统名称(proc, sysfs)<br><br>挂载点：指定的文件夹<br><br>挂载选项：defaults<br><br>转储频率：<br>  0：不做备份<br>  1：每天转储<br>  2：每隔一天转储<br><br>自检次序：<br>  0：不自检<br>  1：首先自检；一般只有rootfs才用1；<br></code></pre></td></tr></tbody></table></figure>
<p>查询磁盘使用情况</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">基本语法:</span><br>	df -h   (disk free)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">查询系统整体磁盘使用情况</span><br></code></pre></td></tr></tbody></table></figure>
<p>查询指定目录磁盘占用情况：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell">基本语法：<br>	du -h  指定目录    (disk usage)<br>功能：查询指定目录的磁盘占用情况，默认为当前目录<br>	-s 指定目录占用大小汇总<br>	-h 带计量单位<br>	-a 含文件<br>	--max-depth=1	子目录深度<br>	-c 列出明细的同时，增加汇总值<br><br>应用实例<br>查询 /opt 目录的磁盘占用情况，深度为 1<br>	du -hac --max-depth=1 /opt<br><br></code></pre></td></tr></tbody></table></figure>
<p>工作实用 指令</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">1. 统计/opt 文件夹下文件的个数</span><br>	ls -l /opt | grep "^-" | wc -l<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	说明：</span><br>		grep "^-" ---&gt;筛选出以-开头的，因为以-开头的都是文件<br>		wc (word count) 统计数量<br>			wc -l 统计行数 l即lines<br>			统计grep筛选后的行数即文件个数<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">2. 统计/opt 文件夹下目录的个数</span><br>	ls -l /opt | grep "^d" | wc -l<br><br>3. 统计/opt 文件夹下文件的个数，包括子文件夹里的<br>	ls -lR /opt | grep "^-" | wc -l<br>		-R 递归列出遇到的子目录<br><br>4. 统计/opt 文件夹下目录的个数，包括子文件夹里的<br>	ls -lR /opt | grep "^d" | wc -l<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">5. 以树状显示目录结构</span> <br><span class="hljs-meta prompt_"># </span><span class="language-bash">	指令：tree 目录</span> <br><span class="hljs-meta prompt_"> #</span><span class="language-bash">	默认情况下没有tree指令</span><br><span class="hljs-meta prompt_"> #</span><span class="language-bash">	如果没有 tree ,则使用 yum install tree 指令安装</span><br><br></code></pre></td></tr></tbody></table></figure>
<h2 id="LINUX网络配置"><a href="#LINUX网络配置" class="headerlink" title="LINUX网络配置"></a>LINUX网络配置</h2><p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019114700324.png" alt="image-20221019114700324"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.通过ifconfig指令查看Linux虚拟机的ip地址<br>	192.168.2.131<br>2.然后在本机DOS命令窗口输入指令ipconfig，查看vmnet8的ip地址<br>	192.168.2.1<br>	上两个在同一网段，所以可以通信。<br>	<br>3.由第二步骤可以得到本机的无线网络适配器(无线网卡)的ip地址<br>	192.168.101.8<br><br>为什么Linux虚拟机可以连外网(比如打开百度)？<br>	Linux虚拟机---&gt;本机vmnet8---&gt;本机无线网卡---&gt;教室局域网网关---&gt;外网	<br><br>每次开机linux虚拟机的ip地址不一定相同<br>linux虚拟机的ip地址可以设置<br><br>以下：如何编辑虚拟机的网络和修改其ip地址？<br></code></pre></td></tr></tbody></table></figure>
<p>查看网络IP和网关</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">vmware---&gt;</span><span class="language-bash">编辑---&gt;虚拟网络编辑器</span><br>这样就可以查看和修改虚拟网络vmnet8的ip地址和网关<br><br>通过本机DOS命令窗口，输入指令：ipconfig<br>	查看vmnet8的网络配置<br><br>在xshell或linux终端输入命令：ifconfig<br>	查看 linux 的网络配置<br><br><br><br>ping命令 测试主机之间网络连通性<br>	基本语法：<br>		ping 目的主机 （功能描述：测试当前服务器是否可以连接目的主机）<br><br>应用实例<br>	测试当前服务器是否可以连接百度<br>	ping www.baidu.com<br><br></code></pre></td></tr></tbody></table></figure>
<p>Linux网络环境配置</p>
<p>自动获取ip：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">登陆后，通过界面设置自动获取ip<br>	应用程序---&gt;系统工---&gt;设置---&gt;网络---&gt;小齿轮---&gt;IPV4<br>特点：linux 启动后会自动获取 IP，可以避免ip冲突<br>缺点：每次自动获取的 ip 地址可能不一样，但是作为服务器ip地址不能变。<br>工作时，一般将Linux的ip地址手动设定，不改变。<br></code></pre></td></tr></tbody></table></figure>
<p>手动设置ip</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs shell">手动指定linux的ip地址，使其不变化。<br><br>直接修改配置文件来指定 IP,并可以连接到外网(程序员推荐)<br>关于网络的配置文件在：/etc/sysconfig/network-scripts/ifcfg-ens33<br><br>要求：将ip地址配置为静态的(不变的)，比如: ip 地址为 192.168.200.130<br><br>输入指令：vim /etc/sysconfig/network-scripts/ifcfg-ens33<br>修改文件内容：<br>	BOOTPROTO="static"<br>	加上：<br>		IPADDR=192.168.200.130   (IP地址,自己设定的)<br>		GATEWAY=192.168.200.2	 (网关,自己设定的)<br>		DNS1=192.168.200.2		 (域名解析器,自己设定的)<br><br>下一步：vmnet8和Linux在同一网段上，要能够通信，也要修改相应的vmnet8<br><span class="hljs-meta prompt_">vmware---&gt;</span><span class="language-bash">编辑---&gt;虚拟网络编辑器</span><br>打开虚拟编辑器，点击vmnet8，修改下面的子网ip为：192.168.200.0<br>然后点击NAT设置，将网关改为192.168.200.2<br><br>应用确定<br>输入指令：service network restart 或 reboot  使上述修改生效<br></code></pre></td></tr></tbody></table></figure>
<p> 设置Linux系统的主机名和 hosts 映射</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs shell">Linux系统的主机名相当于其ip地址，起一个主机名是因为ip地址不好记忆，不方便。<br>也可以修改主机名。<br><br>查看当前主机的主机名指令：hostname<br><br>主机名放在/etc/hostname文件中，要修改主机名即修改文件内容：<br>	输入指令：<br>		vim /etc/hostname<br>		修改内容<br>		:wq<br>		重启系统<br><span class="hljs-meta prompt_">#</span><span class="language-bash">设置host映射</span><br><br>在Windows中，如何通过 主机名 找到(比如 ping) 某个 linux 系统?<br><br>	修改ip地址与主机名的映射关系：<br>		在windows C:\Windows\System32\drivers\etc\hosts 文件中<br>		指定Linux系统的ip地址与主机名的映射关系<br>			格式：linux系统ip地址 linux系统主机名<br>			如指定为: 192.168.200.130 hspedu100 (这行代码添加到文件中就行了)<br>		<br>		ping hspedu100 ----&gt;就会去该文件中找相应的ip地址<br>	<br>	<br>那么，如果也想在Linux系统中，使用主机名 来 ping 某个Windows系统，怎么做？<br>	在 linux 系统的 /etc/hosts 文件中 指定<br>	如指定为: 192.168.200.1 ThinkPad-PC<br>	这样就可以 ping ThinkPad-PC<br></code></pre></td></tr></tbody></table></figure>
<p> 主机名解析过程分析(hosts、DNS)</p>
<p>hosts是一个文本文件，用来记录 IP 和 Hostname(主机名)的映射关系</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">DNS  Domain Name System 域名系统<br>是互联网上作为域名和 IP 地址相互映射的一个分布式数据库<br>为什么可以通过主机名访问？<br>	通过DNS域名解析系统，将主机名解析为ip地址，实际上还是用的ip地址。<br></code></pre></td></tr></tbody></table></figure>
<p>例子：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">用户在浏览器输入了www.baidu.com<br><br>1.浏览器先检查浏览器缓存中有没有该域名解析 IP 地址，有就先调用这个 IP 完成解析；<br>	如果没有，就检查 DNS 解析器缓存，如果有直接返回 IP 完成解析。<br>	这两个缓存，可以理解为 本地解析器缓存<br><br>DNS 解析器缓存：<br>一般来说，当电脑第一次成功访问某一网站后，在一定时间内，浏览器或操作系统会缓存他的 IP 地址（DNS 解析记录）<br>	如在 cmd 窗口中输入<br>	ipconfig /displaydns	//DNS 域名解析缓存<br>	ipconfig /flushdns	//手动清理 dns 缓存<br><br>2. 如果本地解析器缓存没有找到对应映射，检查系统中 hosts 文件中有没有配置对应的域名 IP 映射，如果有，则完成解析并返回。<br><br>3. 如果本地 DNS 解析器缓存 和 hosts 文件 中均没有找到对应的 IP，则到域名服务器找<br>4. 还找不到，就没有了。<br></code></pre></td></tr></tbody></table></figure>
<p>图解</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019115203027.png" alt="image-20221019115203027"></p>
<p>第十四章进程管理：</p>
<p>基本介绍：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1)在 LINUX 中，每个执行的程序都称为一个进程。每一个进程都分配一个 ID 号(pid,进程号)。<br>程序执行之后加载到内存中成为进程。程序是静态的，进程是动态的。<br>(2)每个进程都可能以两种方式存在：<br>	前台与后台<br>	前台进程：是用户目前的屏幕上可以进行操作的。<br>	后台进程：是实际在操作的，但屏幕上无法看到，通常使用后台方式执行。<br>(3)一般系统的服务都是以后台进程的方式存在，而且都会常驻在系统中，直到关机才结束。<br></code></pre></td></tr></tbody></table></figure>
<p>ps命令：显示系统正在执行的进程</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.基本介绍：<br>	ps命令是用来查看目前系统中，有哪些进程正在执行，以及它们执行的状况。<br>	可以不加任何参数。<br><br>语法：<br>	ps [选项]    Process Status<br>	选项：<br>		-a		显示当前终端的所有进程信息<br>		-u		以用户的格式显示进程信息<br>		-x		显示后台程序运行的参数<br><br>一般三个选项一起用：<br>	ps -aux<br>	<br>	显示出如下内容：<br>		USER 			 执行进程用户名称  <br>		PID 		     进程号<br><span class="hljs-meta prompt_">		%</span><span class="language-bash">CPU          	 进程占用CPU百分比</span><br><span class="hljs-meta prompt_">		%</span><span class="language-bash">MEM    	 	 进程占用物理内存的百分比</span><br>		VSZ     		 进程占用的虚拟内存大小（单位：KB）<br>		RSS 		 	 进程占用的物理内存大小（单位：KB）<br>		TTY     		 终端名称(有时缩写)<br>		STAT             进程状态：<br>							 S-睡眠<br>							 s-表示该进程是会话的先导进程<br>							 N-表示进程拥有比普通优先级更低的优先级<br>							 R-正在运行<br>							 D-短期等待<br>							 Z-僵死进程<br>							 T-被跟踪或者被停止等等<br>		START            进程执行的开始时间<br>		TIME             CPU 时间，即进程使用 CPU 的总时间<br>		COMMAND     	 启动进程所用的命令和参数，如果过长会被截断显示<br><br><br><br>上述命令将所有进程显示出来，若只想查找某一个进程：<br>	指令：ps –aux|grep xxx  <br>		比如查找 sshd 进程：ps -aux | grep sshd<br><br>应用实例：<br>	要求：以全格式显示当前所有的进程，查看进程的父进程。 <br><br>父进程：一个进程可以生成多个子进程，该进程称为父进程。<br><br><br>查看 sshd 的父进程信息：<br>	知道一个父进程的pid就可以知道它的信息。<br>	<br>ps -ef 是以全格式显示当前所有的进程。-e 显示所有进程。-f 全格式。<br><br>ps -ef 指令显示内容如下： <br>	UID         用户ID<br>	PID   		进程ID<br>	PPID  		父进程ID             <br>	C 			CPU 用于计算执行优先级的因子。<br>					数值越大，表明进程是 CPU 密集型运算，执行优先级会降低；<br>					数值越小，表明进程是 I/O 密集型运算，执行优先级会提高<br>	STIME    	进程启动的时间<br>	TTY         完整的终端名称<br>	TIME        CPU 使用时间<br>	CMD    		启动进程所用的命令和参数<br><br>输入：ps -ef | grep sshd<br>得到第三列为1，即父进程ID=1<br><br></code></pre></td></tr></tbody></table></figure>
<p>kill 和 killall指令：终止进程</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.介绍:<br>若是某个进程执行一半需要停止时，或是已经消耗了很大的系统资源时，此时可以考虑停止该进程。<br>使用 kill 命令来完成此项任务。<br><br>2.基本语法：<br>kill [选项] 进程号	（功能描述：通过进程号杀死/终止进程）<br>killall 进程名称	    （功能描述：通过进程名称杀死进程，也支持通配符，这在系统因负载过大而变得很慢时很有用）<br>					 使用killall，会将该进程的所有子进程也都删除/终止。<br><br><br>3.常用选项：<br>	-9   表示强制终止进程<br>		 (系统觉得某个程序重要，可能会屏蔽你的kill指令，这时使用选项-9强制终止进程)<br><br><br>4.案例：<br>案例 1：踢掉某个非法登录用户<br>kill 进程号 <br>比如 kill 11421<br><br>假如使用tom登录，然后在图形界面打开终端写代码<br>假设认为tom是个非法用户，要踢掉它<br>先在图形界面写代码：ps -aux | grep sshd<br>sshd 是记载远程连接服务的配置文件<br>上述指令显示出了，远程登录的进程信息，从中看到了tom登录的进程的进程号11421<br>所以 kill 11421  这样tom就下线了！<br><br><br>案例 2：终止远程登录服务 sshd, 在适当时候再次重启 sshd 服务<br>sshd ---&gt; secure shell<br><br>首先查看 sshd 对应的进程号：<br>	使用命令：ps -aux | grep sshd<br>	有 /user/sbin/sshd 的那个进程就是 sshd 服务进程 进程号10748<br>	终止 sshd 之后，就无法在xshell远程登陆了！<br>	<br>重启 sshd 服务指令：<br>	/bin/systemctl start 服务名称<br>	/bin/systemctl start sshd.service<br><br><br>案例 3：终止多个 gedit (文本编辑器)<br>在Linux桌面，主文件夹中，打开多个文本，然后使用killall 可以同时关闭所有打开的文本<br>killall	gedit<br><br>案例 4：强制杀掉一个终端<br>	在Linux系统桌面打开两个终端，bash即代表终端进程<br>	在一个终端中输入指令强制关闭另一个终端<br>	首先：查看终端进程的进程号：ps -aux | grep bash<br>	得到对应的进程号，输入：kill -9  对应的进程号<br><br>	也可以终端自己终止自己<br></code></pre></td></tr></tbody></table></figure>
<p> 查看进程树 pstree</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.基本语法：pstree [选项] <br>功能：可以更加直观的来看进程信息(树的形式)<br><br>2.常用选项：<br>-p :显示进程的 PID (父进程ID)<br>-u :显示进程的所属用户<br><br><br>3.应用实例：<br>案例 1：用树状的形式显示进程的pid(进程号)<br>pstree -p<br><br>案例 2：用树状的形式显示进程的用户<br>pstree -u<br><br></code></pre></td></tr></tbody></table></figure>
<p>服务管理</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">服务(service) 本质就是进程，但是是运行在后台的，<br>通常都会监听某个端口，等待其它程序的请求，比如(mysqld , sshd防火墙等)，<br>因此我们又称为守护进程，是 Linux 中非常重要的知识点。<br></code></pre></td></tr></tbody></table></figure>
<p>service 管理指令</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1)	service	服务名 [start | stop | restart | reload | status]<br>start 	开启服务<br>stop 	终止服务<br>restart 重启服务<br>reload 	重载服务<br>status 	查看服务的状态<br><br>(2)	在 CentOS7.0 后很多服务不再使用 service指令管理,而是使用 systemctl (后面专门讲)<br><br>(3)	还有一些在 /etc/init.d 下的服务仍使用 service 指令管理<br><br>案例：<br>请使用 service 指令，查看，关闭，启动 network<br>[注意：在虚拟系统打开终端演示，因为网络连接会关闭]<br>指令:<br>	service network status <br>	service network stop <br>	service network start<br></code></pre></td></tr></tbody></table></figure>
<p>查看服务名的方式：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">方式 1：直接输入 setup 即可看到所有服务<br>其中前面带 * 的服务会随着Linux系统的启动而自动启动。<br>方式 2:	ls -l /etc/init.d<br>只能看到部分服务：还有一些在 /etc/init.d 下的服务仍使用 service 指令管理<br><br></code></pre></td></tr></tbody></table></figure>
<p> 服务的运行级别(runlevel)</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">Linux 系统有 7 种运行级别(runlevel)：常用的是级别 3 和 5<br><br>运行级别 0：系统停机状态，系统默认运行级别不能设为 0，否则不能正常启动<br>运行级别 1：单用户工作状态，root 权限，用于系统维护，禁止远程登陆<br>运行级别 2：多用户状态(没有 NFS)，不支持网络<br>运行级别 3：完全的多用户状态(有 NFS)，无界面，登陆后进入控制台命令行模式<br>运行级别 4：系统未使用，保留<br>运行级别 5：X11 控制台，登陆后进入图形 GUI 模式<br>运行级别 6：系统正常关闭并重启，默认运行级别不能设为 6，否则不能正常启动<br>授课时使用5，工作时大多使用3。<br></code></pre></td></tr></tbody></table></figure>
<p>开机的流程说明：</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019115702418.png" alt="image-20221019115702418"></p>
<p> CentOS7 后运行级别说明</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">在 /etc/initab <br>进行了简化，如下:<br>multi-user.target: analogous to runlevel 3 <br>graphical.target: analogous to runlevel 5 <br><br>查看当前运行级别：systemctl get-default<br>ctl ---&gt; control<br><br>更改运行级别：systemctl set-default multi-user.target/graphical.target<br>		    然后重启 reboot<br></code></pre></td></tr></tbody></table></figure>
<p>chkconfig 指令</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell">通过 chkconfig 命令可以给服务在 各个运行级别 设置开启自启动/关闭自启动<br><br>chkconfig 指令管理的服务在 /etc/init.d  查看<br><br>注意: Centos7.0 后，很多服务使用 systemctl 管理 (后面马上讲)<br><br><br>chkconfig 基本语法：<br>(1)查看服务和服务在各个级别是开启/关闭自启动  (有限，只能查看chkconfig管理下的服务)<br>chkconfig --list [| grep	xxx]    (若查找某一个服务使用grep过滤)<br> <br>(2)chkconfig 服务名 --list<br><br>(3)chkconfig --level 5 服务名 on   给该服务在5运行级别开启自启动<br>chkconfig --level 5 服务名 off     给该服务在5运行级别关闭自启动<br><br>案例演示: 对network服务进行各种操作,把 network 在 3 运行级别 关闭自启动<br>chkconfig --level 3 network off <br><br>注意：chkconfig 重新设置服务后自启动或关闭，需要重启机器 reboot 生效.<br></code></pre></td></tr></tbody></table></figure>
<p> systemctl 管理指令</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">基本语法：systemctl [start | stop | restart | status] 服务名<br>systemctl 指令管理的服务在 /usr/lib/systemd/system 查看<br></code></pre></td></tr></tbody></table></figure>
<p> systemctl  设置服务的自启动状态</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl list-unit-files [ | grep 服务名] (查看服务开机启动状态, grep 可以进行过滤) <br>systemctl enable 服务名 		(设置服务开机自启动)<br>systemctl disable 服务名 	(关闭服务开机自启动)<br>systemctl is-enabled 服务名  (查询某个服务是否是自启动的)<br><br>centos7之后运行级别只有3和5，所以以上指令对3和5运行级别同时适用。<br><br>应用案例：<br>查看当前防火墙的状况，关闭防火墙和重启防火墙 firewalld.service <br>	查看当前防火墙情况：systemctl status firewalld<br>	关闭防火墙：systemctl stop firewalld<br>	重启防火墙：systemctl start firewalld<br>	.service写不写都行<br>注意：关闭或者启用防火墙后，立即生效。<br>但是 这种方式只是临时生效，当重启系统后，还是回归以前对服务的设置。<br><br>如果希望设置某个服务自启动或关闭永久生效<br>	要使用 systemctl	[enable|disable] 服务名<br></code></pre></td></tr></tbody></table></figure>
<p> firewall 指令：打开或者关闭指定端口</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">在真正的生产环境，往往需要将防火墙打开。<br>但问题来了，如果我们把防火墙打开，那么外部请求数据包就不能跟服务器监听端口通讯。<br>这时，需要打开指定的端口。比如 80、22、8080 等。<br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019115940049.png" alt="image-20221019115940049"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1)	打开端口: firewall-cmd --permanent --add-port=端口号/协议<br><br>通过 netstat -anp | more 指令查看端口号的协议 (more 分页显示)<br>该指令输出的信息中：<br>	Local Address下是 ip地址:端口号<br>	Proto 是协议   (protocol 协议)<br><br>(2)	关闭端口: firewall-cmd --permanent --remove-port=端口号/协议<br><br>注意：无论是打开端口还是关闭端口，要重新载入才能生效<br>重新载入：firewall-cmd --reload<br><br>(3) 查询端口是否开放: firewall-cmd --query-port=端口/协议<br><br>应用案例：<br>(1)	启用防火墙，测试 111 端口是否能 telnet (远程登录) 不行<br>	在本地主机DOS命令窗口输入：telnet Linux虚拟机ip地址:端口号<br>	测试本地主机能否访问虚拟机的111端口<br>	telnet 192.168.200.130 111<br><br>	防火墙打开+端口关闭---&gt;不可以访问端口<br><br>(2)	开放 111 端口<br>	firewall-cmd --permanent --add-port=111/tcp ;<br>	需要 firewall-cmd --reload<br><br>	防火墙打开+端口打开---&gt;可以访问端口<br>	<br>(3)	再次关闭 111 端口<br>	firewall-cmd --permanent --remove-port=111/tcp <br>	需要 firewall-cmd --reload<br></code></pre></td></tr></tbody></table></figure>
<p> top指令：动态监控进程</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">top 与 ps 命令很相似。<br>它们都用来显示正在执行的进程。<br>top 与 ps 最大的不同之处在于: top 在执行一段时间可以更新正在运行的的进程。<br>语法：<br>top [选项]<br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019120108788.png" alt="image-20221019120108788"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs shell">输入top指令后：每一条都是一个进程<br>	显示：<br>	第一行<br>		第一个时间      当前时间<br>		第二个时间      系统运行时间<br>		2 users	       有几个用户<br>		load average   负载值(三个值相加除以3&gt;0.7 说明系统负载过大，要提高性能)<br>	第二行<br>		Tasks 			系统任务数<br>		1 running 		1个正在运行进程<br>		184 sleeping 	184个休眠进程<br>		0 stopped 		0个终止进程<br>		0 zombie 		0个僵死进程   (要清除僵死进程，因为僵死进程无用且占内存空间)<br>	第三行 占用的CPU百分比<br>		us 用户占用的CPU<br>		sy 系统占用的CPU<br>		id 空闲<br>	第四行 Mem 内存占用情况<br>		total 	总共内存<br>		free 	空闲内存<br>		user 	已使用内存<br>	第五行 Swap 分区<br>		total 	总共大小<br>		free 	未使用大小<br>		used 	已用大小<br>		avail Mem 可获取的内存大小<br></code></pre></td></tr></tbody></table></figure>
<p>交互操作说明</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">输入命令top<br>然后输入以下命令，得以下功能对进程进行排序<br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019120213845.png" alt="image-20221019120213845"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell">案例 1：监视特定用户, 比如监控 tom 用户<br>输入top<br>回车<br>输入u<br>回车<br>输入要监控用户名 (该用户要登录才能看到他的进程信息)<br><br><br>案例 2：终止指定的进程, 比如我们要结束 tom 登录<br>输入top<br>回车<br>输入k<br>回车<br>输入要结束的进程 ID 号 （bash那个进程的PID）<br>回车<br>输入信号量 9 强制删除<br>tom掉线<br><br>案例 3：指定系统状态更新的时间(每隔 10 秒自动更新),默认是 3 秒<br>top -d 10<br></code></pre></td></tr></tbody></table></figure>
<p> 查看系统网络情况netstat</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs shell">基本语法：<br>	netstat [选项]<br><br>选项说明：<br>	-an	按一定顺序排列输出<br>	-p	显示哪个进程在调用<br><br>输入netstat -an | more (more 分页展示)<br>显示：<br>	Proto 					协议<br>	Recv-Q					接收信息队列<br>	Send-Q 					发送信息队列<br>	Local Address      		本地地址 Linux地址 <br>	Foreign Address         外部地址    <br>	State 					LISTEN 监听  ESTABLISHED 已建立连接 TIME_WAIT 超时等待<br><br>TIME_WAIT 超时等待 <br><span class="hljs-meta prompt_">	---&gt;</span><span class="language-bash">某个连接断了之后(如用户退出登录)，连接不会立刻消失，而是State变为TIME_WAIT</span><br>	系统认为可能是网络状态不好，过一段时间仍无法连接，则连接消失。 <br><br><br>Proto 	Recv-Q 	Send-Q 		Local Address           Foreign Address         State <br>tcp        0     36 		192.168.200.130:22      192.168.200.1:14498     ESTABLISHED<br>要建立连接双方都要有一个端口<br>22端口在Linux<br>14498端口在Windows<br>如下图：<br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019120328489.png" alt="image-20221019120328489"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">案例：查看服务名为 sshd 的服务的信息。<br>netstat -anp | grep sshd<br>是一种网络检测工具，它主要是用检测远程主机是否正常，或是两部主机间的网线或网卡故障。<br>如: ping 对方的ip地址<br></code></pre></td></tr></tbody></table></figure>
<h2 id="第十五章：Linux-实操篇-RPM-与-YUM"><a href="#第十五章：Linux-实操篇-RPM-与-YUM" class="headerlink" title="第十五章：Linux 实操篇- RPM 与 YUM"></a>第十五章：Linux 实操篇- RPM 与 YUM</h2><h4 id="RPM-介绍"><a href="#RPM-介绍" class="headerlink" title="RPM 介绍"></a>RPM 介绍</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell">RPM 是 Red-Hat Package Manager（红帽软件包管理器）的缩写<br>这一文件格式名称虽然打上了RedHat的标志，但是其原始设计理念是开放式的，<br>包括OpenLinux、S.u.S.E.以及Turbo Linux等Linux的分发版本都有采用，可以算是公认的行业标准了。<br>是一种用于互联网下载包的打包及安装工具，它包含在某些Linux分发版中。它生成具有.RPM扩展名的文件。<br>类似于 windows 的 setup.exe<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">##########################</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">rpm 的简单查询指令</span><br>查询已安装的 rpm软件包 列表：<br>rpm –qa|grep xx <br>查询结果返回一个软件包的包名<br><br>举例：查看当前系统是否安装了 firefox <br>指令: rpm -qa | grep firefox<br>查询结果：firefox-60.2.2-1.el7.centos.x86_64<br>结果说明：<br>	软件名：firefox<br>	版本号：60.2.2-1<br>	适用操作系统: el7.centos.x86_64 (表示 centos7.x 的 64 位系统)<br>	如果是 i686、i386 表示 32 位系统，noarch 表示通用(32/64位系统都适用)<br></code></pre></td></tr></tbody></table></figure>
<p> rpm 的其它查询指令</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">rpm -qa 			(查询所安装的所有 rpm 软件包)<br><br>rpm -qa | more  	(分页显示more)<br><br>rpm -qa | grep X    (过滤,比如 rpm -qa | grep firefox )<br><br>rpm -q  软件包名      (查询某个软件包是否安装)<br>案例：rpm -q firefox<br><br>rpm -qi 软件包名   	 (查询软件包的详细信息)<br>案例: rpm -qi firefox<br><br>rpm -ql 软件包名 	 (查询软件包中的文件和该软件包在哪个文件下)<br>案例： rpm -ql firefox<br><br>rpm -qf 文件全路径名 	 (查询某个文件所属在哪个软件包)<br>案例：rpm -qf /etc/passwd rpm <br>案例：-qf /root/install.log<br></code></pre></td></tr></tbody></table></figure>
<p> 删除 rpm 软件包</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">基本语法：rpm -e RPM软件包的名称	//-e erase擦去<br>案例：删除 firefox 软件包<br>rpm -e firefox<br><br>注意：<br>(1)如果其它软件包依赖于您要删除的软件包，删除时则会产生错误信息。<br>如：	<br>rpm -e foo<br>removing these packages would break dependencies:foo is needed by bar-1.0-1<br>foo软件包被 bar-1.0-1需要，删除foo对barr-1.0-1有影响<br><br>(2)如果我们就是要删除 foo 这个 rpm 包，可以增加参数 --nodeps ,就可以强制删除<br>   但是一般不推荐这样做，因为依赖于该软件包的程序可能无法运行<br>如：rpm -e --nodeps foo            (nodeps 不检查依赖关系 no dependencies)<br><br></code></pre></td></tr></tbody></table></figure>
<p>安装 rpm 软件包</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell">基本语法：rpm -ivh RPM软件包全路径名称<br><br>rpm软件包其实是一个软件的安装包<br>点击Linux系统桌面的光盘，里面有一个Packages文件夹，这个文件夹里有很多rpm软件安装包<br><br>在/run/media/root/CentOS\ 7\ x86_64/Packages/ 目录下<br><br><br>选项：<br>	i=install 安装<br>	v=verbose 提示<br>	h=hash	  进度条<br><br><br>应用实例：<br>演示卸载和安装 firefox 浏览器<br>rpm -e firefox <br>rpm -ivh /run/media/root/CentOS\ 7\ x86_64/Packages/firefox-60.2.2-1.el7.centos.x86_64.rpm<br><br>也可以在Packages中找到firefox安装包，复制到某一个目录下，这样写路径简单<br><br></code></pre></td></tr></tbody></table></figure>
<h4 id="yum介绍"><a href="#yum介绍" class="headerlink" title="yum介绍"></a>yum介绍</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">Yum（全称为 Yellow dog Updater, Modified）是一个 Shell 前端软件包管理器。<br>基于 RPM 包管理，能够从指定的服务器自动下载 RPM 包并且安装，<br>可以自动处理依赖性关系，并且一次安装所有依赖的软件包。<br><br>使用 yum list|grep 软件名 向yum服务器查询有没有该软件<br>有的话，使用 yum install 软件名 下载安装该软件<br></code></pre></td></tr></tbody></table></figure>
<p>  yum 的基本指令</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">查询 yum 服务器是否有 需要安装的软件：<br>yum list|grep 软件名<br><br>安装指定的软件：<br>yum install 软件名<br><br>案例：请使用 yum 的方式来安装 firefox <br>rpm -e firefox<br>yum list | grep firefox <br>yum install firefox<br></code></pre></td></tr></tbody></table></figure>
<p>总结：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">rpm 是从本地安装包下载<br>yum 是从yum服务器下载安装软件<br></code></pre></td></tr></tbody></table></figure>
<h2 id="第十七章：大数据定制篇-Shell编程"><a href="#第十七章：大数据定制篇-Shell编程" class="headerlink" title="第十七章：大数据定制篇-Shell编程"></a>第十七章：大数据定制篇-Shell编程</h2><h4 id="Shell-是什么"><a href="#Shell-是什么" class="headerlink" title="Shell 是什么"></a>Shell 是什么</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">Shell 是一个命令行解释器，它为用户提供了一个向 Linux 内核发送请求以便运行程序的界面系统级程序，用户可以用 Shell 来启动、挂起、停止甚至是编写一些程序。<br><br>在计算机科学中，Shell俗称壳（用来区别于核）<br>是指“为使用者提供操作界面”的软件（command interpreter，命令解析器）。<br>它类似于DOS下的COMMAND.COM和后来的cmd.exe。<br>它接收用户命令，然后调用相应的应用程序。<br><br>中文名	壳<br>外文名	shell<br>性质		命令解析器<br>用途		接收用户命令<br>Shell 是指一种应用程序，这个应用程序提供了一个界面，用户通过这个界面访问操作系统内核的服务。是用户使用 Linux 的桥梁.<br>用户写了一个指令，该指令不能直接发给Linux内核去执行，而是由shell帮我们去执行，执行完之后再通过shell返回给我们结果。<br>在Linux中不止一种shell，我们常用的是bash。<br>可以直接发一个指令给shell，也可以将指令写在一个文件/脚本(.sh shell脚本)里。<br>shell编程就是在shell脚本中写指令。<br></code></pre></td></tr></tbody></table></figure>
<p>Shell脚本</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.脚本格式要求：<br>	脚本以 #!/bin/bash 开头 ---&gt;确定shell的类型<br>    脚本需要有可执行权限<br>    shell脚本文件以.sh结尾，也可以不以.sh结尾<br><br>2.编写第一个Shell 脚本<br>需求说明：创建一个 Shell 脚本，输出 hello world! <br>创建一个目录：mkdir /root/shcode<br>cd /root/shcode<br>vim hello.sh<br>写入：<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">!/bin/bash</span><br>	echo "hello,world!"<br><br>3.shell脚本的常用执行方式<br>方式 1：<br>	首先要给shell脚本加x执行权限：chomod u+x hello.sh<br>	再输入该脚本的相对路径或绝对路径来执行该脚本<br>    比如：<br>	 	使用相对路径：	./hello.sh <br>	 	使用绝对路径：	/root/shcode/hello.sh<br><br>方式 2：<br>	不用赋予脚本+x 权限，直接执行即可。(使用以下指令，即使没有执行权限也可以执行)<br>	使用指令： sh  shell脚本/shell脚本的绝对路径<br>	比如	sh hello.sh <br><br></code></pre></td></tr></tbody></table></figure>
<h4 id="Shell-的变量"><a href="#Shell-的变量" class="headerlink" title="Shell 的变量"></a>Shell 的变量</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1)	Linux Shell 中的变量分为:系统变量和用户自定义变量。<br>系统变量：系统自带的变量<br><br>(2)	系统变量比如：$HOME、$PWD、$SHELL、$USER 等等<br>echo $HOME	---&gt;显示当前用户的家目录<br><br>(3)	可以通过 set 指令显示出shell中的所有系统变量<br></code></pre></td></tr></tbody></table></figure>
<h4 id="shell-自定义变量"><a href="#shell-自定义变量" class="headerlink" title="shell 自定义变量"></a>shell 自定义变量</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs shell">基本语法：<br>(1)	定义变量：变量名=值  ---&gt;不加空格<br>(2)	撤销变量：unset 变量名<br>(3)	声明静态变量：readonly 变量 (改变量不能 unset撤销)<br><br><br>案例 1：定义变量 A<br>案例 2：撤销变量 A<br>案例 3：声明静态的变量 B=2，不能 unset<br><br>cd /root/shcode<br>vim vr.sh<br>输入： <br><span class="hljs-meta prompt_">	#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">案例 1：定义变量 A=100  (<span class="hljs-comment">#为注释符)</span></span><br>	A=100<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">输出变量需要加上$ ($---&gt;引用变量)</span><br>	echo $A<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">上述输出结果是100，想要输出结果为A=100，这样写(A=以普通文本形式输出，<span class="hljs-variable">$A</span>引用变量的值)</span><br>	echo A=$A 或者 echo "A=$A" <br>		<br>		<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">案例 2：撤销变量 A</span> <br>	unset A<br>	echo "A=$A"    (---&gt;输出 A= )<br><br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">案例 3：声明静态的变量 B=2，不能 <span class="hljs-built_in">unset</span></span> <br>	readonly B=2<br>	echo "B=$B" <br>	<br>保存：wq<br>最后输入执行命令：sh vr.sh<br><br>--------------------------------------------------------------------<br><br><br>shell 变量名的定义规则：<br>(1)	变量名称可以由字母、数字和下划线组成，但是不能以数字开头。5A=200(×)<br>(2)	等号两侧不能有空格<br>(3)	变量名称一般习惯为大写，这是一个规范，我们遵守即可<br><br>--------------------------------------------------------------------<br>将命令的返回值赋给变量：<br>(1)	A=`date`反引号，运行里面的命令，并把结果返回给变量 A <br>(2)	A=$(date) 等价于反引号<br>案例：<br><span class="hljs-meta prompt_">#</span><span class="language-bash">将指令返回的结果赋给变量</span><br>	C=`date` <br>	D=$(date)<br>	echo "C=$C" <br>	echo "D=$D"<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">使用环境变量 TOMCAT_HOME</span><br>	echo "tomcat_home=$TOMCAT_HOME"<br></code></pre></td></tr></tbody></table></figure>
<h4 id="设置环境变量-全局变量"><a href="#设置环境变量-全局变量" class="headerlink" title="设置环境变量(全局变量)"></a>设置环境变量(全局变量)</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs shell">可以将变量提升为全局环境变量，供多个shell程序共同使用。<br><br>基本语法：<br>(1)	export 	变量名=变量值 	<br>（功能描述：将 shell 变量输出为环境变量/全局变量）<br><br>(2)	source 	配置文件		    <br>（功能描述：在某文件中定义环境变量之后，要对该文件进行刷新才能使其生效，即让修改后的配置信息立即生效）<br><br>(3)	echo 	$变量名			<br>（功能描述：查询环境变量的值）<br><br>快速入门：<br>(1)	在/etc/profile 文件中定义 TOMCAT_HOME 环境变量<br>TOMCAT_HOME ---&gt;意思是tomcat的家目录是什么<br>(2)	查看环境变量 TOMCAT_HOME 的值<br>vim /etc/profile<br>	写入：export TOMCAT_HOME=/opt/tomcat<br>	保存退出<br>source /etc/profile<br>echo $TOMCAT_HOME ---输出 /opt/tomcat<br><br><br>(3)	在另外一个 shell 程序中使用 TOMCAT_HOME<br>在另一个shell程序中写入：<br>	echo "tomcat_home=$TOMCAT_HOME"<br><br><br>注意：在输出 TOMCAT_HOME 环境变量前，需要让其生效source /etc/profile<br><br><br>shell 脚本的<br>	单行注释：#<br>	多行注释：   :&lt;&lt;!   独占一行	<br>				内容 <br>			    ! 	   独占一行<br></code></pre></td></tr></tbody></table></figure>
<h4 id="位置参数变量"><a href="#位置参数变量" class="headerlink" title="位置参数变量"></a>位置参数变量</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.介绍<br>当我们执行一个 shell 脚本时，如果希望获取到命令行的参数信息，就可以使用到位置参数变量<br>比如： ./myshell.sh 100 200 这个就是一个执行 shell 的命令行，可以在 myshell 脚本中获取到参数信息<br><br>./myshell.sh ---&gt;执行myshell脚本命令<br>100 200 都是该命令行的参数<br>使用位置参数变量可以在myshell脚本中获得参数<br><br><br>2.基本语法<br><span class="hljs-meta prompt_">$</span><span class="language-bash">n （功能描述：n 为数字，<span class="hljs-variable">$0</span> 代表命令本身(如./myshell.sh)，<span class="hljs-variable">$1</span>-<span class="hljs-variable">$9</span> 代表第一到第九个参数(如：<span class="hljs-variable">$1</span> 就是100 <span class="hljs-variable">$2</span> 就是200)，十以上的参数需要用大括号包含，如<span class="hljs-variable">${10}</span>）</span><br><span class="hljs-meta prompt_">$</span><span class="language-bash">* （功能描述：这个变量代表命令行中所有的参数，$*把所有的参数看成一个整体）</span><br><span class="hljs-meta prompt_">$</span><span class="language-bash">@ （功能描述：这个变量也代表命令行中所有的参数，不过<span class="hljs-variable">$@</span>把每个参数区分对待）</span><br><span class="hljs-meta prompt_">$</span><span class="language-bash"><span class="hljs-comment"># （功能描述：这个变量代表命令行中所有参数的个数）</span></span><br><br>案例：编写一个 shell 脚本 myshell.sh ，在脚本中获取到命令行的各个参数信息。<br>vim myshell.sh<br>	写入:<br><span class="hljs-meta prompt_">		#</span><span class="language-bash">!/bin/bash</span><br>		echo "命令本身=$0 第一个参数=$1 第二个参数=$2"<br>		echo "所有的参数=$*"<br>		echo "$@"<br>		echo "参数个数=$#"<br>		保存退出<br>sh myshell.sh 100 200<br></code></pre></td></tr></tbody></table></figure>
<h4 id="预定义变量"><a href="#预定义变量" class="headerlink" title="预定义变量"></a>预定义变量</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.基本介绍：<br>预定义变量是 shell 设计者事先已经定义好的变量，可以直接在 shell 脚本中使用<br><br><br>2.基本语法：<br>(1)	$$ （功能描述：当前进程的进程号（PID））<br>(2)	$! （功能描述：后台运行的最后一个进程的进程号（PID））<br>(3)	$？（功能描述：最后一次执行的命令的返回状态。如果这个变量的值为 0，证明上一个命令正确执行；如果这个变量的值为非 0（具体是哪个数，由命令自己来决定），则证明上一个命令执行不正确了。）<br><br>3.应用实例：<br>在一个 shell 脚本中简单使用一下预定义变量<br><br>vim preVar.sh<br>	写入：<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">!/bin/bash</span><br>	echo "当前执行的进程 id=$$"<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">以后台的方式运行一个脚本(在脚本后加一个$)，并获取他的进程号</span><br>	/root/shcode/myshell.sh &amp;<br>	<br>	echo "最后一个后台方式运行的进程 id=$!" <br><br>	echo "执行的结果是=$?"<br>	保存并退出<br>sh preVar.sh<br><br></code></pre></td></tr></tbody></table></figure>
<p>运算符：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.基本介绍：<br>学习如何在 shell 中进行各种运算操作。<br><br><br>2.基本语法：<br>(1)	三种写法：<br><span class="hljs-meta prompt_">	$</span><span class="language-bash">((运算式))</span><br><span class="hljs-meta prompt_">	$</span><span class="language-bash">[运算式]</span><br>	expr m + n 	(expression 表达式)<br>	 <br>(2)	注意 expr 运算符间要有空格<br>	如果希望将 expr 的结果赋给某个变量，使用 `` 或者 $( )<br><br>(3)	expr m - n<br><br>(4)	expr \*, /, %	乘，除，取余<br><br><br>3.应用实例 oper.sh<br>案例 1：计算（2+3）X4 的值<br>案例 2：请求出命令行的两个参数[整数]的和 20 50<br><br>vim oper.sh<br>	写入:<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">案例 1：计算（2+3）X4 的值</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">使用第一种方式</span><br>	RES1=$(((2+3)*4))        ---&gt;用一个变量RES1接收<br>	echo "res1=$RES1"<br>	保存并退出<br>sh oper.sh<br><br>vim oper.sh<br>	写入:<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">使用第二种方式, 推荐使用</span><br>	RES2=$[(2+3)*4]<br>	echo "res2=$RES2"<br>	保存并退出<br>sh oper.sh	<br><br>vim oper.sh<br>	写入:<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">!/bin/bash</span>	<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">使用第三种方式 <span class="hljs-built_in">expr</span></span> <br>	TEMP=`expr 2 + 3`       <br>	RES4=`expr $TEMP \* 4` <br>	echo "temp=$TEMP"<br>	echo "res4=$RES4"<br>	保存并退出<br>sh oper.sh<br><br>vim oper.sh<br>	写入:<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">!/bin/bash</span>	<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">案例 2：请求出命令行的两个参数[整数]的和 20 50</span> <br>	SUM=$[$1+$2]<br>	echo "sum=$SUM"<br>	保存并退出<br>sh oper.sh 20 50<br><br></code></pre></td></tr></tbody></table></figure>
<h4 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.基本语法：<br>[ condition ] （注意 condition 前后要有空格）<br><span class="hljs-meta prompt_">#</span><span class="language-bash">非空返回 <span class="hljs-literal">true</span>，可使用$?验证（0 为 <span class="hljs-literal">true</span>，&gt;1 为 <span class="hljs-literal">false</span>）</span><br><br><br>2.应用实例：<br>[ hspEdu ]		返回 true <br>[ ]				返回 false<br>[ condition ] &amp;&amp; echo OK || echo notok	条件满足，执行后面的语句<br><br><br>3.判断语句：<br>	常用判断条件：<br>	(1) = 字符串比较<br>	(2)	两个整数的比较<br>		-lt 小于     less than<br>		-le 小于等于  less equal<br>		-eq 等于      equal<br>		-gt 大于      greater<br>		-ge 大于等于   greater equal<br>		-ne 不等于     not equal<br>	(3)	按照文件权限进行判断<br>		-r 有读的权限<br>		-w 有写的权限<br>		-x 有执行的权限<br>	(4)	按照文件类型进行判断<br>		-f 文件存在并且是一个常规的文件<br>		-e 文件存在<br>		-d 文件存在并是一个目录<br><br><br>4.应用实例：<br>案例 1："ok"是否等于"ok"<br>判断语句：使用 =<br>案例 2：23 是否大于等于 22<br>判断语句：使用 -ge<br>案例 3：/root/shcode/aaa.txt 目录中的文件是否存在<br>判断语句： 使用 -f<br><br>代码如下:<br>vim ifdemo.sh<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">案例 1：<span class="hljs-string">"ok"</span>是否等于<span class="hljs-string">"ok"</span></span><br>	if [ "ok" = "ok"  ]<br>	then<br>	        echo "equal"<br>	fi                    -----&gt; if语句 以if开头 以fi结尾<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">案例 2：23 是否大于等于 22</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">判断语句：使用 -ge</span><br>	if [ 23 -ge 22 ]<br>	then<br>	        echo "大于"<br>	fi<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">案例 3：/root/shcode/aaa.txt 目录中的文件是否存在</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">判断语句： 使用 -f</span><br>	if [ -f  /root/shcode/aaa.txt ]<br>	then<br>	        echo "文件存在"<br>	fi<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">看几个案例</span><br>	if [ ]<br>	then<br>	        echo "存在"<br>	fi<br>	<br>	if [ hspEdu01 ]<br>	then<br>	        echo "hello hspEdu01"<br>	fi<br>sh ifdemo.sh<br><br>输出结果：<br>	equal<br>	大于<br>	hello hspEdu01<br></code></pre></td></tr></tbody></table></figure>
<h4 id="if-语句"><a href="#if-语句" class="headerlink" title="if 语句"></a>if 语句</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.基本语法：<br>if [ 条件判断式 ] <br>then<br>	代码<br>fi<br><br>或者 多分支<br><br>if [ 条件判断式 ] <br>then<br>	代码<br>elif [条件判断式] <br>then<br>	代码<br>fi<br><br>2.注意事项：[ 条件判断式 ]，中括号和条件判断式之间必须有空格<br><br>3.应用实例 ifCase.sh<br>案例：请编写一个 shell 程序，如果输入的参数，大于等于 60，则输出 "及格了"，如果小于 60,则输出 "不及格"<br>	if [ $1 -ge 60 ]<br>	then<br>	        echo "及格了"<br>	else<br>	        echo "不及格"<br>	fi<br><br>	或者<br><br>	if [ $1 -ge 60 ]<br>	then<br>	        echo "及格了"<br>	elif[ $1 -lt 60]<br>	then<br>	        echo "不及格"<br>	fi<br><br></code></pre></td></tr></tbody></table></figure>
<h4 id="case-语句"><a href="#case-语句" class="headerlink" title="case 语句"></a>case 语句</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.基本语法：<br><br>case $变量名 in<br>"值 1")<br>如果变量的值等于值 1，则执行程序 1<br>;;<br>"值 2")<br>如果变量的值等于值 2，则执行程序 2<br>;;<br>…省略其他分支…<br><br>*)<br>如果变量的值都不是以上的值，则执行此程序<br>;;<br>esac<br><br>应用实例 testCase.sh<br>案例1：当命令行参数是1时，输出 "周一", 是2时，就输出"周二"，其它情况输出"other"<br>vim testCase.sh<br>	写入：<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">案例1：当命令行参数是1时，输出 <span class="hljs-string">"周一"</span>, 是2时，就输出<span class="hljs-string">"周二"</span>，其它情况输出<span class="hljs-string">"other"</span></span><br>	case $1 in<br>	"1")<br>	echo "周一"<br>	;;<br>	"2")<br>	echo "周二"<br>	;;<br>	*)<br>	echo "other..."<br>	;;<br>	esac<br>	保存并退出<br>	<br>sh testCase.sh 1<br>周一<br><br></code></pre></td></tr></tbody></table></figure>
<h4 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs shell">基本语法：<br><br>第一种方式：<br><br>for 变量 in  值 1  值 2  值 3… <br>do<br>程序/代码<br>done<br><br>应用实例 testFor1.sh<br>案例：打印命令行输入的参数 [这里可以看出$*  和 $@ 的区别]<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">案例：打印命令行输入的参数 [这里可以看出$*  和 <span class="hljs-variable">$@</span> 的区别]</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">注意：$* 是把输入的参数当作一个整体，所以只会输出一句话</span><br>	for i in "$*"<br>	do<br>	        echo "num is $*"<br>	done<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">使用 <span class="hljs-variable">$@</span> 来获取输入的参数，注意：也是把输入的参数看作一个整体，但这是分别对待；所以有几个参数就输出几句</span><br>	echo "======================================"<br>	for j in "$@"<br>	do<br>	        echo "num is $@"<br>	done<br><br>sh testFor1.sh 100 200 300<br>num is 100 200 300<br>======================================<br>num is 100 200 300<br>num is 100 200 300<br>num is 100 200 300<br><br><br><br><br><br>第二种方式：<br><br>for (( 初始值;循环控制条件;变量变化 ))<br>do<br>程序/代码<br>done<br><br>应用实例 testFor2.sh<br>案例：从 1 加到 100 的值输出显示<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">案例：从 1 加到 100 的值输出显示</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">定义一个变量SUM</span><br>	SUM=0<br>	for(( i=1; i&lt;=100; i++  ))<br>	do<br>	        SUM=$[$SUM+$i]<br>	done<br>	echo "总和SUM=$SUM"<br><br>sh testFor2.sh <br>总和SUM=5050<br><br>如果1加到x x由自己输入<br>	SUM=0<br>	for(( i=1; i&lt;=$1; i++  ))<br>	do<br>	        SUM=$[$SUM+$i]<br>	done<br>	echo "总和SUM=$SUM"<br><br>sh textFor2.sh 1000<br>总和SUM=500500<br><br></code></pre></td></tr></tbody></table></figure>
<h4 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a>while 循环</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs shell">基本语法：<br>while [ 条件判断式 ]<br>do<br>程序/代码<br>done<br><br>注意：while 和 [有空格，条件判断式和[  ]也有空格<br><br>应用实例：testWhile.sh<br>案例：从命令行输入一个数 n，统计从 1+..+ n  的值是多少？<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">!/bin/bash</span><br>	SUM=0<br>	i=0<br>	while [ $i -le $1 ] <br>	do<br>	SUM=$[$SUM+$i]<br><span class="hljs-meta prompt_">	#</span><span class="language-bash">i 自增</span><br>	i=$[$i+1]<br>	done<br>	echo "执行结果=$SUM"<br><br>sh testWhile.sh 100<br>执行结果=5050<br><br></code></pre></td></tr></tbody></table></figure>
<h4 id="read-读取控制台输入"><a href="#read-读取控制台输入" class="headerlink" title="read 读取控制台输入"></a>read 读取控制台输入</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.基本语法：<br>read(选项)(参数)<br>选项：<br>	-p：指定读取值时的提示符；<br>	-t：指定读取值时等待的时间（秒），如果没有在指定的时间内输入，就不再等待了<br>参数：<br>	变量：指定读取值的变量名<br><br>2.应用实例 testRead.sh<br>案例 1：读取控制台输入一个 NUM1 值<br>案例 2：读取控制台输入一个 NUM2 值，在 10 秒内输入。代码:<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">案例 1：读取控制台输入一个 NUM1 值</span><br>	read -p "请输入一个数 NUM1=" NUM1 <br>	echo "你输入的 NUM1=$NUM1"<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">案例 2：读取控制台输入一个 NUM2 值，在 10 秒内输入。</span><br>	read -t 10 -p "请输入一个数 NUM2=" NUM2 <br>	echo "你输入的 NUM2=$NUM2"<br><br>sh testRead.sh<br>请输入一个数 NUM1=100<br>你输入的 NUM1=100<br><br></code></pre></td></tr></tbody></table></figure>
<h4 id="函数介绍"><a href="#函数介绍" class="headerlink" title="函数介绍"></a>函数介绍</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">shell 编程和其它编程语言一样，有系统函数，也可以自定义函数。系统函数中，我们这里就介绍两个。<br></code></pre></td></tr></tbody></table></figure>
<h4 id="系统函数"><a href="#系统函数" class="headerlink" title="系统函数"></a>系统函数</h4><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sh">1.<span class="hljs-built_in">basename</span> 基本语法<br>功能：返回完整路径最后 / 的部分，常用于获取文件名<br><span class="hljs-built_in">basename</span> [pathname] [suffix]<br><span class="hljs-built_in">basename</span> [string] [suffix]	<br><br>功能描述：<span class="hljs-built_in">basename</span> 命令会删掉所有的前缀包括最后一个（‘/’）字符，然后将字符串显示出来。<br>选项：suffix 为后缀，如果 suffix 被指定了，<span class="hljs-built_in">basename</span> 会将 pathname 或 string 中的 suffix 去掉。<br><br>案例 1：请返回 /home/aaa/test.txt 的 <span class="hljs-string">"test.txt"</span> 部分<br><span class="hljs-built_in">basename</span> /home/aaa/test.txt<br>返回test.txt<br><br>如果输入：<span class="hljs-built_in">basename</span> /home/aaa/test.txt .txt<br>返回<span class="hljs-built_in">test</span><br>2.<span class="hljs-built_in">dirname</span> 基本语法<br>功能：返回完整路径最后 / 的前面的部分，常用于返回路径部分<br><span class="hljs-built_in">dirname</span> 文件绝对路径 <br><br>功能描述：从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分）<br><br>案例 1：请返回 /home/aaa/test.txt 的 /home/aaa <br><span class="hljs-built_in">dirname</span> /home/aaa/test.txt<br>返回/home/aaa<br></code></pre></td></tr></tbody></table></figure>
<h4 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h4><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs sh">基本语法：<br>[ <span class="hljs-keyword">function</span> ] funname[()]<br>{<br>	Action; <br>	[<span class="hljs-built_in">return</span> int;]<br>}<br><br>调用直接写函数名：funname	[值]<br><br><br>案例 1：计算输入两个参数的和(动态的获取) testFun.sh<br>	<span class="hljs-comment">#!/bin/bash</span><br>	<span class="hljs-comment">#案例 1：计算输入两个参数的和(动态的获取)</span><br>	<br>	<span class="hljs-comment">#定义函数 getSum </span><br>	<span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">getSum</span></span>() {<br>		SUM=$[<span class="hljs-variable">$n1</span>+<span class="hljs-variable">$n2</span>] <br>		<span class="hljs-built_in">echo</span> <span class="hljs-string">"和是=<span class="hljs-variable">$SUM</span>"</span><br>	}<br><br>	<span class="hljs-comment">#输入两个值</span><br>	<span class="hljs-built_in">read</span> -p <span class="hljs-string">"请输入一个数 n1="</span> n1 <br>	<span class="hljs-built_in">read</span> -p <span class="hljs-string">"请输入一个数 n2="</span> n2<br>	<br>	<span class="hljs-comment">#调用自定义函数</span><br>	getSum <span class="hljs-variable">$n1</span> <span class="hljs-variable">$n2</span><br><br><br>sh testFun.sh <br>请输入一个数 n1=10<br>请输入一个数 n2=90<br>和是=100<br><br></code></pre></td></tr></tbody></table></figure>
<h2 id="第二十一章：Linux-高级篇-日志管理"><a href="#第二十一章：Linux-高级篇-日志管理" class="headerlink" title="第二十一章：Linux 高级篇-日志管理"></a>第二十一章：Linux 高级篇-日志管理</h2><h4 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1)日志文件是重要的系统信息文件，其中记录了许多重要的系统事件，包括用户的登录信息、系统的启动信息、系统的安全信息、邮件相关信息、各种服务相关信息等。<br>(2)日志对于安全来说也很重要，它记录了系统每天发生的各种事情，通过日志来检查错误发生的原因，或者受到攻击时攻击者留下的痕迹。<br>(3)可以这样理解 日志是用来记录重大事件的工具<br></code></pre></td></tr></tbody></table></figure>
<h4 id="系统常用的日志"><a href="#系统常用的日志" class="headerlink" title="系统常用的日志"></a>系统常用的日志</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">系统日志文件的保存位置：/var/log/ 目录下<br>应用案例：<br>使用 root 用户通过 xshell6 登陆，第一次使用错误的密码，第二次使用正确的密码登录成功看看在日志文件/var/log/secure 里有没有记录相关信息<br>系统常用日志：<br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019121939561.png" alt="image-20221019121939561"></p>
<p>日志管理服务rsyslogd</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">CentOS7.6 日志服务是 rsyslogd   (rocket-fast system for log)<br>CentOS6.x 日志服务是 syslogd <br>rsyslogd 功能更强大<br>rsyslogd 的使用、日志文件的格式，和 syslogd 服务是兼容的<br><br>rsyslogd是一个后台程序(服务)，来管理/记录/操作相关日志。<br>将日志记录到对应的文件中。<br><br>/etc/rsyslog.conf配置文件中记录了要管理哪些日志和将这些日志记录到哪个文件中。<br></code></pre></td></tr></tbody></table></figure>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/image-20221019145550645.png" alt="image-20221019145550645"></p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.在进行日志管理时，要保证rsyslogd服务是启动的！<br><br>(1)查询 Linux 中的 rsyslogd 服务是否启动<br>ps aux | grep "rsyslog" <br><br>ps aux | grep "rsyslog" | grep -v "grep"<br>| grep -v "grep" ---&gt; 筛选出ps aux | grep "rsyslog" 结果中不是grep的<br><br>(2)查询 rsyslogd 服务的自启动状态(是否是自启动状态enable)<br>systemctl list-unit-files | grep rsyslog<br><br><br>2.配置文件：/etc/rsyslog.conf<br>该配置文件中记录了：日志和日志存放在哪个文件<br><br>关于日志：*.*<br>其中第一个*代表日志类型，第二个*代表日志级别<br><br>(1)日志类型分为：<br>auth					##pam 产生的日志<br>authpriv				##ssh、ftp 等登录信息的验证信息<br>corn					##时间任务相关<br>kern					##内核<br>lpr						##打印<br>mail					##邮件<br>mark(syslog)-rsyslog	##服务内部的信息，时间标识<br>news					##新闻组<br>user					##用户程序产生的相关信息<br>uucp					##unix to nuix copy主机之间相关的通信<br>local 1-7				##自定义的日志设备<br><br>(2)日志级别分为：<br>debug		##有调试信息的，日志通信最多<br>info		##一般信息日志，最常用<br>notice		##最具有重要性的普通条件的信息<br>warning		##警告级别<br>err			##错误级别，阻止某个功能或者模块不能正常工作的信息<br>crit		##严重级别，阻止整个系统或者整个软件不能正常工作的信息<br>alert		##需要立刻修改的信息<br>emerg		##内核崩溃等重要信息<br>none		##什么都不记录	<br>注意：从上到下，级别从低到高，记录信息越来越少<br><br><br>3.由日志服务 rsyslogd 记录的日志文件，<br>日志文件的内容：每一行都代表一个事件，每一行有以下四个内容：<br>1)	事件产生的时间<br>2)	产生事件的服务器的主机名<br>3)	产生事件的服务名或程序名<br>4)	事件的具体信息<br><br><br>4.日志如何查看实例<br>查看一下 /var/log/secure 日志，这个日志中记录的是用户验证和授权方面的信息 来分析如何查看<br><br>5.日志管理服务应用实例（增加自定义的日志）<br>在/etc/rsyslog.conf 中添加一个日志文件/var/log/hsp.log,当有事件发送时(比如 sshd 服务相关事件)，该文件会接收到信息并保存. <br>给小伙伴演示 重启，登录 的情况，看看是否有日志保存<br><br>vim /etc/rsyslog.conf <br>写入：<br>	*.*  		/var/log/hsp.log<br>	保存退出<br><span class="hljs-meta prompt_">&gt; </span><span class="language-bash">/var/log/hsp.log  (创建日志文件)</span><br>然后重启，重启事件会被记录到/var/log/hsp.log中<br>cat hsp.log | grep sshd 	就可以查到信息(sshd远程连接)<br><br></code></pre></td></tr></tbody></table></figure>
<h4 id="日志轮替"><a href="#日志轮替" class="headerlink" title="日志轮替"></a>日志轮替</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">日志轮替(logrotate)就是把旧的日志文件移动并改名，同时建立新的空日志文件，当旧日志文件超出保存的范围之后，就会进行删除<br>清除日志中旧的信息<br>(1)	centos7 使用 logrotate 进行日志轮替管理<br>要想改变日志轮替文件名字，通过 /etc/logrotate.conf 配置文件中“dateext” 参数<br><br>(2)	如果配置文件中有“dateext”参数，那么日志会用日期来作为日志文件的后缀，例如 “secure-20201010”。<br>这样日志文件名不会重叠，也就不需要日志文件的改名，只需要指定保存日志个数，删除多余的日志文件即可。<br><br>(3)	如果配置文件中没有“dateext”参数，日志文件就需要进行改名了。<br>当第一次进行日志轮替时，当前的“secure”日志会自动改名为“secure.1”，然后新建“secure”日志， 用来保存新的日志。<br>当第二次进行日志轮替时，“secure.1” 会自动改名为“secure.2”， 当前的“secure”日志会自动改名为“secure.1”，然后也会新建“secure”日志，用来保存新的日志，以此类推。<br><br></code></pre></td></tr></tbody></table></figure>
<h4 id="logrotate-配置文件"><a href="#logrotate-配置文件" class="headerlink" title="logrotate 配置文件"></a>logrotate 配置文件</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs shell">/etc/logrotate.conf 为 logrotate 的全局配置文件(写了日志文件轮替规则)<br><br>/etc/logrotate.conf中的轮替规则适用于所有日志文件(除了单独指定轮替规则的日志文件)<br>可以在/etc/logrotate.conf对某些日志文件单独指定轮替规则<br>也可以把对某些日志文件单独指定的轮替规则写在/etc/logrotate.d目录下，然后在/etc/logrotate.conf 中include调用<br><br>/etc/logrotate.conf文件内容：<br><span class="hljs-meta prompt_">	# </span><span class="language-bash">rotate <span class="hljs-built_in">log</span> files weekly---&gt;每周对日志文件进行一次轮替</span><br>	weekly<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	# </span><span class="language-bash">keep 4 weeks worth of backlogs---&gt;共保存 4 份日志文件，当建立新的日志文件时，旧的将会被删除</span><br>	rotate 4<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	# </span><span class="language-bash">create new (empty) <span class="hljs-built_in">log</span> files after rotating old ones---&gt;创建新的空的日志文件，在日志轮替后</span><br>	create<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	# </span><span class="language-bash">use <span class="hljs-built_in">date</span> as a suffix of the rotated file---&gt;使用日期作为日志轮替文件的后缀</span><br>	dateext<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	# </span><span class="language-bash">uncomment this <span class="hljs-keyword">if</span> you want your <span class="hljs-built_in">log</span> files compressed---&gt;日志文件是否压缩。如果取消注释，则日志会在转储的同时进行压缩</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">compress</span><br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">RPM packages drop <span class="hljs-built_in">log</span> rotation information into this directory</span> <br>	include /etc/logrotate.d---&gt;可以把一些单独的轮替规则写在/etc/logrotate.d下(在本文件中include调用一下就行)，也可以写在本文件中(如下面写的)<br><span class="hljs-meta prompt_">	</span><br><span class="hljs-meta prompt_">	#</span><span class="language-bash">下面是单独设置，优先级更高。</span><br><span class="hljs-meta prompt_">	# </span><span class="language-bash">no packages own wtmp and btmp -- we<span class="hljs-string">'ll rotate them here</span></span><br>	/var/log/wtmp {<br>		monthly					 # 每月对日志文件进行一次轮替<br>		create 0664 root utmp 	 # 建立的新日志文件，权限是 0664  ，所有者是 root ，所属组是 utmp 组<br>		minsize 1M				 # 日志文件最小轮替大小是 1MB 。也就是日志一定要超过 1MB 才会轮替，否则就算时间达到一个月，也不进行日志转储<br>		rotate 1 				 # 仅保留一个日志备份。也就是只有 wtmp  和 wtmp.1  日志保留而已<br>	}<br>	<br>	/var/log/btmp {<br>		missingok 				 # 如果日志不存在，则忽略该日志的警告信息<br>		monthly<br>		create 0600 root utmp rotate 1<br>	}<br>	<br><br><br><br>	单独指定某个日志文件的轮替规则的参数说明：<br>		daily					日志的轮替周期是每天<br>		weekly					日志的轮替周期是每周<br>		monthly					日志的轮替周期是每月<br>		rotate 数字				保留的日志文件的个数。0 指没有备份<br>		compress				日志轮替时，旧的日志进行压缩<br>		create mode owner group	建立新日志，同时指定新日志的权限与所有者和所属组。<br>		mail address			当日志轮替时，输出内容通过邮件发送到指定的邮件地址。<br>		missingok				如果日志不存在，则忽略该日志的警告信息<br>		notifempty				如果日志为空文件，则不进行日志轮替<br>		minsize 大小				日志轮替的最小值。也就是日志一定要达到这个最小值才会轮替，否则就算时间达到也不轮替<br>		size 大小				日志只有大于指定大小才进行日志轮替，而不是按照时间轮替。<br>		dateext					使用日期作为日志轮替文件的后缀。<br>		sharedscripts			在此关键字之后的脚本只执行一次。<br>		prerotate/endscript		在日志轮替之前执行脚本命令。<br>		postrotate/endscript	在日志轮替之后执行脚本命令。<br></code></pre></td></tr></tbody></table></figure>
<h4 id="把自己的日志加入日志轮替"><a href="#把自己的日志加入日志轮替" class="headerlink" title="把自己的日志加入日志轮替"></a>把自己的日志加入日志轮替</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">1)	第一种方法：<br>		直接在/etc/logrotate.conf 配置文件中写入该日志的轮替策略<br>2)	第二种方法：<br>		在/etc/logrotate.d/目录中新建立该日志的轮替文件，在该轮替文件中写入正确的轮替策略，因为该目录中的文件都会被“include”到主配置文件中，所以也可以把日志加入轮替。<br><br>3)	推荐使用第二种方法，因为系统中需要轮替的日志非常多，如果全都直接写 入/etc/logrotate.conf 配置文件，那么这个文件的可管理性就会非常差，不利于此文件的维护。<br></code></pre></td></tr></tbody></table></figure>
<p>案例：</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs sh">案例：在/etc/logrotate.conf 进行配置, 或者直接在 /etc/logrotate.d/ 下创建文件 hsplog  <br>编写如下内容,	具体轮替的效果 可以参考 /var/log  下的 boot.log 情况.<br>/var/log/hsp.log<br>{<br>	missingok<br>	daily<br>	copytruncate<br>	rotate 7<br>	notifempty<br>}<br><br><br>在 /etc/logrotate.d/ 下创建文件 hsplog  <br>vim  hsplog  <br>写入：<br>	/var/log/hsp.log<br>	{<br>		missingok<br>		daily<br>		copytruncate<br>		rotate 1<br>		notifempty<br>	}<br>	保存退出<br><br>这样就好了，因为/etc/logrotate.conf 中有：include /etc/logrotate.d<br><br></code></pre></td></tr></tbody></table></figure>
<p>日志轮替机制原理：</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">日志轮替之所以可以在指定的时间备份日志，是依赖系统定时任务。<br>在 /etc/cron.daily/目录，就会发现这个目录中是有 logrotate 文件(可执行)，<br>logrotate 通过这个文件依赖定时任务执行的。<br><br>crond定时后台程序会定时执行cron.daily内的文件<br>logrotate 文件在cron.daily下<br>所以也会定时执行文件中的轮替规则<br>写日志是rsyslogd<br>日志轮替是logrotate<br></code></pre></td></tr></tbody></table></figure>
<p>查看内存日志</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell">有一些日志是写到内存里的，还没有写到文件里，因为这些日志是实时变化的<br>重启之后内存日志会被清空<br><br>查看内存日志指令：journalctl<br>journalctl				查看全部<br>journalctl -n 3			查看最新 3 条<br>journalctl --since 19:00	--until 19:10:10	查看起始时间到结束时间的日志可加日期<br>journalctl -p err		报错日志<br>journalctl -o verbose	日志详细内容<br>journalctl _PID=1245 _COMM=sshd	查看包含这些参数的日志（在详细日志查看） 或者 journalctl |	grep sshd<br> <br><br>注意: journalctl	查看的是内存日志, 重启清空<br><br>演示案例:<br>使用 journalctl | grep sshd	来看看用户登录清空, 重启系统，再次查询，看看日志有什么变化没有<br><br></code></pre></td></tr></tbody></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://7756jokerqaq.github.io">LiYiChen</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://7756jokerqaq.github.io/2022/10/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/LINUX%E7%90%86%E8%AE%BA%E5%AD%A6%E4%B9%A0/">https://7756jokerqaq.github.io/2022/10/19/后端学习/LINUX理论学习/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://7756jokerqaq.github.io" target="_blank">JokerQAQ的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java%E5%90%8E%E7%AB%AF/">Java后端</a></div><div class="post_share"><div class="social-share" data-image="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/hellopicture.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/10/22/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Mybatis-Plus/"><img class="prev-cover" src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/MybaitsPlus.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Mybatis-Plus学习笔记</div></div></a></div><div class="next-post pull-right"><a href="/2022/10/11/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Spring%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/"><img class="next-cover" src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/wallhaven-576ry7_1920x1080.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Spring5理论学习</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Java%E5%9F%BA%E7%A1%80%E5%88%B7%E9%A2%98/" title="Java基础刷题"><img class="cover" src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/wallhaven-01o8k3_1920x1080.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-27</div><div class="title">Java基础刷题</div></div></a></div><div><a href="/2022/10/22/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Mybatis-Plus/" title="Mybatis-Plus学习笔记"><img class="cover" src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/MybaitsPlus.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-22</div><div class="title">Mybatis-Plus学习笔记</div></div></a></div><div><a href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SDK%E7%9A%84make/" title="SDK的制作"><img class="cover" src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/aaaa.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-02-27</div><div class="title">SDK的制作</div></div></a></div><div><a href="/2022/10/25/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SpringBoot2%20%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/" title="SpringBoot2开发实用篇(二)"><img class="cover" src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/ssspringboot.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-25</div><div class="title">SpringBoot2开发实用篇(二)</div></div></a></div><div><a href="/2022/10/23/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SpringBoot2%E7%90%86%E8%AE%BA%E5%AD%A6%E4%B9%A0/" title="SpringBoot2理论学习(一)"><img class="cover" src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/ssspringboot.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-23</div><div class="title">SpringBoot2理论学习(一)</div></div></a></div><div><a href="/2022/10/11/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Spring%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/" title="Spring5理论学习"><img class="cover" src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/wallhaven-576ry7_1920x1080.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-11</div><div class="title">Spring5理论学习</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/wallhaven-4y6170_1920x1080.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">LiYiChen</div><div class="author-info__description">日常学习记录</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">27</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/7756JokerQAQ"><i class="fab fa-github"></i><span>Github</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/7756JokerQAQ" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:2677006173@qq.com" target="_blank" title="QQ邮箱"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://7756jokerqaq.github.io" target="_blank" title="博客"><i class="fa-brands fa-blogger"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">日常学习java后端和前端</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#LINUX%E7%90%86%E8%AE%BA%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.</span> <span class="toc-text">LINUX理论学习</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%85%8B%E9%9A%86"><span class="toc-number">1.0.0.1.</span> <span class="toc-text">2.虚拟机克隆</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%9A%84%E5%BF%AB%E7%85%A7"><span class="toc-number">1.0.0.2.</span> <span class="toc-text">3.虚拟机的快照</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-Linux%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.0.0.3.</span> <span class="toc-text">3. Linux目录结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95Linux"><span class="toc-number">1.0.0.4.</span> <span class="toc-text">4.为什么需要远程登录Linux</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-vi-%E5%92%8C-vim-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.0.0.5.</span> <span class="toc-text">5. vi 和 vim 的基本介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-Linux-%E5%AE%9E%E6%93%8D%E7%AF%87"><span class="toc-number">1.0.0.6.</span> <span class="toc-text">6.Linux 实操篇</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-Linux-%E5%AE%9E%E6%93%8D%E7%AF%87-%E5%AE%9E%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="toc-number">1.0.0.7.</span> <span class="toc-text">7.Linux 实操篇-实用指令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0-Linux-%E5%AE%9E%E6%93%8D-%E5%BC%80%E6%9C%BA%E3%80%81%E9%87%8D%E5%90%AF%E5%92%8C%E7%94%A8%E6%88%B7%E6%B3%A8%E9%94%80"><span class="toc-number">1.1.</span> <span class="toc-text">第七章 Linux 实操-开机、重启和用户注销</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%85%B3%E6%9C%BA-amp-%E9%87%8D%E5%90%AF%E5%91%BD%E4%BB%A4"><span class="toc-number">1.1.1.</span> <span class="toc-text">7.1 关机&amp;重启命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E5%92%8C%E6%B3%A8%E9%94%80"><span class="toc-number">1.1.2.</span> <span class="toc-text">7.2  用户登录和注销</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0-LINUX%E5%AE%9E%E6%93%8D%E7%AF%87-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text">第八章 LINUX实操篇-用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.2.1.</span> <span class="toc-text">8.1 基本介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7"><span class="toc-number">1.2.2.</span> <span class="toc-text">8.2 添加用户</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-1-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">8.2.1 基本语法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-%E6%8C%87%E5%AE%9A%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81"><span class="toc-number">1.2.3.</span> <span class="toc-text">8.3 指定修改密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-number">1.2.4.</span> <span class="toc-text">8.4 删除用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-%E6%9F%A5%E8%AF%A2%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E6%8C%87%E4%BB%A4"><span class="toc-number">1.2.5.</span> <span class="toc-text">8.5 查询用户信息指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-6-%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7"><span class="toc-number">1.2.6.</span> <span class="toc-text">8.6 切换用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-7-%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7-%E7%99%BB%E5%BD%95%E7%94%A8%E6%88%B7"><span class="toc-number">1.2.7.</span> <span class="toc-text">8.7 查看当前用户&#x2F;登录用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-8-%E7%94%A8%E6%88%B7%E7%BB%84"><span class="toc-number">1.2.8.</span> <span class="toc-text">8.8 用户组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E7%AB%A0-LINXU%E7%BB%84%E7%AE%A1%E7%90%86%E5%92%8C%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">1.3.</span> <span class="toc-text">第十章 LINXU组管理和权限管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0Linux-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">1.4.</span> <span class="toc-text">第十一章Linux 定时任务调度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0-Linux%E5%AE%9E%E6%93%8D%E7%AF%87%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA%E3%80%81%E6%8C%82%E8%BD%BD"><span class="toc-number">1.5.</span> <span class="toc-text">第十二章 Linux实操篇磁盘分区、挂载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LINUX%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><span class="toc-number">1.6.</span> <span class="toc-text">LINUX网络配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%BA%94%E7%AB%A0%EF%BC%9ALinux-%E5%AE%9E%E6%93%8D%E7%AF%87-RPM-%E4%B8%8E-YUM"><span class="toc-number">1.7.</span> <span class="toc-text">第十五章：Linux 实操篇- RPM 与 YUM</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#RPM-%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.7.0.1.</span> <span class="toc-text">RPM 介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#yum%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.7.0.2.</span> <span class="toc-text">yum介绍</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%83%E7%AB%A0%EF%BC%9A%E5%A4%A7%E6%95%B0%E6%8D%AE%E5%AE%9A%E5%88%B6%E7%AF%87-Shell%E7%BC%96%E7%A8%8B"><span class="toc-number">1.8.</span> <span class="toc-text">第十七章：大数据定制篇-Shell编程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Shell-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.8.0.1.</span> <span class="toc-text">Shell 是什么</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Shell-%E7%9A%84%E5%8F%98%E9%87%8F"><span class="toc-number">1.8.0.2.</span> <span class="toc-text">Shell 的变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#shell-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-number">1.8.0.3.</span> <span class="toc-text">shell 自定义变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F"><span class="toc-number">1.8.0.4.</span> <span class="toc-text">设置环境变量(全局变量)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%8D%E7%BD%AE%E5%8F%82%E6%95%B0%E5%8F%98%E9%87%8F"><span class="toc-number">1.8.0.5.</span> <span class="toc-text">位置参数变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%84%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="toc-number">1.8.0.6.</span> <span class="toc-text">预定义变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="toc-number">1.8.0.7.</span> <span class="toc-text">条件判断</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#if-%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.8.0.8.</span> <span class="toc-text">if 语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#case-%E8%AF%AD%E5%8F%A5"><span class="toc-number">1.8.0.9.</span> <span class="toc-text">case 语句</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#for-%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.8.0.10.</span> <span class="toc-text">for 循环</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#while-%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.8.0.11.</span> <span class="toc-text">while 循环</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#read-%E8%AF%BB%E5%8F%96%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%85%A5"><span class="toc-number">1.8.0.12.</span> <span class="toc-text">read 读取控制台输入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.8.0.13.</span> <span class="toc-text">函数介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0"><span class="toc-number">1.8.0.14.</span> <span class="toc-text">系统函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0"><span class="toc-number">1.8.0.15.</span> <span class="toc-text">自定义函数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%80%E7%AB%A0%EF%BC%9ALinux-%E9%AB%98%E7%BA%A7%E7%AF%87-%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86"><span class="toc-number">1.9.</span> <span class="toc-text">第二十一章：Linux 高级篇-日志管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.9.0.1.</span> <span class="toc-text">基本介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%B8%B8%E7%94%A8%E7%9A%84%E6%97%A5%E5%BF%97"><span class="toc-number">1.9.0.2.</span> <span class="toc-text">系统常用的日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E8%BD%AE%E6%9B%BF"><span class="toc-number">1.9.0.3.</span> <span class="toc-text">日志轮替</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#logrotate-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.9.0.4.</span> <span class="toc-text">logrotate 配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%8A%E8%87%AA%E5%B7%B1%E7%9A%84%E6%97%A5%E5%BF%97%E5%8A%A0%E5%85%A5%E6%97%A5%E5%BF%97%E8%BD%AE%E6%9B%BF"><span class="toc-number">1.9.0.5.</span> <span class="toc-text">把自己的日志加入日志轮替</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/03/21/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/%E5%8D%95%E8%B0%83%E6%A0%88and%E4%BA%8C%E5%8F%89%E6%A0%91/" title="单调栈和二叉树"><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303211444122.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="单调栈和二叉树"/></a><div class="content"><a class="title" href="/2023/03/21/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/%E5%8D%95%E8%B0%83%E6%A0%88and%E4%BA%8C%E5%8F%89%E6%A0%91/" title="单调栈和二叉树">单调栈和二叉树</a><time datetime="2023-03-20T16:00:00.000Z" title="发表于 2023-03-21 00:00:00">2023-03-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Eureka%E5%92%8CRibbon/" title="Eureka And Ribbon"><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191548952.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Eureka And Ribbon"/></a><div class="content"><a class="title" href="/2023/03/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Eureka%E5%92%8CRibbon/" title="Eureka And Ribbon">Eureka And Ribbon</a><time datetime="2023-03-18T16:00:00.000Z" title="发表于 2023-03-19 00:00:00">2023-03-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Nacos/" title="Nacos"><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191548952.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nacos"/></a><div class="content"><a class="title" href="/2023/03/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Nacos/" title="Nacos">Nacos</a><time datetime="2023-03-18T16:00:00.000Z" title="发表于 2023-03-19 00:00:00">2023-03-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/19/%E9%9D%A2%E8%AF%95%E9%A2%98/%E9%9D%A2%E8%AF%95%E9%A2%982/" title="面试题2"><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191547821.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="面试题2"/></a><div class="content"><a class="title" href="/2023/03/19/%E9%9D%A2%E8%AF%95%E9%A2%98/%E9%9D%A2%E8%AF%95%E9%A2%982/" title="面试题2">面试题2</a><time datetime="2023-03-18T16:00:00.000Z" title="发表于 2023-03-19 00:00:00">2023-03-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Java%E5%9F%BA%E7%A1%80%E5%88%B7%E9%A2%98/" title="Java基础刷题"><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/wallhaven-01o8k3_1920x1080.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java基础刷题"/></a><div class="content"><a class="title" href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Java%E5%9F%BA%E7%A1%80%E5%88%B7%E9%A2%98/" title="Java基础刷题">Java基础刷题</a><time datetime="2023-02-26T16:00:00.000Z" title="发表于 2023-02-27 00:00:00">2023-02-27</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/3481/hellopicture.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By LiYiChen</div><div class="footer_custom_text">Hi,welcome to my <a href="https://7756jokerqaq.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="ftrue"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>