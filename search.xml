<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>è‡ªåŠ¨è¿æ¥é•¿å¤§æ ¡å›­ç½‘</title>
      <link href="/2023/04/07/%E9%9A%8F%E4%BE%BF%E7%8E%A9/%E8%87%AA%E5%8A%A8%E8%BF%9E%E6%8E%A5%E9%95%BF%E5%A4%A7%E6%A0%A1%E5%9B%AD%E7%BD%91/"/>
      <url>/2023/04/07/%E9%9A%8F%E4%BE%BF%E7%8E%A9/%E8%87%AA%E5%8A%A8%E8%BF%9E%E6%8E%A5%E9%95%BF%E5%A4%A7%E6%A0%A1%E5%9B%AD%E7%BD%91/</url>
      
        <content type="html"><![CDATA[<h1 id="è‡ªåŠ¨è¿æ¥é•¿å¤§æ ¡å›­ç½‘"><a href="#è‡ªåŠ¨è¿æ¥é•¿å¤§æ ¡å›­ç½‘" class="headerlink" title="è‡ªåŠ¨è¿æ¥é•¿å¤§æ ¡å›­ç½‘"></a>è‡ªåŠ¨è¿æ¥é•¿å¤§æ ¡å›­ç½‘</h1><h2 id="1-å‰æƒ…æè¦"><a href="#1-å‰æƒ…æè¦" class="headerlink" title="1.å‰æƒ…æè¦"></a>1.å‰æƒ…æè¦</h2><p>æ¯æ¬¡å½“æˆ‘ä»¬æ‰“å¼€ç”µè„‘å‘ç°å‡ºç°<span class="github-emoji"><span>ğŸš«</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f6ab.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span><span class="github-emoji"><span>ğŸ“¶</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4f6.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç½‘ç»œæœªè¿æ¥ï¼Œç„¶åæˆ‘ä»¬ç†Ÿæ‚‰çš„æ‰“å¼€äº†ä¸‹é¢çš„wifiè®¾ç½®ç‚¹å‡»ç½‘ç»œç‚¹å‡»è¿æ¥ï¼Œç„¶åä½ å°±å–œæä¸€ä¸ªéå¸¸niceçš„ç•Œé¢:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071610092.png" alt="image-20230407161015846"></p><p>ç„¶åæˆ‘ä»¬å¾ªè§„è¹ˆçŸ©çš„è¾“å…¥<strong>è´¦å·</strong>è¾“å…¥<strong><span class="github-emoji"><span>ãŠ™</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/3299.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç </strong>ã€‚ã€‚ã€‚ã€‚ã€‚è¿™ä¸ªè¿‡ç¨‹è¯´å®åœ¨ä¸€æ¬¡ä¸¤æ¬¡è¿˜å¯ä»¥ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¿™æ ·è¿‡åˆ†äº†!!</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071613591.png" alt="image-20230407161318469" style="zoom:50%;"></p><p>ç„¶åå°±æƒ³èƒ½ä¸èƒ½å†™ä¸ª<strong>ç¨‹åº</strong>å†™åˆ°å¼€æœºè‡ªå¯åŠ¨çš„æ—¶å€™è®©å®ƒå¸®æˆ‘ä»¬è¿æ¥å‘¢???ä¹Ÿå°±æ˜¯<strong>ä¸ç”¨è¿›è¡Œwebé¡µé¢è·³è½¬è¾“å¯†ç !!</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071616039.png" alt="image-20230407161637916" style="zoom: 50%;"></p><p>è¿™ä¸å°±æ¥äº†å—?å°±æ‹¿æˆ‘ä»¬é•¿å¤§çš„æ ¡å›­ç½‘å¼€åˆ€äº†ï¼Œä¿è¯å¤§å®¶ä¸æ‡‚åŸç†å°±å¯ä»¥å®æ“ï¼Œè·Ÿç€æ•™ç¨‹æ¥ï¼Œå®Œå…¨ä¸ç”¨åŠ¨ğŸ§ ï¼Œé¦–å…ˆå£°æ˜ä¸€ç‚¹è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯å‚è€ƒè¿™ä¸ª<a href="https://blog.csdn.net/m0_62516732/article/details/127615794">æ–‡ç« </a></p><h2 id="2-åŸç†åˆæ¢"><a href="#2-åŸç†åˆæ¢" class="headerlink" title="2.åŸç†åˆæ¢"></a>2.åŸç†åˆæ¢</h2><p>å°±æ˜¯å½“æˆ‘ä»¬è¿æ¥ä¸Šæ ¡å›­ç½‘è·³è½¬åˆ°ç½‘é¡µæ—¶ï¼Œå½“ç‚¹å‡»ç™»å½•çš„æ—¶å€™ä¼šå‘é€ä¸€ä¸ªpostè¯·æ±‚ç»™åå°æ¥è®¤è¯ï¼Œç„¶åå‘é€è¯·æ±‚çš„åè®®ä¹Ÿæ˜¯http1.1,æ‰€ä»¥æˆ‘ä»¬è¦æ¨¡ä»¿çš„å°±æ˜¯å½“è¿ä¸Šç½‘ï¼Œè®©ç¨‹åºå¸®æˆ‘ä»¬å‘é€ä¸€æ®µpostè¯·æ±‚å»æäº¤æˆ‘ä»¬çš„ç”¨æˆ·åå’Œå¯†ç ã€‚å¤§æ¦‚å°±æ˜¯è¿™ä¸ªæ€è·¯ï¼Œå¾ˆå¥½ç†è§£çš„ã€‚åºŸè¯ä¸éƒ½è¯´å¼€å§‹åŠ¨æ‰‹å®è·µã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071633397.png" alt="image-20230407163316352" style="zoom: 80%;"></p><h2 id="3-åŠ¨æ‰‹å®æ“"><a href="#3-åŠ¨æ‰‹å®æ“" class="headerlink" title="3.åŠ¨æ‰‹å®æ“"></a>3.åŠ¨æ‰‹å®æ“</h2><p>é¦–é€‰æˆ‘ä»¬éœ€è¦æ˜ç¡®ä¸‹ç¯å¢ƒå¯¹äºä¸æƒ³é‡è§æ‚ä¸ƒæ‚å…«çš„é—®é¢˜çš„å°ä¼™ä¼´è¯·è·Ÿæˆ‘ç”¨åŒä¸€æ¬¾ç¼–è¯‘å™¨,å› ä¸ºæˆ‘ä¹Ÿé‡è§ä¸€äº›æ‰¯æ·¡çš„é—®é¢˜ã€‚å¯èƒ½æˆ‘ä»¬ç¯å¢ƒä¸åŒï¼Œå»ºè®®å¦‚æœ<strong>é‡è§é—®é¢˜</strong>å°±å»æ‰¾<strong>åº¦å¨˜</strong>ã€‚ä¸è¿‡æ“ä½œä¸‹æ¥åº”è¯¥é—®é¢˜ä¸å¤§ã€‚</p><h3 id="è½¯ä»¶éœ€æ±‚"><a href="#è½¯ä»¶éœ€æ±‚" class="headerlink" title="è½¯ä»¶éœ€æ±‚:"></a><strong>è½¯ä»¶éœ€æ±‚:</strong></h3><p><strong>VS2019ã€Fiddler</strong> ã€<strong>Windows 10 or 11</strong></p><p>é¦–å…ˆå°±æ˜¯å®‰è£…ä¸€ä¸ªæŠ“åŒ…å·¥å…·ï¼Œå¾ˆå°çš„9MBå¤§å°ï¼Œ<strong>ä¸çŸ¥é“æ€ä¹ˆå®‰è£…??</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071644846.png" alt="image-20230407164450790" style="zoom: 33%;"></p><p><strong>æ²¡äº‹ä½ ä¸éœ€è¦çŸ¥é“ä½ åªè¦è·Ÿç€åšå°±è¡Œ!!</strong></p><h4 id="1-Fiddler-å®‰è£…"><a href="#1-Fiddler-å®‰è£…" class="headerlink" title="1.Fiddler å®‰è£…"></a>1.<a href="https://www.telerik.com/fiddler#fiddler-classic">Fiddler å®‰è£…</a></h4><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071155726.png" alt="image-20230407115518536" style="zoom:80%;"></p><p><strong>æ¥ç€å°±ä¼šå‡ºç°è¿™ä¸ªç•Œé¢,ç¬¬ä¸€ä¸ªéšä¾¿é€‰ï¼Œç¬¬äºŒä¸ªéšä¾¿å¡«æ³¨æ„ä¸€ä¸‹æ ¼å¼å°±è¡Œï¼Œç¬¬ä¸‰ä¸ªé€‰China.</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071159199.png" alt="image-20230407115920126" style="zoom:80%;"></p><p><strong>ç„¶åæˆ‘ä»¬é™ç­‰è½¯ä»¶ä¸‹è½½å®Œæˆï¼Œç„¶åæ‰“å¼€è¿›è¡Œå®‰è£…ã€‚</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071201318.png" alt="image-20230407120150277"></p><p><strong>éœ€è¦ä½ è®°ä½å®‰è£…åˆ°é‚£ä¸ªç›®å½•ä¸€ä¼šéœ€è¦æ‰“å¼€ï¼ï¼ï¼å¦‚æœå®‰è£…ç»™ä½ æ¡Œé¢ç”Ÿæˆå¿«æ·æ–¹å¼äº†è¿™å°±ä¸éœ€è¦è®°ä½ä¹Ÿè¡Œ<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071203451.png" alt="image-20230407120323419"></p><p>å¦‚æœç”Ÿæˆå¿«æ·æ–¹å¼ä½ å°±ç‚¹å‡»å¿«æ·æ–¹å¼è¿›è¡Œï¼Œæˆ‘çš„æ²¡æœ‰ç”Ÿæˆï¼Œæˆ‘å°±è¯´ä¸€ä¸‹æˆ‘çš„æ“ä½œï¼Œæ‰“å¼€æ‰€åœ¨è½¯ä»¶ç›®å½•ï¼Œè¿è¡ŒFiddler.exeæ–‡ä»¶</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071651391.png" alt="image-20230407165116309" style="zoom: 50%;"></p><p><strong>ç„¶åå°±â€¦..</strong>å¤§åŠŸå‘Šæˆ</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071206171.png" alt="image-20230407120626043"></p><h4 id="2-å¼€å§‹æŠ“åŒ…"><a href="#2-å¼€å§‹æŠ“åŒ…" class="headerlink" title="2.å¼€å§‹æŠ“åŒ…"></a>2.å¼€å§‹æŠ“åŒ…</h4><p><strong>ä¸Šé¢çš„ç¨‹åºä¸è¦å…³ï¼ï¼</strong>é¦–å…ˆæˆ‘ä»¬è¿›å…¥è¿™ä¸ªç†Ÿæ‚‰çš„ç•Œé¢</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071700491.png" alt="image-20230407161015846"></p><p>è¾“å…¥æˆ‘ä»¬å¯çˆ±çš„è´¦æˆ·å¯†ç è¿›è¡Œç™»å½•å®Œæˆåæ‰“å¼€<strong>æŠ“åŒ…è½¯ä»¶</strong>ï¼Œä»¥åå°±è¦å’Œä»–sayGoodByeäº†ï¼Œä½ ä¼šçœ‹åˆ°ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071703873.png" alt="image-20230407170357748"></p><p>æ¥ç€è·Ÿæˆ‘è¿›è¡Œå¦‚ä¸‹æ“ä½œ:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071709439.png" alt="image-20230407170940280"></p><p><strong>æˆ‘ä¹ˆéœ€è¦çš„æ˜¯è¿™ä¸ª</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071711719.png" alt="image-20230407171155675"></p><h4 id="3-é¡¹ç›®çš„å»ºç«‹"><a href="#3-é¡¹ç›®çš„å»ºç«‹" class="headerlink" title="3.é¡¹ç›®çš„å»ºç«‹"></a>3.é¡¹ç›®çš„å»ºç«‹</h4><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071716181.png" alt="image-20230407171600099"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071716900.png" alt="image-20230407171626824"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071718521.png" alt="image-20230407171807450"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071718456.png" alt="image-20230407171846153"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071720995.png" alt="image-20230407172004929"></p><p>æ‹·è´ä¸‹é¢çš„ä»£ç :</p><figure class="highlight c"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> comment (lib,<span class="hljs-string">"ws2_32.lib"</span>)  <span class="hljs-comment">// è¿æ¥åŠ¨æ€åº“ã€‚</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {<br><span class="hljs-comment">// 1 è¯·æ±‚åè®®ç‰ˆæœ¬ã€‚</span><br>WSADATA wsaData;<br>WSAStartup(MAKEWORD(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>), &amp;wsaData);<br><span class="hljs-keyword">if</span> (LOBYTE(wsaData.wVersion) != <span class="hljs-number">2</span> || HIBYTE(wsaData.wVersion) != <span class="hljs-number">2</span>) {<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">"è¯·æ±‚åè®®ç‰ˆæœ¬å¤±è´¥ã€‚\n"</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>}<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">"è¯·æ±‚åè®®æˆåŠŸã€‚\n"</span>);<br><br><span class="hljs-comment">// 2 åˆ›å»ºsocketå‡½æ•°ã€‚</span><br>SOCKET clientSocket;<br>clientSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);<br><span class="hljs-keyword">if</span> (SOCKET_ERROR == clientSocket) {<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">"åˆ›å»ºsocketå¤±è´¥ã€‚\n"</span>);<br>WSACleanup();<br><span class="hljs-keyword">return</span> <span class="hljs-number">-2</span>;<br>}<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">"åˆ›å»ºsocketæˆåŠŸã€‚\n"</span>);<br><br><span class="hljs-comment">// 3 è·å–æœåŠ¡å™¨åœ°å€æ—ã€‚</span><br>SOCKADDR_IN addr = { <span class="hljs-number">0</span> };<br>addr.sin_family = AF_INET; <span class="hljs-comment">// åè®®ç‰ˆæœ¬</span><br>addr.sin_addr.S_un.S_addr = inet_addr(<span class="hljs-string">"172.18.8.37"</span>); <span class="hljs-comment">// è¿™é‡Œåº”è¯¥å†™æ ¡å›­ç½‘æœåŠ¡å™¨åœ°å€ã€‚</span><br>addr.sin_port = htons(<span class="hljs-number">80</span>); <span class="hljs-comment">// è¿æ¥åˆ°httpåè®®é»˜è®¤çš„80å·ç«¯å£</span><br><br><span class="hljs-comment">// 4 è¿æ¥åˆ°æœåŠ¡å™¨ã€‚</span><br><span class="hljs-type">int</span> r = connect(clientSocket, (<span class="hljs-keyword">struct</span>  sockaddr*)&amp;addr, <span class="hljs-keyword">sizeof</span>(addr));<br><span class="hljs-keyword">if</span> (r == <span class="hljs-number">-1</span>) {<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">"è¿æ¥æœåŠ¡å™¨å¤±è´¥ã€‚\n"</span>);<br>closesocket(clientSocket);<br>WSACleanup();<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>}<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">"æœåŠ¡å™¨è¿æ¥æˆåŠŸã€‚\n"</span>);<br><br><span class="hljs-comment">// 5 å‘æœåŠ¡å™¨å‘é€ä¸€æ¬¡æ•°æ®ã€‚</span><br><span class="hljs-type">static</span> <span class="hljs-type">char</span> send_buff[<span class="hljs-number">1024</span>];<br>    <span class="hljs-comment">//éœ€è¦æ›¿æ¢çš„ä¸œè¥¿</span><br><span class="hljs-built_in">strcpy</span>(send_buff, <span class="hljs-string">"POST http://172.18.8.37/0.htm HTTP/1.1\r\n"</span>\<br><span class="hljs-string">"Host: 172.18.8.37\r\n"</span>\<br><span class="hljs-string">"Connection: keep-alive\r\n"</span>\<br><span class="hljs-string">"Content-Length: 62\r\n"</span>\<br><span class="hljs-string">"Cache-Control: max-age=0\r\n"</span>\<br><span class="hljs-string">"Upgrade-Insecure-Requests: 1\r\n"</span>\<br><span class="hljs-string">"Origin: http://172.18.8.37\r\n"</span>\<br><span class="hljs-string">"Content-Type: application/x-www-form-urlencoded\r\n"</span>\<br><span class="hljs-string">"User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36 Edg/111.0.1661.62\r\n"</span>\<br><span class="hljs-string">"Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\r\n"</span>\<br><span class="hljs-string">"Referer: http://172.18.8.37/0.htm\r\n"</span>\<br><span class="hljs-string">"Accept-Encoding: gzip, deflate\r\n"</span>\<br><span class="hljs-string">"Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6\r\n"</span>\<br><span class="hljs-string">"x-forwarded-for: 4.2.2.2\r\n"</span>\<br><span class="hljs-string">"\r\n"</span>\<br><span class="hljs-string">"DDDDD=******%40xyw&amp;upass=*****&amp;0MKKey=%B5%C7+%C2%BC&amp;v6ip="</span>);<br>r = send(clientSocket, send_buff, <span class="hljs-built_in">strlen</span>(send_buff), <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (r &gt; <span class="hljs-number">0</span>) {<br>send_buff[r] = <span class="hljs-string">'\0'</span>;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">"å‘é€æˆåŠŸï¼&gt;&gt; %s\n"</span>, send_buff);<br>}<br><br><span class="hljs-comment">// 6 ä»æœåŠ¡å™¨æ¥æ”¶ä¸€æ¬¡æ•°æ®</span><br><span class="hljs-type">char</span> recv_data[<span class="hljs-number">1024</span>];<br>r = recv(clientSocket, recv_data, <span class="hljs-number">1024</span>, <span class="hljs-number">0</span>);<br><span class="hljs-keyword">if</span> (r &gt; <span class="hljs-number">0</span>) {<br>recv_data[r] = <span class="hljs-string">'\0'</span>;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ¥æ”¶æˆåŠŸï¼&gt;&gt;%s\n"</span>, recv_data);<br>}<br><br><span class="hljs-comment">// 8 å…³é—­socketé€šä¿¡ã€‚</span><br>closesocket(clientSocket);<br><br><span class="hljs-comment">// 9 æ¸…ç†åè®®ä¿¡æ¯ã€‚</span><br>WSACleanup();<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>æˆ‘ä»¬æŠ“å–çš„åŒ…ä¸­å«æœ‰çš„ä¿¡æ¯:</strong>(ä¸‹é¢çš„æˆ‘çš„è´¦å·å’Œå¯†ç æˆ‘å°±å…ˆéšè—äº†ç”¨ *<em>*</em>)ä»£æ›¿</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs tex">POST http://172.18.8.37/0.htm HTTP/1.1<br>Host: 172.18.8.37<br>Connection: keep-alive<br>Content-Length: 62<br>Cache-Control: max-age=0<br>Upgrade-Insecure-Requests: 1<br>Origin: http://172.18.8.37<br>Content-Type: application/x-www-form-urlencoded<br>User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36 Edg/111.0.1661.62<br>Accept:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7<br>Referer: http://172.18.8.37/0.htm<br>Accept-Encoding: gzip, deflate<br>Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6<br>x-forwarded-for: 4.2.2.2<br><br>DDDDD=*******<span class="hljs-comment">%40xyw&amp;upass=*******&amp;0MKKey=%B5%C7+%C2%BC&amp;v6ip=</span><br></code></pre></td></tr></tbody></table></figure><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å°†<strong>ä½ æŠ“çš„åŒ…æ”¹é€ ä¸€ä¸‹å¤åˆ¶è¿›å»</strong>ï¼ï¼æ€ä¹ˆæ”¹é€ å‘¢?</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071728703.png" alt="image-20230407172809495" style="zoom: 33%;"></p><p>å¾ˆç®€å•å°±æ˜¯ä¸ºäº†ç¡®ä¿è¿™ä¸ªåŒ…æ ¼å¼å’Œæˆ‘ä»¬æŠ“å–çš„ä¸€æ ·ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬å†åé¢æ·»åŠ \r\næ”¹é€ ç»“æœå¦‚ä¸‹</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs tex">"POST http://172.18.8.37/0.htm HTTP/1.1<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"Host: 172.18.8.37<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"Connection: keep-alive<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"Content-Length: 62<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"Cache-Control: max-age=0<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"Upgrade-Insecure-Requests: 1<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"Origin: http://172.18.8.37<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"Content-Type: application/x-www-form-urlencoded<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/111.0.0.0 Safari/537.36 Edg/111.0.1661.62<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"Accept:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"Referer: http://172.18.8.37/0.htm<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"Accept-Encoding: gzip, deflate<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"x-forwarded-for: 4.2.2.2<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"<span class="hljs-keyword">\r</span><span class="hljs-keyword">\n</span>"<span class="hljs-keyword">\</span><br><span class="hljs-keyword"></span>"DDDDD=******<span class="hljs-comment">%40xyw&amp;upass=*****&amp;0MKKey=%B5%C7+%C2%BC&amp;v6ip="  //è¿™é‡Œæ˜¯ä½ è‡ªå·±çš„è´¦å·å’Œå¯†ç åƒä¸‡åˆ«æ***</span><br></code></pre></td></tr></tbody></table></figure><p>ç„¶åçœ‹ä¸Šé¢çš„ä»£ç ä¸€å¤§å¨ï¼Œå°±æŠŠé‚£ä¸ªä¿®æ”¹äº†å°±è¡Œ.</p><p>å¿«å¥½äº†ï¼Œç„¶åæˆ‘ä»¬å°±æ¥ç€ä¿®æ”¹é…ç½®ï¼ˆæˆ‘è¿è¡Œé™¤äº†ä¸€ä¸ªé”™åº”è¯¥æ˜¯åŠ¨æ€è¿æ¥åº“çš„é—®é¢˜ï¼‰</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071736350.png" alt="image-20230407173602896"></p><p>_CRT_SECURE_NO_WARNINGS</p><p>æ¥ç€è¿›è¡Œå¦‚ä¸‹æ“ä½œåï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071737176.png" alt="image-20230407173757111"></p><p>å‡ºç°ä¸€ä¸ªç¼–è¾‘æ¡†:ä½ éœ€è¦å°†è¿™ä¸ªä»£ç å¤åˆ¶è¿›å»: <code>_CRT_SECURE_NO_WARNINGS</code></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071739205.png" alt="image-20230407173946165"></p><p>ç„¶åç‚¹å‡»ç¡®è®¤è¿™ä¸ªé¢„å¤„ç†æ¡†ä¼šå…³é—­,æ¥ç€ç‚¹å‡»åº”ç”¨â€”&gt;ç¡®è®¤</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071741723.png" alt="image-20230407174101668"></p><h4 id="4-æµ‹è¯•ä¸€ä¸‹"><a href="#4-æµ‹è¯•ä¸€ä¸‹" class="headerlink" title="4.æµ‹è¯•ä¸€ä¸‹"></a>4.æµ‹è¯•ä¸€ä¸‹</h4><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071741052.png" alt="image-20230407174149963" style="zoom: 33%;"></p><p><strong>è¿è¡Œç¨‹åºï¼Œç‚¹å‡»å¦‚ä¸‹æŒ‰é’®:</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071742560.png" alt="image-20230407174257882"></p><p><strong>çœ‹çœ‹æ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼Œå¤§åŠŸå‘Šæˆäº†!!</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071744407.png" alt="image-20230407174456344"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071745334.png" alt="image-20230407174538287" style="zoom:50%;"></p><p><strong>ç„¶åæœ€æœ€é‡è¦çš„æ¥äº†æŠŠè¿™ä¸ªç¨‹åºç»™é›†ä¸­åˆ°æˆ‘ä»¬çš„å¼€å¯è‡ªå¯é¡¹ï¼Œè¿™ä¸ªçœŸçš„è¶…çº§è¶…çº§ç®€å•!!!</strong></p><h4 id="5-é›†æˆå¼€æœºå¯åŠ¨é¡¹"><a href="#5-é›†æˆå¼€æœºå¯åŠ¨é¡¹" class="headerlink" title="5.é›†æˆå¼€æœºå¯åŠ¨é¡¹"></a>5.é›†æˆå¼€æœºå¯åŠ¨é¡¹</h4><p>é¦–å…ˆæˆ‘ä»¬æ‰“å¼€æ”¹é¡¹ç›®çš„ç›®å½•ï¼Œ<strong>å‰ææ˜¯ä½ è¿è¡ŒæˆåŠŸäº†ï¼ï¼ï¼</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071751984.png" alt="image-20230407175143642"></p><p><strong>æ¥ç€è¿›å…¥Debugç›®å½•</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071752355.png" alt="image-20230407175232305"></p><p><strong>å¤åˆ¶exeæ–‡ä»¶</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071753008.png" alt="image-20230407175319942"></p><p>æ¥ç€æˆ‘ä»¬æŒ‰ä¸‹<code>win+r</code> ,è¾“å…¥<code>shell:common startup</code></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071756508.png" alt="image-20230407175636470"></p><p>å¦‚æœä¸ä¼š<code>win+r</code>ï¼Œå¯ä»¥è¿™æ ·æ“ä½œä¹Ÿè¡Œ<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071758808.png" alt="image-20230407175829499"></p><p><strong>ç„¶åä¼šçœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç„¶åå°†exeæ–‡ä»¶å¤åˆ¶è¿›å»å°±OKäº†</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071759562.png" alt="image-20230407175948463"></p><p>ç„¶åå°±åˆ°äº†æµ‹è¯•ç¯èŠ‚äº†,é¦–å…ˆå°†CHD-WiFiçš„é…ç½®ä¸­åœ¨èŒƒå›´å†…è‡ªåŠ¨è¿æ¥æ‰“å¼€.</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304071801283.png" alt="image-20230407180123220"></p><h1 id="å®Œç»“"><a href="#å®Œç»“" class="headerlink" title="å®Œç»“"></a>å®Œç»“</h1><p>ç»¼ä¸Šï¼Œåˆ°è¾¾è¿™ä¸€æ­¥ ä¸€åˆ‡éƒ½æˆåŠŸäº†ï¼Œä»¥ååªè¦ä½ ä¸ä¸»åŠ¨å–æ¶ˆè¿æ¥ï¼Œä»–éƒ½èƒ½è‡ªåŠ¨çš„è¿ä¸Šæ ¡å›­ç½‘ï¼Œä¸ç”¨è¿›å…¥webé¡µé¢ï¼Œå¦‚æœå®ƒä¸èƒ½è‡ªåŠ¨è¿æ¥é‚£å°±å¯èƒ½å‡ºç°ä¸€ä¸‹é—®é¢˜,</p><p>â€‹    1.ä¸Šé¢çš„ <strong>åœ¨ä¿¡å·èŒƒå›´å†…æ—¶è‡ªåŠ¨è¿æ¥</strong>å±æ€§æ²¡æ‰“å¼€ï¼Œä½†æ˜¯è¿™ä¹Ÿä¸å¦¨ç¢å®ƒçš„æ–¹ä¾¿ï¼Œä½ å¯ä»¥æ‰“å¼€å®ƒï¼Œä¹Ÿå¯ä»¥ä¸æ‰“å¼€ä¸è¿‡ä½ éœ€è¦ç‚¹å‡»WiFiæ‰‹åŠ¨è¿æ¥ï¼Œä½†æ˜¯<strong>ä¸éœ€è·³è½¬è¾“å…¥å¯†ç </strong>ï¼Œç¬‘è¯<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å¦‚æœè¿˜è¾“å…¥å¯†ç ï¼Œè¿™ä¸å°±é…ç½®äº†å¯‚å¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšä¾¿ç© </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå¸¸è§å·¥å…·ç±»</title>
      <link href="/2023/04/05/%E5%B7%A5%E5%85%B7%E7%B1%BB/tools/"/>
      <url>/2023/04/05/%E5%B7%A5%E5%85%B7%E7%B1%BB/tools/</url>
      
        <content type="html"><![CDATA[<h1 id="å·¥å…·ç±»"><a href="#å·¥å…·ç±»" class="headerlink" title="å·¥å…·ç±»"></a>å·¥å…·ç±»</h1><p>å¯¼å…¥çš„åŒ…</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>fastjson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.70<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.9.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.xml.bind<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jaxb-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h2 id="RedisConfigç±»"><a href="#RedisConfigç±»" class="headerlink" title="RedisConfigç±»"></a>RedisConfigç±»</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisConfig</span> {<br>    <span class="hljs-keyword">public</span> RedisTemplate&lt;Object, Object&gt; <span class="hljs-title function_">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory connectionFactory)</span> {<br>        RedisTemplate&lt;Object, Object&gt; template = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>&lt;&gt;();<br>        template.setConnectionFactory(connectionFactory);<br><br>        <span class="hljs-type">FastJsonRedisSerializer</span> <span class="hljs-variable">serializer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FastJsonRedisSerializer</span>(Object.class);<br><br>        <span class="hljs-comment">// ä½¿ç”¨StringRedisSerializeræ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–redisçš„keyå€¼</span><br>        template.setKeySerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());<br>        template.setValueSerializer(serializer);<br><br>        <span class="hljs-comment">// Hashçš„keyä¹Ÿé‡‡ç”¨StringRedisSerializerçš„åºåˆ—åŒ–æ–¹å¼</span><br>        template.setHashKeySerializer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringRedisSerializer</span>());<br>        template.setHashValueSerializer(serializer);<br><br>        template.afterPropertiesSet();<br>        <span class="hljs-keyword">return</span> template;<br>    }<br>}<br><span class="hljs-comment">//éœ€è¦é…åˆä¸‹é¢çš„FastJsonRedisSerializerç±»</span><br></code></pre></td></tr></tbody></table></figure><h2 id="FastJsonRedisSerializerç±»"><a href="#FastJsonRedisSerializerç±»" class="headerlink" title="FastJsonRedisSerializerç±»"></a>FastJsonRedisSerializerç±»</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.alibaba.fastjson.JSON;<br><span class="hljs-keyword">import</span> com.alibaba.fastjson.parser.ParserConfig;<br><span class="hljs-keyword">import</span> com.alibaba.fastjson.serializer.SerializerFeature;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.JavaType;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.type.TypeFactory;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.RedisSerializer;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.SerializationException;<br><br><span class="hljs-keyword">import</span> java.nio.charset.Charset;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Redisä½¿ç”¨FastJsonåºåˆ—åŒ–</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FastJsonRedisSerializer</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RedisSerializer</span>&lt;T&gt; {<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Charset</span> <span class="hljs-variable">DEFAULT_CHARSET</span> <span class="hljs-operator">=</span> Charset.forName(<span class="hljs-string">"UTF-8"</span>);<br><br>    <span class="hljs-keyword">static</span> {<br>        ParserConfig.getGlobalInstance().setAutoTypeSupport(<span class="hljs-literal">true</span>);<br>    }<br><br>    <span class="hljs-keyword">private</span> Class&lt;T&gt; clazz;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">FastJsonRedisSerializer</span><span class="hljs-params">(Class&lt;T&gt; clazz)</span> {<br>        <span class="hljs-built_in">super</span>();<br>        <span class="hljs-built_in">this</span>.clazz = clazz;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">byte</span>[] serialize(T t) <span class="hljs-keyword">throws</span> SerializationException {<br>        <span class="hljs-keyword">if</span> (t == <span class="hljs-literal">null</span>) {<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">0</span>];<br>        }<br>        <span class="hljs-keyword">return</span> JSON.toJSONString(t, SerializerFeature.WriteClassName).getBytes(DEFAULT_CHARSET);<br>    }<br><br><br>    <span class="hljs-keyword">public</span> T <span class="hljs-title function_">deserialize</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] bytes)</span> <span class="hljs-keyword">throws</span> SerializationException {<br>        <span class="hljs-keyword">if</span> (bytes == <span class="hljs-literal">null</span> || bytes.length &lt;= <span class="hljs-number">0</span>) {<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        }<br>        <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(bytes, DEFAULT_CHARSET);<br><br>        <span class="hljs-keyword">return</span> JSON.parseObject(str, clazz);<br>    }<br><br>    <span class="hljs-keyword">protected</span> JavaType <span class="hljs-title function_">getJavaType</span><span class="hljs-params">(Class&lt;?&gt; clazz)</span> {<br>        <span class="hljs-keyword">return</span> TypeFactory.defaultInstance().constructType(clazz);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h2 id="JWTUtilså·¥å…·ç±»"><a href="#JWTUtilså·¥å…·ç±»" class="headerlink" title="JWTUtilså·¥å…·ç±»"></a>JWTUtilså·¥å…·ç±»</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> io.jsonwebtoken.Claims;<br><span class="hljs-keyword">import</span> io.jsonwebtoken.JwtBuilder;<br><span class="hljs-keyword">import</span> io.jsonwebtoken.Jwts;<br><span class="hljs-keyword">import</span> io.jsonwebtoken.SignatureAlgorithm;<br><span class="hljs-keyword">import</span> javax.crypto.SecretKey;<br><span class="hljs-keyword">import</span> javax.crypto.spec.SecretKeySpec;<br><span class="hljs-keyword">import</span> java.util.Base64;<br><span class="hljs-keyword">import</span> java.util.Date;<br><span class="hljs-keyword">import</span> java.util.UUID;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * JWTå·¥å…·ç±»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtUtil</span> {<br><br>    <span class="hljs-comment">//æœ‰æ•ˆæœŸä¸º</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Long</span> <span class="hljs-variable">JWT_TTL</span> <span class="hljs-operator">=</span> <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000L</span>;<span class="hljs-comment">// 60 * 60 *1000  ä¸€ä¸ªå°æ—¶</span><br>    <span class="hljs-comment">//è®¾ç½®ç§˜é’¥æ˜æ–‡</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">JWT_KEY</span> <span class="hljs-operator">=</span> <span class="hljs-string">"nicoles"</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getUUID</span><span class="hljs-params">()</span> {<br>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString().replaceAll(<span class="hljs-string">"-"</span>, <span class="hljs-string">""</span>);<br>        <span class="hljs-keyword">return</span> token;<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”Ÿæˆjtw</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> subject tokenä¸­è¦å­˜æ”¾çš„æ•°æ®ï¼ˆjsonæ ¼å¼ï¼‰</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">createJWT</span><span class="hljs-params">(String subject)</span> {<br>        <span class="hljs-type">JwtBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> getJwtBuilder(subject, <span class="hljs-literal">null</span>, getUUID());<span class="hljs-comment">// è®¾ç½®è¿‡æœŸæ—¶é—´</span><br>        <span class="hljs-keyword">return</span> builder.compact();<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”Ÿæˆjtw</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> subject   tokenä¸­è¦å­˜æ”¾çš„æ•°æ®ï¼ˆjsonæ ¼å¼ï¼‰</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> ttlMillis tokenè¶…æ—¶æ—¶é—´</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">createJWT</span><span class="hljs-params">(String subject, Long ttlMillis)</span> {<br>        <span class="hljs-type">JwtBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> getJwtBuilder(subject, ttlMillis, getUUID());<span class="hljs-comment">// è®¾ç½®è¿‡æœŸæ—¶é—´</span><br>        <span class="hljs-keyword">return</span> builder.compact();<br>    }<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> JwtBuilder <span class="hljs-title function_">getJwtBuilder</span><span class="hljs-params">(String subject, Long ttlMillis, String uuid)</span> {<br>        <span class="hljs-type">SignatureAlgorithm</span> <span class="hljs-variable">signatureAlgorithm</span> <span class="hljs-operator">=</span> SignatureAlgorithm.HS256;<br>        <span class="hljs-type">SecretKey</span> <span class="hljs-variable">secretKey</span> <span class="hljs-operator">=</span> generalKey();<br>        <span class="hljs-type">long</span> <span class="hljs-variable">nowMillis</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(nowMillis);<br>        <span class="hljs-keyword">if</span> (ttlMillis == <span class="hljs-literal">null</span>) {<br>            ttlMillis = JwtUtil.JWT_TTL;<br>        }<br>        <span class="hljs-type">long</span> <span class="hljs-variable">expMillis</span> <span class="hljs-operator">=</span> nowMillis + ttlMillis;<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">expDate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(expMillis);<br>        <span class="hljs-keyword">return</span> Jwts.builder()<br>                .setId(uuid)              <span class="hljs-comment">//å”¯ä¸€çš„ID</span><br>                .setSubject(subject)   <span class="hljs-comment">// ä¸»é¢˜  å¯ä»¥æ˜¯JSONæ•°æ®</span><br>                .setIssuer(<span class="hljs-string">"Boeisolation"</span>)     <span class="hljs-comment">// ç­¾å‘è€…</span><br>                .setIssuedAt(now)      <span class="hljs-comment">// ç­¾å‘æ—¶é—´</span><br>                .signWith(signatureAlgorithm, secretKey) <span class="hljs-comment">//ä½¿ç”¨HS256å¯¹ç§°åŠ å¯†ç®—æ³•ç­¾å, ç¬¬äºŒä¸ªå‚æ•°ä¸ºç§˜é’¥</span><br>                .setExpiration(expDate);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ›å»ºtoken</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> subject</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> ttlMillis</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">createJWT</span><span class="hljs-params">(String id, String subject, Long ttlMillis)</span> {<br>        <span class="hljs-type">JwtBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> getJwtBuilder(subject, ttlMillis, id);<span class="hljs-comment">// è®¾ç½®è¿‡æœŸæ—¶é—´</span><br>        <span class="hljs-keyword">return</span> builder.compact();<br>    }<br><span class="hljs-comment">//æµ‹è¯•æ–¹æ³•</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {<br>        <span class="hljs-comment">//åŠ å¯†</span><br>      <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> createJWT(<span class="hljs-string">"2134"</span>);<br>        System.out.println(token);<br>        <span class="hljs-comment">//è§£å¯†</span><br>        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> parseJWT(token);<br>        System.out.println(claims.getSubject());<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”ŸæˆåŠ å¯†åçš„ç§˜é’¥ secretKey</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SecretKey <span class="hljs-title function_">generalKey</span><span class="hljs-params">()</span> {<br>        <span class="hljs-type">byte</span>[] encodedKey = Base64.getDecoder().decode(JwtUtil.JWT_KEY);<br>        <span class="hljs-type">SecretKey</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecretKeySpec</span>(encodedKey, <span class="hljs-number">0</span>, encodedKey.length, <span class="hljs-string">"AES"</span>);<br>        <span class="hljs-keyword">return</span> key;<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è§£æ</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> jwt</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Claims <span class="hljs-title function_">parseJWT</span><span class="hljs-params">(String jwt)</span> <span class="hljs-keyword">throws</span> Exception {<br>        <span class="hljs-type">SecretKey</span> <span class="hljs-variable">secretKey</span> <span class="hljs-operator">=</span> generalKey();<br>        <span class="hljs-keyword">return</span> Jwts.parser()<br>                .setSigningKey(secretKey)<br>                .parseClaimsJws(jwt)<br>                .getBody();<br>    }<br><br><br>}<br></code></pre></td></tr></tbody></table></figure><h2 id="RedisCache-å·¥å…·ç±»"><a href="#RedisCache-å·¥å…·ç±»" class="headerlink" title="RedisCache å·¥å…·ç±»"></a>RedisCache å·¥å…·ç±»</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.BoundSetOperations;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.HashOperations;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.ValueOperations;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;<br><span class="hljs-meta">@SuppressWarnings(value = {"unchecked", "rawtypes"})</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisCache</span> {<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">public</span> RedisTemplate redisTemplate;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç¼“å­˜åŸºæœ¬çš„å¯¹è±¡ï¼ŒIntegerã€Stringã€å®ä½“ç±»ç­‰</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key   ç¼“å­˜çš„é”®å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> value ç¼“å­˜çš„å€¼</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCacheObject</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key, <span class="hljs-keyword">final</span> T value)</span> {<br>        redisTemplate.opsForValue().set(key, value);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç¼“å­˜åŸºæœ¬çš„å¯¹è±¡ï¼ŒIntegerã€Stringã€å®ä½“ç±»ç­‰</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key      ç¼“å­˜çš„é”®å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> value    ç¼“å­˜çš„å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> timeout  æ—¶é—´</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> timeUnit æ—¶é—´é¢—ç²’åº¦</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCacheObject</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key, <span class="hljs-keyword">final</span> T value, <span class="hljs-keyword">final</span> Integer timeout, <span class="hljs-keyword">final</span> TimeUnit timeUnit)</span> {<br>        redisTemplate.opsForValue().set(key, value, timeout, timeUnit);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è®¾ç½®æœ‰æ•ˆæ—¶é—´</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key     Redisé”®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> timeout è¶…æ—¶æ—¶é—´</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> true=è®¾ç½®æˆåŠŸï¼›false=è®¾ç½®å¤±è´¥</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">expire</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key, <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> timeout)</span> {<br>        <span class="hljs-keyword">return</span> expire(key, timeout, TimeUnit.SECONDS);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è®¾ç½®æœ‰æ•ˆæ—¶é—´</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key     Redisé”®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> timeout è¶…æ—¶æ—¶é—´</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> unit    æ—¶é—´å•ä½</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> true=è®¾ç½®æˆåŠŸï¼›false=è®¾ç½®å¤±è´¥</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">expire</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key, <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> timeout, <span class="hljs-keyword">final</span> TimeUnit unit)</span> {<br>        <span class="hljs-keyword">return</span> redisTemplate.expire(key, timeout, unit);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å¾—ç¼“å­˜çš„åŸºæœ¬å¯¹è±¡ã€‚</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key ç¼“å­˜é”®å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ç¼“å­˜é”®å€¼å¯¹åº”çš„æ•°æ®</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getCacheObject</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key)</span> {<br>        ValueOperations&lt;String, T&gt; operation = redisTemplate.opsForValue();<br>        <span class="hljs-keyword">return</span> operation.get(key);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤å•ä¸ªå¯¹è±¡</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">deleteObject</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key)</span> {<br>        <span class="hljs-keyword">return</span> redisTemplate.delete(key);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤é›†åˆå¯¹è±¡</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> collection å¤šä¸ªå¯¹è±¡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">deleteObject</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Collection collection)</span> {<br>        <span class="hljs-keyword">return</span> redisTemplate.delete(collection);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç¼“å­˜Listæ•°æ®</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key      ç¼“å­˜çš„é”®å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> dataList å¾…ç¼“å­˜çš„Listæ•°æ®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ç¼“å­˜çš„å¯¹è±¡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-type">long</span> <span class="hljs-title function_">setCacheList</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key, <span class="hljs-keyword">final</span> List&lt;T&gt; dataList)</span> {<br>        <span class="hljs-type">Long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> redisTemplate.opsForList().rightPushAll(key, dataList);<br>        <span class="hljs-keyword">return</span> count == <span class="hljs-literal">null</span> ? <span class="hljs-number">0</span> : count;<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å¾—ç¼“å­˜çš„listå¯¹è±¡</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key ç¼“å­˜çš„é”®å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ç¼“å­˜é”®å€¼å¯¹åº”çš„æ•°æ®</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; List&lt;T&gt; <span class="hljs-title function_">getCacheList</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key)</span> {<br>        <span class="hljs-keyword">return</span> redisTemplate.opsForList().range(key, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç¼“å­˜Set</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key     ç¼“å­˜é”®å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> dataSet ç¼“å­˜çš„æ•°æ®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> ç¼“å­˜æ•°æ®çš„å¯¹è±¡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; BoundSetOperations&lt;String, T&gt; <span class="hljs-title function_">setCacheSet</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key, <span class="hljs-keyword">final</span> Set&lt;T&gt; dataSet)</span> {<br>        BoundSetOperations&lt;String, T&gt; setOperation = redisTemplate.boundSetOps(key);<br>        Iterator&lt;T&gt; it = dataSet.iterator();<br>        <span class="hljs-keyword">while</span> (it.hasNext()) {<br>            setOperation.add(it.next());<br>        }<br>        <span class="hljs-keyword">return</span> setOperation;<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å¾—ç¼“å­˜çš„set</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; Set&lt;T&gt; <span class="hljs-title function_">getCacheSet</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key)</span> {<br>        <span class="hljs-keyword">return</span> redisTemplate.opsForSet().members(key);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç¼“å­˜Map</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> dataMap</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCacheMap</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key, <span class="hljs-keyword">final</span> Map&lt;String, T&gt; dataMap)</span> {<br>        <span class="hljs-keyword">if</span> (dataMap != <span class="hljs-literal">null</span>) {<br>            redisTemplate.opsForHash().putAll(key, dataMap);<br>        }<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å¾—ç¼“å­˜çš„Map</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; Map&lt;String, T&gt; <span class="hljs-title function_">getCacheMap</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key)</span> {<br>        <span class="hljs-keyword">return</span> redisTemplate.opsForHash().entries(key);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¾€Hashä¸­å­˜å…¥æ•°æ®</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key   Redisé”®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> hKey  Hashé”®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> value å€¼</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCacheMapValue</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key, <span class="hljs-keyword">final</span> String hKey, <span class="hljs-keyword">final</span> T value)</span> {<br>        redisTemplate.opsForHash().put(key, hKey, value);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–Hashä¸­çš„æ•°æ®</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key  Redisé”®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> hKey Hashé”®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> Hashä¸­çš„å¯¹è±¡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getCacheMapValue</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key, <span class="hljs-keyword">final</span> String hKey)</span> {<br>        HashOperations&lt;String, String, T&gt; opsForHash = redisTemplate.opsForHash();<br>        <span class="hljs-keyword">return</span> opsForHash.get(key, hKey);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤Hashä¸­çš„æ•°æ®</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> hkey</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delCacheMapValue</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key, <span class="hljs-keyword">final</span> String hkey)</span> {<br>        <span class="hljs-type">HashOperations</span> <span class="hljs-variable">hashOperations</span> <span class="hljs-operator">=</span> redisTemplate.opsForHash();<br>        hashOperations.delete(key, hkey);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–å¤šä¸ªHashä¸­çš„æ•°æ®</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> key   Redisé”®</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> hKeys Hashé”®é›†åˆ</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> Hashå¯¹è±¡é›†åˆ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; List&lt;T&gt; <span class="hljs-title function_">getMultiCacheMapValue</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String key, <span class="hljs-keyword">final</span> Collection&lt;Object&gt; hKeys)</span> {<br>        <span class="hljs-keyword">return</span> redisTemplate.opsForHash().multiGet(key, hKeys);<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å¾—ç¼“å­˜çš„åŸºæœ¬å¯¹è±¡åˆ—è¡¨</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> pattern å­—ç¬¦ä¸²å‰ç¼€</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> å¯¹è±¡åˆ—è¡¨</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> Collection&lt;String&gt; <span class="hljs-title function_">keys</span><span class="hljs-params">(<span class="hljs-keyword">final</span> String pattern)</span> {<br>        <span class="hljs-keyword">return</span> redisTemplate.keys(pattern);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h2 id="WebUtils-ç±»"><a href="#WebUtils-ç±»" class="headerlink" title="WebUtils ç±»"></a>WebUtils ç±»</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebUtils</span><br>{<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å°†å­—ç¬¦ä¸²æ¸²æŸ“åˆ°å®¢æˆ·ç«¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> response æ¸²æŸ“å¯¹è±¡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> string å¾…æ¸²æŸ“çš„å­—ç¬¦ä¸²</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> null</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">renderString</span><span class="hljs-params">(HttpServletResponse response, String string)</span> {<br>        <span class="hljs-keyword">try</span><br>        {<br>            response.setStatus(<span class="hljs-number">200</span>);<br>            response.setContentType(<span class="hljs-string">"application/json"</span>);<br>            response.setCharacterEncoding(<span class="hljs-string">"utf-8"</span>);<br>            response.getWriter().print(string);<br>        }<br>        <span class="hljs-keyword">catch</span> (IOException e)<br>        {<br>            e.printStackTrace();<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h2 id="JwtPropeties"><a href="#JwtPropeties" class="headerlink" title="JwtPropeties"></a>JwtPropeties</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = "jwt")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtProperties</span> {<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å¯†åŒ™</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">apiSecretKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"JWT_SECRET_KEY"</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¿‡æœŸæ—¶é—´-é»˜è®¤åŠä¸ªå°æ—¶</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Long</span> <span class="hljs-variable">expirationTime</span> <span class="hljs-operator">=</span> <span class="hljs-number">1800L</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é»˜è®¤å­˜æ”¾tokençš„è¯·æ±‚å¤´</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">requestHeader</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Authorization"</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é»˜è®¤tokenå‰ç¼€</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">tokenPrefix</span> <span class="hljs-operator">=</span> <span class="hljs-string">"LYC "</span>;<br>}<br><br></code></pre></td></tr></tbody></table></figure><h2 id="JwtProvider"><a href="#JwtProvider" class="headerlink" title="JwtProvider"></a>JwtProvider</h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> cn.hutool.core.date.DateUtil;<br><span class="hljs-keyword">import</span> com.lyc.bo.AccessToken;<br><span class="hljs-keyword">import</span> io.jsonwebtoken.Claims;<br><span class="hljs-keyword">import</span> io.jsonwebtoken.Jwts;<br><span class="hljs-keyword">import</span> io.jsonwebtoken.SignatureAlgorithm;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.UserDetails;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> * JWTç»„ä»¶</span><br><span class="hljs-comment"> * &lt;/p&gt;</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> * ä¸€ä¸ªå®Œæ•´çš„JwtTokenç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šå¤´éƒ¨+è´Ÿè½½ä¿¡æ¯+ç­¾å</span><br><span class="hljs-comment"> * header å­˜æ”¾JwtTokenç­¾åçš„ç®—æ³• | tokençš„ç±»å‹ï¼š{"alg": "HS512","typ": "JWT"}</span><br><span class="hljs-comment"> * payload ä¸»è¦å­˜æ”¾ç”¨æˆ·åã€åˆ›å»ºæ—¶é—´ã€ç”Ÿæˆæ—¶é—´ï¼š{"sub":"wang","created":1489079981393,"exp":1489684781}</span><br><span class="hljs-comment"> * signature ç”Ÿæˆç®—æ³•ï¼šHMACSHA512(base64UrlEncode(header) + "." +base64UrlEncode(payload),secret)</span><br><span class="hljs-comment"> * &lt;p&gt;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtProvider</span> {<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> JwtProperties jwtProperties;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»è¯·æ±‚ä¸­æ‹¿åˆ°token</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getToken</span><span class="hljs-params">(HttpServletRequest request)</span> {<br>        <span class="hljs-keyword">return</span> request.getHeader(jwtProperties.getRequestHeader());<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®ç”¨æˆ·ä¿¡æ¯ç”Ÿæˆtoken</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> AccessToken <span class="hljs-title function_">createToken</span><span class="hljs-params">(UserDetails userDetails)</span> {<br>        <span class="hljs-keyword">return</span> createToken(userDetails.getUsername());<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”Ÿæˆtoken</span><br><span class="hljs-comment">     * å‚æ•°æ˜¯æˆ‘ä»¬æƒ³æ”¾å…¥tokenä¸­çš„å­—ç¬¦ä¸²</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> AccessToken <span class="hljs-title function_">createToken</span><span class="hljs-params">(String subject)</span> {<br>        <span class="hljs-comment">// å½“å‰æ—¶é—´</span><br>        <span class="hljs-keyword">final</span> <span class="hljs-type">Date</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br>        <span class="hljs-comment">// è¿‡æœŸæ—¶é—´</span><br>        <span class="hljs-keyword">final</span> <span class="hljs-type">Date</span> <span class="hljs-variable">expirationDate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(now.getTime() + jwtProperties.getExpirationTime() * <span class="hljs-number">1000</span>);<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> jwtProperties.getTokenPrefix() + Jwts.builder()<br>                .setSubject(subject)<br>                .setIssuedAt(now)<br>                .setExpiration(expirationDate)<br>                .signWith(SignatureAlgorithm.HS512, jwtProperties.getApiSecretKey())<br>                .compact();<br>        <span class="hljs-keyword">return</span> AccessToken.builder().loginAccount(subject).token(token).expirationTime(expirationDate).build();<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * éªŒè¯tokenæ˜¯å¦è¿˜æœ‰æ•ˆ</span><br><span class="hljs-comment">     * &lt;p&gt;</span><br><span class="hljs-comment">     * åè§£æå‡ºtokenä¸­ä¿¡æ¯ï¼Œç„¶åä¸å‚æ•°ä¸­çš„ä¿¡æ¯æ¯”è¾ƒï¼Œå†æ ¡éªŒè¿‡æœŸæ—¶é—´</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> token       å®¢æˆ·ç«¯ä¼ å…¥çš„token</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> userDetails ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæ¥çš„ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">validateToken</span><span class="hljs-params">(String token, UserDetails userDetails)</span> {<br>       <span class="hljs-keyword">if</span> (token==<span class="hljs-literal">null</span>||userDetails==<span class="hljs-literal">null</span>){<br>           <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>       }<br>        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> getClaimsFromToken(token);<br>        <span class="hljs-keyword">return</span> claims.getSubject().equals(userDetails.getUsername()) &amp;&amp; !isTokenExpired(claims);<br>    }<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ·æ–°token</span><br><span class="hljs-comment">     * è¿‡æ»¤å™¨ä¼šå¯¹è¯·æ±‚è¿›è¡ŒéªŒè¯ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥ä¸å¿…éªŒè¯</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> oldToken å¸¦tokenHeadçš„token</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> AccessToken <span class="hljs-title function_">refreshToken</span><span class="hljs-params">(String oldToken)</span> {<br>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> oldToken.substring(jwtProperties.getTokenPrefix().length());<br><br>        <span class="hljs-comment">// tokenåè§£æ</span><br>        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> getClaimsFromToken(token);<br><br>        <span class="hljs-comment">//å¦‚æœtokenåœ¨30åˆ†é’Ÿä¹‹å†…åˆšåˆ·æ–°è¿‡ï¼Œè¿”å›åŸtoken</span><br>        <span class="hljs-keyword">if</span> (tokenRefreshJustBefore(claims)) {<br>            <span class="hljs-keyword">return</span> AccessToken.builder().loginAccount(claims.getSubject()).token(oldToken).expirationTime(claims.getExpiration()).build();<br>        } <span class="hljs-keyword">else</span> {<br>            <span class="hljs-keyword">return</span> createToken(claims.getSubject());<br>        }<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ¤æ–­tokenåœ¨æŒ‡å®šæ—¶é—´å†…æ˜¯å¦åˆšåˆšåˆ·æ–°è¿‡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tokenRefreshJustBefore</span><span class="hljs-params">(Claims claims)</span> {<br>        <span class="hljs-type">Date</span> <span class="hljs-variable">refreshDate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br>        <span class="hljs-comment">//åˆ·æ–°æ—¶é—´åœ¨åˆ›å»ºæ—¶é—´çš„æŒ‡å®šæ—¶é—´å†…</span><br><br>        <span class="hljs-keyword">if</span> (refreshDate.after(claims.getExpiration()) &amp;&amp; refreshDate.before(DateUtil.offsetSecond(claims.getExpiration(), <span class="hljs-number">1800</span>))) {<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»tokenä¸­æ‹¿åˆ°è´Ÿè½½ä¿¡æ¯</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> Claims <span class="hljs-title function_">getClaimsFromToken</span><span class="hljs-params">(String token)</span> {<br>        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> {<br>            claims = Jwts.parser()<br>                    .setSigningKey(jwtProperties.getApiSecretKey())<br>                    .parseClaimsJws(token)<br>                    .getBody();<br>        } <span class="hljs-keyword">catch</span> (Exception e) {<br>            log.error(<span class="hljs-string">"JWTåè§£æå¤±è´¥, tokenå·²è¿‡æœŸæˆ–ä¸æ­£ç¡®, token : {}"</span>, token);<br>        }<br>        <span class="hljs-keyword">return</span> claims;<br>    }<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»tokenä¸­è·å–ä¸»é¢˜</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getSubjectFromToken</span><span class="hljs-params">(String token)</span> {<br>        <span class="hljs-type">Claims</span> <span class="hljs-variable">claims</span> <span class="hljs-operator">=</span> getClaimsFromToken(token);<br>        <span class="hljs-keyword">if</span> (claims != <span class="hljs-literal">null</span>) {<br>            <span class="hljs-keyword">return</span> claims.getSubject();<br>        } <span class="hljs-keyword">else</span> {<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        }<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ¤æ–­tokenæ˜¯å¦å·²ç»è¿‡æœŸ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isTokenExpired</span><span class="hljs-params">(Claims claims)</span> {<br>        <span class="hljs-keyword">return</span> claims.getExpiration().before(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());<br>    }<br><br>}<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaåç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringSecurityå­¦ä¹ </title>
      <link href="/2023/04/03/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SpringSecurity/"/>
      <url>/2023/04/03/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SpringSecurity/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringSecurity"><a href="#SpringSecurity" class="headerlink" title="SpringSecurity"></a>SpringSecurity</h1><h2 id="1-æ¦‚è¦"><a href="#1-æ¦‚è¦" class="headerlink" title="1.æ¦‚è¦"></a>1.æ¦‚è¦</h2><p>Spring æ˜¯éå¸¸æµè¡Œå’ŒæˆåŠŸçš„ Java åº”ç”¨å¼€å‘æ¡†æ¶ï¼ŒSpring Security æ­£æ˜¯ Spring å®¶æ—ä¸­çš„æˆå‘˜ã€‚Spring Security åŸºäº Spring æ¡†æ¶ï¼Œæä¾›äº†ä¸€å¥— Web åº”ç”¨å®‰å…¨æ€§çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚</p><p>æ­£å¦‚ä½ å¯èƒ½çŸ¥é“çš„å…³äºå®‰å…¨æ–¹é¢çš„ä¸¤ä¸ªä¸»è¦åŒºåŸŸæ˜¯â€œ<strong>è®¤è¯</strong>â€å’Œâ€œ<strong>æˆæƒ</strong>â€ï¼ˆæˆ–è€…è®¿é—®æ§åˆ¶ï¼‰ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒWeb åº”ç”¨çš„å®‰å…¨æ€§åŒ…æ‹¬<strong>ç”¨æˆ·è®¤è¯ï¼ˆAuthenticationï¼‰å’Œç”¨æˆ·æˆæƒ(Authorizationï¼‰</strong>ä¸¤ä¸ªéƒ¨åˆ†ï¼Œè¿™ä¸¤ç‚¹ä¹Ÿæ˜¯ Spring Security é‡è¦æ ¸å¿ƒåŠŸ</p><p><strong>ï¼ˆ1ï¼‰</strong> ç”¨æˆ·è®¤è¯æŒ‡çš„æ˜¯ï¼šéªŒè¯æŸä¸ªç”¨æˆ·æ˜¯å¦ä¸ºç³»ç»Ÿä¸­çš„åˆæ³•ä¸»ä½“ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·èƒ½å¦è®¿é—®è¯¥ç³»ç»Ÿã€‚ç”¨æˆ·è®¤è¯ä¸€èˆ¬è¦æ±‚ç”¨æˆ·æä¾›ç”¨æˆ·åå’Œå¯†ç ã€‚ç³»ç»Ÿé€šè¿‡æ ¡éªŒç”¨æˆ·åå’Œå¯†ç æ¥å®Œæˆè®¤è¯è¿‡ç¨‹ã€‚<strong>é€šä¿—ç‚¹è¯´å°±æ˜¯ç³»ç»Ÿè®¤ä¸ºç”¨æˆ·æ˜¯å¦èƒ½ç™»å½•</strong></p><p><strong>ï¼ˆ2ï¼‰</strong> ç”¨æˆ·æˆæƒæŒ‡çš„æ˜¯éªŒè¯æŸä¸ªç”¨æˆ·æ˜¯å¦æœ‰æƒé™æ‰§è¡ŒæŸä¸ªæ“ä½œã€‚åœ¨ä¸€ä¸ªç³»ç»Ÿä¸­ï¼Œä¸åŒç”¨æˆ·æ‰€å…·æœ‰çš„æƒé™æ˜¯ä¸åŒçš„ã€‚æ¯”å¦‚å¯¹ä¸€ä¸ªæ–‡ä»¶æ¥è¯´ï¼Œæœ‰çš„ç”¨æˆ·åªèƒ½è¿›è¡Œè¯»å–ï¼Œè€Œæœ‰çš„ç”¨æˆ·å¯ä»¥è¿›è¡Œä¿®æ”¹ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç³»ç»Ÿä¼šä¸ºä¸åŒçš„ç”¨æˆ·åˆ†é…ä¸åŒçš„è§’è‰²ï¼Œè€Œæ¯ä¸ªè§’è‰²åˆ™å¯¹åº”ä¸€ç³»åˆ—çš„æƒé™ã€‚<strong>é€šä¿—ç‚¹è®²å°±æ˜¯ç³»ç»Ÿåˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒé™å»åšæŸäº›äº‹æƒ…ã€‚</strong></p><p><strong>ç‰¹ç‚¹:</strong></p><ul><li>å’Œ Spring æ— ç¼æ•´åˆã€‚</li><li>å…¨é¢çš„æƒé™æ§åˆ¶ã€‚</li><li>ä¸“é—¨ä¸ºWeb å¼€å‘è€Œè®¾è®¡ã€‚<ul><li>æ—§ç‰ˆæœ¬ä¸èƒ½è„±ç¦»Web ç¯å¢ƒä½¿ç”¨ã€‚</li></ul></li><li>æ–°ç‰ˆæœ¬å¯¹æ•´ä¸ªæ¡†æ¶è¿›è¡Œäº†åˆ†å±‚æŠ½å–ï¼Œåˆ†æˆäº†æ ¸å¿ƒæ¨¡å—å’ŒWeb æ¨¡å—ã€‚å•ç‹¬å¼•å…¥æ ¸å¿ƒæ¨¡å—å°±å¯ä»¥è„±ç¦»Web ç¯å¢ƒã€‚</li><li>é‡é‡çº§ã€‚</li></ul><h2 id="2-æ–°å»ºé¡¹ç›®"><a href="#2-æ–°å»ºé¡¹ç›®" class="headerlink" title="2.æ–°å»ºé¡¹ç›®"></a>2.æ–°å»ºé¡¹ç›®</h2><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282021097.png" alt="image-20230328202136028"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282035009.png" alt="image-20230328203541974"></p><p>ç¼–å†™æµ‹è¯•ç±»:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping("/test")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestController</span> {<br>    <span class="hljs-meta">@GetMapping("hello")</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">add</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"hello Security"</span>;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>ä¿®æ”¹ç«¯å£å·:é¿å…å†²çª</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282038731.png" alt="image-20230328203850705"></p><p>è®¿é—®åœ°å€ä¿¡æ¯å‡ºç°ç™»å½•è¯´æ˜èµ·ä½œç”¨äº†:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282041730.png" alt="image-20230328204109673"></p><p>è´¦æˆ·ä¸º:user  <span class="github-emoji"><span>ğŸ”‘</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f511.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¸º</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282043567.png" alt="image-20230328204304514"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282053815.png" alt="image-20230328205351783"></p><p>è¡¨ç¤ºè¯·æ±‚æˆåŠŸä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰è¿™ä¸ªæ§åˆ¶å™¨ï¼Œä½†æ˜¯å¯ä»¥è®¿é—®äº†</p><h2 id="3-åŸºæœ¬åŸç†"><a href="#3-åŸºæœ¬åŸç†" class="headerlink" title="3.åŸºæœ¬åŸç†"></a>3.åŸºæœ¬åŸç†</h2><p>SpringSecurityæœ¬è´¨æ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ï¼šä¹Ÿå°±æ˜¯æœ‰å¾ˆå¤šçš„è¿‡æ»¤å™¨</p><h3 id="3-1-FilterSecurityInterceptor"><a href="#3-1-FilterSecurityInterceptor" class="headerlink" title="3.1 FilterSecurityInterceptor"></a>3.1 FilterSecurityInterceptor</h3><p>æ˜¯ä¸€ä¸ªæ–¹æ³•çº§çš„æƒé™è¿‡æ»¤å™¨, åŸºæœ¬ä½äºè¿‡æ»¤é“¾çš„æœ€åº•éƒ¨ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282101181.png" alt="image-20230328210110108"></p><p><code>super.beforeInvocation(filterInvocation)</code>è¡¨ç¤ºæŸ¥çœ‹ä¹‹å‰çš„<code>filter</code>æ˜¯å¦é€šè¿‡ã€‚</p><p><code>filterInvocation.getChain().doFilter(filterInvocation.getRequest(), filterInvocation.getResponse());</code>è¡¨ç¤ºçœŸæ­£çš„è°ƒç”¨åå°çš„æœåŠ¡ã€‚</p><ul><li><code>ExceptionTranslationFilter</code>ï¼šæ˜¯ä¸ªå¼‚å¸¸è¿‡æ»¤å™¨ï¼Œç”¨æ¥å¤„ç†åœ¨è®¤è¯æˆæƒè¿‡ç¨‹ä¸­æŠ›å‡ºçš„å¼‚å¸¸</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//åˆ¤æ–­å¼‚å¸¸ç±»å‹å¹¶æŠ›å‡ºå¼‚å¸¸åšå¤„ç†  </span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, FilterChain chain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException {<br>        <span class="hljs-keyword">try</span> {<br>            chain.doFilter(request, response);<br>        } <span class="hljs-keyword">catch</span> (IOException var7) {<br>            <span class="hljs-keyword">throw</span> var7;<br>        } <span class="hljs-keyword">catch</span> (Exception var8) {<br>            Throwable[] causeChain = <span class="hljs-built_in">this</span>.throwableAnalyzer.determineCauseChain(var8);<br>            <span class="hljs-type">RuntimeException</span> <span class="hljs-variable">securityException</span> <span class="hljs-operator">=</span> (AuthenticationException)<span class="hljs-built_in">this</span>.throwableAnalyzer.getFirstThrowableOfType(AuthenticationException.class, causeChain);<br>            <span class="hljs-keyword">if</span> (securityException == <span class="hljs-literal">null</span>) {<br>                securityException = (AccessDeniedException)<span class="hljs-built_in">this</span>.throwableAnalyzer.getFirstThrowableOfType(AccessDeniedException.class, causeChain);<br>            }<br><br>            <span class="hljs-keyword">if</span> (securityException == <span class="hljs-literal">null</span>) {<br>                <span class="hljs-built_in">this</span>.rethrow(var8);<br>            }<br><br>            <span class="hljs-keyword">if</span> (response.isCommitted()) {<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletException</span>(<span class="hljs-string">"Unable to handle the Spring Security Exception because the response is already committed."</span>, var8);<br>            }<br><br>            <span class="hljs-built_in">this</span>.handleSpringSecurityException(request, response, chain, (RuntimeException)securityException);<br>        }<br><br>    }<br></code></pre></td></tr></tbody></table></figure><ul><li><code>UsernamePasswordAuthenticationFilter</code>ï¼šå¯¹/login çš„ POST è¯·æ±‚åšæ‹¦æˆªï¼Œæ ¡éªŒè¡¨å•ä¸­ç”¨æˆ·åï¼Œå¯†ç ã€‚</li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282111861.png" alt="image-20230328211124782"></p><h3 id="3-2-è¿‡æ»¤å™¨æ˜¯å¦‚ä½•è¿›è¡ŒåŠ è½½çš„ï¼Ÿ"><a href="#3-2-è¿‡æ»¤å™¨æ˜¯å¦‚ä½•è¿›è¡ŒåŠ è½½çš„ï¼Ÿ" class="headerlink" title="3.2 è¿‡æ»¤å™¨æ˜¯å¦‚ä½•è¿›è¡ŒåŠ è½½çš„ï¼Ÿ"></a>3.2 è¿‡æ»¤å™¨æ˜¯å¦‚ä½•è¿›è¡ŒåŠ è½½çš„ï¼Ÿ</h3><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282122630.png" alt=""></p><p>é¦–å…ˆé…ç½®è¿‡æ»¤å™¨ï¼Œæ¥ç€æ‰§è¡ŒdoFilteræ–¹æ³•åˆå§‹åŒ–<strong>Delegate</strong>ï¼Œè¿™ä¸ªæ˜¯WebApplicationContext ä¸­æ ¹æ®Beançš„åå­—è¿›è¡ŒåŒ¹é…å¾—åˆ°çš„è¿‡æ»¤å™¨ï¼Œç„¶åæ‰§è¡Œå°†ç›¸å…³çš„è¿‡æ»¤æ“ä½œé€å…¥è¿‡æ»¤é“¾ä¸­è¿›è¡Œæ‰§è¡Œ.</p><p><strong>æˆ‘ä»¬æ¥è¯¦ç»†çš„çœ‹çœ‹è¿‡æ»¤å™¨çš„ä¿¡æ¯:</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303291255985.png" alt="image-20230329125524836"></p><p>ä¸»è¦çš„è¿‡æ»¤å™¨æœ‰ä¸‰ä¸ªä¹Ÿå°±æ˜¯ä¸Šé¢è®²è§£çš„ä¸‰ä¸ªï¼Œå…¶ä½™çš„å¯ä»¥çœ‹ç€ç»§æ‰¿æ¥å£è¿›è¡Œä¿®æ”¹ã€‚</p><h3 id="3-3-UserDetailsServiceæ¥å£è®²è§£"><a href="#3-3-UserDetailsServiceæ¥å£è®²è§£" class="headerlink" title="3.3 UserDetailsServiceæ¥å£è®²è§£"></a>3.3 UserDetailsServiceæ¥å£è®²è§£</h3><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282125517.png" alt="img"></p><p>å½“ä»€ä¹ˆä¹Ÿæ²¡æœ‰é…ç½®çš„æ—¶å€™ï¼Œè´¦å·å’Œå¯†ç æ˜¯ç”±<code>Spring Security</code>å®šä¹‰ç”Ÿæˆçš„ã€‚è€Œåœ¨å®é™…é¡¹ç›®ä¸­è´¦å·å’Œå¯†ç éƒ½æ˜¯ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæ¥çš„ã€‚ æ‰€ä»¥æˆ‘ä»¬è¦é€šè¿‡è‡ªå®šä¹‰é€»è¾‘æ§åˆ¶è®¤è¯é€»è¾‘ã€‚</p><p>å¦‚æœéœ€è¦è‡ªå®šä¹‰é€»è¾‘æ—¶ï¼Œåªéœ€è¦å®ç° UserDetailsService æ¥å£å³å¯.</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282126710.png" alt="img"></p><p><strong>è¿”å›å€¼ UserDetails</strong> è¿™ä¸ªç±»æ˜¯ç³»ç»Ÿé»˜è®¤çš„ç”¨æˆ·â€œ<strong>ä¸»ä½“</strong>â€</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è¡¨ç¤ºè·å–ç™»å½•ç”¨æˆ·æ‰€æœ‰æƒé™</span><br>Collection&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GrantedAuthority</span>&gt; getAuthorities();<br><br><span class="hljs-comment">// è¡¨ç¤ºè·å–å¯†ç </span><br>String <span class="hljs-title function_">getPassword</span><span class="hljs-params">()</span>;<br><br><span class="hljs-comment">// è¡¨ç¤ºè·å–ç”¨æˆ·å</span><br>String <span class="hljs-title function_">getUsername</span><span class="hljs-params">()</span>;<br><br><span class="hljs-comment">// è¡¨ç¤ºåˆ¤æ–­è´¦æˆ·æ˜¯å¦è¿‡æœŸ</span><br><span class="hljs-type">boolean</span> <span class="hljs-title function_">isAccountNonExpired</span><span class="hljs-params">()</span>;<br><br><span class="hljs-comment">// è¡¨ç¤ºåˆ¤æ–­è´¦æˆ·æ˜¯å¦è¢«é”å®š</span><br><span class="hljs-type">boolean</span> <span class="hljs-title function_">isAccountNonLocked</span><span class="hljs-params">()</span>;<br><br><span class="hljs-comment">// è¡¨ç¤ºå‡­è¯{å¯†ç }æ˜¯å¦è¿‡æœŸ</span><br><span class="hljs-type">boolean</span> <span class="hljs-title function_">isCredentialsNonExpired</span><span class="hljs-params">()</span>;<br><br><span class="hljs-comment">// è¡¨ç¤ºå½“å‰ç”¨æˆ·æ˜¯å¦å¯ç”¨</span><br><span class="hljs-type">boolean</span> <span class="hljs-title function_">isEnabled</span><span class="hljs-params">()</span>;<br></code></pre></td></tr></tbody></table></figure><p>ä»¥ä¸‹æ˜¯ <code>UserDetails</code>å®ç°ç±»:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282130881.png" alt="image-20230328213011831"></p><ul><li>æ–¹æ³•å‚æ•°<code>username</code></li></ul><p>è¡¨ç¤ºç”¨æˆ·åã€‚æ­¤å€¼æ˜¯å®¢æˆ·ç«¯è¡¨å•ä¼ é€’è¿‡æ¥çš„æ•°æ®ã€‚é»˜è®¤æƒ…å†µä¸‹å¿…é¡»å« usernameï¼Œå¦åˆ™æ— æ³•æ¥æ”¶ã€‚</p><h3 id="3-4-PasswordEncode-æ¥å£è¯¦è§£"><a href="#3-4-PasswordEncode-æ¥å£è¯¦è§£" class="headerlink" title="3.4 PasswordEncode æ¥å£è¯¦è§£"></a>3.4 PasswordEncode æ¥å£è¯¦è§£</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// è¡¨ç¤ºæŠŠå‚æ•°æŒ‰ç…§ç‰¹å®šçš„è§£æè§„åˆ™è¿›è¡Œè§£æ</span><br>String <span class="hljs-title function_">encode</span><span class="hljs-params">(CharSequence rawPassword)</span>;<br><br><span class="hljs-comment">// è¡¨ç¤ºéªŒè¯ä»å­˜å‚¨ä¸­è·å–çš„ç¼–ç å¯†ç ä¸ç¼–ç åæäº¤çš„åŸå§‹å¯†ç æ˜¯å¦åŒ¹é…ã€‚å¦‚æœå¯†ç åŒ¹é…ï¼Œåˆ™è¿”å› trueï¼›å¦‚æœä¸åŒ¹é…ï¼Œåˆ™è¿”å› falseã€‚ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºéœ€è¦è¢«è§£æçš„å¯†ç ã€‚ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå­˜å‚¨çš„å¯†ç ã€‚</span><br><span class="hljs-type">boolean</span> <span class="hljs-title function_">matches</span><span class="hljs-params">(CharSequence rawPassword, String encodedPassword)</span>;<br><br><span class="hljs-comment">// è¡¨ç¤ºå¦‚æœè§£æçš„å¯†ç èƒ½å¤Ÿå†æ¬¡è¿›è¡Œè§£æä¸”è¾¾åˆ°æ›´å®‰å…¨çš„ç»“æœåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å›falseã€‚é»˜è®¤è¿”å› falseã€‚</span><br><span class="hljs-keyword">default</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">upgradeEncoding</span><span class="hljs-params">(String encodedPassword)</span> {<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><p>æ¥å£å®ç°ç±»</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282131951.png" alt="img"></p><p><code>BCryptPasswordEncoder</code> æ˜¯ <code>Spring Security</code> å®˜æ–¹æ¨èçš„å¯†ç è§£æå™¨ï¼Œå¹³æ—¶å¤šä½¿ç”¨è¿™ä¸ªè§£æå™¨ã€‚</p><p><code>BCryptPasswordEncoder</code> æ˜¯å¯¹bcrypt å¼ºæ•£åˆ—æ–¹æ³•çš„å…·ä½“å®ç°ã€‚æ˜¯åŸºäº Hash ç®—æ³•å®ç°çš„å•å‘åŠ å¯†ã€‚å¯ä»¥é€šè¿‡ strength æ§åˆ¶åŠ å¯†å¼ºåº¦ï¼Œé»˜è®¤ 10.</p><p><strong>æŸ¥ç”¨æ–¹æ³•æ¼”ç¤º</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test01</span><span class="hljs-params">()</span>{<br>  <span class="hljs-comment">// åˆ›å»ºå¯†ç è§£æå™¨ </span><br>  <span class="hljs-type">BCryptPasswordEncoder</span>  <span class="hljs-variable">bCryptPasswordEncoder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BCryptPasswordEncoder</span>();<br>  <span class="hljs-comment">// å¯¹å¯†ç è¿›è¡ŒåŠ å¯†</span><br>  <span class="hljs-type">String</span> <span class="hljs-variable">atguigu</span> <span class="hljs-operator">=</span> bCryptPasswordEncoder.encode(<span class="hljs-string">"atguigu"</span>);<br>  <span class="hljs-comment">// æ‰“å°åŠ å¯†ä¹‹åçš„æ•°æ®</span><br>  System.out.println(<span class="hljs-string">"åŠ å¯†ä¹‹åæ•°æ®ï¼š\t"</span>+atguigu);<br>  <span class="hljs-comment">//åˆ¤æ–­åŸå­—ç¬¦åŠ å¯†åå’ŒåŠ å¯†ä¹‹å‰æ˜¯å¦åŒ¹é…</span><br>  <span class="hljs-type">boolean</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> bCryptPasswordEncoder.matches(<span class="hljs-string">"atguigu"</span>, atguigu);<br>  <span class="hljs-comment">// æ‰“å°æ¯”è¾ƒç»“æœ</span><br>  System.out.println(<span class="hljs-string">"æ¯”è¾ƒç»“æœï¼š\t"</span>+result);<br>}<br></code></pre></td></tr></tbody></table></figure><h2 id="4-SpringSecurityWebæƒé™æ–¹æ¡ˆ"><a href="#4-SpringSecurityWebæƒé™æ–¹æ¡ˆ" class="headerlink" title="4.SpringSecurityWebæƒé™æ–¹æ¡ˆ"></a>4.SpringSecurityWebæƒé™æ–¹æ¡ˆ</h2><h3 id="4-1-è®¾ç½®ç™»å½•ç³»ç»Ÿçš„è´¦å·å¯†ç "><a href="#4-1-è®¾ç½®ç™»å½•ç³»ç»Ÿçš„è´¦å·å¯†ç " class="headerlink" title="4.1 è®¾ç½®ç™»å½•ç³»ç»Ÿçš„è´¦å·å¯†ç ;"></a>4.1 è®¾ç½®ç™»å½•ç³»ç»Ÿçš„è´¦å·å¯†ç ;</h3><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303282139212.png" alt="image-20230328213937178"></p><p><strong>æ–¹å¼äºŒï¼š</strong>ç¼–å†™ç±»çš„å®ç°æ¥å£</p><h3 id="4-2-ç™»å½•è®¤è¯æ ¡éªŒæµç¨‹"><a href="#4-2-ç™»å½•è®¤è¯æ ¡éªŒæµç¨‹" class="headerlink" title="4.2 ç™»å½•è®¤è¯æ ¡éªŒæµç¨‹"></a>4.2 ç™»å½•è®¤è¯æ ¡éªŒæµç¨‹</h3><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304031908170.png" alt="img"></p><p>è¿™é‡Œçš„ä½¿ç”¨ <strong>ç”¨æˆ·å/ç”¨æˆ·idç”Ÿæˆçš„jwt</strong>ä¸ºäº†ä¿è¯å®‰å…¨è¡Œï¼Œä¸åˆ©ç”¨idè¿›è¡Œç”Ÿæˆè€Œæ˜¯åˆ©ç”¨ å‰ç¼€+éšæœºæ—¶é—´ç”Ÿæˆçš„token</p><h4 id="4-2-1-springSecurityçš„å®Œæ•´æµç¨‹å›¾"><a href="#4-2-1-springSecurityçš„å®Œæ•´æµç¨‹å›¾" class="headerlink" title="4.2.1 springSecurityçš„å®Œæ•´æµç¨‹å›¾"></a>4.2.1 springSecurityçš„å®Œæ•´æµç¨‹å›¾</h4><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304031912605.png" alt="img"></p><p>å¦‚åçš„å®ç°æµç¨‹å‡åŸºäºå½“å‰çš„è¿‡æ»¤é“¾è¿›è¡Œå®ç°ã€‚</p><h4 id="4-2-2-è®¤è¯æµç¨‹å›¾è¯¦è§£"><a href="#4-2-2-è®¤è¯æµç¨‹å›¾è¯¦è§£" class="headerlink" title="4.2.2 è®¤è¯æµç¨‹å›¾è¯¦è§£"></a>4.2.2 è®¤è¯æµç¨‹å›¾è¯¦è§£</h4><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304031914071.png" alt="img"></p><ul><li>Authenticationæ¥å£: å®ƒçš„å®ç°ç±»ï¼Œè¡¨ç¤ºå½“å‰è®¿é—®ç³»ç»Ÿçš„ç”¨æˆ·ï¼Œå°è£…äº†ç”¨æˆ·ç›¸å…³ä¿¡æ¯ã€‚</li><li>AuthenticationManageræ¥å£ï¼šå®šä¹‰äº†è®¤è¯Authenticationçš„æ–¹æ³•</li><li>UserDetailsServiceæ¥å£ï¼šåŠ è½½ç”¨æˆ·ç‰¹å®šæ•°æ®çš„æ ¸å¿ƒæ¥å£ã€‚é‡Œé¢å®šä¹‰äº†ä¸€ä¸ªæ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„æ–¹æ³•ã€‚</li><li>UserDetailsæ¥å£ï¼šæä¾›æ ¸å¿ƒç”¨æˆ·ä¿¡æ¯ã€‚é€šè¿‡UserDetailsServiceæ ¹æ®ç”¨æˆ·åè·å–å¤„ç†çš„ç”¨æˆ·ä¿¡æ¯è¦å°è£…æˆUserDetailså¯¹è±¡è¿”å›ã€‚ç„¶åå°†è¿™äº›ä¿¡æ¯å°è£…åˆ°Authenticationå¯¹è±¡ä¸­ã€‚</li></ul><p><strong>é¦–å…ˆå®ç°ç™»å½•ä»¥åŠæ ¡éªŒæ³¨é”€åŠŸèƒ½:</strong></p><ol><li>è‡ªå®šä¹‰æ¥å£ç™»å½•<ul><li>åˆ›å»º<code>UsernamePasswordAuthenticationToken</code></li><li>è®¤è¯å¹¶ä¿å­˜è®¤è¯ä¿¡æ¯</li><li>è‡ªå®šä¹‰ç”Ÿæˆtoken</li><li>æ”¾å…¥ç¼“å­˜å°†ç»“æœè¿”å›å‰ç«¯</li></ul></li></ol><p><strong>é¦–å…ˆéœ€è¦å‡†å¤‡å¯¼å…¥çš„å·¥å…·ç±»:</strong></p><p><a href="https://github.com/7756JokerQAQ/SpringSecurity00"><strong>è§ä»£ç ä»“åº“</strong></a></p><p><strong>AcessToken.class</strong> :ç”¨äºè®¾ç½®ç™»å½•çš„tokenä¿¡æ¯</p><p><strong>é…ç½®ç±»ï¼š</strong></p><p><strong>RedisConfig.class</strong>ã€<strong>SecurityConfig.class</strong></p><p><strong>å®ä½“ç±»:</strong></p><p>LoginUser:ä»–éœ€è¦ç»§æ‰¿UserDetailsç±»</p><p>ResponseResultï¼šç»“æœç»Ÿä¸€å›å¤ç±»</p><p>User</p><p><strong>providerç±»ï¼š</strong></p><p>ç”¨äºç”ŸæˆJwtToken :å¤´éƒ¨+è´Ÿè½½ä¿¡æ¯+ç­¾å</p><p><strong>å·¥å…·ç±»:</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">FastJsonRedisSerializer.class <span class="hljs-comment">//ç”¨äºRedisä½¿ç”¨FastJsonåºåˆ—åŒ–</span><br>RedisCache.class  <span class="hljs-comment">//ç”¨äºredisç¼“å­˜çš„å·¥å…·ç±»</span><br>WebUtils.class <span class="hljs-comment">//å°†å­—ç¬¦ä¸²æ¸²æŸ“åˆ°å®¢æˆ·ç«¯å·¥å…·ç±»</span><br></code></pre></td></tr></tbody></table></figure><p>é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªLoginControllerç±»æ¥è¿›è¡Œç™»å½•çš„è®¤è¯æµç¨‹</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginController</span> {<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserLoginService userLoginService;<br>    <span class="hljs-meta">@PostMapping("/user/login")</span><br>    <span class="hljs-keyword">public</span> ResponseResult <span class="hljs-title function_">loginUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span>{<br>        <span class="hljs-keyword">return</span>  userLoginService.login(user);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>è¿›è€Œç¼–å†™å®ƒçš„<code>UserLoginService</code>æ¥å£ä»¥åŠ<code>UserLoginServiceImpl</code>å®ç°æ¥å£ç±»</p><p>åŸºæœ¬çš„æµç¨‹å°±æ˜¯ï¼š</p><ul><li>é¦–å…ˆåˆ›å»ºä¸€ä¸ª<code>UsernamePasswordAuthenticationToken</code>å¯¹è±¡è¿™æ˜¯å†…éƒ¨å·²ç»å°è£…å¥½çš„ç±»ï¼Œæˆ‘ä»¬åˆ©ç”¨å½“å‰ç™»å½•ç”¨æˆ·çš„è´¦æˆ·å’Œå¯†ç è¿›è¡Œåˆå§‹åŒ–</li><li>æ¥ç€åˆ°äº†è®¤è¯çš„é˜¶æ®µï¼Œéœ€è¦è°ƒç”¨<code>`AuthenticationManager</code>è¿™ä¸ªç±»è¿›è¡Œç›¸å…³çš„è®¤è¯å¾—åˆ°Authenticationå¯¹è±¡ä½¿ç”¨è¿™ä¸ªå®ç°ç±»æ¥æŠŠç”¨æˆ·çš„è´¦å·å¯†ç å°è£…æˆè¿™ä¸ªç±»å‹çš„å‚æ•°</li><li>ä¿å­˜è®¤è¯çš„ä¿¡æ¯éœ€è¦è°ƒç”¨<code>`SecurityContextHolder</code>çš„<code>getContext().setAuthentication(authenticate);</code>ä¼ å…¥ä¸Šé¢å¾—åˆ°çš„Authenticationå¯¹è±¡</li><li>æ¥ç€è¿›è¡ŒTokençš„ç”Ÿæˆå¯ä»¥åˆ©ç”¨JwtProviderç±»çš„creatTokenæ–¹æ³•ä¼ å…¥çš„å‚æ•°ä¸ºä¸€ä¸ªUserDetailså¯¹è±¡å¯ä»¥ä½¿ç”¨authenticate.getPrincipal()è¿›è¡Œå¼ºè½¬å¾—åˆ°</li><li>æ¥ç€å¯ä»¥å°†authenticate.getPrincipal()å¼ºè½¬ä¸ºLoginUserå¯¹è±¡ï¼Œå¹¶ä¸”å°†è½¬åçš„å¯¹è±¡ç›¸å…³çš„ä¿¡æ¯å­˜å…¥ç¼“å­˜ä¸­</li><li>æœ€åå°†ç”Ÿæˆçš„tokenå’Œå¯¹åº”çš„è¯·æ±‚å¤´å°è£…åˆ°mapä¸­ä¾¿äºå‰ç«¯è¿›è¡Œæ¥æ”¶ç›¸åº”</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserLoginServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserLoginService</span> {<br>    <span class="hljs-meta">@Autowired</span><br>    AuthenticationManager authenticationManager;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RedisCache redisCache;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> JwtProvider jwtProvider;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> JwtProperties jwtProperties;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> ResponseResult <span class="hljs-title function_">login</span><span class="hljs-params">(User user)</span> {<br>        log.debug(<span class="hljs-string">"è¿›å…¥loginæ–¹æ³•"</span>);<br>        <span class="hljs-comment">//1.åˆ›å»ºUsernamePasswordAuthenticationToken</span><br>        <span class="hljs-type">UsernamePasswordAuthenticationToken</span> <span class="hljs-variable">usernameAuthentication</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UsernamePasswordAuthenticationToken</span>(user.getUserName(), user.getPassword());<br>        <span class="hljs-comment">//2.è®¤è¯</span><br>        <span class="hljs-comment">//authenticationManageræ¥å£è°ƒç”¨authenticateæ–¹æ³•ï¼Œæ–¹æ³•è¿”å›çš„æ˜¯Authenticationå¯¹è±¡ï¼Œéœ€è¦Authenticationç±»å‹çš„å‚æ•°ã€‚</span><br>        <span class="hljs-comment">//Authenticationæ˜¯æ¥å£ï¼Œä½¿ç”¨è¿™ä¸ªæ¥å£çš„å®ç°ç±»æ¥æŠŠç”¨æˆ·çš„è´¦å·å¯†ç å°è£…æˆè¿™ä¸ªç±»å‹çš„å‚æ•°ã€‚</span><br>        <span class="hljs-comment">//ä¾›authenticationManageræ¥å£çš„authenticateæ–¹æ³•è°ƒç”¨</span><br>        <span class="hljs-type">Authentication</span> <span class="hljs-variable">authenticate</span> <span class="hljs-operator">=</span> authenticationManager.authenticate(usernameAuthentication);<br>        <span class="hljs-comment">//å¦‚æœæŸ¥è¯¢ä¸åˆ°ç”¨æˆ·ï¼Œå°±æŠ›å‡ºå¼‚å¸¸</span><br>        <span class="hljs-keyword">if</span> (Objects.isNull(authenticate)) {<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç™»å½•å¤±è´¥!"</span>);<br>        }<br>        <span class="hljs-comment">//ä¿å­˜è®¤è¯ä¿¡æ¯</span><br>        SecurityContextHolder.getContext().setAuthentication(authenticate);<br>        <span class="hljs-comment">//è‡ªå®šä¹‰ç”Ÿæˆtoken</span><br>        <span class="hljs-type">AccessToken</span> <span class="hljs-variable">accessToken</span> <span class="hljs-operator">=</span> jwtProvider.createToken((UserDetails) authenticate.getPrincipal());<br><br>        <span class="hljs-comment">//æŠŠauthenticateå¯¹è±¡å¼ºè½¬ä¸ºLoginUserå¯¹è±¡</span><br>        <span class="hljs-type">LoginUser</span> <span class="hljs-variable">loginUser</span> <span class="hljs-operator">=</span> (LoginUser) authenticate.getPrincipal();<br>        redisCache.setCacheObject(<span class="hljs-string">"login"</span>, loginUser);<br>        <span class="hljs-comment">//æŠŠtokenå“åº”ç»™å‰ç«¯</span><br>        Map&lt;String, String&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        map.put(jwtProperties.getRequestHeader(), accessToken.getToken());<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResponseResult</span>(<span class="hljs-number">200</span>, <span class="hljs-string">"ç™»å…¥æˆåŠŸ"</span>, map);<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure><p>å½“å®ç°äº†è¿™ä¸€æ­¥ç¦»æˆåŠŸåˆè¿›äº†ä¸€æ­¥,æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªè¿‡æ»¤é“¾ä¹Ÿå°±æ˜¯ç¼–å†™ä¸€ä¸ª<code>JwtAuthenticationTokenFilter</code>ä»–ç»§æ‰¿<code>OncePerRequestFilter</code>ç±»ç›´æ¥å®ç°ç›¸åº”çš„æ¥å£ï¼Œè¿™ä¸ªè¿‡æ»¤å™¨çš„æ„ä¹‰æ˜¯å½“æˆ‘ä»¬è¿›è¡Œæ¥å£è°ƒç”¨æ—¶ å…ˆæŸ¥è¯¢ç¼“å­˜ä¸­æ˜¯å¦å·²ç»æœ‰ç™»å½•ç”¨æˆ·çš„tokenè€Œä¸”tokenæœªè¿‡æœŸæœ‰çš„è¯ç›´æ¥è¿›è¡Œæ”¾è¡Œï¼Œåä¹‹å°±ä¸è®©å…¶è¿›è¡ŒæŸ¥è¯¢ã€‚</p><p>åŸºæœ¬æµç¨‹:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">1.</span>å…ˆæ‹¿åˆ°Authorizationè¯·æ±‚å¤´éƒ¨ä¿¡æ¯<br><span class="hljs-number">2.</span>å»æ‰tokençš„å‰ç¼€æ‹¿åˆ°çœŸæ˜¯çš„token(å› ä¸ºå‰é¢ç”Ÿæˆtokenæ—¶åŠ äº†å‰ç¼€)<br><span class="hljs-number">3.</span>æ¥ç€æ‹¿åˆ°tokené‡Œé¢çš„ç™»å½•ç”¨æˆ·è´¦å·åç§°<br><span class="hljs-number">4.</span>ä»redisä¸­æŸ¥è¯¢ç›¸å…³çš„ç™»å½•ç¼“å­˜ (è¿™é‡Œå®šä¹‰çš„keyä¸ºlogin)<br><span class="hljs-number">5.</span>æ‹¿åˆ°ç”¨æˆ·çš„ä¿¡æ¯éªŒè¯ç”¨æˆ·çš„ä¿¡æ¯ä¸token<br><span class="hljs-number">6.</span>ä¸Šä¸€æ­¥æˆåŠŸçš„è¯ç»„è£…authenticationå¯¹è±¡ï¼Œæ„é€ å‚æ•°æ˜¯Principal Credentials ä¸ Authoritiesåé¢çš„æ‹¦æˆªå™¨é‡Œé¢ä¼šç”¨åˆ° grantedAuthorities æ–¹æ³•<br><span class="hljs-number">7.</span>æœ€åå°†authenticationä¿¡æ¯æ”¾å…¥åˆ°ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­<br></code></pre></td></tr></tbody></table></figure><p>ä»£ç å®ç°</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtAuthenticationTokenFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OncePerRequestFilter</span> {<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> JwtProvider jwtProvider;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> JwtProperties jwtProperties;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RedisCache redisCache;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilterInternal</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> ServletException, IOException {<br>        log.info(<span class="hljs-string">"JWTè¿‡æ»¤å™¨é€šè¿‡æ ¡éªŒè¯·æ±‚å¤´tokenè¿›è¡Œè‡ªåŠ¨ç™»å½•..."</span>);<br>        <span class="hljs-comment">//å…ˆæ‹¿åˆ°Authorizationè¯·æ±‚å¤´éƒ¨ä¿¡æ¯</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">authToken</span> <span class="hljs-operator">=</span> jwtProvider.getToken(request);<br>        <span class="hljs-comment">// åˆ¤æ–­ä¸€ä¸‹å†…å®¹æ˜¯å¦ä¸ºç©º</span><br>        <span class="hljs-keyword">if</span> (!StringUtil.isNullOrEmpty(authToken) &amp;&amp; authToken.startsWith(jwtProperties.getTokenPrefix())) {<br>            <span class="hljs-comment">//å»æ‰tokençš„å‰ç¼€æ‹¿åˆ°çœŸæ˜¯çš„token</span><br>            authToken = authToken.substring(jwtProperties.getTokenPrefix().length());<br>            <span class="hljs-comment">//æ¥ç€æ‹¿åˆ°tokené‡Œé¢çš„ç™»å½•è´¦å·</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">loginAccount</span> <span class="hljs-operator">=</span> jwtProvider.getSubjectFromToken(authToken);<br>            <span class="hljs-keyword">if</span> (!StringUtil.isNullOrEmpty(loginAccount) &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == <span class="hljs-literal">null</span>) {<br>                <span class="hljs-comment">//æŸ¥è¯¢ç”¨æˆ·</span><br>                <span class="hljs-type">LoginUser</span> <span class="hljs-variable">loginUser</span> <span class="hljs-operator">=</span> redisCache.getCacheObject(<span class="hljs-string">"login"</span>);<br>                <span class="hljs-comment">//æ‹¿åˆ°ç”¨æˆ·çš„ä¿¡æ¯éªŒè¯ç”¨æˆ·çš„ä¿¡æ¯ä¸token</span><br>                <span class="hljs-keyword">if</span> (jwtProvider.validateToken(authToken, loginUser)) {<br>                    <span class="hljs-comment">// ç»„è£…authenticationå¯¹è±¡ï¼Œæ„é€ å‚æ•°æ˜¯Principal Credentials ä¸ Authorities</span><br>                    <span class="hljs-comment">// åé¢çš„æ‹¦æˆªå™¨é‡Œé¢ä¼šç”¨åˆ° grantedAuthorities æ–¹æ³•</span><br>                    <span class="hljs-type">UsernamePasswordAuthenticationToken</span> <span class="hljs-variable">authentication</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UsernamePasswordAuthenticationToken</span>(loginUser, loginUser.getPassword(), loginUser.getAuthorities());<br>                    <span class="hljs-comment">// å°†authenticationä¿¡æ¯æ”¾å…¥åˆ°ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­</span><br>                    SecurityContextHolder.getContext().setAuthentication(authentication);<br>                    log.info(<span class="hljs-string">"JWTè¿‡æ»¤å™¨é€šè¿‡æ ¡éªŒè¯·æ±‚å¤´tokenè‡ªåŠ¨ç™»å½•æˆåŠŸ, user : {}"</span>, loginUser.getUsername());<br>                } <span class="hljs-keyword">else</span> {<br>                    log.info(<span class="hljs-string">"ç¼“å­˜å·²ç»åˆ é™¤æˆ–è€…ç¼“å­˜å·²è¿‡æœŸ!"</span>);<br>                }<br>            }<br><br>        } <span class="hljs-keyword">else</span> {<br>            log.info(<span class="hljs-string">"tokenä¸ºç©ºæˆ–è€…tokenæ ¼å¼ä¸æ­£ç¡®"</span>);<br>        }<br>        <span class="hljs-comment">//å¦‚æœä¸ºç©ºç›´æ¥æ”¾è¡Œ</span><br>        filterChain.doFilter(request, response);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>æ¥ç€æˆ‘ä»¬éœ€è¦æ‰“å¼€è¿‡æ»¤çš„å¼€å…³ï¼Œéœ€è¦åœ¨SecurityConfigè¿›è¡Œé…ç½®</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304032014181.png" alt="image-20230403201429104"></p><p>å¼€å§‹è¿›è¡Œæµ‹è¯•å¯åŠ¨é¡¹ç›®:</p><p>å› ä¸ºæ•°æ®åº“å­˜çš„ä¿¡æ¯ä¸º userName:å¼ ä¸‰  password:1234 æ‰€ä»¥é¦–å…ˆæˆ‘ä»¬è¿›è¡Œç™»å½•æ‰“å¼€postman</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304032016454.png" alt="image-20230403201654389"></p><p>æ¥ç€æˆ‘ä»¬å¯ä»¥çœ‹åˆ°postmanç»™å‡ºçš„è¯¦ç»†çš„ä¿¡æ¯:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304032018604.png" alt="image-20230403201829552"></p><p>æˆ‘ä»¬å»æŸ¥è¯¢ä¸€ä¸‹åå°çš„æ—¥å¿—ä¿¡æ¯:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304032019408.png" alt="image-20230403201913367"></p><p>è¯´æ˜è¿™ä¸ªåœ¨ç™»å½•ä¹‹å‰èµ°äº†è¿‡æ»¤å™¨<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> ä½†æ˜¯å½“å‰æˆ‘ä»¬è¿˜æ²¡æœ‰è¾“å…¥tokenï¼Œtokenæ—¶åˆšåˆšç”Ÿæˆçš„</p><p>æ¥ç€æˆ‘ä»¬è¿›è¡Œtokençš„éªŒè¯ç™»å½•:å› ä¸ºæˆ‘ä»¬æ‹¿åˆ°äº†tokenè¿™å°±å¥½åŠäº†æµ‹è¯•å¦ä¸€ä¸ªæ¥å£è¿™æ¬¡ç›´æ¥è°ƒç”¨helloæ¥å£ é¢„æµ‹èƒ½è¿”å›hello security</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304032024082.png" alt="image-20230403202443016"></p><p>è¿”å›ç»“æœ:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304032025012.png" alt="image-20230403202525967"></p><p>æˆ‘ä»¬åœ¨çœ‹çœ‹åå°çš„æ§åˆ¶å°æ‰“å°çš„ä¿¡æ¯</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304032026302.png" alt="image-20230403202615261"></p><p>è¯´æ˜è°ƒç”¨è¿‡æ»¤å™¨æˆåŠŸå¯ä»¥é€šè¿‡tokenè¿›è¡Œè¯·æ±‚æ¥å£:</p><p><strong>æ³¨é”€æ¥å£çš„å®ç°:</strong></p><p>LoginControlleræ·»åŠ </p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/user/logout")</span><br>  <span class="hljs-keyword">public</span> ResponseResult <span class="hljs-title function_">logoutUser</span><span class="hljs-params">()</span>{<br>      <span class="hljs-keyword">return</span> userLoginService.logOut();<br>  }<br></code></pre></td></tr></tbody></table></figure><p>ç¼–å†™ç›¸å…³çš„serviceä»£ç å’Œimplä»£ç </p><p>è¿™ä¸ªå®ç°å¾ˆç®€å•åªéœ€è¦å¾—åˆ°å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ç›´æ¥ä»redisä¸­åˆ é™¤ï¼Œè¿™é‡Œå…¶å®æ˜¯æœ‰é—®é¢˜çš„å› ä¸ºæˆ‘ä»¬çš„redisCacheå†…å­˜ä¸­å­˜çš„ä¿¡æ¯éƒ½æ˜¯å®šæ­»çš„æ‰€ä»¥ä¸ºäº†æ›´å¥½çš„å®ç°åŠ¨æ€çš„æ•ˆæœå¯ä»¥å°†åœ¨loginUserä¸­å°è£…ä¸€ä¸ªéšæœºç”Ÿæˆçš„ä¿¡æ¯è¿›è¡ŒéªŒè¯æ¯”å¦‚å¯ä»¥ä½¿ç”¨å®ƒçš„<strong>å”¯ä¸€æ€§</strong>çš„è´¦æˆ·è¿›è¡Œä¸å”¯ä¸€å»ºè®®ä¸è¦ä½¿ç”¨</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> ResponseResult <span class="hljs-title function_">logOut</span><span class="hljs-params">()</span> {<br>       <span class="hljs-comment">//ç›´æ¥å»ç¼“å­˜ä¸­åˆ é™¤å¯¹åº”çš„ç¼“å­˜ä¿¡æ¯å°±å¯ä»¥äº†</span><br>       <span class="hljs-type">UsernamePasswordAuthenticationToken</span> <span class="hljs-variable">authentication</span> <span class="hljs-operator">=</span> (UsernamePasswordAuthenticationToken)SecurityContextHolder.getContext().getAuthentication();<br>       <span class="hljs-type">LoginUser</span> <span class="hljs-variable">loginUser</span> <span class="hljs-operator">=</span> (LoginUser) authentication.getPrincipal();<br>       redisCache.deleteObject(<span class="hljs-string">"login"</span>);<br>       <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResponseResult</span>(<span class="hljs-number">200</span>,<span class="hljs-string">"æ³¨é”€æˆåŠŸ"</span>);<br>   }<br></code></pre></td></tr></tbody></table></figure><p>è¿›è¡Œæµ‹è¯•:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304032034514.png" alt="image-20230403203451446"></p><p>ç»“æœå¦‚å›¾ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304032035310.png" alt="image-20230403203516274"></p><p>ç„¶åæˆ‘ä»¬åœ¨æ‹¿ç€tokenå»è®¿é—®helloæ¥å£çœ‹çœ‹æ•ˆæœ:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304032036154.png" alt="image-20230403203652084"></p><p>æ¥ç€çœ‹çœ‹æ§åˆ¶å°çš„ä¿¡æ¯:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304032037385.png" alt="image-20230403203715344"></p><p>æ³¨é”€å®Œæˆ!ï¼</p><h2 id="5-SpringSecurityæˆæƒå®ç°"><a href="#5-SpringSecurityæˆæƒå®ç°" class="headerlink" title="5.SpringSecurityæˆæƒå®ç°"></a>5.SpringSecurityæˆæƒå®ç°</h2><h3 id="5-1-æƒé™ç³»ç»Ÿçš„ä½œç”¨"><a href="#5-1-æƒé™ç³»ç»Ÿçš„ä½œç”¨" class="headerlink" title="5.1 æƒé™ç³»ç»Ÿçš„ä½œç”¨"></a>5.1 æƒé™ç³»ç»Ÿçš„ä½œç”¨</h3><p><strong>ä¸åŒçš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨ä¸åŒçš„åŠŸèƒ½</strong>ã€‚è¿™å°±æ˜¯æƒé™ç³»ç»Ÿè¦å»å®ç°çš„æ•ˆæœ,ä¸èƒ½åªä¾èµ–å‰ç«¯å»åˆ¤æ–­ç”¨æˆ·çš„æƒé™æ¥é€‰æ‹©æ˜¾ç¤ºå“ªäº›èœå•å“ªäº›æŒ‰é’®ã€‚å› ä¸ºå¦‚æœåªæ˜¯è¿™æ ·ï¼Œå¦‚æœæœ‰äººçŸ¥é“äº†å¯¹åº”åŠŸèƒ½çš„æ¥å£åœ°å€å°±å¯ä»¥ä¸é€šè¿‡å‰ç«¯ï¼Œç›´æ¥å»å‘é€è¯·æ±‚æ¥å®ç°ç›¸å…³åŠŸèƒ½æ“ä½œã€‚</p><p> æ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦åœ¨åå°è¿›è¡Œç”¨æˆ·æƒé™çš„åˆ¤æ–­ï¼Œåˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰ç›¸åº”çš„æƒé™ï¼Œå¿…é¡»å…·æœ‰æ‰€éœ€æƒé™æ‰èƒ½è¿›è¡Œç›¸åº”çš„æ“ä½œã€‚</p><h3 id="5-2-æˆæƒçš„åŸºæœ¬æµç¨‹"><a href="#5-2-æˆæƒçš„åŸºæœ¬æµç¨‹" class="headerlink" title="5.2 æˆæƒçš„åŸºæœ¬æµç¨‹"></a>5.2 æˆæƒçš„åŸºæœ¬æµç¨‹</h3><p>åœ¨SpringSecurityä¸­ï¼Œä¼šä½¿ç”¨é»˜è®¤çš„FilterSecurityInterceptoræ¥è¿›è¡Œæƒé™æ ¡éªŒã€‚åœ¨FilterSecurityInterceptorä¸­ä¼šä»SecurityContextHolderè·å–å…¶ä¸­çš„Authenticationï¼Œç„¶åè·å–å…¶ä¸­çš„æƒé™ä¿¡æ¯ã€‚å½“å‰ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰è®¿é—®å½“å‰èµ„æºæ‰€éœ€çš„æƒé™ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åªéœ€è¦æŠŠå½“å‰ç™»å½•ç”¨æˆ·çš„æƒé™ä¿¡æ¯ä¹Ÿå­˜å…¥Authenticationã€‚ ç„¶åè®¾ç½®æˆ‘ä»¬çš„èµ„æºæ‰€éœ€è¦çš„æƒé™å³å¯ã€‚</p><h3 id="5-3-æˆæƒçš„å®ç°"><a href="#5-3-æˆæƒçš„å®ç°" class="headerlink" title="5.3 æˆæƒçš„å®ç°"></a>5.3 æˆæƒçš„å®ç°</h3><p><strong>1.å¼€å¯æ³¨è§£åœ¨å¯åŠ¨ç±»ä¸Š:</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableGlobalMethodSecurity(prePostEnabled = true)</span><br></code></pre></td></tr></tbody></table></figure><p><strong>2.åœ¨å¯¹åº”çš„æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£@PreAuthorize</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloController</span> {<br>    <span class="hljs-meta">@RequestMapping("/hello")</span><br>    <span class="hljs-meta">@PreAuthorize("hasAuthority('system:dept:list')")</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"hello Security"</span>;<br>    }<br><br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>3.å°è£…æƒé™ä¿¡æ¯</strong></p><p><strong>é¦–å…ˆæ˜¯æ•°æ®åº“è¡¨çš„è®¾è®¡RBACæƒé™æ¨¡å‹:</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304042153345.png" alt="img"></p><p>éœ€è¦äº”å¼ è¡¨ä¸‹é¢æ˜¯ç›¸å…³çš„å»ºè¡¨è¯­å¥:</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs sql"><br><span class="hljs-keyword">CREATE</span> DATABASE <span class="hljs-comment">/*!32312 IF NOT EXISTS*/</span>`my_security` <span class="hljs-comment">/*!40100 DEFAULT CHARACTER SET utf8mb4 */</span>;<br><br>USE `my_security`;<br><br><span class="hljs-comment">/*Table structure for table `sys_menu` */</span><br><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `sys_menu`;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `sys_menu` (<br>  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>  `menu_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'NULL'</span> COMMENT <span class="hljs-string">'èœå•å'</span>,<br>  `path` <span class="hljs-type">varchar</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è·¯ç”±åœ°å€'</span>,<br>  `component` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç»„ä»¶è·¯å¾„'</span>,<br>  `visible` <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'èœå•çŠ¶æ€ï¼ˆ0æ˜¾ç¤º 1éšè—ï¼‰'</span>,<br>  `status` <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'èœå•çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰'</span>,<br>  `perms` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æƒé™æ ‡è¯†'</span>,<br>  `icon` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'#'</span> COMMENT <span class="hljs-string">'èœå•å›¾æ ‡'</span>,<br>  `create_by` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `create_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `update_by` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `update_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `del_flag` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'æ˜¯å¦åˆ é™¤ï¼ˆ0æœªåˆ é™¤ 1å·²åˆ é™¤ï¼‰'</span>,<br>  `remark` <span class="hljs-type">varchar</span>(<span class="hljs-number">500</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¤‡æ³¨'</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">2</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'èœå•è¡¨'</span>;<br><br><span class="hljs-comment">/*Table structure for table `sys_role` */</span><br><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `sys_role`;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `sys_role` (<br>  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>  `name` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `role_key` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è§’è‰²æƒé™å­—ç¬¦ä¸²'</span>,<br>  `status` <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'è§’è‰²çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰'</span>,<br>  `del_flag` <span class="hljs-type">int</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'del_flag'</span>,<br>  `create_by` <span class="hljs-type">bigint</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `create_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `update_by` <span class="hljs-type">bigint</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `update_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `remark` <span class="hljs-type">varchar</span>(<span class="hljs-number">500</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¤‡æ³¨'</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">3</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'è§’è‰²è¡¨'</span>;<br><br><span class="hljs-comment">/*Table structure for table `sys_role_menu` */</span><br><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `sys_role_menu`;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `sys_role_menu` (<br>  `role_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'è§’è‰²ID'</span>,<br>  `menu_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'èœå•id'</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`role_id`,`menu_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">2</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4;<br><br><span class="hljs-comment">/*Table structure for table `sys_user` */</span><br><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `sys_user`;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `sys_user` (<br>  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®'</span>,<br>  `user_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'NULL'</span> COMMENT <span class="hljs-string">'ç”¨æˆ·å'</span>,<br>  `nick_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'NULL'</span> COMMENT <span class="hljs-string">'æ˜µç§°'</span>,<br>  `password` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'NULL'</span> COMMENT <span class="hljs-string">'å¯†ç '</span>,<br>  `status` <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'è´¦å·çŠ¶æ€ï¼ˆ0æ­£å¸¸ 1åœç”¨ï¼‰'</span>,<br>  `email` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'é‚®ç®±'</span>,<br>  `phonenumber` <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ‰‹æœºå·'</span>,<br>  `sex` <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç”¨æˆ·æ€§åˆ«ï¼ˆ0ç”·ï¼Œ1å¥³ï¼Œ2æœªçŸ¥ï¼‰'</span>,<br>  `avatar` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¤´åƒ'</span>,<br>  `user_type` <span class="hljs-type">char</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'1'</span> COMMENT <span class="hljs-string">'ç”¨æˆ·ç±»å‹ï¼ˆ0ç®¡ç†å‘˜ï¼Œ1æ™®é€šç”¨æˆ·ï¼‰'</span>,<br>  `create_by` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ›å»ºäººçš„ç”¨æˆ·id'</span>,<br>  `create_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,<br>  `update_by` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ›´æ–°äºº'</span>,<br>  `update_time` datetime <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,<br>  `del_flag` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'åˆ é™¤æ ‡å¿—ï¼ˆ0ä»£è¡¨æœªåˆ é™¤ï¼Œ1ä»£è¡¨å·²åˆ é™¤ï¼‰'</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">3</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'ç”¨æˆ·è¡¨'</span>;<br><br><span class="hljs-comment">/*Table structure for table `sys_user_role` */</span><br><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `sys_user_role`;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `sys_user_role` (<br>  `user_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ç”¨æˆ·id'</span>,<br>  `role_id` <span class="hljs-type">bigint</span>(<span class="hljs-number">200</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'è§’è‰²id'</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`user_id`,`role_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4;<br></code></pre></td></tr></tbody></table></figure><p>ä¸ºäº†å¾—åˆ°ç›¸åº”çš„æƒé™æˆ‘ä»¬éœ€è¦ç¼–å†™SQLè¯­å¥å¾—åˆ° permsçš„ç»“æœä¹Ÿå°±æ˜¯è¡¨è¿æ¥è¿™é‡Œæä¾›ç»“æœ</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <br><span class="hljs-keyword">DISTINCT</span> m.`perms`<br><span class="hljs-keyword">FROM</span><br>sys_user_role ur<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> `sys_role` r <span class="hljs-keyword">ON</span> ur.`role_id` <span class="hljs-operator">=</span> r.`id`<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> `sys_role_menu` rm <span class="hljs-keyword">ON</span> ur.`role_id` <span class="hljs-operator">=</span> rm.`role_id`<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> `sys_menu` m <span class="hljs-keyword">ON</span> m.`id` <span class="hljs-operator">=</span> rm.`menu_id`<br><span class="hljs-keyword">WHERE</span><br>user_id <span class="hljs-operator">=</span> <span class="hljs-number">2</span><br><span class="hljs-keyword">AND</span> r.`status` <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br><span class="hljs-keyword">AND</span> m.`status` <span class="hljs-operator">=</span> <span class="hljs-number">0</span><br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304042155189.png" alt="image-20230404215557142"></p><p>è¿™é‡Œé¢çš„æ•°æ®æ˜¯æˆ‘æå‰å­˜å…¥çš„ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨çš„æ·»åŠ <span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304042158383.png" alt="image-20230404215825331"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304042158489.png" alt="image-20230404215848438"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304042159019.png" alt="image-20230404215909965"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304042159314.png" alt="image-20230404215946261"></p><p>å¯†ç çš„ç”Ÿæˆçœ‹æµ‹è¯•ç±»ä¸­çš„ä»£ç :</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br> <span class="hljs-keyword">void</span> <span class="hljs-title function_">passwordEncoder</span><span class="hljs-params">()</span> {<br>     BCryptPasswordEncoder passwordEncoder=<span class="hljs-keyword">new</span> <span class="hljs-title class_">BCryptPasswordEncoder</span>();<br>     <span class="hljs-comment">//åŠ å¯†çš„æ–¹æ³•</span><br>     <span class="hljs-type">String</span> <span class="hljs-variable">encode</span> <span class="hljs-operator">=</span> passwordEncoder.encode(<span class="hljs-string">"1234"</span>);<br>     <span class="hljs-type">String</span> <span class="hljs-variable">encode1</span> <span class="hljs-operator">=</span> passwordEncoder.encode(<span class="hljs-string">"1234"</span>);<br>     UpdateWrapper&lt;User&gt; updateWrapper=<span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateWrapper</span>&lt;&gt;();<br>     updateWrapper.eq(<span class="hljs-string">"id"</span>,<span class="hljs-number">2</span>).set(<span class="hljs-string">"password"</span>,encode1);<br><br>     userMapper.update(<span class="hljs-literal">null</span>,updateWrapper);<br>     System.out.println(passwordEncoder.matches(<span class="hljs-string">"1234"</span>,encode1));<br> }<br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304042200506.png" alt="image-20230404220041457"></p><p><strong>æ¥ç€éœ€è¦å¯¼å…¥ä¸€ä¸ªèœå•è¡¨çš„å®ä½“ç±»:è§ä»“åº“Menu.class</strong></p><p>ä¸€åˆ‡å‡†å¤‡å°±ç»ªå¼€å§‹è¿›è¡Œå®ç°ï¼Œç¼–å†™ç›¸å…³çš„MenuMapperç±»ä»¥åŠMenuMapper.xmlç±»å®ç°ä¸Šè¿°çš„SQLè¯­å¥ç„¶åå›å½’ä»£ç </p><p>åœ¨UserDetailsServiceImplä¸­æœ‰ä¸€ä¸ªç»§æ‰¿å®ç°æƒé™çš„å‡½æ•°éœ€è¦è¿›è¡Œä¿®æ”¹å®šä¹‰,åœ¨ä»£ç é‡Œä¹Ÿå°±æ˜¯é‚£ä¸ªLoginUserç±»ä¸­çš„<code>getAuthorities()</code></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304042149592.png" alt="image-20230404214859491"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304042149574.png" alt="image-20230404214917513"></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å­˜å‚¨æƒé™ä¿¡æ¯</span><br>  <span class="hljs-keyword">private</span> List&lt;String&gt; permissions;<br>  <span class="hljs-comment">//å­˜å‚¨SpringSecurityæ‰€éœ€è¦çš„æƒé™ä¿¡æ¯çš„é›†åˆ</span><br>  <span class="hljs-meta">@JSONField(serialize = false)</span><br>  <span class="hljs-keyword">private</span> List&lt;GrantedAuthority&gt; authorities;<br><br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">LoginUser</span><span class="hljs-params">(User user, List&lt;String&gt; permissions)</span> {<br>      <span class="hljs-built_in">this</span>.user = user;<br>      <span class="hljs-built_in">this</span>.permissions = permissions;<br>  }<br><br>  <span class="hljs-meta">@Override</span><br>  <span class="hljs-keyword">public</span> Collection&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">GrantedAuthority</span>&gt; getAuthorities() {<br>      <span class="hljs-keyword">if</span> (authorities != <span class="hljs-literal">null</span>) {<br>          <span class="hljs-keyword">return</span> authorities;<br>      }<br>      <span class="hljs-comment">//æŠŠpermissionsä¸­å­—ç¬¦ä¸²ç±»å‹çš„æƒé™ä¿¡æ¯è½¬æ¢æˆGrantedAuthorityå¯¹è±¡å­˜å…¥authoritiesä¸­</span><br>      authorities = permissions.stream()<br>              .map(SimpleGrantedAuthority::<span class="hljs-keyword">new</span>)<br>              .collect(Collectors.toList());<br>      <span class="hljs-keyword">return</span> authorities;<br>  }<br></code></pre></td></tr></tbody></table></figure><p>å½“æˆ‘ä»¬ä¿®æ”¹<strong>å®ŒæˆLoginUserå</strong>å°±å¯ä»¥å»UserDetailsServiceImplä¸­å»æŠŠæƒé™ä¿¡æ¯å°è£…åˆ°LoginUserä¸­äº†ï¼Œä»£ç å®ç°:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304042205314.png" alt="image-20230404220519246"></p><p>ç›´æ¥è°ƒç”¨è¿›è¡ŒæŸ¥è¯¢å³å¯ï¼›ç»“æœæˆ‘å°±ä¸ç²˜è´´äº†<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><h2 id="6-è‡ªå®šä¹‰å¤±è´¥å¤„ç†"><a href="#6-è‡ªå®šä¹‰å¤±è´¥å¤„ç†" class="headerlink" title="6.è‡ªå®šä¹‰å¤±è´¥å¤„ç†"></a>6.è‡ªå®šä¹‰å¤±è´¥å¤„ç†</h2><h3 id="6-1-åŠ å…¥ä¸¤ä¸ªå®ç°ç±»"><a href="#6-1-åŠ å…¥ä¸¤ä¸ªå®ç°ç±»" class="headerlink" title="6.1 åŠ å…¥ä¸¤ä¸ªå®ç°ç±»"></a>6.1 åŠ å…¥ä¸¤ä¸ªå®ç°ç±»</h3><p>æˆ‘ä»¬è¿˜å¸Œæœ›åœ¨è®¤è¯å¤±è´¥æˆ–è€…æ˜¯æˆæƒå¤±è´¥çš„æƒ…å†µä¸‹ä¹Ÿèƒ½å’Œæˆ‘ä»¬çš„æ¥å£ä¸€æ ·è¿”å›ç›¸åŒç»“æ„çš„jsonï¼Œè¿™æ ·å¯ä»¥è®©å‰ç«¯èƒ½å¯¹å“åº”è¿›è¡Œç»Ÿä¸€çš„å¤„ç†ã€‚è¦å®ç°è¿™ä¸ªåŠŸèƒ½æˆ‘ä»¬éœ€è¦çŸ¥é“SpringSecurityçš„å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚</p><p> åœ¨SpringSecurityä¸­ï¼Œå¦‚æœæˆ‘ä»¬åœ¨è®¤è¯æˆ–è€…æˆæƒçš„è¿‡ç¨‹ä¸­å‡ºç°äº†å¼‚å¸¸ä¼šè¢«ExceptionTranslationFilteræ•è·åˆ°ã€‚åœ¨ExceptionTranslationFilterä¸­ä¼šå»åˆ¤æ–­æ˜¯è®¤è¯å¤±è´¥è¿˜æ˜¯æˆæƒå¤±è´¥å‡ºç°çš„å¼‚å¸¸ã€‚</p><p> å¦‚æœæ˜¯è®¤è¯è¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸ä¼šè¢«å°è£…æˆAuthenticationExceptionç„¶åè°ƒç”¨<strong>AuthenticationEntryPoint</strong>å¯¹è±¡çš„æ–¹æ³•å»è¿›è¡Œå¼‚å¸¸å¤„ç†ã€‚</p><p> å¦‚æœæ˜¯æˆæƒè¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸ä¼šè¢«å°è£…æˆAccessDeniedExceptionç„¶åè°ƒç”¨<strong>AccessDeniedHandler</strong>å¯¹è±¡çš„æ–¹æ³•å»è¿›è¡Œå¼‚å¸¸å¤„ç†ã€‚</p><p> æ‰€ä»¥å¦‚æœæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†ï¼Œæˆ‘ä»¬åªéœ€è¦è‡ªå®šä¹‰AuthenticationEntryPointå’ŒAccessDeniedHandlerç„¶åé…ç½®ç»™SpringSecurityå³å¯ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AccessDeniedHandlerImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AccessDeniedHandler</span> {<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, AccessDeniedException accessDeniedException)</span> <span class="hljs-keyword">throws</span> IOException, ServletException {<br>        <span class="hljs-type">ResponseResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResponseResult</span>(HttpStatus.FORBIDDEN.value(), <span class="hljs-string">"æƒé™ä¸è¶³"</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> JSON.toJSONString(result);<br>        WebUtils.renderString(response,json);<br><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthenticationEntryPointImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AuthenticationEntryPoint</span> {<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">commence</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)</span> <span class="hljs-keyword">throws</span> IOException, ServletException {<br>        <span class="hljs-type">ResponseResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResponseResult</span>(HttpStatus.UNAUTHORIZED.value(), <span class="hljs-string">"è®¤è¯å¤±è´¥è¯·é‡æ–°ç™»å½•"</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> JSON.toJSONString(result);<br>        WebUtils.renderString(response,json);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>æ¥ç€é…ç½®SpringSecurity</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br> <span class="hljs-keyword">private</span> AccessDeniedHandler accessDeniedHandler;<br><br> <span class="hljs-meta">@Autowired</span><br> <span class="hljs-keyword">private</span> AuthenticationEntryPoint authenticationEntryPoint;<br></code></pre></td></tr></tbody></table></figure><p> ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨HttpSecurityå¯¹è±¡çš„æ–¹æ³•å»é…ç½®ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">http.exceptionHandling().authenticationEntryPoint(authenticationEntryPoint).<br>             accessDeniedHandler(accessDeniedHandler);<br></code></pre></td></tr></tbody></table></figure><h2 id="7-è·¨åŸŸè§£å†³"><a href="#7-è·¨åŸŸè§£å†³" class="headerlink" title="7.è·¨åŸŸè§£å†³"></a>7.è·¨åŸŸè§£å†³</h2><p>æµè§ˆå™¨å‡ºäºå®‰å…¨çš„è€ƒè™‘ï¼Œä½¿ç”¨ XMLHttpRequestå¯¹è±¡å‘èµ· HTTPè¯·æ±‚æ—¶å¿…é¡»éµå®ˆåŒæºç­–ç•¥ï¼Œå¦åˆ™å°±æ˜¯è·¨åŸŸçš„HTTPè¯·æ±‚ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯è¢«ç¦æ­¢çš„ã€‚ åŒæºç­–ç•¥è¦æ±‚æºç›¸åŒæ‰èƒ½æ­£å¸¸è¿›è¡Œé€šä¿¡ï¼Œå³åè®®ã€åŸŸåã€ç«¯å£å·éƒ½å®Œå…¨ä¸€è‡´ã€‚</p><p> å‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œå‰ç«¯é¡¹ç›®å’Œåç«¯é¡¹ç›®ä¸€èˆ¬éƒ½ä¸æ˜¯åŒæºçš„ï¼Œæ‰€ä»¥è‚¯å®šä¼šå­˜åœ¨è·¨åŸŸè¯·æ±‚çš„é—®é¢˜ã€‚</p><p> æ‰€ä»¥æˆ‘ä»¬å°±è¦å¤„ç†ä¸€ä¸‹ï¼Œè®©å‰ç«¯èƒ½è¿›è¡Œè·¨åŸŸè¯·æ±‚ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CorsConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> {<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCorsMappings</span><span class="hljs-params">(CorsRegistry registry)</span> {<br>      <span class="hljs-comment">// è®¾ç½®å…è®¸è·¨åŸŸçš„è·¯å¾„</span><br>        registry.addMapping(<span class="hljs-string">"/**"</span>)<br>                <span class="hljs-comment">// è®¾ç½®å…è®¸è·¨åŸŸè¯·æ±‚çš„åŸŸå</span><br>                .allowedOriginPatterns(<span class="hljs-string">"*"</span>)<br>                <span class="hljs-comment">// æ˜¯å¦å…è®¸cookie</span><br>                .allowCredentials(<span class="hljs-literal">true</span>)<br>                <span class="hljs-comment">// è®¾ç½®å…è®¸çš„è¯·æ±‚æ–¹å¼</span><br>                .allowedMethods(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"POST"</span>, <span class="hljs-string">"DELETE"</span>, <span class="hljs-string">"PUT"</span>)<br>                <span class="hljs-comment">// è®¾ç½®å…è®¸çš„headerå±æ€§</span><br>                .allowedHeaders(<span class="hljs-string">"*"</span>)<br>                <span class="hljs-comment">// è·¨åŸŸå…è®¸æ—¶é—´</span><br>                .maxAge(<span class="hljs-number">3600</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>å¼€å¯SpringSecurityçš„è·¨åŸŸè®¿é—®</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configure</span><span class="hljs-params">(HttpSecurity http)</span> <span class="hljs-keyword">throws</span> Exception {<br>       http<br>               <span class="hljs-comment">//å…³é—­csrf</span><br>               .csrf().disable()<br>               <span class="hljs-comment">//ä¸é€šè¿‡Sessionè·å–SecurityContext</span><br>               .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)<br>               .and()<br>               .authorizeRequests()<br>               <span class="hljs-comment">// å¯¹äºç™»å½•æ¥å£ å…è®¸åŒ¿åè®¿é—®</span><br>               .antMatchers(<span class="hljs-string">"/user/login"</span>).anonymous()<br>               <span class="hljs-comment">// é™¤ä¸Šé¢å¤–çš„æ‰€æœ‰è¯·æ±‚å…¨éƒ¨éœ€è¦é‰´æƒè®¤è¯</span><br>               .anyRequest().authenticated();<br><br>       <span class="hljs-comment">//æ·»åŠ è¿‡æ»¤å™¨</span><br>       http.addFilterBefore(jwtAuthenticationTokenFilter, UsernamePasswordAuthenticationFilter.class);<br><br>       <span class="hljs-comment">//é…ç½®å¼‚å¸¸å¤„ç†å™¨</span><br>       http.exceptionHandling()<br>               <span class="hljs-comment">//é…ç½®è®¤è¯å¤±è´¥å¤„ç†å™¨</span><br>               .authenticationEntryPoint(authenticationEntryPoint)<br>               .accessDeniedHandler(accessDeniedHandler);<br><br>       <span class="hljs-comment">//å…è®¸è·¨åŸŸ</span><br>       http.cors();   <span class="hljs-comment">//!!!!!!!!!!!!!!!!!!è¿™ä¸ªè¿™ä¸ª</span><br>   }<br></code></pre></td></tr></tbody></table></figure><h2 id="8-å…¶ä»–æƒé™æ ¡éªŒæ–¹æ³•"><a href="#8-å…¶ä»–æƒé™æ ¡éªŒæ–¹æ³•" class="headerlink" title="8.å…¶ä»–æƒé™æ ¡éªŒæ–¹æ³•"></a>8.å…¶ä»–æƒé™æ ¡éªŒæ–¹æ³•</h2><p>é™¤äº†@PreAuthorizeæ³¨è§£ï¼Œè¿˜å¯ä»¥ä½¿ç”¨hasAuthorityæ–¹æ³•è¿›è¡Œæ ¡éªŒ,ä¾‹å¦‚ï¼šhasAnyAuthorityï¼ŒhasRoleï¼ŒhasAnyRoleç­‰ã€‚</p><p>å°±æ‹¿hashAuthorityè¿›è¡Œè®²è§£,å®ƒå®é™…æ˜¯æ‰§è¡Œäº†SecurityExpressionRootçš„hasAuthorityæ–¹æ³•ï¼Œå®ƒå¯ä»¥ä¼ å…¥å¤šä¸ªæƒé™ä¾‹å¦‚:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@PreAuthorize("hasAnyAuthority('admin','test','system:dept:list')")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">()</span>{<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"hello"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><p>è€ŒhasRoleè¦æ±‚æœ‰å¯¹åº”çš„è§’è‰²æ‰èƒ½è®¿é—®ï¼Œå®ƒå†…éƒ¨ä¼šæŠŠæˆ‘ä»¬ä¼ å…¥çš„å‚æ•°æ‹¼æ¥ä¸Š <strong>ROLE_</strong> åå†å»æ¯”è¾ƒã€‚æ‰€ä»¥è¿™ç§æƒ…å†µä¸‹éœ€è¦ç”¨æˆ·å¯¹åº”çš„æƒé™ä¸Šä¹Ÿæœ‰ROLE_è¿™ä¸ªå‰ç¼€æ‰è¡Œ;</p><h3 id="8-1-è‡ªå®šä¹‰æƒé™æ ¡éªŒæ–¹æ³•"><a href="#8-1-è‡ªå®šä¹‰æƒé™æ ¡éªŒæ–¹æ³•" class="headerlink" title="8.1.è‡ªå®šä¹‰æƒé™æ ¡éªŒæ–¹æ³•"></a>8.1.è‡ªå®šä¹‰æƒé™æ ¡éªŒæ–¹æ³•</h3><p>@PreAuthorizeæ³¨è§£ä¸­ä½¿ç”¨æˆ‘ä»¬çš„æ–¹æ³•ï¼Œéœ€è¦è‡ªå·±å®šä¹‰ä¸€ä¸ªç±».å¹¶ä¸”æ³¨å…¥åˆ°å®¹å™¨ä¸­ï¼Œå¸¦ä¸Šæ ‡è¯†ç¬¦:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component("ex")</span>  <span class="hljs-comment">//è‡ªå®šä¹‰æ ‡è¯†ç¬¦</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SGExpressionRoot</span> {<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasAuthority</span><span class="hljs-params">(String authority)</span>{<br>        <span class="hljs-comment">//è·å–å½“å‰ç”¨æˆ·çš„æƒé™</span><br>        <span class="hljs-type">Authentication</span> <span class="hljs-variable">authentication</span> <span class="hljs-operator">=</span> SecurityContextHolder.getContext().getAuthentication();<br>        <span class="hljs-type">LoginUser</span> <span class="hljs-variable">loginUser</span> <span class="hljs-operator">=</span> (LoginUser) authentication.getPrincipal();<br>        List&lt;String&gt; permissions = loginUser.getPermissions();<br>        <span class="hljs-comment">//åˆ¤æ–­ç”¨æˆ·æƒé™é›†åˆä¸­æ˜¯å¦å­˜åœ¨authority</span><br>        <span class="hljs-keyword">return</span> permissions.contains(authority);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>æ¥ç€åœ¨SPLEè¡¨è¾¾å¼ä¸­ç”¨@exæ¥è·å–å®¹å™¨ä¸­çš„beanåå­—exå¯¹è±¡ï¼Œç„¶åå†è°ƒç”¨è¿™ä¸ªhasAuthorityæ–¹æ³•:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/hello")</span><br><span class="hljs-meta">@PreAuthorize("@ex.hasAuthority('system:dept:list')")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">()</span>{<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"hello"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>åŸºäºé…ç½®çš„æ–¹æ³•ï¼š</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304051058121.png" alt="image-20230405105836965"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaåç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2035è§„åˆ’å­¦ä¹ </title>
      <link href="/2023/03/28/%E5%A4%A7%E4%B8%89%E4%B8%8A%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0/2035%E8%A7%84%E5%88%92/"/>
      <url>/2023/03/28/%E5%A4%A7%E4%B8%89%E4%B8%8A%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0/2035%E8%A7%84%E5%88%92/</url>
      
        <content type="html"><![CDATA[<h2 id="2035è§„åˆ’"><a href="#2035è§„åˆ’" class="headerlink" title="2035è§„åˆ’"></a>2035è§„åˆ’</h2><p>1.ä¸è¶³é‡ç‚¹é¢†åŸŸå…³é”®ç¯èŠ‚æ”¹é©ä»»åŠ¡ä»ç„¶è‰°å·¨ï¼Œåˆ›æ–°èƒ½åŠ›ä¸é€‚åº”é«˜è´¨é‡å‘å±•è¦æ±‚ï¼Œå†œä¸šåŸºç¡€è¿˜ä¸ç¨³å›ºï¼ŒåŸä¹¡åŒºåŸŸå‘å±•å’Œæ”¶å…¥åˆ†é…å·®è·è¾ƒå¤§ï¼Œç”Ÿæ€ç¯ä¿ä»»é‡é“è¿œï¼Œæ°‘ç”Ÿä¿éšœå­˜åœ¨çŸ­æ¿ï¼Œç¤¾ä¼šæ²»ç†è¿˜æœ‰å¼±é¡¹ã€‚</p><p>æ¨åŠ¨é«˜è´¨é‡å‘å±•ä¸ºä¸»é¢˜ã€<strong>ç„å‡†äººå·¥æ™ºèƒ½ã€é‡å­ä¿¡æ¯ã€é›†æˆç”µè·¯ã€ç”Ÿå‘½å¥åº·ã€è„‘ç§‘å­¦ã€ç”Ÿç‰©è‚²ç§ã€ç©ºå¤©ç§‘æŠ€ã€æ·±åœ°æ·±æµ·ç­‰å‰æ²¿é¢†åŸŸï¼Œå®æ–½ä¸€æ‰¹å…·æœ‰å‰ç»æ€§ã€æˆ˜ç•¥æ€§çš„å›½å®¶é‡å¤§ç§‘æŠ€é¡¹ç›®ã€‚</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304021210862.png" alt="image-20230402120953648"></p><p>åŸ¹è‚²å…ˆè¿›åˆ¶é€ ä¸šé›†ç¾¤ï¼Œæ¨åŠ¨é›†æˆç”µè·¯ã€èˆªç©ºèˆªå¤©ã€èˆ¹èˆ¶ä¸æµ·æ´‹å·¥ç¨‹è£…å¤‡ã€æœºå™¨äººã€å…ˆè¿›è½¨é“äº¤é€šè£…å¤‡ã€å…ˆè¿›ç”µåŠ›è£…å¤‡ã€å·¥ç¨‹æœºæ¢°ã€é«˜ç«¯æ•°æ§æœºåºŠã€åŒ»è¯åŠåŒ»ç–—è®¾å¤‡ç­‰äº§ä¸šåˆ›æ–°å‘å±•ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304021213810.png" alt="image-20230402121352766"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304021214042.png" alt="image-20230402121421001"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304021216779.png" alt="image-20230402121616740"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304021218149.png" alt="image-20230402121838113"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304021222604.png" alt="image-20230402122228555"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304021223192.png" alt="image-20230402122314153"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304021223385.png" alt="image-20230402122341247"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304021229012.png" alt="image-20230402122859937"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304021230973.png" alt="image-20230402123017905"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304021232977.png" alt="image-20230402123206895"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304021234389.png" alt="image-20230402123413291"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202304021236231.png" alt="image-20230402123612169"></p><p>æ€»ä½“æ¥è¯´ï¼Œè®¡ç®—æœºè¿˜æ˜¯å¯ä»¥çš„ï¼Œå¯ä»¥ä¸å»äº’è”ç½‘å¤§å‚ï¼Œå¯ä»¥åƒæ™ºæ…§äº¤é€šï¼Œè½¦è”ç½‘ä»¥åŠæ™ºæ…§å†œä¸šç­‰æ•°å­—åŒ–ä¼ä¸šå‘å±•ï¼Œåå››äº”è§„åˆ’ï¼Œå®ƒæ˜¯ä»é‡åˆ°è´¨çš„æ”¹å˜ï¼Œéœ€è¦æ²‰å¾—ä½å¿ƒï¼Œä»–ä¸ä¼šåœ¨1~2å¹´å†…å–å¾—éå¸¸å¤§çš„ç»æµæ•ˆç›Šï¼Œä½†æ˜¯é•¿è¿œæ¥çœ‹ï¼Œ15å¹´å¾€åå°±ä¸€å®šèƒ½å–å¾—å¥½çš„æ•ˆç›Š.</p>]]></content>
      
      
      <categories>
          
          <category> å›½å®¶æ”¿ç­– </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘å±•è§„åˆ’ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å•è°ƒæ ˆå’ŒäºŒå‰æ ‘</title>
      <link href="/2023/03/21/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/%E5%8D%95%E8%B0%83%E6%A0%88and%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
      <url>/2023/03/21/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/%E5%8D%95%E8%B0%83%E6%A0%88and%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="å•è°ƒæ ˆå’ŒäºŒå‰æ ‘"><a href="#å•è°ƒæ ˆå’ŒäºŒå‰æ ‘" class="headerlink" title="å•è°ƒæ ˆå’ŒäºŒå‰æ ‘"></a>å•è°ƒæ ˆå’ŒäºŒå‰æ ‘</h1><ol><li>ç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ <code>root</code> ï¼Œç¿»è½¬è¿™æ£µäºŒå‰æ ‘ï¼Œå¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚</li></ol><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://assets.leetcode.com/uploads/2021/03/14/invert1-tree.jpg" alt=""></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šroot = [4,2,7,1,3,6,9]<br>è¾“å‡ºï¼š[4,7,2,9,6,3,1]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><p><img src="https://assets.leetcode.com/uploads/2021/03/14/invert2-tree.jpg" alt=""></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šroot = [2,1,3]<br>è¾“å‡ºï¼š[2,3,1]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šroot = []<br>è¾“å‡ºï¼š[]<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®èŒƒå›´åœ¨ <code>[0, 100]</code> å†…</li><li><code>-100 &lt;= Node.val &lt;= 100</code></li></ul><p><strong>é¢˜ç›®è§£æ:</strong></p><p>è¿™é“é¢˜ç›®éå¸¸éå¸¸çš„ç®€å•å°±æ˜¯ä¸€ä¸ªç®€å•çš„é€’å½’å‡½æ•°å°±è¡Œäº†ï¼Œç®€å•çš„åˆ†æä»¥ä¸‹å°±æ˜¯éå¸¸çš„ç®€å•çœ‹çœ‹å®ä¾‹äºŒçš„é‚£é¢—æ ‘:</p><p><span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>äº¤æ¢å·¦å³ä¸¤é¢—å­æ ‘ï¼Œè¿™æ˜¯æœ€å°å•ä½äº†ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬é¦–å…ˆåˆ¤æ–­å·¦å³å­æ ‘æ˜¯å¦å…¨ä¸ºnullï¼ˆè¿™æ˜¯é€’å½’ç»“æŸçš„æ ‡å¿—ï¼‰ï¼Œç„¶åå°±å®šä¹‰ä¸€ä¸ªèŠ‚ç‚¹è®°å½•å·¦å­æ ‘ï¼Œä¸€ä¸ªèŠ‚ç‚¹è®°å½•å³å­æ ‘å½“ç„¶è¿™é‡Œéœ€è¦çš„æ˜¯é€’å½’åˆ°æœ€å·¦å’Œæœ€å³,ç„¶åå°†ä¸¤é¢—å­—æ•°è¿›è¡Œäº¤æ¢å°±è¡Œäº†,è¿™è¿˜ä¸æ˜¯é‚£ç§å¤æ‚ä¸€ç‚¹çš„äº¤æ¢ï¼Œä½ ä¼šå‘ç°æœ€å°çš„å•ä½å°±æ˜¯å®ä¾‹äºŒçš„å›¾ï¼Œå¯ä»¥çœ‹çœ‹ç¬¬<a href="https://leetcode.cn/problems/symmetric-tree/?favorite=2cktkvj">101</a>é¢˜ä»£ç å¦‚ä¸‹:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> TreeNode <span class="hljs-title function_">invertTree</span><span class="hljs-params">(TreeNode root)</span> {<br>    <span class="hljs-keyword">if</span> (root==<span class="hljs-literal">null</span>){<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>}<br>    TreeNode left=invertTree(root.left);<br>    TreeNode right=invertTree(root.right);<br>    root.left=right;<br>    root.right=left;<br>    <span class="hljs-keyword">return</span> root;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><ol><li>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚</li></ol><p><a href="https://baike.baidu.com/item/æœ€è¿‘å…¬å…±ç¥–å…ˆ/8918834?fr=aladdin">ç™¾åº¦ç™¾ç§‘</a>ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªèŠ‚ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªèŠ‚ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆ<strong>ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆ</strong>ï¼‰ã€‚â€</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://assets.leetcode.com/uploads/2018/12/14/binarytree.png" alt="img"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1<br>è¾“å‡ºï¼š3<br>è§£é‡Šï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 1 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 3 ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><p><img src="https://assets.leetcode.com/uploads/2018/12/14/binarytree.png" alt="img"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4<br>è¾“å‡ºï¼š5<br>è§£é‡Šï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 5 ã€‚å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šroot = [1,2], p = 1, q = 2<br>è¾“å‡ºï¼š1<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li>æ ‘ä¸­èŠ‚ç‚¹æ•°ç›®åœ¨èŒƒå›´ <code>[2, 105]</code> å†…ã€‚</li><li><code>-109 &lt;= Node.val &lt;= 109</code></li><li>æ‰€æœ‰ <code>Node.val</code> <code>äº’ä¸ç›¸åŒ</code> ã€‚</li><li><code>p != q</code></li><li><code>p</code> å’Œ <code>q</code> å‡å­˜åœ¨äºç»™å®šçš„äºŒå‰æ ‘ä¸­ã€‚</li></ul><p><strong>é¢˜ç›®è§£æ:</strong></p><p>æ ¹æ®å®šä¹‰å¯ä»¥çŸ¥é“<strong>ç¥–å…ˆçš„å®šä¹‰:</strong>è‹¥èŠ‚ç‚¹ <em>p</em> åœ¨èŠ‚ç‚¹ root çš„å·¦ï¼ˆå³ï¼‰å­æ ‘ä¸­ï¼Œæˆ– <em>p</em>=root ï¼Œåˆ™ç§° root æ˜¯ <em>p</em> çš„ç¥–å…ˆã€‚</p><p><strong>æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ï¼š</strong> è®¾èŠ‚ç‚¹ <em>root</em> ä¸ºèŠ‚ç‚¹ <em>p</em>,<em>q</em> çš„æŸå…¬å…±ç¥–å…ˆï¼Œè‹¥å…¶å·¦å­èŠ‚ç‚¹ <em>root</em>.<em>l<strong>e</strong>ft</em> å’Œå³å­èŠ‚ç‚¹ <em>root</em>.<em>r<strong>i</strong>g<strong>h</strong>t</em> éƒ½ä¸æ˜¯ <em>p</em>,<em>q</em> çš„å…¬å…±ç¥–å…ˆï¼Œåˆ™ç§° <em>root</em> æ˜¯ â€œæœ€è¿‘çš„å…¬å…±ç¥–å…ˆâ€ ã€‚</p><p>æ ¹æ®ä»¥ä¸Šçš„å®šä¹‰å¯ä»¥çŸ¥é“rootæ˜¯pï¼Œqçš„æœ€è¿‘å…¬å…±ç¥–å…ˆåˆ™åªå¯èƒ½æ˜¯ä¸‹é¢çš„æƒ…å†µä¹‹ä¸€:</p><ol><li>på’Œqåœ¨rootçš„å­æ ‘ä¸­ï¼Œä¸”åˆ†åˆ—rootçš„å¼‚ä¾§ï¼ˆå³åˆ†å¸ƒåœ¨å·¦å³å­æ ‘ä¸­ï¼‰</li><li>p=rootï¼Œä¸”qåœ¨rootçš„å·¦æˆ–å³å­æ ‘ä¸­</li><li>q=rootï¼Œä¸”påœ¨rootçš„å·¦æˆ–å³å­æ ‘ä¸­</li></ol><p><img src="https://pic.leetcode-cn.com/1599885247-mgYjRv-Picture2.png" alt="Picture2.png"></p><p>è€ƒè™‘é€šè¿‡é€’å½’å¯¹äºŒå‰æ ‘è¿›è¡Œå…ˆåºéå†ï¼Œå½“é‡åˆ°èŠ‚ç‚¹pæˆ–qæ˜¯è¿”å›ï¼Œä»åº•è‡³å®šçš„è¿›è¡Œå›æº¯ï¼Œå½“èŠ‚ç‚¹p,qåœ¨èŠ‚ç‚¹rootçš„å¼‚ä¾§æ—¶ï¼ŒèŠ‚ç‚¹rootå³ä¸ºæœ€è¿‘çš„å…¬å…±ç¥–å…ˆ,åˆ™å‘ä¸Šè¿”å›root</p><p><strong>é€’å½’è§£æï¼š</strong></p><ol><li>ç»ˆæ­¢æ¡ä»¶<ul><li>å½“è¶Šè¿‡å¶èŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›null</li><li>å½“rootç­‰äºpæˆ–è€…qç›´æ¥è¿”å›root</li></ul></li><li>é€’æ¨å·¥ä½œï¼š<ul><li>å¼€å¯é€’å½’å·¦å­æ ‘ï¼Œè¿”å›å€¼è®°ä¸ºleftï¼›</li><li>å¼€å¯é€’å½’å³å­æ ‘ï¼Œè¿”å›å€¼è®°ä¸ºrightï¼›</li></ul></li><li>è¿”å›å€¼ï¼šæ›´å…·leftå’Œrightå¯å±•å¼€ä¸ºå››ç§æƒ…å†µï¼š<ul><li>å½“leftå’ŒrightåŒæ—¶ä¸ºç©ºï¼šè¯´æ˜rootçš„å·¦å³å­æ ‘éƒ½ä¸åŒ…å«p,qç›´æ¥è¿”å›null</li><li>å½“leftå’ŒrightåŒæ—¶ä¸ä¸ºç©ºï¼šè¯´æ˜pï¼Œqåˆ†åˆ—åœ¨rootçš„å¼‚ä¾§ï¼ˆåˆ†åˆ«åœ¨å·¦/å³å­æ ‘ï¼‰ï¼Œå› æ­¤rootä¸ºæœ€è¿‘çš„å…¬å…±ç¥–å…ˆï¼Œè¿”å›rootï¼›</li><li>å½“leftä¸ºç©ºï¼Œrightä¸ä¸ºç©ºï¼›pï¼Œqéƒ½ä¸åœ¨rootçš„å·¦å­æ ‘ä¸­ï¼Œç›´æ¥è¿”å›rightï¼Œå…·ä½“å¯ä»¥åˆ†ä¸ºä¸¤ç§:<ul><li>p,qå…¶ä¸­ä¸€ä¸ªåœ¨rootçš„å³å­æ ‘ä¸­ï¼Œæ­¤æ—¶rightæŒ‡å‘pï¼ˆå‡è®¾ä¸ºpï¼‰</li><li>p,qä¸¤èŠ‚ç‚¹éƒ½åœ¨rootçš„å³å­æ ‘ä¸­ï¼Œæ­¤æ—¶çš„rightæŒ‡å‘æœ€è¿‘çš„å…¬å…±ç¥–å…ˆèŠ‚ç‚¹ï¼›</li></ul></li><li>å½“leftä¸ä¸ºç©ºï¼Œrightä¸ºç©ºï¼šä¸ä¸Šä¸ªæƒ…å†µåŒç†</li></ul></li></ol><p><img src="https://pic.leetcode-cn.com/1599885247-KpxUys-Picture3.png" alt="Picture3.png">,<img src="https://pic.leetcode-cn.com/1599885247-azGPkG-Picture4.png" alt="Picture4.png">,<img src="https://pic.leetcode-cn.com/1599885247-hIMEfJ-Picture5.png" alt="Picture5.png">,<img src="https://pic.leetcode-cn.com/1599885247-UMCTfd-Picture6.png" alt="Picture6.png">,<img src="https://pic.leetcode-cn.com/1599885247-SLOIAX-Picture7.png" alt="Picture7.png">,<img src="https://pic.leetcode-cn.com/1599885247-JGxmmL-Picture8.png" alt="Picture8.png">,<img src="https://pic.leetcode-cn.com/1599885247-lVrUTd-Picture9.png" alt="Picture9.png">,<img src="https://pic.leetcode-cn.com/1599885247-VTPazU-Picture10.png" alt="Picture10.png">,<img src="https://pic.leetcode-cn.com/1599885247-KePYfU-Picture11.png" alt="Picture11.png">,<img src="https://pic.leetcode-cn.com/1599885247-xkRUDm-Picture12.png" alt="Picture12.png">,<img src="https://pic.leetcode-cn.com/1599885247-SFdLoP-Picture13.png" alt="Picture13.png">,<img src="https://pic.leetcode-cn.com/1599885247-YOUEcd-Picture14.png" alt="Picture14.png">,<img src="https://pic.leetcode-cn.com/1599885247-HcncTq-Picture15.png" alt="Picture15.png">,<img src="https://pic.leetcode-cn.com/1599885247-oeFNkc-Picture16.png" alt="Picture16.png">,<img src="https://pic.leetcode-cn.com/1599885247-DjiiMY-Picture17.png" alt="Picture17.png">,<img src="https://pic.leetcode-cn.com/1599885247-SkpSEn-Picture18.png" alt="Picture18.png">,<img src="https://pic.leetcode-cn.com/1599885247-jFDBar-Picture19.png" alt="Picture19.png">,<img src="https://pic.leetcode-cn.com/1599885247-GEkXRi-Picture20.png" alt="Picture20.png"></p><p>ä»£ç å®ç°é€»è¾‘å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java">  <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span> {<br>      <span class="hljs-type">int</span> val;<br>      TreeNode left;<br>      TreeNode right;<br>      TreeNode(<span class="hljs-type">int</span> x) { val = x; }<br>  }<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> TreeNode <span class="hljs-title function_">lowestCommonAncestor</span><span class="hljs-params">(TreeNode root, TreeNode p, TreeNode q)</span> {<br>        <span class="hljs-comment">//é€’å½’ç»“æŸæ¡ä»¶</span><br>        <span class="hljs-keyword">if</span> (root==<span class="hljs-literal">null</span>||root==p||root==q)<span class="hljs-keyword">return</span> root;<br>        <span class="hljs-comment">//è®°å½•å·¦å­æ ‘çš„æƒ…å†µ</span><br>        TreeNode left=lowestCommonAncestor(root.left,p,q);<br>        <span class="hljs-comment">//è®°å½•å³å­æ ‘çš„æƒ…å†µ</span><br>        TreeNode right=lowestCommonAncestor(root.right,p,q);<br>        <span class="hljs-keyword">if</span> (left==<span class="hljs-literal">null</span>)<span class="hljs-keyword">return</span> right;<br>        <span class="hljs-keyword">if</span> (right==<span class="hljs-literal">null</span>)<span class="hljs-keyword">return</span> left;<br>        <span class="hljs-keyword">return</span> root;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h2 id="å•è°ƒæ ˆè§£æ³•"><a href="#å•è°ƒæ ˆè§£æ³•" class="headerlink" title="å•è°ƒæ ˆè§£æ³•"></a>å•è°ƒæ ˆè§£æ³•</h2><p>739.ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>temperatures</code> ï¼Œè¡¨ç¤ºæ¯å¤©çš„æ¸©åº¦ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ <code>answer</code> ï¼Œå…¶ä¸­ <code>answer[i]</code> æ˜¯æŒ‡å¯¹äºç¬¬ <code>i</code> å¤©ï¼Œä¸‹ä¸€ä¸ªæ›´é«˜æ¸©åº¦å‡ºç°åœ¨å‡ å¤©åã€‚å¦‚æœæ°”æ¸©åœ¨è¿™ä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨ <code>0</code> æ¥ä»£æ›¿ã€‚</p><p><strong>ç¤ºä¾‹ 1:</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥: temperatures = [73,74,75,71,69,72,76,73]<br>è¾“å‡º: [1,1,4,2,1,1,0,0]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2:</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥: temperatures = [30,40,50,60]<br>è¾“å‡º: [1,1,1,0]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 3:</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥: temperatures = [30,60,90]<br>è¾“å‡º: [1,1,0]<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= temperatures.length &lt;= 105</code></li><li><code>30 &lt;= temperatures[i] &lt;= 100</code></li></ul><p><strong>é¢˜è§£æ€è·¯ï¼š</strong></p><p>è¯¥é¢˜è§£å†³æ–¹æ³•æ˜¯å•è°ƒæ ˆçš„æ€è·¯è¿›è¡Œï¼Œæ ˆé‡Œé¢éœ€è¦<strong>å­˜å‚¨å½“å‰çš„ä¸‹æ ‡</strong>ï¼ˆå¦‚æœéœ€è¦ä½¿ç”¨å¯¹åº”çš„å…ƒç´ ï¼Œç›´æ¥å°±å¯ä»¥è·å–ï¼‰ï¼Œä»–éœ€è¦å¯»æ‰¾çš„æ˜¯ä¸€ä¸ªæ¯”è‡ªå·±æ›´å¤§çš„æ•°å­—ä¹Ÿå°±æ˜¯å•è°ƒæ ˆé¡¶åˆ°æ ˆåº•å•è°ƒé€’å¢ï¼Œç®€å•çš„æ€è·¯å°±æ˜¯é¦–å…ˆè®©ä¸‹æ ‡ä¸º0çš„å…¥æ ˆï¼Œç„¶åè¿›è¡Œæ•°ç»„çš„éå†æ“åšï¼Œå½“å‡ºç°è¦åŠ å…¥çš„å…ƒç´ çš„å¤§å°å°äºæ ˆé¡¶å°±ç›´æ¥è¿›è¡Œå…¥æ ˆã€‚</p><p>ä½¿ç”¨å•è°ƒæ ˆä¸»è¦æœ‰ä¸‰ä¸ªåˆ¤æ–­æ¡ä»¶:</p><ol><li>å½“å‰çš„å…ƒç´ T[i]å°äºæ ˆé¡¶å…ƒç´ T[st.peek()]çš„å…ƒç´ </li><li>å½“å‰çš„å…ƒç´ T[i]ç­‰äºæ ˆé¡¶å…ƒç´ T[st.peek()]çš„å…ƒç´ </li><li>å½“å‰çš„å…ƒç´ T[i]å¤§äºæ ˆé¡¶å…ƒç´ T[st.peek()]çš„å…ƒç´ </li></ol><p>å¯¹äºå®ä¾‹ä¸€çš„åˆ†æ temperatures = [73,74,75,71,69,72,76,73]è¾“å‡º[1,1,4,2,1,1,0,0]</p><p>ç»“æœåˆ†æå¯ä»¥çŸ¥é“:</p><ul><li>é¦–å…ˆè®©ä¸‹æ ‡0å…¥æ ˆï¼Œæ¥ç€éå†æ•°ç»„ä¸‹æ ‡ä¸º1çš„å…ƒç´ ï¼Œå‘ç°è¯¥å…ƒç´ å¤§äºä¸‹æ ‡0çš„å…ƒç´ </li><li>è¯¥æ­¥éœ€è¦åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºéœ€è¦ä¸€ä¸ª<strong>whileå¾ªç¯</strong>ï¼ˆå¯èƒ½ä¼šå‡ºç°ä¸€ç§æƒ…å†µå°±æ˜¯åŠ å…¥çš„æ•°æ®è¿ç»­å¤§äºæ ˆå†…çš„å¤šä¸ªæ•°æ®æ‰€ä»¥è¯¥æ•°æ®å°±æ˜¯æ ˆå†…æ‰€æœ‰æ¯”ä»–å°çš„å…ƒç´ çš„ä¸‹ä¸€ä¸ªæœ€å¤§çš„å€¼ï¼Œæ‰€ä»¥åœ¨æ­¤æ“ä½œåï¼Œé‚£äº›å°äºè¯¥å…ƒç´ çš„ä¸‹æ ‡å…¨è¦å‡ºæ ˆï¼‰,å°†ç»“æœå­˜å…¥resæ•°ç»„ä¹Ÿå°±æ˜¯res[stack.peek()]=i-stack.peek()ï¼Œæ¥ç€è®©ä¸‹æ ‡0å‡ºæ ˆ</li><li>ä¸‹æ ‡0å‡ºæ ˆåå†è®©å½“å‰çš„ä¸‹æ ‡iå…¥æ ˆå°±å®Œæˆäº†ç¬¬ä¸€æ¬¡çš„ç»“æœå­˜å‚¨</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] dailyTemperatures(<span class="hljs-type">int</span>[] temperatures) {<br>    <span class="hljs-type">int</span> n=temperatures.length;<br>    <span class="hljs-type">int</span>[]res=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>    <span class="hljs-comment">//ç”¨æ¥è®°å½•å½“å‰çš„ä¸‹æ ‡</span><br>Deque&lt;Integer&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>stack.push(<span class="hljs-number">0</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;n;i++){<br><span class="hljs-keyword">if</span> (temperatures[i] &gt; temperatures[stack.peek()]) {<br><span class="hljs-comment">//å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºç©º</span><br><span class="hljs-keyword">while</span> (!stack.isEmpty() &amp;&amp; temperatures[i] &gt; temperatures[stack.peek()]) {<span class="hljs-comment">//å°†å½“å‰ç¬¦åˆçš„ä¸‹æ ‡å­˜å…¥åˆ°ç»“æœæ ˆä¸­å·§å¦™çš„åˆ©ç”¨äº†ä¸‹æ ‡è¿›è¡Œå–å€¼</span><br>res[stack.peek()] = i - stack.peek();<br>stack.pop();<br>}<br>}<br>stack.push(i);<br>}<br><span class="hljs-keyword">return</span> res;<br>}<br>}<br></code></pre></td></tr></tbody></table></figure><p>496 .<code>nums1</code> ä¸­æ•°å­— <code>x</code> çš„ <strong>ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ </strong> æ˜¯æŒ‡ <code>x</code> åœ¨ <code>nums2</code> ä¸­å¯¹åº”ä½ç½® <strong>å³ä¾§</strong> çš„ <strong>ç¬¬ä¸€ä¸ª</strong> æ¯” <code>x</code> å¤§çš„å…ƒç´ ã€‚</p><p>ç»™ä½ ä¸¤ä¸ª <strong>æ²¡æœ‰é‡å¤å…ƒç´ </strong> çš„æ•°ç»„ <code>nums1</code> å’Œ <code>nums2</code> ï¼Œä¸‹æ ‡ä» <strong>0</strong> å¼€å§‹è®¡æ•°ï¼Œå…¶ä¸­<code>nums1</code> æ˜¯ <code>nums2</code> çš„å­é›†ã€‚</p><p>å¯¹äºæ¯ä¸ª <code>0 &lt;= i &lt; nums1.length</code> ï¼Œæ‰¾å‡ºæ»¡è¶³ <code>nums1[i] == nums2[j]</code> çš„ä¸‹æ ‡ <code>j</code> ï¼Œå¹¶ä¸”åœ¨ <code>nums2</code> ç¡®å®š <code>nums2[j]</code> çš„ <strong>ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ </strong> ã€‚å¦‚æœä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œé‚£ä¹ˆæœ¬æ¬¡æŸ¥è¯¢çš„ç­”æ¡ˆæ˜¯ <code>-1</code> ã€‚</p><p>è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º <code>nums1.length</code> çš„æ•°ç»„ <code>ans</code> ä½œä¸ºç­”æ¡ˆï¼Œæ»¡è¶³ <code>ans[i]</code> æ˜¯å¦‚ä¸Šæ‰€è¿°çš„ <strong>ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ </strong> ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnums1 = [4,1,2], nums2 = [1,3,4,2].<br>è¾“å‡ºï¼š[-1,3,-1]<br>è§£é‡Šï¼šnums1 ä¸­æ¯ä¸ªå€¼çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ å¦‚ä¸‹æ‰€è¿°ï¼š<br>- 4 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,3,4,2]ã€‚ä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ -1 ã€‚<br>- 1 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,3,4,2]ã€‚ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ æ˜¯ 3 ã€‚<br>- 2 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,3,4,2]ã€‚ä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ -1 ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnums1 = [2,4], nums2 = [1,2,3,4].<br>è¾“å‡ºï¼š[3,-1]<br>è§£é‡Šï¼šnums1 ä¸­æ¯ä¸ªå€¼çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ å¦‚ä¸‹æ‰€è¿°ï¼š<br>- 2 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,2,3,4]ã€‚ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ æ˜¯ 3 ã€‚<br>- 4 ï¼Œç”¨åŠ ç²—æ–œä½“æ ‡è¯†ï¼Œnums2 = [1,2,3,4]ã€‚ä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ -1 ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= nums1.length &lt;= nums2.length &lt;= 1000</code></li><li><code>0 &lt;= nums1[i], nums2[i] &lt;= 104</code></li><li><code>nums1</code>å’Œ<code>nums2</code>ä¸­æ‰€æœ‰æ•´æ•° <strong>äº’ä¸ç›¸åŒ</strong></li><li><code>nums1</code> ä¸­çš„æ‰€æœ‰æ•´æ•°åŒæ ·å‡ºç°åœ¨ <code>nums2</code> ä¸­</li></ul><p><strong>è§£é¢˜å››è·¯:</strong></p><p>è¯¥é¢˜åˆ©ç”¨å•è°ƒæ ˆå¯ä»¥å®Œç¾çš„è§£å†³<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è¿™ä¸ªä¸åŒäºä¸Šä¸€é“é¢˜å°±æ˜¯ä»–æœ‰ä¸¤ä¸ªæ•°ç»„ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªå¯»æ‰¾ä¸‹æ ‡çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä»num1ä¸­å–ä¸€ä¸ªæ•°æ®æˆ‘ä»¬ä¸ä»…è¦<strong>è®°å½•å½“å‰æ•°æ®</strong>è¿˜è¦<strong>è®°å½•ä¸‹æ ‡</strong>æƒ³æƒ³ä¸ºä»€ä¹ˆï¼Ÿ</p><p>è§£ï¼šå½“ç„¶æ˜¯ä¸ºäº†å­˜æ”¾ç»“æœï¼Œå› ä¸ºæˆ‘ä»¬åˆ©ç”¨çš„æ˜¯å•è°ƒæ ˆæ¥å­˜æ”¾ä¸‹æ ‡ï¼Œå½“æˆ‘ä»¬æ‰¾æ‰“æ•°æ®å’Œå…¶ä¸‹ä¸€ä¸ªæœ€å¤§å…ƒç´ æ—¶éœ€è¦å°†è¿™ä¸ªæœ€å¤§å…ƒç´ å­˜æ”¾åˆ°ç»“æœä¸­ï¼Œæ¯”å¦‚é‚£<strong>ç¤ºä¾‹äºŒæ¥è¯´</strong>:</p><ul><li>é¦–å…ˆè®°å½•nums1ä¸­ç¬¬ä¸€ä¸ªæ•°æ®2çš„ä¿¡æ¯(2,0)</li><li>å¯¹äºç»“æœæ•°ç»„resæˆ‘ä»¬é¦–å…ˆå°†æ‰€æœ‰çš„å€¼èµ‹å€¼ä¸º-1</li><li>æ¥ç€åœ¨nums2ä¸­æ‰¾åˆ°å¯¹åº”çš„æ•°æ®ï¼Œå¹¶ä¸”æ‰¾åˆ°å…¶å³ä¾§ç¬¬ä¸€ä¸ªæ¯”ä»–å¤§çš„æ•°æ®ä¸º3</li><li>ç„¶åå°†æ•°æ®3å­˜å…¥ç»“æœres[0]ä¸­è¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„æ•ˆæœ</li></ul><p>ç„¶åé—®é¢˜æ¥äº†:ç”¨ä»€ä¹ˆæ¥å­˜å‚¨æ•°æ®å’Œä¸‹æ ‡ï¼Œè€Œä¸”è¿˜è¦èƒ½æ£€æµ‹åˆ°num2æ˜¯å¦åŒ…å«num1çš„æ•°æ®<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ˜¯ä¸æ˜¯æƒ³åˆ°äº†ï¼Œæ²¡é”™å°±æ˜¯mapå¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥åˆå›åˆ°äº†å•è°ƒæ ˆä¸­è€Œä¸”æ˜¯æ‰¾æœ€å¤§çš„å…ƒç´ æ‰€ä»¥å•è°ƒæ ˆä»å¤´åˆ°å°¾å•è°ƒé€’å¢ä¹Ÿå°±æ˜¯å½“ä¸€ä¸ªå…ƒç´ å…¥æ ˆæ—¶è€ƒè™‘ä»¥ä¸‹æƒ…å†µ:</p><ul><li>å½“æœŸéå†çš„å…ƒç´ T[i]å°äºæ ˆé¡¶T[peek()]å…ƒç´ ï¼Œå…¥æ ˆè¯¥å…ƒç´ çš„ä¸‹æ ‡i</li><li>å½“å‰éå†çš„å…ƒç´ T[i]ç­‰äºæ ˆé¡¶T[peek()]å…ƒç´ ï¼Œä¾ç„¶ç›´æ¥å…¥æ ˆï¼Œæˆ‘ä»¬è¦æ‰¾çš„æ˜¯å¤§äºè‡ªå·±çš„å…ƒç´ </li><li>å½“å‰éå†çš„å…ƒç´ T[i]å¤§äºæ ˆé¡¶T[peek()]å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°äº†ç¬¬ä¸€ä¸ªæ¯”è‡ªå·±å¤§çš„å…ƒç´ è¿™æ—¶å€™å°±è¦æ“ä½œäº†<ul><li>é¦–å…ˆåˆ¤æ–­è¯¥æ ˆé¡¶å…ƒç´ æ˜¯å¦åœ¨num1ä¸­å‡ºç°è¿‡å¦‚æœæ²¡æœ‰å‡ºç°åˆ™ä¸è¿›è¡Œæ“ä½œå¼€å§‹è¿›è¡Œä¸‹ä¸€ä¸ªå…ƒç´ çš„åˆ¤æ–­</li><li>å¦‚æœå‘ç°æ ˆé¡¶çš„å…ƒç´ åœ¨num1ä¸­å‡ºç°è¿‡è¿™æ˜¯å°±éœ€è¦è®°å½•è¿›è¡Œresçš„èµ‹å€¼æ“ä½œ</li></ul></li></ul><p>ä»¥ä¸Šå°±æ˜¯æ‰€æœ‰çš„è¯¦ç»†æ­¥éª¤ä»£ç å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] nextGreaterElement(<span class="hljs-type">int</span>[] nums1, <span class="hljs-type">int</span>[] nums2) {<br>        <span class="hljs-comment">//æ–¹æ³•äºŒå•è°ƒæ ˆè§£å†³</span><br><span class="hljs-type">int</span> n1=nums1.length;<br><span class="hljs-type">int</span> n2=nums2.length;<br>Map&lt;Integer, Integer&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br><span class="hljs-comment">//å­˜å…¥mapå®¹å™¨ä¸­ä¾¿äºå¿«é€Ÿçš„æŸ¥æ‰¾</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n1;i++){<br>map.put(nums1[i],i);<br>}<br><span class="hljs-type">int</span> []res=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n1];<br>Deque&lt;Integer&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br><span class="hljs-comment">//å…¨éƒ¨å¡«å……ä¸º-1å•è°ƒæ ˆçš„åº”ç”¨</span><br>Arrays.fill(res,-<span class="hljs-number">1</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n2;i++){<br><span class="hljs-keyword">while</span> (!stack.isEmpty()&amp;&amp;nums2[stack.peek()]&lt;nums2[i]){<br><span class="hljs-type">int</span> pre=nums2[stack.pop()];<br><span class="hljs-keyword">if</span> (map.containsKey(pre)){<br>                    <span class="hljs-comment">//å¾—åˆ°mapä¸­å­˜çš„ä¸‹æ ‡ç»™resç„¶åå°†å¯¹åº”ä½å€¼å­˜å…¥nums2ã€iã€‘</span><br>res[map.get(pre)]=nums2[i];<br>}<br>}<br>stack.push(i);<br>}<br><span class="hljs-keyword">return</span> res;<br>    }<br></code></pre></td></tr></tbody></table></figure><p>è¿˜æœ‰ä¸€ä¸ªéå¸¸æš´åŠ›çš„è§£æ³•åªä¸è¿‡æ—¶é—´å¤æ‚åº¦å¾ˆé«˜ï¼š</p><ul><li>å› ä¸ºæˆ‘ä»¬çŸ¥é“äº†nums1æ˜¯nums2çš„å­é›†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é¦–å…ˆæ ¹æ®num1çš„é•¿åº¦è¿›è¡Œä¸€æ¬¡å¾ªç¯</li><li>å†…å¾ªç¯é‡Œé¢ç”¨whileæˆ‘ä»¬é¦–å…ˆæ‰¾åˆ°ä¸å½“å‰nums1[i]ç›¸ç­‰çš„å…ƒç´ nums2[j]</li><li>å½“æ‰¾åˆ°çš„æ—¶å€™åœ¨è¿›è¡Œä¸€æ¬¡whileå¾ªç¯æ‰¾åˆ°nums2[j]&gt;nums1[i]çš„å…ƒç´ </li><li>å¯¹äºç»“æœå¤„ç†å¦‚æœä¸Šè¿°éƒ½æ²¡æ‰¾åˆ°çš„è¯æ˜¯ä¸æ˜¯jæ­£å¥½ç­‰äºæ•°ç»„nums2çš„é•¿åº¦å¦‚æœæ‰¾åˆ°ä¹Ÿå°±æ˜¯j&lt;=nums2.length-1</li></ul><p>æ‰€ä»¥æš´åŠ›è§£å†³çš„ä»£ç å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] nextGreaterElement(<span class="hljs-type">int</span>[] nums1, <span class="hljs-type">int</span>[] nums2) {<br><span class="hljs-type">int</span> n1=nums1.length;<br>    <span class="hljs-type">int</span> n2=nums2.length;<br><span class="hljs-type">int</span> res[]=<span class="hljs-keyword">new</span>  <span class="hljs-title class_">int</span>[n1];<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n1;i++){<br><span class="hljs-type">int</span> j=<span class="hljs-number">0</span>;<br>            <span class="hljs-comment">//æ‰¾åˆ°ç›¸åŒçš„å…ƒç´ </span><br><span class="hljs-keyword">while</span> (j&lt;n2&amp;&amp;nums2[j]!=nums1[i])j++;<br>            <span class="hljs-comment">//æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”å…¶å¤§çš„å…ƒç´ </span><br><span class="hljs-keyword">while</span> (j&lt;n2&amp;&amp;nums2[j]&lt;=nums1[i])j++;<br>res[i]=(j==n2)?-<span class="hljs-number">1</span>:nums2[j];<br>}<br><span class="hljs-keyword">return</span> res;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>503.ç»™å®šä¸€ä¸ªå¾ªç¯æ•°ç»„ <code>nums</code> ï¼ˆ <code>nums[nums.length - 1]</code> çš„ä¸‹ä¸€ä¸ªå…ƒç´ æ˜¯ <code>nums[0]</code> ï¼‰ï¼Œè¿”å› <em><code>nums</code> ä¸­æ¯ä¸ªå…ƒç´ çš„ <strong>ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ </strong></em> ã€‚</p><p>æ•°å­— <code>x</code> çš„ <strong>ä¸‹ä¸€ä¸ªæ›´å¤§çš„å…ƒç´ </strong> æ˜¯æŒ‰æ•°ç»„éå†é¡ºåºï¼Œè¿™ä¸ªæ•°å­—ä¹‹åçš„ç¬¬ä¸€ä¸ªæ¯”å®ƒæ›´å¤§çš„æ•°ï¼Œè¿™æ„å‘³ç€ä½ åº”è¯¥å¾ªç¯åœ°æœç´¢å®ƒçš„ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¾“å‡º <code>-1</code> ã€‚</p><p><strong>ç¤ºä¾‹ 1:</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥: nums = [1,2,1]<br>è¾“å‡º: [2,-1,2]<br>è§£é‡Š: ç¬¬ä¸€ä¸ª 1 çš„ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°æ˜¯ 2ï¼›<br>æ•°å­— 2 æ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°ï¼› <br>ç¬¬äºŒä¸ª 1 çš„ä¸‹ä¸€ä¸ªæœ€å¤§çš„æ•°éœ€è¦å¾ªç¯æœç´¢ï¼Œç»“æœä¹Ÿæ˜¯ 2ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2:</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥: nums = [1,2,3,4,3]<br>è¾“å‡º: [2,3,4,-1,4]<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤º:</strong></p><ul><li><code>1 &lt;= nums.length &lt;= 104</code></li><li><code>-109 &lt;= nums[i] &lt;= 109</code></li></ul><p><strong>é¢˜ç›®è§£æï¼š</strong></p><p>è¿™é“é¢˜ç›®å¾ˆæœ‰æ„æ€å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥å¾ªç¯çš„æŸ¥æ‰¾<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ‰€ä»¥éš¾åº¦çš„ä¸Šæ¥äº†ï¼Œå…¶å®ä¹Ÿä¸éš¾ç±»æ¯”äºä¸Šé¢ä¸¤é“é¢˜ï¼Œè„‘å­é‡Œæƒ³çš„è‚¯å®šæœ‰ä¸¤ç§ç­–ç•¥:</p><ul><li>ç¬¬ä¸€ç§å°±æ˜¯æˆ‘æŠŠnumsçš„å¤§å°æ‰©å……ä¸¤å€ä¹Ÿå°±æ˜¯ä¾‹å¦‚nums=[1,2,1]æ‰©å……ä¸ºnewNums=[1,2,1,1,2,1]ï¼Œæƒ³æ³•å¾ˆå¥½ä¹Ÿèƒ½å®ç°ï¼Œä½†æ˜¯å®ƒçš„ç©ºé—´æœ‰å¢å¤§äº†</li><li>ç¬¬äºŒç§<span class="github-emoji"><span>ğŸ˜¼</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f63c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è¿™ä¸ªå°±éœ€è¦ä¸€ç‚¹æŠ€å·§äº†å“ˆå“ˆå“ˆï¼Œå’±ç›´æ¥æŠŠè¿™ä¸ªæ•°ç»„éå†ä¸¤è¾¹ä¸å°±è¡Œäº†è›®ï¼Œä¹Ÿå°±æ˜¯æ­£å¸¸çš„ ï¼ˆ0%3ï¼‰ ï¼ˆ1%3ï¼‰ ï¼ˆ2%3ï¼‰ (3%3)ã€(4%3)ã€ï¼ˆ5%3ï¼‰è¿™ä¸å°±éå†äº†ä¸¤éäº†ï¼Œç›¸å½“äºæ•°ç»„çš„å¤åˆ¶ä¸¤éï¼Œè¿™æ ·æ€è·¯æ˜¯ä¸æ˜¯æ¸…æ™°è®¸å¤šäº†<span class="github-emoji"><span>ğŸ˜¸</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f638.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></li></ul><p>ç„¶åå…·ä½“çš„æ€è·¯è§£æåœ¨è¯´ä¸€é</p><ul><li>é¦–å…ˆå®šä¹‰resæ•°ç»„çœ‹çœ‹ä¸ç¬¦åˆè¦æ±‚çš„ç½®ä½-1ï¼Œæ‰€ä»¥å…¨éƒ¨å¡«å……ä¸º-1ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªæ ˆç”¨äºå•è°ƒæ ˆçš„å­˜å…¥æ•°æ®</li><li>å¯¹äºä¸€ä¸ªforå¾ªç¯éå†é•¿åº¦ä¸º2*nums.lengthç„¶åå°±æ­£å¸¸çš„è¿›è¡Œæ¯”è¾ƒå°±å¯ä»¥</li></ul><p>å…·ä½“ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] nextGreaterElements(<span class="hljs-type">int</span>[] nums) {<br>        <span class="hljs-type">int</span> n=nums.length();<br>        <span class="hljs-type">int</span> res[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-comment">//å¡«å……resæ•°ç»„ä¸º-1</span><br>        Arrays.fill(nums,-<span class="hljs-number">1</span>);<br>        Deque&lt;Integer&gt;stack=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>();<br>        <span class="hljs-comment">//ä¸€ä¸ªforå¾ªç¯éå†ä¸¤énums</span><br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">2</span>*n;i++){<br>            <span class="hljs-type">int</span> index=i%n;<br>            <span class="hljs-keyword">if</span>(!stack.isEmpty()&amp;&amp;nums[stack.peek()]&lt;nums[index]){<br>                res[stack.pop()]=nums[index];<br>            }<br>            stack.push(i);<br>        }<br>        <br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>42.ç»™å®š <code>n</code> ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º <code>1</code> çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303210906502.png" alt="img"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]<br>è¾“å‡ºï¼š6<br>è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚ <br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šheight = [4,2,0,3,2,5]<br>è¾“å‡ºï¼š9<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>n == height.length</code></li><li><code>1 &lt;= n &lt;= 2 * 104</code></li><li><code>0 &lt;= height[i] &lt;= 105</code></li></ul><p><strong>é¢˜è§£æ€è·¯:</strong></p><ol><li>å…ˆè¯´è¯´<strong>æš´åŠ›</strong>çš„è§£æ³•ï¼Œå¾ˆå®¹æ˜“æƒ³çš„ç­–ç•¥ï¼šå°±æ˜¯å¯¹æ¯ä¸ªæŸ±å­è¿›è¡Œåˆ†æçœ‹ï¼ˆæ’é™¤ç¬¬ä¸€æ ¹å’Œæœ€åä¸€æ ¹å…¶ä¸Šé¢ä¸å­˜æ°´ï¼‰æ¯”å¦‚æˆ‘ä»¬æ‰¾åˆ°äº†ç¬¬3æ ¹æŸ±å­ï¼Œæˆ‘ä»¬ä»æ­¤å¼€å§‹è¿›è¡Œå¾€å…¶<strong>å·¦ä¾§</strong>å¯»æ‰¾æœ€é«˜çš„æŸ±å­è®°ä¸ºLHeight=2,ä¸‹æ ‡ä¸º2ï¼Œç„¶ååœ¨ä»å…¶å³ä¾§æ‰¾åˆ°æœ€é«˜çš„æŸ±å­è®°ä¸ºRHeigit=3ï¼Œä¸‹æ ‡ä¸º6ï¼Œå…¶å®è¿™é‡Œçš„ä¸‹æ ‡ä¹Ÿå°±ä¸é‚£ä¹ˆé‡è¦äº†ï¼Œè§‚å¯Ÿå¯ä»¥å‘ç°æŸ±å­3çš„ä¸Šé¢æœ‰ä¸€ä¸ªæ°´æ ¼å­é‚£ä¹ˆè¿™æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿæˆ‘ä»¬å¾—åˆ°äº†ä¸¤ä¸ªé«˜åº¦ï¼Œæ ¹æ®æœ¨æ¡¶ç†è®º<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>çè¯´çš„å°±æ˜¯å»è¿™ä¿©æœ€çŸ­çš„é‚£ä¸ªä¹Ÿå°±æ˜¯2ï¼Œç„¶åå†å‡å»å½“å‰æŸ±å­çš„é«˜åº¦nums[i]å°±å¯ä»¥å¾—å‡ºé›¨æ°´çš„é«˜åº¦ï¼Œä½ åœ¨è¯•è¯•æŸ±å­å››å¯ä»¥å¾—å‡ºå…¶é«˜åº¦ä¸º2,æ‰€ä»¥ä¸€åˆ‡éƒ½æ˜æ™°äº†,è¯¦ç»†ä»£ç å¦‚ä¸‹:</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>      <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">trap</span><span class="hljs-params">(<span class="hljs-type">int</span>[] height)</span> {<br>   <span class="hljs-comment">//æš´åŠ›è§£æ³•</span><br>          <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> height.length;<br>          <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>          <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) {<br>              <span class="hljs-comment">//ç¬¬ä¸€ä¸ªæŸ±å­å’Œæœ€åä¸€ä¸ªæŸ±å­ä¸æ¥æ°´</span><br>              <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span> || i == n - <span class="hljs-number">1</span>) {<br>                  <span class="hljs-keyword">continue</span>;<br>              }<br>              <span class="hljs-comment">//åˆ†åˆ«è®°å½•ç¬¬iä¸ªæŸ±å­å·¦ä¾§å’Œå³ä¾§æœ€é«˜çš„æŸ±å­</span><br>              <span class="hljs-type">int</span> <span class="hljs-variable">rHeight</span> <span class="hljs-operator">=</span> height[i];<br>              <span class="hljs-type">int</span> <span class="hljs-variable">lHeight</span> <span class="hljs-operator">=</span> height[i];<br>              <span class="hljs-comment">//è®°å½•å…¶å·¦ä¾§</span><br>              <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i - <span class="hljs-number">1</span>; j &gt;= <span class="hljs-number">0</span>; j--) {<br>                  <span class="hljs-keyword">if</span> (height[j] &gt; lHeight) lHeight = height[j];<br>              }<br>              <span class="hljs-comment">//è®°å½•å…¶å³ä¾§å‘ç°æ¯”ä»–å¤§çš„ç›´æ¥æ›´æ–°</span><br>              <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>; j &lt; n; j++) {<br>                  <span class="hljs-keyword">if</span> (height[j] &gt; rHeight) rHeight = height[j];<br>              }<br>              <span class="hljs-comment">//å–ä¸¤ä¸ªæŸ±å­çš„æœ€å°å€¼ï¼Œç„¶åå†å‡å»å½“å‰æŸ±å­æ‰€å çš„é«˜åº¦å°±æ˜¯é›¨æ°´çš„é«˜åº¦</span><br>              <span class="hljs-type">int</span> <span class="hljs-variable">h</span> <span class="hljs-operator">=</span> Math.min(lHeight, rHeight) - height[i];<br>              <span class="hljs-comment">//è¿™é‡Œéœ€è¦å¯¹è®¡ç®—çš„é«˜åº¦è¿›è¡Œä¸€ä¸ªåˆ¤æ–­å› ä¸ºå½“å…¶ä¸ºæœ€é«˜çš„æ—¶å€™ä¼šå‡ºç°è´Ÿå€¼</span><br>              <span class="hljs-keyword">if</span> (h &gt; <span class="hljs-number">0</span>) {<br>                  sum += h;<br>              }<br>          }<br>          <span class="hljs-keyword">return</span> sum;<br>      }<br>}<br></code></pre></td></tr></tbody></table></figure><ol><li><p><strong>åŒæŒ‡é’ˆè§£æ³•</strong>ä¸Šé¢çš„æ€è·¯å…¶æ—¶æ—¶è¶…æ—¶å› ä¸ºå®ƒæ¯æ ¹æŸ±å­éƒ½è¦å¾€å·¦å¾€å³è¿›è¡Œéå†å¢åŠ äº†ä¸å¿…è¦çš„å¾ªç¯ï¼Œæ‰€ä»¥æˆ‘ä»¬æ˜¯ä¸æ˜¯æœ‰åˆæœ‰äº†ä¸€ä¸ªidea<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å…¶å®æ²¡æœ‰å“ˆå“ˆç®€å•æä¸€ä¸‹å°±æ˜¯å¯ä»¥ç”¨åŒæŒ‡é’ˆï¼Œæ ¹æ®ä¸Šåˆ°é¢˜ç›®çš„çµæ„Ÿï¼Œä»–è¦æ¯æ ¹æŸ±å­çš„å·¦ä¾§æœ€é«˜å’Œå³ä¾§æœ€é«˜æ˜¯å§ï¼Œæˆ‘ä»¬å°±è®°å½•å·¦ä¾§å’Œå³ä¾§æœ€é«˜ä¸å°±è¡Œäº†å—,äºæ˜¯ä¸€ä¸ªç®—æ³•æµ®ç°å‡ºæ¥:</p><ul><li>é¦–å…ˆå®šä¹‰ä¸¤ä¸ªæ•°ç»„å°±æ˜¯maxLHeightå’ŒmaxRHeightè®°å½•æ¯ä¸ªä¸‹æ ‡çš„å·¦ä¾§å’Œå³ä¾§çš„æœ€é«˜æŸ±å­</li><li>è®°å½•å®Œæˆåå°±å¯ä»¥è¿›è¡Œæ±‚å’Œè¿ç®—äº†ï¼Œè®°ä½éœ€è¦æ’é™¤ç¬¬ä¸€æ ¹å’Œæœ€åä¸€æ ¹(ä»–ä»¬ä¸å­˜æ°´çš„<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>)</li><li>è®¡ç®—ç»“æœå’Œæš´åŠ›æ±‚è§£ä¸€æ ·ä¹Ÿæ˜¯å–min(maxLHeight,maxRHeight)-height[i]</li></ul><p>ä»£ç å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java">   <br> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>     <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">trap</span><span class="hljs-params">(<span class="hljs-type">int</span>[] height)</span> { <br><span class="hljs-comment">//åŒæŒ‡é’ˆè§£æ³•</span><br>         <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> height.length;<br>         <span class="hljs-keyword">if</span> (height.length &lt;= <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>         <span class="hljs-type">int</span>[] maxLHeight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>         <span class="hljs-type">int</span>[] maxRHeight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>         <span class="hljs-comment">//è®°å½•å·¦ä¾§çš„æœ€å¤§é«˜åº¦å› ä¸ºç¬¬ä¸€æ ¹æŸ±å­ä¸è€ƒè™‘ï¼Œä½†æ˜¯éœ€è¦å‚ä¸æ¯”è¾ƒ</span><br>         maxLHeight[<span class="hljs-number">0</span>] = height[<span class="hljs-number">0</span>];<br>         <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; n - <span class="hljs-number">1</span>; i++) {<br>             maxLHeight[i] = Math.max(maxLHeight[i - <span class="hljs-number">1</span>], height[i]);<br>         }<br>         <span class="hljs-comment">//è®°å½•å³ä¾§çš„æœ€å¤§é«˜åº¦</span><br>         maxRHeight[n - <span class="hljs-number">1</span>] = height[n - <span class="hljs-number">1</span>];<br>         <span class="hljs-comment">//æ‰¾å‡ºæ¯ä¸ªä¸‹æ ‡å†å³ä¾§çš„æœ€å¤§å€¼</span><br>         <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> n - <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; i--) {<br>             maxRHeight[i] = Math.max(maxRHeight[i + <span class="hljs-number">1</span>], height[i]);<br>         }<br>   <br>         <span class="hljs-comment">//ç„¶åè¿›è¡Œæ±‚å’Œè¿ç®—</span><br>         <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>         <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; n - <span class="hljs-number">1</span>; i++) {<br>             <span class="hljs-type">int</span> <span class="hljs-variable">h</span> <span class="hljs-operator">=</span> Math.min(maxLHeight[i], maxRHeight[i]) - height[i];<br>             <span class="hljs-keyword">if</span> (h &gt; <span class="hljs-number">0</span>) {<br>                 sum += h;<br>             }<br>         }<br>         <span class="hljs-keyword">return</span> sum;<br>     }<br> }<br></code></pre></td></tr></tbody></table></figure><ol><li><strong>å•è°ƒæ ˆè§£æ³•:</strong>æœ‰äº†ä¸Šé¢çš„ä¸¤ç§æ€è·¯ï¼Œä½†æ˜¯æˆ‘ä»¬å¦‚ä½•å’Œå•è°ƒæ ˆè”ç³»åˆ°ä¸€èµ·å‘¢?æ—¢ç„¶ä¹Ÿæ˜¯æ±‚å·¦ä¾§å’Œå³ä¾§çš„æœ€å¤§å€¼ï¼Œå¯ä¸å¯ä»¥ä¹Ÿç”¨å•è°ƒæ ˆè¿›è¡Œæ±‚è§£å…¶å®ä¹Ÿæ˜¯å¯ä»¥çš„å¯èƒ½æ•ˆæœä¸å¦‚åŒæŒ‡é’ˆæ³•ï¼Œä¸Šé¢çš„ä¸¤ç§éƒ½æ˜¯æŒ‰ç…§<strong>åˆ—</strong>è¿›è¡Œæ±‚é›¨æ°´ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªæŸ±å­ä¸Šçš„é›¨æ°´ï¼Œå½“æˆ‘ä»¬åˆ©ç”¨å•è°ƒæ ˆçš„è¯ï¼Œå°±éœ€è¦æŒ‰ç…§è¡Œæ¥æ±‚:å¦‚ä¸‹å›¾</li></ol></li></ol><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303210937762.png" alt=""></p><p>é‚£ä¹ˆæ¥è€ƒè™‘ä¸€ä¸‹å•è°ƒæ ˆä»æ ˆé¡¶åˆ°æ ˆåº•æ˜¯<strong>é€’å¢</strong>çš„è¿˜æ˜¯<strong>é€’å‡</strong>çš„ï¼Ÿå°±æ‹¿ä¸Šå›¾æ¥è¯´å¯¹äºæŸ±å­3ï¼ŒæŸ±å­äºŒå…¥æ ˆåä»–ä¹Ÿéœ€è¦å…¥æ ˆï¼Œç›´è‡³æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºå®ƒçš„æŸ±å­ï¼Œç„¶åå°±å¼€å§‹è®¡ç®—ï¼Œæ‰€ä»¥å¾ˆæ˜æ˜¾è¿™æ˜¯ä¸ªä»æ ˆé¡¶åˆ°æ ˆåº•é€’å¢çš„æ ˆï¼Œé‚£ä¹ˆç»§ç»­å…¥æ ˆä¼šå‡ºç°ä»¥ä¸‹ä¸‰ç§æƒ…å†µ:</p><ul><li>å½“å‰éå†çš„å…ƒç´ é«˜åº¦å°äºæ ˆé¡¶å…ƒç´ çš„é«˜åº¦height[i]&lt;height[stack.peek()]ï¼Œæ‰§è¡Œå…¥æ ˆæ“ä½œ</li><li>å½“å‰éå†çš„å…ƒç´ é«˜åº¦ç­‰äºæ ˆé¡¶å…ƒç´ çš„é«˜åº¦height[i]=height[stack.peek()]ï¼Œæ‰§è¡Œæ›´æ–°æ“ä½œ,ä¹Ÿå°±æ˜¯å½“å‰çš„è®°å½•çš„æ ˆé¡¶å‡ºæ ˆï¼Œæ–°çš„æ ˆé¡¶å…¥æ ˆï¼Œå› ä¸ºä¸¤æ ¹æŸ±å­å¹¶åˆ—ï¼Œå¯¹äºæˆ‘ä»¬æ¥æ±‚è§£é›¨æ°´æ—¶ä¸€å®šæ˜¯ç”¨é å³è¾¹çš„æŸ±å­è¿›è¡Œè®¡ç®—çš„:</li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303210944404.png" alt="image-20230321094450216"></p><ul><li>å½“å‰éå†çš„å…ƒç´ é«˜åº¦å¤§äºæ ˆé¡¶å…ƒç´ çš„é«˜åº¦height[i]&gt;height[stack.peek()]ï¼Œåˆ°å…³é”®ç‚¹äº†è¿™é‡Œå‡ºç°äº†å‡¹æ§½ï¼Œé¦–å…ˆè®°å½•å½“å‰æ ˆé¡¶å…ƒç´ (ä¹Ÿå°±æ˜¯ç›¸å¯¹çš„ä¸‹æ ‡)åŒæ—¶ä¹Ÿè¦å‡ºæ ˆ,æ­¤æ—¶æ ˆé¡¶è®°å½•çš„å°±æ˜¯å½“å‰ä¸‹æ ‡ä¸ºmidçš„å·¦ä¾§ç¬¬ä¸€ä¸ªæ¯”ä»–é«˜çš„ï¼Œéå†çš„height[i]æ˜¯midä¸‹æ ‡å³ä¾§ç¬¬ä¸€ä¸ªæ¯”ä»–é«˜çš„å…ƒç´ :é‚£ä¹ˆè®¡ç®—æ–¹å¼:<ul><li>é¦–å…ˆå¾—åˆ°å…¶é«˜åº¦ä¹Ÿå°±æ˜¯h=min(height[stack.peek()],height[i])-height[mid] :ä¾‹å¦‚å¯¹äºæŸ±å­4çš„é«˜åº¦ä¸º h=min(1,1)-0=1</li><li>æ¥ç€å¾—åˆ°å…¶å®½åº¦ä¹Ÿå°±æ˜¯ä»–ä»¬çš„ä¸‹æ ‡è¿›è¡Œç›¸å‡ w=i-stack.peek()-1                    :æŸ±å­4çš„å®½åº¦ä¸ºw=5-3-1=1</li><li>æ¥ç€è®¡ç®—é›¨æ°´çš„é‡ä¸º sum=w*h</li></ul></li></ul><p>åŸºæœ¬æ€è·¯å¦‚ä¸Šæ‰€ç¤ºä»£ç çš„å®ç°:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">trap</span><span class="hljs-params">(<span class="hljs-type">int</span>[] height)</span> {  <br><span class="hljs-comment">//å•è°ƒæ ˆè§£å†³æ–¹æ³•</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> height.length;<br>        <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        Deque&lt;Integer&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>        stack.push(<span class="hljs-number">0</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; n; i++) {<br>            <span class="hljs-comment">//å°äºçš„æƒ…å†µ</span><br>            <span class="hljs-keyword">if</span> (height[i] &lt; height[stack.peek()]) {<br>                stack.push(i);<br>             <span class="hljs-comment">//ç›¸ç­‰çš„æƒ…å†µ</span><br>            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (height[i] == height[stack.peek()]) {<br>                stack.pop();<br>                stack.push(i);<br>             <span class="hljs-comment">//å¤§äºçš„æƒ…å†µ</span><br>            } <span class="hljs-keyword">else</span> {<br>                <span class="hljs-keyword">while</span> (!stack.isEmpty() &amp;&amp; height[i] &gt; height[stack.peek()]) {<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> stack.pop();<br>                    <span class="hljs-comment">//è¿™é‡Œå¾ˆå…³é”®ï¼Œå½“å‡ºå»ä¸€ä¸ªå…ƒç´ åï¼Œå¿…é¡»è¦ä¿è¯æ ˆä¸­æœ‰å…ƒç´ æ‰èƒ½æ‹¿åˆ°peekçš„å€¼</span><br>                    <span class="hljs-keyword">if</span> (!stack.isEmpty()) {<br>                        <span class="hljs-type">int</span> <span class="hljs-variable">h</span> <span class="hljs-operator">=</span> Math.min(height[stack.peek()], height[i]) - height[mid];<br>                        <span class="hljs-type">int</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> i - stack.peek() - <span class="hljs-number">1</span>;<br>                        sum += h * w;<br>                    }<br>                }<br>            }<br>            stack.push(i);<br>        }<br>        <span class="hljs-keyword">return</span> sum;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><ol><li>ç»™å®š <em>n</em> ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚</li></ol><p>æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚</p><p><strong>ç¤ºä¾‹ 1:</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303211000945.jpeg" alt="img"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šheights = [2,1,5,6,2,3]<br>è¾“å‡ºï¼š10<br>è§£é‡Šï¼šæœ€å¤§çš„çŸ©å½¢ä¸ºå›¾ä¸­çº¢è‰²åŒºåŸŸï¼Œé¢ç§¯ä¸º 10<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303211000935.jpeg" alt="img"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼š heights = [2,4]<br>è¾“å‡ºï¼š 4<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= heights.length &lt;=105</code></li><li><code>0 &lt;= heights[i] &lt;= 104</code></li></ul><p><strong>é¢˜ç›®è§£æ:</strong></p><ol><li>ç¬¬ä¸€ç§<strong>æš´åŠ›è§£æ³•</strong>ï¼Œ<strong>è¶…æ—¶</strong>ä½†æ˜¯æ€è·¯ç®€å•ï¼Œé¦–å…ˆå¯¹äºæ¯ä¸ªæŸ±å­é€ä¸€è¿›è¡Œè€ƒè™‘ï¼Œéå†æ¯æ ¹æŸ±å­çš„å·¦ä¾§å’Œå³ä¾§ï¼Œåˆ†åˆ«æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”ä»–å°çš„å…ƒç´ ï¼Œç„¶åæ±‚å‡ºå…¶å®½åº¦å’Œé«˜åº¦è¿›è¡Œä¹˜ç§¯è®¡ç®—ã€‚ä¸¾ä¸ª<span class="github-emoji"><span>ğŸŒ°</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f330.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å¯¹äºå…ƒç´ 2æ¥è¯´å…¶å·¦è¾¹æ¯”ä»–å°çš„ä¸‹æ ‡ä¸º-1ï¼Œå³è¾¹æ¯”èµ·å°çš„ä¸‹æ ‡ä¸º1æ‰€ä»¥å®ƒçš„å®½åº¦ä¸ºright-left-1ä¹Ÿå°±æ˜¯1ä»–è‡ªå·±çš„å®½åº¦ï¼Œé«˜åº¦ä¸ºå®ƒæœ¬èº«2å¯ä»¥è®¡ç®—ç¬¬ä¸€ä¸ªç»“æœä¸º2</li></ol><p>â€‹        æ¥ç€æˆ‘ä»¬åˆ°ç¬¬äºŒä¸ªå…ƒç´ 1ï¼Œé¦–å…ˆæ‰¾å·¦ä¾§æœ€å°å’Œå³ä¾§æœ€å°ä¸‹æ ‡åˆ†åˆ«-1å’Œ6ï¼Œè®¡ç®—å…¶å®½åº¦ä¸º6ï¼Œé«˜åº¦ä¸º1ï¼Œæ‰€ä»¥æ€»çš„æœ€å¤§é¢ç§¯ä¸º6æ›´ç»†æœ€å¤§å€¼</p><p>â€‹        æ¥ç€æˆ‘ä»¬åˆ°ç¬¬ä¸‰ä¸ªå…ƒç´ 5ï¼Œé¦–å…ˆæ‰¾åˆ°å·¦ä¾§å’Œå³ä¾§æœ€å°ä¸‹æ ‡åˆ†åˆ«ä¸º1å’Œ4ï¼Œjè®¡ç®—å…¶å®½åº¦ä¸º4-1-1=2ï¼Œé«˜åº¦ä¸º5æ‰€ä»¥å®ƒçš„æœ€å¤§å€¼ä¸º5*2=10</p><p>é€šè¿‡ä¸Šé¢æµç¨‹é€ä¸€åˆ¤æ–­å°±å¯ä»¥å¾—åˆ°ç›¸åº”çš„ç»“æœä½†æ˜¯æµ‹è¯•çš„<strong>ç»“æœè¶…æ—¶</strong>ï¼šä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤º</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>     <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">largestRectangleArea</span><span class="hljs-params">(<span class="hljs-type">int</span>[] heights)</span> {  <br><span class="hljs-comment">//æš´åŠ›è§£æ³•</span><br>         <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> heights.length;<br>         <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>         <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) {<br>             <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> i;<br>             <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> i;<br>             <span class="hljs-keyword">for</span> (; left &gt;= <span class="hljs-number">0</span>; left--) {<br>                 <span class="hljs-keyword">if</span> (heights[left] &lt; heights[i]) <span class="hljs-keyword">break</span>;<br>             }<br>             <span class="hljs-keyword">for</span> (; right &lt; n; right++) {<br>                 <span class="hljs-keyword">if</span> (heights[right] &lt; heights[i]) <span class="hljs-keyword">break</span>;<br>             }<br>             <span class="hljs-type">int</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> right - left - <span class="hljs-number">1</span>;<br>             <span class="hljs-type">int</span> <span class="hljs-variable">h</span> <span class="hljs-operator">=</span> heights[i];<br>             sum = Math.max(sum, w * h);<br>         }<br>         <span class="hljs-keyword">return</span> sum;<br>     }<br> }<br></code></pre></td></tr></tbody></table></figure><ol><li>ç¬¬äºŒç§è§£æ³•<strong>åŒæŒ‡é’ˆè§£æ³•</strong>ï¼šè¯¥é¢˜æˆ‘ä»¬å’Œé›¨æ°´é¢˜ä¸åŒï¼Œé›¨æ°´é¢˜æ‰¾çš„æ˜¯ä¸¤ä¾§ç¬¬ä¸€ä¸ªæ¯”ä»–å¤§çš„å…ƒç´ ï¼Œè€Œæœ¬é¢˜éœ€è¦æ‰¾ä¸¤ä¾§æ¯”ä»–å°çš„å…ƒç´ ä¸‹æ ‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ ¹æ®ä»¥ä¸‹æµç¨‹æ¥è¿›è¡Œæ±‚è§£åˆ†æï¼š<ul><li>é¦–å…ˆéœ€è¦ä¸¤ä¸ªé•¿åº¦ä¸ºnçš„æ•°ç»„minLeftIndexå’ŒminRightIndexæ¥è®°å½•ç¬¬iä¸ªä¸‹æ ‡çš„å·¦ä¾§å’Œå³ä¾§ç¬¬ä¸€æ¬¡å‡ºç°æ¯”height[i]å°çš„å…ƒç´ ä¸‹æ ‡</li><li>è®°å½•å®Œæˆåå°±è¿›è¡Œä¸€æ¬¡forå¾ªç¯æ±‚å’Œsum=heights[i]*(minRightIndex[i]-minLeftIndex[i]-1)å¾—å‡ºæœ€å¤§çš„å€¼</li></ul></li></ol><p>çœ‹ç€å¾ˆç®€å•æ˜¯ä¸?<span class="github-emoji"><span>ğŸ˜¼</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f63c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>nonoé‡ç‚¹æ˜¯åœ¨é‚£ä¸ªä¸‹æ ‡çš„æ±‚è§£å¾ˆå¤šå‘çš„~~æˆ‘ä»¬æ¥åˆ†æä¸€æ³¢æ±‚å…¶ä¸‹æ ‡:</p><ul><li>æ±‚å·¦ä¾§çš„æœ€å°ä¸‹æ ‡ä¸ºäº†é¿å…æ­»å¾ªç¯ï¼Œä¹Ÿå°±æ˜¯å’Œæš´åŠ›æ±‚è§£ä¸€æ ·ï¼Œç¬¬ä¸€æ ¹æŸ±å­çš„æœ€å·¦ä¾§çš„ä¸‹æ ‡ä¸€å®šæ˜¯-1ï¼ŒçŸ¥é“è¿™ä¸ªå°±ç®€å•äº†</li><li>ç¬¬ä¸€æ ¹æŸ±å­å·²ç»è€ƒè™‘äº†é‚£ä¹ˆå°±ä»ç¬¬äºŒæ ¹ä¸‹æ ‡ä¸º1å¼€å§‹è¿›è¡Œéå†ï¼Œæ€è·¯æ˜¯è¿™ä¸ªï¼šå½“ä»ç¬¬iæ ¹å¼€å§‹æ—¶æˆ‘ä»¬çŸ¥é“äº†ç¬¬i-1æ ¹æŸ±å­æœ€å·¦ä¾§çš„æœ€å°ä¸‹æ ‡ï¼Œé‚£ä¹ˆæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µ<ul><li>ç¬¬iæ ¹æŸ±å­é«˜åº¦å°äºç­‰äºç¬¬i-1æ ¹æŸ±å­çš„é«˜åº¦ï¼šé‚£ä¹ˆå°±ç»§ç»­æ‰¾ï¼Œé¦–å…ˆå¾—åˆ°ç¬¬i-1æ ¹æŸ±å­å…¶å·¦ä¾§çš„æœ€å°ä¸‹æ ‡ï¼Œåœ¨è¿›è¡Œæ¯”è¾ƒç›´è‡³æ¯”è¾ƒè¶…å‡ºè¾¹ç•Œï¼ˆè¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒå¿«çš„å› ä¸ºæ ¹æ®ä¸‹æ ‡æœ‰è·³è·ƒå¼çš„æ¯”è¾ƒï¼‰</li><li>ç¬¬iæ ¹æŸ±å­é«˜åº¦å¤§äºç¬¬i-1æ ¹æŸ±å­çš„é«˜åº¦ï¼šè¯´æ˜å½“å‰ç¬¬iæ ¹æŸ±å­çš„å·¦ä¾§ç¬¬ä¸€æ ¹æ¯”ä»–å°çš„ä¸‹æ ‡ä¸ºi-1ç›´æ¥è¿›è¡Œè®°å½•å³å¯</li></ul></li><li>åŒç†æ±‚å…¶å³ä¾§çš„æœ€å°ä¸‹æ ‡ï¼Œåªä¸è¿‡åˆå§‹åŒ–çš„æ—¶å€™ä»¤minRightIndex[n-1]=nï¼Œå€’å™è¿›è¡Œæ±‚è§£</li></ul><p>æ‰€ä»¥æ€»ä½“çš„ä»£ç å®ç°æ•ˆæœå¦‚ä¸‹:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">largestRectangleArea</span><span class="hljs-params">(<span class="hljs-type">int</span>[] heights)</span> {<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> heights.length;<br>        <span class="hljs-type">int</span>[] minLeftIndex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-type">int</span>[] minRightIndex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        minLeftIndex[<span class="hljs-number">0</span>] = -<span class="hljs-number">1</span>;<span class="hljs-comment">//å¯ä»¥é¿å…æ­»å¾ªç¯</span><br>        <span class="hljs-comment">//è®°å½•æ¯ä¸ªæŸ±å­ï¼Œå·¦è¾¹ç¬¬ä¸€ä¸ªå°äºè¯¥æŸ±å­çš„ä¸‹æ ‡</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; n; i++) {<br>            <span class="hljs-type">int</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> i - <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">while</span> (t &gt;= <span class="hljs-number">0</span> &amp;&amp; heights[t] &gt;= heights[i]) {<br>                t = minLeftIndex[t];<br>            }<br>            minLeftIndex[i] = t;<br>        }<br><br>        <span class="hljs-comment">//è®°å½•æ¯ä¸ªæŸ±å­å³è¾¹ç¬¬ä¸€ä¸ªå°äºè¯¥æŸ±å­çš„ä¸‹æ ‡</span><br>        minRightIndex[n - <span class="hljs-number">1</span>] = n;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> n - <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; i--) {<br>            <span class="hljs-type">int</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">while</span> (t &lt; n &amp;&amp; heights[t] &gt;= heights[i]) t = minRightIndex[t];<br>            minRightIndex[i] = t;<br>        }<br>        <span class="hljs-comment">//æ±‚å’Œ</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) {<br>            <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> heights[i] * (minRightIndex[i] - minLeftIndex[i] - <span class="hljs-number">1</span>);<br>            result = Math.max(result, sum);<br>        }<br>        <span class="hljs-keyword">return</span> result;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><ol><li>ç¬¬ä¸‰ç§è§£æ³•<strong>å•è°ƒæ ˆçš„è§£æ³•</strong>ï¼šä¸åŒäºå‰å‡ é“é¢˜ï¼Œæœ¬ä½“çš„å•è°ƒæ ˆä»é¡¶åˆ°åº•å•è°ƒé€’å‡ï¼Œå½“åŠ å…¥çš„å…ƒç´ å¤§äºå°äºæ ˆé¡¶å…ƒç´ çš„æ—¶å€™éœ€è¦è¿›è¡Œå‡ºæ ˆï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯è¾¹ç•Œéœ€è¦è§„å®šä¸€ä¸‹ï¼Œå¦åˆ™ä¼šå‡ºç°ä¸€ç§æƒ…å†µå¦‚æœè¯¥æ•°ç»„å•è°ƒé€’å¢çš„è¯ï¼Œä¸€ç›´å…¥æ ˆå¯¼è‡´ç»“æœä¸º0ï¼Œæˆ–è€…å•è°ƒé€’å‡ä¸€å¼€å§‹å°±ç›´æ¥å‡ºç°ç©ºæ“ä½œå¯¼è‡´å¼‚å¸¸ï¼Œæ‰€ä»¥éœ€è¦å¯¹æ•°ç»„è¿›è¡Œæ‰©å®¹ï¼Œå°†å…¶å¤´å’Œå°¾å¢åŠ ä¸€ä¸ªå…ƒç´ <span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>0è¿™æ ·å°±å¥½äº†</li></ol><p>â€‹        å…·ä½“æ€è·¯å’Œé›¨æ°´çš„æ€è·¯åŸºæœ¬ä¸Šç›¸åŒï¼Œå°±ä¸€äº›ç»†èŠ‚éœ€è¦ä¿®æ”¹ä¸‹ï¼Œè¿™é‡Œå°±ä¸ä»”ç»†çš„è¯´äº†ï¼Œç»†çœ‹é›¨æ°´çš„é¢˜ç›®</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">largestRectangleArea</span><span class="hljs-params">(<span class="hljs-type">int</span>[] heights)</span> {<br>         <span class="hljs-comment">//å•è°ƒæ ˆçš„è§£æ³•</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> heights.length;<br>        Deque&lt;Integer&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>        <span class="hljs-comment">//æ•°ç»„æ‰©å®¹åœ¨æœ€å‰å’Œæœ€ååŠ å…¥0é¿å…ä¸€äº›ç©ºæ“ä½œå’Œè®¡ç®—ç»“æœä¸º0</span><br>        <span class="hljs-type">int</span>[] newHeight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">2</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) {<br>            newHeight[i + <span class="hljs-number">1</span>] = heights[i];<br>        }<br>        stack.push(<span class="hljs-number">0</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; n + <span class="hljs-number">2</span>; i++) {<br>            <span class="hljs-keyword">if</span> (newHeight[i] &gt; newHeight[stack.peek()]) {<br>                stack.push(i);<br>            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newHeight[i] == newHeight[stack.peek()]) {<br>                stack.pop();<br>                stack.push(i);<br>            } <span class="hljs-keyword">else</span> {<br>                <span class="hljs-keyword">while</span> (newHeight[i] &lt; newHeight[stack.peek()]) {<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> stack.pop();<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> stack.peek();<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> i;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> right - left - <span class="hljs-number">1</span>;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">h</span> <span class="hljs-operator">=</span> newHeight[mid];<br>result=Math.max(result,w*h);<br>                }<br>            }<br>            stack.push(i);<br>        }<br>        <span class="hljs-keyword">return</span> result;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å•è°ƒæ ˆ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Eureka And Ribbon</title>
      <link href="/2023/03/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Eureka%E5%92%8CRibbon/"/>
      <url>/2023/03/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Eureka%E5%92%8CRibbon/</url>
      
        <content type="html"><![CDATA[<h1 id="Eureka-And-Ribbon"><a href="#Eureka-And-Ribbon" class="headerlink" title="Eureka And Ribbon"></a>Eureka And Ribbon</h1><h3 id="1-å¾®æœåŠ¡å¤§çš„è¿œç¨‹è°ƒç”¨"><a href="#1-å¾®æœåŠ¡å¤§çš„è¿œç¨‹è°ƒç”¨" class="headerlink" title="1.å¾®æœåŠ¡å¤§çš„è¿œç¨‹è°ƒç”¨"></a>1.å¾®æœåŠ¡å¤§çš„è¿œç¨‹è°ƒç”¨</h3><blockquote><p>æ ¹æ®è®¢å•idæŸ¥è¯¢è®¢å•åŠŸèƒ½</p></blockquote><p>ç°å®ä¸­å¸¸å¸¸ç”¨äºä¸€äº›æŸ¥è¯¢çš„æ¡ˆä¾‹ï¼šæ¯”å¦‚æ ¹æ®è®¢å•çš„idæŸ¥è¯¢è®¢å•çš„åŠŸèƒ½ï¼Œä¸»è¦å®ç°æŠŠè®¢å•æ‰€å±çš„ç”¨æˆ·ä¿¡æ¯ä¸€èµ·è¿”å›å…·ä½“æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191454501.png" alt="image-20230319145450450"></p><p>ä¸»è¦è¿›è¡Œåˆ†åŒºå¿«çš„æŸ¥è¯¢ï¼Œä¸€ä¸ªå»æŸ¥è¯¢è®¢å•æ•°æ®åº“ä¿¡æ¯ï¼Œä¸€ä¸ªæŸ¥è¯¢ç”¨æˆ·æ¨¡å—çš„ä¿¡æ¯ï¼Œæ€»çš„ç»„æˆäº†ä¸€ä¸ªç”¨æˆ·çš„å…¨éƒ¨ä¿¡æ¯ã€‚</p><p><strong>å¾®æœåŠ¡è°ƒç”¨çš„å®ä¾‹:</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191458094.png" alt="image-20230319145804998"></p><p>å…·ä½“çš„å®ç°æ–¹å¼å¦‚ä¸‹:</p><ul><li>æ³¨å†ŒRestTemplate </li></ul><p>åœ¨ä¸€ä¸ªåœ¨order-serviceçš„OrderApplicationä¸­æ³¨å†ŒRestTemplateï¼ˆå°±æ‹¿è®¢å•æœåŠ¡æ¥è¯´äº‹æƒ…ï¼‰</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@MapperScan("cn.itcast.order.mapper")</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderApplication</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        SpringApplication.run(OrderApplication.class, args);<br>        <span class="hljs-comment">//å£°æ˜beanè¿›è¡Œæ³¨å†Œ</span><br>        <span class="hljs-meta">@Bean</span><br>        <span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span> <span class="hljs-params">()</span> {<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();<br>        }<br>    }<br></code></pre></td></tr></tbody></table></figure><ul><li>æœåŠ¡è¿œç¨‹è°ƒç”¨RestTemplate</li></ul><p>å¯¹order-serviceçš„OrderServiceçš„queryOrderByIdæ–¹æ³•è¿›è¡Œä¿®æ”¹:ä¹Ÿå°±æ˜¯å¯¹åˆ©ç”¨RestTemplateè¿›è¡Œè¿œç¨‹åœ°å€urlçš„è°ƒç”¨</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> RestTemplate restTemplate;<br>        <span class="hljs-keyword">public</span> Order <span class="hljs-title function_">queryOrderById</span><span class="hljs-params">(Long orderId)</span> {<br>            <span class="hljs-comment">// 1.æŸ¥è¯¢è®¢å•</span><br>            <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderMapper.findById(orderId);<br>            <span class="hljs-comment">// TODO 2.æŸ¥è¯¢ç”¨æˆ· </span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"http://localhost:8081/user/"</span> +  order.getUserId();<br>            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> restTemplate.getForObject(url, User.class);<br>            <span class="hljs-comment">// 3.å°è£…userä¿¡æ¯</span><br>            order.setUser(user);<br>            <span class="hljs-comment">// 4.è¿”å›</span><br>            <span class="hljs-keyword">return</span> order;<br>        }<br>}<br></code></pre></td></tr></tbody></table></figure><p>è¯¥æ–¹æ³•çš„ä¸»è¦é‡ç‚¹:</p><ol><li>åŸºäºRestTemplateå‘èµ·çš„httpè¯·æ±‚å®ç°è¿œç¨‹è°ƒç”¨</li><li>httpè¯·æ±‚åšè¿œç¨‹è°ƒç”¨æ˜¯ä¸è¯­è¨€æ— å…³çš„è°ƒç”¨ï¼Œåªè¦çŸ¥é“å¯¹æ–¹çš„ipã€ç«¯å£ã€æ¥å£è·¯å¾„ã€è¯·æ±‚å‚æ•°å³å¯</li></ol><p>åœ¨å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨ä¸­åˆ†ä¸ºæœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…ä»–ä»¬ä¸¤è€…çš„åŒºåˆ«æ˜¯ï¼š</p><ul><li>æœåŠ¡æä¾›è€…ï¼šä¸€æ¬¡ä¸šåŠ¡ä¸­ï¼Œè¢«å…¶å®ƒå¾®æœåŠ¡è°ƒç”¨çš„æœåŠ¡ã€‚ï¼ˆæä¾›æ¥å£ç»™å…¶å®ƒå¾®æœåŠ¡ï¼‰</li><li>æœåŠ¡æ¶ˆè´¹è€…ï¼šä¸€æ¬¡ä¸šåŠ¡ä¸­ï¼Œè°ƒç”¨å…¶å®ƒå¾®æœåŠ¡çš„æœåŠ¡ã€‚ï¼ˆè°ƒç”¨å…¶å®ƒå¾®æœåŠ¡æä¾›çš„æ¥å£ï¼‰</li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191507095.png" alt="image-20230319150708060"></p><p>ä½†æ˜¯è¿™ä¸ªæœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…å¹¶ä¸æ˜¯å›ºå®šä¸å˜çš„ï¼Œä¸€ä¸ªæœåŠ¡æœ‰æ—¶å€™ä¸¤è€…éƒ½å……å½“éƒ½èµ·ä½œç”¨ä¹Ÿå°±æ˜¯æä¾›è€…ä¸æ¶ˆè´¹è€…è§’è‰²å…¶å®æ˜¯<strong>ç›¸å¯¹</strong>çš„æ¯”å¦‚:</p><ul><li>æœåŠ¡Aè°ƒç”¨æœåŠ¡Bï¼ŒæœåŠ¡Bè°ƒç”¨æœåŠ¡Cï¼Œé‚£ä¹ˆæœåŠ¡Bä¸¤è€…éƒ½æ˜¯</li></ul><h3 id="2-Eurekaæ³¨å†Œä¸­å¿ƒ"><a href="#2-Eurekaæ³¨å†Œä¸­å¿ƒ" class="headerlink" title="2.Eurekaæ³¨å†Œä¸­å¿ƒ"></a>2.Eurekaæ³¨å†Œä¸­å¿ƒ</h3><p>ä¸»è¦è§£å†³ä»¥ä¸‹æœåŠ¡è°ƒç”¨å‡ºç°é—®é¢˜:</p><ul><li>æœåŠ¡æ¶ˆè´¹è€…è·å–æœåŠ¡æä¾›è€…çš„åœ°å€ä¿¡æ¯</li><li>æœ‰å¤šä¸ªæœåŠ¡æä¾›è€…ï¼Œæ¶ˆè´¹è€…å¦‚ä½•é€‰æ‹©</li><li>æ¶ˆè´¹è€…å¦‚ä½•å¾—çŸ¥æœåŠ¡æä¾›è€…çš„å¥åº·çŠ¶æ€</li></ul><p>å…·ä½“å®ç°æµç¨‹å¦‚ä¸‹æ‰€ç¤º:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191512429.png" alt="image-20230319151207323"></p><p>é¦–å…ˆ<strong>æœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…éƒ½</strong>å°†æœåŠ¡ä¿¡æ¯æ³¨å†Œåˆ°eureka-serverä¸­å¿ƒè¿›è¡Œå­˜å‚¨ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰æ³¨å†ŒæˆåŠŸçš„åœ°å€ä¿¡æ¯ï¼Œå¯¹äºæœ<strong>åŠ¡æ¶ˆè´¹è€…</strong>æ¥è¯´ä»–è¿›è¡Œè°ƒç”¨çš„æ—¶å€™ç›´æ¥æ‹‰å–æ³¨å†Œä¸­å¿ƒçš„user-serviceä¿¡æ¯ç„¶åå¦‚æœæœ‰å¤šä¸ªç«¯å£é€šè¿‡è´Ÿè½½å‡è¡¡ç­–ç•¥é€‰æ‹©åˆé€‚çš„ç«¯å£è¿›è¡Œè¿œç¨‹è°ƒç”¨ã€‚</p><p>å¯¹äºæŸä¸ªæœåŠ¡åœæ­¢ï¼Œeurekaçš„ç­–ç•¥æ˜¯æœ‰ä¸€ä¸ªå¿ƒè„è·³åŠ¨ç­–ç•¥ï¼Œæ²¡30ç§’è¿›è¡Œæ›´æ–°ä¸€ä¾§å½“å‡ºç°æŸä¸ªæœåŠ¡æŒ‚æ‰ï¼Œä»–å°±å°†æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡è¿›è¡Œæ¸…é™¤ã€‚æ¶ˆè´¹è€…å†è¿›è¡Œæ‹‰å»å°±èƒ½å¾—åˆ°æœ€æ–°çš„çŠ¶æ€</p><blockquote><p>åœ¨Eurekaæ¶æ„ä¸­ï¼Œå¾®æœåŠ¡è§’è‰²æœ‰ä¸¤ç±»</p></blockquote><p><strong>EurekaServerï¼šæœåŠ¡ç«¯ï¼Œæ³¨å†Œä¸­å¿ƒ</strong></p><ul><li>è®°å½•æœåŠ¡ä¿¡æ¯</li><li>å¿ƒè·³ç›‘æ§</li></ul><p><strong>EurekaClientï¼šå®¢æˆ·ç«¯</strong></p><ul><li>Providerï¼šæœåŠ¡æä¾›è€…ï¼Œä¾‹å¦‚æ¡ˆä¾‹ä¸­çš„ user-service<ul><li>æ³¨å†Œè‡ªå·±çš„ä¿¡æ¯åˆ°EurekaServer</li><li>æ¯éš”30ç§’å‘EurekaServerå‘é€å¿ƒè·³</li></ul></li><li>consumerï¼šæœåŠ¡æ¶ˆè´¹è€…ï¼Œä¾‹å¦‚æ¡ˆä¾‹ä¸­çš„ order-service<ul><li>æ ¹æ®æœåŠ¡åç§°ä»EurekaServeræ‹‰å–æœåŠ¡åˆ—è¡¨</li><li>åŸºäºæœåŠ¡åˆ—è¡¨åšè´Ÿè½½å‡è¡¡ï¼Œé€‰ä¸­ä¸€ä¸ªå¾®æœåŠ¡åå‘èµ·è¿œç¨‹è°ƒç”¨</li></ul></li></ul><p><strong>æ­å»ºEurekaServer</strong></p><blockquote><p>é¦–å…ˆå¼•å…¥ä¾èµ–</p></blockquote><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>ç¼–å†™å¯åŠ¨ç±»ï¼Œæ·»åŠ @EnableEurekaServeræ³¨è§£</p><p>æ·»åŠ application.ymlæ–‡ä»¶ï¼Œç¼–å†™ä¸‹é¢çš„é…ç½®ï¼š</p></blockquote><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">10086</span>  <span class="hljs-comment">#æœåŠ¡ä¸­å¿ƒåœ°å€</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br><span class="hljs-attr">name:</span> <span class="hljs-string">eurekaserver</span>  <span class="hljs-comment">#æœåŠ¡ä¸­å¿ƒå¾—åå­—</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://127.0.0.1:10086/eureka/</span><br><br></code></pre></td></tr></tbody></table></figure><p><strong>æ³¨å†Œuser-service</strong></p><p>å°†user-serviceæœåŠ¡æ³¨å†Œåˆ°EurekaServerä¸‹ï¼š</p><blockquote><p>åœ¨user-serviceé¡¹ç›®å¼•å…¥spring-cloud-starter-netflix-eureka-clientçš„ä¾èµ–</p></blockquote><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>åœ¨application.ymlæ–‡ä»¶ï¼Œç¼–å†™ä¸‹é¢çš„é…ç½®</p></blockquote><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">userservice</span>  <span class="hljs-comment">#æœåŠ¡å¾—åç§°</span><br><span class="hljs-attr">eureka:</span><br>  <span class="hljs-attr">client:</span><br>    <span class="hljs-attr">service-url:</span><br>      <span class="hljs-attr">defaultZone:</span> <span class="hljs-string">http://127.0.0.1:10086/eureka/</span>   <span class="hljs-comment">#å°†å…¶æ³¨å†Œåˆ°è¯¥åœ°å€ç«¯å£</span><br></code></pre></td></tr></tbody></table></figure><p><strong>æ³¨å†Œorder-service</strong></p><p>order-serviceè™½ç„¶æ˜¯æ¶ˆè´¹è€…ï¼Œä½†ä¸user-serviceä¸€æ ·éƒ½æ˜¯eurekaçš„clientç«¯ï¼ŒåŒæ ·å¯ä»¥å®ç°æœåŠ¡æ³¨å†Œï¼Œå’Œuser-serviceçš„æ­¥éª¤ä¸€æ ·åªéœ€è¦æ”¹ä¸‹ymlçš„æœåŠ¡åç§°å°±å¯ä»¥</p><p><strong>åœ¨order-serviceå®ŒæˆæœåŠ¡æ‹‰å–</strong></p><p>åŸºäºæœåŠ¡åç§°è·å–æœåŠ¡åˆ—è¡¨ï¼Œç„¶ååœ¨å¯¹æœåŠ¡åˆ—è¡¨åšè´Ÿè½½å‡è¡¡:</p><ol><li>ä¿®æ”¹OrderServiceçš„ä»£ç ï¼Œä¿®æ”¹è®¿é—®çš„urlè·¯å¾„ï¼Œç”¨æœåŠ¡åä»£æ›¿ipã€ç«¯å£ï¼š</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"http://userservice/user/"</span> + order.getUserId();   <span class="hljs-comment">//user-serviceæœåŠ¡æä¾›è€…çš„åç§°</span><br></code></pre></td></tr></tbody></table></figure><ol><li>åœ¨order-serviceé¡¹ç›®çš„å¯åŠ¨ç±»OrderApplicationä¸­çš„RestTemplateæ·»åŠ <strong>è´Ÿè½½å‡è¡¡</strong>æ³¨è§£ï¼š</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@LoadBalanced</span>  <span class="hljs-comment">//å¼€å¯è´Ÿè½½å‡è¡¡ç­–ç•¥</span><br><span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span> {<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="3-Ribbonè´Ÿè½½å‡è¡¡"><a href="#3-Ribbonè´Ÿè½½å‡è¡¡" class="headerlink" title="3. Ribbonè´Ÿè½½å‡è¡¡"></a>3. Ribbonè´Ÿè½½å‡è¡¡</h3><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191534901.png" alt="image-20230319153448836"></p><p>é»˜è®¤çš„åŸåˆ™æ˜¯è½®è¯¢ï¼Œå…·ä½“åº•å±‚åŸç†:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191535080.png" alt="image-20230319153549009"></p><p>é¦–å…ˆå‘èµ·è¯·æ±‚åï¼Œè¯¥è¯·æ±‚è¢«LoadBalancerInterceptorè´Ÿè½½å‡è¡¡æ‹¦æˆªå™¨è¿›è¡Œæ‹¦æˆª,æ¥ç€è·å–è¯·æ±‚ä¸­çš„æœåŠ¡idä¹Ÿå°±æ˜¯userserviceï¼Œæ¥ç€æ‹‰å»æ³¨å†Œä¸­å¿ƒçš„userserviceæœåŠ¡ä¿¡æ¯è¿”å›æœåŠ¡çš„åˆ—è¡¨ï¼Œæ ¹æ®è´Ÿè½½å‡è¡¡ç­–ç•¥(IRuleå¯ä»¥è‡ªå·±å®šä¹‰é»˜è®¤ä¸ºè½®è¯¢)é€‰æ‹©åˆé€‚çš„ç«¯å£,ç«¯å£é€‰æ‹©å®Œåä¿®æ”¹urlå‘èµ·è¯·æ±‚çš„åœ°å€ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191540054.png" alt="image-20230319154034973"></p><p><strong>è´Ÿè½½å‡è¡¡ç­–ç•¥</strong></p><p>å®šä¹‰IRuleå®ç°å¯ä»¥ä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><blockquote><p>ä»£ç æ–¹å¼,åœ¨order-serviceä¸­çš„OrderApplicationç±»ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªæ–°çš„IRuleï¼š</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-keyword">public</span> IRule <span class="hljs-title function_">randomRule</span><span class="hljs-params">()</span>{<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RandomRule</span>();<br>}<br><span class="hljs-comment">//è¯¥æ–¹å¼ä½œç”¨åŸŸå…¨å±€</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>é…ç½®æ–‡ä»¶æ–¹å¼ï¼šåœ¨order-serviceçš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ æ–°çš„é…ç½®ä¹Ÿå¯ä»¥ä¿®æ”¹è§„åˆ™ï¼š</p></blockquote><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">userservice:</span><br>  <span class="hljs-attr">ribbon:</span><br>    <span class="hljs-attr">NFLoadBalancerRuleClassName:</span> <span class="hljs-string">com.netflix.loadbalancer.RandomRule</span> <span class="hljs-comment"># è´Ÿè½½å‡è¡¡è§„åˆ™ è¯¥æ–¹æ³•ä½œç”¨æŸä¸ªå¾®æœåŠ¡</span><br></code></pre></td></tr></tbody></table></figure><p><strong>é¥¥é¥¿åŠ è½½</strong></p><p>Ribboné»˜è®¤æ˜¯é‡‡ç”¨æ‡’åŠ è½½ï¼Œå³ç¬¬ä¸€æ¬¡è®¿é—®æ—¶æ‰ä¼šå»åˆ›å»ºLoadBalanceClientï¼Œè¯·æ±‚æ—¶é—´ä¼šå¾ˆé•¿ã€‚è€Œé¥¥é¥¿åŠ è½½åˆ™ä¼šåœ¨é¡¹ç›®å¯åŠ¨æ—¶åˆ›å»ºï¼Œé™ä½ç¬¬ä¸€æ¬¡è®¿é—®çš„è€—æ—¶ï¼Œé€šè¿‡ä¸‹é¢é…ç½®å¼€å¯é¥¥é¥¿åŠ è½½ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">ribbon:</span><br>  <span class="hljs-attr">eager-load:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å¼€å¯é¥¥é¥¿åŠ è½½ </span><br>      <span class="hljs-attr">clients:</span> <span class="hljs-string">userservice</span>  <span class="hljs-comment"># æŒ‡å®šå¯¹userserviceè¿™ä¸ªæœåŠ¡é¥¥é¥¿åŠ è½½</span><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nacos</title>
      <link href="/2023/03/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Nacos/"/>
      <url>/2023/03/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Nacos/</url>
      
        <content type="html"><![CDATA[<h1 id="Nacosæ³¨å†Œä¸­å¿ƒ"><a href="#Nacosæ³¨å†Œä¸­å¿ƒ" class="headerlink" title="Nacosæ³¨å†Œä¸­å¿ƒ"></a>Nacosæ³¨å†Œä¸­å¿ƒ</h1><p><a href="https://nacos.io/">Nacos</a>æ˜¯é˜¿é‡Œå·´å·´çš„äº§å“ï¼Œç°åœ¨æ˜¯<a href="https://spring.io/projects/spring-cloud">SpringCloud</a>ä¸­çš„ä¸€ä¸ªç»„ä»¶ã€‚ç›¸æ¯”<a href="https://github.com/Netflix/eureka">Eureka</a>åŠŸèƒ½æ›´åŠ ä¸°å¯Œï¼Œåœ¨å›½å†…å—æ¬¢è¿ç¨‹åº¦è¾ƒé«˜</p><h4 id="1-æœåŠ¡æ³¨å†Œåˆ°Nacos"><a href="#1-æœåŠ¡æ³¨å†Œåˆ°Nacos" class="headerlink" title="1. æœåŠ¡æ³¨å†Œåˆ°Nacos"></a><strong>1. æœåŠ¡æ³¨å†Œåˆ°Nacos</strong></h4><p>åœ¨cloud-demoçˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶ä¸­çš„<code>&lt;dependencyManagement&gt;</code>ä¸­å¼•å…¥SpringCloudAlibabaçš„ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.9.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>ç„¶ååœ¨user-serviceå’Œorder-serviceä¸­çš„pomæ–‡ä»¶ä¸­å¼•å…¥nacos-discoveryä¾èµ–ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- nacoså®¢æˆ·ç«¯ä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>è®°å¾—æ³¨é‡Šæ‰åŸæœ‰çš„eurekaä¾èµ–(å¦‚æœæœ‰çš„è¯)</p><p>ä¿®æ”¹user-service&amp;order-serviceä¸­çš„application.ymlæ–‡ä»¶ï¼Œæ·»åŠ nacosåœ°å€</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span> <span class="hljs-comment">#nacosçš„æœåŠ¡ç«¯åœ°å€</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p><strong>æ³¨æ„</strong>ï¼šä¸è¦å¿˜äº†æ³¨é‡Šæ‰eurekaçš„åœ°å€</p></blockquote><p>ç„¶åé‡å¯ï¼Œç™»å½•åˆ°nacosçš„ç•Œé¢å°±å¯ä»¥çœ‹åˆ°æ³¨å†Œçš„æœåŠ¡ä¿¡æ¯:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191906541.png" alt=""></p><h4 id="2-NacosæœåŠ¡åˆ†çº§å­˜å‚¨æ¨¡å‹"><a href="#2-NacosæœåŠ¡åˆ†çº§å­˜å‚¨æ¨¡å‹" class="headerlink" title="2, NacosæœåŠ¡åˆ†çº§å­˜å‚¨æ¨¡å‹"></a><strong>2, NacosæœåŠ¡åˆ†çº§å­˜å‚¨æ¨¡å‹</strong></h4><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191906245.png" alt=""></p><p><strong>æœåŠ¡è·¨é›†ç¾¤è°ƒç”¨é—®é¢˜</strong></p><p>æœåŠ¡è°ƒç”¨å°½å¯èƒ½é€‰æ‹©æœ¬åœ°é›†ç¾¤çš„æœåŠ¡ï¼Œè·¨é›†ç¾¤è°ƒç”¨å»¶è¿Ÿè¾ƒé«˜ï¼Œå½“æœ¬åœ°æ— æ³•è®¿é—®æ—¶å†å»è®¿é—®å…¶ä»–çš„é›†ç¾¤ä¾‹å¦‚:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191911730.png" alt="image-20230319191140684"></p><p>å½“è°ƒç”¨çš„æ—¶å€™ä¼˜å…ˆè°ƒç”¨æ­å·çš„é›†ç¾¤åˆ†å¸ƒå½“æ­å·çš„æ— æ³•è°ƒç”¨å†å»è°ƒç”¨ä¸Šæµ·çš„user-service</p><p><strong>æœåŠ¡é›†ç¾¤å±æ€§é…ç½®</strong></p><blockquote><p>ä¿®æ”¹application.ymlï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹</p></blockquote><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span> <br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span> <span class="hljs-comment">#nacosæœåŠ¡ç«¯åœ°å€</span><br>      <span class="hljs-attr">discovery:</span><br>        <span class="hljs-attr">cluster-name:</span> <span class="hljs-string">HZ</span> <span class="hljs-comment"># é…ç½®é›†ç¾¤åç§°ï¼Œä¹Ÿå°±æ˜¯æœºæˆ¿ä½ç½®ï¼Œä¾‹å¦‚ï¼šHZï¼Œæ­å·</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>åœ¨æ§åˆ¶å°å¯ä»¥çœ‹åˆ°é›†ç¾¤çš„å˜åŒ–</p></blockquote><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191916003.png" alt=""></p><p><strong>NacosæœåŠ¡åˆ†çº§å­˜å‚¨æ¨¡å‹</strong></p><ul><li><p>ä¸€çº§æ˜¯æœåŠ¡ï¼Œä¾‹å¦‚userservice</p></li><li><p>äºŒçº§æ˜¯é›†ç¾¤ï¼Œä¾‹å¦‚æ­å·æˆ–ä¸Šæµ·</p></li><li><p>ä¸‰çº§æ˜¯å®ä¾‹ï¼Œä¾‹å¦‚æ­å·æœºæˆ¿çš„æŸå°éƒ¨ç½²äº†userserviceçš„æœåŠ¡å™¨</p><p><strong>å¦‚ä½•è®¾ç½®å®ä¾‹çš„é›†ç¾¤å±æ€§</strong>ï¼š</p></li><li><p>ä¿®æ”¹application.ymlæ–‡ä»¶ï¼Œæ·»åŠ spring.cloud.nacos.discovery.cluster-nameå±æ€§å³å¯</p></li></ul><h4 id="3-æ ¹æ®é›†ç¾¤è´Ÿè½½å‡è¡¡ä¹Ÿå°±æ˜¯åŒé›†ç¾¤ä¼˜å…ˆçš„è´Ÿè½½å‡è¡¡"><a href="#3-æ ¹æ®é›†ç¾¤è´Ÿè½½å‡è¡¡ä¹Ÿå°±æ˜¯åŒé›†ç¾¤ä¼˜å…ˆçš„è´Ÿè½½å‡è¡¡" class="headerlink" title="3. æ ¹æ®é›†ç¾¤è´Ÿè½½å‡è¡¡ä¹Ÿå°±æ˜¯åŒé›†ç¾¤ä¼˜å…ˆçš„è´Ÿè½½å‡è¡¡"></a><strong>3. æ ¹æ®é›†ç¾¤è´Ÿè½½å‡è¡¡ä¹Ÿå°±æ˜¯åŒé›†ç¾¤ä¼˜å…ˆçš„è´Ÿè½½å‡è¡¡</strong></h4><p>é»˜è®¤çš„<code>ZoneAvoidanceRule</code>å¹¶ä¸èƒ½å®ç°æ ¹æ®åŒé›†ç¾¤ä¼˜å…ˆæ¥å®ç°è´Ÿè½½å‡è¡¡ã€‚</p><p>å› æ­¤Nacosä¸­æä¾›äº†ä¸€ä¸ª<code>NacosRule</code>çš„å®ç°ï¼Œå¯ä»¥ä¼˜å…ˆä»åŒé›†ç¾¤ä¸­æŒ‘é€‰å®ä¾‹ã€‚</p><blockquote><p>å°±æ‹¿order-serviceä¸ºä¾‹ä¿®æ”¹å…¶application.ymlï¼Œè®¾ç½®é›†ç¾¤ä¸ºHZ</p></blockquote><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span><br>      <span class="hljs-attr">discovery:</span><br>        <span class="hljs-attr">cluster-name:</span> <span class="hljs-string">HZ</span> <span class="hljs-comment"># é›†ç¾¤åç§°</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>ä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™</p></blockquote><p>ä¿®æ”¹order-serviceçš„application.ymlæ–‡ä»¶ï¼Œä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">userservice:</span><br>  <span class="hljs-attr">ribbon:</span><br>    <span class="hljs-attr">NFLoadBalancerRuleClassName:</span> <span class="hljs-string">com.alibaba.cloud.nacos.ribbon.NacosRule</span> <span class="hljs-comment"># è´Ÿè½½å‡è¡¡è§„åˆ™ </span><br></code></pre></td></tr></tbody></table></figure><p><strong>NacosRuleè´Ÿè½½å‡è¡¡ç­–ç•¥</strong></p><p>â‘  ä¼˜å…ˆé€‰æ‹©åŒé›†ç¾¤æœåŠ¡å®ä¾‹åˆ—è¡¨</p><p>â‘¡ æœ¬åœ°é›†ç¾¤æ‰¾ä¸åˆ°æä¾›è€…ï¼Œæ‰å»å…¶å®ƒé›†ç¾¤å¯»æ‰¾ï¼Œå¹¶ä¸”ä¼šæŠ¥è­¦å‘Š</p><p>â‘¢ ç¡®å®šäº†å¯ç”¨å®ä¾‹åˆ—è¡¨åï¼Œå†é‡‡ç”¨éšæœºè´Ÿè½½å‡è¡¡æŒ‘é€‰å®ä¾‹</p><p><strong>æ ¹æ®æƒé‡è´Ÿè½½å‡è¡¡</strong></p><p>è§£å†³çš„é—®é¢˜å°±æ˜¯ï¼šæœåŠ¡å™¨è®¾å¤‡æ€§èƒ½æœ‰å·®å¼‚ï¼Œéƒ¨åˆ†å®ä¾‹æ‰€åœ¨æœºå™¨æ€§èƒ½è¾ƒå¥½ï¼Œå¦ä¸€äº›è¾ƒå·®ï¼Œæˆ‘ä»¬å¸Œæœ›æ€§èƒ½å¥½çš„æœºå™¨æ‰¿æ‹…æ›´å¤šçš„ç”¨æˆ·è¯·æ±‚ï¼Œnacosæä¾›äº†æƒé‡é…ç½®æ¥æ§åˆ¶è®¿é—®é¢‘ç‡ï¼Œæƒé‡è¶Šå¤§åˆ™è®¿é—®çš„é¢‘ç‡è¶Šé«˜ã€‚</p><p>å…·ä½“å®ç°æ–¹æ³•ç›´æ¥å†nacosæ§åˆ¶å°è¿›è¡Œä¿®æ”¹ï¼šå¦‚æ‰¾åˆ°user-serviceçš„å®ä¾‹åˆ—è¡¨ï¼Œç‚¹å‡»ç¼–è¾‘ï¼Œå³å¯ä¿®æ”¹æƒé‡</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191924323.png" alt="image-20210713235133225"></p><p>ç›´æ¥å¯¹æƒé‡è¿›è¡Œç¼–è¾‘å³å¯ã€‚æ³¨æ„ï¼šå¦‚æœä¿®æ”¹æƒé‡ä¸º0åˆ™è¯¥å®ä¾‹æ°¸è¿œä¸ä¼šè¢«è®¿é—®</p><h4 id="4-ç¯å¢ƒéš”ç¦»"><a href="#4-ç¯å¢ƒéš”ç¦»" class="headerlink" title="4. ç¯å¢ƒéš”ç¦»"></a><strong>4. ç¯å¢ƒéš”ç¦»</strong></h4><p>Nacosä¸­æœåŠ¡å­˜å‚¨å’Œæ•°æ®å­˜å‚¨çš„æœ€å¤–å±‚éƒ½æ˜¯ä¸€ä¸ªåä¸ºnamespaceçš„ä¸œè¥¿ï¼Œç”¨æ¥åšæœ€å¤–å±‚éš”ç¦»ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191927968.png" alt="image-20230319192716865"></p><blockquote><p>å…·ä½“å®ç°ç­–ç•¥ç›´æ¥å†æ§åˆ¶å°ä¸­è¿›è¡Œåˆ›å»ºnamespaceç”¨æ¥éš”ç¦»ä¸åŒçš„ç¯å¢ƒ</p></blockquote><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191927871.png" alt="image-20230319192756816"></p><blockquote><p>ç„¶åå¡«å†™ä¸€ä¸ªæ–°çš„å‘½åç©ºé—´ä¿¡æ¯ï¼š</p></blockquote><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191928969.png" alt="image-20230319192829920"></p><blockquote><p>ä¿å­˜åä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°è¿™ä¸ªå‘½åç©ºé—´çš„idï¼š</p></blockquote><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191928857.png" alt="image-20230319192848812"></p><blockquote><p>ä¿®æ”¹order-serviceçš„application.ymlï¼Œæ·»åŠ namespaceï¼š</p></blockquote><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span><br>      <span class="hljs-attr">discovery:</span><br>        <span class="hljs-attr">cluster-name:</span> <span class="hljs-string">HZ</span><br>        <span class="hljs-attr">namespace:</span> <span class="hljs-string">492a7d5d-237b-46a1-a99a-fa8e98e4b0f9</span> <span class="hljs-comment"># å‘½åç©ºé—´ï¼Œå¡«ID</span><br></code></pre></td></tr></tbody></table></figure><p><strong>Nacosç¯å¢ƒéš”ç¦»</strong></p><p>â‘ æ¯ä¸ªnamespaceéƒ½æœ‰å”¯ä¸€id</p><p>â‘¡æœåŠ¡è®¾ç½®namespaceæ—¶è¦å†™idè€Œä¸æ˜¯åç§°</p><p>â‘¢ä¸åŒnamespaceä¸‹çš„æœåŠ¡äº’ç›¸ä¸å¯è§</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191930353.png" alt="image-20230319193052260"></p><p><strong>ä¸´æ—¶å®ä¾‹å’Œéä¸´æ—¶å®ä¾‹</strong></p><p>ä¸´æ—¶å®ä¾‹é‡‡ç”¨å¿ƒè·³æ£€æµ‹ç­–ç•¥ï¼Œæ³¨å†Œä¸­å¿ƒè¢«åŠ¨çš„æ¥æ”¶æœåŠ¡æä¾›è€…æä¾›çš„ä¿¡æ¯æ¯30ç§’æ›´æ–°ä¸€æ¬¡ï¼Œä½†è¿™ä¸ªå¸¦æ¥çš„ä¸€äº›é—®é¢˜å°±æ˜¯å¦‚æœæŸä¸ªæœåŠ¡å™¨ç«¯å£æŒ‚æ‰äº†ï¼Œè€Œæ­¤æ—¶åœ¨æ³¨å†Œä¸­å¿ƒå¹¶æ²¡æœ‰è¿›è¡Œæ›´æ–°ï¼Œè€ŒåŒæ—¶æœåŠ¡æ¶ˆè´¹è€…å°±å¯¹è¯¥æœåŠ¡å™¨ç«¯å£è¿›è¡Œè®¿é—®å°±ä¼šæŠ¥é”™ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å°±æ¨å‡ºäº†éä¸´æ—¶å®ä¾‹ï¼Œå°±æ˜¯æ³¨å†Œä¸­å¿ƒä¼šä¸»åŠ¨çš„è¯¢é—®æœåŠ¡æä¾›è€…æ˜¯å¦å‘ç”Ÿæ”¹å˜ï¼Œæœ‰æ— ç«¯å£å®•æœºä¸€æ—¦å‘ç”Ÿæ”¹å˜å°±ä¸»åŠ¨çš„å°†å˜æ›´æ¶ˆæ¯æ¨é€åˆ°æœåŠ¡æ¶ˆè´¹è€…ï¼šä¹Ÿå°±æ˜¯åœ¨æœåŠ¡æ¶ˆè´¹è€…ä¹‹é—´æœ‰ä¸€ä¸ªpullå’Œpushè®©ä¸€ä¸ªæ”¹å˜å¿«é€Ÿè¢«å‘ç°ã€‚</p><p>æœåŠ¡æ³¨å†Œåˆ°Nacosæ—¶ï¼Œå¯ä»¥é€‰æ‹©æ³¨å†Œä¸º<strong>ä¸´æ—¶æˆ–éä¸´æ—¶å®ä¾‹</strong>ï¼Œé€šè¿‡ä¸‹é¢çš„<strong>é…ç½®æ¥è®¾ç½®ï¼š</strong></p><ul><li><p>ä¸´æ—¶å®ä¾‹ï¼šå¦‚æœå®ä¾‹å®•æœºè¶…è¿‡ä¸€å®šæ—¶é—´ï¼Œä¼šä»æœåŠ¡åˆ—è¡¨å‰”é™¤ï¼Œé»˜è®¤çš„ç±»å‹ã€‚</p></li><li><p>éä¸´æ—¶å®ä¾‹ï¼šå¦‚æœå®ä¾‹å®•æœºï¼Œä¸ä¼šä»æœåŠ¡åˆ—è¡¨å‰”é™¤ï¼Œä¹Ÿå¯ä»¥å«æ°¸ä¹…å®ä¾‹ã€‚</p></li></ul><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">discovery:</span><br>        <span class="hljs-attr">ephemeral:</span> <span class="hljs-literal">false</span> <span class="hljs-comment"># è®¾ç½®ä¸ºéä¸´æ—¶å®ä¾‹</span><br></code></pre></td></tr></tbody></table></figure><ol><li><p><strong>Nacosä¸eurekaçš„å…±åŒç‚¹</strong></p><p>â‘  éƒ½æ”¯æŒæœåŠ¡æ³¨å†Œå’ŒæœåŠ¡æ‹‰å–</p><p>â‘¡éƒ½æ”¯æŒæœåŠ¡æä¾›è€…å¿ƒè·³æ–¹å¼åšå¥åº·æ£€æµ‹</p></li><li><p><strong>Nacosä¸Eurekaçš„åŒºåˆ«</strong></p></li></ol><p>â‘ Nacosæ”¯æŒæœåŠ¡ç«¯ä¸»åŠ¨æ£€æµ‹æä¾›è€…çŠ¶æ€ï¼šä¸´æ—¶å®ä¾‹é‡‡ç”¨å¿ƒè·³æ¨¡å¼ï¼Œéä¸´æ—¶å®ä¾‹é‡‡ç”¨ä¸»åŠ¨æ£€æµ‹æ¨¡å¼</p><p>â‘¡ä¸´æ—¶å®ä¾‹å¿ƒè·³ä¸æ­£å¸¸ä¼šè¢«å‰”é™¤ï¼Œéä¸´æ—¶å®ä¾‹åˆ™ä¸ä¼šè¢«å‰”é™¤</p><p>â‘¢Nacosæ”¯æŒæœåŠ¡åˆ—è¡¨å˜æ›´çš„æ¶ˆæ¯æ¨é€æ¨¡å¼ï¼ŒæœåŠ¡åˆ—è¡¨æ›´æ–°æ›´åŠæ—¶</p><p>â‘£Nacosé›†ç¾¤é»˜è®¤é‡‡ç”¨APæ–¹å¼ï¼Œå½“é›†ç¾¤ä¸­å­˜åœ¨éä¸´æ—¶å®ä¾‹æ—¶ï¼Œé‡‡ç”¨CPæ¨¡å¼ï¼›Eurekaé‡‡ç”¨APæ–¹å¼</p><h4 id="5-Nacosé…ç½®ç®¡ç†"><a href="#5-Nacosé…ç½®ç®¡ç†" class="headerlink" title="5. Nacosé…ç½®ç®¡ç†"></a>5. Nacosé…ç½®ç®¡ç†</h4><p><strong>é…ç½®æ›´æ”¹çƒ­æ›´æ–°</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191941128.png" alt="image-20230319194140073"></p><p><strong>ç»Ÿä¸€é…ç½®ç®¡ç†</strong></p><p>é¦–å…ˆåœ¨nacosä¸­æ·»åŠ é…ç½®ä¿¡æ¯:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191942345.png" alt="image-20230319194221281"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191942546.png" alt="image-20230319194230490"></p><blockquote><p>æ³¨æ„ï¼šé¡¹ç›®çš„æ ¸å¿ƒé…ç½®ï¼Œéœ€è¦çƒ­æ›´æ–°çš„é…ç½®æ‰æœ‰æ”¾åˆ°nacosç®¡ç†çš„å¿…è¦ã€‚åŸºæœ¬ä¸ä¼šå˜æ›´çš„ä¸€äº›é…ç½®è¿˜æ˜¯ä¿å­˜åœ¨å¾®æœåŠ¡æœ¬åœ°æ¯”è¾ƒå¥½ã€‚</p><p>æ¥ç€é…ç½®è·å–çš„æ­¥éª¤å¦‚ä¸‹å›¾æ‰€ç¤º</p></blockquote><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191948672.png" alt="img"></p><p>æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªbootstrap.ymlï¼ˆå®ƒçš„ä¼˜å…ˆçº§æœ€é«˜é¡¹ç›®å¯åŠ¨æ—¶å…ˆè¯»å–å®ƒçš„é…ç½®ä¿¡æ¯,ä¼šåœ¨application.ymlä¹‹å‰è¢«è¯»å–ï¼‰æ–‡ä»¶å…¶ä¸­å¾—åŒ…å«nacosçš„åœ°å€ä¿¡æ¯ï¼Œç„¶åå†è®¿é—®åˆ°æœ¬åœ°çš„é…ç½®æ–‡ä»¶ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹æ‰€ç¤º:</p><blockquote><p>å¼•å…¥Nacosçš„é…ç½®ç®¡ç†å®¢æˆ·ç«¯ä¾èµ–ï¼š</p></blockquote><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--nacosé…ç½®ç®¡ç†ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>å†user-serviceä¸­æ·»åŠ bootstrap.yaml</p></blockquote><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">userservice</span>  <span class="hljs-comment"># 1.æœåŠ¡åç§°</span><br>  <span class="hljs-attr">profiles:</span><br>    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span>  <span class="hljs-comment">#2.å¼€å‘ç¯å¢ƒï¼Œè¿™é‡Œæ˜¯dev </span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span> <span class="hljs-comment"># Nacosåœ°å€</span><br>      <span class="hljs-attr">config:</span><br>        <span class="hljs-attr">file-extension:</span> <span class="hljs-string">yaml</span>  <span class="hljs-comment"># 3.æ–‡ä»¶åç¼€å</span><br>        <span class="hljs-comment">#123ä¸‰éƒ¨ä¸å¯å°‘æ­£å¥½æ„æˆä½ çš„é…ç½®æ–‡ä»¶id:userservice-dev.yaml</span><br></code></pre></td></tr></tbody></table></figure><p>è¿™é‡Œä¼šæ ¹æ®spring.cloud.nacos.server-addrè·å–nacosåœ°å€ï¼Œå†æ ¹æ®<code>${spring.application.name}-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}</code>ä½œä¸ºæ–‡ä»¶idï¼Œæ¥è¯»å–é…ç½®ã€‚</p><p>æœ¬ä¾‹ä¸­ï¼Œå°±æ˜¯å»è¯»å–<code>userservice-dev.yaml</code>ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191951761.png" alt=""></p><blockquote><p>è¯»å–nacosé…ç½®ä¿¡æ¯</p></blockquote><p>æœ€ç®€å•çš„æ–¹æ³•åœ¨user-serviceä¸­çš„UserControllerä¸­æ·»åŠ ä¸šåŠ¡é€»è¾‘ï¼Œè¯»å–pattern.dateformaté…ç½®ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191952530.png" alt="image-20210714170337448"></p><p>@Valueæ³¨å…¥nacosçš„å±æ€§ä¿¡æ¯</p><p><strong>å°†é…ç½®äº¤ç»™Nacosç®¡ç†çš„æ­¥éª¤</strong></p><p>â‘ åœ¨Nacosä¸­æ·»åŠ é…ç½®æ–‡ä»¶</p><p>â‘¡åœ¨å¾®æœåŠ¡ä¸­å¼•å…¥nacosçš„configä¾èµ–</p><p>â‘¢åœ¨å¾®æœåŠ¡ä¸­æ·»åŠ bootstrap.ymlï¼Œé…ç½®nacosåœ°å€ã€å½“å‰ç¯å¢ƒã€æœåŠ¡åç§°ã€æ–‡ä»¶åç¼€åã€‚è¿™äº›å†³å®šäº†ç¨‹åºå¯åŠ¨æ—¶å»nacosè¯»å–å“ªä¸ªæ–‡ä»¶</p><p><strong>é…ç½®è‡ªåŠ¨åˆ·æ–°</strong></p><p>Nacosä¸­çš„é…ç½®æ–‡ä»¶å˜æ›´åï¼Œå¾®æœåŠ¡æ— éœ€é‡å¯å°±å¯ä»¥æ„ŸçŸ¥ã€‚ä¸è¿‡éœ€è¦é€šè¿‡ä¸‹é¢ä¸¤ç§é…ç½®å®ç°ï¼š</p><p><strong>æ–¹å¼ä¸€:åœ¨@Valueæ³¨å…¥çš„å˜é‡æ‰€åœ¨ç±»ä¸Šæ·»åŠ æ³¨è§£@RefreshScope</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191954875.png" alt="image-20230319195437804"></p><p><strong>æ–¹å¼äºŒï¼šä½¿ç”¨@ConfigurationPropertiesæ³¨è§£</strong>(å¸¸ç”¨)</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191955912.png" alt="image-20230319195518864"></p><p>Nacosé…ç½®æ›´æ”¹åï¼Œå¾®æœåŠ¡å¯ä»¥å®ç°çƒ­æ›´æ–°ï¼Œæ–¹å¼:</p><p>â‘ é€šè¿‡@Valueæ³¨è§£æ³¨å…¥ï¼Œç»“åˆ@RefreshScopeæ¥åˆ·æ–°</p><p>â‘¡é€šè¿‡@ConfigurationPropertiesæ³¨å…¥ï¼Œè‡ªåŠ¨åˆ·æ–°</p><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><ul><li><p>ä¸æ˜¯æ‰€æœ‰çš„é…ç½®éƒ½é€‚åˆæ”¾åˆ°é…ç½®ä¸­å¿ƒï¼Œç»´æŠ¤èµ·æ¥æ¯”è¾ƒéº»çƒ¦</p></li><li><p>å»ºè®®å°†ä¸€äº›å…³é”®å‚æ•°ï¼Œéœ€è¦è¿è¡Œæ—¶è°ƒæ•´çš„å‚æ•°æ”¾åˆ°nacosé…ç½®ä¸­å¿ƒï¼Œä¸€èˆ¬éƒ½æ˜¯è‡ªå®šä¹‰é…ç½®</p></li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191956495.png" alt="image-20230319195633449"></p><p><strong>å¤šæœåŠ¡å…±äº«é…ç½®</strong></p><p>ä¸åŒå¾®æœåŠ¡ä¹‹é—´å¯ä»¥å…±äº«é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡ä¸‹é¢çš„ä¸¤ç§æ–¹å¼æ¥æŒ‡å®šï¼š</p><p>æ–¹å¼ä¸€ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191958605.png" alt="image-20230319195821534"></p><p>æ–¹å¼äºŒï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191958080.png" alt="image-20230319195855010"></p><p><strong>Nacosé›†ç¾¤æ­å»º</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303191959567.png" alt="image-20230319195920525"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•é¢˜2</title>
      <link href="/2023/03/19/%E9%9D%A2%E8%AF%95%E9%A2%98/%E9%9D%A2%E8%AF%95%E9%A2%982/"/>
      <url>/2023/03/19/%E9%9D%A2%E8%AF%95%E9%A2%98/%E9%9D%A2%E8%AF%95%E9%A2%982/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢è¯•é¢˜2"><a href="#é¢è¯•é¢˜2" class="headerlink" title="é¢è¯•é¢˜2"></a>é¢è¯•é¢˜2</h1><h4 id="1-ä»€ä¹ˆæ˜¯-IOCï¼Œç®€å•è®²ä¸€ä¸‹-Spring-IOC-çš„å®ç°æœºåˆ¶ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯-IOCï¼Œç®€å•è®²ä¸€ä¸‹-Spring-IOC-çš„å®ç°æœºåˆ¶ï¼Ÿ" class="headerlink" title="1.ä»€ä¹ˆæ˜¯ IOCï¼Œç®€å•è®²ä¸€ä¸‹ Spring IOC çš„å®ç°æœºåˆ¶ï¼Ÿ"></a>1.ä»€ä¹ˆæ˜¯ IOCï¼Œç®€å•è®²ä¸€ä¸‹ Spring IOC çš„å®ç°æœºåˆ¶ï¼Ÿ</h4><p><strong>ä»€ä¹ˆæ˜¯IOC</strong></p><p>IOCæ˜¯æ§åˆ¶åè½¬çš„æ„æ€æ˜¯springæ¡†æ¶çš„æ ¸å¿ƒå†…å®¹ï¼ŒIOCå®¹å™¨ä¸»è¦è´Ÿè´£å¯¹è±¡çš„å®ä¾‹åŒ–ã€é…ç½®å’Œç®¡ç†å¯¹è±¡çš„Beanï¼Œå¹¶å°†å®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»è¿›è¡Œæ³¨å…¥ï¼Œspringæ¡†æ¶é€šè¿‡IOCå®¹å™¨å®ç°äº†é«˜åº¦çš„å¯é‡ç”¨æ€§å’Œæ¾å¶æ€§ã€å¼€å‘è€…åªéœ€è¦å…³å¿ƒbeançš„å®šä¹‰å’Œä¾èµ–å…³ç³»é…ç½®ï¼Œä¸éœ€è¦å…³å¿ƒä»–ä»¬å¦‚ä½•è¢«åˆ›å»º</p><p><strong>Spring IOCçš„å®ç°æœºåˆ¶ï¼š</strong>å·¥å‚æ¨¡å¼+åå°„æœºåˆ¶</p><ol><li><p><strong>é…ç½®Beanï¼š</strong></p><ul><li>xmlé…ç½®ï¼šå°†beançš„ä¿¡æ¯é…ç½®åˆ°xmlæ–‡ä»¶ï¼Œè®©springåŠ è½½å¹¶ä¸”åˆ›å»ºbean</li><li>å®¹å™¨åˆå§‹åŒ–ï¼šå½“spring IOCå¯åŠ¨æ—¶ï¼Œä¼šè¯»å–é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºå¯¹è±¡å¹¶å°†å…¶æ”¾å…¥åˆ°å®¹å™¨ä¸­ï¼ŒåŒæ—¶å»ºç«‹å¯¹è±¡é—´å¾—ä¾èµ–å…³ç³»</li><li>å¯¹è±¡æ³¨å…¥ï¼šå½“éœ€è¦ä½¿ç”¨æŸä¸ªå¯¹è±¡æ—¶ï¼Œå®¹å™¨ä¼šå°†å®ƒæ³¨å…¥åˆ°éœ€è¦çš„å¯¹è±¡ä¸­</li></ul><p>Beançš„æ³¨å†Œæ–¹å¼ï¼š</p><ul><li><p>é€šè¿‡@Beanå’Œ@Configurationçš„æ–¹å¼ç›´æ¥å®šä¹‰è¦åˆ›å»ºçš„å¯¹è±¡ä¸å¯¹è±¡çš„å…³ç³»</p></li><li><p>é€šè¿‡@Componentå®šä¹‰ç±»éœ€è¦å®šä¹‰ComponentScançš„æ‰«æè·¯å¾„</p><p>2.<strong>åˆ›å»ºIOCå®¹å™¨ï¼š</strong>é€šè¿‡ApplicationContextæ¥å£çš„å®ç°ç±»æ¥åˆ›å»ºIOCå®¹å™¨</p></li></ul><p><strong>3.åŠ è½½é…ç½®æ–‡ä»¶</strong>ï¼šIOCå®¹å™¨é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶æˆ–è€…æ³¨è§£æ–¹å¼è·å–Beançš„å®šä¹‰å’Œé…ç½®ä¿¡æ¯</p><p><strong>4.åˆ›å»ºBeanå®ä¾‹</strong>ï¼šåˆ©ç”¨åå°„æœºåˆ¶ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„ä¿¡æ¯å®ä¾‹åŒ–Bean</p><p><strong>5.ä¾èµ–æ³¨å…¥</strong>ï¼šspring IOCæä¾›äº†ä¸‰ç§æ³¨å…¥æ–¹æ³•ï¼š</p><ul><li>Setteræ³¨å…¥ï¼šé€šè¿‡Setteræ–¹æ³•å°†å¯¹è±¡æ³¨å…¥åˆ°å±æ€§ä¸­</li><li>æ„é€ å™¨æ³¨å…¥ï¼šé€šè¿‡æ„é€ å™¨å°†å¯¹è±¡æ³¨å…¥åˆ°å±æ€§ä¸­</li><li>æ¥å£æ³¨å…¥ï¼šé€šè¿‡å®ç°æ¥å£å°†å¯¹è±¡æ³¨å…¥åˆ°å±æ€§ä¸­</li></ul></li></ol><p>â€‹      <strong>6.åˆå§‹åŒ–Bean</strong>ï¼šè°ƒç”¨Beanå®ä¾‹çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œå®ŒæˆBeançš„å®ä¾‹ï¼›</p><p>â€‹      <strong>7.Beançš„æ­£å¸¸ä½¿ç”¨</strong></p><p>â€‹      <strong>8.Beançš„é”€æ¯</strong>ï¼šè°ƒç”¨DisposableBeançš„destoryï¼ˆï¼‰æ–¹æ³•ï¼›æˆ–è€…Beanå®ç°äº†DisposableBeanæ¥å£ç›´æ¥è°ƒç”¨destoryæ–¹æ³•ï¼›</p><h4 id="2-ä¸€æ¡-SQL-è¯­å¥åœ¨-MySQL-ä¸­çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ"><a href="#2-ä¸€æ¡-SQL-è¯­å¥åœ¨-MySQL-ä¸­çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ" class="headerlink" title="2.ä¸€æ¡ SQL è¯­å¥åœ¨ MySQL ä¸­çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ"></a>2.ä¸€æ¡ SQL è¯­å¥åœ¨ MySQL ä¸­çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</h4><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303021654539.png" alt=""></p><p><strong>è¿æ¥å™¨è¿‡ç¨‹ï¼š</strong></p><ol><li>å»ºç«‹é“¾æ¥ï¼šåŒå®¢æˆ·ç«¯è¿›è¡ŒTCPä¸‰æ¬¡æ¡æ‰‹å»ºç«‹é“¾æ¥</li><li>æ ¡éªŒå¯†ç ï¼šæ ¡éªŒå®¢æˆ·ç«¯çš„ç”¨æˆ·åå’Œå¯†ç </li><li>æƒé™åˆ¤æ–­ï¼šå¯†ç é€šè¿‡è¯»å–è¯¥ç”¨æˆ·æƒé™</li></ol><p><strong>æŸ¥è¯¢ç¼“å­˜è¿‡ç¨‹ï¼š</strong></p><ol><li>è§£æSQLè¯­å¥çš„ç¬¬ä¸€ä¸ªå­—æ®µ</li><li>å¦‚æœæ˜¯selectè¯­å¥ï¼ŒMysqlå…ˆå»æŸ¥è¯¢ç¼“å­˜ï¼Œå‘½ä¸­ç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¦‚æœæ²¡æœ‰ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œå¹¶å°†ç»“æœå­˜å…¥ç¼“å­˜</li></ol><p><strong>ç‰ˆæœ¬å˜åŠ¨ï¼šMysql8.0å°†æŸ¥è¯¢ç¼“å­˜åˆ é™¤äº†</strong></p><p><strong>è§£æSQLè¿‡ç¨‹ï¼š</strong>å¯¹sqlè¯­å¥è¿›è¡Œè¯æ³•ã€è¯­æ³•åˆ†æ</p><p><strong>æ‰§è¡ŒSQLè¿‡ç¨‹</strong>ï¼š</p><p>â€‹    åˆ†æå™¨ï¼šå¯¹è¦æ‰§è¡Œçš„SQLé¢„è®¡è¿›è¡Œè§£æï¼Œå¹¶å¾—åˆ°æŠ½è±¡è¯­æ³•æ ‘</p><p>â€‹    ä¼˜åŒ–å™¨ï¼šæŸ¥è¯¢ä¼˜åŒ–å™¨ä¼šæ‰¾å‡ºæ‰§è¡Œè¯¥è¯­å¥æ‰€æœ‰å¯èƒ½çš„ä½¿ç”¨æ–¹æ¡ˆï¼Œé€‰æ‹©ä¸€æ¡æœ€ä¼˜çš„æŸ¥è¯¢è·¯å¾„</p><p>â€‹    æ‰§è¡Œå™¨ï¼šæ ¹æ®æ‰§è¡Œè®¡åˆ’å®ŒæˆSQLè¯­å¥æ“ä½œï¼Œæ‰§è¡Œå‰ä¼šæ ¡éªŒè¯¥ç”¨æˆ·æœ‰æ²¡æœ‰æƒé™ï¼Œyes:å—²ç”¨æŸ¥è¯¢å¼•æ“ ï¼ˆnoï¼šè¿”å›é”™è¯¯ï¼‰</p><h4 id="3-å¹¶å‘å’Œå¹¶è¡Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸåŒæ­¥å’Œå¼‚æ­¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#3-å¹¶å‘å’Œå¹¶è¡Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸåŒæ­¥å’Œå¼‚æ­¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="3.å¹¶å‘å’Œå¹¶è¡Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸåŒæ­¥å’Œå¼‚æ­¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>3.å¹¶å‘å’Œå¹¶è¡Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŸåŒæ­¥å’Œå¼‚æ­¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p><strong>å¹¶å‘å’Œå¹¶è¡Œçš„åŒºåˆ«</strong></p><ul><li>å¹¶å‘ï¼šæŒ‡çš„æ˜¯ä¸¤ä¸ªåŠä¸¤ä¸ªä»¥ä¸Šçš„ä½œä¸šåœ¨åŒä¸€æ—¶é—´æ®µå†…æ‰§è¡Œï¼ˆå…±äº«æ—¶é—´ï¼šä¿©äººåœ¨ä¸€æ®µæ—¶é—´å†…å’¦å‰ä¸€åèµ°åŒä¸€æ¡è·¯ï¼‰</li><li>å¹¶è¡Œï¼šä¸¤ä¸ªåŠä¸¤ä¸ªä»¥ä¸Šçš„ä½œä¸šåœ¨åŒä¸€æ—¶åˆ»è¿›è¡Œï¼ˆå…±äº«ç©ºé—´ï¼šç›¸å½“äºä¿©äººåŒæ—¶å¹¶æ’èµ°ä¸€æ¡è·¯ï¼‰</li></ul><p>å…³é”®ç‚¹ï¼šæ˜¯<strong>ç©ºé—´å’Œæ—¶é—´å…±äº«</strong></p><p><strong>åŒæ­¥å’Œå¼‚æ­¥çš„åŒºåˆ«ï¼š</strong></p><ul><li>åŒæ­¥ï¼šå‘å‡ºä¸€ä¸ªè°ƒç”¨ï¼Œæ²¡æ”¶åˆ°ç»“æœä¹‹å‰ï¼Œè¯¥è°ƒç”¨å°±ä¸å¯ä»¥è¿”å›ä¸€ç›´ç­‰å¾…ï¼ˆå®‰å…¨æ€§é«˜æ•ˆç‡ä½ï¼‰</li><li>å¼‚æ­¥ï¼šè°ƒç”¨å‘å‡ºåï¼Œä¸ç”¨ç­‰å¾…è¿”å›ç»“æœï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œå½“ä»»åŠ¡å®Œæˆåå†è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼ˆå®‰å…¨æ€§ä½æ•ˆç‡é«˜ï¼‰</li></ul><h4 id="4-String-å’Œ-StringBufferã€StringBuilder-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#4-String-å’Œ-StringBufferã€StringBuilder-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="4. String å’Œ StringBufferã€StringBuilder çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>4. String å’Œ StringBufferã€StringBuilder çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>ä¸‰è€…éƒ½æ˜¯ç”¨æ¥å¤„ç†å­—ç¬¦ä¸²çš„ç±»ï¼Œä»–ä»¬çš„ä¸»è¦åŒºåˆ«åœ¨äºå¯å˜æ€§å’Œçº¿ç¨‹å®‰å…¨æ€§ï¼š</p><ul><li>Stringç±»ï¼šæ˜¯ä¸å¯å˜çš„åº•å±‚è¢«finalä¿®é¥°ï¼Œæ‰€ä»¥æ˜¯ä¸ªä¸å¯å˜çš„å¯¹è±¡ï¼Œæ¯æ¬¡è¿›è¡Œå­—ç¬¦ä¸²çš„ä¿®æ”¹å°±ä¼šäº§ç”Ÿæ–°çš„Stringå¯¹è±¡ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›</li><li>StringBufferï¼šå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„åº•å±‚æ˜¯char[],ä½†æ˜¯å®ƒçš„æ¯ä¸ªæ–¹æ³•ä¸Šè¢«åŠ äº†sychronizedï¼Œå®ƒçš„é•¿åº¦æ˜¯å¯å˜çš„ä¸»è¦ç”¨äºå­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼Œå†…éƒ¨ä¹Ÿå°è£…ä¹Ÿå¤šç§æ–¹æ³•</li><li>StringBuilderä»–å’ŒStringBufferåŠŸèƒ½ä¸€æ ·å”¯ä¸€çš„ä¸åŒå°±æ˜¯å®ƒæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œä»–ä»¬ä¸¤ä¸ªéƒ½æ˜¯æ“ä½œæœ¬èº«</li></ul><p>stringæ˜¯å­˜å‚¨åœ¨å­—ç¬¦ä¸²å¸¸é‡ç©ºé—´é‡Œçš„ã€StringBuildå­˜å‚¨åœ¨å †å†…å­˜é‡Œã€stringBufferå­˜å‚¨åœ¨å †å†…å­˜é‡Œ</p><h4 id="5-MySQL-ä¸­çš„ç´¢å¼•æ˜¯æ€ä¹ˆå®ç°çš„ï¼ŸB-æ ‘æ˜¯ä»€ä¹ˆï¼ŒB-æ ‘å’Œ-B-æ ‘çš„åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆ-MySQL-è¦ç”¨-B-æ ‘ï¼Ÿ"><a href="#5-MySQL-ä¸­çš„ç´¢å¼•æ˜¯æ€ä¹ˆå®ç°çš„ï¼ŸB-æ ‘æ˜¯ä»€ä¹ˆï¼ŒB-æ ‘å’Œ-B-æ ‘çš„åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆ-MySQL-è¦ç”¨-B-æ ‘ï¼Ÿ" class="headerlink" title="5. MySQL ä¸­çš„ç´¢å¼•æ˜¯æ€ä¹ˆå®ç°çš„ï¼ŸB+ æ ‘æ˜¯ä»€ä¹ˆï¼ŒB æ ‘å’Œ B+ æ ‘çš„åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆ MySQL è¦ç”¨ B+ æ ‘ï¼Ÿ"></a>5. MySQL ä¸­çš„ç´¢å¼•æ˜¯æ€ä¹ˆå®ç°çš„ï¼ŸB+ æ ‘æ˜¯ä»€ä¹ˆï¼ŒB æ ‘å’Œ B+ æ ‘çš„åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆ MySQL è¦ç”¨ B+ æ ‘ï¼Ÿ</h4><p>Mysqlçš„ç´¢å¼•æ˜¯ä¾é B+æ ‘æ¥å®ç°çš„ã€‚</p><p>B+æ ‘æ˜¯ä¸€ä¸ªå¤šè·¯æœç´¢æ ‘ï¼Œæ˜¯å¯¹Bæ ‘çš„ä¸€ä¸ªæ”¹è¿›</p><p><strong>B+æ ‘ï¼š</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303021728268.png" alt="B+æ ‘"></p><p><strong>Bæ ‘</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303022138478.jpeg" alt="Bæ ‘"></p><p><strong>B+æ ‘æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><p>B+æ ‘æ˜¯ä¸€ä¸ªå¤šå‰æ ‘ï¼Œå…¶éå¶å­èŠ‚ç‚¹éƒ½æ˜¯é”®å€¼çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå¯ä»¥å°†æ•°æ®æŒ‰ç…§ä¸€å®šçš„é¡ºåºç»„ç»‡èµ·æ¥ä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼›</p><p><strong>B+æ ‘å’ŒBæ ‘çš„åŒºåˆ«ï¼š</strong></p><ul><li>å¶å­èŠ‚ç‚¹ï¼ˆæœ€åº•éƒ¨çš„èŠ‚ç‚¹ï¼‰æ‰ä¼šå­˜æ”¾å®é™…æ•°æ®ï¼ˆç´¢å¼•+è®°å½•ï¼‰ï¼Œéå¶å­èŠ‚ç‚¹åªä¼šå­˜æ”¾ç´¢å¼•</li><li>æ‰€æœ‰ç´¢å¼•éƒ½ä¼šæœ‰å¶å­èŠ‚ç‚¹å‡ºç°ï¼Œå¶å­èŠ‚ç‚¹ä¹‹é—´æ„æˆä¸€ä¸ªæœ‰åºé“¾è¡¨</li><li>éå¶å­èŠ‚ç‚¹çš„ç´¢å¼•ä¹Ÿä¼šåŒæ—¶å­˜åœ¨äºå­èŠ‚ç‚¹ä¸­ï¼Œå¹¶ä¸”æ˜¯åœ¨å­èŠ‚ç‚¹ä¸­æ‰€æœ‰ç´¢å¼•çš„æœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰</li><li>éå¶å­èŠ‚ç‚¹ä¸­æœ‰å¤šå°‘ä¸ªå­èŠ‚ç‚¹ï¼Œå°±æœ‰å¤šå°‘ä¸ªç´¢å¼•</li></ul><p>æ€§èƒ½å·®åˆ«ï¼š</p><ol><li>å•ç‚¹æŸ¥è¯¢<ul><li>æ•°æ®é‡ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œç›¸æ¯”äºå­˜å‚¨åŠå­˜ç´¢å¼•åˆè®°å½•çš„Bæ ‘ï¼ŒB+æ ‘çš„éå¶å­èŠ‚ç‚¹å¯ä»¥å­˜æ”¾æ›´å¤šçš„ç´¢å¼•ï¼Œå› æ­¤B+æ ‘æ›´ã€çŸ®èƒ–ã€‘æŸ¥è¯¢åº•å±‚èŠ‚ç‚¹çš„ç£ç›˜I/Oæ¬¡æ•°ä¼šæ›´å°‘</li></ul></li><li>æ’å…¥å’Œåˆ é™¤çš„æ•ˆç‡<ul><li>å› ä¸ºæœ‰å†—ä½™èŠ‚ç‚¹çš„å­˜åœ¨ï¼ŒB+æ ‘çš„æ’å…¥å’Œåˆ é™¤æ•ˆç‡æ›´é«˜</li></ul></li><li>æŸ¥è¯¢èŒƒå›´<ul><li>B+æ ‘çš„æ‰€æœ‰å¶å­èŠ‚ç‚¹é—´è¿˜æœ‰ä¸€ä¸ªé“¾è¡¨è¿›è¡Œé“¾æ¥</li></ul></li></ol><p><strong>Mysqlä¸­çš„B+æ ‘ï¼š</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303022151984.png" alt="image.png"></p><p><strong>ä¸ºä»€ä¹ˆMysqlè¦ç”¨B+æ ‘ï¼Ÿ</strong></p><ul><li>B+æ ‘çš„éå¶å­èŠ‚ç‚¹ï¼Œä¸å­˜æ”¾å®é™…çš„è®°å½•æ•°æ®ï¼Œè¿›ä»…å­˜æ”¾ç´¢å¼•ï¼Œå› æ­¤æ•°æ®é‡ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œç›¸æ¯”äºå­˜å‚¨å³å­˜ç´¢å¼•åˆå­˜è®°å½•çš„Bæ ‘ï¼ŒB+æ ‘çš„éå¶å­èŠ‚ç‚¹å¯ä»¥å­˜æ”¾æ›´å¤šçš„ç´¢å¼•ï¼Œå› æ­¤B+æ ‘å¯ä»¥æ¯”Bæ ‘æ›´ã€çŸ®èƒ–ã€‘ï¼ŒæŸ¥è¯¢åº•å±‚èŠ‚ç‚¹çš„ç£ç›˜I/Oæ¬¡æ•°ä¼šæ›´å°‘</li><li>B+æ ‘ç§æœ‰å¤§é‡çš„å†—ä½™èŠ‚ç‚¹ï¼ˆæ‰€æœ‰çš„éå¶å­èŠ‚ç‚¹éƒ½æ˜¯å†—ä½™èŠ‚ç‚¹ï¼‰ï¼Œè¿™äº›å†—ä½™ç´¢å¼•è®©B+æ ‘åœ¨æ’å…¥ã€åˆ é™¤çš„æ•ˆç‡éƒ½å¾ˆé«˜ï¼Œæ¯”å¦‚åˆ é™¤æ ¹èŠ‚ç‚¹çš„æ—¶å€™ï¼Œä¸ä¼šåƒBæ ‘ä¸€æ ·å‘ç”Ÿå¤æ‚çš„æ ‘å˜åŒ–ï¼›</li><li>B+æ ‘å¶å­èŠ‚ç‚¹ä¹‹é—´ç”¨é“¾è¡¨é“¾æ¥èµ·æ¥äº†ï¼Œæœ‰åˆ©äºèŒƒå›´æŸ¥è¯¢ï¼Œè€ŒBæ ‘è¦å®ç°çš„èŒƒå›´æŸ¥è¯¢ï¼Œå› æ­¤åªèƒ½é€šè¿‡æ ‘çš„éå†æ¥å®ŒæˆèŒƒå›´çš„æŸ¥è¯¢ï¼Œè¿™ä¼šæ¶‰åŠå¤šä¸ªèŠ‚ç‚¹çš„ç£ç›˜I/Oæ“ä½œï¼ŒèŒƒå›´æŸ¥è¯¢æ•ˆç‡ä¸å¦‚B+æ ‘</li></ul><h4 id="6-Springä¸­éƒ½ç”¨åˆ°äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#6-Springä¸­éƒ½ç”¨åˆ°äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="6.Springä¸­éƒ½ç”¨åˆ°äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ"></a>6.Springä¸­éƒ½ç”¨åˆ°äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ</h4><ul><li>å•ä¾‹æ¨¡å¼ï¼šspringçš„Beané»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼ï¼Œé€šè¿‡Springå®¹å™¨IOCç®¡ç†Beançš„ç”Ÿå‘½å‘¨æœŸï¼Œåªè¢«åˆ›å»ºä¸€æ¬¡ï¼Œå¯ä»¥è¢«å¤ç”¨</li><li>å·¥å‚æ¨¡å¼ï¼šé€šè¿‡BeanFactoryå’ŒApplicationContextåˆ›å»ºå¹¶ä¸”ç®¡ç†Beanå¯¹è±¡</li><li>ä»£ç†æ¨¡å¼ï¼šSpring AOP åŸºäºåŠ¨æ€ä»£ç†æŠ€æœ¯é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæä¾›äº†AOPç¼–ç¨‹çš„æ”¯æŒ</li><li>è´£ä»»é“¾æ¨¡å¼ï¼šspringçš„è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨ä½¿ç”¨äº†è´£ä»»é“¾æ¨¡å¼ï¼Œå¤šä¸ªè¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨æŒ‰ç…§ä¸€å®šçš„é¡ºåºæ‰§è¡Œï¼Œæ¯ä¸ªè¿‡æ»¤å™¨å’Œæ‹¦æˆªå¯ä»¥æ‹¦æˆªè¯·æ±‚æˆ–è€…ç›¸åº”å¹¶ä½œå‡ºç›¸åº”çš„å¤„ç†</li></ul><h4 id="7-MySQL-äº‹åŠ¡æœ‰å“ªäº›éš”ç¦»çº§åˆ«ã€åˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œä»¥åŠ-MySQL-çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#7-MySQL-äº‹åŠ¡æœ‰å“ªäº›éš”ç¦»çº§åˆ«ã€åˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œä»¥åŠ-MySQL-çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="7.MySQL äº‹åŠ¡æœ‰å“ªäº›éš”ç¦»çº§åˆ«ã€åˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œä»¥åŠ MySQL çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>7.MySQL äº‹åŠ¡æœ‰å“ªäº›éš”ç¦»çº§åˆ«ã€åˆ†åˆ«æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œä»¥åŠ MySQL çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ul><li>è¯»æœªæäº¤<ul><li>å…è®¸ä¸€ä¸ªäº‹åŠ¡è¯»å–å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼Œè¿™ç§éš”ç¦»çº§åˆ«å®¹æ˜“å‡ºç°è„è¯»ã€ä¸å¯é‡å¤åº¦å’Œå¹»è¯»çš„é—®é¢˜</li></ul></li><li>è¯»å·²æäº¤<ul><li>ä¿é‡ä¸€ä¸ªäº‹åŠ¡æäº¤åæ‰èƒ½è¢«å¦ä¸€ä¸ªäº‹åŠ¡è¯»å–ï¼Œè¿™ç§éš”ç¦»çº§åˆ«é¿å…äº†è„è¯»çš„é—®é¢˜ï¼Œä½†æ˜¯ä»ç„¶ä¼šå‡ºç°ä¸å¯é‡å¤è¯»å’Œå¹»è¯»é—®é¢˜</li></ul></li><li>å¯é‡å¤è¯»<ul><li>ä¿è¯ä¸€ä¸ªäº‹åŠ¡åœ¨å¤šæ¬¡æ‰§è¡ŒåŒä¸€ä¸ªæŸ¥è¯¢æ—¶ï¼Œç»“æœæ˜¯ä¸€è‡´çš„ï¼Œé¿å…äº†è„è¯»å’Œä¸å¯é‡å¤è¯»é—®é¢˜ã€è¿™ç§éš”ç¦»çº§åˆ«å®¹æ˜“å‡ºç°å¹»è¯»</li></ul></li><li>ä¸²è¡ŒåŒ–<ul><li>æœ€é«˜çº§åˆ«çš„éš”ç¦»çº§åˆ«ï¼Œä¿è¯äº‹åŠ¡çš„ä¸²è¡ŒåŒ–æ‰§è¡Œï¼Œé¿å…äº†è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼Œå¹»è¯»çš„é—®é¢˜ï¼Œä½†æ˜¯æ•ˆç‡å¾ˆä½</li></ul></li></ul><p>â€‹    Mysqlçš„é»˜è®¤çº§åˆ«æ˜¯å¯é‡å¤è¯»ï¼Œå› ä¸ºåœ¨å¤§å¤šæ•°åº”ç”¨ä¸­ï¼Œå¯é‡å¤è¯»çº§åˆ«èƒ½å¤Ÿæä¾›è¶³å¤Ÿçš„éš”ç¦»æ€§ï¼ŒåŒæ—¶æ€§èƒ½ç›¸å¯¹è¾ƒå¥½ï¼Œéš”ç¦»çº§åˆ«éœ€è¦æŒ‰åœºæ™¯æ¥è¿›è¡Œè°ƒæ•´ï¼Œå¦‚åœ¨é«˜å¹¶å‘æƒ…å†µä¸‹ï¼Œéœ€è¦å°†éš”ç¦»çº§åˆ«è°ƒæ•´ä¸ºè¯»å·²æäº¤æˆ–è€…åºåˆ—åŒ–æ¥æé«˜æ•ˆç‡ã€‚</p><h4 id="8-Redisçš„å•çº¿ç¨‹æ¨¡å‹ï¼ŒIO-å¤šè·¯å¤ç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#8-Redisçš„å•çº¿ç¨‹æ¨¡å‹ï¼ŒIO-å¤šè·¯å¤ç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="8.Redisçš„å•çº¿ç¨‹æ¨¡å‹ï¼ŒIO å¤šè·¯å¤ç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>8.Redisçš„å•çº¿ç¨‹æ¨¡å‹ï¼ŒIO å¤šè·¯å¤ç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p><strong>Redisçš„å•çº¿ç¨‹æ¨¡å‹ï¼š</strong></p><p>Redisæ˜¯åŸºäºå†…å­˜çš„é«˜æ€§èƒ½é”®å€¼å­˜å‚¨ç³»ç»Ÿã€é‡‡ç”¨å•çº¿ç¨‹æ¨¡å‹è®¾è®¡ã€åœ¨Redisä¸­æ‰€æœ‰çš„å®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½æ˜¯æœ‰ä¸€ä¸ª<strong>å•çº¿ç¨‹è¿›è¡Œå¤„ç†</strong>ï¼Œè¿™ä¸ªå•çº¿ç¨‹ä¸æ–­çš„ä»å®¢æˆ·ç«¯å¥—æ¥å­—è¯»å–å‘½ä»¤è¯·æ±‚ï¼Œå¹¶å°†å‘½ä»¤è¯·æ±‚æ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ—ä¸­ã€Redisçš„äº‹æƒ…å¤„ç†å™¨ä¼šæŒ‰ç…§ä¸€å®šçš„è§„åˆ™é€‰æ‹©ä¸€ä¸ªè¯·æ±‚è¿›è¡Œå¤„ç†ã€å¤„ç†å®Œæ¯•åå°†ç›¸åº”ç»“æœè¿”å›å®¢æˆ·ç«¯ã€‚</p><p>â€‹    <strong>ä¼˜åŠ¿ï¼š</strong></p><ol><li>ç®€å•é«˜æ•ˆï¼šå•çº¿ç¨‹é¿å…äº†å¤šçº¿ç¨‹ä¹‹é—´çš„ç«äº‰å’Œä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€å¯ä»¥æ›´é«˜æ•ˆçš„åˆ©ç”¨CUPå’Œå†…å­˜èµ„æº</li><li>å¯é æ€§é«˜ï¼šå•çº¿ç¨‹é¿å…äº†å¤šçº¿ç¨‹ä¹‹é—´ç«äº‰å’Œæ­»é”çš„é—®é¢˜ï¼Œæé«˜ç³»ç»Ÿçš„å¯é æ€§</li><li>æ˜“äºç»´æŠ¤ï¼šå•çº¿ç¨‹ç®€åŒ–äº†Redisçš„ä»£ç ç»“æ„å’Œç½‘ç»œé€šä¿¡ã€‚</li></ol><p><strong>Redisçš„IOå¤šè·¯å¤ç”¨ï¼š</strong></p><p>æŒ‡çš„æ˜¯åˆ©ç”¨æ“ä½œç³»ç»Ÿçš„ä¸€äº›ç‰¹æ€§ï¼Œé€šè¿‡ç›‘å¬å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦æ¥å®ç°åŒæ—¶å¤„ç†å¤šä¸ªè¿æ¥çš„I/Oæ“ä½œï¼Œåœ¨Redisä¸­é€šè¿‡ä½¿ç”¨å¤šè·¯å¤ç”¨æŠ€æœ¯ã€ä¸»çº¿ç¨‹å¯ä»¥åŒæ—¶ç›‘å¬å¤šä¸ªå®¢æˆ·ç«¯çš„è¿æ¥ã€å½“æŸä¸ªå®¢æˆ·ç«¯å‡ºç°äº†I/Oäº‹ä»¶æ—¶ï¼Œä¸»çº¿ç¨‹ä¾¿å¯ä»¥åŠæ—¶çš„å¤„ç†è¯¥äº‹ä»¶ï¼Œä»è€Œæé«˜äº†Redisçš„I/Oæ•ˆç‡</p><h4 id="9-ä»€ä¹ˆæ˜¯-BIOã€NIOã€AIOï¼Ÿ"><a href="#9-ä»€ä¹ˆæ˜¯-BIOã€NIOã€AIOï¼Ÿ" class="headerlink" title="9. ä»€ä¹ˆæ˜¯ BIOã€NIOã€AIOï¼Ÿ"></a>9. ä»€ä¹ˆæ˜¯ BIOã€NIOã€AIOï¼Ÿ</h4><p>ä¸‰è€…éƒ½æ˜¯Javaä¸­å…³äºç½‘ç»œç¼–ç¨‹çš„ä¸åŒå®ç°æ–¹å¼ï¼Œä¸»è¦çš„åŒºåˆ«åœ¨äºIOæ“ä½œçš„æ–¹å¼å’Œå®ç°æ–¹å¼ã€‚</p><ul><li>BIOï¼ˆåŒæ­¥é˜»å¡IOï¼‰</li></ul><p>æŒ‡çš„æ˜¯<strong>åœ¨IOæ“ä½œæ—¶ï¼Œå¿…é¡»ç­‰å¾…IOå®Œæˆæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥çš„æ“ä½œ</strong>ï¼Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œæ¯ä¸ªé“¾æ¥éƒ½éœ€è¦ç‹¬ç«‹çš„çº¿ç¨‹å®Œæˆæ•°æ®çš„è¯»å–å’Œå¤„ç†ï¼Œå¦‚æœè¿æ¥æ•°è¿‡å¤šï¼Œä¼šå¯¼è‡´ç³»ç»Ÿèµ„æºæ¶ˆè€—ä¸¥é‡ï¼Œæ€§èƒ½ä¸‹é™ã€‚åœ¨å®¢æˆ·ç«¯ï¼Œå¦‚æœè¿æ¥è¿œç¨‹æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ç›¸åº”æ—¶é—´è¿‡é•¿ï¼Œå®¢æˆ·ç«¯ä¼šä¸€ç›´ç­‰å¾…ï¼Œé€ æˆå µå¡ã€‚<strong>å®ƒçš„å¹¶å‘æ€§ä½ã€‚</strong></p><ul><li>NIOï¼ˆåŒæ­¥éé˜»å¡IOï¼‰</li></ul><p>æŒ‡çš„æ˜¯åœ¨è¿›è¡ŒIOæ“ä½œæ—¶ä¸éœ€è¦ç­‰å¾…IOå®Œæˆæ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼Œè€Œæ˜¯é€šè¿‡è½®è¯¢æœºåˆ¶æ¥å®ç°IOæ“ä½œçš„å¼‚æ­¥æ‰§è¡Œã€‚åœ¨<strong>æœåŠ¡å™¨ç«¯</strong>ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ªè¿æ¥çš„æ•°æ®è¯»å†™ï¼Œå¤§å¤§é™ä½äº†ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œæ€§èƒ½ï¼Œåœ¨<strong>å®¢æˆ·ç«¯</strong>ï¼Œè¿æ¥è¿œç¨‹æœåŠ¡å™¨æ—¶ï¼Œå¦‚æœæœåŠ¡å™¨å“åº”æ—¶é—´è¿‡é•¿ï¼Œå®¢æˆ·ç«¯å¯ä»¥è¿›è¡Œå…¶ä»–æ“ä½œï¼Œä¸ä¼šé€ æˆå µå¡ï¼Œè™½ç„¶å¼¥è¡¥äº†å¹¶å‘èƒ½åŠ›ï¼Œ<strong>NIOä»£ç æ¯”è¾ƒå¤æ‚</strong>ï¼Œé€‚åˆçš„åœºæ™¯<strong>è¿æ¥æ•°å¤šè€Œä¸”å˜åŒ–è¾ƒå°‘</strong></p><ul><li>AIO(å¼‚æ­¥éé˜»å¡IO)</li></ul><p>java1.7ä¹‹åå¢åŠ çš„IOæ¨¡å‹ï¼Œå®ƒæ”¯æŒ<strong>å¼‚æ­¥éIOæ“ä½œ</strong>ï¼Œä¸NIOåŒºåˆ«<strong>ä¸éœ€è¦åƒNIOä¸€æ ·è½®è¯¢</strong>ï¼Œè€Œæ˜¯é€šè¿‡<strong>å›è°ƒå‡½æ•°</strong>çš„æ–¹å¼åœ¨æ•°æ®å‡†å¤‡å¥½åé€šçŸ¥åº”ç”¨ç¨‹åºè¿›è¡Œæ•°æ®çš„è¯»å–ï¼Œè¿™æ ·å¯ä»¥æ›´åŠ é«˜æ•ˆçš„åˆ©ç”¨ç³»ç»Ÿçš„èµ„æºï¼Œæé«˜ååé‡ï¼Œä»£ç å®ç°å¤æ‚ï¼Œ<strong>è¿æ¥æ•°éå¸¸å¤šè€Œä¸”è¿æ¥æ—¶é—´è¾ƒé•¿</strong></p><h4 id="10-Redis-åŸºç¡€ç±»å‹ä¸­çš„-String-åº•å±‚å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#10-Redis-åŸºç¡€ç±»å‹ä¸­çš„-String-åº•å±‚å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="10. Redis åŸºç¡€ç±»å‹ä¸­çš„ String åº•å±‚å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ"></a>10. Redis åŸºç¡€ç±»å‹ä¸­çš„ String åº•å±‚å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>Redisçš„åº•å±‚å®ç°ç±»å‹æ˜¯ä¸€ä¸ªåŠ¨æ€çš„å­—ç¬¦ä¸²SDSï¼Œä»–æ²¡æœ‰ç›´æ¥å¤ç”¨Cè¯­è¨€çš„å­—ç¬¦ä¸²è€Œæ˜¯æ–°å»ºäº†å±äºè‡ªå·±çš„ç»“æ„SDSï¼ŒRedisä¸­æ‰€æœ‰çš„é”®éƒ½æ˜¯ç”±å­—ç¬¦ä¸²å¯¹è±¡å®ç°çš„å³åº•å±‚éƒ½æ˜¯SDSï¼›å®ƒçš„ä¼˜åŠ¿ï¼š</p><ul><li>å­—ç¬¦ä¸²çš„é•¿åº¦å¤„ç†ï¼šç›´æ¥è®°å½•å½“å‰çš„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæ—¶é—´å¤æ‚åº¦Oï¼ˆ1ï¼‰ï¼Œç›¸æ¯”äºCè¯­è¨€çš„æ—¶é—´å¤æ‚åº¦O(n)å¼ºæ‚äº†äº¿ç‚¹ç‚¹</li><li>å†…å­˜çš„é‡æ–°åˆ†é…ï¼Œå…ˆè¯´Cè¯­è¨€ï¼Œä¼šå‡ºç°æ•°ç»„ä¸‹æ ‡è¶Šçº§æˆ–è€…å†…å­˜åˆ†é…æº¢å‡ºï¼Œç„¶è€Œï¼SDSæœ‰ä¸¤ä¸ªé‡è¦çš„ç©ºé—´ç®¡ç†æ–¹æ¡ˆ<ul><li>ç©ºé—´é¢„åˆ†é…ï¼šSDSä¿®æ”¹åï¼Œlené•¿åº¦å°äº1Mï¼Œå°†ä¼šåˆ†é…ç›¸åŒé•¿åº¦çš„æœªä½¿ç”¨ç©ºé—´ï¼Œåä¹‹ï¼Œå°†ä¼šåˆ†é…1Mçš„ä½¿ç”¨ç©ºé—´</li><li>æƒ°æ€§ç©ºé—´é‡Šæ”¾ï¼šSDSç¼©çŸ­æ—¶å¹¶ä¸ä¼šå›æ”¶å¤šä½™çš„å†…å­˜ç©ºé—´ï¼Œè€Œæ˜¯ä½¿ç”¨freeå­—æ®µå°†å¤šå‡ºæ¥çš„ç©ºé—´è®°å½•ä¸‹æ¥ï¼Œå¦‚æœæœ‰åç»­å˜æ›´æ“ä½œç›´æ¥ä½¿ç”¨freeè®°å½•çš„ç©ºé—´</li></ul></li><li>äºŒè¿›åˆ¶å®‰å…¨ï¼šæ ¹æ®lençš„é•¿åº¦æ¥åˆ¤æ–­å­—ç¬¦ä¸²çš„ç»“æŸï¼Œè€ŒCè¯­è¨€æ—¶è¯»å–â€˜\0â€™ å¯èƒ½å­˜åœ¨æå‰ç»“æŸæƒ…å†µ</li><li>SDS å¯¹å†…å­˜çš„åˆ†é…å’Œé‡Šæ”¾è¿›è¡Œäº†å°è£…ï¼Œä½¿å¾—å­—ç¬¦ä¸²çš„ç©ºé—´å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œå¢é•¿æˆ–ç¼©å‡ï¼Œé¿å…äº† C è¯­è¨€å­—ç¬¦ä¸²éœ€è¦æ‰‹åŠ¨åˆ†é…ç©ºé—´çš„é—®é¢˜ã€‚</li><li>æä¾›äº†å­—ç¬¦ä¸²è¿½åŠ æ“ä½œï¼Œå¯ä»¥åœ¨ O(1) çš„æ—¶é—´å†…å®Œæˆè¿½åŠ æ“ä½œã€‚</li></ul><h4 id="11-Springã€SpringMVCã€SpringBoot-ä¸‰è€…ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ"><a href="#11-Springã€SpringMVCã€SpringBoot-ä¸‰è€…ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ" class="headerlink" title="11. Springã€SpringMVCã€SpringBoot ä¸‰è€…ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ"></a>11. Springã€SpringMVCã€SpringBoot ä¸‰è€…ä¹‹é—´æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</h4><p>Springã€SpringMVCã€SpringBoot æ˜¯<strong>ä¸‰ä¸ªç‹¬ç«‹çš„æ¡†æ¶</strong>ï¼Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»æ˜¯ï¼š</p><ul><li>springæ˜¯ä¸€ä¸ªå¼€æºçš„è½»é‡çº§javaå¼€å‘æ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ç­‰ï¼Œå¯ä»¥ä½¿å¾—javaå¼€å‘æ›´ç®€å•ã€é«˜æ•ˆã€çµæ´»å’Œå¯ç»´æŠ¤å®ƒæä¾›äº†IOCå’ŒAOPçš„æ”¯æŒï¼Œç”¨äºæ„å»ºä¼ä¸šçº§çš„é¡¹ç›®ï¼ŒspringåŒ…å«å¤šä¸ªæ¨¡å—Spring Coreã€Spring Contextã€Spring JDBC ã€Spring Webç­‰æ¯ä¸ªæ¨¡å—æä¾›äº†ä¸åŒçš„åŠŸèƒ½ã€‚</li><li>Spring MVCæ˜¯springæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯åŸºäºMVCï¼ˆmodel ã€viewã€Controllerï¼‰è®¾è®¡æ¨¡å¼çš„æ¡†æ¶ï¼Œç”¨äºæ„å»ºwebæ¡†æ¶ï¼Œå®ƒæä¾›äº†æ§åˆ¶å™¨ã€è§†å›¾è§£æå™¨ã€æ•°æ®ç»‘å®šã€å¼‚å¸¸å¤„ç†ç­‰ä½¿å¾—å¼€å‘webåº”ç”¨ç¨‹åºæ›´åŠ ç®€å•ã€springMVCä¹Ÿæ”¯æŒrestfulæ¶æ„</li><li>springboot æ˜¯åŸºäºspringæ¡†æ¶çš„ä¸€ä¸ªå¼€å‘æ¡†æ¶ï¼Œç”¨äºå¿«é€Ÿæ„å»ºç‹¬ç«‹çš„ç”Ÿäº§çº§åˆ«çš„springåº”ç”¨ç¨‹åºï¼Œå®ƒé€šè¿‡è‡ªåŠ¨é…ç½®å’Œçº¦å®šä¼˜äºé…ç½®çš„æ–¹å¼ï¼Œç®€åŒ–äº†springåº”ç”¨ç¨‹åºçš„é…ç½®å’Œå¼€å‘è¿‡ç¨‹ï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ã€springbooté›†æˆäº†å¾ˆå¤šå¸¸ç”¨çš„ç¬¬ä¸‰æ–¹åº“å’Œå·¥å…·ä¾‹å¦‚springDataã€spring Securityã€Thymeleafã€Logbackç­‰ã€sprinbootå†…ç½®äº†tomcatå’ŒUndertowç­‰æœåŠ¡å™¨ï¼Œä¸éœ€è¦åƒSSMä¸€æ ·è‡ªå·±å»é…ç½®Tomcatç¯å¢ƒç®€åŒ–äº†å¼€å‘</li></ul><p>å› æ­¤springBootå¯ä»¥çœ‹ä½œæ˜¯åœ¨springçš„åŸºç¡€ä¸Šï¼Œé€šè¿‡è‡ªåŠ¨é…ç½®å’Œçº¦å®šä¼˜äºé…ç½®çš„æ–¹å¼ï¼Œæä¾›äº†æ›´åŠ æ–¹ä¾¿çš„ä½“éªŒã€springMVCåˆ™æ˜¯åœ¨springçš„æ¡†æ¶ä¸­æ„å»ºwebåº”ç”¨ç¨‹åº æ¨¡å—.</p><h4 id="12-æ„å‘é”æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå®ƒæ˜¯è¡¨çº§é”è¿˜æ˜¯è¡Œçº§é”ï¼Ÿ"><a href="#12-æ„å‘é”æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå®ƒæ˜¯è¡¨çº§é”è¿˜æ˜¯è¡Œçº§é”ï¼Ÿ" class="headerlink" title="12.æ„å‘é”æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå®ƒæ˜¯è¡¨çº§é”è¿˜æ˜¯è¡Œçº§é”ï¼Ÿ"></a>12.æ„å‘é”æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå®ƒæ˜¯è¡¨çº§é”è¿˜æ˜¯è¡Œçº§é”ï¼Ÿ</h4><p>æ„å‘é”æ˜¯ä¸€ç§ MySQL æ•°æ®åº“ä¸­çš„é”ï¼Œç”¨äºè¡¨çº§é”åè°ƒå¤šä¸ªè¡Œçº§é”çš„ä½¿ç”¨ã€‚åœ¨è¡¨çº§é”å®šä¸€ä¸ªè¡¨ä¹‹å‰ï¼ŒMySQL éœ€è¦å…ˆè·å¾—ä¸€ä¸ªæ„å‘é”ï¼Œä»¥è¡¨æ˜è¦è·å–çš„é”ç±»å‹ï¼ˆè¯»é”æˆ–å†™é”ï¼‰ï¼Œé¿å…å…¶ä»–äº‹åŠ¡é”å®šæ•´ä¸ªè¡¨æˆ–é”å®šä¸€éƒ¨åˆ†è¡¨æ—¶å¼•å‘æ­»é”ã€‚</p><ul><li><strong>æ„å‘é”æ˜¯ä»€ä¹ˆï¼Ÿ</strong><ul><li>ä½¿ç”¨InnoDBå¼•æ“è¡¨é‡Œæ—¶å¯¹æŸäº›è®°å½•åŠ ä¸Šã€å…±äº«é”ã€‘ä¹‹å‰ï¼Œéœ€è¦å…ˆåœ¨è¡¨çº§åˆ«ä¸ŠåŠ ä¸Šä¸€ä¸ªã€æ„å‘å…±äº«é”ã€‘</li><li>ä½¿ç”¨InnoDBå¼•æ“è¡¨é‡Œæ—¶å¯¹æŸäº›è®°å½•åŠ ä¸Šã€ç‹¬å é”ã€‘ä¹‹å‰ï¼Œéœ€è¦å…ˆåœ¨è¡¨çº§åˆ«ä¸ŠåŠ ä¸Šä¸€ä¸ªã€æ„å‘ç‹¬å é”ã€‘</li></ul></li><li><strong>æ„å‘é”çš„ä½œç”¨</strong></li></ul><p>æ„å‘é”æ˜¯è¡¨çº§é”ï¼Œä¸ä¼šå’Œè¡Œçº§çš„å…±äº«é”å’Œç‹¬å é”å‘ç”Ÿå†²çªï¼Œè€Œä¸” æ„å‘é”ä¹‹é—´ä¹Ÿä¸ä¼šå‘ç”Ÿå†²çªã€åªä¼šå’Œ<strong>å…±äº«é”</strong>å’Œ<strong>ç‹¬å è¡¨é”</strong>å‘ç”Ÿå†²çªã€‚</p><p>æ„å‘é”å¯ä»¥æé«˜æ•°æ®åº“å¹¶å‘æ€§èƒ½ï¼Œé˜²æ­¢æ­»é”çš„å‘ç”Ÿã€‚å®ƒæ˜¯è¡¨çº§é”ï¼Œè€Œä¸æ˜¯è¡Œçº§é”ã€‚</p><p>è¡¨é”å’Œè¡Œé”æ˜¯æ»¡è¶³è¯»è¯»å…±äº«ã€è¯»å†™äº’æ–¥ã€å†™å†™äº’æ–¥çš„</p><p>ä½œç”¨ï¼š<strong>ä¸ºäº†å¿«é€Ÿåˆ¤æ–­è¡¨é‡Œæ˜¯å¦æœ‰è®°å½•è¢«åŠ é”</strong></p><ul><li>å¦‚æœ<strong>æ²¡æœ‰æ„å‘é”</strong>ï¼Œé‚£ä¹ˆåŠ ç‹¬å è¡¨é”æ—¶ï¼Œå°±éœ€è¦éå†è¡¨é‡Œçš„æ‰€æœ‰è®°å½•ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰è®°å½•å­˜åœ¨ç‹¬å é”ã€è¿™æ ·æ•ˆç‡ä¼šç‰¹åˆ«æ…¢</li><li>æœ‰äº†æ„å‘é”ï¼ŒåŠ ã€ç‹¬å è¡¨é”ã€‘å‰ï¼Œå…ˆå›åŠ ä¸Šè¡¨çº§åˆ«çš„æ„å‘ç‹¬å é”ã€é‚£ä¹ˆåœ¨åŠ ã€ç‹¬å è¡¨é”ã€‘æ—¶ï¼Œç›´æ¥æŸ¥è¯¥è¡¨æ˜¯å¦æœ‰æ„å‘ç‹¬å é”ã€å¦‚æœæœ‰åˆ™æ„å‘³ç€è¡¨é‡Œé¢å·²ç»æœ‰è®°å½•è¢«åŠ äº†ç‹¬å é”ã€è¿™æ ·å°±ä¸ç”¨éå†è¡¨é‡Œé¢çš„å†…å®¹</li></ul><p>â€‹    <strong>æ„å‘é”æ˜¯è¡¨çº§é”è¿˜æ˜¯è¡Œçº§é”</strong></p><p>è¡¨çº§é”æœ‰ï¼šè¡¨é”ã€å…ƒæ•°æ®é”ã€<strong>æ„å‘é”</strong>ã€AUTO-INCé” </p><p><strong>å…¶ä»–ï¼š</strong></p><p>æ™®é€šçš„selectæ˜¯ä¸ä¼šåŠ è¡Œçº§é”çš„ã€æ™®é€šçš„selectè¯­å¥æ˜¯åˆ©ç”¨MVCCå®ç°çš„ä¸€è‡´æ€§è¯»æ˜¯æ— é”çš„ã€ä¸è¿‡selectä¹Ÿæ˜¯å¯ä»¥å¯¹è®°å½•åŠ å…±äº«é”å’Œç‹¬å é”çš„ã€‚</p><h4 id="13ã€ç¡¬é“¾æ¥å’Œè½¯è¿æ¥æ˜¯ä»€ä¹ˆï¼ŒäºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#13ã€ç¡¬é“¾æ¥å’Œè½¯è¿æ¥æ˜¯ä»€ä¹ˆï¼ŒäºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="13ã€ç¡¬é“¾æ¥å’Œè½¯è¿æ¥æ˜¯ä»€ä¹ˆï¼ŒäºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>13ã€ç¡¬é“¾æ¥å’Œè½¯è¿æ¥æ˜¯ä»€ä¹ˆï¼ŒäºŒè€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>åœ¨ Linux æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œç¡¬é“¾æ¥ï¼ˆhard linkï¼‰å’Œè½¯é“¾æ¥ï¼ˆsymbolic linkï¼‰éƒ½æ˜¯ä¸€ç§æ–‡ä»¶é“¾æ¥çš„æ–¹å¼ï¼Œå¯ä»¥ç”¨äºå°†ä¸€ä¸ªæ–‡ä»¶é“¾æ¥åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ä¸Šã€‚å®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨äºåˆ›å»ºæ–¹å¼ã€æ‰€å ç©ºé—´å’Œä½¿ç”¨é™åˆ¶ç­‰æ–¹é¢ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303161435329.png" alt="image-20230316143503168"></p><p><strong>ç¡¬é“¾æ¥ï¼š</strong></p><p>Linuxä¸‹æ–‡ä»¶æ—¶é€šè¿‡ç´¢å¼•èŠ‚ç‚¹Inodeæ¥è¯†åˆ«æ–‡ä»¶ï¼Œç¡¬é“¾æ¥å½“ä¸­ã€å¤šä¸ªæ–‡ä»¶åå¯ä»¥æŒ‡å‘åŒä¸€ä¸ªç´¢å¼•èŠ‚ç‚¹ï¼Œå½“åˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥çš„æ—¶å€™ï¼Œæ–‡ä»¶ç³»ç»Ÿä¼šç»´æŠ¤ä¸€ä¸ªå¼•ç”¨è®¡æ•°ã€åªè¦æœ‰æ–‡ä»¶æŒ‡å‘è¿™ä¸ª åŒºå—ï¼Œä»–å°±ä¸ä¼šä»ç¡¬ç›˜ä¸­æ¶ˆå¤±ã€ä¸¤ä¸ªæ–‡ä»¶æ‹¥æœ‰ç›¸åŒçš„inodeã€é€šè¿‡æŸ¥çœ‹æ–‡ä»¶å†…å®¹ä¹Ÿä¼šå‘ç°æ˜¯åŒä¸€ä¸ªæ–‡ä»¶ï¼Œåªåˆ é™¤ä¸€ä¸ªè¿æ¥å¹¶ä¸å½±å“ç´¢å¼•èŠ‚ç‚¹æœ¬èº«å’Œå…¶ä»–çš„è¿æ¥ã€åªæœ‰å½“æœ€åä¸€ä¸ªè¿æ¥ä¹Ÿè¢«åˆ é™¤åæ–‡ä»¶çš„æ•°æ®å—åŠç›®å½•çš„è¿æ¥æ‰ä¼šè¢«é‡Šæ”¾ï¼Œä¹Ÿå°±æ˜¯çœŸæ­£çš„åˆ é™¤(ä¸€å¥è¯ç¡¬é“¾æ¥å°±æ˜¯å•çº¯çš„copyä¸€ä»½ä¹Ÿå°±æ˜¯é•œåƒæ–‡ä»¶ï¼Œè¦æƒ³åˆ é™¤å®Œæ¯•å¿…é¡»å…¨éƒ¨åˆ é™¤)</p><p><strong>è½¯è¿æ¥ï¼š</strong></p><p>åˆå«åšç¬¦å·è¿æ¥ã€è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†å¦ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„åï¼Œè½¯è¿æ¥å¯ä»¥æ˜¯ä»»æ„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¯ä»¥è¿æ¥ä¸åŒçš„ç³»ç»Ÿæ–‡ä»¶ã€åœ¨å¯¹ç¬¦å·æ–‡ä»¶è¿›è¡Œè¯»æˆ–å†™æ“ä½œçš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†è¿™äº›æ“ä½œè½¬æ¢ä¸ºå¯¹æºæ–‡ä»¶çš„æ“ä½œã€ä½†åˆ é™¤é“¾æ¥æ–‡ä»¶æ—¶ï¼Œç³»ç»Ÿä»…ä»…åˆ é™¤é“¾æ¥æ–‡ä»¶è€Œä¸æ˜¯åˆ é™¤æºæ–‡ä»¶æœ¬èº«ï¼ˆä¸€å¥è¯ç±»ä¼¼äºæ¡Œé¢çš„å¿«æ·æ–¹å¼èƒ½å¿«é€Ÿæ‰“å¼€ï¼Œä½†æ˜¯æ— æ³•ä»æ ¹åº•åˆ é™¤ï¼‰</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303161443166.jpeg" alt="img"></p><h4 id="14-JVM-å†…å­˜æ¨¡å‹ï¼Œåˆ†ä¸ºå“ªäº›åŒºåŸŸï¼Ÿå„åŒºåŸŸçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#14-JVM-å†…å­˜æ¨¡å‹ï¼Œåˆ†ä¸ºå“ªäº›åŒºåŸŸï¼Ÿå„åŒºåŸŸçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="14.JVM å†…å­˜æ¨¡å‹ï¼Œåˆ†ä¸ºå“ªäº›åŒºåŸŸï¼Ÿå„åŒºåŸŸçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>14.JVM å†…å­˜æ¨¡å‹ï¼Œåˆ†ä¸ºå“ªäº›åŒºåŸŸï¼Ÿå„åŒºåŸŸçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p><strong>åˆ’åˆ†åŒºåŸŸï¼š</strong></p><p>è¿è¡Œæ—¶çš„æ•°æ®åŒºï¼šç¨‹åºè®¡æ•°å™¨ã€javaè™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€javaå †ã€æ–¹æ³•åŒº</p><ul><li>ç¨‹åºè®¡æ•°å™¨ï¼šæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„ç¨‹åºè®¡æ•°å™¨ï¼Œç”¨äºæŒ‡ç¤ºå½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤çš„è¡Œå·ï¼Œä»¥ä¾¿çº¿ç¨‹æ‰§è¡Œæ—¶èƒ½å¤Ÿå›åˆ°æ­£ç¡®çš„ä½ç½®ã€‚æ˜¯ä¸ªçº¿ç¨‹ä¸å…±äº«åŒºåŸŸï¼Œå¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œ Nativeæ–¹æ³•ï¼Œè®¡æ•°å™¨å€¼ä¸ºç©ºã€‚</li><li>javaè™šæ‹Ÿæœºæ ˆï¼šä¹Ÿæˆä¸ºjavaæ–¹æ³•æ ˆï¼Œç”¨äºå­˜æ”¾æ–¹æ³•æ‰§è¡Œæ—¶çš„å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œä¸€ä¸ªæ–¹æ³•æ—¶éƒ½ä¼šä¸ºè¯¥æ–¹æ³•åˆ†é…ä¸€ä¸ªæ ˆå¸§ã€å¹¶å°†æ ˆå¸§å‹å…¥è™šæ‹Ÿæœºæ ˆï¼Œå½“æ–¹æ³•æ‰§è¡Œå®Œæ¯•åã€è™šæ‹Ÿæœºä¼šå°†å…¶å‡ºæ ˆã€‚çº¿ç¨‹ä¸å…±äº«åŒºåŸŸ</li><li>æœ¬åœ°æ–¹æ³•æ ˆï¼šç±»ä¼¼äºjavaè™šæ‹Ÿæœºæ ˆï¼Œé¢å‘çš„nativeæ–¹æ³•çº¿ç¨‹ä¸å…±äº«åŒºåŸŸ</li><li>å †ï¼šå­˜æ”¾å¯¹è±¡å®åˆ—ï¼šçº¿ç¨‹å…±äº«åŒºåŸŸ</li><li>æ–¹æ³•åŒºï¼šç”¨äºå­˜å‚¨å·²ç»è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€æ–¹æ³•åŒºä¹Ÿæ˜¯è¢«çº¿ç¨‹æ‰€å…±äº«çš„</li><li>è¿è¡Œæ—¶çš„å¸¸é‡æ± ï¼šæ—¶æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜å‚¨ç¼–è¯‘æœŸé—´ç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚</li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303161454441.png" alt="image-20230316145426321"></p><h4 id="15-æœ‰å“ªäº›æ³¨è§£å¯ä»¥æ³¨å…¥-Beanï¼Ÿ-Autowired-å’Œ-Resource-çš„åŒºåˆ«ï¼Ÿ"><a href="#15-æœ‰å“ªäº›æ³¨è§£å¯ä»¥æ³¨å…¥-Beanï¼Ÿ-Autowired-å’Œ-Resource-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="15.æœ‰å“ªäº›æ³¨è§£å¯ä»¥æ³¨å…¥ Beanï¼Ÿ@Autowired å’Œ @Resource çš„åŒºåˆ«ï¼Ÿ"></a>15.æœ‰å“ªäº›æ³¨è§£å¯ä»¥æ³¨å…¥ Beanï¼Ÿ@Autowired å’Œ @Resource çš„åŒºåˆ«ï¼Ÿ</h4><p>springå†…ç½®çš„@Autowiredä»¥åŠJDKå†…ç½®çš„@Resourceå’Œ@Injectéƒ½å¯ä»¥æ³¨å…¥Bean</p><p>@Autowireå’Œ@Resourceç”¨çš„å¤š</p><ul><li>@Autowireæ˜¯springæä¾›çš„æ³¨è§£ã€@Resourceæ˜¯JDKæä¾›çš„æ³¨è§£</li><li>@Autowireé»˜è®¤çš„æ³¨å…¥æ–¹æ³•æ˜¯byTypeï¼ˆæ ¹æ®ç±»å‹è¿›è¡ŒåŒ¹é…ï¼‰@Resourceé»˜è®¤çš„æ–¹å¼æ˜¯ByNameï¼ˆæ ¹æ®åå­—è¿›è¡ŒåŒ¹é…ï¼‰</li><li>å½“ä¸€ä¸ªæ¥å£å­˜åœ¨å¤šä¸ªå®ç°ç±»çš„æƒ…å†µä¸‹ã€@Autowireå’Œ@Resourceéƒ½éœ€è¦é€šè¿‡åç§°æ‰èƒ½æ­£ç¡®çš„åŒ¹é…åˆ°å¯¹åº”çš„Beanï¼ŒAutowireå¯ä»¥é€šè¿‡@Qualifieræ³¨è§£æ¥æŒ‡å®šåç§°ï¼Œ@Resourceå¯ä»¥é€šè¿‡nameå±æ€§æ¥æŒ‡å®š</li></ul><h4 id="16-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Œçº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€ï¼Œä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ"><a href="#16-çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Œçº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€ï¼Œä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ" class="headerlink" title="16.çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Œçº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€ï¼Œä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ"></a>16.çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆï¼Œçº¿ç¨‹æœ‰å‡ ç§çŠ¶æ€ï¼Œä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ</h4><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303161501277.png" alt="image-20230316150137090"></p><ul><li>ã€åˆå§‹çŠ¶æ€ã€‘:åˆ›å»ºçº¿ç¨‹å¯¹è±¡</li><li>ã€å¯è¿è¡ŒçŠ¶æ€ã€‘ï¼šï¼ˆå°±ç»ªçŠ¶æ€ï¼‰æŒ‡è¯¥çº¿ç¨‹å·²ç»è¢«åˆ›å»ºï¼Œå¯ä»¥ç”±CPUè°ƒåº¦è¿è¡Œ</li><li>ã€è¿è¡ŒçŠ¶æ€ã€‘ï¼šæŒ‡è·å–CPUæ—¶é—´ç‰‡è¿è¡Œä¸­çš„çŠ¶æ€å½“CPUæ—¶é—´ç”¨å®Œï¼Œä¼šä»ã€è¿è¡ŒçŠ¶æ€ã€‘è½¬æ¢ä¸ºå¯è¿è¡ŒçŠ¶æ€ï¼Œä¼šå¯¼è‡´çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢</li><li>ã€é˜»å¡çŠ¶æ€ã€‘ï¼šå¦‚æœè°ƒç”¨äº†é˜»å¡APIå¦‚BIOè¯»å†™æ–‡ä»¶ã€è¿™æ—¶è¯¥çº¿ç¨‹å®é™…ä¸ä¼šç”¨åˆ°CPUï¼Œä¼šå¯¼è‡´çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢</li><li>ã€ç»ˆæ­¢çŠ¶æ€ã€‘ï¼šè¡¨ç¤ºçº¿ç¨‹å·²ç»æ‰§è¡Œå®Œæ¯•ã€ç”Ÿå‘½å‘¨æœŸå·²ç»ç»“æŸã€ä¸ä¼šå†è½¬æ¢ä¸ºå…¶ä»–çŠ¶æ€</li></ul><p>çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼šCPUé€šè¿‡åˆ†é…æ—¶é—´ç‰‡æ¥æ‰§è¡Œä»»åŠ¡ï¼Œå½“ä¸€ä¸ªä»»åŠ¡çš„æ—¶é—´ç‰‡ç”¨å®Œï¼Œå°±ä¼šåˆ‡æ¢åˆ°å¦ä¸€ä¸ªä»»åŠ¡ï¼Œåœ¨åˆ‡æ¢ä¹‹å‰ä¼šä¿å­˜ä¸Šä¸€ä¸ªä»»åŠ¡çš„çŠ¶æ€ï¼Œå½“ä¸‹æ¬¡å†åˆ‡æ¢åˆ°è¯¥ä»»åŠ¡ï¼Œå°±ä¼šåŠ è½½è¿™ä¸ªçŠ¶æ€</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303161512149.png" alt="image-20230316151226093"></p><h4 id="17-ä»€ä¹ˆæ˜¯ç½‘å…³ï¼Œç½‘å…³æœ‰å“ªäº›ä½œç”¨ï¼Ÿ"><a href="#17-ä»€ä¹ˆæ˜¯ç½‘å…³ï¼Œç½‘å…³æœ‰å“ªäº›ä½œç”¨ï¼Ÿ" class="headerlink" title="17. ä»€ä¹ˆæ˜¯ç½‘å…³ï¼Œç½‘å…³æœ‰å“ªäº›ä½œç”¨ï¼Ÿ"></a>17. ä»€ä¹ˆæ˜¯ç½‘å…³ï¼Œç½‘å…³æœ‰å“ªäº›ä½œç”¨ï¼Ÿ</h4><p><strong>ä»€ä¹ˆæ˜¯ç½‘å…³ï¼š</strong>æ˜¯è¿æ¥ä¸¤ä¸ªæˆ–è€…å¤šä¸ªä¸åŒçš„ç½‘ç»œè®¾å¤‡ï¼Œå¯ä»¥å®ç°åè®®çš„è½¬æ¢ï¼Œæ•°æ®çš„è½¬å‘å’Œå®‰å…¨ç­–ç•¥çš„å®ç°åŠŸèƒ½ã€ç®€å•æ¥è¯´ç½‘å…³æ˜¯è®¾å¤‡ä¸è·¯ç”±å™¨ä¹‹é—´çš„æ¡¥æ¢ï¼Œç”±å®ƒå°†ä¸åŒçš„ç½‘ç»œé—´è¿›è¡Œè®¿é—®æ§åˆ¶ï¼Œè½¬æ¢äº¤æ¥ç­‰ç­‰</p><p>å¸¸è§çš„ç½‘å…³æœ‰ï¼šåº”ç”¨ç½‘å…³ã€åè®®ç½‘å…³ã€å®‰å…¨ç½‘å…³</p><p><strong>ä½œç”¨ï¼š</strong></p><ul><li>å®ç°åè®®çš„è½¬æ¢ï¼šä¸åŒç½‘ç»œä¹‹é—´é€šå¸¸ä½¿ç”¨ä¸åŒçš„ç½‘ç»œåè®®ï¼Œé€šè¿‡ç½‘å…³å¯ä»¥å®ç°åè®®çš„è½¬æ¢ã€‚ä½¿å¾—ä¸åŒç½‘ç»œä¹‹é—´èƒ½å¤Ÿç›¸äº’é€šä¿¡</li><li>æä¾›æ•°æ®è½¬å‘åŠŸèƒ½ï¼šç½‘å…³å¯ä»¥ä¼ è¾“çš„æ•°æ®è¿›è¡Œè¿‡æ»¤ã€è·¯ç”±è½¬å‘ç­‰å¤„ç†ã€ç¡®ä¿æ•°æ®çš„å®‰å…¨æœ‰æ•ˆ</li><li>å®ç°å®‰å…¨ç­–ç•¥ï¼šç½‘å…³å¯ä»¥å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡ŒåŠ å¯†ã€è®¤è¯æˆæƒç­‰æ“ä½œã€ä¿è¯æ•°æ®çš„å®‰å…¨æ€§å’Œå¯é æ€§</li><li>æä¾›ç¼“å­˜åŠŸèƒ½ï¼šç½‘å…³å¯ä»¥å°† ä¸€éƒ¨åˆ†çš„æ•°æ®ç¼“å­˜èµ·æ¥ï¼Œæé«˜æ•°æ®çš„è®¿é—®é€Ÿåº¦å’Œå“åº”æ€§èƒ½ã€‚</li><li>æ”¯æŒè´Ÿè½½å‡è¡¡ï¼šç½‘å…³å¯ä»¥å°†è¯·æ±‚åˆ†é…åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€æé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ€§èƒ½</li><li>å®ç°è®¿é—®æ§åˆ¶ï¼šç½‘å…³å¯ä»¥å¯¹è®¿é—®è¿›è¡Œæ§åˆ¶é˜²æ­¢æœªæˆæƒçš„è®¿é—®å’Œæ”»å‡»ï¼Œæé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§</li></ul><p>ç½‘å…³å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š</p><ol><li>åº”ç”¨ç½‘å…³ï¼šç”¨äºåº”ç”¨å±‚åè®®çš„å¤„ç†ï¼šå¦‚HTTpã€STMPç­‰</li><li>æ•°æ®åº“ç½‘å…³ï¼šç”¨äºæ•°æ®åº“çš„è®¿é—®çš„æ§åˆ¶å’Œç®¡ç†</li><li>é€šä¿¡ç½‘å…³ï¼šç”¨äºä¸åŒé€šä¿¡åè®®ä¹‹é—´çš„æ•°æ®äº¤æ¢å¦‚TCP/IPã€UDP/IPç­‰</li><li>APIç½‘å…³ï¼šç”¨äºç®¡ç†APIè¯·æ±‚ï¼Œå®ç°APIçš„æˆæƒã€é™æµã€ç›‘æ§ç­‰åŠŸèƒ½</li></ol><h4 id="18-ä½¿ç”¨-Redis-å®ç°ä¸€ä¸ªæ’è¡Œæ¦œï¼Ÿ"><a href="#18-ä½¿ç”¨-Redis-å®ç°ä¸€ä¸ªæ’è¡Œæ¦œï¼Ÿ" class="headerlink" title="18.ä½¿ç”¨ Redis å®ç°ä¸€ä¸ªæ’è¡Œæ¦œï¼Ÿ"></a>18.ä½¿ç”¨ Redis å®ç°ä¸€ä¸ªæ’è¡Œæ¦œï¼Ÿ</h4><p>ä¸»è¦ä½¿ç”¨çš„æ˜¯ZSetè¿›è¡Œå®ç°ï¼Œä¸‹é¢æ˜¯ä¸ºä»€ä¹ˆé€‰ç”¨ZSetï¼š</p><ul><li>æœ‰åºæ€§ï¼šæ’è¡Œæ¦œè‚¯å®šéœ€è¦å®ç°ä¸€ä¸ªæ’åºçš„åŠŸèƒ½ï¼Œåœ¨Redisä¸­æœ‰åºçš„æ•°æ®ç»“æ„æœ‰Listå’ŒZSetï¼›</li><li>æ”¯æŒåˆ†æ•°æ“ä½œï¼šZSetå¯ä»¥å¯¹é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œï¼Œååˆ†è´´åˆæ’è¡Œæ¦œä¸­ç”¨æˆ·åˆ†æ•°åŠ¨æ€å˜åŒ–çš„åœºæ™¯ï¼Œè€ŒListå¹¶ä¸èƒ½é’ˆå¯¹åˆ†æ•°è¿›è¡Œæ“ä½œï¼Œåªæœ‰å…¶ä¸­çš„valueè¿›è¡Œæ“ä½œï¼›</li><li>æ”¯æŒèŒƒå›´æŸ¥è¯¢ï¼šZSetå¯ä»¥æŒ‰ç…§åˆ†æ•°è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼Œå¦‚æ’è¡Œæ¦œä¸­çš„Top10éœ€æ±‚å°±å¯é€šè¿‡è¯¥ç‰¹æ€§è¿›è¡Œå®ç°ï¼›</li><li>æ”¯æŒå»é‡ï¼šç”±äºZSetå±äºSetçš„ç‰¹æ®Šæ•°æ®ç»“æ„ï¼Œå› æ­¤åŒæ ·æ‹¥æœ‰Setä¸å¯é‡å¤çš„ç‰¹æ€§ï¼Œå¯¹äºæ’è¡Œæ¦œä¸­ä¸å¯å‡ºç°é‡å¤é¡¹çš„éœ€æ±‚ä¹Ÿååˆ†è´´åˆï¼Œè€ŒListåªèƒ½æ‰‹åŠ¨å»é‡ã€‚</li></ul><p>å› æ­¤é€‰æ‹©Zsetå®ç°æ’è¡Œæ¦œç›¸å¯¹listä¼šæ›´åŠ åˆé€‚é«˜æ•ˆ:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"># æ·»åŠ ç¤ºä¾‹æ•°æ®<br>ZADD scores <span class="hljs-number">90</span> <span class="hljs-string">"å¼ ä¸‰"</span><br>ZADD scores <span class="hljs-number">85</span> <span class="hljs-string">"æå››"</span><br>ZADD scores <span class="hljs-number">95</span> <span class="hljs-string">"ç‹äº”"</span><br>ZADD scores <span class="hljs-number">92</span> <span class="hljs-string">"èµµå…­"</span><br># æŸ¥è¯¢æ’åå‰<span class="hljs-number">3</span>çš„å­¦ç”Ÿä¿¡æ¯<br>ZRANGE scores <span class="hljs-number">0</span> <span class="hljs-number">2</span> WITHSCORES<br># æŸ¥è¯¢æ’åå‰<span class="hljs-number">3</span>çš„æ‰“å°<br><span class="hljs-number">1</span>) <span class="hljs-string">"ç‹äº”"</span><br><span class="hljs-number">2</span>) <span class="hljs-string">"95"</span><br><span class="hljs-number">3</span>) <span class="hljs-string">"èµµå…­"</span><br><span class="hljs-number">4</span>) <span class="hljs-string">"92"</span><br><span class="hljs-number">5</span>) <span class="hljs-string">"å¼ ä¸‰"</span><br><span class="hljs-number">6</span>) <span class="hljs-string">"90"</span><br># åˆ é™¤å­¦ç”Ÿâ€œæå››â€çš„æˆç»©ä¿¡æ¯<br>ZREM scores <span class="hljs-string">"æå››"</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>ä¸‹é¢æ˜¯SpringBootæ•´åˆRedisè¿›è¡Œå®ç°</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// æ·»åŠ å­¦ç”Ÿæˆç»©</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addScore</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> score)</span> {<br>    redisTemplate.opsForZSet().add(<span class="hljs-string">"scores"</span>, name, score);<br>}<br><br><span class="hljs-comment">// æŸ¥è¯¢æ’åå‰Nçš„å­¦ç”Ÿæˆç»©</span><br><span class="hljs-keyword">public</span> List&lt;Map.Entry&lt;String, Double&gt;&gt; getTopScores(<span class="hljs-type">int</span> n) {<br>    <span class="hljs-keyword">return</span> redisTemplate.opsForZSet().reverseRangeWithScores(<span class="hljs-string">"scores"</span>, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>)<br>            .stream()<br>            .map(tuple -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbstractMap</span>.SimpleEntry&lt;&gt;(tuple.getValue(), tuple.getScore()))<br>            .collect(Collectors.toList());<br>}<br><br><span class="hljs-comment">// åˆ é™¤æŸä¸ªå­¦ç”Ÿçš„æˆç»©</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeScore</span><span class="hljs-params">(String name)</span> {<br>    redisTemplate.opsForZSet().remove(<span class="hljs-string">"scores"</span>, name);<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="19-Nginx-æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ"><a href="#19-Nginx-æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="19.Nginx æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ"></a>19.Nginx æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ</h4><p>Nginxæ˜¯ä¸€æ¬¾é«˜æ€§èƒ½çš„WebæœåŠ¡å™¨è½¯ä»¶ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨ã€è´Ÿè½½å‡è¡¡å™¨ã€httpç¼“å­˜å’Œå®‰å…¨é˜²æŠ¤ç­‰å¤šç§ç”¨é€”ï¼ŒNginxå¯ä»¥å°†æœåŠ¡å™¨ä¸Šçš„é™æ€æ–‡ä»¶ï¼ˆhtmlã€cssã€å›¾ç‰‡ï¼‰é€šè¿‡HTTPåè®®è¿”å›ç»™æµè§ˆå™¨å®¢æˆ·ç«¯ã€‚åŒæ—¶Nginxæ˜¯åŸºäºRESTæ¶æ„é£æ ¼ã€ä»¥ç»Ÿä¸€èµ„æºæè¿°ç¬¦URLæˆ–è€…ç»Ÿä¸€èµ„æºå®šä½ç¬¦URLä½œä¸ºæ²Ÿé€šä¾æ®ï¼Œé€šè¿‡HTTPåè®®æä¾›å„ç§ç½‘ç»œæœåŠ¡ã€‚å®ƒæ”¯æŒé«˜è¾¾50000ä¸ªå¹¶å‘è¿æ¥æ•°</p><p>Nginxçš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p><ul><li>WebæœåŠ¡å™¨ï¼šNginxå¯ä»¥ä½œä¸ºWebæœåŠ¡å™¨ï¼Œæä¾›é™æ€æ–‡ä»¶å’ŒåŠ¨æ€æ–‡ä»¶ï¼ˆå¦‚PHPï¼‰çš„å¤„ç†ï¼Œé™æ€HTMLé¡µé¢ï¼ŒCSSã€JavaScriptã€å›¾ç‰‡ç­‰ï¼Œå®ƒèƒ½å¤Ÿå¿«é€Ÿå“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæé«˜ç½‘ç«™çš„è®¿é—®é€Ÿåº¦ã€‚</li><li>åå‘ä»£ç†æœåŠ¡å™¨ï¼šNginxå¯ä»¥ä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°åç«¯æœåŠ¡å™¨ï¼Œå®ç°è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨æ€§</li><li>è´Ÿè½½å‡è¡¡å™¨ï¼šNginxå¯ä»¥ä½œä¸ºè´Ÿè½½å‡è¡¡å™¨ï¼Œå°†å®¢æˆ·ç«¯çš„è¯·æ±‚å‡è¡¡åˆ†é…åˆ°å¤šä¸ªåº”ç”¨æœåŠ¡å™¨ä¸Šï¼Œä»è€Œè¾¾åˆ°åˆ†æ‘Šè´Ÿè½½çš„æ•ˆæœã€æé«˜ç³»ç»Ÿçš„å¯é æ€§å’Œæ€§èƒ½</li><li>HTTPç¼“å­˜ï¼šNginxå¯ä»¥ä½œä¸ºHTTPç¼“å­˜ï¼Œç¼“å­˜é™æ€æ–‡ä»¶å’ŒåŠ¨æ€æ–‡ä»¶ï¼Œä»è€Œå‡å°‘åç«¯åº”ç”¨æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œæé«˜ç½‘ç«™çš„è®¿é—®é€Ÿåº¦</li><li>å®‰å…¨é˜²æŠ¤æœåŠ¡å™¨ï¼šNginxå¯ä»¥ä½œä¸ºå®‰å…¨é˜²æŠ¤æœåŠ¡å™¨ï¼Œé€šè¿‡è®¾ç½®é˜²ç«å¢™ï¼Œåå‘ä»£ç†ç­‰æŠ€æœ¯ï¼Œé˜²æ­¢æ¶æ„æ”»å‡»å’ŒDDosæ”»å‡»ï¼Œä¿éšœç½‘ç«™çš„å®‰å…¨æ€§ã€‚</li><li>WebSocketæœåŠ¡å™¨ï¼šNginxæ”¯æŒWebSocketåè®®ï¼Œå¯ä»¥ä½œä¸ºWebSocketæœåŠ¡å™¨ï¼Œå®ç°å®æ—¶é€šä¿¡å³æ—¶èŠå¤©ç­‰åŠŸèƒ½</li><li>Nginxæ”¯æŒçƒ­éƒ¨ç½²ã€å¯åŠ¨ç®€å•å¯ä»¥åšåˆ°7*24å°æ—¶ä¸é—´æ–­è¿è¡Œä¸éœ€è¦é‡æ–°å¯åŠ¨</li></ul><h4 id="Redis-çš„æŒä¹…åŒ–æœºåˆ¶æœ‰å“ªäº›ï¼Ÿè¯´è¯´å„è‡ªçš„ä¼˜ç¼ºç‚¹å’Œåº”ç”¨åœºæ™¯ï¼Ÿ"><a href="#Redis-çš„æŒä¹…åŒ–æœºåˆ¶æœ‰å“ªäº›ï¼Ÿè¯´è¯´å„è‡ªçš„ä¼˜ç¼ºç‚¹å’Œåº”ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="Redis çš„æŒä¹…åŒ–æœºåˆ¶æœ‰å“ªäº›ï¼Ÿè¯´è¯´å„è‡ªçš„ä¼˜ç¼ºç‚¹å’Œåº”ç”¨åœºæ™¯ï¼Ÿ"></a>Redis çš„æŒä¹…åŒ–æœºåˆ¶æœ‰å“ªäº›ï¼Ÿè¯´è¯´å„è‡ªçš„ä¼˜ç¼ºç‚¹å’Œåº”ç”¨åœºæ™¯ï¼Ÿ</h4><p>Redisçš„æŒä¹…åŒ–åŒ…æ‹¬RDBå¿«ç…§å’ŒAOFæ—¥å¿—ä¸¤ç§æŒä¹…åŒ–æ–¹å¼ï¼Œå¿«ç…§æ˜¯ä¸€æ¬¡å…¨é‡çš„å¤‡ä»½ï¼ŒAOFæ—¥å¿—æ˜¯è¿ç»­çš„å¢é‡å¤‡ä»½ï¼Œå¿«ç…§æ˜¯å†…å­˜æ•°æ®çš„äºŒè¿›åˆ¶åºåˆ—åŒ–å½¢å¼ï¼Œåœ¨å­˜å‚¨ä¸Šéå¸¸ç´§å‡‘ï¼Œè€ŒAOFæ—¥å¿—è®°å½•çš„æ˜¯å†…å­˜æ•°æ®ä¿®æ”¹çš„æŒ‡ä»¤è®°å½•æ–‡æœ¬ã€‚</p><p><strong>RDBï¼ˆé»˜è®¤ï¼‰çš„ä¼˜ç¼ºç‚¹ï¼š</strong></p><ul><li>ä¼˜ç‚¹ï¼šRDBæ–‡ä»¶å°ï¼Œé€‚åˆå®šæ—¶å¤‡ä»½ï¼Œç”¨äºç¾éš¾æ¢å¤ï¼ŒRedisåŠ è½½RDBæ–‡ä»¶çš„é€Ÿåº¦æ¯”AOFå¿«å¾ˆå¤šã€å› ä¸ºRDBæ–‡ä»¶ä¸­ç›´æ¥å­˜å‚¨çš„æ—¶å†…å­˜æ•°æ®ï¼Œè€ŒAOFæ–‡ä»¶å­˜å‚¨çš„æ˜¯ä¸€æ¡æ¡å‘½ä»¤ï¼Œéœ€è¦é‡æ¼”å‘½ä»¤ã€‚</li><li>ç¼ºç‚¹ï¼šRDBæ— æ³•åšåˆ°å®æ—¶çš„æŒä¹…åŒ–ï¼Œè‹¥åœ¨ä¸¤æ¬¡çš„bgsaveï¼ˆbackground saveï¼‰é—´å®•æœºï¼Œåˆ™ä¼šä¸¢å¤±åŒºé—´ï¼ˆåˆ†é’Ÿçº§ï¼‰çš„å¢é‡æ•°æ®ï¼Œä¸é€‚ç”¨äºå®æ—¶æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ï¼ŒRDBçš„cowï¼ˆCopy On Writeï¼‰æœºåˆ¶ä¸­ï¼Œfockå­è¿›ç¨‹å±äºé‡é‡çº§æ“ä½œï¼Œè€Œä¸”ä¼šé˜»å¡redisçš„ä¸»è¿›ç¨‹ã€‚å­˜åœ¨è€ç‰ˆæœ¬çš„redisä¸å…¼å®¹æ–°ç‰ˆæœ¬çš„RDBæ ¼å¼æ–‡ä»¶é—®é¢˜</li></ul><p><strong>AOFæ—¥å¿—ï¼ˆAppend only fileï¼‰ä¼˜ç¼ºç‚¹ï¼š</strong></p><p>AOFæ—¥å¿—ä¼šåœ¨æŒç»­è¿è¡Œä¸­æŒç»­çš„å¢å¤§ï¼Œéœ€è¦å®šæœŸçš„è¿›è¡ŒAOFé‡å†™ï¼Œå¯¹AOFè¿›è¡Œç˜¦èº«</p><p><strong>ä¼˜ç‚¹ï¼š</strong>AOFåªæ˜¯è¿½åŠ å†™æ—¥å¿—æ–‡ä»¶ã€å¯¹æœåŠ¡å™¨æ€§èƒ½å½±å“è¾ƒå°ã€é€Ÿåº¦æ¯”RDBè¦å¿«ã€å¯ä»¥ä¿è¯æ•°æ®ä¸ä¼šå› ä¸ºæ–­ç”µæˆ–è€…å´©æºƒç­‰åŸå› ä¸¢å¤±ï¼›é€‚ç”¨äºå¯¹æ•°æ®å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„åœºæ™¯</p><p><strong>ç¼ºç‚¹ï¼š</strong>AOFæ–¹å¼ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶å¤ªå¤§ï¼Œéœ€è¦ä¸æ–­çš„AOFé‡å†™ï¼Œè¿›è¡Œç˜¦èº«ã€‚å³ä½¿ç»è¿‡AOFé‡å†™ç˜¦èº«ï¼Œç”±äºæ–‡ä»¶æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡ä»¶ä½“ç§¯è¾ƒå¤§ï¼ˆç›¸å¯¹äºRDBçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ã€‚AOFé‡æ¼”å‘½ä»¤å¼çš„æ¢å¤æ•°æ®é€Ÿåº¦æ¯”RDBè¦æ…¢.<a href="https://zhuanlan.zhihu.com/p/126327543">RedisæŒä¹…åŒ–</a></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303171502847.png" alt="image-20230317150220593"></p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaåŸºç¡€åˆ·é¢˜</title>
      <link href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Java%E5%9F%BA%E7%A1%80%E5%88%B7%E9%A2%98/"/>
      <url>/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Java%E5%9F%BA%E7%A1%80%E5%88%B7%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h4 id="1-ç»§æ‰¿è‡ª-Collection-æ¥å£çš„å®¹å™¨"><a href="#1-ç»§æ‰¿è‡ª-Collection-æ¥å£çš„å®¹å™¨" class="headerlink" title="1.ç»§æ‰¿è‡ª Collection æ¥å£çš„å®¹å™¨"></a>1.ç»§æ‰¿è‡ª Collection æ¥å£çš„å®¹å™¨</h4><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/837161_1488616442711_250E74268F38A4202D8C30E4329DEBCC" alt="img"></p><p><strong>äºŒ.å±€éƒ¨å†…éƒ¨ç±»å¯ä»¥ç”¨å“ªäº›ä¿®é¥°ç¬¦ä¿®é¥°</strong></p><p>å±€éƒ¨å†…éƒ¨ç±»æ˜¯æ”¾åœ¨ä»£ç å—æˆ–æ–¹æ³•ä¸­çš„ï¼Œä¸èƒ½æœ‰è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦ï¼Œä¸”ä¸èƒ½ç”¨staticä¿®é¥°</p><p>1ã€å†…éƒ¨ç±»ä¸èƒ½è¢«publicã€privateã€staticä¿®é¥°ï¼›</p><p>2ã€åœ¨å¤–éƒ¨ç±»ä¸­ä¸èƒ½åˆ›å»ºå†…éƒ¨ç±»çš„å®ä¾‹ï¼›</p><p>3ã€åˆ›å»ºå†…éƒ¨ç±»çš„å®ä¾‹åªèƒ½åœ¨åŒ…å«ä»–çš„æ–¹æ³•ä¸­ï¼›</p><p>4ã€å†…éƒ¨ç±»è®¿é—®åŒ…å«ä»–çš„æ–¹æ³•ä¸­çš„å˜é‡å¿…é¡»æœ‰finalä¿®é¥°ï¼›</p><p>5ã€å¤–éƒ¨ç±»ä¸èƒ½è®¿é—®å±€éƒ¨å†…éƒ¨ç±»ï¼Œåªèƒ½åœ¨æ–¹æ³•ä½“ä¸­è®¿é—®å±€éƒ¨å†…éƒ¨ç±»ï¼Œä¸”è®¿é—®å¿…é¡»åœ¨å†…éƒ¨ç±»å®šä¹‰ä¹‹åã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230120205310361.png" alt="image-20230120205310361"></p><p>â‘ å®ä¾‹åŒ–ï¼šæ˜¯æŠŠç±»åˆ›å»ºä¸ºå¯¹è±¡çš„è¿‡ç¨‹ã€‚æ ¼å¼ä¸€èˆ¬ä¸º:ï½›ç±»å å¯¹è±¡å = new ç±»åï¼ˆå‚æ•°1ï¼Œå‚æ•°2â€¦å‚æ•°nï¼‰æ„æˆï½ï¼Œä¹Ÿå°±æ˜¯newå¯¹è±¡ã€‚</p><p>â‘¡åºåˆ—åŒ–ï¼šå°†å¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯è½¬æ¢ä¸ºå¯ä»¥å­˜å‚¨æˆ–ä¼ è¾“çš„å½¢å¼çš„è¿‡ç¨‹(å¯¹è±¡è½¬åŒ–ä¸ºå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹)ã€‚åºåˆ—åŒ–æœŸé—´ï¼Œå¯¹è±¡å°†å…¶å½“å‰çŠ¶æ€å†™å…¥åˆ°ä¸´æ—¶æˆ–æŒä¹…æ€§å­˜å‚¨åŒºã€‚</p><p>â‘¢ååºåˆ—åŒ–:æŠŠå­—èŠ‚åºåˆ—æ¢å¤ä¸ºå¯¹è±¡çš„è¿‡ç¨‹ç§°ä¸ºå¯¹è±¡çš„ååºåˆ—åŒ–ã€‚</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Data0bjectå¯¹è±¡ä¸­çš„wordå’Œiçš„å€¼åˆ†åˆ«ä¸º <br>  é™æ€æˆå‘˜å±äºç±»çº§åˆ«çš„ï¼Œæ‰€ä»¥ä¸èƒ½åºåˆ—åŒ–ï¼Œåºåˆ—åŒ–åªæ˜¯åºåˆ—åŒ–äº†å¯¹è±¡è€Œå·²ï¼Œè¿™é‡Œâ€œä¸èƒ½åºåˆ—åŒ–â€çš„æ„æ€æ˜¯åºåˆ—åŒ–ä¿¡æ¯ä¸­ä¸åŒ…å«è¿™ä¸ªé™æ€æˆå‘˜åŸŸï¼Œå¦‚æœæµ‹è¯•éƒ½åœ¨åŒä¸€ä¸ªæœºå™¨ï¼ˆè€Œä¸”æ˜¯åŒä¸€ä¸ªè¿›ç¨‹ï¼‰ï¼Œå› ä¸ºè¿™ä¸ªjvmå·²ç»æŠŠiåŠ è½½è¿›æ¥äº†ï¼Œæ‰€ä»¥è·å–çš„æ˜¯åŠ è½½å¥½çš„iï¼Œå³2ï¼Œå¦‚æœæ˜¯ä¼ åˆ°å¦ä¸€å°æœºå™¨æˆ–è€…å…³æ‰ç¨‹åºé‡æ–°å†™ä¸ªç¨‹åºè¯»å…¥ï¼Œæ­¤æ—¶å› ä¸ºåˆ«çš„æœºå™¨æˆ–æ–°çš„è¿›ç¨‹æ˜¯é‡æ–°åŠ è½½içš„ï¼Œæ‰€ä»¥iä¿¡æ¯å°±æ˜¯åˆå§‹æ—¶çš„ä¿¡æ¯ï¼Œå³0ã€‚æ‰€ä»¥ï¼Œæ€»ç»“æ¥çœ‹ï¼Œé™æ€æˆå‘˜æ˜¯ä¸èƒ½è¢«åºåˆ—åŒ–çš„ï¼Œé™æ€æˆå‘˜å®šä»¥åçš„é»˜è®¤åˆå§‹å€¼æ˜¯0ï¼Œæ‰€ä»¥ç»“æœiæ˜¯0 <br>  ä¸€å®šè¦æ³¨æ„æ˜¯åœ¨ å¦å¤–ä¸€ä¸ªjvmä¸­<br></code></pre></td></tr></tbody></table></figure><ul><li>Javaå¼‚å¸¸å’Œé”™è¯¯çš„åŸºç±»Throwable,åŒ…æ‹¬Exceptionå’ŒError</li><li>javaæ˜¯é¢å‘å¯¹è±¡çš„ï¼Œä½†æ˜¯ä¸æ˜¯æ‰€æœ‰çš„éƒ½æ˜¯å¯¹è±¡ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å°±ä¸æ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥æ‰ä¼šæœ‰å°è£…ç±»çš„ï¼›</li><li>åƒåœ¾å›æ”¶å™¨å¹¶ä¸æ€»æ˜¯å·¥ä½œï¼Œåªæœ‰å½“å†…å­˜èµ„æºå‘Šæ€¥æ—¶ï¼Œåƒåœ¾å›æ”¶å™¨æ‰ä¼šå·¥ä½œï¼›</li><li><p>å³ä½¿åƒåœ¾å›æ”¶å™¨å·¥ä½œï¼Œfinalizeæ–¹æ³•ä¹Ÿä¸ä¸€å®šå¾—åˆ°æ‰§è¡Œï¼Œè¿™æ˜¯ç”±äºç¨‹åºä¸­çš„å…¶ä»–çº¿ç¨‹çš„ä¼˜å…ˆçº§è¿œè¿œé«˜äºæ‰§è¡Œfinalizeï¼ˆï¼‰å‡½æ•°çº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚</p></li><li><p>è®¿é—®æƒé™æ§åˆ¶ä»æœ€å¤§æƒé™åˆ°æœ€å°æƒé™ä¾æ¬¡ä¸ºï¼špublic ã€protectedã€åŒ…è®¿é—®æƒé™ï¼ˆé»˜è®¤è®¿é—®æƒé™ï¼‰ã€private</p></li><li>HttpServletResponseæ–¹æ³•è°ƒç”¨å®¢æˆ·ç«¯å›åº”äº†ä¸€ä¸ªå®šåˆ¶çš„HTTPå›åº”å¤´:response.setHeader(â€œX-MyHeaderâ€,â€34â€)  response.addHeader(â€œX-Headerâ€,â€34â€)</li><li>å±€éƒ¨å˜é‡ä¸èƒ½ç”¨staticæ¥ä¿®é¥°</li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230120211012620.png" alt="image-20230120211012620"></p><ul><li>LinkedListæ˜¯ç»§æ‰¿è‡ªAbstractSequentialListï¼ˆæŠ½è±¡ç±»ï¼Œå®ç°äº†Listæ¥å£ï¼‰çš„ï¼Œå¹¶ä¸”å®ç°äº†Listæ¥å£ã€‚</li><li>AbstractSetæ˜¯å®ç°äº†Setæ¥å£çš„ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ç»§æ‰¿è‡ªAbstractCollectionï¼ˆæŠ½è±¡ç±»ï¼Œå®ç°äº†Collectionæ¥å£ï¼‰</li><li>HashSetæ˜¯ç»§æ‰¿è‡ªAbstractSetï¼Œå®ç°äº†Setæ¥å£ã€‚</li><li>WeakMapä¸å­˜åœ¨äºjavaé›†åˆæ¡†æ¶çš„ã€‚åªæœ‰ä¸€ä¸ªå«åšWeakHashMapï¼ˆç»§æ‰¿è‡ªAbstractMapï¼‰ã€‚</li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/740942_1470042423855_86F5A9F9F791DD7EA7C96F158F0FEA87" alt="img"></p><ul><li>æ–¹æ³•é‡è½½æ˜¯ä¸€ä¸ªç±»ä¸­å®šä¹‰äº†å¤šä¸ªæ–¹æ³•åç›¸åŒçš„å‡½æ•°ï¼Œè€Œä»–ä»¬çš„å‚æ•°çš„æ•°é‡ä¸åŒæˆ–è€…æ•°é‡ç›¸åŒè€Œç±»å‹æ¬¡åºä¸åŒ</li><li>æ–¹æ³•é‡å†™æ˜¯åœ¨å­ç±»å’Œçˆ¶ç±»çš„å‡½æ•°åå­—ç›¸åŒè€Œä¸”å‚æ•°çš„ä¸ªæ•°ä¸ç±»å‹ä¸€æ ·,è¿”å›å€¼ä¹Ÿä¸€æ ·çš„æ–¹æ³•,å°±ç§°ä¸ºé‡å†™(Overriding)ï¼Œé‡å†™æ˜¯å­ç±»ä¸çˆ¶ç±»çš„ä¸€ç§å¤šæ€æ€§è¡¨ç°</li><li>Threadlocalç±»è§£å†³å“ˆå¸Œå†²çªçš„å¼€æ”¾å®šå€æ³• </li></ul><h3 id="è§£å†³Hashç¢°æ’å†²çªçš„å››ç§æ–¹æ³•ï¼š"><a href="#è§£å†³Hashç¢°æ’å†²çªçš„å››ç§æ–¹æ³•ï¼š" class="headerlink" title="è§£å†³Hashç¢°æ’å†²çªçš„å››ç§æ–¹æ³•ï¼š"></a>è§£å†³Hashç¢°æ’å†²çªçš„å››ç§æ–¹æ³•ï¼š</h3><p><strong>Hashç¢°æ’å†²çª</strong></p><p>Hashçš„å‰ææ˜¯å®ç°equals()å’ŒhashCode()ä¸¤ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆHashCode()çš„ä½œç”¨å°±æ˜¯ä¿è¯å¯¹è±¡è¿”å›å”¯ä¸€hashå€¼ï¼Œä½†å½“ä¸¤ä¸ªå¯¹è±¡è®¡ç®—å€¼ä¸€æ ·æ—¶ï¼Œè¿™å°±å‘ç”Ÿäº†ç¢°æ’å†²çªã€‚<a href="https://www.cnblogs.com/little-fly/p/7907935.html?time=1674220763464">è§£å†³Hashç¢°æ’å†²çªæ–¹æ³•æ€»ç»“ - littleé£ - åšå®¢å›­ (cnblogs.com)</a></p><p><strong>1.å¼€æ”¾åœ°å€æ³•</strong></p><p>2.å†å“ˆå¸Œå‘</p><p>3.é“¾åœ°å€å‘</p><p>4.å»ºç«‹ä¸€ä¸ªå…¬å…±çš„æº¢å‡ºåŒº</p><ul><li><p>off-heapå«åšå †å¤–å†…å­˜ï¼Œå°†ä½ çš„å¯¹è±¡ä»å †ä¸­è„±ç¦»å‡ºæ¥åºåˆ—åŒ–ï¼Œç„¶åå­˜å‚¨åœ¨ä¸€å¤§å—å†…å­˜ä¸­ï¼Œè¿™å°±åƒå®ƒå­˜å‚¨åˆ°ç£ç›˜ä¸Šä¸€æ ·ï¼Œä½†å®ƒä»ç„¶åœ¨RAMä¸­ã€‚å¯¹è±¡åœ¨è¿™ç§çŠ¶æ€ä¸‹ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå®ƒä»¬å¿…é¡»é¦–å…ˆååºåˆ—åŒ–ï¼Œä¹Ÿä¸å—åƒåœ¾æ”¶é›†ã€‚åºåˆ—åŒ–å’Œååºåˆ—åŒ–å°†ä¼šå½±å“éƒ¨åˆ†æ€§èƒ½ï¼ˆæ‰€ä»¥å¯ä»¥è€ƒè™‘ä½¿ç”¨FST-serializationï¼‰ä½¿ç”¨å †å¤–å†…å­˜èƒ½å¤Ÿé™ä½GCå¯¼è‡´çš„æš‚åœã€‚å †å¤–å†…å­˜ä¸å—åƒåœ¾æ”¶é›†å™¨ç®¡ç†ï¼Œä¹Ÿä¸å±äºè€å¹´ä»£ï¼Œæ–°ç”Ÿä»£ã€‚</p></li><li></li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230123234759250.png" alt="image-20230123234759250"></p><p>é€‰æ‹©B : èƒ½å¤Ÿè¯»å†™æ–‡ä»¶çš„æ•°æ®æµæ˜¯<code>OutputStream</code>å’Œ<code>InputStream</code>  Fileèƒ½æ“ä½œæ–‡ä»¶æœ¬èº«ï¼Œä½†æ˜¯ä¸èƒ½å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹</p><p><strong>ç›‘è§†å™¨</strong> <strong>â€monitorâ€</strong> æ˜¯æ“ä½œç³»ç»Ÿå®ç°åŒæ­¥çš„é‡è¦åŸºç¡€æ¦‚å¿µï¼ŒåŒæ ·å®ƒä¹Ÿç”¨åœ¨JAVAçš„çº¿ç¨‹åŒæ­¥ä¸­ï¼Œ åœ¨è¯­æ³•çš„è¡¨ç°å°±æ˜¯synchronized  </p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230124000557336.png" alt="image-20230124000557336"></p><p>â€‹    A.StringBuilderçº¿ç¨‹ä¸å®‰å…¨ï¼ŒStringBufferçº¿ç¨‹å®‰å…¨ã€‚ </p><p>  B.åŒæ—¶ç”¨ abstractå’Œfinalå°±ä¼šè‡ªç›¸çŸ›ç›¾ã€‚ </p><p>  C.Hashmapä¸­çš„valueå¯ä»¥ä¹‹nullï¼Œget(key)==nullæœ‰ä¸¤ç§æƒ…å†µï¼Œä¸€æ˜¯keyä¸å­˜åœ¨ï¼ŒäºŒæ˜¯è¯¥keyä¸­å­˜çš„æ˜¯nullï¼Œæ‰€ä»¥åº”è¯¥ä½¿ç”¨map.containskey(key)è¿”å›çš„true/falseæ¥åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿™ä¸ªkeyã€‚ </p><p>  D.volatileå…³é”®å­—æœ‰ä¸¤ä¸ªä½œç”¨ï¼š </p><p>  1.å¹¶å‘ç¯å¢ƒå¯è§æ€§ï¼švolatileä¿®é¥°åçš„å˜é‡èƒ½å¤Ÿä¿è¯è¯¥å˜é‡åœ¨çº¿ç¨‹é—´çš„å¯è§æ€§ï¼Œçº¿ç¨‹è¿›è¡Œæ•°æ®çš„è¯»å†™æ“ä½œæ—¶å°†ç»•å¼€å·¥ä½œå†…å­˜ï¼ˆCPUç¼“å­˜ï¼‰è€Œç›´æ¥è·Ÿä¸»å†…å­˜è¿›è¡Œæ•°æ®äº¤äº’ï¼Œå³çº¿ç¨‹è¿›è¡Œè¯»æ“ä½œæ—¶ç›´æ¥ä»ä¸»å†…å­˜ä¸­è¯»å–ï¼Œå†™æ“ä½œæ—¶ç›´æ¥å°†ä¿®æ”¹åç«¯å˜é‡åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ï¼Œè¿™æ ·å°±èƒ½ä¿è¯å…¶ä»–çº¿ç¨‹è®¿é—®åˆ°çš„æ•°æ®æ˜¯æœ€æ–°æ•°æ® </p><p>  2.å¹¶å‘ç¯å¢ƒæœ‰åºæ€§ï¼šé€šè¿‡å¯¹volatileå˜é‡é‡‡å–å†…å­˜å±éšœï¼ˆMemory barrierï¼‰çš„æ–¹å¼æ¥é˜²æ­¢ç¼–è¯‘é‡æ’åºå’ŒCPUæŒ‡ä»¤é‡æ’åºï¼Œå…·ä½“æ–¹å¼æ˜¯é€šè¿‡åœ¨æ“ä½œvolatileå˜é‡çš„æŒ‡ä»¤å‰ååŠ å…¥å†…å­˜å±éšœï¼Œæ¥å®ç°happens-beforeå…³ç³»ï¼Œä¿è¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„æ•°æ®äº¤äº’ä¸ä¼šå‡ºç°ç´Šä¹±ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230124002016356.png" alt="image-20230124002016356"></p><p>Aâ€”â€”â€”â€”â€”æŠ½è±¡ç±»ä¸ä¸€å®šå«æœ‰æŠ½è±¡æ–¹æ³•ï¼Œæ¥å£ä¸­çš„æ–¹æ³•éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ã€‚æ¥å£ä¸­çš„æ–¹æ³•é»˜è®¤ä¿®é¥°ç¬¦æœ‰public abstractã€‚</p><p>Bâ€”â€”â€”â€”â€”ä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä½†å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼›ä¸€ä¸ªæ¥å£å¯ä»¥ç»§æ‰¿å¤šä¸ªæ¥å£ã€‚Javaé‡Œç±»æ˜¯å•ç»§æ‰¿çš„ï¼Œæ¥å£æ˜¯å¯ä»¥å¤šç»§æ‰¿çš„ï¼Œç”¨å…³é”®å­—extendsã€‚</p><p>Câ€”â€”â€”â€”â€”æŠ½è±¡ç±»å’Œæ¥å£ä¸­çš„æ–¹æ³•éƒ½æ²¡æœ‰æ–¹æ³•ä½“ã€‚æŠ½è±¡ç±»ä¸­çš„æ–¹æ³•æ˜¯å¯ä»¥æœ‰æ–¹æ³•ä½“çš„ã€‚JDK1.8ä¹‹åï¼Œæ¥å£ä¸­çš„æ–¹æ³•ä¹Ÿå¯ä»¥æœ‰æ–¹æ³•ä½“ï¼Œç”¨defaultå…³é”®å­—ä¿®é¥°æ–¹æ³•ã€‚</p><p>Dâ€”â€”â€”â€”â€”æŠ½è±¡ç±»å¯ä»¥å«æœ‰ç§æœ‰æˆå‘˜å˜é‡ï¼Œæ¥å£ä¸å«æœ‰ç§æœ‰æˆå‘˜å˜é‡ã€‚æ¥å£ä¸­çš„æˆå‘˜å˜é‡éƒ½æ˜¯public static finalçš„ï¼Œä¸€èˆ¬ç”¨ä½œå¸¸é‡ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230124002205840.png" alt="image-20230124002205840"></p><ul><li>CountDownLatch æ˜¯ç­‰å¾…ä¸€ç»„çº¿ç¨‹æ‰§è¡Œå®Œï¼Œæ‰æ‰§è¡Œåé¢çš„ä»£ç ã€‚æ­¤æ—¶è¿™ç»„çº¿ç¨‹å·²ç»æ‰§è¡Œå®Œã€‚</li><li>CyclicBarrier æ˜¯ç­‰å¾…ä¸€ç»„çº¿ç¨‹è‡³æŸä¸ªçŠ¶æ€åå†åŒæ—¶å…¨éƒ¨ç»§ç»­æ‰§è¡Œçº¿ç¨‹ã€‚æ­¤æ—¶è¿™ç»„çº¿ç¨‹è¿˜æœªæ‰§è¡Œå®Œã€‚</li><li>Semaphore é€šå¸¸æˆ‘ä»¬å«å®ƒä¿¡å·é‡ï¼Œ å¯ä»¥ç”¨æ¥æ§åˆ¶åŒæ—¶è®¿é—®ç‰¹å®šèµ„æºçš„çº¿ç¨‹æ•°é‡ï¼Œé€šè¿‡åè°ƒå„ä¸ªçº¿ç¨‹ï¼Œä»¥ä¿è¯åˆç†çš„ä½¿ç”¨èµ„æºã€‚</li><li>futureè¡¨ç¤ºä¸€ä¸ªå¯èƒ½è¿˜æ²¡æœ‰å®Œæˆçš„å¼‚æ­¥ä»»åŠ¡çš„ç»“æœï¼Œé’ˆå¯¹è¿™ä¸ªç»“æœå¯ä»¥æ·»åŠ Callbackä»¥ä¾¿åœ¨ä»»åŠ¡æ‰§è¡ŒæˆåŠŸæˆ–å¤±è´¥åä½œå‡ºç›¸åº”çš„æ“ä½œã€‚</li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230124002325820.png" alt="image-20230124002325820"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230124002545291.png" alt="image-20230124002545291"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230129094248057.png" alt="image-20230129094248057"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230129094440920.png" alt="image-20230129094440920"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230129095038824.png" alt="image-20230129095038824"></p><ul><li>åˆå§‹åŒ–é˜¶æ®µï¼šè°ƒç”¨initæ–¹æ³•</li><li>ç›¸åº”å®¢æˆ·ç«¯è¯·æ±‚ï¼šè°ƒç”¨service</li><li>ç»ˆæ­¢ï¼šè°ƒç”¨destoryæ–¹æ³•</li></ul><p>åˆå§‹åŒ–é˜¶æ®µï¼šåœ¨ä¸‹åˆ—æ—¶åˆ»servletå®¹å™¨è£…è½½servlet</p><ol><li>servletå®¹å™¨å†å¯åŠ¨æ—¶è‡ªåŠ¨è£…è½½æŸäº›servlet</li><li>åœ¨servletå®¹å™¨å¯åŠ¨åï¼Œå®¢æˆ·é¦–æ¬¡å‘servletå‘é€è¯·æ±‚</li><li>servletç±»æ–‡ä»¶è¢«æ›´æ–°åé‡æ–°è£…è½½servlet</li></ol><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230129095403763.png" alt="image-20230129095403763"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230129100852645.png" alt="image-20230129100852645"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230129101816282.png" alt="image-20230129101816282"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230129101635871.png" alt="image-20230129101635871"></p><p>åœ¨Javaä¸­ï¼Œå¸¸ç”¨çš„çº¿ç¨‹é€šä¿¡æ–¹å¼æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯åˆ©ç”¨Monitorå®ç°çº¿ç¨‹é€šä¿¡ã€åˆ©ç”¨Conditionå®ç°çº¿ç¨‹é€šä¿¡ã€‚çº¿ç¨‹åŒæ­¥æ˜¯çº¿ç¨‹é€šä¿¡çš„å‰æï¼Œæ‰€ä»¥ç©¶ç«Ÿé‡‡ç”¨å“ªç§æ–¹å¼å®ç°é€šä¿¡ï¼Œå–å†³äºçº¿ç¨‹åŒæ­¥çš„æ–¹å¼ã€‚ </p><p>  å¦‚æœæ˜¯é‡‡ç”¨synchronizedå…³é”®å­—è¿›è¡ŒåŒæ­¥ï¼Œåˆ™éœ€è¦ä¾èµ–Monitorï¼ˆåŒæ­¥ç›‘è§†å™¨ï¼‰å®ç°çº¿ç¨‹é€šä¿¡ï¼ŒMonitorå°±æ˜¯é”å¯¹è±¡ã€‚åœ¨synchronizedåŒæ­¥æ¨¡å¼ä¸‹ï¼Œé”å¯¹è±¡å¯ä»¥æ˜¯ä»»æ„çš„ç±»å‹ï¼Œæ‰€ä»¥é€šä¿¡æ–¹æ³•è‡ªç„¶å°±è¢«å®šä¹‰åœ¨<strong>Object</strong>ç±»ä¸­äº†ï¼Œè¿™äº›æ–¹æ³•åŒ…æ‹¬ï¼šwait()ã€notify()ã€notifyAll()ã€‚ä¸€ä¸ªçº¿ç¨‹é€šè¿‡Monitorè°ƒç”¨wait()æ—¶ï¼Œå®ƒå°±ä¼šé‡Šæ”¾é”å¹¶åœ¨æ­¤ç­‰å¾…ã€‚å½“å…¶ä»–çº¿ç¨‹é€šè¿‡Monitorè°ƒç”¨notify()æ—¶ï¼Œåˆ™ä¼šå”¤é†’åœ¨æ­¤ç­‰å¾…çš„ä¸€ä¸ªçº¿ç¨‹ã€‚å½“å…¶ä»–çº¿ç¨‹é€šè¿‡Monitorè°ƒç”¨notifyAll()æ—¶ï¼Œåˆ™ä¼šå”¤é†’åœ¨æ­¤ç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ã€‚ </p><p>  JDK 1.5æ–°å¢äº†Lockæ¥å£åŠå…¶å®ç°ç±»ï¼Œæä¾›äº†æ›´ä¸ºçµæ´»çš„åŒæ­¥æ–¹å¼ã€‚å¦‚æœæ˜¯é‡‡ç”¨Lockå¯¹è±¡è¿›è¡ŒåŒæ­¥ï¼Œåˆ™éœ€è¦ä¾èµ–<strong>Condition</strong>å®ç°çº¿ç¨‹é€šä¿¡ï¼ŒConditionå¯¹è±¡æ˜¯ç”±Lockå¯¹è±¡åˆ›å»ºå‡ºæ¥çš„ï¼Œå®ƒä¾èµ–äºLockå¯¹è±¡ã€‚Conditionå¯¹è±¡ä¸­å®šä¹‰çš„é€šä¿¡æ–¹æ³•ï¼Œä¸Objectç±»ä¸­çš„é€šä¿¡æ–¹æ³•ç±»ä¼¼ï¼Œå®ƒåŒ…æ‹¬await()ã€signal()ã€signalAll()ã€‚é€šè¿‡åå­—å°±èƒ½çœ‹å‡ºå®ƒä»¬çš„å«ä¹‰äº†ï¼Œå½“é€šè¿‡Conditionè°ƒç”¨await()æ—¶å½“å‰çº¿ç¨‹é‡Šæ”¾é”å¹¶ç­‰å¾…ï¼Œå½“é€šè¿‡Conditionè°ƒç”¨signal()æ—¶å”¤é†’ä¸€ä¸ªç­‰å¾…çš„çº¿ç¨‹ï¼Œå½“é€šè¿‡Conditionè°ƒç”¨signalAll()æ—¶åˆ™å”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ã€‚</p><p><a href="https://www.nowcoder.com/questionTerminal/c6126fd5ba2d40b0bfca35439a6c3563">ä»¥ä¸‹å“ªå‡ ç§æ–¹å¼å¯ç”¨æ¥å®ç°çº¿ç¨‹é—´é€šçŸ¥å’Œå”¤é†’ï¼Ÿ<em>é˜¿é‡Œå·´å·´ç¬”è¯•é¢˜</em>ç‰›å®¢ç½‘ (nowcoder.com)</a></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230129103221307.png" alt="image-20230129103221307"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230129103733515.png" alt="image-20230129103733515"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230129103808822.png" alt="image-20230129103808822"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230129104015205.png" alt="image-20230129104015205"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230203164358837.png" alt="image-20230203164358837"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/643412545_1596634989327_DEF638F8839D3C558612E08DC0A11BFF" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaåç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SDKçš„åˆ¶ä½œ</title>
      <link href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SDK%E7%9A%84make/"/>
      <url>/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SDK%E7%9A%84make/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼€å‘ç®€æ˜“çš„SDK"><a href="#å¼€å‘ç®€æ˜“çš„SDK" class="headerlink" title="å¼€å‘ç®€æ˜“çš„SDK"></a>å¼€å‘ç®€æ˜“çš„SDK</h1><ul><li>é¦–å…ˆæ–°å»ºä¸€ä¸ªspringbooté¡¹ç›®ï¼š</li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230114182700903.png" alt="image-20230114182700903"></p><ul><li>springbootç‰ˆæœ¬é€‰æ‹©2.7.0å‹¾é€‰ä¸¤ä¸ªä¾èµ–é¡¹ç›®</li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230114182839313.png" alt="image-20230114182839313"></p><p>æ¥ç€æ‰“å¼€pomæ–‡ä»¶ï¼š</p><p>å°†ç‰ˆæœ¬æ”¹æˆ0.0.1ä»»æ„å…¶ä»–æ•°å­—éƒ½è¡Œ</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"> <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.lyc<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lycapi-client-sdk<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>lycapi-client-sdk<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--å¯ä»¥åˆ é™¤æµ‹è¯•çš„ä¾èµ–ï¼Œå¿…é¡»åˆ é™¤æœ€ä¸‹é¢çš„ä¸€ä¸ªmavençš„ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org-projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--å› ä¸ºè¿›è¡Œäº†ä¸€ä¸ªåŠ å¯†å¤„ç† è¿™é‡Œå¼•å…¥ä¸€ä¸ªä¾èµ– --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>cn.hutool<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hutool-all<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.8.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>æ¥ç€åˆ é™¤å¯åŠ¨ç±»ï¼šåœ¨é‡æ–°æ–°å»ºä¸€ä¸ªæ–‡ä»¶åç§°ä¸ºLycApiClientConfig:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230114183627522.png" alt="image-20230114183627522"></p><p>å¯¹æ–°å»ºçš„LycApiClientConfigç±»åŠ ä¸Šæ³¨è§£ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@ConfigurationProperties("lycapi.clint")</span> <span class="hljs-comment">//ä¾¿äºé€šè¿‡æ­¤è·¯å¾„é…ç½®ymlæ–‡ä»¶è¿›è¡Œèµ‹å€¼</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LycApiClientConfig</span> {<br>    <span class="hljs-comment">//è¿™é‡Œæˆ‘ä»¬è®¾ç½®ä¸¤ä¸ªå¯†ä»¤</span><br>    <span class="hljs-keyword">private</span> String accessKey;<br>    <span class="hljs-keyword">private</span> String secretKey;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> LycApiClient <span class="hljs-title function_">lycApiClient</span><span class="hljs-params">()</span>{<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LycApiClient</span>(accessKey,secretKey);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>//æ¥ç€å°†å·²ç»ç¼–å†™å¥½çš„LycApiClient.javaå’ŒUser.javaå’ŒSignUtils.javaæ‹·è´åˆ°æœ¬é¡¹ç›®ç›®å½•</p><p>LycApiClient.java</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.lyc.lycapiclientsdk.clint;<br><br><span class="hljs-keyword">import</span> cn.hutool.core.util.RandomUtil;<br><span class="hljs-keyword">import</span> cn.hutool.http.HttpUtil;<br><span class="hljs-keyword">import</span> cn.hutool.json.JSONUtil;<br><span class="hljs-keyword">import</span> com.lyc.lycapiclientsdk.model.User;<br><span class="hljs-keyword">import</span> cn.hutool.http.HttpRequest;<br><span class="hljs-keyword">import</span> cn.hutool.http.HttpResponse;<br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> com.lyc.lycapiclientsdk.utils.SignUtils.getSign;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è°ƒç”¨ç¬¬ä¸‰æ–¹æ¥å£å®¢æˆ·æ®µ</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LycApiClient</span> {<br>    <span class="hljs-keyword">private</span> String accessKey;<br>    <span class="hljs-keyword">private</span> String secretKey;<br>    <span class="hljs-keyword">private</span> Map&lt;String,String&gt; <span class="hljs-title function_">getHeadMap</span><span class="hljs-params">(String body)</span>{<br>        Map&lt;String,String &gt; hashMap=<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        hashMap.put(<span class="hljs-string">"accessKey"</span>,accessKey);<br>        <span class="hljs-comment">//ä¸€å®šä¸èƒ½åœ¨æœåŠ¡å™¨ä¸­ä¼ è¾“å¯†ç </span><br>      <span class="hljs-comment">//  hashMap.put("secretKey",secretKey);</span><br>        hashMap.put(<span class="hljs-string">"nonce"</span>, RandomUtil.randomNumbers(<span class="hljs-number">4</span>));<br>        hashMap.put(<span class="hljs-string">"body"</span>,body);<br>        hashMap.put(<span class="hljs-string">"timestamp"</span>,String.valueOf(System.currentTimeMillis()/<span class="hljs-number">1000</span>));<br>        hashMap.put(<span class="hljs-string">"sign"</span>,getSign(body,secretKey));<br><br>        <span class="hljs-keyword">return</span> hashMap;<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LycApiClient</span><span class="hljs-params">(String accessKey, String secretKey)</span> {<br>        <span class="hljs-built_in">this</span>.accessKey = accessKey;<br>        <span class="hljs-built_in">this</span>.secretKey = secretKey;<br>    }<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getNameByGet</span><span class="hljs-params">(String name)</span>{<br>        <span class="hljs-comment">//å¯ä»¥å•ç‹¬ä¼ å…¥httpå‚æ•°ï¼Œè¿™æ ·å‚æ•°ä¼šè‡ªåŠ¨åšURLç¼–ç ï¼Œæ‹¼æ¥åœ¨URLä¸­</span><br>        HashMap&lt;String, Object&gt; paramMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        paramMap.put(<span class="hljs-string">"name"</span>, name);<br>        String result3= HttpUtil.get(<span class="hljs-string">"http://localhost:8123/api/name/"</span>, paramMap);<br>        System.out.println(result3);<br>        <span class="hljs-keyword">return</span>  result3;<br>    }<br><br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getNameByPost</span><span class="hljs-params">(String name)</span>{<br>        <span class="hljs-comment">//å¯ä»¥å•ç‹¬ä¼ å…¥httpå‚æ•°ï¼Œè¿™æ ·å‚æ•°ä¼šè‡ªåŠ¨åšURLç¼–ç ï¼Œæ‹¼æ¥åœ¨URLä¸­</span><br>        HashMap&lt;String, Object&gt; paramMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        paramMap.put(<span class="hljs-string">"name"</span>, name);<br>        String result3= HttpUtil.post(<span class="hljs-string">"http://localhost:8123/api/name/"</span>, paramMap);<br>        System.out.println(result3);<br>        <span class="hljs-keyword">return</span>  result3;<br>    }<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUserNameByPost</span><span class="hljs-params">(User user)</span>{<br>        <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> JSONUtil.toJsonStr(user);<br>        <span class="hljs-type">HttpResponse</span> <span class="hljs-variable">httpResponse</span> <span class="hljs-operator">=</span> HttpRequest.post(<span class="hljs-string">"http://localhost:8123/api/name/user"</span>)<br>                .addHeaders(getHeadMap(json))<br>                .body(json)<br>                .execute();<br>        System.out.println(httpResponse.getStatus());<br>        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> httpResponse.body();<br>        System.out.println(result);<br>        <span class="hljs-keyword">return</span> result;<br><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>User.java</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.lyc.lycapiclientsdk.model;<br><br><span class="hljs-keyword">import</span> lombok.Data;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {<br>    <span class="hljs-keyword">private</span> String userName;<br>}<br></code></pre></td></tr></tbody></table></figure><p>SignUtils.java</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.lyc.lycapiclientsdk.utils;<br><br><br><span class="hljs-keyword">import</span> cn.hutool.crypto.digest.DigestAlgorithm;<br><span class="hljs-keyword">import</span> cn.hutool.crypto.digest.Digester;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SignUtils</span> {<br>    <span class="hljs-keyword">public</span>  <span class="hljs-keyword">static</span>  String  <span class="hljs-title function_">getSign</span><span class="hljs-params">(String body,String secretKey)</span>{<br>        <span class="hljs-comment">//ç”Ÿæˆç­¾åè®¤è¯</span><br>        <span class="hljs-type">Digester</span> <span class="hljs-variable">md5</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Digester</span>(DigestAlgorithm.SHA256);<br>        String content=body+<span class="hljs-string">"."</span>+secretKey;<br>        <span class="hljs-keyword">return</span> md5.digestHex(content);<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure><p>æ¥ç€åœ¨resourcesä¸‹é¢å»ºç«‹ä¸€ä¸ªæ–‡ä»¶å¤¹META-INF  å¹¶åœ¨ä¸‹é¢å»ºç«‹ä¸€ä¸ªæ–‡ä»¶ spring.factorieså¹¶å†™å…¥</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml">org.springframework.boot.autoconfigure.EnableAutoConfiguration=com.lyc.lycapiclientsdk.LycApiClientConfig<br><br>//=åé¢çš„è·¯å¾„ä¸ºLycApiClientConfigçš„å¼•ç”¨è·¯å¾„<br></code></pre></td></tr></tbody></table></figure><p>å½“ä¸Šé¢éƒ½å®Œæˆæ—¶éœ€è¦ç‚¹å‡»Mavenç‚¹å‡»é—ªç”µå›¾æ ‡æ’é™¤æµ‹è¯•ç±»ï¼Œå¦åˆ™ä¼šæŠ¥é”™:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230114184415287.png" alt="image-20230114184415287"></p><p>ç„¶åå†ç‚¹å‡»Installå°±å¯ä»¥è¿›è¡Œå®‰è£…åˆ°æœ¬åœ°ä»“åº“ï¼š</p><h3 id="SDKçš„ä½¿ç”¨"><a href="#SDKçš„ä½¿ç”¨" class="headerlink" title="SDKçš„ä½¿ç”¨"></a>SDKçš„ä½¿ç”¨</h3><p>é¦–å…ˆåœ¨Mavenä¸­å¼•å…¥æœ¬åœ°ä»“åº“çš„SDK</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.lyc<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lycapi-client-sdk<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>æ¥ç€åœ¨application.ymlæ–‡ä»¶ä¸­å®šä¹‰æ”¹ä¼ å…¥çš„å‚æ•°:</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">lycapi:</span><br>  <span class="hljs-attr">clint:</span><br>    <span class="hljs-attr">access-key:</span> <span class="hljs-string">yupi</span><br>    <span class="hljs-attr">secret-key:</span> <span class="hljs-string">abcdefg</span><br></code></pre></td></tr></tbody></table></figure><p>æ¥ç€ç¼–å†™controllerç±»æ¥è°ƒç”¨æ”¹SDk ç¼–å†™æ–‡ä»¶åç§°ä¸ºNameController.java</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.yupi.lycapiinterface.controller;<br><span class="hljs-keyword">import</span> com.lyc.lycapiclientsdk.model.User;<br><span class="hljs-keyword">import</span> com.lyc.lycapiclientsdk.utils.SignUtils;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.*;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping("/name")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NameController</span> {<br>    <span class="hljs-meta">@GetMapping("/")</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getNameByGet</span><span class="hljs-params">(String name)</span>{<br><br><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"Get ä½ çš„åå­—ä¸º"</span>+name;<br>    }<br><br>    <span class="hljs-meta">@PostMapping("/")</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getNameByPost</span><span class="hljs-params">(String name)</span>{<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"Post ä½ çš„åå­—ä¸º"</span>+name;<br>    }<br><br><br>    <span class="hljs-meta">@PostMapping("/user")</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getNameByPost</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user , HttpServletRequest request)</span>{<br>        <span class="hljs-type">String</span> <span class="hljs-variable">accessKey</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"accessKey"</span>);<br>        String nonce=request.getHeader(<span class="hljs-string">"nonce"</span>);<br>        String timestamp=request.getHeader(<span class="hljs-string">"timestamp"</span>);<br>        String sign=request.getHeader(<span class="hljs-string">"sign"</span>);<br>        String body=request.getHeader(<span class="hljs-string">"body"</span>);<br>        <span class="hljs-keyword">if</span>(!accessKey.equals(<span class="hljs-string">"yupi"</span>)){<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ— æƒé™"</span>);<br>        }<br>        <span class="hljs-keyword">if</span>(Long.parseLong(nonce)&gt;<span class="hljs-number">10000</span>){<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ— æƒé™"</span>);<br>        }<br>        String serverSign= SignUtils.getSign(body,<span class="hljs-string">"abcdefg"</span>);<br>        <span class="hljs-keyword">if</span>(!sign.equals(serverSign)){<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ— æƒé™"</span>);<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"Post ç”¨æˆ·çš„åå­—ä¸º"</span>+user.getUserName();<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure><p>åœ¨æµ‹è¯•ç±»ä¸­è°ƒç”¨æ”¹SDKå’Œcontrollerçš„æ£€éªŒé€»è¾‘:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.yupi.lycapiinterface;<br><br><span class="hljs-keyword">import</span> com.lyc.lycapiclientsdk.clint.LycApiClient;<br><br><span class="hljs-keyword">import</span> com.lyc.lycapiclientsdk.model.User;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><br><span class="hljs-keyword">import</span> javax.annotation.Resource;<br><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LycapiInterfaceApplicationTests</span> {<br>    <span class="hljs-meta">@Resource</span><br>    <span class="hljs-keyword">private</span> LycApiClient lycApiClient;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> {<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> lycApiClient.getNameByGet(<span class="hljs-string">"yupi"</span>);<br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>        user.setUserName(<span class="hljs-string">"aaa"</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">usernameByPost</span> <span class="hljs-operator">=</span> lycApiClient.getUserNameByPost(user);<br>        System.out.println(result);<br>        System.out.println(usernameByPost);<br>    }<br><br>}<br><br></code></pre></td></tr></tbody></table></figure><p>æ–‡ä»¶ç›®å½•ç»“æ„:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230114185211972.png" alt="image-20230114185211972"></p><p>è¿è¡Œç»“æœ:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230114185246930.png" alt="image-20230114185246930"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaåç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•é¢˜1</title>
      <link href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/mainshi/"/>
      <url>/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/mainshi/</url>
      
        <content type="html"><![CDATA[<h1 id="é¢è¯•é¢˜æ€§çš„æ€»ç»“ä¸å›ç­”"><a href="#é¢è¯•é¢˜æ€§çš„æ€»ç»“ä¸å›ç­”" class="headerlink" title="é¢è¯•é¢˜æ€§çš„æ€»ç»“ä¸å›ç­”"></a>é¢è¯•é¢˜æ€§çš„æ€»ç»“ä¸å›ç­”</h1><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/2019061210551736.png" alt="img"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230224093155759.png" alt="image-20230224093155759"></p><h3 id="1-Java-å¸¸ç”¨çš„é›†åˆï¼Ÿ"><a href="#1-Java-å¸¸ç”¨çš„é›†åˆï¼Ÿ" class="headerlink" title="1.  Java å¸¸ç”¨çš„é›†åˆï¼Ÿ"></a>1.  Java å¸¸ç”¨çš„é›†åˆï¼Ÿ</h3><ul><li>Collectionæ¥å£ï¼šSetã€List</li><li>Mapçš„æ¥å£ï¼šmapã€TreeMapã€HashMapã€LinkedHashMapã€HashTableã€ConcurrentHashMap</li></ul><h3 id="2-é›†åˆä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#2-é›†åˆä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="2.   é›†åˆä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>2.   é›†åˆä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>Listã€setã€mapæ˜¯ä¸‰ä¸ªæ¥å£ï¼ŒListå’Œsetç»§æ‰¿è‡ªcollectionæ¥å£ï¼ŒMapä¹Ÿå±äºé›†åˆç³»ç»Ÿï¼Œä¸collectionä¸åŒã€‚</p><p>Setä¸å…è®¸å…ƒç´ é‡å¤ï¼ŒHashSetå’ŒTreeSetæ˜¯ä¸¤ä¸ªä¸»è¦çš„å®ç°ç±»ï¼ŒSetåªèƒ½é€šè¿‡æ¸¸æ ‡æ¥å–å€¼ï¼Œå¹¶ä¸”å€¼æ˜¯ä¸èƒ½é‡å¤çš„</p><p><strong>AbstractListé›†åˆï¼š</strong></p><ul><li>liståˆ—è¡¨æ˜¯ä¸ªæœ‰åºé›†åˆã€å®ƒçš„ç›´æ¥å®ç°ç±»æ˜¯Arraylist(ç›´æ¥å®ç°ç±»)ï¼Œå®ƒæ˜¯çº¿ç¨‹ä¸åŒæ­¥çš„ï¼Œä¸»è¦ä»¥æ•°ç»„çš„æ–¹å¼å»ºç«‹äº†ä¸€ä¸ªåˆ—è¡¨,é€‚åˆè¿›è¡Œéå†å’Œå¿«é€ŸæŸ¥æ‰¾æŸä¸€ä¸ªå…ƒç´ ã€ä¿®æ”¹ï¼Œä¸é€‚ç”¨äºåˆ é™¤å’Œåœ¨ä»»æ„ä½ç½®å¢åŠ ä¸€ä¸ªå…ƒç´ ã€‚</li><li>LinkedList(é—´æ¥å®ç°ç±»)å®ƒä¹Ÿæ˜¯çº¿ç¨‹ä¸åŒæ­¥çš„åˆ—è¡¨ã€ä½†æ˜¯ä»–æ˜¯é€šè¿‡åˆ—è¡¨æ¥å®ç°çš„ã€è¯¥æ–¹æ³•ä¸»è¦ç”¨äºå¯¹å…ƒç´ çš„å¢åŠ åˆ é™¤ä½†ä¸é€‚ç”¨äºéå†ã€‚</li><li>ArrayListçº¿ç¨‹ä¸åŒæ­¥ï¼šå®ç°ä¸€ä¸ªæ•°ç»„ï¼Œä»–æ˜¯ä»¥æ•°ç»„çš„æ–¹å¼å®ç°çš„Listï¼Œå…è®¸éšæœºå­˜å–</li><li>Vectorï¼ˆç›´æ¥å®ç°ç±»ï¼‰ä»–æ˜¯çº¿ç¨‹åŒæ­¥çš„ï¼Œå®ƒå®ç°äº†ä¸€ä¸ªå¯å¢é•¿çš„å¯¹è±¡æ•°ç»„ï¼Œå®ƒä¹Ÿå¯ä»¥å®ç”¨æ•´æ•°çš„æ•°ç»„è®¿é—®å…ƒç´ ã€‚</li></ul><p><strong>AbstractSeté›†åˆ</strong>ï¼š</p><ul><li>Seté›†åˆçš„ç‰¹ç‚¹æ˜¯å…ƒç´ æ— åºçš„ã€ä¸å…è®¸é‡å¤çš„å…ƒç´ ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªç©ºçš„å…ƒç´ ã€‚åªæ˜¯ç®€å•çš„å°†å¯¹è±¡åŠ å…¥åˆ°é›†åˆä¸­</li><li>HashSetï¼ˆç›´æ¥å®ç°ç±»ï¼‰å®ƒæ˜¯çº¿ç¨‹ä¸åŒæ­¥çš„ã€ä»–ä¸ä¿è¯é›†åˆçš„è¿­ä»£é¡ºåºã€ä»–ä¸èƒ½ä¿è¯é¡ºåºä¼šéšç€æ—¶é—´ä¸å˜</li><li>TreeSetï¼ˆç›´æ¥å®ç°ç±»ï¼‰æ˜¯çº¿ç¨‹ä¸åŒæ­¥çš„ï¼Œä»–åº•å±‚æ˜¯åŸºäºTreeMapå®ç°çš„,åº•å±‚ç»“æ„æ˜¯ä¸ªäºŒå‰æ ‘ï¼Œå®ƒå¯ä»¥ç»™Seté›†åˆä¸­çš„å…ƒç´ è¿›è¡ŒæŒ‡å®šçš„æ–¹å¼æ’åºä¿è¯å…ƒç´ çš„å”¯ä¸€æ€§çš„æ–¹å¼ã€‚</li><li>LinkedHashSet(é—´æ¥å®ç°ç±») å“ˆå¸Œè¡¨å’Œé“¾è¡¨çš„å®ç°é›†åˆæ¥å£ï¼Œå…·æœ‰å¯é¢„æµ‹çš„è¿­ä»£é¡ºåº,è¿™ä¸ªé“¾è¡¨å®šä¹‰äº†è¿­ä»£é¡ºåºã€è¿™æ˜¯å…ƒç´ æ’å…¥åˆ°é›†åˆçš„é¡ºåºï¼ˆæ’å…¥é¡ºåºï¼‰</li></ul><p>Setä¸Listçš„åŒºåˆ«ï¼š</p><p>ListåŸºæœ¬ä¸Šéƒ½æ˜¯ä»¥Arrayä¸ºåŸºç¡€ï¼ˆLinkedListæ˜¯ä»¥é“¾è¡¨å­˜å‚¨ï¼‰ä½†æ˜¯Setæ˜¯ä»¥HashMap</p><p><strong>AbstractMapé›†åˆï¼š</strong></p><p>mapæ˜¯ä¸€ç§é”®å€¼å¯¹é›†åˆï¼Œé”®å€¼ä¸èƒ½é‡å¤å€¼å¯ä»¥é‡å¤ï¼ŒMapæ²¡æœ‰ç»§æ‰¿äºCollectionæ¥å£ä»mapé›†åˆä¸­æ£€ç´¢å…ƒç´ å¸‚ï¼Œæ ¹æ®é”®å¾—åˆ°å€¼ï¼Œå¯¹mapé›†åˆéå†æ—¶å…ˆå¾—é”®çš„seté›†åˆï¼Œå¯¹seté›†åˆè¿›è¡Œéå†å¾—åˆ°ç›¸åº”çš„å€¼ã€‚mapçš„éå†ä¸»è¦æ—¶ä»¥KeySetï¼ˆï¼‰å› ä¸ºSetå…·å¤‡è¿­ä»£å™¨å¯ä»¥è¿­ä»£å–å‡ºæ‰€æœ‰çš„é”®ï¼Œå†æ ¹æ®getæ–¹æ³•è·å–æ¯ä¸€ä¸ªé”®å€¼å¯¹åº”çš„å€¼ï¼ŒKeySetï¼ˆï¼‰è¿­ä»£ååªèƒ½é€šè¿‡getï¼ˆï¼‰å–Keyã€‚entrySetï¼ˆï¼‰å®ƒåŒ…å«æ˜ å°„å…³ç³»çš„Setè§†å›¾ï¼ˆä¸€ä¸ªå…³ç³»å°±æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼‰å°±æ˜¯æŠŠKeyâ€”valueä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œä¸€å¯¹ä¸€å¯¹çš„å­˜æ”¾åœ¨Seté›†åˆä¸­ï¼ŒMap.Entryè¡¨ç¤ºæ˜ å°„å…³ç³»å¯ä»¥é€šè¿‡e.getKey(),e.getValueï¼ˆï¼‰ä¸¤ç§æ–¹æ³•å–å¾—keyå’Œvalueï¼Œè¿”å›çš„æ˜¯Entryæ¥å£ã€‚</p><ul><li>HashMapç›´æ¥ï¼ˆå®ç°ç±»ï¼‰ä¼˜ç‚¹è®¿é—®é€Ÿåº¦å¿«ï¼Œæ— é¡ºåºçš„ä¿å­˜å…ƒç´ ã€‚</li><li>HashTable ä¸å…è®¸æœ‰nullï¼ŒHashMapå…è®¸</li><li>HashTableæœ‰ä¸€ä¸ªEnumerationéå†ï¼ŒHashMapæ˜¯Iteratorè¿­ä»£å™¨éå†</li><li>HashTableæœ‰ä¸€ä¸ªcontains()æ–¹æ³•åŠŸèƒ½å’ŒcontainsValueï¼ˆï¼‰åŠŸèƒ½ä¸€æ ·ï¼›</li><li>HashTableä¸­çš„hashæ•°ç»„é»˜è®¤çš„é»˜è®¤å¤§å°11å¢é•¿æ–¹å¼æ˜¯old*2+1;HashMapä¸­hashæ•°ç»„é»˜è®¤å¤§å°æ˜¯16ä¸€å®šæ˜¯2çš„æŒ‡æ•°</li><li>å“ˆå¸Œå€¼çš„ä½¿ç”¨ä¸åŒï¼Œhashtableç›´æ¥ä½¿ç”¨å¯¹è±¡çš„hashcodeè€Œhashmapé‡æ–°è®¡ç®—hashå€¼</li></ul><h3 id="3-é›†åˆä¹‹é—´æœ‰ä»€ä¹ˆè½¬æ¢å…³ç³»ï¼Ÿ"><a href="#3-é›†åˆä¹‹é—´æœ‰ä»€ä¹ˆè½¬æ¢å…³ç³»ï¼Ÿ" class="headerlink" title="3.é›†åˆä¹‹é—´æœ‰ä»€ä¹ˆè½¬æ¢å…³ç³»ï¼Ÿ"></a>3.é›†åˆä¹‹é—´æœ‰ä»€ä¹ˆè½¬æ¢å…³ç³»ï¼Ÿ</h3><p>æ•°ç»„è½¬é›†åˆä½¿ç”¨asListï¼ˆï¼‰æ–¹æ³•éœ€è¦æ³¨æ„ï¼š</p><ul><li>å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ•°ç»„ä¸€å®šå¾—æ˜¯å¼•ç”¨ç±»å‹æ‰èƒ½å°†å…¶è½¬æ¢ä¸ºListé›†åˆ</li><li>æ— æ³•å¯¹é›†åˆè¿›è¡Œä¿®æ”¹æ“ä½œï¼Œå¦åˆ™ä¼šæŠ¥é”™</li><li>ä»…ä»…å±€é™äºä¸€ç»´æ•°ç»„ç³»åˆ—</li></ul><p><strong>é›†åˆè½¬æ•°ç»„</strong>ï¼š å¿…é¡»æ˜¯åŒ…è£…ç±»å‹çš„æ•°ç»„</p><p>JDK8å¯ä»¥ç”¨stream APIå¯ä»¥å¾ˆå®¹æ˜“è§£å†³</p><p><strong>åŸç”Ÿæ•°ç»„ã€åŒ…è£…ç±»å‹çš„æ•°ç»„äº’è½¬ï¼š</strong> <strong>åŒ…è£…ç±»æ•°ç»„ä¸listé›†åˆäº’è½¬</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// int&lt;----&gt;Integer&lt;----&gt;List</span><br><span class="hljs-comment">//åŸç”Ÿæ•°ç»„è½¬åŒ…è£…ç±»å‹çš„æ•°ç»„ï¼š</span><br><span class="hljs-type">int</span>[] nums = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">5</span>,<span class="hljs-number">5</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">6</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>};<br>Integer[]boxdNums=Arrays.stream(nums).boxed().toArray(Integer[]::<span class="hljs-keyword">new</span>);<br><span class="hljs-comment">//åŒ…è£…ç±»å‹è½¬æ¢ä¸ºåŸç”Ÿç±»å‹çš„æ•°ç»„</span><br><span class="hljs-type">int</span>[] arrs = Arrays.stream(boxdNums).mapToInt(Integer::intValue).toArray();<br><span class="hljs-comment">//åŒ…è£…ç±»æ•°ç»„è½¬ä¸ºList/ArraysListï¼šArrays.asList</span><br>List&lt;Integer&gt;listInteget=Arrays.asList(boxdNums);<br><span class="hljs-comment">//List/ArrayListè½¬åŒ…è£…ç±»æ•°ç»„    .toArray(new Integer[])</span><br>Integer[] arrayInter2 = listInter.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>[listInter.size()]);<br><span class="hljs-comment">/**</span><br><span class="hljs-comment">* String&lt;-------&gt;List</span><br><span class="hljs-comment">*/</span><br>     List&lt;String&gt; listStringStr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br>        listStringStr.add(<span class="hljs-string">"str1"</span>);<br>        listStringStr.add(<span class="hljs-string">"str2"</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> listStringStr.size();<br>        String[] arr = (String[]) listStringStr.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[size]);<span class="hljs-comment">//ä½¿ç”¨äº†ç¬¬äºŒç§æ¥å£ï¼Œè¿”å›å€¼å’Œå‚æ•°å‡ä¸ºç»“æœ</span><br>        List&lt;String&gt; strings = Arrays.asList(arr);<br><span class="hljs-comment">//é›†åˆè½¬æ•°ç»„ toArray()</span><br><span class="hljs-comment">//ä½¿ç”¨toArray()æ˜¯è¦æ³¨æ„ï¼Œæœ‰å‚æ–¹æ³•å’Œæ— å‚æ–¹æ³•ï¼Œä¸€èˆ¬éƒ½é€‰æ‹©ä½¿ç”¨æœ‰å‚æ–¹æ³•ï¼Œ </span><br><span class="hljs-comment">//æ— å‚æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªObjectç±»å‹æ•°ç»„ï¼Œ</span><br><span class="hljs-comment">// å³ä½¿é›†åˆæºå¸¦æ³›å‹ã€‚æ‰€ä»¥ç”¨å¦‚æœä½¿ç”¨æ— å‚æ–¹æ³•ä¼šé¢ä¸´æ•°æ®ç±»å‹è½¬æ¢ï¼Œç›¸å¯¹æ›´åŠ éº»çƒ¦ã€‚</span><br>List&lt;Integer&gt; listIntegerStr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        listIntegerStr.add(<span class="hljs-number">1</span>);<br>        listIntegerStr.add(<span class="hljs-number">2</span>);<br>        <span class="hljs-comment">// æ–¹å¼ä¸€</span><br>        Integer[] arrays = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>[listIntegerStr.size()];<br>        listIntegerStr.toArray(arrays);<br>        <span class="hljs-comment">// æ–¹å¼äºŒ</span><br>        Integer[] arrays_00 = listIntegerStr.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>[<span class="hljs-number">0</span>]);<br>        <span class="hljs-comment">//æ–¹å¼ä¸‰ ä¸æ¨è</span><br>       Object[] objects = listIntegerStr.toArray();<br><br></code></pre></td></tr></tbody></table></figure><p><strong>æ¯”è¾ƒå™¨æ˜¯ä»€ä¹ˆï¼Ÿæ–¹æ³•</strong></p><p>Comparableå’ŒComparatoræ¥å£</p><ul><li>å¯¹äºComparable æ¥å£æ¥è¯´å°±æœ‰ä¸€ä¸ªCompareToï¼ˆï¼‰æ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›å€¼ä¸ºint</li><li>å¯¹äºComparatoræ¥å£ç§°ä¸ºæ¯”è¾ƒå™¨åŒ…å«ä¸€ä¸ªcompareï¼ˆï¼‰æ–¹æ³•è¿”å›å€¼ä¸CompareToï¼ˆï¼‰ä¸€æ ·ä¸åŒçš„æ˜¯Comparatoræ¥å£ä¸€èˆ¬ä¸ä¼šè¢«é›†åˆå…ƒç´ ç±»æ‰€å®ç°ï¼Œè€Œæ˜¯å•ç‹¬çš„ä½¿ç”¨æˆ–è€…åœ¨åŒ¿åå†…éƒ¨ç±»ä¸­ä½¿ç”¨ï¼Œæ¯”è¾ƒå™¨ä¸ä»…ç”¨äºæ¯”è¾ƒå¤§å°è¿˜ç”¨äºæ’åºåªéœ€è¦å°†Comparatorä¼ é€’ç»™sortæ–¹æ³•ã€‚</li></ul><p><strong>åŸºæœ¬æ•°æ®ç±»å‹å’Œå¼•ç”¨æ•°æ®ç±»å‹çš„åŒºåˆ«</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/a610ff04860149ccbc3e55732f042526.png" alt="img"></p><p>æ¯ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹éƒ½ä¼šå¯¹åº”ä¸€ä¸ªåŒ…è£…ç±»å‹</p><p><strong>è£…ç®±å’Œæ‹†ç®±</strong></p><p>è£…ç®±ï¼šæŠŠåŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢æˆå¯¹åº”çš„åŒ…è£…ç±»å‹</p><p>æ‹†ç®±ï¼šæŠŠåŒ…è£…ç±»å‹è½¬æ¢ä¸ºåŸºæœ¬çš„æ•°æ®ç±»å‹</p><p>javaæ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œè€ŒåŸºæœ¬æ•°æ®ç±»å‹ä¸å…·å¤‡é¢å‘å¯¹è±¡çš„ç‰¹ç‚¹ã€‚</p><p><strong>Stringã€StringBuildå’ŒStringbufferçš„åŒºåˆ«ï¼š</strong></p><ul><li>Stringæ˜¯Immutableç±»çš„åŸºæœ¬å®ç°å£°æ˜äº†final class å› ä¸ºå®ƒçš„ä¸å¯å˜æ€§ï¼Œæ‹¼æ¥å­—ç¬¦ä¸²æ˜¯ä¼šå‡ºç°å¾ˆå¤šæ— ç”¨çš„ä¸­é—´å¯¹è±¡ï¼Œå¦‚æœé¢‘ç¹çš„æ“ä½œå¯¹æ€§èƒ½æœ‰äº›å½±å“ã€‚</li><li>StringBufferå°±æ˜¯ä¸ºäº†è§£å†³å¤§é‡çš„å­—ç¬¦ä¸²æ‹¼æ¥äº§ç”Ÿçš„ä¸­é—´å˜é‡è€Œæä¾›çš„ä¸€ä¸ªç±»ï¼Œå…¶ä¸­appendæ–¹æ³•å’Œaddæ–¹æ³•ï¼Œå®ƒçš„æœ¬è´¨æ˜¯ä¸ªçº¿ç¨‹å®‰å…¨çš„å¯ä¿®æ”¹çš„å­—ç¬¦ä¸²åºåˆ—ï¼Œç‰ºç‰²äº†éƒ¨åˆ†æ€§èƒ½å®ƒçš„æ–¹æ³•éƒ½åŠ ä¸Šäº†synchronizedæ–¹æ³•</li><li>StringBuilderæ˜¯JDK1.5å‘å¸ƒçš„ å»æ‰äº†çº¿ç¨‹å®‰å…¨çš„éƒ¨åˆ†å‡å°‘äº†å¼€é”€</li><li><p>Stringbufferå’ŒStringBuilderéƒ½ç»§æ‰¿äº†Abstract StringBuilder åº•å±‚éƒ½æ˜¯å¯ä»¥ä¿®æ”¹çš„charæ•°ç»„JDK9 ä»¥åæ˜¯byteæ•°ç»„</p><p><strong>java åŸºæœ¬æ•°æ®ç±»å‹ã€åŒ…è£…ç±»ã€å­—ç¬¦ä¸²ã€æ•°ç»„ä¹‹é—´çš„ç±»å‹è½¬æ¢</strong></p></li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/8ff5f5752eb1446eac015180987cbbb3.png" alt="img"></p><p><strong>ä¼˜é›…çš„å°†Listé›†åˆè½¬ä¸ºSeté›†åˆï¼š</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">listé›†åˆå’Œseté›†åˆçš„åŒºåˆ«</span><br><span class="hljs-comment">ä¸¤è€…éƒ½é›†æˆäº†Collection</span><br><span class="hljs-comment">listæ˜¯æœ‰é¡ºåºçš„æ‰€ä»¥å®ƒçš„å€¼æ˜¯å¯é‡å¤çš„</span><br><span class="hljs-comment">listçš„æ•°æ®ç»“æ„æ˜¯çº¿æ€§ç»“æ„æ‰€ä»¥ä»–åœ¨éå†çš„æ—¶å€™ç‰¹åˆ«å¿«</span><br><span class="hljs-comment">setæ˜¯æ— åºçš„ä¸èƒ½å¤Ÿæ’å…¥é‡å¤çš„å…ƒç´ </span><br><span class="hljs-comment">Setçš„æ•°æ®ç»“æ„æ˜¯å“ˆå¸Œè¡¨æ‰€ä»¥åœ¨é¢‘ç¹æ·»åŠ æˆ–ç§»é™¤å…ƒç´ çš„ä¸šåŠ¡åœºæ™¯ä¸‹ç‰¹åˆ«æœ‰ä¼˜åŠ¿</span><br><span class="hljs-comment">*/</span><br><span class="hljs-comment">//xxx.stream().collect(Collectors.toSet());</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">lisToSetTest</span><span class="hljs-params">()</span> {<br><br>List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;();<br>list.add(<span class="hljs-string">"A"</span>);<br>list.add(<span class="hljs-string">"A"</span>);<br>list.add(<span class="hljs-string">"B"</span>);<br>Set&lt;String&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;String&gt;();<br>set = list.stream().collect(Collectors.toSet());<br>System.out.println(set);<br>}<br><span class="hljs-comment">//ç¬¬äºŒç§æ–¹æ³•</span><br>Set&lt;Integer&gt; setFromList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;(list);<br><br><span class="hljs-comment">//setè½¬ä¸ºlisté›†åˆ</span><br>List list=Stream.of(set.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">0</span>])).collect(Collectors.toList());<br>List&lt;Integer&gt; listFromSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(set);<br>List&lt;Integer&gt; hashSetList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt;(hashSet);<br>List&lt;Integer&gt; linkedHashSetList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt;(linkedHashSet);<br></code></pre></td></tr></tbody></table></figure><p> <strong>Listè½¬ä¸ºMap</strong></p><p>å…ˆæŠŠé›†åˆè½¬ä¸ºæµï¼Œåœ¨è°ƒç”¨æµçš„å½’å¹¶æ“ä½œcollectæ–¹æ³•ã€‚collectæ–¹æ³•çš„å‚æ•°é€šè¿‡è°ƒç”¨Collectors.toMapï¼ˆï¼‰æ–¹æ³•è·å–è¯¥æ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°ä¸ºä¸¤ä¸ªFunctionç±»å‹çš„å¯¹è±¡åˆ†åˆ«ä»£è¡¨æ ¹æ®Listä¸­ç”Ÿæˆçš„Mapçš„keyå’Œvalueç­–ç•¥</p><h3 id="4-Streamæµçš„æ–¹æ³•ï¼Ÿ"><a href="#4-Streamæµçš„æ–¹æ³•ï¼Ÿ" class="headerlink" title="4. Streamæµçš„æ–¹æ³•ï¼Ÿ"></a>4. Streamæµçš„æ–¹æ³•ï¼Ÿ</h3><p>ç‰¹ç‚¹ï¼šä¸æ˜¯æ•°æ®ç»“æ„ï¼Œä¸ä¼šä¿å­˜æ•°æ®ã€‚ä¸ä¼šä¿®æ”¹åŸæ¥çš„æ•°æ®æºï¼Œå®ƒçš„å°†æ“ä½œåçš„æ•°æ®ä¿å­˜åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚æƒ°æ€§æ±‚å€¼ï¼Œæµåœ¨ä¸­é—´å¤„ç†è¿‡ç¨‹ä¸­ï¼Œåªå¯¹æ“ä½œè¿›è¡Œè®°å½•ï¼Œå¹¶ä¸ä¼šç«‹å³æ‰§è¡Œ</p><p><strong>åˆ†ç±»</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/13170952_625693608975b29303.png" alt="img"></p><p>æ— çŠ¶æ€ï¼šæŒ‡å…ƒç´ çš„å¤„ç†ä¸å—ä¹‹å‰å…ƒç´ çš„å½±å“ï¼›</p><p>æœ‰çŠ¶æ€ï¼šæŒ‡è¯¥æ“ä½œåªæœ‰æ‹¿åˆ°æ‰€æœ‰å…ƒç´ ä¹‹åæ‰èƒ½ç»§ç»­ä¸‹å»</p><p>éçŸ­è·¯æ“ä½œï¼šæŒ‡å¿…é¡»å¤„ç†æ‰€æœ‰å…ƒç´ æ‰èƒ½å¾—åˆ°çš„æœ€ç»ˆç»“æœ</p><p>çŸ­è·¯æ“ä½œï¼šé‡åˆ°æŸäº›ç¬¦åˆæ¡ä»¶çš„å…ƒç´ å°±èƒ½å¾—åˆ°æœ€ç»ˆçš„ç»“æœå¦‚A||Båªè¦Aä¸ºTreuåˆ™æ— éœ€åˆ¤æ–­Bçš„ç»“æœ</p><p><strong>æµçš„åˆ›å»ºæ–¹æ³•ï¼š</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>Stream&lt;String&gt; stream = list.stream(); <span class="hljs-comment">//è·å–ä¸€ä¸ªé¡ºåºæµ</span><br>Stream&lt;String&gt; parallelStream = list.parallelStream(); <span class="hljs-comment">//è·å–ä¸€ä¸ªå¹¶è¡Œæµ</span><br><span class="hljs-comment">//ä½¿ç”¨Arrays ä¸­çš„stream()æ–¹æ³•ï¼Œå°†æ•°ç»„è½¬æˆæµ</span><br>Integer[] nums = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>[<span class="hljs-number">10</span>];<br>Stream&lt;Integer&gt; stream = Arrays.stream(nums);<br></code></pre></td></tr></tbody></table></figure><p>Streamä¸­çš„é™æ€æ–¹æ³•ï¼šof() ã€iteratorï¼ˆï¼‰ã€generateï¼ˆï¼‰</p><ul><li>ä½¿ç”¨BufferedReader.lineï¼ˆï¼‰æ–¹æ³•å°†æ¯è¡Œå†…å®¹è½¬æ¢ä¸ºæµ</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">"F:\\test_stream.txt"</span>));<br>Stream&lt;String&gt; lineStream = reader.lines();<br>lineStream.forEach(System.out::println);<br></code></pre></td></tr></tbody></table></figure><ul><li>ä½¿ç”¨Pattern.splitAsStreamï¼ˆï¼‰æ–¹æ³•å°†å­—ç¬¦ä¸²åˆ†å‰²æˆæµ</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">Pattern</span> <span class="hljs-variable">pattern</span> <span class="hljs-operator">=</span> Pattern.compile(<span class="hljs-string">","</span>);<br>Stream&lt;String&gt; stringStream = pattern.splitAsStream(<span class="hljs-string">"a,b,c,d"</span>);<br>stringStream.forEach(System.out::println);<br></code></pre></td></tr></tbody></table></figure><p><strong>æµçš„ä¸­é—´æ“ä½œ</strong></p><ul><li>filterï¼ˆï¼‰ï¼šè¿‡æ»¤æµä¸­çš„æŸäº›å…ƒç´ </li><li>limitï¼ˆï¼‰ï¼šè·å–nä¸ªå…ƒç´ </li><li>skipï¼ˆï¼‰ï¼šè·³è¿‡nä¸ªå…ƒç´ é…åˆlimitå¯ä»¥å®ç°åˆ†é¡µ</li><li>distinctï¼šé€šè¿‡æµä¸­çš„å…ƒç´ hashCodeï¼ˆï¼‰å’Œequlsï¼ˆï¼‰å»é™¤é‡å¤å…ƒç´ </li></ul><p><strong>æ˜ å°„</strong></p><ul><li>mapï¼šæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥è¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œå¹¶å°†å…¶æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ </li><li>flatMapï¼šæ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå°†æµä¸­çš„æ¯ä¸ªå€¼éƒ½æ¢æˆå¦ä¸€ä¸ªæµï¼Œç„¶åæŠŠæ‰€æœ‰çš„æµè¿æ¥æˆä¸€ä¸ªæµ</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;String&gt; list = Arrays.asList(<span class="hljs-string">"a,b,c"</span>, <span class="hljs-string">"1,2,3"</span>);<br> <br><span class="hljs-comment">//å°†æ¯ä¸ªå…ƒç´ è½¬æˆä¸€ä¸ªæ–°çš„ä¸”ä¸å¸¦é€—å·çš„å…ƒç´ </span><br>Stream&lt;String&gt; s1 = list.stream().map(s -&gt; s.replaceAll(<span class="hljs-string">","</span>, <span class="hljs-string">""</span>));<br>s1.forEach(System.out::println); <span class="hljs-comment">// abc  123</span><br><br>Stream&lt;String&gt; s3 = list.stream().flatMap(s -&gt; {<br>    <span class="hljs-comment">//å°†æ¯ä¸ªå…ƒç´ è½¬æ¢æˆä¸€ä¸ªstream</span><br>    String[] split = s.split(<span class="hljs-string">","</span>);<br>    Stream&lt;String&gt; s2 = Arrays.stream(split);<br>    <span class="hljs-keyword">return</span> s2;<br>});<br>s3.forEach(System.out::println); <span class="hljs-comment">// a b c 1 2 3</span><br></code></pre></td></tr></tbody></table></figure><p><strong>æ’åº</strong></p><ul><li>sortï¼ˆï¼‰ï¼šè‡ªç„¶æ’åºï¼Œæµä¸­å…ƒç´ éœ€è¦å®ç°Comparableæ¥å£</li><li>sortedï¼ˆComparator comï¼‰ï¼šå®šåˆ¶æ’åºï¼Œè‡ªå®šä¹‰Comparatoræ’åºå™¨</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;String&gt; list = Arrays.asList(<span class="hljs-string">"aa"</span>, <span class="hljs-string">"ff"</span>, <span class="hljs-string">"dd"</span>);<br><span class="hljs-comment">//String ç±»è‡ªèº«å·²å®ç°Compareableæ¥å£</span><br>list.stream().sorted().forEach(System.out::println);<span class="hljs-comment">// aa dd ff</span><br> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>{<br>     String a;<br>     <span class="hljs-type">int</span> b;<br> }<br>List&lt;Student&gt; studentList = Arrays.asList(s1, s2, s3, s4);<br><br><span class="hljs-comment">//è‡ªå®šä¹‰æ’åºï¼šå…ˆæŒ‰å§“åå‡åºï¼Œå§“åç›¸åŒåˆ™æŒ‰å¹´é¾„å‡åº</span><br>studentList.stream().sorted(<br>        (o1, o2) -&gt; {<br>            <span class="hljs-keyword">if</span> (o1.getName().equals(o2.getName())) {<br>                <span class="hljs-keyword">return</span> o1.getAge() - o2.getAge();<br>            } <span class="hljs-keyword">else</span> {<br>                <span class="hljs-keyword">return</span> o1.getName().compareTo(o2.getName());<br>            }<br>        }<br>).forEach(System.out::println);<br><br></code></pre></td></tr></tbody></table></figure><p>peekï¼šå¦‚åŒäºmapï¼Œèƒ½å¾—åˆ°æµä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚ä½†mapæ¥æ”¶çš„æ˜¯ä¸€ä¸ªFunctionè¡¨è¾¾å¼ï¼Œæœ‰è¿”å›å€¼ï¼›è€Œpeekæ¥æ”¶çš„æ˜¯Consumerè¡¨è¾¾å¼ï¼Œæ²¡æœ‰è¿”å›å€¼</p><p>allMatchï¼šæ¥æ”¶ä¸€ä¸ª Predicate å‡½æ•°ï¼Œå½“æµä¸­æ¯ä¸ªå…ƒç´ éƒ½ç¬¦åˆè¯¥æ–­è¨€æ—¶æ‰è¿”å›trueï¼Œå¦åˆ™è¿”å›false</p><ul><li>noneMatchï¼šæ¥æ”¶ä¸€ä¸ª Predicate å‡½æ•°ï¼Œå½“æµä¸­æ¯ä¸ªå…ƒç´ éƒ½ä¸ç¬¦åˆè¯¥æ–­è¨€æ—¶æ‰è¿”å›trueï¼Œå¦åˆ™è¿”å›false</li><li>anyMatchï¼šæ¥æ”¶ä¸€ä¸ª Predicate å‡½æ•°ï¼Œåªè¦æµä¸­æœ‰ä¸€ä¸ªå…ƒç´ æ»¡è¶³è¯¥æ–­è¨€åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›false</li><li>findFirstï¼šè¿”å›æµä¸­ç¬¬ä¸€ä¸ªå…ƒç´ </li><li>findAnyï¼šè¿”å›æµä¸­çš„ä»»æ„å…ƒç´ </li><li>countï¼šè¿”å›æµä¸­å…ƒç´ çš„æ€»ä¸ªæ•°</li><li><p>maxï¼šè¿”å›æµä¸­å…ƒç´ æœ€å¤§å€¼</p></li><li><p>minï¼šè¿”å›æµä¸­å…ƒç´ æœ€å°å€¼</p></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">List&lt;Integer&gt; list = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);<br> <br><span class="hljs-type">boolean</span> <span class="hljs-variable">allMatch</span> <span class="hljs-operator">=</span> list.stream().allMatch(e -&gt; e &gt; <span class="hljs-number">10</span>); <span class="hljs-comment">//false</span><br><span class="hljs-type">boolean</span> <span class="hljs-variable">noneMatch</span> <span class="hljs-operator">=</span> list.stream().noneMatch(e -&gt; e &gt; <span class="hljs-number">10</span>); <span class="hljs-comment">//true</span><br><span class="hljs-type">boolean</span> <span class="hljs-variable">anyMatch</span> <span class="hljs-operator">=</span> list.stream().anyMatch(e -&gt; e &gt; <span class="hljs-number">4</span>);  <span class="hljs-comment">//true</span><br> <br><span class="hljs-type">Integer</span> <span class="hljs-variable">findFirst</span> <span class="hljs-operator">=</span> list.stream().findFirst().get(); <span class="hljs-comment">//1</span><br><span class="hljs-type">Integer</span> <span class="hljs-variable">findAny</span> <span class="hljs-operator">=</span> list.stream().findAny().get(); <span class="hljs-comment">//1</span><br> <br><span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> list.stream().count(); <span class="hljs-comment">//5</span><br><span class="hljs-type">Integer</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> list.stream().max(Integer::compareTo).get(); <span class="hljs-comment">//5</span><br><span class="hljs-type">Integer</span> <span class="hljs-variable">min</span> <span class="hljs-operator">=</span> list.stream().min(Integer::compareTo).get(); <span class="hljs-comment">//1</span><br><br></code></pre></td></tr></tbody></table></figure><ul><li>collectï¼šæ¥æ”¶ä¸€ä¸ªCollectorå®ä¾‹ï¼Œå°†æµä¸­å…ƒç´ æ”¶é›†æˆå¦å¤–ä¸€ä¸ªæ•°æ®ç»“æ„ã€‚</li></ul><h3 id="5-å¤šçº¿ç¨‹çš„ç†è§£"><a href="#5-å¤šçº¿ç¨‹çš„ç†è§£" class="headerlink" title="5. å¤šçº¿ç¨‹çš„ç†è§£?"></a>5. å¤šçº¿ç¨‹çš„ç†è§£?</h3><p>çº¿ç¨‹æ˜¯è¿›ç¨‹çš„æ‰§è¡Œå•ä½ã€åœ¨ç¨‹åºä¸­ã€çº¿ç¨‹æ˜¯ç‹¬ç«‹çš„ã€å¹¶å‘çš„æ‰§è¡Œæµ</p><p>çº¿ç¨‹çš„ç‰¹ç‚¹ï¼š</p><ol><li>æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å †æ ˆï¼Œç¨‹åºè®¡æ•°å™¨ã€å±€éƒ¨å˜é‡ã€ä½“ç°äº†çº¿ç¨‹çš„ç‹¬ç«‹æ€§</li><li>ç›¸åŒçˆ¶è¿›ç¨‹ä¸‹çš„æ‰€æœ‰çº¿ç¨‹å…±äº«è¿›ç¨‹ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼ˆegï¼šä»£ç æ®µã€è¿›ç¨‹çš„å…±æœ‰æ•°æ®ï¼‰ï¼Œä¸ºæ­¤å¯ä»¥å®ç°çº¿ç¨‹çš„ç›¸äº’é€šä¿¡(åŠ¨æ€æ€§)</li><li>å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘è¿›è¡Œã€äº’ä¸å½±å“.ï¼ˆå¹¶å‘æ€§ï¼‰</li></ol><h3 id="6-ä»€ä¹ˆæ—¶å€™ç”¨åˆ°å¤šçº¿ç¨‹ï¼Ÿ"><a href="#6-ä»€ä¹ˆæ—¶å€™ç”¨åˆ°å¤šçº¿ç¨‹ï¼Ÿ" class="headerlink" title="6. ä»€ä¹ˆæ—¶å€™ç”¨åˆ°å¤šçº¿ç¨‹ï¼Ÿ"></a>6. ä»€ä¹ˆæ—¶å€™ç”¨åˆ°å¤šçº¿ç¨‹ï¼Ÿ</h3><ol><li>å½“éœ€è¦åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡çš„æ—¶å€™ï¼ˆé«˜å¹¶å‘ï¼‰</li><li>å½“éœ€è¦åœ¨ä¸å½±å“å…¶ä»–éƒ¨åˆ†çš„æƒ…å†µä¸‹æ‰§è¡Œå¤§é‡çš„è®¡ç®—æ—¶å€™ï¼ˆåå°å¤„ç†å¤§é‡çš„ä»»åŠ¡ï¼‰</li><li>å½“éœ€è¦å¹¶è¡Œæ‰§è¡Œå¤šä¸ªç½‘ç»œæ“ä½œæ—¶</li></ol><p>å¯¹äº<strong>å¤„ç†æ—¶é—´çŸ­çš„æœåŠ¡</strong>æˆ–è€…<strong>å¯åŠ¨é¢‘ç‡é«˜</strong>çš„è¦ç”¨å•çº¿ç¨‹ï¼Œç›¸åç”¨å¤šçº¿ç¨‹</p><h3 id="7-çº¿ç¨‹æ€ä¹ˆç”¨ï¼Ÿ"><a href="#7-çº¿ç¨‹æ€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="7.çº¿ç¨‹æ€ä¹ˆç”¨ï¼Ÿ"></a>7.çº¿ç¨‹æ€ä¹ˆç”¨ï¼Ÿ</h3><ol><li>åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ç±»ï¼Œç»§æ‰¿Threadç±»æˆ–è€…å®ç°Runnableæ¥å£ï¼Œè¿™ä¸ªç±»å°±æˆä¸ºäº†ä¸€ä¸ªçº¿ç¨‹ç±»</li><li>é‡å†™runï¼ˆï¼‰æ–¹æ³•ï¼šåœ¨è¿™ä¸ªçº¿ç¨‹ç±»ä¸­ï¼Œé‡å†™runï¼ˆï¼‰æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ˜¯çº¿ç¨‹æ‰§è¡Œçš„å…¥å£ï¼Œå®šä¹‰çº¿ç¨‹æ‰§è¡Œæ“ä½œ</li><li>åˆ›å»ºçº¿ç¨‹å®ä¾‹ï¼šåˆ›å»ºçº¿ç¨‹å®ä¾‹å¹¶è°ƒç”¨startï¼ˆï¼‰æ–¹æ³•å¯åŠ¨çº¿ç¨‹</li><li>çº¿ç¨‹æ‰§è¡Œï¼šçº¿ç¨‹å¯åŠ¨åä¼šè‡ªåŠ¨è°ƒç”¨runï¼ˆï¼‰æ–¹æ³•ä¸­çš„å®šä¹‰æ“ä½œï¼Œæ‰§è¡Œçº¿ç¨‹</li><li>çº¿ç¨‹æ§åˆ¶ï¼šåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨çº¿ç¨‹æ§åˆ¶æ–¹æ³•å¦‚:sleep() ã€yieldï¼ˆï¼‰ã€joinï¼ˆï¼‰ç­‰æ–¹æ³•</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> extend Thread{<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"MyThread running"</span>);<br>    }<br>}<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> implments Runnable{<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"MyRunnable running"</span>);<br>    }<br>}<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span>(){<br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String args[])</span> {<br>      <span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹ç±»å®ä¾‹</span><br>      <span class="hljs-type">MyThread</span> <span class="hljs-variable">t1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br>      <span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹å®ä¾‹ï¼Œå¹¶å¯åŠ¨çº¿ç¨‹</span><br>      <span class="hljs-type">Thread</span> <span class="hljs-variable">t2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MyRunnable</span>());<br>      t1.start();<br>      t2.start();<br>   }<br>}<br><br></code></pre></td></tr></tbody></table></figure><h3 id="8-runæ–¹æ³•å’Œstartæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#8-runæ–¹æ³•å’Œstartæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="8. runæ–¹æ³•å’Œstartæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«?"></a>8. runæ–¹æ³•å’Œstartæ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«?</h3><ul><li>run()æ–¹æ³•æ˜¯çº¿ç¨‹çš„æ‰§è¡Œä½“ã€æ˜¯çº¿ç¨‹æ‰§è¡Œçš„ä»£ç å—ï¼Œå¦‚æœç›´æ¥è°ƒç”¨runï¼ˆï¼‰æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•ä¼šåœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ã€‚</li><li>Startï¼ˆï¼‰æ–¹æ³•ç”¨äºå¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œå¯åŠ¨çº¿ç¨‹çš„åŒæ—¶èƒ½å¤Ÿè‡ªåŠ¨çš„è°ƒç”¨runï¼ˆï¼‰æ–¹æ³•ï¼Œåœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œçº¿ç¨‹æ“ä½œã€‚</li></ul><p>æ‰€ä»¥ä¸¤è€…çš„åŒºåˆ«ä¸ºï¼šstartï¼ˆï¼‰æ–¹æ³•æ˜¯ç”¨äºå¯åŠ¨æ–°çš„çº¿ç¨‹ã€è€Œrunï¼ˆï¼‰æ–¹æ³•æ˜¯ç”¨äºå®šä¹‰çº¿ç¨‹æ‰§è¡Œçš„æ“ä½œã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> {<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {<br>         System.out.println(<span class="hljs-string">"Thread running: "</span> + i);<br>      }<br>   }<br>}<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>      <span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹å®ä¾‹</span><br>      <span class="hljs-type">MyThread</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyThread</span>();<br><br>      <span class="hljs-comment">// ç›´æ¥è°ƒç”¨run()æ–¹æ³•</span><br>      t.run();<br><br>      <span class="hljs-comment">// è°ƒç”¨start()æ–¹æ³•ï¼Œå¯åŠ¨æ–°çº¿ç¨‹</span><br>      t.start();<br>   }<br>}<br><br></code></pre></td></tr></tbody></table></figure><h3 id="9-è°ˆè°ˆå¯¹springçš„ç†è§£"><a href="#9-è°ˆè°ˆå¯¹springçš„ç†è§£" class="headerlink" title="9.è°ˆè°ˆå¯¹springçš„ç†è§£"></a>9.è°ˆè°ˆå¯¹springçš„ç†è§£</h3><p>ä»–æ˜¯ä¸€ä¸ªå¼€æºçš„javaç¨‹åºæ¡†æ¶ï¼Œå®ƒåŸºäºIOCï¼ˆæ§åˆ¶åè½¬ï¼‰å’ŒAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰çš„å¼€å‘æ¨¡å¼ï¼Œä¾¿äºç³»ç»Ÿç¨‹åºçš„å¼€å‘ä»¥åŠç»´æŠ¤ï¼Œå®ƒä¸»è¦ç‰¹ç‚¹æ˜¯<strong>è½»é‡çº§</strong>ï¼ˆä½ä¾µå…¥ã€ä½è€¦åˆï¼‰çš„å¼€å‘</p><ul><li>Core Containerï¼šåŒ…å«æ ¸å¿ƒå®¹å™¨å’Œä¾èµ–æ³¨å…¥åŠŸèƒ½ï¼Œæä¾›äº†BeanFactoryã€ApplicationContextç­‰å®¹å™¨å’ŒBeanï¼ŒBeançš„ç”Ÿå‘½å‘¨æœŸã€å±æ€§æ³¨å…¥ç­‰ç›¸å…³åŠŸèƒ½</li><li>AOPæä¾›äº†é¢å‘åˆ‡é¢çš„ç¼–ç¨‹ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ¥å®ç°æ—¥å¿—è®°å½•ï¼Œæ€§èƒ½ç›‘æ§ï¼Œäº‹åŠ¡ç®¡ç†ç­‰æ¨ªå‘é¢†åŸŸä»è€Œæé«˜ç³»ç»Ÿçš„å¯é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§</li><li>Data Access/Intergrationï¼šæä¾›äº†å¯¹æ•°æ®åº“è®¿é—®å’Œç»§æ‰¿çš„æ”¯æŒåŒ…æ‹¬JDBCã€ORMã€NoSQLç­‰æ•°æ®åº“</li><li>Webï¼šæä¾›äº†å¯¹Webå¼€å‘çš„æ”¯æŒã€åŒ…æ‹¬MVCã€RESTã€WebæœåŠ¡å’ŒWebSocketç­‰</li><li>Testï¼šæä¾›äº†å¯¹å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•çš„æ”¯æŒ</li></ul><p>Springæ¡†æ¶çš„æ ¸å¿ƒæ˜¯IOCå®¹å™¨ï¼ŒIOCå®¹å™¨è´Ÿè´£å¯¹è±¡çš„å®ä¾‹åŒ–ã€é…ç½®å’Œç®¡ç†å¯¹è±¡ï¼ˆBeanï¼‰ã€å¹¶å°†å®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»è¿›è¡Œæ³¨å…¥ã€‚springæ¡†æ¶é€šè¿‡IOCå®¹å™¨å®ç°äº†é«˜åº¦çš„å¯é‡ç”¨æ€§å’Œæ¾è€¦åˆæ€§ã€åªéœ€è¦å…³å¿ƒBeançš„å®šä¹‰å’Œä¾èµ–å…³ç³»çš„é…ç½®ï¼Œä¸éœ€è¦å…³å¿ƒä»–å¦‚ä½•è¢«åˆ›å»ºå’Œç®¡ç†</p><p>å¦å¤–AOPåŠŸèƒ½å¯ä»¥å°†æ—¥å¿—ã€å®‰å…¨ã€äº‹åŠ¡ç­‰ä¸æ ¸å¿ƒä¸šåŠ¡é€»è¾‘åˆ†ç¦»ä½¿å¾—ç³»ç»Ÿæ›´åŠ å®¹æ˜“è¢«ç»´æŠ¤å’Œæ‰©å±•ã€‚</p><p>IOCæ‰§è¡Œæµç¨‹ï¼š</p><ol><li>è¯»å–æ ‡æ³¨çš„é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°é…ç½®ä¿¡æ¯å¯¹åº”çš„ç±»å</li><li>ä½¿ç”¨åå°„APIï¼ŒåŸºäºç±»åè¿›è¡Œå®ä¾‹åŒ–å¯¹è±¡</li><li>å°†å¯¹è±¡å®ä¾‹ï¼Œé€šè¿‡æ„é€ å‡½æ•°æˆ–è€…setterä¼ é€’ç»™æ‰€å®ä¾‹åŒ–çš„å¯¹è±¡</li></ol><p>AOPç¼–ç¨‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> service;<br> <span class="hljs-comment">//åœ¨ Packgeã€serviceã€‘ä¸‹åˆ›å»º ã€ProductServiceã€‘ç±»ï¼š</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doSomeService</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"doSomeService"</span>);<br>    }<br>}<br><span class="hljs-comment">//åœ¨xmlæ–‡ä»¶ä¸­è£…é…è¯¥bean</span><br>&lt;bean name=<span class="hljs-string">"productService"</span> class=<span class="hljs-string">"service.ProductService"</span> /&gt;<br><span class="hljs-comment">//åœ¨ã€TestSpringã€‘ä¸­ç¼–å†™æµ‹è¯•ä»£ç åœ¨ Packgeã€aspectã€‘ä¸‹å‡†å¤‡æ—¥å¿—åˆ‡é¢ ã€LoggerAspectã€‘ç±»ï¼š</span><br><span class="hljs-keyword">package</span> aspect;<br> <br><span class="hljs-keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;<br> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggerAspect</span> {<br>    <br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">log</span><span class="hljs-params">(ProceedingJoinPoint joinPoint)</span> <span class="hljs-keyword">throws</span> Throwable {<br>        System.out.println(<span class="hljs-string">"start log:"</span> + joinPoint.getSignature().getName());<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">object</span> <span class="hljs-operator">=</span> joinPoint.proceed();<br>        System.out.println(<span class="hljs-string">"end log:"</span> + joinPoint.getSignature().getName());<br>        <span class="hljs-keyword">return</span> object;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>åœ¨xmlæ–‡ä»¶ä¸­å£°æ˜ä¸šåŠ¡å¯¹è±¡å’Œæ—¥å¿—åˆ‡é¢</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">"http://www.springframework.org/schema/aop"</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:tx</span>=<span class="hljs-string">"http://www.springframework.org/schema/tx"</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">"http://www.springframework.org/schema/context"</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"</span></span><br><span class="hljs-string"><span class="hljs-tag">   http://www.springframework.org/schema/beans</span></span><br><span class="hljs-string"><span class="hljs-tag">   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">   http://www.springframework.org/schema/aop</span></span><br><span class="hljs-string"><span class="hljs-tag">   http://www.springframework.org/schema/aop/spring-aop-3.0.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">   http://www.springframework.org/schema/tx</span></span><br><span class="hljs-string"><span class="hljs-tag">   http://www.springframework.org/schema/tx/spring-tx-3.0.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">   http://www.springframework.org/schema/context</span></span><br><span class="hljs-string"><span class="hljs-tag">   http://www.springframework.org/schema/context/spring-context-3.0.xsd"</span>&gt;</span><br> <br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"productService"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"service.ProductService"</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"loggerAspect"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"aspect.LoggerAspect"</span>/&gt;</span><br> <br>    <span class="hljs-comment">&lt;!-- é…ç½®AOP --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">aop:config</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- whereï¼šåœ¨å“ªäº›åœ°æ–¹ï¼ˆåŒ….ç±».æ–¹æ³•ï¼‰åšå¢åŠ  --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:pointcut</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"loggerCutpoint"</span></span><br><span class="hljs-tag">                      <span class="hljs-attr">expression</span>=<span class="hljs-string">"execution(* service.ProductService.*(..)) "</span>/&gt;</span><br> <br>        <span class="hljs-comment">&lt;!-- what:åšä»€ä¹ˆå¢å¼º --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">aop:aspect</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"logAspect"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"loggerAspect"</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- when:åœ¨ä»€ä¹ˆæ—¶æœºï¼ˆæ–¹æ³•å‰/å/å‰åï¼‰ --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">aop:around</span> <span class="hljs-attr">pointcut-ref</span>=<span class="hljs-string">"loggerCutpoint"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"log"</span>/&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspect</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">aop:config</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h3 id="10-spring-çš„-bean-æ˜¯ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–çš„ï¼Ÿ"><a href="#10-spring-çš„-bean-æ˜¯ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–çš„ï¼Ÿ" class="headerlink" title="10. spring çš„ bean æ˜¯ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–çš„ï¼Ÿ"></a>10. spring çš„ bean æ˜¯ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–çš„ï¼Ÿ</h3><p>Beançš„åˆå§‹åŒ–å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p><ol><li>å®ä¾‹åŒ–beanå¯¹è±¡ï¼šå®¹å™¨æ ¹æ®beançš„é…ç½®ä¿¡æ¯åˆ›å»ºbeanå®ä¾‹ï¼Œå¯ä»¥é€šè¿‡æ„é€ å‡½æ•°æˆ–å·¥å‚æ–¹æ³•æ¥å®ç°</li><li>è®¾ç½®beançš„å±æ€§å€¼ï¼šå®¹å™¨å°†beançš„å±æ€§å€¼æ³¨å…¥åˆ°beanå®ä¾‹ä¸­ã€å¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥æˆ–è€…å…¶ä»–æ–¹å¼æ¥å®ç°</li><li>è°ƒç”¨beançš„åˆå§‹åŒ–æ–¹æ³•ï¼šå®¹å™¨è°ƒç”¨beanå®ä¾‹çš„åˆå§‹åŒ–æ–¹æ³•å¯ä»¥é€šè¿‡å®ç°InitializingBeanæ¥å£åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šinit-methodæ–¹æ³•æ¥å®ç°</li><li>ä½¿ç”¨beanï¼šå®¹å™¨å°†åˆå§‹åŒ–åçš„beanå®ä¾‹è¿”å›ç»™è°ƒç”¨è€…ï¼Œè°ƒç”¨è€…å¯ä»¥ä½¿ç”¨è¯¥å®ä¾‹æ¥å®Œæˆç›¸åº”çš„ä¸šåŠ¡é€»è¾‘</li></ol><p>å¤§æ¦‚å°±æ˜¯ï¼šspringå®¹å™¨å¯åŠ¨æ—¶ï¼Œå…ˆæ‰«æé…ç½®æ–‡ä»¶æˆ–è€…æ³¨è§£ï¼Œå®ä¾‹åŒ–beanå¯¹è±¡ï¼Œå¹¶å°†beanæ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼Œå½“è°ƒç”¨beanæ—¶ï¼Œå®¹å™¨ä¼šæ ¹æ®beançš„ä¾èµ–å…³ç³»å’Œåˆå§‹åŒ–é¡ºåºæ¥åˆå§‹åŒ–beanï¼›éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœbeanå®ç°äº†DisposableBeanæ¥å£æˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šäº†destroymethodæ–¹æ³•å½“å®¹å™¨å…³é—­çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨beanå®ä¾‹çš„é”€æ¯æ–¹æ³•æ¥é‡Šæ”¾èµ„æº</p><p>åœ¨Springå®¹å™¨å¯åŠ¨æ—¶ï¼Œä¼šæ‰«æé…ç½®æ–‡ä»¶æˆ–æ³¨è§£ï¼Œå®ä¾‹åŒ–beanå¯¹è±¡ï¼Œå¹¶å°†beanæ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpringåªä¼šåœ¨ä½¿ç”¨åˆ°æŸä¸ªbeanæ—¶è¿›è¡Œåˆå§‹åŒ–ï¼Œå³æ‡’åŠ è½½æ¨¡å¼ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§åˆå§‹åŒ–æ‰€æœ‰çš„beanï¼Œè¿™æ ·å¯ä»¥èŠ‚çº¦ç³»ç»Ÿèµ„æºå’Œæé«˜åº”ç”¨ç¨‹åºçš„å¯åŠ¨é€Ÿåº¦ã€‚ä¸è¿‡ä¹Ÿå¯ä»¥å°†æ‰€æœ‰çš„beanåœ¨å¯åŠ¨æ—¶åˆå§‹åŒ–ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥lazy-initå±æ€§ä¸ºfalse æˆ–è€…åœ¨beançš„é…ç½®ä¸­è®¾ç½®@lazyæ³¨è§£ä¸ºfalseæ¥æ”¹å˜Beançš„åˆå§‹åŒ–æ–¹å¼ã€‚</p><h3 id="11-springçš„beané»˜è®¤æ˜¯å•ä¾‹è¿˜æ˜¯å¤šä¾‹çš„"><a href="#11-springçš„beané»˜è®¤æ˜¯å•ä¾‹è¿˜æ˜¯å¤šä¾‹çš„" class="headerlink" title="11. springçš„beané»˜è®¤æ˜¯å•ä¾‹è¿˜æ˜¯å¤šä¾‹çš„"></a>11. springçš„beané»˜è®¤æ˜¯å•ä¾‹è¿˜æ˜¯å¤šä¾‹çš„</h3><p>é»˜è®¤æ—¶å•ä¾‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´Springå®¹å™¨åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šåˆ›å»ºBeançš„å”¯ä¸€å®ä¾‹ï¼Œå¹¶åœ¨åç»­çš„è¯·æ±‚ä¸­å…±äº«è¯¥å®ä¾‹ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ç¨‹åºä¸­å¯¹è±¡çš„åˆ›é€ æ¬¡æ•°å’Œé”€æ¯æ¬¡æ•°ï¼Œæé«˜æ•ˆç‡ï¼Œå¯¹äºå•ä¾‹çš„beanï¼ŒSpringå®¹å™¨åœ¨å¯åŠ¨æ—¶å°±ä¼šå°†Beanå®ä¾‹åŒ–å¹¶ç¼“å­˜èµ·æ¥ï¼Œæ¯æ¬¡è¯·æ±‚åç¼“å­˜ä¸­çš„Beanï¼Œå› æ­¤å•ä¾‹çš„Beanéœ€è¦æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹éœ€è¦è¿›è¡Œåˆé€‚çš„åŒæ­¥å¤„ç†ï¼Œå¦åˆ™ä¼šå¯¼è‡´å¹¶å‘è®¿é—®çš„é—®é¢˜</p><p>ä»–ä¹Ÿæ”¯æŒå¤šä¾‹Beanï¼Œå³æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Beanï¼Œå¯¹äºå¤šä¾‹çš„Beanå®¹å™¨ä¸ä¼šç¼“å­˜Beanå®ä¾‹è€Œåœ¨æ¯æ¬¡è¯·æ±‚æ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚å¦‚æœéœ€è¦ä½¿ç”¨å¤šä¾‹å¯ä»¥åœ¨Beané…ç½®æ–‡ä»¶ä¸­æˆ–è€…æ³¨è§£ä¸­è®¾ç½®scopeå±æ€§ä¸ºprototype</p><h3 id="12-å¯¹äº‹åŠ¡çš„ç†è§£ï¼Ÿ"><a href="#12-å¯¹äº‹åŠ¡çš„ç†è§£ï¼Ÿ" class="headerlink" title="12. å¯¹äº‹åŠ¡çš„ç†è§£ï¼Ÿ"></a>12. å¯¹äº‹åŠ¡çš„ç†è§£ï¼Ÿ</h3><p>å°±æ˜¯æŒ‡ä½œä¸ºä¸€ä¸ªå•ç‹¬çš„é€»è¾‘å·¥ä½œå•å…ƒæ‰§è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼Œè¦ä¹ˆæ‰€æœ‰çš„æ“ä½œå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¶ä¸­ä¸€æ­¥æˆ–è€…å¤šæ­¥æ“ä½œæ‰§è¡Œå¤±è´¥å…¨éƒ¨å›æ»šåˆ°äº‹åŠ¡å¼€å§‹çš„çŠ¶æ€ï¼Œä¸ä¼šå‡ºç°éƒ¨åˆ†æ‰§è¡ŒæˆåŠŸéƒ¨åˆ†æ‰§è¡Œå¤±è´¥çš„åœºæ™¯ï¼Œå®ƒå¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p><p>åœ¨å…³ç³»æ•°æ®åº“ä¸­äº‹åŠ¡ç”±ä¸€ç»„SQLè¯­å¥ç»„æˆï¼Œå¯ä»¥é€šè¿‡æäº¤commitæˆ–è€…å›æ»šï¼ˆrollbackï¼‰æ¥è¿›è¡Œäº‹åŠ¡å¯¹æ•°æ®åº“çš„æ“ä½œï¼š</p><ul><li>åŸå­æ€§ï¼šäº‹åŠ¡æ˜¯ä¸€ä¸ªåŸå­çš„æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å›æ»šï¼Œæ˜¯ä¸ªä¸å¯å†åˆ†çš„å•å…ƒ</li><li>ä¸€è‡´æ€§ï¼šäº‹åŠ¡æ‰§è¡Œå‰å’Œæ‰§è¡Œåï¼Œæ•°æ®åº“å¿…é¡»å¤„äºä¸€è‡´çš„çŠ¶æ€ï¼Œåœ¨æ‰§è¡Œäº‹åŠ¡æœŸé—´ï¼Œæ‰€æœ‰çš„æ“ä½œç»“æœéƒ½æ˜¯ç¬¦åˆé¢„æœŸçš„è§„åˆ™å’Œçº¦æŸ</li><li>éš”ç¦»æ€§ï¼šå¤šä¸ªäº‹åŠ¡çš„æ‰§è¡Œæ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œä¸ä¼šç›¸äº’å½±å“ï¼›</li><li>æŒä¹…æ€§ï¼šä¸€æ—¦äº‹åŠ¡æäº¤æˆåŠŸï¼Œå…¶æ‰€ä½œçš„ä¿®æ”¹æ˜¯æ°¸ä¹…ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œå¹¶èƒ½å¤Ÿåœ¨æ•°æ®åº“é‡å¯åæ¢å¤</li></ul><p>åœ¨springæ¡†æ¶ä¸­äº‹åŠ¡é€šå¸¸ä½¿ç”¨å£°æ˜å¼äº‹åŠ¡ç®¡ç†æ¥å®ç°åœ¨æ–¹æ³•æˆ–è€…ç±»çš„ä¸Šé¢æ·»åŠ @Transactionæ³¨è§£ã€‚äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼šè¯»æœªæäº¤ã€ è¯»æäº¤ã€å¯é‡å¤è¯»ã€åºåˆ—åŒ–</p><ul><li><p>è„è¯»ï¼šè¯»å–äº†å¦ä¸€ä¸ªäº‹åŠ¡çš„æœªæäº¤æ•°æ®ã€‚</p></li><li><p>ä¸å¯é‡å¤è¯»ï¼šå¤šæ¬¡è¯»å–ç»Ÿä¸€æ•°æ®çš„ç»“æœä¸ä¸€è‡´ï¼Œè¯¥æ•°æ®è¢«å¦ä¸€ä¸ªäº‹åŠ¡æ›´æ–°å¹¶æäº¤äº†</p></li><li><p>å¹»è¯»ï¼šå¤šæ¬¡æŸ¥è¯¢çš„ç»“æœä¸ä¸€è‡´ï¼ŒåæŸ¥è¯¢çš„ç»“æœæ¯”ä¹‹å‰å¢åŠ æˆ–è€…å‡å°‘äº†æ•°æ®</p></li></ul><h3 id="13-javaä¸­äº‹åŠ¡çš„å›æ»š"><a href="#13-javaä¸­äº‹åŠ¡çš„å›æ»š" class="headerlink" title="13. javaä¸­äº‹åŠ¡çš„å›æ»š"></a>13. javaä¸­äº‹åŠ¡çš„å›æ»š</h3><p>ç¼–ç¨‹å¼å¯ä»¥ä½¿ç”¨TransactionTemplate å¯ä»¥è°ƒç”¨å…¶executeæ–¹æ³•æ‰§è¡Œäº‹åŠ¡é€»è¾‘å¹¶ç”¨tryCacheæ¥æ•è·å¼‚å¸¸ï¼Œé€šè¿‡setRollbackOnlyæ–¹æ³•æ¥æ ‡è®°å›æ»š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> TransactionTemplate transactionTemplate;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doTransaction</span><span class="hljs-params">()</span> {<br>    transactionTemplate.execute(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionCallbackWithoutResult</span>() {<br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doInTransactionWithoutResult</span><span class="hljs-params">(TransactionStatus status)</span> {<br>            <span class="hljs-keyword">try</span> {<br>                <span class="hljs-comment">// åœ¨è¿™é‡Œæ‰§è¡Œäº‹åŠ¡æ“ä½œ</span><br>                <span class="hljs-comment">// å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</span><br>            } <span class="hljs-keyword">catch</span> (Exception e) {<br>                status.setRollbackOnly(); <span class="hljs-comment">// æ ‡è®°å›æ»š</span><br>            }<br>        }<br>    });<br>}<br></code></pre></td></tr></tbody></table></figure><p>æ³¨è§£å¼ï¼šå¯ä»¥å£°æ˜äº‹åŠ¡çš„çº§åˆ« isolationæ¥è¿›è¡Œäº‹åŠ¡çš„ç®¡ç†æ–¹å¼</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Transactional(propagation = Propagation.REQUIRED, isolation = Isolation.READ_COMMITTED)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doTransaction</span><span class="hljs-params">()</span> {<br>    <span class="hljs-comment">// åœ¨è¿™é‡Œæ‰§è¡Œäº‹åŠ¡æ“ä½œ</span><br>    <span class="hljs-comment">// å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</span><br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="14-springbooté¡¹ç›®ä¸­-controllerå±‚æ¥æ”¶å‰ç«¯çš„å‚æ•°ä¼ é€’"><a href="#14-springbooté¡¹ç›®ä¸­-controllerå±‚æ¥æ”¶å‰ç«¯çš„å‚æ•°ä¼ é€’" class="headerlink" title="14. springbooté¡¹ç›®ä¸­ controllerå±‚æ¥æ”¶å‰ç«¯çš„å‚æ•°ä¼ é€’"></a>14. springbooté¡¹ç›®ä¸­ controllerå±‚æ¥æ”¶å‰ç«¯çš„å‚æ•°ä¼ é€’</h3><ol><li>é€šè¿‡@RequestParamæ³¨è§£æ¥æ”¶å‚æ•°</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = "/hello")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam("name")</span> String name, Model model)</span> {<br>    model.addAttribute(<span class="hljs-string">"name"</span>, name);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"hello"</span>;<br>}<br><span class="hljs-comment">//è¯¥æ–¹æ³•@RequestParamæ³¨è§£å°†nameå‚æ•°ç»‘å®šåˆ°nameæ–¹æ³•çš„å‚æ•°ä¸Š</span><br></code></pre></td></tr></tbody></table></figure><ol><li>é€šè¿‡@PathVariableæ³¨è§£æ¥æ”¶è·¯å¾„çš„å‚æ•°å®ä¾‹å¦‚ä¸‹ï¼š</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = "/users/{id}", method = RequestMethod.GET)</span><br><span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable("id")</span> Long id)</span> {<br>    <span class="hljs-keyword">return</span> userService.getUserById(id);<br>}<br></code></pre></td></tr></tbody></table></figure><ol><li>é€šè¿‡RequestBodyæ³¨è§£æ¥æ”¶è¯·æ±‚ä½“çš„å‚æ•°</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value="/users",method=RequestMethod.POST)</span><br>pubilc <span class="hljs-keyword">void</span> <span class="hljs-title function_">createUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span>{<br>    userService.createUser(user);<br>}<br><span class="hljs-comment">//ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œé€šè¿‡@RequestBodyæ³¨è§£å°†è¯·æ±‚ä½“ä¸­çš„JSON/XMLæ ¼å¼çš„å‚æ•°ç»‘å®šåˆ°Userå¯¹è±¡ä¸Šã€‚</span><br></code></pre></td></tr></tbody></table></figure><ol><li>é€šè¿‡@RequestHeaderæ³¨è§£æ¥æ”¶è¯·æ±‚å¤´çš„å‚æ•°</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = "/hello")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">(<span class="hljs-meta">@RequestHeader("User-Agent")</span> String userAgent, Model model)</span> {<br>    model.addAttribute(<span class="hljs-string">"userAgent"</span>, userAgent);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"hello"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="15-SpringMVCæ‰§è¡Œæµç¨‹ï¼Ÿ"><a href="#15-SpringMVCæ‰§è¡Œæµç¨‹ï¼Ÿ" class="headerlink" title="15. SpringMVCæ‰§è¡Œæµç¨‹ï¼Ÿ"></a>15. SpringMVCæ‰§è¡Œæµç¨‹ï¼Ÿ</h3><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/5220087-3c0f59d3c39a12dd.png" alt="img"></p><ol><li>ç”¨æˆ·å‘é€è¯·æ±‚åˆ°å‰ç«¯æ§åˆ¶å™¨DispacherServlet</li><li>DispacherServletæ”¶åˆ°è¯·æ±‚è°ƒç”¨å¤„ç†å™¨æ˜ å°„å™¨HandlerMapping</li><li>å¤„ç†å™¨æ˜ å°„å™¨æ ¹æ®è¯·æ±‚çš„urlæ‰¾åˆ°å…·ä½“çš„å¤„ç†å™¨ï¼Œç”Ÿæˆå¤„ç†å™¨æ‰§è¡Œé“¾HandlerExecutitonChain(ä¿æ‹¬å¤„ç†å™¨å¯¹è±¡å’Œå¤„ç†å™¨æ‹¦æˆªå™¨)ä¸€å¹¶è¿”å›ç»™DisptcherServlet</li><li>DispatcherServletæ ¹æ®å¤„ç†å™¨Handlerè·å–å¤„ç†é€‚é…å™¨HandlerAdapteræ‰§è¡ŒHandlerAdapterçš„ä¸€ç³»åˆ—æ“ä½œï¼Œå¦‚å‚æ•°å°è£…ï¼Œæ•°æ®æ ¼å¼è½¬æ¢ï¼Œæ•°æ®çš„éªŒè¯ç­‰æ“ä½œ</li><li>æ‰§è¡Œå¤„ç†å™¨Handlerï¼ˆControllerä¹Ÿå«åšé¡µé¢æ§åˆ¶å™¨ï¼‰</li><li>Handleræ‰§è¡Œå®Œæˆåè¿”å›ModelAndView</li><li>HandlerAdapterå°†Handleræ‰§è¡Œçš„ç»“æœModelAndViewè¿”å›åˆ°DispacherServlet</li><li>DispacherServletå°†ModelAndViewä¼ ç»™ViewResloverè§†å›¾è§£æå™¨</li><li>ViewResloverè§£æåè¿”å›å…·ä½“çš„View</li><li>DispacherServletå¯¹Viewè¿›è¡Œæ¸²æŸ“è§†å›¾ï¼ˆå³å°†æ¨¡å‹æ•°æ®modelå¡«å……è‡³è§†å›¾ï¼‰</li><li>DispatcherServletç›¸åº”ç”¨æˆ·</li></ol><p><a href="https://www.jianshu.com/p/8a20c547e245">https://www.jianshu.com/p/8a20c547e245</a></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">1.</span>å®¢æˆ·ç«¯å‘é€è¯·æ±‚åˆ°DispatcherServletï¼›<br><span class="hljs-comment">//å®¢æˆ·ç«¯é€šè¿‡æµè§ˆå™¨å‘Webåº”ç”¨ç¨‹åºå‘é€è¯·æ±‚ï¼Œè¯·æ±‚åˆ°è¾¾Webå®¹å™¨ï¼ˆå¦‚Tomcatï¼‰ï¼ŒWebå®¹å™¨é€šè¿‡Servletè§„èŒƒå°†è¯·æ±‚äº¤ç»™DispatcherServletå¤„ç†ã€‚</span><br><br><span class="hljs-number">2.</span>DispatcherServlet æ ¹æ®è¯·æ±‚çš„URLè°ƒç”¨HandlerMappingï¼Œæ‰¾åˆ°å¯¹åº”çš„Handlerï¼ˆControllerï¼‰ï¼›<br><span class="hljs-comment">//DispatcherServleté€šè¿‡HandlerMappingï¼ˆé€šå¸¸æ˜¯RequestMappingHandlerMappingï¼‰æ‰¾åˆ°å¯¹åº”çš„Handlerï¼ˆControllerï¼‰ã€‚HandlerMappingå°†è¯·æ±‚æ˜ å°„åˆ°å¯¹åº”çš„Controlleræ–¹æ³•ä¸Šï¼Œæ ¹æ®æ³¨è§£ï¼ˆå¦‚@RequestMappingï¼‰æˆ–é…ç½®æ–‡ä»¶ï¼ˆå¦‚XMLï¼‰ä¸­çš„ä¿¡æ¯æ¥ç¡®å®šå¯¹åº”çš„Controlleræ–¹æ³•ã€‚</span><br><span class="hljs-number">3.</span>Handleræ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œè¿”å›ModelAndViewå¯¹è±¡ï¼›<br><span class="hljs-comment">//DispatcherServletè°ƒç”¨æ‰¾åˆ°çš„Controlleræ–¹æ³•ï¼Œå¹¶å°†è¯·æ±‚å‚æ•°ï¼ˆå¦‚URLå‚æ•°æˆ–è¯·æ±‚ä½“ï¼‰ä¼ é€’ç»™Controlleræ–¹æ³•ã€‚Controlleræ–¹æ³•æ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œç„¶åè¿”å›ä¸€ä¸ªModelAndViewå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«è¦æ¸²æŸ“çš„è§†å›¾åç§°å’Œæ¨¡å‹æ•°æ®ã€‚</span><br>    <br><span class="hljs-number">4.</span>DispatcherServletæ ¹æ®ViewResolveræ‰¾åˆ°ModelAndViewå¯¹è±¡å¯¹åº”çš„Viewï¼›<br><span class="hljs-comment">//DispatcherServletå°†ModelAndViewå¯¹è±¡ä¼ é€’ç»™ViewResolverï¼ŒViewResolveræ ¹æ®é…ç½®æ‰¾åˆ°å¯¹åº”çš„Viewã€‚ViewResolverå¯ä»¥ä½¿ç”¨å¤šç§ç±»å‹çš„è§†å›¾è§£æå™¨ï¼ˆå¦‚InternalResourceViewResolverã€VelocityViewResolverç­‰ï¼‰ï¼Œæ¯ç§è§†å›¾è§£æå™¨å¯¹åº”ä¸€ç§è§†å›¾ç±»å‹ã€‚</span><br><span class="hljs-number">5.</span>Viewå°†æ¨¡å‹æ¸²æŸ“æˆHTMLï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ã€‚<br><span class="hljs-comment">//Viewå°†æ¨¡å‹æ•°æ®æ¸²æŸ“æˆHTMLï¼Œè¿”å›ç»™DispatcherServletï¼ŒDispatcherServletå°†HTMLè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨æ˜¾ç¤ºHTMLã€‚</span><br></code></pre></td></tr></tbody></table></figure><h3 id="16-å¦‚ä½•ç†è§£å‰åç«¯åˆ†ç¦»"><a href="#16-å¦‚ä½•ç†è§£å‰åç«¯åˆ†ç¦»" class="headerlink" title="16. å¦‚ä½•ç†è§£å‰åç«¯åˆ†ç¦»"></a>16. å¦‚ä½•ç†è§£å‰åç«¯åˆ†ç¦»</h3><p>å‰åç«¯åˆ†ç¦»æ˜¯ä¸€ç§åº”ç”¨æ¶æ„æ¨¡å¼ï¼Œå°†webåº”ç”¨ç¨‹åºçš„å‰ç«¯å’Œåç«¯åˆ†ç¦»æˆä¸¤ä¸ªå·¥ç¨‹ï¼Œä»–ä»¬é€šè¿‡æ¥å£é€šä¿¡ï¼Œå‰ç«¯å’Œåç«¯å¯ä»¥ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€è¿›è¡Œå¼€å‘ä»è€Œæé«˜å¼€å‘æ•ˆç‡ï¼Œåˆ†ç¦»æ¶æ„æ¨¡å¼åŒ…æ‹¬ï¼š</p><ol><li>å‰ç«¯ç«¯å¼€å‘äººå‘˜ä½¿ç”¨HTMLã€CSSã€JavaScriptç­‰æŠ€æœ¯æ ˆï¼Œå¼€å‘Webåº”ç”¨ç¨‹åºç•Œé¢å’Œäº¤äº’é€»è¾‘ï¼Œå‰ç«¯ç¨‹åºè¿è¡Œåœ¨webæµè§ˆå™¨ä¸Šã€‚</li><li>åç«¯ä½¿ç”¨javaã€pythonã€Node.sç­‰ç¼–ç¨‹è¯­è¨€å¼€å‘webåº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®å¤„ç†è·¯é€»è¾‘ï¼Œåç«¯è¿è¡Œåœ¨WebæœåŠ¡å™¨ä¸Šã€‚</li><li>æ¥å£è®¾è®¡ï¼šå‰åç«¯å¼€å‘äººå‘˜åå•†å¹¶è®¾è®¡æ¥å£ã€æ¥å£å®šä¹‰äº†å‰åç«¯åº”ç”¨ç¨‹åºä¹‹é—´çš„æ•°æ®ä¼ è¾“æ ¼å¼å’Œåè®®ï¼Œå¯ä»¥ä½¿ç”¨RESTful APIæ¥å£æ¥å®ç°ã€‚</li><li>æ¥å£å¼€å‘ï¼šåç«¯æ ¹æ®æ¥å£è®¾è®¡ï¼Œå¼€å‘æ¥å£ç«¯çš„æœåŠ¡ï¼Œæä¾›å‰ç«¯åº”ç”¨ç¨‹åºè®¿é—®åç«¯æ•°æ®å’ŒæœåŠ¡èƒ½åŠ›</li><li>å‰ç«¯é›†æˆï¼šå‰ç«¯å¼€å‘äººå‘˜å°†æ¥å£é›†æˆåˆ°å‰ç«¯åº”ç”¨ç¨‹åºä¸­ï¼Œä½¿ç”¨Ajaxç­‰æŠ€æœ¯ä»åç«¯è·å–æ•°æ®</li></ol><h3 id="17-mybatiså’Œmybatisplusçš„åŒºåˆ«"><a href="#17-mybatiså’Œmybatisplusçš„åŒºåˆ«" class="headerlink" title="17. mybatiså’Œmybatisplusçš„åŒºåˆ«"></a>17. mybatiså’Œmybatisplusçš„åŒºåˆ«</h3><p><strong>mybaits</strong> </p><ol><li>æ²¡æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–çš„æ•°æ®è®¿é—®æ¡†æ¶ã€å°è£…äº†JDBCåº•å±‚è®¿é—®æ•°æ®åº“çš„ç»†èŠ‚ã€‚</li><li>è§£é™¤äº†SQLè¯­å¥ä¸ä»£ç çš„è€¦åˆï¼Œæä¾›äº†DAOï¼ˆæ•°æ®åº“è®¿é—®å±‚ï¼‰ï¼Œå°†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®é€»è¾‘åˆ†ç¦»</li><li>ä½¿ç”¨åŸç”Ÿçš„SQLè¯­å¥æ¥å®Œæˆæ•°æ®åº“çš„è®¿é—®ï¼Œå¯ä»¥ç”¨xmlæ–‡ä»¶æˆ–è€…æ³¨è§£çš„æ–¹å¼ç¼–å†™SQLè¯­å¥ï¼Œæ–¹ä¾¿ç»´æŠ¤ã€ä¼˜åŒ–å’Œç»Ÿä¸€æ€§ç®¡ç†</li><li>æ‰€æœ‰çš„SQLè¯­å¥éƒ½æ˜¯è‡ªå·±å†™çš„ï¼Œè¿™å¯¼è‡´è¿‡æ¸¡çš„ä¾èµ–æ•°æ®åº“SQLè¯­å¥ï¼Œç§»æ¤æ€§å·®</li><li>æ”¯æŒé©¼å³°å‘½åæ˜ å°„xmlæ–‡ä»¶è®¾ç½®å¯¹è±¡å’Œæ•°æ®åº“å­—æ®µæ˜ å°„</li><li>æ‰‹åŠ¨è§£æï¼Œå®ä½“å…³ç³»æ˜ å°„è½¬æ¢ä¸ºmybatiså†…éƒ¨å¯¹è±¡ï¼Œç„¶åæ³¨å…¥å®¹å™¨è¿›è¡Œæ“ä½œ</li><li>ä¸æ”¯æŒlambdå½¢å¼è°ƒç”¨</li><li>xmlæ–‡ä»¶ç¼–å†™SQLè¯­å¥æ–¹å¼ï¼Œä¸é€‚åˆé‡è½½ï¼Œä¸æ”¯æŒDAOç±»æ–¹æ³•çš„é‡è½½ï¼Œå› ä¸ºxmlæ ‡ç­¾ä¸­çš„idå”¯ä¸€</li><li>xmlæ–‡ä»¶æä¾›äº†åŠ¨æ€SQLæ ‡ç­¾æ”¯æŒåŠ¨æ€ç¼–å†™SQL</li></ol><p><strong>Mybatis-plus</strong></p><ul><li>ä¸€é”®ç§»æ¤ï¼šå¯ä»¥åœ¨mybaitsåŸºç¡€ä¸Šè¿›è¡Œæ‰©å±•ï¼Œåªåšå¢å¼ºä¸åšæ”¹å˜</li><li>æŸè€—å°ï¼šå†…ç½®äº†åŸºæœ¬çš„å•è¡¨CRUDè¯­å¥ï¼Œæ€§èƒ½æ— æŸè€—ï¼Œé¢å‘å¯¹è±¡æ“ä½œ</li><li>é€šç”¨çš„CRUDæ“ä½œï¼Œå†…ç½®çš„CRUDæ–¹æ³•æ˜¯é€šç”¨çš„æ³›å‹æ¥å£ï¼ŒDAOç±»éœ€è¦å®ç°BaseMapperæ¥å£ã€å®ä½“ç±»éœ€è¦åºåˆ—åŒ–ï¼ŒServiceç±»åŒæ ·æœ‰ç›¸åº”çš„æ³›å‹æ¥å£ã€‚</li><li>è‡ªåŠ¨è§£æï¼šå®ä½“å…³ç³»æ˜ å°„è½¬æ¢ä¸ºMybatiså†…éƒ¨å¯¹è±¡ï¼Œç„¶åæ³¨å…¥å®¹å™¨æ“ä½œ</li><li>æ”¯æŒLambdaè°ƒç”¨</li><li>å¯ä»¥é¢„é˜²SQLæ³¨å…¥ï¼šå†…ç½®SQLæ³¨å…¥å‰¥ç¦»å™¨ï¼Œæœ‰æ•ˆé¢„é˜²SQLæ³¨å…¥æ”»å‡»</li></ul><p><a href="https://juejin.cn/post/7152141448321138718">https://juejin.cn/post/7152141448321138718</a></p><ul><li>Mybatis-pluså¼mybatisçš„å‡çº§ç‰ˆï¼Œmybatisplusåœ¨å¢åŠ äº†æ”¯æŒlambdaå½¢å¼è°ƒç”¨å¹¶åœ¨å®ä½“ç±»é…ç½®ä¸­æ·»åŠ äº†ï¼š@TableName(value=â€â€)ã€@TableId(value=â€â€)ã€@TableFieldï¼ˆvalue=â€â€ï¼‰ç­‰ä¸‰ä¸ªæ³¨è§£ç”¨æ¥æ˜ å°„æ•°æ®åº“è¡¨åŠè¡¨å­—æ®µä¸å®ä½“ç±»çš„å…³ç³»ã€‚</li><li>å¢åŠ äº†ï¼šä¸»é”®ç­–ç•¥ã€åˆ†é¡µæ’ä»¶ã€å…¨å±€æ‹¦æˆªæ’ä»¶ã€æ€§èƒ½åˆ†ææ’ä»¶ç­‰ã€‚</li></ul><h3 id="18-mpçš„æŸ¥è¯¢æ€ä¹ˆåšæ¯”è¾ƒå¤šï¼Ÿ"><a href="#18-mpçš„æŸ¥è¯¢æ€ä¹ˆåšæ¯”è¾ƒå¤šï¼Ÿ" class="headerlink" title="18. mpçš„æŸ¥è¯¢æ€ä¹ˆåšæ¯”è¾ƒå¤šï¼Ÿ"></a>18. mpçš„æŸ¥è¯¢æ€ä¹ˆåšæ¯”è¾ƒå¤šï¼Ÿ</h3><ul><li>æ¡ä»¶æ„é€ å™¨ï¼šä½¿ç”¨MPæä¾›çš„Wrapperç±»é€šè¿‡æ¡ä»¶æ„é€ æŸ¥è¯¢æ¡ä»¶è¿›è¡ŒæŸ¥è¯¢ï¼ŒWrapperç±»ä¸­å°è£…äº†å¸¸ç”¨çš„æŸ¥è¯¢æ¡ä»¶æ–¹æ³•ï¼Œä¾‹å¦‚eqã€neã€likeã€inç­‰å¯ä»¥æ ¹æ®éœ€è¦è‡ªç”±çš„ç»„åˆæŸ¥è¯¢æ¡ä»¶</li><li>åˆ†é¡µæŸ¥è¯¢ï¼Œmpæä¾›åˆ†é¡µæŸ¥è¯¢å·¥å…·Pageæœºå‹åˆ†é¡µæŸ¥è¯¢</li><li>LambdaæŸ¥è¯¢ï¼šä½¿ç”¨lambdaè¡¨è¾¾å¼è¿›è¡ŒæŸ¥è¯¢å¯ä»¥å®ç°ç±»å‹å®‰å…¨çš„æŸ¥è¯¢ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªå®ä½“</li><li>ChainæŸ¥è¯¢ï¼šä½¿ç”¨é“¾å¼è°ƒç”¨çš„æ–¹æ³•è¿›è¡ŒæŸ¥è¯¢å¯ä»¥ç®€åŒ–æŸ¥è¯¢è¯­å¥æé«˜ä»£ç çš„å¯è¯»æ€§</li></ul><h3 id="19-mpå¯ä»¥åšå¤šè¡¨çš„è”åˆæŸ¥è¯¢å—ï¼Ÿ"><a href="#19-mpå¯ä»¥åšå¤šè¡¨çš„è”åˆæŸ¥è¯¢å—ï¼Ÿ" class="headerlink" title="19.  mpå¯ä»¥åšå¤šè¡¨çš„è”åˆæŸ¥è¯¢å—ï¼Ÿ"></a>19.  mpå¯ä»¥åšå¤šè¡¨çš„è”åˆæŸ¥è¯¢å—ï¼Ÿ</h3><p>å¯ä»¥åœ¨xmlæ–‡ä»¶ä¸­ä¹¦å†™å¯¹åº”çš„sqlè¯­å¥ç„¶åæ³¨å…¥å¯¹åº”çš„æ–¹æ³•</p><p>ä¹Ÿå¯ä»¥åœ¨@Selectæ–¹æ³•ä¸­ç›´æ¥ç¼–å†™SQLè¯­å¥æ³¨å…¥</p><h3 id="20-å¯¹ç´¢å¼•çš„ç†è§£ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦å»ºç«‹ç´¢å¼•ï¼Ÿ"><a href="#20-å¯¹ç´¢å¼•çš„ç†è§£ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦å»ºç«‹ç´¢å¼•ï¼Ÿ" class="headerlink" title="20. å¯¹ç´¢å¼•çš„ç†è§£ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦å»ºç«‹ç´¢å¼•ï¼Ÿ"></a>20. å¯¹ç´¢å¼•çš„ç†è§£ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦å»ºç«‹ç´¢å¼•ï¼Ÿ</h3><p>å¯ä»¥å°†ç´¢å¼•å½“ä½œå­—å…¸çš„ç›®å½•ï¼Œæˆ‘ä»¬æŸ¥è¯¢æ•°æ®å°±æ˜¯æ ¹æ®ç´¢å¼•å»ºç«‹èµ·æ¥çš„ç›®å½•è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¸¸è§„çš„SQLè¡¨å¦‚æœä¸å®šä¹‰ç´¢å¼•ï¼ˆé»˜è®¤ä¸»é”®ä¹Ÿå°±æ˜¯ç´¢å¼•ï¼‰ä¼šè¿›è¡Œå…¨è¡¨æ‰«ææµªè´¹æ€§èƒ½ï¼Œæ‰€ä»¥ä¸€èˆ¬æ¥ä¹¦ç´¢å¼•èƒ½ä¼˜åŒ–æ€§èƒ½ã€‚</p><p>ç´¢å¼•çš„åˆ†ç±»ï¼š</p><ol><li>ä¸»é”®ç´¢å¼•ï¼Œæ˜¯ç‰¹æ®Šçš„å”¯ä¸€ç´¢å¼•</li><li>æ™®é€šç´¢å¼•ä¹Ÿæˆä¸ºå•åˆ—ç´¢å¼•</li><li>ç»„åˆç´¢å¼•</li><li>å”¯ä¸€ç´¢å¼•</li><li>å…¨æ–‡ç´¢å¼•</li></ol><p>æ ¹æ®æ•°æ®ç»“æ„åˆ†ç±»ï¼šå“ˆå¸Œç´¢å¼•ã€æ•°ç»„ç´¢å¼•ã€B+æ ‘ç´¢å¼•</p><p>æ ¹æ®ç‰©ç†å­˜å‚¨åˆ†ç±»ï¼šèšç°‡ç´¢å¼•å’Œéèšç°‡ç´¢å¼•</p><p>å»ºç«‹ç´¢å¼•çš„æƒ…å†µï¼š</p><ul><li>ç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œç»´æŠ¤èµ·æ¥è€—è´¹ç©ºé—´å’Œæ€§èƒ½</li><li>å¯¹äºæ•°æ®é‡å°‘çš„ä¸å»ºç«‹ç´¢å¼•</li><li>å¯¹äºé¢‘ç¹æŸ¥æ‰¾çš„ï¼Œæ•°æ®é‡å¤§çš„å­—æ®µå»ºç«‹ç´¢å¼•</li><li>ç»™é¢‘ç¹ä½œä¸ºæ’åºå’Œåˆ†ç»„çš„å­—æ®µå»ºç«‹ç´¢å¼•</li><li>ç»™æ¡ä»¶è¡¨è¾¾å¼ä¸­ç»å¸¸ç”¨åˆ°ä¸åŒå€¼çš„åˆ—æ·»åŠ ç´¢å¼•</li></ul><h3 id="21-æ…¢æŸ¥è¯¢æŒ‡ä»¤"><a href="#21-æ…¢æŸ¥è¯¢æŒ‡ä»¤" class="headerlink" title="21. æ…¢æŸ¥è¯¢æŒ‡ä»¤"></a>21. æ…¢æŸ¥è¯¢æŒ‡ä»¤</h3><p>æ…¢æŸ¥è¯¢æ˜¯ç”¨æ¥è®°å½•æˆ–åˆ†æMySQLæ•°æ®åº“ä¸­æ‰§è¡Œæ—¶é—´è¶…è¿‡ä¸€å®šé˜ˆå€¼çš„æŸ¥è¯¢è¯­å¥ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼å¯åŠ¨æˆ–è€…é…ç½®æ…¢æŸ¥è¯¢æŒ‡ä»¤ï¼š</p><ul><li><code>set global slow_query_log='ON';</code>å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—åŠŸèƒ½</li><li><code>set global slow_query_log_file=&lt;some file name&gt;</code>ï¼›è®¾ç½®æ…¢æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„å’Œåç§°</li><li><code>set global long_query_time =&lt;some value&gt;</code> ;è®¾ç½®æ…¢æŸ¥è¯¢çš„é˜ˆå€¼ï¼Œå•ä½ä¸ºç§’</li><li><code>set global log_queries_not_using_index='ON'</code>;è®°å½•æ²¡æœ‰ä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢è¯­å¥</li></ul><p>åœ¨my.cnfæˆ–è€…my.inié…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹é€‰é¡¹</p><ul><li><code>log_slow_queries=1</code> ;å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—åŠŸèƒ½</li><li><code>slow_query_log_file = &lt;some file name&gt;;</code> è®¾ç½®æ…¢æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶çš„è·¯å¾„å’Œåç§°ã€‚</li><li><code>long_query_time = &lt;some value&gt;;</code> è®¾ç½®æ…¢æŸ¥è¯¢çš„é˜ˆå€¼ï¼Œå•ä½ä¸ºç§’ã€‚</li><li><code>log_queries_not_using_indexes = 1;</code> è®°å½•æ²¡æœ‰ä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢è¯­å¥ã€‚</li></ul><h3 id="22-å•å¥sqlå¦‚ä½•åˆ¤æ–­æ˜¯å¦èµ°äº†ç´¢å¼•ï¼Ÿ"><a href="#22-å•å¥sqlå¦‚ä½•åˆ¤æ–­æ˜¯å¦èµ°äº†ç´¢å¼•ï¼Ÿ" class="headerlink" title="22. å•å¥sqlå¦‚ä½•åˆ¤æ–­æ˜¯å¦èµ°äº†ç´¢å¼•ï¼Ÿ"></a>22. å•å¥sqlå¦‚ä½•åˆ¤æ–­æ˜¯å¦èµ°äº†ç´¢å¼•ï¼Ÿ</h3><p>å¯ä»¥ä½¿ç”¨EXPLAINå…³é”®å­—åˆ¤æ–­æ˜¯å¦èµ°ç´¢å¼•ï¼Œä»–æ˜¯ä¸ªæ¨¡æ‹Ÿè¿‡ç¨‹ï¼Œå®é™…ä¸Šå¹¶ä¸æ‰§è¡Œï¼Œå®ƒå¯ä»¥ç”¨æ¥æŸ¥çœ‹MYSQLæ‰§è¡ŒæŸ¥è¯¢æ—¶çš„æ‰§è¡Œè®¡åˆ’ã€åŒ…æ‹¬è¡¨çš„é“¾æ¥æ–¹å¼ï¼Œä½¿ç”¨ç´¢å¼•ã€æ‰«æçš„è¡Œæ•°</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">EXPLAIN <span class="hljs-keyword">SELECT</span> id <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span>;<br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230225154315271.png" alt="image-20230225154315271"></p><p>æ‰§è¡Œä¸Šè¿°è¯­å¥ä¼šæ”¾å›è¯¦ç»†çš„æŸ¥è¯¢è®¡åˆ’ä¿¡æ¯ï¼šåŒ…æ‹¬ä½¿ç”¨çš„ç´¢å¼•ã€æ‰«æçš„è¡Œæ•°ã€è¿æ¥æ–¹å¼ç­‰ï¼Œå…¶ä¸­çš„keyè¡¨ç¤ºç´¢å¼•ï¼Œå¦‚æœä¸ºNULLåˆ™æœªä½¿ç”¨ç´¢å¼•ï¼›</p><h3 id="23-æ•°æ®åº“çš„é”ï¼Ÿ"><a href="#23-æ•°æ®åº“çš„é”ï¼Ÿ" class="headerlink" title="23.æ•°æ®åº“çš„é”ï¼Ÿ"></a>23.æ•°æ®åº“çš„é”ï¼Ÿ</h3><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/Zu4vlv7L2S.png!large" alt="ä¸€å¼ å›¾å½»åº•ææ‡‚ MySQL çš„é”æœºåˆ¶"></p><p>æŒ‰ç…§é”çš„ç±»å‹åˆ†ä¸ºè¡¨é”ã€è¡Œé”ã€é¡µé”</p><ul><li>è¡¨é”ï¼š<ul><li>è¯»é”ï¼šä¹Ÿå«åšå…±äº«é”ï¼Œé’ˆå¯¹åŒä¸€ä»½æ•°æ®å¤šä¸ªè¯»æ“ä½œå¯ä»¥åŒæ—¶è¿›è¡Œäº’ä¸å½±å“(select)</li><li>å†™é”ï¼šæ’ä»–é”ï¼Œå½“å‰æ“ä½œæ²¡å®Œæˆä¹‹å‰ä¼šé˜»å¡å…¶ä»–è¯»å’Œå†™æ“ä½œï¼ˆupdate\insert\deleteï¼‰</li><li>é»˜è®¤å­˜å‚¨å¼•æ“ï¼šMyISAM</li><li>ç‰¹ç‚¹ï¼šå¯¹æ•´å¼ è¡¨åŠ é”ï¼Œå¼€é”€å°ã€åŠ é”å¿«ã€æ— æ­»é”ã€æ‰€å¾—ç²’åº¦å¤§ã€å‘ç”Ÿé”çš„å†²çªæ¦‚ç‡å¤§å¹¶å‘æ€§ä½</li></ul></li><li>è¡Œé”ï¼š<ul><li>è¯»é”ï¼šå…±äº«é”ï¼Œå…è®¸ä¸€ä¸ªäº‹åŠ¡å»è¯»ä¸€è¡Œï¼Œç»„ç»‡å…¶ä»–äº‹åŠ¡è·å¾—ç›¸åŒæ•°æ®é›†çš„æ’ä»–é”</li><li>å†™é”ï¼šæ’å®ƒé”ï¼Œå…è®¸è·å¾—æ’ä»–é”çš„äº‹åŠ¡æ›´æ–°æ•°æ®ï¼Œé˜»æ­¢å…¶ä»–äº‹åŠ¡å–å¾—ç›¸åŒæ•°æ®é›†çš„å…±äº«é”å’Œæ’å®ƒé”</li><li>æ„å‘å…±äº«é”ï¼šä¸€ä¸ªäº‹åŠ¡ç»™å¦ä¸€ä¸ªæ•°æ®è¡ŒåŠ å…±äº«é”æ—¶å¿…é¡»å…ˆè·å¾—è¡¨çš„ISé”</li><li>æ„å‘æ’ä»–é”ï¼šä¸€ä¸ªäº‹åŠ¡ç»™ä¸€ä¸ªæ•°æ®è¡ŒåŠ æ’å®ƒé”æ—¶å¿…é¡»å…ˆè·å¾—è¯¥è¡¨çš„IXé”</li><li>é»˜è®¤å­˜å‚¨å¼•æ“ï¼šInnoDB</li><li>ç‰¹ç‚¹ï¼šå¯¹ä¸€è¡Œæ•°æ®åŠ é”ã€å¼€é”€å¤§ã€åŠ é”æ…¢ã€ä¼šå‡ºç°æ­»é”ã€é”çš„ç²’åº¦å°ã€å‘ç”Ÿé”å†²çªæ¦‚ç‡æœ€ä½ã€å¹¶å‘æ€§é«˜</li><li>å¸¦æ¥é—®é¢˜ï¼šè¯»æœªæäº¤ã€è„è¯»ã€ä¸å¯é‡å¤åº¦ã€å¹»è¯»</li></ul></li><li>é¡µé”<ul><li>å¼€é”€ã€åŠ é”æ—¶é—´å’Œé”ç²’åº¦ä»‹äºè¡¨é”å’Œè¡Œé”ä¹‹é—´ï¼Œä¼šå‡ºç°æ­»é”ï¼Œå¹¶å‘å¤„ç†èƒ½åŠ›ä¸€èˆ¬</li></ul></li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/ZEw4DFkZI2.png!large" alt="ä¸€å¼ å›¾å½»åº•ææ‡‚ MySQL çš„é”æœºåˆ¶"></p><p>æ‚²è§‚é”ï¼šæ˜¯æŒ‡åœ¨è®¿é—®æ•°æ®ä¹‹å‰å…ˆå¯¹æ•°æ®åŠ é”ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡ä¿®æ”¹æ•°æ®ï¼Œç›´åˆ°å½“å‰äº‹åŠ¡å®Œæˆæ‰é‡Šæ”¾é”ã€‚æ‚²è§‚é”é€‚åˆå†™å¤šè¯»å°‘çš„åœºæ™¯ï¼Œå¯ä»¥é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ç­‰é—®é¢˜ï¼Œä½†æ˜¯ä¼šé™ä½æ•°æ®åº“çš„å¹¶å‘æ€§èƒ½ï¼Œå¢åŠ æ­»é”æˆ–è¶…æ—¶çš„é£é™©ã€‚</p><p>ä¹è§‚é”ï¼šæ˜¯æŒ‡åœ¨è®¿é—®æ•°æ®æ—¶ä¸åŠ é”ï¼Œè€Œæ˜¯åœ¨æäº¤æ›´æ–°æ—¶æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–äº‹åŠ¡ä¿®æ”¹äº†æ•°æ®ã€‚ä¹è§‚é”é€‚åˆè¯»å¤šå†™å°‘çš„åœºæ™¯ï¼Œå¯ä»¥æé«˜æ•°æ®åº“çš„æ•ˆç‡å’Œååé‡ï¼Œä½†æ˜¯ä¼šå¢åŠ ç¨‹åºçš„å¤æ‚åº¦ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–é‡è¯•å¤±è´¥ã€‚</p><h3 id="24-é”å’Œé”çš„å†²çªé€šå¸¸å‘ç”Ÿåœ¨ï¼Ÿ"><a href="#24-é”å’Œé”çš„å†²çªé€šå¸¸å‘ç”Ÿåœ¨ï¼Ÿ" class="headerlink" title="24. é”å’Œé”çš„å†²çªé€šå¸¸å‘ç”Ÿåœ¨ï¼Ÿ"></a>24. é”å’Œé”çš„å†²çªé€šå¸¸å‘ç”Ÿåœ¨ï¼Ÿ</h3><ol><li>å¹¶å‘çš„è®¿é—®ç›¸åŒæ•°æ®ï¼šå½“å¤šä¸ªäº‹åŠ¡å¹¶å‘è®¿é—®ç›¸åŒæ•°æ®æ—¶ï¼Œç”±äºæ¯ä¸ªäº‹åŠ¡éƒ½éœ€è¦ç‹¬å è®¿é—®æƒé™å°±å¯èƒ½äº§ç”Ÿé”å†²çª</li><li>é•¿äº‹åŠ¡ï¼šå½“ä¸€ä¸ªäº‹åŠ¡é•¿æ—¶é—´å ç”¨èµ„æºè€Œæ²¡æœ‰é‡Šæ”¾çš„æ—¶ï¼Œå…¶ä»–äº‹åŠ¡å¯èƒ½å› ä¸ºç­‰å¾…è¯¥äº‹åŠ¡è€Œäº§ç”Ÿé”å†²çª</li><li>æ•°æ®åº“æ­»é”ï¼šå½“å¤šä¸ªäº‹åŠ¡ç­‰å¾…å¯¹æ–¹é‡Šæ”¾èµ„æºçš„æ—¶å€™ï¼Œå°±å¯èƒ½äº§ç”Ÿæ­»é”ï¼Œå¯¼è‡´æ‰€æœ‰çš„äº‹åŠ¡æ— æ³•ç»§ç»­æ‰§è¡Œã€‚</li></ol><p>é‡‡å–æªæ–½ï¼š</p><ul><li>ä¼˜åŒ–SQLè¯­å¥å°½é‡å‡å°‘å¯¹æ•°æ®åº“çš„è®¿é—®æ¬¡æ•°ï¼Œå‡å°‘é”çš„ç«äº‰æœºä¼š</li><li>æé«˜äº‹åŠ¡çš„æ‰§è¡Œæ•ˆç‡ï¼šå‡å°‘äº‹åŠ¡çš„æ‰§è¡Œæ—¶é—´ã€é™ä½é”çš„å†²çªæ¦‚ç‡</li><li>é™ä½äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼šé™ä½äº‹åŠ¡çš„éš”ç¦»çº§åˆ«å¯ä»¥å‡å°‘é”çš„ç«äº‰ï¼Œä½†æ˜¯ä¹Ÿä¼šé™ä½æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§</li><li>ä½¿ç”¨åˆ†å¸ƒå¼é”ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼é”æ¥é¿å…é”å’Œé”çš„å†²çªäº§ç”Ÿ</li></ul><h3 id="25-åç«¯æ¥å£æ€§èƒ½ä¼˜åŒ–"><a href="#25-åç«¯æ¥å£æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="25.åç«¯æ¥å£æ€§èƒ½ä¼˜åŒ–"></a>25.åç«¯æ¥å£æ€§èƒ½ä¼˜åŒ–</h3><ol><li><p>å–„äºåˆ©ç”¨å¼‚æ­¥ç¼–ç¨‹</p><ul><li><p>åˆ©ç”¨å¤šçº¿ç¨‹å®ç°å¼‚æ­¥ ï¼šä½¿ç”¨è‡ªå®šä¹‰çš„TreadPoolæ¥å®ç°å¤šçº¿ç¨‹æˆ–è€…CompletableFuture</p></li><li><p>ä½¿ç”¨MQä¸­é—´ä»¶å®ç°å¼‚æ­¥å¦‚åˆ†å¸ƒå¼æ¶ˆæ¯çš„ä¸­é—´ä»¶ï¼šrabbitMQï¼Œkafkaç­‰</p></li></ul></li><li><p>æ•°æ®é‡å¤§çš„æ—¶å€™ä½¿ç”¨åˆ†æ‰¹ä¸åˆ†é‡æ“ä½œ</p><ul><li>é¿å…forä¸­æ“ä½œæ•°æ®åº“å¯ä»¥ä½¿ç”¨Mybatis-pluså°è£…å¥½çš„æ‰¹å¤„ç†API</li><li>é¿å…åœ¨forä¸­è¿›è¡Œrpcè°ƒç”¨</li></ul></li><li><p>é¿å…å¤§äº‹åŠ¡</p><ul><li>â€‹    å°½é‡å°‘ä½¿ç”¨@Transactionalæ³¨è§£ï¼Œæ¨èä½¿ç”¨ç¼–ç¨‹å¼çš„äº‹åŠ¡</li></ul></li><li><p>ä¼˜åŒ–SQLæ…¢æŸ¥è¯¢</p><ul><li>å…³é”®è¯å»ºç«‹ç´¢å¼•å¹¶ä¸”ç”¨ä¸Šç´¢å¼•</li><li>SQLå¤æ‚ä¸”æ…¢å¯ä»¥ä½¿ç”¨javaä»£ç æ¥å®ç°å¯¹åº”é€»è¾‘</li><li>å¯¹æ•°æ®åº“è¿›è¡Œåˆ†è¡¨ç®¡ç†</li><li>æ—§æ•°æ®è®¿é—®è¾ƒå°‘å¯ä»¥å¯¹æ•°æ®è¿›è¡Œå†·çƒ­åˆ†ç¦»</li></ul></li><li><p>åˆ©ç”¨Redisä½œä¸ºåˆ†å¸ƒå¼ç¼“å­˜</p></li><li><p>åˆ©ç”¨Caffeineä½œä¸ºæœ¬åœ°ç¼“å­˜</p></li><li><p>æ§åˆ¶å¥½é”çš„ç²’åº¦ï¼šé”çš„ç²’åº¦å¤ªå¤§èƒ½å½±å“ç³»ç»Ÿçš„ååé‡</p></li></ol><p>å½“ä¸€ä¸ªæ¥å£ç›¸åº”ç‰¹åˆ«æ…¢çš„æ—¶å€™å¯ä»¥ä»ï¼š</p><ol><li>æŸ¥çœ‹ç³»ç»Ÿèµ„æºçš„å ç”¨æƒ…å†µCPUã€å†…å­˜ã€ç£ç›˜ã€å’Œç½‘ç»œçœ‹æ˜¯å¦éœ€è¦å‡çº§</li><li>åˆ†ææ•°æ®åº“æŸ¥è¯¢çš„æ€§èƒ½ï¼šæŸ¥çœ‹æ•°æ®åº“çš„æŸ¥è¯¢æ—¥å¿—ã€æ‰§è¡Œè®¡åˆ’ã€ç´¢å¼•çš„å®è¡Œæƒ…å†µç¡®å®šæ˜¯å¦å­˜åœ¨æ…¢æŸ¥è¯¢å’Œç´¢å¼•å¤±æ•ˆç­‰é—®é¢˜</li><li>åˆ†ææ—¥å¿—å’Œç›‘æ§æ•°æ®ï¼šé€šè¿‡æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—å’Œç›‘æ§æ•°æ®ï¼Œæ‰¾å‡ºå¼‚å¸¸æƒ…å†µå’Œç³»ç»Ÿç“¶é¢ˆè¿›è€Œè¿›è¡Œä¼˜åŒ–</li></ol><h3 id="26-ä»€ä¹ˆæ—¶å€™ç”¨ç¼“å­˜ï¼ŸRedisæ˜¯ä»€ä¹ˆæ•°æ®åº“ï¼Ÿæ•°æ®å­˜å‚¨åœ¨å“ªé‡Œ"><a href="#26-ä»€ä¹ˆæ—¶å€™ç”¨ç¼“å­˜ï¼ŸRedisæ˜¯ä»€ä¹ˆæ•°æ®åº“ï¼Ÿæ•°æ®å­˜å‚¨åœ¨å“ªé‡Œ" class="headerlink" title="26. ä»€ä¹ˆæ—¶å€™ç”¨ç¼“å­˜ï¼ŸRedisæ˜¯ä»€ä¹ˆæ•°æ®åº“ï¼Ÿæ•°æ®å­˜å‚¨åœ¨å“ªé‡Œ"></a>26. ä»€ä¹ˆæ—¶å€™ç”¨ç¼“å­˜ï¼ŸRedisæ˜¯ä»€ä¹ˆæ•°æ®åº“ï¼Ÿæ•°æ®å­˜å‚¨åœ¨å“ªé‡Œ</h3><p>ç¼“å­˜é€šå¸¸ä½¿ç”¨åœ¨ï¼š</p><ul><li>æ•°æ®é¢‘ç¹çš„è¢«è®¿é—®</li><li>æ•°æ®ä¸ç»å¸¸å˜åŠ¨</li><li>æ•°æ®é‡è¾ƒå¤§</li></ul><p>Redisæ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„æ•°æ®å­˜å‚¨ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¤šç§æ•°æ®ç»“æ„ã€å®ƒçš„æœ¬è´¨æ˜¯ä¸ªKeyâ€”valueé”®å€¼å¯¹è¿›è¡Œå­˜å‚¨ï¼Œä»–æä¾›äº†æ•°æ®çš„æŒä¹…åŒ–ã€äº‹åŠ¡ã€å‘å¸ƒè®¢é˜…ã€Luaè„šæœ¬ã€Redisæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½å¾—æ•°æ®åº“ã€è¢«ä½¿ç”¨åœ¨WEbåº”ç”¨ç¨‹åºã€åˆ†å¸ƒå¼ç³»ç»Ÿã€ç¼“å­˜ç³»ç»Ÿç­‰</p><p>Redisæ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ã€å¯ä»¥é€šè¿‡RDBå’ŒAOFä¸¤ç§æŒä¹…åŒ–æ–¹å¼å°†æ•°æ®å†™å…¥ç£ç›˜é˜²æ­¢æ•°æ®ä¸¢å¤±ã€Redisä¹Ÿæ”¯æŒä¸»ä»å¤åˆ¶å’Œå“¨å…µæœºåˆ¶ï¼Œå¯ä»¥å®ç°é«˜å¯ç”¨æ€§å’Œæ•°æ®å¤‡ä»½ç­‰åŠŸèƒ½ã€‚</p><h3 id="27-javaçš„ä¸šåŠ¡é€»è¾‘å®ç°åœ¨é‚£ä¸€å±‚"><a href="#27-javaçš„ä¸šåŠ¡é€»è¾‘å®ç°åœ¨é‚£ä¸€å±‚" class="headerlink" title="27. javaçš„ä¸šåŠ¡é€»è¾‘å®ç°åœ¨é‚£ä¸€å±‚"></a>27. javaçš„ä¸šåŠ¡é€»è¾‘å®ç°åœ¨é‚£ä¸€å±‚</h3><p>é€šå¸¸åœ¨Serviceå±‚å®ç°ä¹Ÿæˆä¸ºä¸šåŠ¡é€»è¾‘å±‚æ˜¯ä»‹äºæ§åˆ¶å±‚å’Œæ•°æ®è®¿é—®å±‚ä¹‹é—´çš„ä¸€å±‚ï¼Œä¸»è¦è´Ÿè´£ä¸šåŠ¡é€»è¾‘çš„å¤„ç†å’Œæ§åˆ¶</p><h3 id="28-serviceå±‚çš„ä»£ç æ€ä¹ˆå»ä¼˜åŒ–ï¼Œä»€ä¹ˆæ–¹å¼å»å†™ä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Ÿ"><a href="#28-serviceå±‚çš„ä»£ç æ€ä¹ˆå»ä¼˜åŒ–ï¼Œä»€ä¹ˆæ–¹å¼å»å†™ä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Ÿ" class="headerlink" title="28. serviceå±‚çš„ä»£ç æ€ä¹ˆå»ä¼˜åŒ–ï¼Œä»€ä¹ˆæ–¹å¼å»å†™ä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Ÿ"></a>28. serviceå±‚çš„ä»£ç æ€ä¹ˆå»ä¼˜åŒ–ï¼Œä»€ä¹ˆæ–¹å¼å»å†™ä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Ÿ</h3><ol><li>å‡å°‘æ•°æ®åº“çš„è®¿é—®æ¥æé«˜æ€§èƒ½ï¼Œå¯ä»¥ä½¿ç”¨ç¼“å­˜ã€è¯¾æ‰¹å¤„ç†æ¥å‡å°‘æ•°æ®åº“çš„è®¿é—®</li><li>ä¼˜åŒ–ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼šé™ä½æŸ¥è¯¢çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦ï¼Œå¦‚æœæ•°æ®é‡å¤§æ—¶ï¼Œå¯ä»¥é‡‡ç”¨åˆ†é¡µæŸ¥è¯¢æ–¹å¼ã€å‡å°‘å•æ¬¡æŸ¥è¯¢çš„æ•°æ®é‡</li><li>ä½¿ç”¨å¤šçº¿ç¨‹ï¼šåœ¨æœåŠ¡å±‚ä¸­é‡‡ç”¨å¤šçº¿ç¨‹æ¥å¤„ç†å¤§é‡çš„ä¸šåŠ¡åœºæ™¯</li><li>é¿å…é‡å¤è®¡ç®—ï¼šåœ¨æœåŠ¡å±‚å¯èƒ½å­˜åœ¨å¤šä¸ªæ–¹æ³•éœ€è¦è¿›è¡Œç›¸åŒçš„è®¡ç®—ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›è®¡ç®—ç»“æœç¼“å­˜èµ·æ¥ï¼Œé¿å…é‡å¤è®¡ç®—</li><li>ä½¿ç”¨åˆé€‚çš„æ¡†æ¶ï¼Œå‡å°‘ä»£ç çš„ç¼–å†™é‡ï¼Œä¾‹å¦‚ä½¿ç”¨ç¼“å­˜æ¡†æ¶å‡å°‘æ•°æ®åº“çš„è®¿é—®æ¬¡æ•°</li></ol><p>å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼š</p><ol><li>è¿‡æ¸¡ä¾èµ–ORMæ¡†æ¶ï¼š</li><li>è¿‡åº¦ä½¿ç”¨åŒæ­¥çš„æ–¹æ³•</li><li>ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„åº“å¤š</li><li>è¿‡åº¦ä½¿ç”¨æ•°æ®åº“çš„é“¾æ¥</li></ol><h3 id="29-mysqlæ•°æ®é‡å¤§æ€ä¹ˆè¿›è¡Œä¼˜åŒ–"><a href="#29-mysqlæ•°æ®é‡å¤§æ€ä¹ˆè¿›è¡Œä¼˜åŒ–" class="headerlink" title="29. mysqlæ•°æ®é‡å¤§æ€ä¹ˆè¿›è¡Œä¼˜åŒ–"></a>29. mysqlæ•°æ®é‡å¤§æ€ä¹ˆè¿›è¡Œä¼˜åŒ–</h3><ul><li>ä¼˜åŒ–è¡¨ç»“æ„å»ºç«‹ç´¢å¼•ã€é¿å…è¿‡å¤šçš„å†—ä½™å­—æ®µã€æé«˜æŸ¥è¯¢æ€§èƒ½</li><li>å¯¹å¤§é‡æ•°æ®è¿›è¡Œæ‰¹å¤„ç†</li><li>å¼•å…¥ç¼“å­˜æ¡†æ¶å¦‚Redisæ¥å°†éƒ¨åˆ†æ•°æ®ç¼“å­˜åˆ°å†…å­˜æé«˜è®¿é—®é€Ÿåº¦</li><li>å¯¹æ•°æ®è¿›è¡Œåˆ†åº“åˆ†è¡¨ç®¡ç†</li><li>æŸ¥è¯¢è¯­å¥çš„ä¼˜åŒ–é¿å…ä½¿ç”¨å¤æ‚çš„SQLè¯­å¥ï¼Œä½¿ç”¨Explainåèƒ½æŸ¥çœ‹SQLæ‰§è¡Œè®¡åˆ’ï¼Œé¿å…å…¨è¡¨æ‰«æ</li><li>æ•°æ®åº“è¿æ¥æ± ä¼˜åŒ–ï¼Œåˆç†é…ç½®æ•°æ®åº“è¿æ¥æ± çš„å¤§å°ã€é“¾æ¥æ—¶é—´ã€å‡å°‘èµ„æºçš„å ç”¨é¿å…é¢‘ç¹çš„æ•°æ®åº“é“¾æ¥ä¸å…³é—­</li></ul><h3 id="30-gitæäº¤ä»£ç å‡ºç°å†²çª"><a href="#30-gitæäº¤ä»£ç å‡ºç°å†²çª" class="headerlink" title="30. gitæäº¤ä»£ç å‡ºç°å†²çª"></a>30. gitæäº¤ä»£ç å‡ºç°å†²çª</h3><p>å†²çª1:å½“commitä»¥åæ‰§è¡Œgit pull â€”rebaseå‡ºç°å†²çª</p><ol><li>git status æ‰¾åˆ°å†²çªæ–‡ä»¶ï¼Œè§£å†³å†²çª</li><li>æ‰§è¡Œgit add xxx(xxxä¸ºå†²çªæ–‡ä»¶å…¨è·¯å¾„)</li><li>æ‰§è¡Œ git rebase â€”continue</li><li>æ‰§è¡Œ git pull â€”rebase</li><li>æ‰§è¡Œ git push</li></ol><p>å½“æ‰§è¡Œäº†git stashç„¶åå¹¼è™«æœåŠ¡å™¨ä¸Špulläº†æœ€æ–°ä»£ç ï¼ˆgit pull â€”rebaseï¼‰</p><ol><li>git status æ‰¾åˆ°å†²çªæ–‡ä»¶ï¼Œè§£å†³å†²çª</li><li>æ‰§è¡Œgit add xxx (xxxä¸ºå†²çªæ–‡ä»¶å…¨è·¯å¾„)</li><li>git commit</li><li>git pull -rebase</li><li>git push</li></ol><p>åœ¨è§£å†³å†²çªä¹‹å‰å¯ä»¥ä½¿ç”¨git fetchæ¥è·å–æœ€æ–°ä»£ç ï¼Œé¿å…ä»£ç å†²çªçš„å‘ç”Ÿ</p><h3 id="31-gitå’ŒSDKçš„åŒºåˆ«"><a href="#31-gitå’ŒSDKçš„åŒºåˆ«" class="headerlink" title="31. gitå’ŒSDKçš„åŒºåˆ«"></a>31. gitå’ŒSDKçš„åŒºåˆ«</h3><p>Gitæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç‰ˆæœ¬çš„æ§åˆ¶ç³»ç»Ÿå¯ä»¥å¸®åŠ©å¼€å‘è€…è¿›è¡Œç‰ˆæœ¬ç®¡ç†ã€ä»£ç åä½œå’Œä»£ç å¤‡ä»½ç­‰æ“ä½œï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡gitæ¥ç®¡ç†è‡ªå·±çš„ä»£ç åº“ï¼Œè·Ÿè¸ªä»£ç çš„å˜åŒ–å¹¶è¿›è¡Œç‰ˆæœ¬çš„å›æ»šåˆ†æ”¯çš„åˆå¹¶ç­‰æ“ä½œ</p><p>SDKæ—¶è½¯ä»¶å¼€å‘åŒ…ã€‚åŒ…å«äº†è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„å„ç§å·¥å…·ã€åº“æ–‡æ¡£ç­‰èµ„æº</p><p>æ€»çš„æ¥è¯´gitæ—¶ç”¨æ¥è¿›è¡Œç‰ˆæœ¬æ§åˆ¶çš„å·¥å…·ï¼ŒSDKæ˜¯ç”¨æ¥è¾…åŠ©å¼€å‘è€…è¿›è¡Œè½¯ä»¶å¼€å‘çš„å·¥å…·åŒ…</p><h3 id="32-gitçš„åˆ†æ”¯ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ"><a href="#32-gitçš„åˆ†æ”¯ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ" class="headerlink" title="32. gitçš„åˆ†æ”¯ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ"></a>32. gitçš„åˆ†æ”¯ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿ</h3><p>git branch æ˜¯æŒ‡åœ¨ä»£ç ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å¼€å‘åˆ†æ”¯ï¼Œé¿å…ç›¸äº’æ‰“æ‰°ï¼Œåˆ†æ”¯çš„ä½¿ç”¨æƒ…å†µï¼š</p><ol><li>å¹¶è¡Œå¼€å‘</li><li>ç‰ˆæœ¬ç®¡ç†</li><li>ä¿®å¤bug</li></ol><h3 id="33-springbootçš„ç†è§£"><a href="#33-springbootçš„ç†è§£" class="headerlink" title="33. springbootçš„ç†è§£"></a>33. springbootçš„ç†è§£</h3><p>springbootæ˜¯ä¸€ä¸ªåŸºäºspringçš„å¼€æºæ¡†æ¶ä»–ä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ç§å¿«é€Ÿåˆ›å»ºspringçš„åº”ç”¨ç¨‹åºï¼Œç®€åŒ–äº†springçš„é…ç½®å’Œéƒ¨ç½²è¿‡ç¨‹æä¾›äº†å¤§é‡çš„å¼€ç®±å³ç”¨çš„ç‰¹æ€§ï¼Œå¦‚webå†…åµŒæœåŠ¡å™¨ï¼Œè‡ªåŠ¨é…ç½®ã€å¥åº·æ£€æŸ¥ã€åº¦é‡æŒ‡æ ‡ã€ä¹Ÿæä¾›äº†è®¸å¤šå¯æ’æ‹”çš„ç»„ä»¶ï¼Œä»–ä¹Ÿæ”¯æŒå¤šç§å¼€å‘åœºæ™¯å¦‚Webåº”ç”¨ç¨‹åºã€RestfulæœåŠ¡ã€æ‰¹å¤„ç†ä»»åŠ¡ã€å¾®æœåŠ¡ã€‚ä»–ä¹Ÿé›†æˆäº†Spring Data\Spring Security\Spring Cloudç­‰æ¡†æ¶</p><h3 id="34-Rediså¦‚ä½•å®ç°åˆ†å¸ƒå¼çš„sessionçš„ï¼Ÿ"><a href="#34-Rediså¦‚ä½•å®ç°åˆ†å¸ƒå¼çš„sessionçš„ï¼Ÿ" class="headerlink" title="34. Rediså¦‚ä½•å®ç°åˆ†å¸ƒå¼çš„sessionçš„ï¼Ÿ"></a>34. Rediså¦‚ä½•å®ç°åˆ†å¸ƒå¼çš„sessionçš„ï¼Ÿ</h3><p>å®ç°ä¸€ä¸ªå…±äº«å­˜å‚¨ï¼Œå°†æ•°æ®æ”¾åˆ°å•å°æœåŠ¡å™¨çš„å†…å­˜ä¸­ã€‚å®ç°æ–¹æ³•</p><ol><li>Redisï¼ˆåŸºäºå†…å­˜çš„Keyâ€”valueï¼‰</li><li>mysql</li><li>æ–‡ä»¶æœåŠ¡å™¨ceph</li></ol><p>é¦–å…ˆå¼•å…¥Redisæ¥ç€å¼•å…¥spring-sessionæ•´åˆredis</p><p>ä¿®æ”¹spring-sessionå­˜å‚¨é…ç½®<code>spring.session.store-type</code>é»˜è®¤æ˜¯noneï¼Œè¡¨ç¤ºå­˜å‚¨åœ¨å•å°æœåŠ¡å™¨ä¸Š</p><p><code>store-type: redis</code>,è¡¨ç¤ºä»redisä¸­è¯»å†™æ•°æ®</p><h3 id="35-ç¼“å­˜é¢„çƒ­ï¼Ÿ"><a href="#35-ç¼“å­˜é¢„çƒ­ï¼Ÿ" class="headerlink" title="35. ç¼“å­˜é¢„çƒ­ï¼Ÿ"></a>35. ç¼“å­˜é¢„çƒ­ï¼Ÿ</h3><p>é¦–å…ˆå¯¹Redisè¿›è¡Œåºåˆ—åŒ–ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.yupi.yupao.config;<br><br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.connection.RedisConnectionFactory;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.core.RedisTemplate;<br><span class="hljs-keyword">import</span> org.springframework.data.redis.serializer.RedisSerializer;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisTemplateConfig</span> {<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="hljs-title function_">redisTemplate</span><span class="hljs-params">(RedisConnectionFactory connectionFactory)</span> {<br>        RedisTemplate&lt;String, Object&gt; redisTemplate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisTemplate</span>&lt;&gt;();<br>        redisTemplate.setConnectionFactory(connectionFactory);<br>        redisTemplate.setKeySerializer(RedisSerializer.string());<br>        <span class="hljs-keyword">return</span> redisTemplate;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>å¼•å…¥Spring Data Redisï¼šå› ä¸ºä»–æ˜¯ä¸€ä¸ªé€šç”¨çš„æ•°æ®è®¿é—®æ¡†æ¶ï¼Œå®šä¹‰äº†ä¸€ç»„å¢åˆ æ”¹æŸ¥çš„æ¥å£ mysqlã€redisã€jpa</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.6.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>æ¥ç€é…ç½®Redisåœ°å€ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-comment"># redis é…ç½®</span><br>  <span class="hljs-attr">redis:</span><br>    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span><br>    <span class="hljs-attr">database:</span> <span class="hljs-number">0</span><br></code></pre></td></tr></tbody></table></figure><p>Redissonï¼šåˆ†å¸ƒå¼æ“ä½œ Redis çš„ Java å®¢æˆ·ç«¯ï¼Œè®©ä½ åƒåœ¨ä½¿ç”¨æœ¬åœ°çš„é›†åˆä¸€æ ·æ“ä½œ Redisï¼ˆåˆ†å¸ƒå¼ Redis æ•°æ®ç½‘æ ¼ï¼‰</p><p><strong>è®¾è®¡ç¼“å­˜çš„Keyï¼š</strong></p><p>systemId:moduleId:func:optionsï¼ˆä¸è¦å’Œåˆ«äººå†²çªï¼‰</p><p>yupao:user:recommed:userId</p><p><strong>rediså†…å­˜ä¸èƒ½æ— é™çš„å¢åŠ ã€ä¸€å®šè¦è®¾ç½®è¿‡æœŸæ—¶é—´</strong></p><p>å®ç°ç¼“å­˜é¢„çƒ­ï¼šå®šæ—¶</p><ol><li>ç¼“å­˜çš„æ„ä¹‰ï¼šï¼ˆæ–°å¢å°‘ã€æ€»ç”¨æˆ·å¤šï¼‰</li><li>ç¼“å­˜çš„ç©ºé—´ä¸èƒ½å¤ªå¤§ï¼Œè¦é¢„ç•™ç»™å…¶ä»–ç¼“å­˜ç©ºé—´</li><li>ç¼“å­˜æ•°æ®å‘¨æœŸï¼ˆæ¯å¤©ä¸€æ¬¡ï¼‰</li></ol><p>å®šæ—¶ä»»åŠ¡å¯ä»¥å¼€å¯ä¸€ä¸ªSpring Schedulerï¼ˆSpringBooté»˜è®¤æ•´åˆäº†ï¼‰</p><p>ä¸»ç±»å¼€å¯@EnableScheduling</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230225195214062.png" alt="image-20230225195214062"></p><p>ç»™å®šæ—¶ä»»åŠ¡æ·»åŠ @Schedulingæ³¨è§£æŒ‡å®šcronè¡¨è¾¾å¼å’Œæ‰§è¡Œé¢‘ç‡(ä¸éœ€è¦èƒŒ);</p><p><a href="https://cron.qqe2.com/">https://cron.qqe2.com/</a></p><h3 id="36-åˆ†å¸ƒå¼é”"><a href="#36-åˆ†å¸ƒå¼é”" class="headerlink" title="36. åˆ†å¸ƒå¼é”"></a>36. åˆ†å¸ƒå¼é”</h3><p>Redis å®ç°ï¼šå†…å­˜æ•°æ®åº“ï¼Œ<strong>è¯»å†™é€Ÿåº¦å¿«</strong> ã€‚æ”¯æŒ <strong>setnx</strong>ã€lua è„šæœ¬ï¼Œæ¯”è¾ƒæ–¹ä¾¿æˆ‘ä»¬å®ç°åˆ†å¸ƒå¼é”ã€‚ç”¨å®Œé”è¦é‡Šæ”¾ã€é”è¦åŠ è½½è¿‡æœŸæ—¶é—´ã€‚</p><p>Redisson æ˜¯ä¸€ä¸ª java æ“ä½œ Redis çš„å®¢æˆ·ç«¯ï¼Œ<strong>æä¾›äº†å¤§é‡çš„åˆ†å¸ƒå¼æ•°æ®é›†æ¥ç®€åŒ–å¯¹ Redis çš„æ“ä½œå’Œä½¿ç”¨ï¼Œå¯ä»¥è®©å¼€å‘è€…åƒä½¿ç”¨æœ¬åœ°é›†åˆä¸€æ ·ä½¿ç”¨ Redisï¼Œå®Œå…¨æ„ŸçŸ¥ä¸åˆ° Redis çš„å­˜åœ¨ã€‚</strong></p><p>å®šæ—¶ä»»åŠ¡+é”</p><ol><li>waitTime è®¾ç½®ä¸º 0ï¼ŒåªæŠ¢ä¸€æ¬¡ï¼ŒæŠ¢ä¸åˆ°å°±æ”¾å¼ƒ</li><li>æ³¨æ„é‡Šæ”¾é”è¦å†™åœ¨ finally ä¸­</li></ol><p>å®ç°ä»£ç é€»è¾‘ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">testWatchDog</span><span class="hljs-params">()</span> {<br>    <span class="hljs-type">RLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> redissonClient.getLock(<span class="hljs-string">"yupao:precachejob:docache:lock"</span>);<br>    <span class="hljs-keyword">try</span> {<br>        <span class="hljs-comment">// åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è·å–åˆ°é”</span><br>        <span class="hljs-keyword">if</span> (lock.tryLock(<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, TimeUnit.MILLISECONDS)) {<br>            <span class="hljs-comment">// todo å®é™…è¦æ‰§è¡Œçš„æ–¹æ³•</span><br>            doSomeThings();<br>            System.out.println(<span class="hljs-string">"getLock: "</span> + Thread.currentThread().getId());<br>        }<br>    } <span class="hljs-keyword">catch</span> (InterruptedException e) {<br>        System.out.println(e.getMessage());<br>    } <span class="hljs-keyword">finally</span> {<br>        <span class="hljs-comment">// åªèƒ½é‡Šæ”¾è‡ªå·±çš„é”</span><br>        <span class="hljs-keyword">if</span> (lock.isHeldByCurrentThread()) {<br>            System.out.println(<span class="hljs-string">"unLock: "</span> + Thread.currentThread().getId());<br>            lock.unlock();<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="37-åˆ†å¸ƒå¼é”çš„å®ç°åŸç†ï¼Ÿ"><a href="#37-åˆ†å¸ƒå¼é”çš„å®ç°åŸç†ï¼Ÿ" class="headerlink" title="37. åˆ†å¸ƒå¼é”çš„å®ç°åŸç†ï¼Ÿ"></a>37. åˆ†å¸ƒå¼é”çš„å®ç°åŸç†ï¼Ÿ</h3><p>å®ƒæ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿæ€»ä¸ºäº†ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å’Œé¿å…å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶å¯¹å…±äº«èµ„æºè¿›è¡Œä¿®æ”¹è€Œå¼•å…¥çš„ä¸€ç§åŒæ­¥æœºåˆ¶ï¼Œåœ¨å®ç°éœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ol><li>äº’æ–¥æ€§ï¼šåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯è·å¾—é”ï¼Œå…¶ä»–å®¢æˆ·ç«¯éœ€è¦ç­‰å¾…é”çš„é‡Šæ”¾</li><li>å®‰å…¨æ€§ï¼šåœ¨å®¢æˆ·ç«¯è·å–é”ä¹‹åï¼Œå³ä½¿å®¢æˆ·ç«¯çš„å´©æºƒæˆ–è€…ç½‘ç»œå¼‚å¸¸ï¼Œé”åº”è¯¥è‡ªåŠ¨é‡Šæ”¾ï¼Œé¿å…æ­»é”å’Œæ•°æ®ä¸ä¸€è‡´ã€‚</li></ol><p>å¸¸è§çš„ä½¿ç”¨æ–¹å¼åŸºäºæ•°æ®åº“ï¼ŒåŸºäºRedisçš„å®ç°æ–¹å¼ã€åŸºäºZookeeperçš„å®ç°æ–¹å¼ï¼Œè¿™ä¸‰ç§çš„å®ç°æ ¸å¿ƒéƒ½æ˜¯åŸºäºåŒæ­¥æœºåˆ¶ã€‚</p><h3 id="38-ä»€ä¹ˆæ˜¯é›†ç¾¤ï¼Ÿä¸€ä¸ªé¡¹ç›®æ”¹æˆé›†ç¾¤éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ"><a href="#38-ä»€ä¹ˆæ˜¯é›†ç¾¤ï¼Ÿä¸€ä¸ªé¡¹ç›®æ”¹æˆé›†ç¾¤éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ" class="headerlink" title="38. ä»€ä¹ˆæ˜¯é›†ç¾¤ï¼Ÿä¸€ä¸ªé¡¹ç›®æ”¹æˆé›†ç¾¤éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ"></a>38. ä»€ä¹ˆæ˜¯é›†ç¾¤ï¼Ÿä¸€ä¸ªé¡¹ç›®æ”¹æˆé›†ç¾¤éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</h3><p>é›†ç¾¤å¼å¤šä¸ªè®¡ç®—æœºæˆ–è€…æœåŠ¡å™¨è¿æ¥èµ·æ¥å½¢æˆä¸€ä¸ªæ•´ä½“ï¼Œé€šè¿‡å…±äº«èµ„æºå’Œåˆ†é…ä»»åŠ¡æ¥æé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ€§èƒ½ï¼Œåœ¨é›†ç¾¤ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥ç‹¬ç«‹å·¥ä½œï¼Œä½†æ˜¯é€šè¿‡åè°ƒå’Œé€šä¿¡ï¼Œå…±åŒå®Œæˆå¤æ‚çš„ä»»åŠ¡å’Œå¤„ç†å¤§é‡çš„è¯·æ±‚ã€‚</p><p>å°†ä¸€ä¸ªé¡¹ç›®ä¿®æ”¹æˆé›†ç¾¤éœ€è¦æ³¨æ„ï¼š</p><ol><li>åˆ†å¸ƒå¼æ¶æ„çš„è®¾è®¡</li></ol><p>ä¸ºäº†å®ç°é›†ç¾¤ï¼Œéœ€è¦å°†ç³»ç»Ÿçš„æ¶æ„è®¾è®¡æˆåˆ†å¸ƒå¼æ¶æ„ï¼Œå°†ä¸åŒçš„åŠŸèƒ½æ¨¡å—æ‹†åˆ†åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œé€šè¿‡æ¶ˆæ¯ä¸­é—´ä»¶ã€è´Ÿè½½å‡è¡¡å™¨ç­‰æŠ€æœ¯åè°ƒå’Œç®¡ç†ä¸åŒèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡å’Œæ•°æ®åŒæ­¥ã€‚</p><ol><li>æ•°æ®åº“çš„é€‰å‹å’Œåˆ†åº“åˆ†è¡¨</li></ol><p>åœ¨åˆ†å¸ƒå¼æ¶æ„ä¸­ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼æ•°æ®åº“æ¥ç®¡ç†æ•°æ®ï¼Œå¦‚MySQLé›†ç¾¤ã€MongoDBé›†ç¾¤ç­‰ã€‚åŒæ—¶ï¼Œä¸ºäº†æé«˜æ•°æ®åº“çš„æ€§èƒ½ï¼Œéœ€è¦è¿›è¡Œåˆ†åº“åˆ†è¡¨æ¥å°†æ•°æ®æ°´å¹³åˆ‡åˆ†åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Š</p><ol><li>è´Ÿè½½å‡è¡¡å’Œå®¹é”™æœºåˆ¶</li></ol><p>ä¸ºäº†ä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ€§èƒ½ï¼Œéœ€è¦ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨æ¥å°†è¯·æ±‚å‡è¡¡åœ°åˆ†é…åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œå¹¶é€šè¿‡å®¹é”™æœºåˆ¶æ¥å¤„ç†èŠ‚ç‚¹æ•…éšœå’Œç½‘ç»œå¼‚å¸¸ç­‰é—®é¢˜ã€‚</p><ol><li>ä»£ç å’Œé…ç½®ä¼˜åŒ–</li></ol><p>åœ¨é›†ç¾¤ä¸­ï¼Œéœ€è¦å¯¹ä»£ç å’Œé…ç½®è¿›è¡Œä¼˜åŒ–ï¼Œå¦‚å‡å°‘é”çš„ä½¿ç”¨ã€ä¼˜åŒ–SQLæŸ¥è¯¢ã€åˆç†é…ç½®ç¼“å­˜ç­‰ï¼Œä»¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œå¯ä¼¸ç¼©æ€§ã€‚</p><ol><li>ç›‘æ§å’Œè°ƒè¯•</li></ol><p>åœ¨é›†ç¾¤ä¸­ï¼Œéœ€è¦ä½¿ç”¨ç›‘æ§å’Œè°ƒè¯•å·¥å…·æ¥å®æ—¶ç›‘æµ‹ç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡ï¼ŒåŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜ï¼Œä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ã€‚</p><h3 id="39-mybatis-plusæ‰§è¡Œæµç¨‹å·¥ä½œåŸç†"><a href="#39-mybatis-plusæ‰§è¡Œæµç¨‹å·¥ä½œåŸç†" class="headerlink" title="39. mybatis-plusæ‰§è¡Œæµç¨‹å·¥ä½œåŸç†"></a>39. mybatis-plusæ‰§è¡Œæµç¨‹å·¥ä½œåŸç†</h3><ol><li>è¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶<code>mybatis-config.xml</code>å¹¶è¿”å›<code>InputStream</code>æµå¯¹è±¡ã€‚</li><li>æ ¹æ®<code>InputStream</code>æµå¯¹è±¡è§£æå‡º<code>Configuration</code>å¯¹è±¡ï¼Œç„¶ååˆ›å»º<code>SqlSessionFactory</code>å·¥å‚å¯¹è±¡</li><li>æ ¹æ®ä¸€ç³»åˆ—å±æ€§ä»<code>SqlSessionFactory</code>å·¥å‚ä¸­åˆ›å»º<code>SqlSession</code></li><li>ä»<code>SqlSession</code>ä¸­è°ƒç”¨<code>Executor</code>æ‰§è¡Œæ•°æ®åº“æ“ä½œ&amp;&amp;é€šè¿‡è§£æç”Ÿæˆå…·ä½“SQLæŒ‡ä»¤</li><li>é€šè¿‡<code>TypeHandler(æ•°æ®åº“ä¸javaç±»å‹è½¬æ¢)</code>å¯¹æ‰§è¡Œç»“æœè¿›è¡ŒäºŒæ¬¡å°è£…</li><li>æäº¤ä¸äº‹åŠ¡å¤„ç†</li></ol><h3 id="40-JDK8çš„æ–°ç‰¹æ€§"><a href="#40-JDK8çš„æ–°ç‰¹æ€§" class="headerlink" title="40. JDK8çš„æ–°ç‰¹æ€§"></a>40. JDK8çš„æ–°ç‰¹æ€§</h3><ol><li>lambdaè¡¨è¾¾å¼ï¼šå…è®¸å¼€å‘äººå‘˜æ›´ç®€æ´çš„å†™ä»£ç ï¼Œè€Œä¸”æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹</li><li>æ–¹æ³•å¼•ç”¨ï¼šå¼lambdaè¡¨è¾¾å¼çš„ä¸€ä¸ªæ‰©å±•ï¼Œå…è®¸ç›´æ¥å¼•ç”¨ç°æœ‰çš„æ–¹æ³•å’Œæ„é€ å‡½æ•°ï¼›</li><li>é»˜è®¤æ–¹æ³•ï¼šå…è®¸æƒ³æ¥å£æ·»åŠ æ–°æ–¹æ³•è€Œä¸ç ´åç°æœ‰çš„æ–¹æ³•</li><li>Stream APIï¼šå®ƒæ”¯æŒå¯¹é›†åˆæ•°ç»„ç­‰æ•°æ®ç»“æ„è¿›è¡Œå‡½æ•°å¼çš„æ“ä½œï¼Œå¦‚è¿‡æ»¤ã€æ˜ å°„ã€æ’åºç­‰</li><li>Date and time APIï¼šå…¨æ–°çš„æ—¥æœŸå’Œæ—¶é—´APIæ›´å¥½çš„å¤„ç†æ—¥æœŸå’Œæ—¶é—´æä¾›äº†LocalDateã€LocalTime</li><li>CompletableFutureç±»ï¼šCompletableFutureç±»æ˜¯Java 8ä¸­çš„ä¸€ä¸ªæ–°çš„å¼‚æ­¥ç¼–ç¨‹APIï¼Œå®ƒæ”¯æŒéé˜»å¡çš„ã€åŸºäºå›è°ƒçš„ç¼–ç¨‹æ–¹å¼ã€‚CompletableFutureå¯ä»¥ç”¨äºå¹¶è¡Œå¤„ç†ã€å¼‚æ­¥ä»»åŠ¡ç­‰åœºæ™¯ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“äºç†è§£ã€‚</li></ol><h3 id="41-gitå¸¸ç”¨å‘½ä»¤"><a href="#41-gitå¸¸ç”¨å‘½ä»¤" class="headerlink" title="41. gitå¸¸ç”¨å‘½ä»¤"></a>41. gitå¸¸ç”¨å‘½ä»¤</h3><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/24bafa1f034d193c81f57897efd086e2.jpg" alt="img"></p><ul><li>git init[project-name]</li><li>git clone url</li><li>git add æäº¤å…¨éƒ¨æ–‡ä»¶ä¿®æ”¹åˆ°ç¼“å­˜åŒº</li><li>git add &lt;å…·ä½“æŸä¸ªæ–‡ä»¶è·¯å¾„+å…¨å&gt;æäº¤æŸäº›æ–‡ä»¶åˆ°ç¼“å­˜åŒº</li><li>git diff æŸ¥éªŒå½“å‰ä»£ç addå ä¼šaddé‚£äº›å†…å®¹</li><li>git diff â€”stagedæŸ¥çœ‹å½“å‰commitæäº¤åï¼Œä¼šæäº¤é‚£äº›å†…å®¹</li><li>git statusæŸ¥çœ‹å½“å‰åˆ†æ”¯çš„çŠ¶æ€</li><li>git pull &lt;è¿œç¨‹ä»“åº“å&gt;&lt;è¿œç¨‹åˆ†æ”¯å&gt;æ‹‰å–è¿œç¨‹ä»“åº“çš„åˆ†æ”¯ä¸æœ¬åœ°å½“å‰åˆ†æ”¯åˆå¹¶</li><li>git pull &lt;è¿œç¨‹ä»“åº“å&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt; æ‹‰å–è¿œç¨‹ä»“åº“çš„åˆ†æ”¯ä¸æœ¬åœ°æŸä¸ªåˆ†æ”¯åˆå¹¶</li><li>git commit -m â€œ&lt;æ³¨é‡Š&gt;â€ æäº¤ä»£ç åˆ°æœ¬åœ°ä»“åº“ï¼Œå¹¶å†™æäº¤æ³¨é‡Š</li><li>git commit -v æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰çš„diffä¿¡æ¯</li><li>git commit â€”amend[file1][file2]é‡åšä¸Šä¸€æ¬¡çš„commitå¹¶æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ–</li></ul><p>åˆ†æ”¯æ“ä½œï¼š</p><ul><li>git branch æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯</li><li>git branch -r æŸ¥çœ‹æ‰€æœ‰è¿œç¨‹åˆ†æ”¯</li><li>git branch -aæŸ¥çœ‹æœ¬åœ°å’Œè¿œç¨‹çš„æ‰€æœ‰åˆ†æ”¯</li><li>git merge &lt;åˆ†æ”¯å&gt;åˆå¹¶åˆ†æ”¯</li></ul><h3 id="42-Linuxçš„å¸¸ç”¨å‘½ä»¤"><a href="#42-Linuxçš„å¸¸ç”¨å‘½ä»¤" class="headerlink" title="42. Linuxçš„å¸¸ç”¨å‘½ä»¤"></a>42. Linuxçš„å¸¸ç”¨å‘½ä»¤</h3><ul><li>top  æŸ¥çœ‹å†…å­˜ã€æ˜¾ç¤ºç³»ç»Ÿå½“å‰çš„è¿›ç¨‹ä¿¡æ¯</li><li>df -hï¼šæŸ¥çœ‹ç£ç›˜çš„å­˜å‚¨çŠ¶æ€</li><li>iotopï¼šæŸ¥çœ‹IOçš„è¯»å†™</li><li>iotop -oï¼šæŸ¥çœ‹æ¯”è¾ƒé«˜çš„ç£ç›˜è¯»å†™ç¨‹åº</li><li>netstat -tunIp |grep ç«¯å£å·  ï¼šæŸ¥çœ‹ç«¯å£å·å ç”¨æƒ…å†µ</li><li>Isof -iï¼šç«¯å£å·ï¼šæŸ¥çœ‹ç«¯å£å·å ç”¨æƒ…å†µ</li><li>uptimeï¼šæŸ¥çœ‹æŠ¥å‘Šç³»ç»Ÿè¿è¡Œæ—¶é•¿åŠå¹³å‡è´Ÿè½½</li><li>ps axuï¼šæŸ¥çœ‹è¿›ç¨‹</li></ul><p>åŸºç¡€ï¼š</p><ul><li>ls  ï¼šæŸ¥çœ‹ç›®å½•</li><li>ls -laï¼šæ˜¾ç¤ºå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯</li><li>cd  ï¼šåˆ‡æ¢ç›®å½•</li><li>cdâ€¦ è¿”å›ä¸Šä¸€çº§ç›®å½•</li><li>cdâ€¦/â€¦ è¿”å›ä¸Šä¸¤çº§ç›®å½•</li><li>pwd æ˜¾ç¤ºå½“å‰çš„ç›®å½•</li><li>touch desc.txtï¼šåœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶</li><li>mkdir text: åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºç›®å½•</li><li>cat æŸ¥çœ‹æ–‡ä»¶å†…å®¹</li><li>more åˆ†é¡µæŸ¥çœ‹æ–‡ä»¶å†…å®¹</li><li>tail  æŸ¥çœ‹æ–‡ä»¶å°¾éƒ¨å†…å®¹</li><li>cp æ‹·è´</li><li>mv å‰ªåˆ‡æ–‡ä»¶</li><li>rm åˆ é™¤æ–‡ä»¶</li><li>find æœç´¢æ–‡ä»¶</li><li>ifconfig ï¼šæ˜¾ç¤ºç½‘ç»œè®¾å¤‡æƒ…å†µ</li><li>netstat  ï¼šæ˜¾ç¤ºç½‘ç»œç›¸å…³ä¿¡æ¯</li><li>ps æ˜¾ç¤ºè¿›ç¨‹çŠ¶æ€ -efå½“å‰æ‰€æœ‰è¿›ç¨‹</li><li>kill æ€æ­»è¿›ç¨‹  kill -s 9 27810:æ€æ­»è¿›ç¨‹å·ä¸º27810çš„è¿›ç¨‹ï¼Œå¼ºåˆ¶ç»ˆæ­¢ï¼Œç³»ç»Ÿèµ„æºæ— æ³•å›æ”¶</li><li>tar å‹ç¼©è§£å‹ç¼©(tar -zcvf test.tar.gz ./testï¼šæ‰“åŒ…testç›®å½•ä¸ºtest.tar.gzæ–‡ä»¶ï¼Œ-zè¡¨ç¤ºç”¨gzipå‹ç¼© â€”tar -zxvf test.tar.gzï¼šè§£å‹test.tar.gzæ–‡ä»¶)</li><li>chown:æ”¹å˜æ–‡ä»¶æˆ–è€…ç›®å½•çš„æ‹¥æœ‰è€…</li><li>chmod:æ”¹å˜æ–‡ä»¶æˆ–è€…ç›®å½•çš„è®¿é—®æƒé™</li><li>vim æ–‡æœ¬ç¼–è¯‘å™¨</li><li>shutdown  å…³æœºå’Œé‡å¯ï¼ˆ-h å’Œ-rï¼‰</li><li>man å¸®åŠ©å‘½ä»¤</li></ul><h3 id="43-Nginxç®€ä»‹"><a href="#43-Nginxç®€ä»‹" class="headerlink" title="43. Nginxç®€ä»‹"></a>43. Nginxç®€ä»‹</h3><p>nginxæ˜¯ä¸€ä¸ªè½¯ä»¶çº§åˆ«çš„è´Ÿè½½å‡è¡¡ã€‚é€šè¿‡nginxçš„é«˜æ€§èƒ½ï¼Œå¹¶å‘èƒ½åŠ›å¼ºï¼Œå ç”¨å†…å­˜å°ï¼Œå¯ä»¥æ­å»ºé«˜æ€§èƒ½çš„ä»£ç†æœåŠ¡å™¨ï¼ŒåŒæ—¶nginxä¹Ÿå¯ä»¥ä½œä¸ºwebæœåŠ¡å™¨ï¼Œåå‘ä»£ç†ï¼ŒåŠ¨é™æ€åˆ†ç¦»æœåŠ¡å™¨ã€‚</p><p><strong>æ­£å‘ä»£ç†ï¼š</strong></p><p>æ­£å‘ä»£ç†æ¥è¿›è¡Œä¸Šç½‘ç­‰åŠŸèƒ½ï¼šç”¨æˆ·è®¿é—®å±€åŸŸç½‘éœ€è¦é€šè¿‡ä»£ç†æœåŠ¡å™¨æ¥è®¿é—®ï¼Œè¿™ç§ä»£ç†ç§°ä¸ºæ­£å‘ä»£ç†ï¼Œåé‡äºç”¨æˆ·è¿›è¡Œè®¿é—®å¦‚ä¸‹å›¾</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/1534147-20200522085220242-1137326185.png" alt="1534147-20200522085220242-1137326185.png"></p><p><strong>åå‘ä»£ç†ï¼š</strong></p><p>å®¢æˆ·ç«¯å¯¹ä»£ç†æœåŠ¡å™¨æ— æ„ŸçŸ¥ï¼Œå®¢æˆ·ç«¯ä¸éœ€è¦ä»»ä½•é…ç½®å°±å¯ä»¥è®¿é—®ï¼Œç”¨æˆ·åªéœ€è¦å°†è¯·æ±‚å‘é€åˆ°åå‘ä»£ç†æœåŠ¡å™¨ï¼Œæœ‰åå‘ä»£ç†æœåŠ¡å™¨é€‰æ‹©ç›®æ ‡æœåŠ¡å™¨è·å–æ•°æ®å†è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶åå‘ä»£ç†æœåŠ¡å™¨å’Œç›®æ ‡æœåŠ¡å™¨å¯¹å¤–å°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œæš´éœ²çš„æ˜¯ä»£ç†æœåŠ¡å™¨çš„åœ°å€ï¼Œéšè—çš„çœŸå®çš„æœåŠ¡å™¨çš„IPåœ°å€</p><p><strong>è´Ÿè½½å‡è¡¡ï¼š</strong></p><p>å¢åŠ æœåŠ¡å™¨çš„æ•°é‡ï¼Œç„¶åå°†è¯·æ±‚åˆ†å‘åˆ°å„ä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°†åŸæœ¬è¯·æ±‚åˆ°å•ä¸ªæœåŠ¡å™¨ä¸Šçš„æƒ…å†µæ”¹ä¸ºè¯·æ±‚åˆ†å‘åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šã€å°†è´Ÿè½½åˆ†å‘åˆ°ä¸åŒåˆ†æœåŠ¡å™¨æˆ‘ä»¬ç§°ä¸ºè´Ÿè½½å‡è¡¡</p><p><strong>åŠ¨é™æ€åˆ†ç¦»ï¼š</strong></p><p>æŠŠåŠ¨æ€é¡µé¢å’Œé™æ€é¡µé¢ç”±ä¸åŒçš„æœåŠ¡å™¨æ¥è§£æï¼ŒåŠ å¿«è§£æé€Ÿåº¦ï¼Œé™ä½åŸæ¥å•ä¸ªæœåŠ¡å™¨çš„å‹åŠ›ï¼›å¦‚å›¾ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/1534147-20200522090350284-1607145726.png" alt="1534147-20200522090350284-1607145726.png"></p><h3 id="44-å¤šçº¿ç¨‹å¸¸è§çš„æ¦‚å¿µå’ŒæŠ€æœ¯"><a href="#44-å¤šçº¿ç¨‹å¸¸è§çš„æ¦‚å¿µå’ŒæŠ€æœ¯" class="headerlink" title="44. å¤šçº¿ç¨‹å¸¸è§çš„æ¦‚å¿µå’ŒæŠ€æœ¯"></a>44. å¤šçº¿ç¨‹å¸¸è§çš„æ¦‚å¿µå’ŒæŠ€æœ¯</h3><ol><li>çº¿ç¨‹ï¼šæ“ä½œç³»ç»Ÿæœ€å°çš„æ‰§è¡Œå•ä½æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å †æ ˆå’Œç¨‹åºè®¡æ•°å™¨</li><li>çº¿ç¨‹çŠ¶æ€ï¼šçº¿ç¨‹å¯ä»¥å¤„äºä¸åŒçš„çŠ¶æ€ï¼šå°±ç»ªã€è¿è¡Œã€æ–°å»ºã€é˜»å¡ã€ç»ˆæ­¢</li><li>çº¿ç¨‹åŒæ­¥ï¼šå¤šä¸ªçº¿ç¨‹è®¿é—®å…±äº«èµ„æºéœ€è¦è¿›è¡ŒåŒæ­¥ï¼ŒåŒæ­¥æŠ€æœ¯ï¼šäº’æ–¥é”ã€æ¡ä»¶å˜é‡ã€ä¿¡å·é‡ã€è¯»å†™é”</li><li>çº¿ç¨‹æ± ï¼šä¸ºäº†é¿å…åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€ï¼Œé€šè¿‡çº¿ç¨‹æ± æ¥ç®¡ç†ä¸€ç»„çº¿ç¨‹</li><li>å¹¶å‘é›†åˆï¼šjavaæä¾›çš„ä¸€äº›çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»å¦‚ConcurrentHashMapç­‰</li></ol><h3 id="45-javaé‡Œé¢çš„åƒåœ¾å›æ”¶åˆ†å‡ ç±»ï¼Ÿ"><a href="#45-javaé‡Œé¢çš„åƒåœ¾å›æ”¶åˆ†å‡ ç±»ï¼Ÿ" class="headerlink" title="45. javaé‡Œé¢çš„åƒåœ¾å›æ”¶åˆ†å‡ ç±»ï¼Ÿ"></a>45. javaé‡Œé¢çš„åƒåœ¾å›æ”¶åˆ†å‡ ç±»ï¼Ÿ</h3><p>å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š</p><ul><li>æ ‡è®°æ¸…é™¤æ³•ï¼šæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œç„¶åæ¸…é™¤æœªæ ‡è®°çš„å¯¹è±¡ã€‚è¿™ç§ç®—æ³•çš„ç¼ºç‚¹æ˜¯æ•ˆç‡ä½ï¼Œä¼šäº§ç”Ÿå†…å­˜ç¢ç‰‡ã€‚</li><li>å¤åˆ¶ç®—æ³•ï¼šå†…å­˜ç©ºé—´åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€ä¸ªåŒºåŸŸï¼Œç¼ºç‚¹æ˜¯éœ€è¦é¢å¤–çš„ç©ºé—´ã€‚</li><li>æ ‡è®°-æ•´ç†ç®—æ³•ï¼šæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œç„¶åå°†å­˜æ´»çš„å¯¹è±¡å¾€ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åæ¸…ç©ºå¦ä¸€ç«¯çš„å†…å­˜ã€‚ç¼ºç‚¹æ˜¯æ•ˆç‡ä½ï¼Œéœ€è¦ç§»åŠ¨å¯¹è±¡ã€‚</li><li>åˆ†ä»£ç®—æ³•ï¼šåˆ†ä¸ºå¹´è½»ä»£ï¼ˆå¤åˆ¶ç®—æ³•ã€æ¸…é™¤ç®—æ³•ï¼‰ã€è€å¹´ä»£ï¼ˆæ ‡è®°æ¸…æ¥šæ³•å’Œæ ‡è®°æ•´ç†æ³•ï¼‰å’ŒæŒä¹…ä»£ï¼ˆä¸éœ€è¦è¿›è¡Œåƒåœ¾å›æ”¶ï¼‰</li></ul><h3 id="46-çº¿ç¨‹çš„å¯è§æ€§"><a href="#46-çº¿ç¨‹çš„å¯è§æ€§" class="headerlink" title="46. çº¿ç¨‹çš„å¯è§æ€§"></a>46. çº¿ç¨‹çš„å¯è§æ€§</h3><p>å½“ä¸€ä¸ªçº¿ç¨‹è¢«ä¿®æ”¹äº†å…±äº«å˜é‡çš„å€¼åï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çš„çœ‹åˆ°è¿™ä¸ªä¿®æ”¹ï¼Œå¦‚æœçœ‹ä¸åˆ°å°±å‡ºç°äº†çº¿ç¨‹çš„å¯è§æ€§é—®é¢˜ï¼›</p><p>ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜å¯ä»¥ä½¿ç”¨volatileå…³é”®å­—æ¥ä¼‘ä¿®é¥°å…±äº«å˜é‡</p><ul><li>çº¿ç¨‹åœ¨è¯»å–volatileå˜é‡æ—¶ï¼Œæ€»æ˜¯è¯»å–æœ€æ–°çš„å€¼</li><li>çº¿ç¨‹åœ¨ä¿®æ”¹volatileå˜é‡æ—¶ï¼Œæ€»æ˜¯å°†ä¿®æ”¹åçš„å€¼ç«‹å³å†™å…¥ä¸»å†…å­˜ï¼Œè€Œä¸æ˜¯å†™å…¥æœ¬åœ°ç¼“å­˜</li></ul><p>ä¹Ÿå¯ä»¥ä½¿ç”¨é”ã€åŸå­å˜é‡ç­‰æœºåˆ¶æ¥ä¿è¯çº¿ç¨‹çš„å¯è§æ€§ã€‚</p><h3 id="47-Arrayå’ŒArrayListçš„åŒºåˆ«ï¼Ÿ"><a href="#47-Arrayå’ŒArrayListçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="47. Arrayå’ŒArrayListçš„åŒºåˆ«ï¼Ÿ"></a>47. Arrayå’ŒArrayListçš„åŒºåˆ«ï¼Ÿ</h3><ol><li>å†…å­˜åˆ†é…æ–¹å¼ä¸åŒArrayåˆ›å»ºçš„æ—¶å€™å°±éœ€è¦æŒ‡å®šæ•°ç»„çš„é•¿åº¦ï¼ŒArrayListä½¿ç”¨äº†åŠ¨æ€æ•°ç»„æ–¹å¼æ¥å­˜å‚¨å…ƒç´ å¯ä»¥åŠ¨æ€çš„å¢åŠ å’Œåˆ é™¤å…ƒç´ ï¼Œä¸éœ€è¦ä¸€å—è¿ç»­çš„å†…å­˜ç©ºé—´</li><li>è®¿é—®æ–¹å¼ä¸åŒï¼ŒArrayå¯ä»¥ç›´æ¥é€šè¿‡æ•°ç»„ä¸‹æ ‡æ¥è¿›è¡Œè®¿é—®ï¼Œè€ŒArrayListéœ€è¦é€šè¿‡getæ¥è·å–æŒ‡å®šä½ç½®ä¸Šçš„å…ƒç´ </li><li>å¢åˆ å…ƒç´ æ•ˆç‡ä¸åŒï¼ŒArrayå¢åŠ å’Œåˆ é™¤å…ƒç´ æ•ˆç‡ä½å› ä¸ºè¦å¤åˆ¶ï¼Œè€ŒArrayListå¯ä»¥ç›´æ¥ä½¿ç”¨addå’Œremoveæ–¹æ³•æ¥å¢åŠ å’Œåˆ é™¤å…ƒç´ </li><li>æ•°æ®ç±»å‹ä¸åŒï¼šArrayå¯ä»¥å­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹å’Œå¯¹è±¡ç±»å‹ï¼Œè€ŒArrayListåªèƒ½å­˜å‚¨å¯¹è±¡ç±»å‹çš„å…ƒç´ </li></ol><h3 id="48-è¯·è¯´è¯´Redisçš„æŒä¹…åŒ–æœºåˆ¶"><a href="#48-è¯·è¯´è¯´Redisçš„æŒä¹…åŒ–æœºåˆ¶" class="headerlink" title="48. è¯·è¯´è¯´Redisçš„æŒä¹…åŒ–æœºåˆ¶"></a>48. è¯·è¯´è¯´Redisçš„æŒä¹…åŒ–æœºåˆ¶</h3><p>Redisæ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ã€å¯ä»¥é€šè¿‡RDBå’ŒAOFä¸¤ç§æŒä¹…åŒ–æ–¹å¼å°†æ•°æ®å†™å…¥ç£ç›˜é˜²æ­¢æ•°æ®ä¸¢å¤±ï¼›</p><ul><li>RDBæŒä¹…åŒ–ï¼šå°†redisä¸­çš„æ•°æ®åœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å®šæ—¶çš„è¿›è¡Œå¿«ç…§å­˜å‚¨åˆ°ç¡¬ç›˜ä¸Šï¼Œå®ƒä¼šå°†å½“å‰æ—¶é—´ç‚¹çš„redisæ•°æ®ä»¥å¿«ç…§çš„æ–¹å¼ä¿å­˜åˆ°ç£ç›˜ä¸Šï¼Œä¼˜ç‚¹æ•°æ®æ¢å¤é€Ÿåº¦å¿«ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®çš„å¤‡ä»½ä¸æ¢å¤</li><li>AOFæŒä¹…åŒ–ï¼šå°†Redisä¸­çš„æ‰€æœ‰å†™æ“ä½œä»¥æ—¥å¿—çš„å½¢å¼è¿½åŠ åˆ°ç£ç›˜ä¸Šï¼Œä¼˜ç‚¹AOFçš„æ•°æ®å¯é æ€§é«˜ï¼Œå³ä½¿Rdisåœ¨æŒä¹…åŒ–ä¹‹å‰å®•æœºï¼Œä¹Ÿå¯ä»¥é€šè¿‡é‡æ”¾æ—¥å¿—æ–‡ä»¶çš„æ–¹å¼æ¢å¤æ•°æ®åº“ï¼Œç¼ºç‚¹æ˜¯AOFæ–‡ä»¶å¤§ï¼Œæ¢å¤é€Ÿåº¦æ…¢</li></ul><h3 id="49-é¡¹ç›®å“ªé‡Œç”¨åˆ°äº†redis-æ€ä¹ˆç”¨ï¼Ÿ"><a href="#49-é¡¹ç›®å“ªé‡Œç”¨åˆ°äº†redis-æ€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="49. é¡¹ç›®å“ªé‡Œç”¨åˆ°äº†redis æ€ä¹ˆç”¨ï¼Ÿ"></a>49. é¡¹ç›®å“ªé‡Œç”¨åˆ°äº†redis æ€ä¹ˆç”¨ï¼Ÿ</h3><p>â€‹    å…±äº«å­˜å‚¨ï¼šè·å–å½“å‰ç™»å½•çš„ä¿¡æ¯å°†æ•°æ®å­˜æ”¾åœ¨å•å°æœåŠ¡å™¨çš„å†…å­˜ä¸­ï¼Œä¿è¯ç”¨æˆ·æ— è®ºåœ¨æœåŠ¡å™¨Aç™»å½•è¿˜æ˜¯ç™»å½•æœåŠ¡å™¨Béƒ½ä»åŒä¸€ä¸ªæœåŠ¡å™¨å†…å­˜ä¸­è·å–æ•°æ®</p><p>å®ç°æ–¹å¼ï¼šSessionçš„å…±äº«å®ç°ï¼Œå¯¼å…¥spring-sessionæ•´åˆredisçš„åŒ…ï¼Œä¿®æ”¹spring-sessionå­˜å‚¨é…ç½®ï¼Œé€‰æ‹©ä¸€å°æœåŠ¡å™¨ï¼›</p><p>â€‹    Rediså®ç°çƒ­ç‚¹æ•°æ®çš„ç¼“ä¸»è¦åˆ©ç”¨Redissionåˆ†å¸ƒå¼æ“ä½œï¼ŒRediså®ç°ç¼“å­˜é¢„çƒ­ï¼Œé¦–å…ˆéœ€è¦ä¸€ä¸ªå®šæ—¶ä»»åŠ¡@EnableScheduling å¹¶ç»™å®šæ—¶ä»»åŠ¡æ·»åŠ @Schedulingæ³¨è§£å¹¶ä¸”æŒ‡å®šcronè¡¨è¾¾å¼</p><h3 id="50-InnoDBå’ŒMyISAMçš„åŒºåˆ«ï¼Ÿ"><a href="#50-InnoDBå’ŒMyISAMçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="50. InnoDBå’ŒMyISAMçš„åŒºåˆ«ï¼Ÿ"></a>50. InnoDBå’ŒMyISAMçš„åŒºåˆ«ï¼Ÿ</h3><ol><li>æ•°æ®åº“è¡¨çš„é”å®šæ–¹å¼ä¸åŒï¼šMyISAMé”å®šæ•´ä¸ªè¡¨ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œè¯»æ“ä½œæ—¶ï¼Œä¸èƒ½è¿›è¡Œå†™æ“ä½œï¼Œè€ŒInnoDBæ”¯æŒè¡Œé”ï¼Œå¯ä»¥åœ¨å¹¶å‘è®¿é—®æ—¶å¯¹æ•°æ®åº“è¿›è¡Œé”å®š</li><li>æ•°æ®åº“çš„äº‹åŠ¡å¤„ç†èƒ½åŠ›ä¸åŒï¼šMyISANä¸æ”¯æŒäº‹åŠ¡å¤„ç†ï¼Œè€ŒInnoDBæ”¯æŒäº‹åŠ¡å¤„ç†ã€‚å› æ­¤å¯¹äºéœ€è¦é¢‘ç¹æ›´æ–°çš„æ•°æ®åº”ç”¨ï¼Œä½¿ç”¨InnoDBæ›´ä¸ºåˆé€‚</li><li>å¯¹æ•°æ®åº“çš„å®Œæ•´æ€§çº¦æŸä¸åŒï¼šMyISAMä¸æ”¯æŒå¤–é”®çº¦æŸï¼Œè€ŒInnoDBæ”¯æŒå¤–é”®çº¦æŸ</li><li>æ•°æ®åº“çš„æ€§èƒ½è¡¨ç°ä¸åŒï¼šMyISANåœ¨æ‰§è¡Œå¤§é‡çš„SELECTæŸ¥è¯¢æ“ä½œæ—¶æ€§èƒ½æ¯”InnoDBè¦å¿«ï¼Œè€ŒInnoDBæ‰§è¡Œå¤§é‡çš„INSERTå’ŒUPDATEæ“ä½œæ—¶ï¼ŒInnoDBæ€§èƒ½æ›´å¥½ï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ã€‚</li></ol><h3 id="51-çº¿ç¨‹çš„åˆ›å»ºæ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿ"><a href="#51-çº¿ç¨‹çš„åˆ›å»ºæ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿ" class="headerlink" title="51. çº¿ç¨‹çš„åˆ›å»ºæ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿ"></a>51. çº¿ç¨‹çš„åˆ›å»ºæ–¹å¼æœ‰å“ªå‡ ç§ï¼Ÿ</h3><ol><li>ç»§æˆThreadç±»ï¼šåˆ›å»ºä¸€ä¸ªç±»ï¼Œé›†æˆThreadç±»é‡å†™runï¼ˆï¼‰æ–¹æ³•</li><li>å®ç°Runnableæ¥å£ï¼Œå¹¶é‡å†™runï¼ˆï¼‰æ–¹æ³•ã€ç„¶åå®ä¾‹åŒ–Threadç±»ï¼Œå°†è¯¥ç±»ä½œä¸ºå‚æ•°ä¼ å¦‚Threadæ„é€ æ–¹æ³•ä¸­ï¼Œå¹¶ä¸”è°ƒç”¨startï¼ˆï¼‰æ–¹æ³•å¯åŠ¨çº¿ç¨‹</li><li>å®ç°Callableæ¥å£ï¼šåˆ›å»ºä¸€ä¸ªç±»ï¼Œå®ç°Callableæ¥å£ï¼Œå¹¶é‡å†™callï¼ˆï¼‰æ–¹æ³•ï¼Œç„¶åä½¿ç”¨ExecutorServiceæäº¤ä»»åŠ¡å¹¶è¿”å›ä¸€ä¸ªFutureå¯¹è±¡ï¼Œå¹¶é€šè¿‡Futureå¯¹è±¡è·å–å¼‚æ­¥æ‰§è¡Œçš„ç»“æœ</li><li>ä½¿ç”¨çº¿ç¨‹æ± ï¼šé€šè¿‡ThreadPoolExecutorç­‰çº¿ç¨‹æ± ç±»æ¥åˆ›å»ºçº¿ç¨‹ï¼Œå°†ä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ± è¿›è¡Œç®¡ç†ï¼Œçº¿ç¨‹ä¼šè‡ªåŠ¨åˆ›å»ºçº¿ç¨‹å¹¶æ‰§è¡Œä»»åŠ¡</li><li>ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»åˆ›å»ºçº¿ç¨‹ï¼šä½¿ç”¨åŒ¿åå†…éƒ¨ç±»åˆ›å»ºThreadç±»æˆ–è€…å®ç°Runnableæ¥å£ï¼Œå¹¶é‡å†™runï¼ˆï¼‰æ–¹æ³•ç„¶åè°ƒç”¨startï¼ˆï¼‰æ–¹æ³•</li></ol><h3 id="52-hashMapå’ŒHashTableçš„åŒºåˆ«"><a href="#52-hashMapå’ŒHashTableçš„åŒºåˆ«" class="headerlink" title="52.hashMapå’ŒHashTableçš„åŒºåˆ«"></a>52.hashMapå’ŒHashTableçš„åŒºåˆ«</h3><ol><li>çº¿ç¨‹å®‰å…¨æ€§ä¸åŒï¼šhashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„HashTableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥ä½¿ç”¨Collections.synchronizedMapæ–¹æ³•è½¬æ¢ä¸ºçº¿ç¨‹å®‰å…¨çš„</li><li>nullé”®å’Œå€¼å¾—çš„å¤„ç†ä¸åŒï¼ŒHashtableä¸å…è®¸é”®æˆ–å€¼ä¸ºnullï¼Œå¦åˆ™ä¼šæŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œè€ŒhashMapå…è®¸é”®æˆ–å€¼ä¸ºnullã€‚ä½†éœ€è¦å¯¹nullå¤„ç†</li><li>åˆå§‹å®¹é‡å’Œæ‰©å®¹æœºåˆ¶ä¸åŒï¼šhashTableçš„åˆå§‹å®¹é‡ä¸º11ï¼Œæ‰©å®¹æ—¶å®¹é‡ä¼šç¿»å€ï¼Œè€ŒhashMapçš„åˆå§‹å®¹é‡ä¸º16ï¼Œæ‰©å®¹æ—¶å®¹é‡å¢åŠ ä¸€å€ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®è´Ÿè½½å› å­æ¥è°ƒæ•´æ‰©å®¹çš„æ—¶æœº</li><li>éå†æ–¹å¼ä¸åŒï¼šhashTableçš„å…ƒç´ æ˜¯æ— åºçš„ï¼Œéå†æ—¶éœ€è¦Enumerationï¼Œè€ŒhashMapçš„å…ƒç´ æ—¶æ— åºçš„éå†å¯ä»¥ä½¿ç”¨iteratorå’ŒforEachç­‰æ–¹å¼</li><li>åº•å±‚çš„å®ç°ä¸åŒï¼šHashTableæ˜¯åŸºäºå“ˆå¸Œè¡¨çš„å®ç°ï¼Œè€ŒhashMapæ˜¯åŸºäºå“ˆå¸Œè¡¨å’Œçº¢é»‘æ ‘çš„å®ç°ï¼›</li></ol><h3 id="53-å’Œ-çš„åŒºåˆ«ï¼Ÿ"><a href="#53-å’Œ-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="53. #å’Œ$çš„åŒºåˆ«ï¼Ÿ"></a>53. #å’Œ$çš„åŒºåˆ«ï¼Ÿ</h3><ul><li><p>åœ¨linuxç³»ç»Ÿä¸­#è¡¨ç¤ºrootç”¨æˆ·ï¼Œ$è¡¨ç¤ºæ™®é€šç”¨æˆ·ï¼Œåœ¨mybatisä¸­ï¼Œ#è¡¨ç¤ºå ä½ç¬¦å·ï¼Œ$è¡¨ç¤ºsqlæ‹¼æ¥ç¬¦å·</p></li><li><p>#å’Œ$åœ¨å¤„ç†ä¼ å…¥çš„æ•°æ®æ—¶æœ‰ä¸åŒçš„æ–¹å¼ã€‚åœ¨mybatisä¸­ï¼Œ#ä¼šæŠŠä¼ å…¥çš„æ•°æ®éƒ½å½“æˆä¸€ä¸ªå­—ç¬¦ä¸²æ¥å¤„ç†ï¼Œå¹¶è‡ªåŠ¨ç»™å…¶æ·»åŠ å¼•å·ï¼›è€Œ$åˆ™æ˜¯æŠŠä¼ å…¥çš„æ•°æ®ç›´æ¥æ˜¾ç¤ºåœ¨sqlè¯­å¥ä¸­ã€‚</p><ul><li><p>where username=# {username}ï¼Œè§£æåä¸ºwhere username=â€usernameâ€ã€‚</p></li><li><p>where username=$ {username}ï¼Œè§£æåä¸ºwhere username=username</p></li></ul></li><li><p>#å’Œ$åœ¨é˜²æ­¢sqlæ³¨å…¥æ–¹é¢æœ‰ä¸åŒçš„æ•ˆæœã€‚åœ¨mybatisä¸­ï¼Œ#å¯ä»¥æœ‰æ•ˆåœ°é˜²æ­¢sqlæ³¨å…¥æ”»å‡»ï¼Œå› ä¸ºå®ƒä¼šå¯¹ä¼ å…¥çš„æ•°æ®è¿›è¡Œè½¬ä¹‰ï¼›è€Œ$åˆ™ä¸èƒ½é˜²æ­¢sqlæ³¨å…¥æ”»å‡»ï¼Œå› ä¸ºå®ƒä¼šç›´æ¥æ‰§è¡Œä¼ å…¥çš„æ•°æ®ã€‚</p></li></ul><p>ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨JDBCèƒ½ä½¿ç”¨å ä½ç¬¦çš„åœ°æ–¹ï¼Œæœ€å¥½ä¼˜å…ˆä½¿ç”¨#{}ï¼›åœ¨JDBCä¸æ”¯æŒä½¿ç”¨å ä½ç¬¦çš„åœ°æ–¹ï¼Œå°±åªèƒ½ä½¿ç”¨${}ï¼Œæ¯”å¦‚åŠ¨æ€æŒ‡å®šè¡¨åæˆ–æ’åºå­—æ®µ</p><h3 id="54-springbootè‡ªåŠ¨è£…é…"><a href="#54-springbootè‡ªåŠ¨è£…é…" class="headerlink" title="54. springbootè‡ªåŠ¨è£…é…"></a>54. springbootè‡ªåŠ¨è£…é…</h3><p>æ‰€æœ‰æ³¨è§£éƒ½åœ¨åšä¸€ä»¶äº‹ï¼šæ³¨å†Œbeanåˆ°springå®¹å™¨</p><ul><li>@springbootConfigurationé€šè¿‡@Beanç»“åˆå®ŒæˆBeançš„JavaConfigé…ç½®ï¼›</li><li>@ComponentScané€šè¿‡èŒƒå›´æ‰«æçš„æ–¹å¼ï¼Œæ‰«æç‰¹å®šçš„æ³¨è§£æ³¨é‡Šç±»ï¼Œå°†å…¶æ³¨å†Œåˆ°springå®¹å™¨</li><li>@EnableAutoCOnfigurationé€šè¿‡spring.factoriesçš„é…ç½®ï¼Œå¹¶ç»“åˆ@Conditionæ¡ä»¶å®Œæˆbeançš„æ³¨å†Œ</li><li>@Importé€šè¿‡å¯¼å…¥çš„æ–¹å¼ï¼Œå°†æŒ‡å®šçš„classæ³¨è§£è§£æåˆ°pringå®¹å™¨</li></ul><p>springbootå®ç°è‡ªåŠ¨è£…é…çš„è¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰æ­¥ï¼š</p><ul><li>æ‰«æclasspathä¸‹çš„META-INF/spring.factoriesæ–‡ä»¶</li></ul><p>spring.factoriesæ–‡ä»¶ä¸­å®šä¹‰äº†å„ä¸ªè‡ªåŠ¨é…ç½®ç±»çš„å…¨é™å®šåã€‚åœ¨Spring Bootåº”ç”¨å¯åŠ¨æ—¶ï¼ŒSpring Bootä¼šè‡ªåŠ¨æ‰«æclasspathä¸‹çš„æ‰€æœ‰spring.factoriesæ–‡ä»¶ï¼Œå¹¶å°†å…¶ä¸­çš„è‡ªåŠ¨é…ç½®ç±»åŠ è½½åˆ°åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ã€‚</p><ul><li>åŠ è½½è‡ªåŠ¨é…ç½®ç±»</li></ul><p>è‡ªåŠ¨é…ç½®ç±»æ˜¯Spring Bootè‡ªåŠ¨è£…é…çš„æ ¸å¿ƒï¼Œå®ƒä¼šæ ¹æ®ä¸åŒçš„æ¡ä»¶é€‰æ‹©ä¸åŒçš„è£…é…æ–¹æ¡ˆã€‚Spring Bootä¼šæ ¹æ®ä¸Šä¸€æ­¥ä¸­æ‰«æåˆ°çš„è‡ªåŠ¨é…ç½®ç±»çš„å…¨é™å®šåæ¥åŠ è½½è¿™äº›ç±»ï¼Œå¹¶å°†å®ƒä»¬æ³¨å†Œåˆ°åº”ç”¨ä¸Šä¸‹æ–‡ä¸­ã€‚</p><ul><li>æ ¹æ®æ¡ä»¶è£…é…Bean</li></ul><p>å½“è‡ªåŠ¨é…ç½®ç±»åŠ è½½å®Œæˆåï¼ŒSpring Bootä¼šæ ¹æ®è‡ªåŠ¨é…ç½®ç±»ä¸­å®šä¹‰çš„æ¡ä»¶æ¥ç¡®å®šå“ªäº›Beanéœ€è¦è¢«è£…é…</p><h3 id="55-springbooté…ç½®æ–‡ä»¶çš„åŠ è½½é¡ºåºï¼Ÿ"><a href="#55-springbooté…ç½®æ–‡ä»¶çš„åŠ è½½é¡ºåºï¼Ÿ" class="headerlink" title="55. springbooté…ç½®æ–‡ä»¶çš„åŠ è½½é¡ºåºï¼Ÿ"></a>55. springbooté…ç½®æ–‡ä»¶çš„åŠ è½½é¡ºåºï¼Ÿ</h3><ol><li>é¦–å…ˆä¼šåŠ è½½é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„configæ–‡ä»¶å¤¹ä¸­æ‰€æœ‰çš„propertiesæˆ–ymlæ–‡ä»¶ï¼ŒæŒ‰ç…§æ–‡ä»¶åæ’åºåè¿›è¡ŒåŠ è½½</li><li>å…¶æ¬¡ä¼šåŠ è½½é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰propertiesæˆ–ymlæ–‡ä»¶ï¼ˆä¸åŒ…æ‹¬configæ–‡ä»¶ï¼‰ï¼ŒæŒ‰ç…§æ–‡ä»¶åæ’åºåè¿›è¡ŒåŠ è½½</li><li>ç„¶åä¼šåŠ è½½classpathä¸‹çš„configé—®ä»·å¤¹ä¸­çš„æ‰€æœ‰propertiesæˆ–ymlæ–‡ä»¶</li><li>æœ€ååŠ è½½classpathä¸‹æ‰€æœ‰çš„propertiesæˆ–ymlæ–‡ä»¶ï¼ˆä¸åŒ…æ‹¬configæ–‡ä»¶å¤¹ï¼‰</li></ol><p>åœ¨åŠ è½½è¿‡ç¨‹ä¸­ï¼Œåé¢çš„é…ç½®æ–‡ä»¶ä¼šè¦†ç›–å‰é¢çš„é…ç½®æ–‡ä»¶ä¸­ç›¸åŒçš„å±æ€§å€¼ï¼›</p><h3 id="56-springbufferå’Œstringbuilderçš„åŒºåˆ«"><a href="#56-springbufferå’Œstringbuilderçš„åŒºåˆ«" class="headerlink" title="56. springbufferå’Œstringbuilderçš„åŒºåˆ«"></a>56. springbufferå’Œstringbuilderçš„åŒºåˆ«</h3><p>ä¸¤è€…éƒ½æ˜¯å¯å˜å­—ç¬¦ä¸²å¯ä»¥åŠ¨æ€çš„æ·»åŠ å’Œåˆ é™¤å­—ç¬¦ä¸²å†…å®¹ï¼›</p><ul><li>stringbufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œstringbuilderæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„</li><li>stringbufferçš„æ€§èƒ½ä½äºstringbuilderå› ä¸ºstringbufferçš„æ¯ä¸ªæ–¹æ³•éƒ½åŠ ä¸Šäº†çº¿ç¨‹åŒæ­¥æ‰€ä»¥æ€§èƒ½è¾ƒå·®ä¸€ç‚¹</li><li>åº”ç”¨åœºæ™¯ï¼šå¦‚æœéœ€è¦å¤šçº¿ç¨‹æ“ä½œæˆ–è€…éœ€è¦è¿›è¡Œå­—ç¬¦ä¸²çš„é¢‘ç¹ä¿®æ”¹æ“ä½œï¼Œå»ºè®®ä½¿ç”¨stringbufferï¼Œè€Œå¯¹äºå•çº¿ç¨‹ä½¿ç”¨stringbuilderï¼Œå› ä¸ºå®ƒçš„æ€§èƒ½æ›´å¥½</li></ul><h3 id="57-å¦‚ä½•è§£å†³å“ˆå¸Œå†²çª"><a href="#57-å¦‚ä½•è§£å†³å“ˆå¸Œå†²çª" class="headerlink" title="57. å¦‚ä½•è§£å†³å“ˆå¸Œå†²çª"></a>57. å¦‚ä½•è§£å†³å“ˆå¸Œå†²çª</h3><p>å¼€æ”¾åœ°å€æ³•ï¼šæŒ‰ç…§ä¸€å®šçš„æ¬¡åºï¼Œä»å“ˆå¸Œè¡¨ä¸­æ‰¾åˆ°ä¸€ä¸ªç©ºé—²çš„å•å…ƒï¼Œç„¶åæŠŠå‘ç”Ÿå†²çªçš„å…ƒç´ å­˜å…¥è¯¥å•å…ƒ</p><p>é“¾åœ°å€æ³•ï¼šå°†å“ˆå¸Œå€¼ç›¸åŒçš„å…ƒç´ æ„æˆä¸€ä¸ªåŒä¹‰è¯çš„å•é“¾è¡¨</p><p>å†å“ˆå¸Œæ³•</p><p>å»ºç«‹å…¬å…±æº¢å‡ºåŒºï¼šå“ˆå¸Œè¡¨åˆ†ä¸ºå…¬å…±è¡¨å’Œæº¢å‡ºè¡¨ï¼Œå½“æº¢å‡ºå‘ç”Ÿæ—¶ï¼Œå°†æ‰€æœ‰æº¢å‡ºæ•°æ®ç»Ÿä¸€æ”¾åˆ°æº¢å‡ºåŒºã€‚</p><h3 id="58-mysqlç´¢å¼•çš„ç¼ºç‚¹"><a href="#58-mysqlç´¢å¼•çš„ç¼ºç‚¹" class="headerlink" title="58. mysqlç´¢å¼•çš„ç¼ºç‚¹"></a>58. mysqlç´¢å¼•çš„ç¼ºç‚¹</h3><ul><li>éœ€è¦å ç”¨ç£ç›˜ç©ºé—´ï¼šç´¢å¼•æ–‡ä»¶å¦‚æœå¤ªå¤§å ç”¨ç©ºé—´ä¹Ÿä¼šå¾ˆå¤§</li><li>ç´¢å¼•ä¼šé™ä½å†™æ“ä½œçš„æ€§èƒ½ï¼šæ¯æ¬¡å†™æ“ä½œè¦æ›´æ–°ç´¢å¼•ï¼Œé¢‘ç¹çš„æ›´æ–°ç´¢å¼•ï¼Œä¼šå¯¼è‡´å†™æ“ä½œçš„æ€§èƒ½ä¸‹é™</li></ul><p>ï¼ˆå› ä¸ºç´¢å¼•çš„å‰ç¼€æŸ¥è¯¢ä¼šä½¿B+æ•°çš„èŠ‚ç‚¹åŒ¹é…æ›´å¤šçš„å€¼ï¼Œå¢åŠ IOæ“ä½œã€æ¨¡ç³ŠæŸ¥è¯¢çš„åŒ¹é…è§„åˆ™ï¼Œéœ€è¦å¯¹ç´¢å¼•åˆ—è¿›è¡Œå­—ç¬¦åŒ¹é…ï¼ŒåŒ¹é…æ•ˆç‡ä½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼‰</p><ul><li>ç´¢å¼•ä¹Ÿå¯èƒ½å¯¼è‡´æŸ¥è¯¢æ€§èƒ½ä¸‹é™ï¼Œå¦‚æœç´¢å¼•ä¸å½“ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ï¼Œå¦‚ä½¿ç”¨å‰ç¼€æŸ¥è¯¢å’Œæ¨¡ç³ŠæŸ¥è¯¢ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™</li><li>ç»´æŠ¤ç´¢å¼•éœ€è¦æˆæœ¬ ï¼šéœ€è¦é¿å…è¿‡å¤šçš„ä½¿ç”¨ç´¢å¼•</li></ul><h3 id="59-ç´¢å¼•çš„åº•å±‚å®ç°"><a href="#59-ç´¢å¼•çš„åº•å±‚å®ç°" class="headerlink" title="59. ç´¢å¼•çš„åº•å±‚å®ç°"></a>59. ç´¢å¼•çš„åº•å±‚å®ç°</h3><p>B+æ ‘å’Œå“ˆå¸Œè¡¨</p><h3 id="60-ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆ"><a href="#60-ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆ" class="headerlink" title="60. ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆ"></a>60. ä»€ä¹ˆæƒ…å†µä¸‹ç´¢å¼•ä¼šå¤±æ•ˆ</h3><ol><li>å¯¹ç´¢å¼•è¿›è¡Œå‡½æ•°æ“ä½œï¼Œå¦‚åœ¨whereä¸­ä½¿ç”¨å‡½æ•°æ“ä½œç¬¦</li><li>æŸ¥è¯¢ä¸­ä½¿ç”¨äº†ä¸ç­‰å¼æ“ä½œç¬¦</li><li>åœ¨ç´¢å¼•åˆ—ä¸Šè¿›è¡Œéšå¼è½¬æ¢æˆ–è€…å¼ºåˆ¶ç±»å‹è½¬æ¢</li><li>å½“æŸ¥è¯¢æ¡ä»¶ä¸­çš„åˆ—ä¸ç´¢å¼•çš„æœ€å·¦ä¾§å‰ç¼€ä¸åŒ¹é…æ—¶</li><li>å½“è¡¨çš„æ•°æ®é‡éå¸¸å°</li><li>ä½¿ç”¨äº†å¤§å­—æ®µçš„ç±»å‹</li><li>ä½¿ç”¨äº†è”åˆæŸ¥è¯¢ï¼ŒæŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨é™¤ç´¢å¼•çš„ç¬¬ä¸€ä¸ªå­—æ®µè¿˜æ˜¯ä½¿ç”¨äº†å…¶ä»–å­—æ®µ</li><li>ä½¿ç”¨å­æŸ¥è¯¢ã€ä¸´æ—¶è¡¨ã€è§†å›¾</li></ol><h3 id="61-è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨çš„åŒºåˆ«ï¼Ÿ"><a href="#61-è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="61. è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨çš„åŒºåˆ«ï¼Ÿ"></a>61. è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨çš„åŒºåˆ«ï¼Ÿ</h3><ol><li>è§¦å‘æ—¶æœºä¸åŒï¼šè¿‡æ»¤å™¨åœ¨è¯·æ±‚è¿›å…¥Servletå®¹å™¨ä¹‹å‰æ‹¦æˆªè¯·æ±‚ï¼Œè€Œæ‹¦æˆªå™¨åœ¨è¯·æ±‚è¿›å…¥å¤„ç†å™¨ä¹‹å‰æˆ–è€…ä¹‹åæ‹¦æˆªè¯·æ±‚ã€‚</li><li>åº”ç”¨èŒƒå›´ä¸åŒï¼šè¿‡æ»¤å™¨å¯ä»¥åœ¨Web.xmlæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œä½œç”¨äºæ•´ä¸ªWebåº”ç”¨ç¨‹åºã€è€Œæ‹¦æˆªå™¨åªæ˜¯å¯¹æŸä¸ªç‰¹å®šçš„å¤„ç†å™¨è¿›è¡Œæ‹¦æˆª</li><li>æ¥å£ä¸åŒï¼šè¿‡æ»¤å™¨å®ç°äº†javax.servlet.Filteræ¥å£ï¼Œè€Œæ‹¦æˆªå™¨å®ç°äº†Springæ¡†æ¶çš„HandlerInterceptoræ¥å£</li><li>å…±èƒ½ä¸åŒï¼šè¿‡æ»¤å™¨æ˜¯åŸºäºServletè§„èŒƒå®ç°çš„å¯ä»¥å¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œæ“ä½œï¼Œæ‹¦æˆªå™¨æ˜¯SpringMVCæ¡†æ¶æä¾›çš„ï¼Œå¯¹å¤„ç†å™¨çš„æ‰§è¡Œè¿‡ç¨‹è¿›è¡Œå¹²é¢„</li></ol><h3 id="62-Streamæµçš„ç»ˆæ­¢æ–¹æ³•æœ‰"><a href="#62-Streamæµçš„ç»ˆæ­¢æ–¹æ³•æœ‰" class="headerlink" title="62.Streamæµçš„ç»ˆæ­¢æ–¹æ³•æœ‰"></a>62.Streamæµçš„ç»ˆæ­¢æ–¹æ³•æœ‰</h3><p>streamå¸¸ç”¨çš„æ–¹æ³•ï¼š</p><ul><li>filterï¼šæ ¹æ®æŒ‡å®šçš„æ¡ä»¶è¿‡æ»¤</li><li>mapï¼šå°†æ•°æ®è½¬æ¢ä¸ºæ–°çš„æ ¼å¼</li><li>flatMapï¼šå°†åµŒå¥—çš„Streamæ‰å¹³åŒ–</li><li>sortedï¼šå¯¹æ•°æ®è¿›è¡Œæ’åº</li><li>distinctï¼šå»é‡</li><li>forEachï¼šéå†æ•°æ®</li><li>reduceï¼šå°†æ•°æ®é›†åˆæˆä¸€ä¸ªå€¼</li></ul><ol><li>countï¼šç»Ÿè®¡ä¸ªæ•°</li><li>collectï¼šå°†æ•°æ®æ”¶é›†åˆ°ä¸€ä¸ªå®¹å™¨ä¸­</li><li>toArrayï¼šå°†æ•°æ®è½¬æ¢ä¸ºæ•°ç»„</li><li>max/minï¼šæŸ¥æ‰¾æœ€å¤§å€¼/æœ€å°å€¼</li><li>findFirst/findAnyï¼šæŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ª/ä»»æ„ä¸€ä¸ªæ•°æ®</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//streamæµçš„å€’åºæ’åº</span><br>List&lt;Integer&gt; list = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>);<br>List&lt;Integer&gt; reversedList = list.stream()<br>    .sorted(Comparator.reverseOrder())<br>    .collect(Collectors.toList());<br></code></pre></td></tr></tbody></table></figure><h3 id="63-CountDownLatchçš„ä½œç”¨ï¼Œå¦‚ä½•ä½¿ç”¨ï¼Ÿ"><a href="#63-CountDownLatchçš„ä½œç”¨ï¼Œå¦‚ä½•ä½¿ç”¨ï¼Ÿ" class="headerlink" title="63. CountDownLatchçš„ä½œç”¨ï¼Œå¦‚ä½•ä½¿ç”¨ï¼Ÿ"></a>63. CountDownLatchçš„ä½œç”¨ï¼Œå¦‚ä½•ä½¿ç”¨ï¼Ÿ</h3><p>å®ƒå¯ä»¥æ§åˆ¶å¤šä¸ªçº¿ç¨‹çš„æ‰§è¡Œé¡ºåºï¼Œä½œç”¨æ˜¯è®©æŸä¸ªçº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹æ‰§è¡Œå®Œæ¯•ååœ¨æ‰§è¡Œï¼Œå®ƒæ˜¯é€šè¿‡ä¸€ä¸ªè®¡æ•°å™¨å®ç°çš„ï¼Œæ¯å½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åè®¡æ•°å™¨ä¼šå‡ä¸€</p><ol><li>åˆ›å»ºcountDownLatchå¯¹è±¡ï¼Œåˆå§‹åŒ–è®¡æ•°å™¨çš„å€¼ä¸ºéœ€è¦ç­‰å¾…çš„çº¿ç¨‹æ•°</li><li>åœ¨éœ€è¦ç­‰å¾…çš„çº¿ç¨‹æ‰§è¡Œå®Œæ¯•çš„åœ°æ–¹è°ƒç”¨CountDownLatchå¯¹è±¡çš„countDownæ–¹æ³•ï¼Œä½¿å¾—è®¡æ•°å™¨å‡ä¸€</li></ol><h3 id="64-ä½¿ç”¨explainå…³é”®å­—æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’è¿”å›å­—æ®µï¼Ÿ"><a href="#64-ä½¿ç”¨explainå…³é”®å­—æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’è¿”å›å­—æ®µï¼Ÿ" class="headerlink" title="64. ä½¿ç”¨explainå…³é”®å­—æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’è¿”å›å­—æ®µï¼Ÿ"></a>64. ä½¿ç”¨explainå…³é”®å­—æŸ¥è¯¢æ‰§è¡Œè®¡åˆ’è¿”å›å­—æ®µï¼Ÿ</h3><ol><li>id:æŸ¥è¯¢æ ‡è¯†ç¬¦ï¼Œåˆ¤æ–­æŸ¥è¯¢ä¸­æ˜¯å¦å­˜åœ¨å­æŸ¥è¯¢ä»¥åŠå­æŸ¥è¯¢çš„æ‰§è¡Œé¡ºåº</li><li>select_typeï¼šæŸ¥è¯¢ç±»å‹ã€ç®€å•çš„æŸ¥è¯¢ã€è”åˆæŸ¥è¯¢ã€å­æŸ¥è¯¢</li><li>tableï¼šæŸ¥è¯¢çš„ç±»å‹ã€‚â€œallâ€ã€indexã€rangeã€ref</li><li>possible_keysï¼šå¯èƒ½ç”¨åˆ°çš„ç´¢å¼•</li><li>keyï¼šå®é™…ç”¨åˆ°çš„ç´¢å¼•</li><li>key_lenï¼šç´¢å¼•çš„é•¿åº¦</li><li>ref:ç´¢å¼•çš„å‚è€ƒå¯¹è±¡</li><li>rowsï¼šæ‰«æçš„è¡Œæ•°</li><li>extraï¼šä¸€äº›é¢å¤–çš„ä¿¡æ¯</li></ol><h3 id="65-redisçš„å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Œé»˜è®¤çš„æ˜¯å“ªä¸ªï¼Œredisçš„IOå¤šè·¯å¤ç”¨çš„åŸç†ï¼Œsocketçš„IOå¤šè·¯å¤ç”¨åŸç†ï¼Œpollï¼Œepollï¼ŒselectåŒºåˆ«"><a href="#65-redisçš„å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Œé»˜è®¤çš„æ˜¯å“ªä¸ªï¼Œredisçš„IOå¤šè·¯å¤ç”¨çš„åŸç†ï¼Œsocketçš„IOå¤šè·¯å¤ç”¨åŸç†ï¼Œpollï¼Œepollï¼ŒselectåŒºåˆ«" class="headerlink" title="65. redisçš„å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Œé»˜è®¤çš„æ˜¯å“ªä¸ªï¼Œredisçš„IOå¤šè·¯å¤ç”¨çš„åŸç†ï¼Œsocketçš„IOå¤šè·¯å¤ç”¨åŸç†ï¼Œpollï¼Œepollï¼ŒselectåŒºåˆ«"></a>65. redisçš„å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Œé»˜è®¤çš„æ˜¯å“ªä¸ªï¼Œredisçš„IOå¤šè·¯å¤ç”¨çš„åŸç†ï¼Œsocketçš„IOå¤šè·¯å¤ç”¨åŸç†ï¼Œpollï¼Œepollï¼ŒselectåŒºåˆ«</h3><ol><li>Redisçš„é»˜è®¤å†…å­˜æ·˜æ±°ç­–ç•¥æ˜¯volatile-lruï¼Œå³ä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„é”®ä¸­ï¼Œé€‰æ‹©æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é”®æ·˜æ±°ã€‚</li><li>Redisçš„IOå¤šè·¯å¤ç”¨ä½¿ç”¨çš„æ˜¯å•çº¿ç¨‹çš„äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªäº‹ä»¶å¾ªç¯è´Ÿè´£ç›‘å¬æ‰€æœ‰socketçš„è¯»å†™äº‹ä»¶ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„å¤„ç†ç¨‹åºã€‚Redisæ”¯æŒå¤šç§IOå¤šè·¯å¤ç”¨æŠ€æœ¯ï¼ŒåŒ…æ‹¬selectã€pollã€epollï¼Œå…¶ä¸­selectå’Œpollæ˜¯æ¯”è¾ƒæ—©çš„æŠ€æœ¯ï¼Œepollæ˜¯Linuxå†…æ ¸2.6ç‰ˆæœ¬ä¹‹åæ‰åŠ å…¥çš„æ–°æŠ€æœ¯ï¼Œç›¸æ¯”äºselectå’Œpollï¼Œepollåœ¨å¤„ç†å¤§é‡è¿æ¥æ—¶æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚</li><li>Socketçš„IOå¤šè·¯å¤ç”¨åŸç†ï¼šåœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œå¦‚æœéœ€è¦åŒæ—¶å¤„ç†å¤šä¸ªsocketè¿æ¥ï¼Œå¯ä»¥ä½¿ç”¨IOå¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œé¿å…ä½¿ç”¨å¤šçº¿ç¨‹æˆ–å¤šè¿›ç¨‹çš„æ–¹å¼å¤„ç†ã€‚ä½¿ç”¨IOå¤šè·¯å¤ç”¨çš„æ–¹å¼ï¼Œå¯ä»¥å°†å¤šä¸ªsocketæ³¨å†Œåˆ°ä¸€ä¸ªç›‘å¬é›†åˆä¸­ï¼Œç„¶åå°†ç›‘å¬é›†åˆäº¤ç»™æ“ä½œç³»ç»Ÿçš„select/poll/epollç³»ç»Ÿè°ƒç”¨ï¼Œç­‰å¾…IOäº‹ä»¶çš„å‘ç”Ÿã€‚å½“æŸä¸ªsocketæœ‰æ•°æ®å¯è¯»/å¯å†™æ—¶ï¼ŒIOå¤šè·¯å¤ç”¨ä¼šé€šçŸ¥åº”ç”¨ç¨‹åºè¿›è¡Œå¤„ç†ã€‚</li><li>selectï¼šæœ€æ—©å‡ºç°çš„IOå¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œå®ƒé€šè¿‡è½®è¯¢çš„æ–¹å¼æŸ¥è¯¢æ‰€æœ‰æ³¨å†Œçš„socketï¼Œå‘ç°æœ‰æ•°æ®å¯è¯»/å¯å†™çš„socketåå†è¿›è¡Œå¤„ç†ã€‚selectæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œæ¯”å¦‚å¯¹socketæ•°é‡çš„é™åˆ¶ï¼Œæ¯æ¬¡è½®è¯¢éœ€è¦å°†socketé›†åˆä»ç”¨æˆ·ç©ºé—´å¤åˆ¶åˆ°å†…æ ¸ç©ºé—´ç­‰ã€‚</li><li>pollï¼šåœ¨selectçš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–ï¼Œå®ƒæ”¯æŒæ›´å¤šçš„socketæ•°é‡ï¼Œå¹¶ä¸”å¯ä»¥é¿å…æ¯æ¬¡è½®è¯¢æ—¶å°†socketé›†åˆå¤åˆ¶åˆ°å†…æ ¸ç©ºé—´çš„æ“ä½œï¼Œä½†å®ƒä»ç„¶å­˜åœ¨æ•ˆç‡</li></ol><h3 id="66-æŸ¥è¯¢æŸä¸ªè¿›ç¨‹çš„ç«¯å£å·"><a href="#66-æŸ¥è¯¢æŸä¸ªè¿›ç¨‹çš„ç«¯å£å·" class="headerlink" title="66.æŸ¥è¯¢æŸä¸ªè¿›ç¨‹çš„ç«¯å£å·"></a>66.æŸ¥è¯¢æŸä¸ªè¿›ç¨‹çš„ç«¯å£å·</h3><ol><li>netstat -anp | grep ç«¯å£å·</li><li>ss -ltp |grep ç«¯å£å·</li></ol><h3 id="67-springé‡Œé¢çš„è£…é¥°å™¨æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"><a href="#67-springé‡Œé¢çš„è£…é¥°å™¨æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ" class="headerlink" title="67. springé‡Œé¢çš„è£…é¥°å™¨æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"></a>67. springé‡Œé¢çš„è£…é¥°å™¨æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</h3><p>springæ¡†æ¶ä¸­çš„è£…é¥°å™¨ä¸»è¦é€šè¿‡AOPå®ç°çš„ï¼ŒAOPå¯ä»¥é€šè¿‡ä»£ç†æ¨¡å¼å®ç°ï¼Œåœ¨springä¸­å¯ä»¥ä½¿ç”¨@AspectJè¯­æ³•æˆ–è€…åŸºäºæ³¨è§£çš„æ–¹å¼å®ç°AOPã€‚</p><h3 id="68-existså’Œinæ€ä¹ˆé€‰ï¼Ÿ"><a href="#68-existså’Œinæ€ä¹ˆé€‰ï¼Ÿ" class="headerlink" title="68. existså’Œinæ€ä¹ˆé€‰ï¼Ÿ"></a>68. existså’Œinæ€ä¹ˆé€‰ï¼Ÿ</h3><p>ä¸¤è€…éƒ½æ˜¯SQLè¯­å¥æ•°æ®æŸ¥è¯¢æ—¶çš„é€‰æ‹©</p><ul><li>existsåˆ¤æ–­æŸä¸ªå­æŸ¥è¯¢æ˜¯å¦è¿”å›äº†ç»“æœã€å¦‚æœè¿”å›äº†ç»“æœï¼Œåˆ™æ¡ä»¶æˆç«‹ï¼Œexistsæ¯”inæ›´é«˜æ•ˆï¼Œå› ä¸ºå®ƒå€¼åˆ¤æ–­æ˜¯å¦å­˜åœ¨è€Œinéœ€è¦å°†ç»“æœåŠ è½½åˆ°å†…å­˜åœ¨è¿›è¡Œæ¯”è¾ƒ</li><li>å½“éœ€è¦æŸ¥è¯¢æŸä¸ªå­—æ®µæ˜¯å¦åœ¨å¦ä¸€ä¸ªè¡¨ä¸­å‡ºç°æ—¶å¯ä»¥ä½¿ç”¨inè¯­å¥ï¼Œinå°†æŸä¸ªå­—æ®µå’Œå¦ä¸€ä¸ªè¡¨ä¸­çš„å­—æ®µè¿›è¡Œæ¯”å¯¹ï¼Œå¦‚æœç›¸åŒï¼Œåˆ™ç¬¦åˆæ¡ä»¶ï¼Œå¯ä»¥å°†è¿™ä¸ªæ¡ä»¶ä½œä¸ºç­›é€‰æ•°æ®çš„æ¡ä»¶ã€‚</li></ul><h3 id="69-JVMå†…å­˜æ¨¡å‹"><a href="#69-JVMå†…å­˜æ¨¡å‹" class="headerlink" title="69. JVMå†…å­˜æ¨¡å‹"></a>69. JVMå†…å­˜æ¨¡å‹</h3><p>JVMåŒ…æ‹¬çº¿ç¨‹ç‹¬å çš„çº¿ç¨‹æ ˆã€å„çº¿ç¨‹å…±äº«å †ã€æ–¹æ³•åŒºã€ä»¥åŠç›´æ¥å†…å­˜åŒº</p><p>å †å†…å­˜åˆ†ä¸ºï¼šæ–°ç”Ÿä»£ã€è€å¹´ä»£ï¼›æ–°ç”Ÿä»£å†…å­˜åˆ†ä¸ºï¼šedenã€Survivor 0ã€Survivor 1ä¸‰ä¸ªåŒºåŸŸ</p><p>æ–¹æ³•åŒºæ—¶å„çº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜å‚¨ç±»ã€å¸¸é‡å’Œé™æ€å˜é‡ä¹ŸæŒ‡æ°¸ä¹…ä»£ JDK8ä»¥åæ›¿æ¢ä¸ºå…ƒç©ºé—´</p><p>çº¿ç¨‹ç§æœ‰åŒºï¼šå­˜æ”¾çº¿ç¨‹è‡ªå·±çš„æ ˆå¸§ï¼Œæ¯ä¸ªæ ˆå¸§å¯¹åº”ä¸€ä¸ªæ–¹æ³•çš„æ‰§è¡Œè¿‡çº¿ç¨‹ï¼šçº¿ç¨‹æ ˆè¿˜å¯ä»¥åˆ†ä¸ºï¼šæœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆ</p><p>ç›´æ¥å†…å­˜åŒºåŸŸï¼šNIOï¼Œç‰¹ç‚¹å¯ä»¥å‡å°‘åœ¨javaå †å’Œç›´æ¥å†…å­˜ä¹‹é—´çš„æ•°æ®æ‹·è´ï¼Œæé«˜æ•°æ®è¯»å†™æ•ˆç‡</p><h3 id="70-volatileçš„ä½œç”¨ï¼Œvolatileå¦‚ä½•ä¿è¯å¯è§æ€§ï¼Ÿ"><a href="#70-volatileçš„ä½œç”¨ï¼Œvolatileå¦‚ä½•ä¿è¯å¯è§æ€§ï¼Ÿ" class="headerlink" title="70.   volatileçš„ä½œç”¨ï¼Œvolatileå¦‚ä½•ä¿è¯å¯è§æ€§ï¼Ÿ"></a>70.   volatileçš„ä½œç”¨ï¼Œvolatileå¦‚ä½•ä¿è¯å¯è§æ€§ï¼Ÿ</h3><p>volatileä¸»è¦æ¥ä¿®é¥°å˜é‡ï¼Œå®ƒçš„ä½œç”¨æ—¶ä¿è¯å˜é‡çš„å¯è§æ€§ã€ç¦æ­¢æŒ‡ä»¤é‡æ’å’Œä¿è¯åŸå­æ€§ã€‚å½“ä¸€ä¸ªå˜é‡è¢«å£°æ˜ä¸ºvolatileæ—¶ï¼Œå®ƒä¼šè¢«å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­è€Œä¸æ˜¯çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ã€è¿™æ ·å…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹åˆ»çœ‹åˆ°è¯¥å˜é‡çš„å˜åŒ–ï¼Œå› ä¸ºä»–ä»¬å…±äº«ä¸€å—ä¸»å†…å­˜ã€‚</p><h3 id="71-åŠ¨æ€ä»£ç†çš„å®ç°ä»¥JDKä¸ºä¾‹ï¼Ÿ"><a href="#71-åŠ¨æ€ä»£ç†çš„å®ç°ä»¥JDKä¸ºä¾‹ï¼Ÿ" class="headerlink" title="71.åŠ¨æ€ä»£ç†çš„å®ç°ä»¥JDKä¸ºä¾‹ï¼Ÿ"></a>71.åŠ¨æ€ä»£ç†çš„å®ç°ä»¥JDKä¸ºä¾‹ï¼Ÿ</h3><ol><li>å®šä¹‰æ¥å£å’Œç›®æ ‡ç±»</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> {<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">()</span>;<br>}<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> {<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"save user"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><ol><li>å®ç°InvocationHandleræ¥å£å®ƒæ˜¯JDKæä¾›çš„ä¸€ä¸ªæ¥å£ï¼Œä»–åªæœ‰ä¸€ä¸ªinvokæ–¹æ³•ï¼Œå®ƒæ˜¯ä»£ç†å®ä¾‹çš„è°ƒç”¨ç¨‹åº</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyInvocationHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InvocationHandler</span> {<br>    <span class="hljs-comment">// ç›®æ ‡å¯¹è±¡</span><br>    <span class="hljs-keyword">private</span> Object target;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyInvocationHandler</span><span class="hljs-params">(Object target)</span> {<br>        <span class="hljs-built_in">this</span>.target = target;<br>    }<br><br>    <span class="hljs-comment">// ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨invokeæ–¹æ³•</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable {<br>        System.out.println(<span class="hljs-string">"before method"</span>);<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> method.invoke(target, args);<br>        System.out.println(<span class="hljs-string">"after method"</span>);<br>        <span class="hljs-keyword">return</span> result;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><ol><li>åˆ›å»ºä»£ç†å¯¹è±¡</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-comment">// åˆ›å»ºç›®æ ‡å¯¹è±¡</span><br>        <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();<br><br>        <span class="hljs-comment">// åˆ›å»º InvocationHandler å¯¹è±¡</span><br>        <span class="hljs-type">MyInvocationHandler</span> <span class="hljs-variable">invocationHandler</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyInvocationHandler</span>(userService);<br><br>        <span class="hljs-comment">// é€šè¿‡ Proxy.newProxyInstance() åˆ›å»ºä»£ç†å¯¹è±¡</span><br>        <span class="hljs-type">UserService</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> (UserService) Proxy.newProxyInstance(<br>                userService.getClass().getClassLoader(),<br>                userService.getClass().getInterfaces(),<br>                invocationHandler);<br><br>        <span class="hljs-comment">// è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•</span><br>        proxy.save();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>åˆ›å»ºä»£ç†å¯¹è±¡è°ƒç”¨JDKçš„é™æ€æ–¹æ³•Proxy.newProxyInstance(),è¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ä¼ å…¥çš„ä¸¤ä¸ªå‚æ•°å°±æ˜¯ä»£ç†ç›®æ ‡ç±»å’Œç›®æ ‡æ¥å£ç±»ã€InvocationHandlerå¯¹è±¡</p><h3 id="72-æµçš„åˆ†ç±»ï¼Œå­—ç¬¦æµå­—èŠ‚æµåŒºåˆ«ï¼Œè¯»å–å›¾ç‰‡ç”¨ä»€ä¹ˆæµï¼Ÿ"><a href="#72-æµçš„åˆ†ç±»ï¼Œå­—ç¬¦æµå­—èŠ‚æµåŒºåˆ«ï¼Œè¯»å–å›¾ç‰‡ç”¨ä»€ä¹ˆæµï¼Ÿ" class="headerlink" title="72.æµçš„åˆ†ç±»ï¼Œå­—ç¬¦æµå­—èŠ‚æµåŒºåˆ«ï¼Œè¯»å–å›¾ç‰‡ç”¨ä»€ä¹ˆæµï¼Ÿ"></a>72.æµçš„åˆ†ç±»ï¼Œå­—ç¬¦æµå­—èŠ‚æµåŒºåˆ«ï¼Œè¯»å–å›¾ç‰‡ç”¨ä»€ä¹ˆæµï¼Ÿ</h3><ol><li>å­—èŠ‚æµï¼šä»¥å­—èŠ‚ä¸ºå•ä½è¿›è¡Œæ“ä½œï¼Œä¸»è¦å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œå¦‚å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ã€‚å­—èŠ‚æµçš„æŠ½è±¡ç±»æ˜¯InputStreamå’ŒOutputStream</li><li>å­—ç¬¦æµï¼šä»¥å­—ç¬¦ä¸ºå•ä½ä¸»è¦å¤„ç†æ–‡æœ¬æ•°æ®ï¼Œå¦‚æ–‡æœ¬æ–‡ä»¶ã€å­—ç¬¦æµçš„æŠ½è±¡ç±»æ˜¯Readerå’ŒWriter</li></ol><p>å­—èŠ‚æµå¯ä»¥å¤„ç†ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œè€Œå­—ç¬¦æµåªèƒ½å¤„ç†æ–‡æœ¬æ•°æ®ã€‚</p><p>å½“éœ€è¦è¯»å–æˆ–å†™å…¥å›¾ç‰‡ç­‰äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œåº”è¯¥ä½¿ç”¨å­—èŠ‚æµï¼Œå³InputStreamå’ŒOutputStream</p>]]></content>
      
      
      <categories>
          
          <category> é¢è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> é¢è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Zookeeperçš„åŸºæœ¬ä½¿ç”¨</title>
      <link href="/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Zookeeper%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/"/>
      <url>/2023/02/27/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Zookeeper%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h1><h3 id="1-æ¦‚å¿µ"><a href="#1-æ¦‚å¿µ" class="headerlink" title="1.æ¦‚å¿µ"></a>1.æ¦‚å¿µ</h3><ul><li><p>Zookeeper æ˜¯ Apache Hadoop é¡¹ç›®ä¸‹çš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ªæ ‘å½¢ç›®å½•æœåŠ¡ã€‚</p></li><li><p>æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„å¼€æºçš„åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„åè°ƒæœåŠ¡</p></li><li>æä¾›çš„åŠŸèƒ½æœ‰<ul><li>é…ç½®ç®¡ç†</li><li>åˆ†å¸ƒå¼é”</li><li>é›†ç¾¤ç®¡ç†</li></ul></li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230101193326282.png" alt="image-20230101193326282"></p><p>ä»–ç±»ä¼¼ä¸€ä¸ªé…ç½®ä¸­å¿ƒæ¥ç®¡ç†å„ä¸ªå®¢æˆ·ç«¯ä¿è¯æ•°æ®çš„ç»Ÿä¸€æ€§ï¼šå³è®¿é—®ä¸åŒçš„æœåŠ¡å™¨å¾—åˆ°ç›¸åŒçš„æ•°æ®ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230101193352872.png" alt="image-20230101193352872"></p><h1 id="äºŒã€zookeeper-æ•°æ®æ¨¡å‹"><a href="#äºŒã€zookeeper-æ•°æ®æ¨¡å‹" class="headerlink" title="äºŒã€zookeeper æ•°æ®æ¨¡å‹"></a>äºŒã€zookeeper æ•°æ®æ¨¡å‹</h1><p>zookeeperæ˜¯ä¸€ä¸ªå±æ€§ç›®å½•æœåŠ¡ã€å…¶æ•°æ®æ¨¡å‹å’ŒUnixçš„æ–‡ä»¶ç³»ç»Ÿç›¸ç±»ä¼¼ï¼Œæ‹¥æœ‰ä¸€ä¸ªå±‚æ¬¡åŒ–çš„ç»“æ„ã€‚å®ƒç±»ä¼¼äºä¸€ä¸ªæ ‘å½¢çš„ç»“æœå¦‚å›¾ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230101193833720.png" alt="image-20230101193833720"></p><p>è¿™é‡Œçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½è¢«ç§°ä¸ºZNodeæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šä¿å­˜è‡ªå·±çš„æ•°æ®å’ŒèŠ‚ç‚¹çš„ä¿¡æ¯ã€‚</p><p>èŠ‚ç‚¹å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„å­èŠ‚ç‚¹ï¼ŒåŒæ—¶é¡µå…è®¸å°‘é‡çš„æ•°æ®å­˜å‚¨åœ¨è¯¥èŠ‚ç‚¹ä¹‹ä¸‹ï¼š</p><p>èŠ‚ç‚¹å¯ä»¥åˆ†ä¸ºå››å¤§ç±»ï¼š</p><ul><li>PERSISTENT æŒä¹…åŒ–èŠ‚ç‚¹</li><li>EPHEMERAL ä¸´æ—¶èŠ‚ç‚¹ -e</li><li>PERSISTENT_SEQUENTIAL æŒä¹…åŒ–é¡ºåºèŠ‚ç‚¹: -s</li><li>EPHEMERAL_SEQUENTIAL ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼š-es</li></ul><h3 id="zookeeperæœåŠ¡ç«¯å¸¸ç”¨çš„å‘½ä»¤"><a href="#zookeeperæœåŠ¡ç«¯å¸¸ç”¨çš„å‘½ä»¤" class="headerlink" title="zookeeperæœåŠ¡ç«¯å¸¸ç”¨çš„å‘½ä»¤"></a>zookeeperæœåŠ¡ç«¯å¸¸ç”¨çš„å‘½ä»¤</h3><ul><li>å¯åŠ¨æœåŠ¡zkServer.sh start</li><li>æŸ¥çœ‹æœåŠ¡zkServer.sh status</li><li>åœæ­¢æœåŠ¡zkServer.sh stop</li><li>é‡å¯æœåŠ¡zkServer.sh restart</li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20230101194716844.png" alt="image-20230101194716844"></p><ul><li><p>é“¾æ¥æœåŠ¡å™¨ç«¯ zkCli.sh -server ip:port</p></li><li><p>æ–­å¼€é“¾æ¥ quit</p></li><li><p>è®¾ç½®èŠ‚ç‚¹çš„å€¼ set /èŠ‚ç‚¹path value</p></li><li><p>åˆ é™¤å•ä¸ªèŠ‚ç‚¹ delete /èŠ‚ç‚¹path  åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹: create -e /èŠ‚ç‚¹path  åˆ›å»ºé¡ºåºèŠ‚ç‚¹ create -s /èŠ‚ç‚¹path value</p></li><li><p>åˆ›å»ºèŠ‚ç‚¹ create /èŠ‚ç‚¹path value</p></li><li><p>è·å–èŠ‚ç‚¹çš„å€¼ get /èŠ‚ç‚¹path</p></li><li><p>æŸ¥è¯¢èŠ‚ç‚¹çš„è¯¦ç»†ä¿¡æ¯ ls -s /èŠ‚ç‚¹pathå®ƒæ‹¥æœ‰çš„å†…å®¹æœ‰</p><figure class="highlight tcl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs tcl">czxidï¼šèŠ‚ç‚¹è¢«åˆ›å»ºçš„äº‹åŠ¡ID <br>czxidï¼šèŠ‚ç‚¹è¢«åˆ›å»ºçš„äº‹åŠ¡ID <br>mzxid: æœ€åä¸€æ¬¡è¢«æ›´æ–°çš„äº‹åŠ¡ID <br>mtime: ä¿®æ”¹æ—¶é—´ <br>pzxidï¼šå­èŠ‚ç‚¹åˆ—è¡¨æœ€åä¸€æ¬¡è¢«æ›´æ–°çš„äº‹åŠ¡ID<br>cversionï¼šå­èŠ‚ç‚¹çš„ç‰ˆæœ¬å· <br>dataversionï¼šæ•°æ®ç‰ˆæœ¬å· <br>aclversionï¼šæƒé™ç‰ˆæœ¬å· <br>ephemeralOwnerï¼šç”¨äºä¸´æ—¶èŠ‚ç‚¹ï¼Œä»£è¡¨ä¸´æ—¶èŠ‚ç‚¹çš„äº‹åŠ¡IDï¼Œå¦‚æœä¸ºæŒä¹…èŠ‚ç‚¹åˆ™ä¸º<span class="hljs-number">0</span> <br>dataLengthï¼šèŠ‚ç‚¹å­˜å‚¨çš„æ•°æ®çš„é•¿åº¦ <br>numChildrenï¼šå½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ªæ•° <br></code></pre></td></tr></tbody></table></figure><h1 id="ä¸‰ã€Zookeeper-JavaAPIæ“ä½œ"><a href="#ä¸‰ã€Zookeeper-JavaAPIæ“ä½œ" class="headerlink" title="ä¸‰ã€Zookeeper JavaAPIæ“ä½œ"></a>ä¸‰ã€Zookeeper JavaAPIæ“ä½œ</h1><p>Curatorä»‹ç»ï¼š</p><p>Curatoræ˜¯Apache ZooKeeperçš„Javaå®¢æˆ·ç«¯åº“</p><p>å¸¸è§çš„ZooKeeper javaAPI</p><ul><li><p>åŸç”ŸJava API ã€ZkClientã€Curator</p></li><li><p>åŸç”ŸzookeeperAPIçš„ä¸è¶³ï¼š</p></li><li><ul><li>è¿æ¥å¯¹è±¡å¼‚æ­¥åˆ›å»ºï¼Œéœ€è¦å¼€å‘äººå‘˜è‡ªè¡Œç¼–ç ç­‰å¾…</li><li>è¿æ¥æ²¡æœ‰è‡ªåŠ¨é‡è¿è¶…æ—¶æœºåˆ¶</li><li>watcherä¸€æ¬¡æ³¨å†Œç”Ÿæ•ˆä¸€æ¬¡</li><li>ä¸æ”¯æŒé€’å½’åˆ›å»ºæ ‘å½¢èŠ‚ç‚¹</li></ul></li></ul></li><li><p>curatorç‰¹ç‚¹ï¼š</p></li><li><ul><li>è§£å†³sessionä¼šè¯è¶…æ—¶é‡è¿</li><li>watcheråå¤æ³¨å†Œ</li><li>ç®€åŒ–å¼€å‘api</li><li>éµå¾ªFluenté£æ ¼çš„API</li><li>æä¾›äº†åˆ†å¸ƒå¼é”æœåŠ¡ã€å…±äº«è®¡æ•°å™¨ã€ç¼“å­˜æœºåˆ¶ç­‰æœºåˆ¶</li></ul></li></ul><p>é¦–å…ˆå¯¼å…¥Mavenä¾èµ–:</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.curator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>curator-framework<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.6.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>zookeeper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.10<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.curator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>curator-recipes<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.6.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>å®ƒçš„å¸¸ç”¨æ“ä½œæœ‰:</p><ul><li>å»ºç«‹è¿æ¥</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CuratorConnection</span> {<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>                <span class="hljs-comment">// åˆ›å»ºè¿æ¥å¯¹è±¡</span><br>                <span class="hljs-type">CuratorFramework</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> CuratorFrameworkFactory<br>                                .builder()<br>                                <span class="hljs-comment">// IPåœ°å€ç«¯å£å·</span><br>                                .connectString(<span class="hljs-string">"39.98.67.88:2181,39.98.67.88:2182,39.98.67.88:2183"</span>)<br>                                <span class="hljs-comment">// ä¼šè¯è¶…æ—¶æ—¶é—´</span><br>                                .sessionTimeoutMs(<span class="hljs-number">5000</span>)<br>                                <span class="hljs-comment">// é‡è¿æœºåˆ¶</span><br>                                <span class="hljs-comment">// new RetryOneTime(3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œåªé‡è¿ä¸€æ¬¡</span><br>                                <span class="hljs-comment">// new RetryNTimes(3, 3000)ï¼šæ¯æ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œå…±é‡è¿3æ¬¡</span><br>                                <span class="hljs-comment">// new RetryUntilElapsed(10000, 3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œ10ç§’ååœæ­¢é‡è¿</span><br>                                <span class="hljs-comment">// new ExponentialBackoffRetry(1000, 3)ï¼šé‡è¿3æ¬¡ï¼Œæ¯æ¬¡é‡è¿çš„é—´éš”ä¼šè¶Šæ¥è¶Šé•¿</span><br>                                .retryPolicy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ExponentialBackoffRetry</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">3</span>))<br>                                <span class="hljs-comment">// å‘½åç©ºé—´</span><br>                                .namespace(<span class="hljs-string">"create"</span>)<br>                                <span class="hljs-comment">// æ„å»ºè¿æ¥å¯¹è±¡</span><br>                                .build();<br>                <span class="hljs-comment">// æ‰“å¼€è¿æ¥</span><br>                client.start();<br>                System.out.println(client.isStarted());<br>                <span class="hljs-comment">// å…³é—­è¿æ¥</span><br>                client.close();<br>        }<br>}<br><br></code></pre></td></tr></tbody></table></figure><ul><li>æ·»åŠ èŠ‚ç‚¹</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ ‡é¢˜ï¼šæ–°å¢èŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CuratorCreate</span> {<br>        CuratorFramework client;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: è·å–è¿æ¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Before</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span> {<br>                <span class="hljs-comment">// åˆ›å»ºè¿æ¥å¯¹è±¡</span><br>                client = CuratorFrameworkFactory<br>                                .builder()<br>                                <span class="hljs-comment">// IPåœ°å€ç«¯å£å·</span><br>                                .connectString(<span class="hljs-string">"39.98.67.88:2181,39.98.67.88:2182,39.98.67.88:2183"</span>)<br>                                <span class="hljs-comment">// ä¼šè¯è¶…æ—¶æ—¶é—´</span><br>                                .sessionTimeoutMs(<span class="hljs-number">5000</span>)<br>                                <span class="hljs-comment">// é‡è¿æœºåˆ¶</span><br>                                <span class="hljs-comment">// new RetryOneTime(3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œåªé‡è¿ä¸€æ¬¡</span><br>                                <span class="hljs-comment">// new RetryNTimes(3, 3000)ï¼šæ¯æ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œå…±é‡è¿3æ¬¡</span><br>                                <span class="hljs-comment">// new RetryUntilElapsed(10000, 3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œ10ç§’ååœæ­¢é‡è¿</span><br>                                <span class="hljs-comment">// new ExponentialBackoffRetry(1000, 3)ï¼šé‡è¿3æ¬¡ï¼Œæ¯æ¬¡é‡è¿çš„é—´éš”ä¼šè¶Šæ¥è¶Šé•¿</span><br>                                .retryPolicy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ExponentialBackoffRetry</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">3</span>))<br>                                <span class="hljs-comment">// å‘½åç©ºé—´</span><br>                                .namespace(<span class="hljs-string">"create"</span>)<br>                                <span class="hljs-comment">// æ„å»ºè¿æ¥å¯¹è±¡</span><br>                                .build();<br>                <span class="hljs-comment">// æ‰“å¼€è¿æ¥</span><br>                client.start();<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: æ–°å¢èŠ‚ç‚¹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">create1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> client.create()<br>                                <span class="hljs-comment">// èŠ‚ç‚¹çš„ç±»å‹</span><br>                                .withMode(CreateMode.PERSISTENT)<br>                                <span class="hljs-comment">// èŠ‚ç‚¹çš„æƒé™åˆ—è¡¨ world:anyone:cdrwa</span><br>                                .withACL(ZooDefs.Ids.OPEN_ACL_UNSAFE)<br>                                <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šèŠ‚ç‚¹çš„æ•°æ®</span><br>                                <span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°ï¼šèŠ‚ç‚¹çš„æ•°æ®</span><br>                                .forPath(<span class="hljs-string">"/node1"</span>, <span class="hljs-string">"node1"</span>.getBytes());<br>                System.out.println(path);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: åˆ›å»ºèŠ‚ç‚¹å¹¶è‡ªå®šä¹‰æƒé™åˆ—è¡¨</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">create2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                <span class="hljs-comment">// æƒé™åˆ—è¡¨</span><br>                List&lt;ACL&gt; acls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>                <span class="hljs-comment">// æˆæƒæ¨¡å¼å’Œæˆæƒå¯¹è±¡</span><br>                <span class="hljs-type">Id</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Id</span>(<span class="hljs-string">"ip"</span>, <span class="hljs-string">"39.98.67.88"</span>);<br>                acls.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ACL</span>(ZooDefs.Perms.ALL, id));<br>                <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> client.create()<br>                                .withMode(CreateMode.PERSISTENT)<br>                                .withACL(acls)<br>                                .forPath(<span class="hljs-string">"/node2"</span>, <span class="hljs-string">"node2"</span>.getBytes());<br>                System.out.println(path);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: é€’å½’åˆ›å»ºèŠ‚ç‚¹æ ‘</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">create3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> client.create()<br>                                <span class="hljs-comment">// æ”¯æŒé€’å½’èŠ‚ç‚¹çš„åˆ›å»º</span><br>                                .creatingParentsIfNeeded()<br>                                .withMode(CreateMode.PERSISTENT)<br>                                .withACL(ZooDefs.Ids.OPEN_ACL_UNSAFE)<br>                                .forPath(<span class="hljs-string">"/node3/node31"</span>, <span class="hljs-string">"node31"</span>.getBytes());<br>                System.out.println(path);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: å¼‚æ­¥åˆ›å»ºèŠ‚ç‚¹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">create4</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                client.create()<br>                                .creatingParentsIfNeeded()<br>                                .withMode(CreateMode.PERSISTENT)<br>                                .withACL(ZooDefs.Ids.OPEN_ACL_UNSAFE)<br>                                .inBackground(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BackgroundCallback</span>() {<br>                                        <span class="hljs-meta">@Override</span><br>                                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processResult</span><span class="hljs-params">(CuratorFramework curatorFramework, CuratorEvent curatorEvent)</span> <span class="hljs-keyword">throws</span> Exception {<br>                                                <span class="hljs-comment">// èŠ‚ç‚¹çš„è·¯å¾„</span><br>                                                System.out.println(curatorEvent.getPath());<br>                                                <span class="hljs-comment">// äº‹ä»¶ç±»å‹</span><br>                                                System.out.println(curatorEvent.getType());<br>                                        }<br>                                })<br>                                .forPath(<span class="hljs-string">"/node4"</span>, <span class="hljs-string">"node4"</span>.getBytes());<br>                TimeUnit.SECONDS.sleep(<span class="hljs-number">1</span>);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: å…³é—­è¿æ¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@After</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span> {<br>                <span class="hljs-keyword">if</span> (client != <span class="hljs-literal">null</span>) {<br>                        client.close();<br>                }<br>        }<br>}<br></code></pre></td></tr></tbody></table></figure><ul><li>åˆ é™¤èŠ‚ç‚¹</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CuratorDelete</span> {<br>        CuratorFramework client;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: è·å–è¿æ¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Before</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span> {<br>                <span class="hljs-comment">// åˆ›å»ºè¿æ¥å¯¹è±¡</span><br>                client = CuratorFrameworkFactory<br>                                .builder()<br>                                <span class="hljs-comment">// IPåœ°å€ç«¯å£å·</span><br>                                .connectString(<span class="hljs-string">"39.98.67.88:2181,39.98.67.88:2182,39.98.67.88:2183"</span>)<br>                                <span class="hljs-comment">// ä¼šè¯è¶…æ—¶æ—¶é—´</span><br>                                .sessionTimeoutMs(<span class="hljs-number">5000</span>)<br>                                <span class="hljs-comment">// é‡è¿æœºåˆ¶</span><br>                                <span class="hljs-comment">// new RetryOneTime(3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œåªé‡è¿ä¸€æ¬¡</span><br>                                <span class="hljs-comment">// new RetryNTimes(3, 3000)ï¼šæ¯æ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œå…±é‡è¿3æ¬¡</span><br>                                <span class="hljs-comment">// new RetryUntilElapsed(10000, 3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œ10ç§’ååœæ­¢é‡è¿</span><br>                                <span class="hljs-comment">// new ExponentialBackoffRetry(1000, 3)ï¼šé‡è¿3æ¬¡ï¼Œæ¯æ¬¡é‡è¿çš„é—´éš”ä¼šè¶Šæ¥è¶Šé•¿</span><br>                                .retryPolicy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ExponentialBackoffRetry</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">3</span>))<br>                                <span class="hljs-comment">// å‘½åç©ºé—´</span><br>                                .namespace(<span class="hljs-string">"delete"</span>)<br>                                <span class="hljs-comment">// æ„å»ºè¿æ¥å¯¹è±¡</span><br>                                .build();<br>                <span class="hljs-comment">// æ‰“å¼€è¿æ¥</span><br>                client.start();<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: åˆ é™¤èŠ‚ç‚¹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delete1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                client.delete()<br>                                <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šèŠ‚ç‚¹è·¯å¾„</span><br>                                .forPath(<span class="hljs-string">"/node1"</span>);<br>                System.out.println(<span class="hljs-string">"å·²åˆ é™¤ï¼"</span>);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: åˆ é™¤èŠ‚ç‚¹ï¼Œå¹¶è¿›è¡Œç‰ˆæœ¬æ£€æµ‹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delete2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                client.setData()<br>                                <span class="hljs-comment">// ç‰ˆæœ¬å· -1 æ ‡è¯†å¿½ç•¥ç‰ˆæœ¬å·</span><br>                                .withVersion(<span class="hljs-number">0</span>)<br>                                .forPath(<span class="hljs-string">"/node1"</span>);<br>                System.out.println(<span class="hljs-string">"å·²åˆ é™¤"</span>);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: åˆ é™¤åŒ…å«å­èŠ‚ç‚¹çš„èŠ‚ç‚¹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delete3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                client.delete()<br>                                <span class="hljs-comment">// å¦‚æœ‰å­èŠ‚ç‚¹ åˆ™ä¸€å¹¶åˆ é™¤</span><br>                                .deletingChildrenIfNeeded()<br>                                .withVersion(-<span class="hljs-number">1</span>)<br>                                .forPath(<span class="hljs-string">"/node1"</span>);<br>                System.out.println(<span class="hljs-string">"å·²åˆ é™¤"</span>);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: å¼‚æ­¥åˆ é™¤èŠ‚ç‚¹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delete4</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                client.delete()<br>                                .deletingChildrenIfNeeded()<br>                                .withVersion(<span class="hljs-number">0</span>)<br>                                .inBackground(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BackgroundCallback</span>() {<br>                                        <span class="hljs-meta">@Override</span><br>                                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processResult</span><span class="hljs-params">(CuratorFramework curatorFramework, CuratorEvent curatorEvent)</span> <span class="hljs-keyword">throws</span> Exception {<br>                                                System.out.println(curatorEvent.getPath());<br>                                                System.out.println(curatorEvent.getType());<br>                                        }<br>                                })<br>                                .forPath(<span class="hljs-string">"/node1"</span>);<br>                TimeUnit.SECONDS.sleep(<span class="hljs-number">1</span>);<br>                System.out.println(<span class="hljs-string">"å·²åˆ é™¤"</span>);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: å…³é—­è¿æ¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@After</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span> {<br>                <span class="hljs-keyword">if</span> (client != <span class="hljs-literal">null</span>) {<br>                        client.close();<br>                }<br>        }<br>}<br><br></code></pre></td></tr></tbody></table></figure><ul><li>ä¿®æ”¹èŠ‚ç‚¹</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CuratorSet</span> {<br>        CuratorFramework client;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: è·å–è¿æ¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Before</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span> {<br>                <span class="hljs-comment">// åˆ›å»ºè¿æ¥å¯¹è±¡</span><br>                client = CuratorFrameworkFactory<br>                                .builder()<br>                                <span class="hljs-comment">// IPåœ°å€ç«¯å£å·</span><br>                                .connectString(<span class="hljs-string">"39.98.67.88:2181,39.98.67.88:2182,39.98.67.88:2183"</span>)<br>                                <span class="hljs-comment">// ä¼šè¯è¶…æ—¶æ—¶é—´</span><br>                                .sessionTimeoutMs(<span class="hljs-number">5000</span>)<br>                                <span class="hljs-comment">// é‡è¿æœºåˆ¶</span><br>                                <span class="hljs-comment">// new RetryOneTime(3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œåªé‡è¿ä¸€æ¬¡</span><br>                                <span class="hljs-comment">// new RetryNTimes(3, 3000)ï¼šæ¯æ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œå…±é‡è¿3æ¬¡</span><br>                                <span class="hljs-comment">// new RetryUntilElapsed(10000, 3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œ10ç§’ååœæ­¢é‡è¿</span><br>                                <span class="hljs-comment">// new ExponentialBackoffRetry(1000, 3)ï¼šé‡è¿3æ¬¡ï¼Œæ¯æ¬¡é‡è¿çš„é—´éš”ä¼šè¶Šæ¥è¶Šé•¿</span><br>                                .retryPolicy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ExponentialBackoffRetry</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">3</span>))<br>                                <span class="hljs-comment">// å‘½åç©ºé—´</span><br>                                .namespace(<span class="hljs-string">"set"</span>)<br>                                <span class="hljs-comment">// æ„å»ºè¿æ¥å¯¹è±¡</span><br>                                .build();<br>                <span class="hljs-comment">// æ‰“å¼€è¿æ¥</span><br>                client.start();<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: æ›´æ–°èŠ‚ç‚¹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">set1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                <span class="hljs-type">Stat</span> <span class="hljs-variable">stat</span> <span class="hljs-operator">=</span> client.setData()<br>                                <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šèŠ‚ç‚¹è·¯å¾„</span><br>                                <span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°ï¼šèŠ‚ç‚¹çš„æ•°æ®</span><br>                                .forPath(<span class="hljs-string">"/node1"</span>, <span class="hljs-string">"hello"</span>.getBytes());<br>                System.out.println(stat);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: æ›´æ–°èŠ‚ç‚¹ï¼Œå¹¶è¿›è¡Œç‰ˆæœ¬æ£€æµ‹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">set2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                <span class="hljs-type">Stat</span> <span class="hljs-variable">stat</span> <span class="hljs-operator">=</span> client.setData()<br>                                <span class="hljs-comment">// ç‰ˆæœ¬å· -1 æ ‡è¯†å¿½ç•¥ç‰ˆæœ¬å·</span><br>                                .withVersion(<span class="hljs-number">1</span>)<br>                                .forPath(<span class="hljs-string">"/node1"</span>, <span class="hljs-string">"world"</span>.getBytes());<br>                System.out.println(stat);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: å¼‚æ­¥ä¿®æ”¹èŠ‚ç‚¹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">set3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                client.setData()<br>                                .withVersion(<span class="hljs-number">2</span>)<br>                                .inBackground(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BackgroundCallback</span>() {<br>                                        <span class="hljs-meta">@Override</span><br>                                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processResult</span><span class="hljs-params">(CuratorFramework curatorFramework, CuratorEvent curatorEvent)</span> <span class="hljs-keyword">throws</span> Exception {<br>                                                System.out.println(curatorEvent.getPath());<br>                                                System.out.println(curatorEvent.getType());<br>                                        }<br>                                })<br>                                .forPath(<span class="hljs-string">"/node1"</span>, <span class="hljs-string">"å“ˆå“ˆå“ˆ"</span>.getBytes());<br>                TimeUnit.SECONDS.sleep(<span class="hljs-number">1</span>);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: å…³é—­è¿æ¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@After</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span> {<br>                <span class="hljs-keyword">if</span> (client != <span class="hljs-literal">null</span>) {<br>                        client.close();<br>                }<br>        }<br>}<br><br></code></pre></td></tr></tbody></table></figure><ul><li>æŸ¥è¯¢èŠ‚ç‚¹</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ ‡é¢˜ï¼šæŸ¥è¯¢èŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CuratorGet</span> {<br>        CuratorFramework client;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: è·å–è¿æ¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Before</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span> {<br>                <span class="hljs-comment">// åˆ›å»ºè¿æ¥å¯¹è±¡</span><br>                client = CuratorFrameworkFactory<br>                                .builder()<br>                                <span class="hljs-comment">// IPåœ°å€ç«¯å£å·</span><br>                                .connectString(<span class="hljs-string">"39.98.67.88:2181,39.98.67.88:2182,39.98.67.88:2183"</span>)<br>                                <span class="hljs-comment">// ä¼šè¯è¶…æ—¶æ—¶é—´</span><br>                                .sessionTimeoutMs(<span class="hljs-number">5000</span>)<br>                                <span class="hljs-comment">// é‡è¿æœºåˆ¶</span><br>                                <span class="hljs-comment">// new RetryOneTime(3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œåªé‡è¿ä¸€æ¬¡</span><br>                                <span class="hljs-comment">// new RetryNTimes(3, 3000)ï¼šæ¯æ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œå…±é‡è¿3æ¬¡</span><br>                                <span class="hljs-comment">// new RetryUntilElapsed(10000, 3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œ10ç§’ååœæ­¢é‡è¿</span><br>                                <span class="hljs-comment">// new ExponentialBackoffRetry(1000, 3)ï¼šé‡è¿3æ¬¡ï¼Œæ¯æ¬¡é‡è¿çš„é—´éš”ä¼šè¶Šæ¥è¶Šé•¿</span><br>                                .retryPolicy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ExponentialBackoffRetry</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">3</span>))<br>                                <span class="hljs-comment">// å‘½åç©ºé—´</span><br>                                .namespace(<span class="hljs-string">"get"</span>)<br>                                <span class="hljs-comment">// æ„å»ºè¿æ¥å¯¹è±¡</span><br>                                .build();<br>                <span class="hljs-comment">// æ‰“å¼€è¿æ¥</span><br>                client.start();<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: æŸ¥è¯¢èŠ‚ç‚¹å†…å®¹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">get1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                <span class="hljs-type">byte</span>[] bytes = client.getData()<br>                                <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šèŠ‚ç‚¹è·¯å¾„</span><br>                                .forPath(<span class="hljs-string">"/node1"</span>);<br>                System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(bytes));<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: æŸ¥è¯¢èŠ‚ç‚¹å±æ€§</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">get2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                <span class="hljs-type">Stat</span> <span class="hljs-variable">stat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stat</span>();<br>                client.getData()<br>                                <span class="hljs-comment">// è¯»å–å±æ€§</span><br>                                .storingStatIn(stat)<br>                                .forPath(<span class="hljs-string">"/node1"</span>);<br>                System.out.println(stat);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: å¼‚æ­¥æŸ¥è¯¢èŠ‚ç‚¹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">get3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                client.getData()<br>                                .inBackground(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BackgroundCallback</span>() {<br>                                        <span class="hljs-meta">@Override</span><br>                                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processResult</span><span class="hljs-params">(CuratorFramework curatorFramework, CuratorEvent curatorEvent)</span> <span class="hljs-keyword">throws</span> Exception {<br>                                                System.out.println(curatorEvent.getPath());<br>                                                System.out.println(curatorEvent.getType());<br>                                                System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(curatorEvent.getData()));<br>                                        }<br>                                })<br>                                .forPath(<span class="hljs-string">"/node1"</span>);<br>                TimeUnit.SECONDS.sleep(<span class="hljs-number">1</span>);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: å…³é—­è¿æ¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@After</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span> {<br>                <span class="hljs-keyword">if</span> (client != <span class="hljs-literal">null</span>) {<br>                        client.close();<br>                }<br>        }<br>}<br><br></code></pre></td></tr></tbody></table></figure><ul><li>æŸ¥è¯¢å­èŠ‚ç‚¹</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ ‡é¢˜ï¼šæŸ¥è¯¢å­èŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CuratorGetChildren</span> {<br>        CuratorFramework client;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: è·å–è¿æ¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Before</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span> {<br>                <span class="hljs-comment">// åˆ›å»ºè¿æ¥å¯¹è±¡</span><br>                client = CuratorFrameworkFactory<br>                                .builder()<br>                                <span class="hljs-comment">// IPåœ°å€ç«¯å£å·</span><br>                                .connectString(<span class="hljs-string">"39.98.67.88:2181,39.98.67.88:2182,39.98.67.88:2183"</span>)<br>                                <span class="hljs-comment">// ä¼šè¯è¶…æ—¶æ—¶é—´</span><br>                                .sessionTimeoutMs(<span class="hljs-number">5000</span>)<br>                                <span class="hljs-comment">// é‡è¿æœºåˆ¶</span><br>                                <span class="hljs-comment">// new RetryOneTime(3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œåªé‡è¿ä¸€æ¬¡</span><br>                                <span class="hljs-comment">// new RetryNTimes(3, 3000)ï¼šæ¯æ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œå…±é‡è¿3æ¬¡</span><br>                                <span class="hljs-comment">// new RetryUntilElapsed(10000, 3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œ10ç§’ååœæ­¢é‡è¿</span><br>                                <span class="hljs-comment">// new ExponentialBackoffRetry(1000, 3)ï¼šé‡è¿3æ¬¡ï¼Œæ¯æ¬¡é‡è¿çš„é—´éš”ä¼šè¶Šæ¥è¶Šé•¿</span><br>                                .retryPolicy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ExponentialBackoffRetry</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">3</span>))<br>                                <span class="hljs-comment">// æ„å»ºè¿æ¥å¯¹è±¡</span><br>                                .build();<br>                <span class="hljs-comment">// æ‰“å¼€è¿æ¥</span><br>                client.start();<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: æŸ¥è¯¢å­èŠ‚ç‚¹å†…å®¹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getChildren1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                List&lt;String&gt; childrens = client.getChildren()<br>                                <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šèŠ‚ç‚¹è·¯å¾„</span><br>                                .forPath(<span class="hljs-string">"/get"</span>);<br>                childrens.forEach(System.out::println);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: å¼‚æ­¥æŸ¥è¯¢å­èŠ‚ç‚¹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getChildren2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                client.getChildren()<br>                                .inBackground(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BackgroundCallback</span>() {<br>                                        <span class="hljs-meta">@Override</span><br>                                        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processResult</span><span class="hljs-params">(CuratorFramework curatorFramework, CuratorEvent curatorEvent)</span> <span class="hljs-keyword">throws</span> Exception {<br>                                                curatorEvent.getChildren().forEach(System.out::println);<br>                                        }<br>                                })<br>                                .forPath(<span class="hljs-string">"/get"</span>);<br>                TimeUnit.SECONDS.sleep(<span class="hljs-number">3</span>);<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: å…³é—­è¿æ¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@After</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span> {<br>                <span class="hljs-keyword">if</span> (client != <span class="hljs-literal">null</span>) {<br>                        client.close();<br>                }<br>        }<br>}<br><br></code></pre></td></tr></tbody></table></figure><ul><li>æ£€æŸ¥èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">      * @åŠŸèƒ½: åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨</span><br><span class="hljs-comment">      */</span><br>     <span class="hljs-meta">@Test</span><br>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">exists1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>             <span class="hljs-type">Stat</span> <span class="hljs-variable">stat</span> <span class="hljs-operator">=</span> client.checkExists()<br>                             <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼šèŠ‚ç‚¹è·¯å¾„</span><br>                             .forPath(<span class="hljs-string">"/node2"</span>);<br>             System.out.println(stat);<br>     }<br><br><br>     <span class="hljs-comment">/**</span><br><span class="hljs-comment">      * @åŠŸèƒ½: å¼‚æ­¥åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨</span><br><span class="hljs-comment">      */</span><br>     <span class="hljs-meta">@Test</span><br>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">exists2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>             client.checkExists()<br>                             .inBackground(<span class="hljs-keyword">new</span> <span class="hljs-title class_">BackgroundCallback</span>() {<br>                                     <span class="hljs-meta">@Override</span><br>                                     <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processResult</span><span class="hljs-params">(CuratorFramework curatorFramework, CuratorEvent curatorEvent)</span> <span class="hljs-keyword">throws</span> Exception {<br>                                             System.out.println(curatorEvent.getPath());<br>                                             System.out.println(curatorEvent.getType());<br>                                             System.out.println(curatorEvent.getStat());<br>                                     }<br>                             })<br>                             .forPath(<span class="hljs-string">"/node1"</span>);<br>             TimeUnit.SECONDS.sleep(<span class="hljs-number">3</span>);<br>     }<br><br><br></code></pre></td></tr></tbody></table></figure><ul><li>Watchäº‹ä»¶ç›‘å¬</li></ul><p><strong>curatoræä¾›äº†ä¸¤ç§Watcher(Cache)æ¥ç›‘å¬ç»“ç‚¹çš„å˜åŒ–:</strong></p><ul><li><p>NodeCacheï¼š</p></li><li><ul><li>åªæ˜¯ç›‘å¬æŸä¸€ä¸ªç‰¹å®šçš„èŠ‚ç‚¹ï¼Œç›‘å¬èŠ‚ç‚¹çš„æ–°å¢å’Œä¿®æ”¹ã€‚</li></ul></li><li><p>PathChildrenCacheï¼š</p></li><li><ul><li>ç›‘æ§ä¸€ä¸ªZNodeçš„å­èŠ‚ç‚¹. å½“ä¸€ä¸ªå­èŠ‚ç‚¹å¢åŠ ã€æ›´æ–°ã€åˆ é™¤æ—¶ï¼Œ Path Cacheä¼šæ”¹å˜å®ƒçš„çŠ¶æ€ï¼Œ ä¼šåŒ…å«æœ€æ–°çš„å­èŠ‚ç‚¹ï¼Œ å­èŠ‚ç‚¹çš„æ•°æ®å’ŒçŠ¶æ€ã€‚</li></ul></li><li><p>```java</p><p>/**</p><ul><li><p>æ ‡é¢˜ï¼šäº‹ä»¶ç›‘å¬æœºåˆ¶<br>*/<br>public class CuratorWatcher {</p><pre><code> CuratorFramework client; /**  * @åŠŸèƒ½: è·å–è¿æ¥  */ @Before public void before() {         // åˆ›å»ºè¿æ¥å¯¹è±¡         client = CuratorFrameworkFactory                         .builder()                         // IPåœ°å€ç«¯å£å·                         .connectString("39.98.67.88:2181,39.98.67.88:2182,39.98.67.88:2183")                         // ä¼šè¯è¶…æ—¶æ—¶é—´                         .sessionTimeoutMs(5000)                         // é‡è¿æœºåˆ¶                         // new RetryOneTime(3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œåªé‡è¿ä¸€æ¬¡                         // new RetryNTimes(3, 3000)ï¼šæ¯æ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œå…±é‡è¿3æ¬¡                         // new RetryUntilElapsed(10000, 3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œ10ç§’ååœæ­¢é‡è¿                         // new ExponentialBackoffRetry(1000, 3)ï¼šé‡è¿3æ¬¡ï¼Œæ¯æ¬¡é‡è¿çš„é—´éš”ä¼šè¶Šæ¥è¶Šé•¿                         .retryPolicy(new ExponentialBackoffRetry(1000, 3))                         // æ„å»ºè¿æ¥å¯¹è±¡                         .build();         // æ‰“å¼€è¿æ¥         client.start(); } /**  * @åŠŸèƒ½: ç›‘è§†æŸä¸ªèŠ‚ç‚¹çš„æ•°æ®å˜åŒ–  */ @Test public void watcher1() throws Exception {         // å‚æ•°1ï¼šè¿æ¥å¯¹è±¡         // å‚æ•°2ï¼šç›‘è§†çš„èŠ‚ç‚¹è·¯å¾„         final NodeCache nodeCache = new NodeCache(client, "/watcher1");         // å¯åŠ¨è§£é‡Šå™¨å¯¹è±¡         nodeCache.start();         nodeCache.getListenable().addListener(new NodeCacheListener() {                 // èŠ‚ç‚¹å˜åŒ–æ—¶å›è°ƒçš„æ–¹æ³•                 @Override                 public void nodeChanged() throws Exception {                         System.out.println(nodeCache.getCurrentData().getPath());                         System.out.println(new String(nodeCache.getCurrentData().getData()));                         System.out.println(nodeCache.getCurrentData().getStat());                 }         });         TimeUnit.SECONDS.sleep(30);         // å…³é—­ç›‘è§†å™¨å¯¹è±¡         nodeCache.close(); } /**  * @åŠŸèƒ½: ç›‘è§†æŸå­èŠ‚ç‚¹çš„æ•°æ®å˜åŒ–  */ @Test public void watcher2() throws Exception {         // å‚æ•°1ï¼šè¿æ¥å¯¹è±¡         // å‚æ•°2ï¼šç›‘è§†çš„èŠ‚ç‚¹è·¯å¾„         // å‚æ•°3ï¼šäº‹ä»¶ä¸­æ˜¯å¦å¯ä»¥è·å–èŠ‚ç‚¹çš„æ•°æ®         final PathChildrenCache pathChildrenCache = new PathChildrenCache(client, "/watcher1", true);         // å¯åŠ¨è§£é‡Šå™¨å¯¹è±¡         pathChildrenCache.start();         pathChildrenCache.getListenable().addListener(new PathChildrenCacheListener() {                 // å½“å­èŠ‚ç‚¹æ–¹æ³•å˜åŒ–æ—¶å›è°ƒçš„æ–¹æ³•                 @Override                 public void childEvent(CuratorFramework curatorFramework, PathChildrenCacheEvent pathChildrenCacheEvent) throws Exception {                         // èŠ‚ç‚¹çš„äº‹ä»¶ç±»å‹                         System.out.println(pathChildrenCacheEvent.getType());                         // èŠ‚ç‚¹çš„è·¯å¾„                         System.out.println(pathChildrenCacheEvent.getData().getPath());                         // èŠ‚ç‚¹çš„æ•°æ®                         System.out.println(new String(pathChildrenCacheEvent.getData().getData()));                 }         });         TimeUnit.SECONDS.sleep(30);         // å…³é—­ç›‘è§†å™¨å¯¹è±¡         pathChildrenCache.close(); } /**  * @åŠŸèƒ½: å…³é—­è¿æ¥  */ @After public void after() {         if (client != null) {                 client.close();         } }</code></pre><p>}</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br>- Curatoräº‹åŠ¡<br><br>```java<br>/**<br> * æ ‡é¢˜ï¼šäº‹åŠ¡<br> */<br>public class CuratorTransaction {<br>        CuratorFramework client;<br><br>        /**<br>         * @åŠŸèƒ½: è·å–è¿æ¥<br>         */<br>        @Before<br>        public void before() {<br>                // åˆ›å»ºè¿æ¥å¯¹è±¡<br>                client = CuratorFrameworkFactory<br>                                .builder()<br>                                // IPåœ°å€ç«¯å£å·<br>                                .connectString("39.98.67.88:2181,39.98.67.88:2182,39.98.67.88:2183")<br>                                // ä¼šè¯è¶…æ—¶æ—¶é—´<br>                                .sessionTimeoutMs(5000)<br>                                // é‡è¿æœºåˆ¶<br>                                // new RetryOneTime(3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œåªé‡è¿ä¸€æ¬¡<br>                                // new RetryNTimes(3, 3000)ï¼šæ¯æ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œå…±é‡è¿3æ¬¡<br>                                // new RetryUntilElapsed(10000, 3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œ10ç§’ååœæ­¢é‡è¿<br>                                // new ExponentialBackoffRetry(1000, 3)ï¼šé‡è¿3æ¬¡ï¼Œæ¯æ¬¡é‡è¿çš„é—´éš”ä¼šè¶Šæ¥è¶Šé•¿<br>                                .retryPolicy(new ExponentialBackoffRetry(1000, 3))<br>                                // å‘½åç©ºé—´<br>                                .namespace("create")<br>                                // æ„å»ºè¿æ¥å¯¹è±¡<br>                                .build();<br>                // æ‰“å¼€è¿æ¥<br>                client.start();<br>        }<br><br>        /**<br>         * @åŠŸèƒ½: äº‹åŠ¡<br>         */<br>        @Test<br>        public void transaction1() throws Exception {<br>                // å¼€å¯äº‹åŠ¡<br>                Collection&lt;CuratorTransactionResult&gt; collection = client.inTransaction()<br>                                .create()<br>                                .withMode(CreateMode.PERSISTENT)<br>                                .withACL(ZooDefs.Ids.OPEN_ACL_UNSAFE)<br>                                .forPath("/node1", "node1".getBytes())<br>                                .and()<br>                                .create().forPath("/node2", "node2".getBytes())<br>                                .and()<br>                                // æäº¤äº‹åŠ¡<br>                                .commit();<br>                System.out.println(collection);<br>        }<br><br>        /**<br>         * @åŠŸèƒ½: å…³é—­è¿æ¥<br>         */<br>        @After<br>        public void after() {<br>                if (client != null) {<br>                        client.close();<br>                }<br>        }<br>}<br><br></code></pre></td></tr></tbody></table></figure></li></ul></li></ul><ul><li>Curatoråˆ†å¸ƒå¼é”å®ç°</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ ‡é¢˜ï¼šåˆ†å¸ƒå¼é”</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CuratorLock</span> {<br>        CuratorFramework client;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: è·å–è¿æ¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Before</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span> {<br>                <span class="hljs-comment">// åˆ›å»ºè¿æ¥å¯¹è±¡</span><br>                client = CuratorFrameworkFactory<br>                                .builder()<br>                                <span class="hljs-comment">// IPåœ°å€ç«¯å£å·</span><br>                                .connectString(<span class="hljs-string">"39.98.67.88:2181,39.98.67.88:2182,39.98.67.88:2183"</span>)<br>                                <span class="hljs-comment">// ä¼šè¯è¶…æ—¶æ—¶é—´</span><br>                                .sessionTimeoutMs(<span class="hljs-number">5000</span>)<br>                                <span class="hljs-comment">// é‡è¿æœºåˆ¶</span><br>                                <span class="hljs-comment">// new RetryOneTime(3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œåªé‡è¿ä¸€æ¬¡</span><br>                                <span class="hljs-comment">// new RetryNTimes(3, 3000)ï¼šæ¯æ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œå…±é‡è¿3æ¬¡</span><br>                                <span class="hljs-comment">// new RetryUntilElapsed(10000, 3000)ï¼šæ¯ä¸‰ç§’é‡è¿ä¸€æ¬¡ï¼Œ10ç§’ååœæ­¢é‡è¿</span><br>                                <span class="hljs-comment">// new ExponentialBackoffRetry(1000, 3)ï¼šé‡è¿3æ¬¡ï¼Œæ¯æ¬¡é‡è¿çš„é—´éš”ä¼šè¶Šæ¥è¶Šé•¿</span><br>                                .retryPolicy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ExponentialBackoffRetry</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">3</span>))<br>                                <span class="hljs-comment">// æ„å»ºè¿æ¥å¯¹è±¡</span><br>                                .build();<br>                <span class="hljs-comment">// æ‰“å¼€è¿æ¥</span><br>                client.start();<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: æ’ä»–é”</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">lock1</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                <span class="hljs-comment">// å‚æ•°1ï¼šè¿æ¥å¯¹è±¡</span><br>                <span class="hljs-comment">// å‚æ•°2ï¼šèŠ‚ç‚¹è·¯å¾„</span><br>                <span class="hljs-type">InterProcessLock</span> <span class="hljs-variable">interProcessLock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InterProcessMutex</span>(client, <span class="hljs-string">"/lock1"</span>);<br>                System.out.println(<span class="hljs-string">"ç­‰å¾…è·å–é”å¯¹è±¡"</span>);<br>                <span class="hljs-comment">// è·å–é”</span><br>                interProcessLock.acquire();<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {<br>                        TimeUnit.SECONDS.sleep(<span class="hljs-number">1</span>);<br>                        System.out.println(i);<br>                }<br>                System.out.println(<span class="hljs-string">"ç­‰å¾…é‡Šæ”¾é”"</span>);<br>                <span class="hljs-comment">// é‡Šæ”¾é”</span><br>                interProcessLock.release();<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: è¯»å†™é” - è¯»é”</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">lock2</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                <span class="hljs-comment">// è¯»å†™é”</span><br>                <span class="hljs-type">InterProcessReadWriteLock</span> <span class="hljs-variable">readWriteLock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InterProcessReadWriteLock</span>(client, <span class="hljs-string">"/lock1"</span>);<br>                <span class="hljs-comment">// è·å–è¯»é”å¯¹è±¡</span><br>                <span class="hljs-type">InterProcessMutex</span> <span class="hljs-variable">interProcessMutex</span> <span class="hljs-operator">=</span> readWriteLock.readLock();<br>                System.out.println(<span class="hljs-string">"ç­‰å¾…è·å–é”å¯¹è±¡"</span>);<br>                <span class="hljs-comment">// è·å–é”</span><br>                interProcessMutex.acquire();<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {<br>                        TimeUnit.SECONDS.sleep(<span class="hljs-number">1</span>);<br>                        System.out.println(i);<br>                }<br>                System.out.println(<span class="hljs-string">"ç­‰å¾…é‡Šæ”¾é”"</span>);<br>                <span class="hljs-comment">// é‡Šæ”¾é”</span><br>                interProcessMutex.release();<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: è¯»å†™é” - å†™é”</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">lock3</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>                <span class="hljs-comment">// è¯»å†™é”</span><br>                <span class="hljs-type">InterProcessReadWriteLock</span> <span class="hljs-variable">readWriteLock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InterProcessReadWriteLock</span>(client, <span class="hljs-string">"/lock1"</span>);<br>                <span class="hljs-comment">// è·å–è¯»é”å¯¹è±¡</span><br>                <span class="hljs-type">InterProcessMutex</span> <span class="hljs-variable">interProcessMutex</span> <span class="hljs-operator">=</span> readWriteLock.writeLock();<br>                System.out.println(<span class="hljs-string">"ç­‰å¾…è·å–é”å¯¹è±¡"</span>);<br>                <span class="hljs-comment">// è·å–é”</span><br>                interProcessMutex.acquire();<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {<br>                        TimeUnit.SECONDS.sleep(<span class="hljs-number">1</span>);<br>                        System.out.println(i);<br>                }<br>                System.out.println(<span class="hljs-string">"ç­‰å¾…é‡Šæ”¾é”"</span>);<br>                <span class="hljs-comment">// é‡Šæ”¾é”</span><br>                interProcessMutex.release();<br>        }<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * @åŠŸèƒ½: å…³é—­è¿æ¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-meta">@After</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span> {<br>                <span class="hljs-keyword">if</span> (client != <span class="hljs-literal">null</span>) {<br>                        client.close();<br>                }<br>        }<br>}<br><br></code></pre></td></tr></tbody></table></figure><h3 id="Zookeeper-åŸå­å¹¿æ’­"><a href="#Zookeeper-åŸå­å¹¿æ’­" class="headerlink" title="Zookeeper - åŸå­å¹¿æ’­"></a>Zookeeper - åŸå­å¹¿æ’­</h3><ul><li>zabåè®® çš„å…¨ç§°æ˜¯     Zookeeper Atomic Broadcast ï¼ˆzookeeperåŸå­å¹¿æ’­ï¼‰ï¼Œ<strong>zookeeper æ˜¯é€šè¿‡ zabåè®®æ¥ä¿è¯åˆ†å¸ƒå¼äº‹åŠ¡çš„æœ€ç»ˆä¸€è‡´æ€§</strong>ã€‚</li><li><p>åŸºäºzabåè®®ï¼Œzookeeperé›†ç¾¤ä¸­çš„è§’è‰²ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç±»ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p></li><li><p>| è§’è‰²               | æè¿°                                                         |<br>| â€”â€”â€”â€”â€”â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” |<br>| é¢†å¯¼è€…ï¼ˆLeaderï¼‰   | é¢†å¯¼è€…è´Ÿè´£è¿›è¡ŒæŠ•ç¥¨çš„å‘èµ·å’Œå†³è®®ï¼Œæ›´æ–°ç³»ç»ŸçŠ¶æ€                 |<br>| è·Ÿéšè€…ï¼ˆFollowerï¼‰ | Followerç”¨äºæ¥æ”¶å®¢æˆ·è¯·æ±‚å¹¶å‘å®¢æˆ·ç«¯è¿”å›ç»“æœï¼Œåœ¨é€‰ä¸»è¿‡ç¨‹ä¸­è¿›è¡ŒæŠ•ç¥¨ |<br>| è§‚å¯Ÿè€…ï¼ˆObServerï¼‰ | Observerå¯ä»¥æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥ï¼Œå°†å†™è¯·æ±‚è½¬å‘ç»™leaderèŠ‚ç‚¹ï¼Œä½†ObServerä¸å‚åŠ é€‰ç¥¨è¿‡ç¨‹ï¼ŒåªåŒæ­¥ï¼Œleaderçš„çŠ¶æ€ã€‚ObServerçš„ç›®çš„æ˜¯ä¸ºäº†æ‰©å±•ç³»ç»Ÿï¼Œæé«˜è¯»å–é€Ÿåº¦ã€‚ |<br>| å®¢æˆ·ç«¯ï¼ˆClientï¼‰   | è¯·æ±‚å‘èµ·æ–¹                                                   |</p></li></ul><ol><li>leaderä»å®¢æˆ·ç«¯æ”¶åˆ°ä¸€ä¸ªå†™è¯·æ±‚</li><li>leaderç”Ÿæˆä¸€ä¸ªæ–°çš„äº‹åŠ¡å¹¶ä¸ºè¿™ä¸ªäº‹åŠ¡ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ZXID</li><li>leaderå°†è¿™ä¸ªäº‹åŠ¡æè®®(propose)å‘é€ç»™æ‰€æœ‰çš„followsèŠ‚ç‚¹</li><li>followerèŠ‚ç‚¹å°†æ”¶åˆ°çš„äº‹åŠ¡è¯·æ±‚åŠ å…¥åˆ°å†å²é˜Ÿåˆ—(history     queue)ä¸­,å¹¶å‘é€ackç»™leader</li><li>å½“leaderæ”¶åˆ°å¤§å¤šæ•°followerï¼ˆåŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹ï¼‰çš„ackæ¶ˆæ¯ï¼Œleaderä¼šå‘é€commitè¯·æ±‚</li><li>å½“followeræ”¶åˆ°commitè¯·æ±‚æ—¶ï¼Œä»å†å²é˜Ÿåˆ—ä¸­å°†äº‹åŠ¡è¯·æ±‚commit</li></ol><h3 id="Zookeeper-leaderé€‰ä¸¾"><a href="#Zookeeper-leaderé€‰ä¸¾" class="headerlink" title="Zookeeper - leaderé€‰ä¸¾"></a>Zookeeper - leaderé€‰ä¸¾</h3><ul><li><p>æœåŠ¡å™¨çš„çŠ¶æ€</p><ul><li>looking:å¯»æ‰¾leaderçŠ¶æ€</li><li>leadingï¼šé¢†å¯¼è€…çŠ¶æ€ è¡¨æ˜å½“å‰çš„æœåŠ¡å™¨è§’è‰²ä¸ºï¼šleader</li><li>following ï¼šè·Ÿéšç€çŠ¶æ€ è¡¨æ˜å½“å‰çš„æœåŠ¡å™¨è§’è‰²ä¸ºï¼šfollower</li><li>observingï¼šè§‚å¯Ÿè€…çŠ¶æ€ è¡¨æ˜å½“å‰çš„æœåŠ¡å™¨è§’è‰²ä¸ºï¼šobserver</li></ul></li><li><p>æœåŠ¡å™¨leaderé€‰ä¸¾ï¼šç®€è¨€ä¹‹å°±æ˜¯ é€‰å–ä¸­é—´çš„ä¸ºé¢†å¯¼è€…è¦éµå¾ªä¸´æ—¶é¡ºåºèŠ‚ç‚¹çš„åˆ›å»ºå…³ç³»</p><ul><li>æœåŠ¡å™¨å¯åŠ¨æ—¶æœŸçš„leaderé€‰ä¸¾ï¼š</li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html">åœ¨é›†ç¾¤åˆå§‹åŒ–é˜¶æ®µï¼Œå½“æœ‰ä¸€å°æœåŠ¡å™¨server1å¯åŠ¨æ—¶ï¼Œå…¶å•ç‹¬æ— æ³•è¿›è¡Œå’Œå®Œæˆleaderé€‰ä¸¾ï¼Œå½“ç¬¬äºŒå°æœåŠ¡å™¨server2å¯åŠ¨æ—¶ï¼Œæ­¤æ—¶ä¸¤å°æœºå™¨å¯ä»¥ç›¸äº’é€šä¿¡ï¼Œæ¯å°æœºå™¨éƒ½è¯•å›¾æ‰¾åˆ°leaderï¼Œäºæ˜¯è¿›å…¥leaderé€‰ä¸¾è¿‡ç¨‹ã€‚é€‰ä¸¾è¿‡ç¨‹å¦‚ä¸‹:<br>ï¼‘. æ¯ä¸ªserverå‘å‡ºä¸€ä¸ªæŠ•ç¥¨ã€‚ç”±äºæ˜¯åˆå§‹æƒ…å†µï¼Œserver1å’Œserver2éƒ½ä¼šå°†è‡ªå·±ä½œä¸ºleaderæœåŠ¡å™¨æ¥è¿›è¡ŒæŠ•ç¥¨ï¼Œæ¯æ¬¡æŠ•ç¥¨ä¼šåŒ…å«æ‰€æ¨ä¸¾çš„æœåŠ¡å™¨çš„myidå’Œzxidï¼Œä½¿ç”¨(myid, zxid)æ¥è¡¨ç¤ºï¼Œæ­¤æ—¶server1çš„æŠ•ç¥¨ä¸º(1, 0)ï¼Œserver2çš„æŠ•ç¥¨ä¸º(2, 0)ï¼Œç„¶åå„è‡ªå°†è¿™ä¸ªæŠ•ç¥¨å‘ç»™é›†ç¾¤ä¸­å…¶ä»–æœºå™¨ã€‚<br>ï¼’. é›†ç¾¤ä¸­çš„æ¯å°æœåŠ¡å™¨æ¥æ”¶æ¥è‡ªé›†ç¾¤ä¸­å„ä¸ªæœåŠ¡å™¨çš„æŠ•ç¥¨ã€‚<br>ï¼“. å¤„ç†æŠ•ç¥¨ã€‚é’ˆå¯¹æ¯ä¸€ä¸ªæŠ•ç¥¨ï¼ŒæœåŠ¡å™¨éƒ½éœ€è¦å°†åˆ«äººçš„æŠ•ç¥¨å’Œè‡ªå·±çš„æŠ•ç¥¨è¿›è¡Œpkï¼Œpkè§„åˆ™å¦‚ä¸‹ï¼š<br>â–¡ ä¼˜å…ˆæ£€æŸ¥zxidã€‚zxidæ¯”è¾ƒå¤§çš„æœåŠ¡å™¨ä¼˜å…ˆä½œä¸ºleaderã€‚<br>â–¡ å¦‚æœzxidç›¸åŒï¼Œé‚£ä¹ˆå°±æ¯”è¾ƒmyidã€‚myidè¾ƒå¤§çš„æœåŠ¡å™¨ä½œä¸ºleaderæœåŠ¡å™¨ã€‚<br>â–¡ å¯¹äºServer1è€Œè¨€ï¼Œå®ƒçš„æŠ•ç¥¨æ˜¯(1, 0)ï¼Œæ¥æ”¶Server2çš„æŠ•ç¥¨ä¸º(2, 0)ï¼Œé¦–å…ˆä¼šæ¯”è¾ƒä¸¤è€…çš„zxidï¼Œå‡ä¸º0ï¼Œå†æ¯”è¾ƒmyidï¼Œæ­¤æ—¶server2çš„myidæœ€å¤§ï¼Œäºæ˜¯æ›´æ–°è‡ªå·±çš„æŠ•ç¥¨ä¸º(2, 0)ï¼Œç„¶åé‡æ–°æŠ•ç¥¨ï¼Œå¯¹äºserver2è€Œè¨€ï¼Œå…¶æ— é¡»æ›´æ–°è‡ªå·±çš„æŠ•ç¥¨ï¼Œåªæ˜¯å†æ¬¡å‘é›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨å‘å‡ºä¸Šä¸€æ¬¡æŠ•ç¥¨ä¿¡æ¯å³å¯ã€‚<br>ï¼”. ç»Ÿè®¡æŠ•ç¥¨ã€‚æ¯æ¬¡æŠ•ç¥¨åï¼ŒæœåŠ¡å™¨éƒ½ä¼šç»Ÿè®¡æŠ•ç¥¨ä¿¡æ¯ï¼Œåˆ¤æ–­æ˜¯å¦å·²ç»æœ‰è¿‡åŠæœºå™¨æ¥å—åˆ°ç›¸åŒçš„æŠ•ç¥¨ä¿¡æ¯ï¼Œå¯¹äºserver1ã€server2è€Œè¨€ï¼Œéƒ½ç»Ÿè®¡å‡ºé›†ç¾¤ä¸­å·²ç»æœ‰ä¸¤å°æœºå™¨æ¥å—äº†(2, 0)çš„æŠ•ç¥¨ä¿¡æ¯ï¼Œæ­¤æ—¶ä¾¿è®¤ä¸ºå·²ç»é€‰å‡ºäº†leaderã€‚<br>æ”¹å˜æœåŠ¡å™¨çŠ¶æ€ã€‚ä¸€æ—¦ç¡®å®šäº†leaderï¼Œæ¯ä¸ªæœåŠ¡å™¨å°±ä¼šæ›´æ–°è‡ªå·±çš„çŠ¶æ€ï¼Œå¦‚æœæ˜¯followerï¼Œé‚£ä¹ˆå°±å˜æ›´ä¸ºfollowingï¼Œå¦‚æœæ˜¯leaderï¼Œå°±å˜æ›´ä¸ºleadingã€‚<br></code></pre></td></tr></tbody></table></figure><ul><li>æœåŠ¡å™¨è¿è¡Œæ—¶æœŸleaderé€‰ä¸¾</li></ul><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html">â—‹ åœ¨zookeeperè¿è¡ŒæœŸé—´ï¼Œleaderä¸éleaderæœåŠ¡å™¨å„å¸å…¶èŒï¼Œå³ä¾¿å½“æœ‰éleaderæœåŠ¡å™¨å®•æœºæˆ–æ–°åŠ å…¥ï¼Œæ­¤æ—¶ä¹Ÿä¸ä¼šå½±å“leaderï¼Œä½†æ˜¯ä¸€æ—¦leaderæœåŠ¡å™¨æŒ‚äº†ï¼Œé‚£ä¹ˆæ•´ä¸ªé›†ç¾¤å°†æš‚åœå¯¹å¤–æœåŠ¡ï¼Œè¿›å…¥æ–°ä¸€è½®leaderé€‰ä¸¾ï¼Œå…¶è¿‡ç¨‹å’Œå¯åŠ¨æ—¶æœŸçš„Leaderé€‰ä¸¾è¿‡ç¨‹åŸºæœ¬ä¸€è‡´ã€‚<br>â—‹ å‡è®¾æ­£åœ¨è¿è¡Œçš„æœ‰server1ã€server2ã€server3ä¸‰å°æœåŠ¡å™¨ï¼Œå½“å‰leaderæ˜¯server2ï¼Œè‹¥æŸä¸€æ—¶åˆ»leaderæŒ‚äº†ï¼Œæ­¤æ—¶ä¾¿å¼€å§‹Leaderé€‰ä¸¾ã€‚é€‰ä¸¾è¿‡ç¨‹å¦‚ä¸‹:<br>ï¼‘. å˜æ›´çŠ¶æ€ã€‚leaderæŒ‚åï¼Œä½™ä¸‹çš„æœåŠ¡å™¨éƒ½ä¼šå°†è‡ªå·±çš„æœåŠ¡å™¨çŠ¶æ€å˜æ›´ä¸ºlookingï¼Œç„¶åå¼€å§‹è¿›å…¥leaderé€‰ä¸¾è¿‡ç¨‹ã€‚<br>ï¼’.  æ¯ä¸ªserverä¼šå‘å‡ºä¸€ä¸ªæŠ•ç¥¨ã€‚åœ¨è¿è¡ŒæœŸé—´ï¼Œæ¯ä¸ªæœåŠ¡å™¨ä¸Šçš„zxidå¯èƒ½ä¸åŒï¼Œæ­¤æ—¶å‡å®šserver1çš„zxidä¸º122ï¼Œserver3çš„zxidä¸º122ï¼Œåœ¨ç¬¬ä¸€è½®æŠ•ç¥¨ä¸­ï¼Œserver1å’Œserver3éƒ½ä¼šæŠ•è‡ªå·±ï¼Œäº§ç”ŸæŠ•ç¥¨(1, 122)ï¼Œ(3, 122)ï¼Œç„¶åå„è‡ªå°†æŠ•ç¥¨å‘é€ç»™é›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨ã€‚<br>ï¼“. æ¥æ”¶æ¥è‡ªå„ä¸ªæœåŠ¡å™¨çš„æŠ•ç¥¨ã€‚ä¸å¯åŠ¨æ—¶è¿‡ç¨‹ç›¸åŒ<br>ï¼”. å¤„ç†æŠ•ç¥¨ã€‚ä¸å¯åŠ¨æ—¶è¿‡ç¨‹ç›¸åŒï¼Œæ­¤æ—¶ï¼Œserver3å°†ä¼šæˆä¸ºleaderã€‚<br>ï¼•. ç»Ÿè®¡æŠ•ç¥¨ã€‚ä¸å¯åŠ¨æ—¶è¿‡ç¨‹ç›¸åŒã€‚<br>æ”¹å˜æœåŠ¡å™¨çš„çŠ¶æ€ã€‚ä¸å¯åŠ¨æ—¶è¿‡ç¨‹ç›¸åŒã€‚<br></code></pre></td></tr></tbody></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaåç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeeCode</title>
      <link href="/2022/10/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/Leecode%E9%A2%98%E7%9B%AE%E8%A7%A3%E6%9E%90/"/>
      <url>/2022/10/27/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/Leecode%E9%A2%98%E7%9B%AE%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h1 id="Leecodeé¢˜ç›®è§£æ"><a href="#Leecodeé¢˜ç›®è§£æ" class="headerlink" title="Leecodeé¢˜ç›®è§£æ"></a>Leecodeé¢˜ç›®è§£æ</h1><h4 id="1441-ç”¨æ ˆæ“ä½œæ„å»ºæ•°ç»„"><a href="#1441-ç”¨æ ˆæ“ä½œæ„å»ºæ•°ç»„" class="headerlink" title="1441. ç”¨æ ˆæ“ä½œæ„å»ºæ•°ç»„"></a><a href="https://leetcode.cn/problems/build-an-array-with-stack-operations/">1441. ç”¨æ ˆæ“ä½œæ„å»ºæ•°ç»„</a></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//çœ‹åˆ°è¯¥é¢˜æˆ‘ä»¬æƒ³åˆ°çš„æ˜¯å¯ä»¥åˆ©ç”¨ä¸€æ¬¡å¾ªç¯å¯¹listé“¾è¡¨è¿›è¡Œä¸æ–­çš„è¡¥å……pushå’Œpopæ“ä½œ</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">å› ä¸ºtargetæ•°ç»„çš„é•¿åº¦ä¸€å®šå°äºlistçš„é•¿åº¦ æ‰€ä»¥æ ¹æ®é¢˜ç›®çš„æ„æ€å¯ä»¥çŸ¥é“ æ— è®ºæ˜¯å¦ç¬¦åˆtarget listçš„å…ƒç´ éƒ½è¿›è¡Œä¸€æ¬¡Pushæ“ä½œå¦‚æœä¸åŒåˆ™ åœ¨è¿›è¡Œä¸€æ¬¡popæ“ä½œï¼Œè¿™æ ·æ€è·¯å°±æ¸…æ™°äº†</span><br><span class="hljs-comment">1.é¦–å…ˆæˆ‘ä»¬ç»Ÿè®¡targetçš„é•¿åº¦ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åpushè¿›å…¥ç»“æœæ•°ç»„ï¼Œå¦‚æœæ¯”å¯¹æˆåŠŸæŒ‡é’ˆ++æ“ä½œ</span><br><span class="hljs-comment">2.å…¶æ¬¡æˆ‘é—¨å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘listæ•°ç»„ç„¶åï¼Œå¦‚æœæ²¡æœ‰æ¯”å¯¹æˆåŠŸå°±è®©æŒ‡é’ˆ++ï¼Œåˆ™popè¿›å…¥ç»“æœæ•°ç»„ã€‚</span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-comment">//ä¸¤ä¸ªä¸å˜çš„çš„æ•°æ®è¿›å…¥ç»“æœé›†åˆ</span><br>    <span class="hljs-keyword">private</span>  <span class="hljs-keyword">final</span>  <span class="hljs-keyword">static</span> String p=<span class="hljs-string">"Push"</span>;<br>    <span class="hljs-keyword">private</span>  <span class="hljs-keyword">final</span>  <span class="hljs-keyword">static</span> String r=<span class="hljs-string">"Pop"</span>;<br>    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">buildArray</span><span class="hljs-params">(<span class="hljs-type">int</span>[] target, <span class="hljs-type">int</span> n)</span> {<br>        <span class="hljs-type">int</span> []list=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        List&lt;String &gt;res=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-comment">//èµ‹åˆå€¼</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) {<br>            list[i]=i+<span class="hljs-number">1</span>;<br>        }<br>        <span class="hljs-type">int</span> count=target.length;<br>        <span class="hljs-type">int</span> k=<span class="hljs-number">0</span>;  <br>        <span class="hljs-type">int</span> j=<span class="hljs-number">0</span>; <br>        <span class="hljs-comment">//é€€å‡ºå¾ªç¯çš„æ¡ä»¶k&lt;countæˆ–è€…j&lt;nä¹Ÿå°±æ˜¯é•¿åº¦ä¸æ»¡è¶³</span><br>        <span class="hljs-keyword">while</span> (k&lt;count&amp;&amp;j&lt;n){<br>            <span class="hljs-comment">//æ— è®ºä»€ä¹ˆéƒ½å…ˆå…¥æ ˆ</span><br>            res.add(p);<br>            <span class="hljs-keyword">if</span>(target[k]==list[j]){<br>                k++;<br>            }<span class="hljs-keyword">else</span> {<br>                <span class="hljs-comment">//ä¸ç›¸ç­‰popå…¥æ ˆ</span><br>                res.add(r);<br>            }<br>            j++;<br>        }<br>        <span class="hljs-keyword">return</span> res;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="481-ç¥å¥‡å­—ç¬¦ä¸²"><a href="#481-ç¥å¥‡å­—ç¬¦ä¸²" class="headerlink" title="481. ç¥å¥‡å­—ç¬¦ä¸²"></a><a href="https://leetcode.cn/problems/magical-string/">481. ç¥å¥‡å­—ç¬¦ä¸²</a></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//â‘ .æ ¹æ®è§‚æµ‹çš„çš„è§„å¾‹æˆ‘ä»¬å¯ä»¥å¤§è‡´äº†è§£åˆ°ä¾‹å¦‚ï¼šs = "1221121221221121122â€¦â€¦"</span><br><span class="hljs-comment">//â‘¡.å¯¹äºå¾—åˆ°çš„å­—ç¬¦ä¸²ï¼št=1 2 2 1 1 2 1 2 2 1 2 2 ......"ä¸åŸå­—ç¬¦ä¸²ä¿æŒä¸€è‡´</span><br><span class="hljs-comment">//â‘ å¾—åˆ°çš„æ˜¯æ•°å­— ç„¶è€Œâ‘¡è¡¨ç¤ºçš„æ˜¯æŸä¸ªæ•°å­—å‡ºç°çš„ä¸ªæ•° æ¯”å¦‚åªçœ‹sä¸² æ¯”è¾ƒæ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°ä¸ºï¼š122112122122...ä¹Ÿå°±å¾—åˆ°äº†â‘¡çš„å­—ç¬¦ä¸²ï¼Œç„¶åä»å¼€å§‹åˆ†æ å½“så­—ç¬¦ä¸²çš„é•¿åº¦å¤§äº3å ä»æ­¤sçš„é•¿åº¦ä¼šä¸€ç›´å¤§äºå¾—åˆ°çš„å­—ç¬¦ä¸²</span><br><span class="hljs-comment">//æ ¹æ®é¢˜æ„å¯çŸ¥så­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸€å®šæ˜¯1ï¼Œç†ç”±  ä¾‹å¦‚ s=11  åˆ™t=2  (ä¸ç¬¦åˆ)</span><br><span class="hljs-comment">//s=122  t=12  (ç¬¦åˆ)  ç„¶åæ ¹æ®é•¿åº¦å¯ä»¥çŸ¥é“ tçš„ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸€å®šä¸º2  ç„¶åsçš„ç¬¬4.5å­—ç¬¦åˆ™ä¸º1å³</span><br><span class="hljs-comment">//s=12211   t=122   ç„¶åtçš„ç¬¬å››ä¸ªå­—ç¬¦ä¸º1 å¯¹åº”çš„så­—ç¬¦ä¸º2....æ— çº¿å¾ªç¯ä¸‹å»</span><br><span class="hljs-comment">//ç„¶åæˆ‘ä¹ˆå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªè§„å¾‹ så­—ç¬¦ä¸²çš„é•¿åº¦å¢åŠ ä¸»è¦çœ‹tçš„ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸ºå¤šå°‘,è€Œtåˆå’Œså­—ç¬¦ä¸²å‘åŒå°±æ˜¯é•¿åº¦ä¸åŒï¼Œæ¢è¨€ä¹‹tçš„å¢é€Ÿå¤ªæ…¢ å½“æ—¶é—´æ— é™é•¿ä¸¤è€…è¿‘ä¼¼ç›¸åŒ è¿™é‡Œå®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆï¼ˆå¿«æŒ‡é’ˆå’Œæ…¢æŒ‡é’ˆï¼‰</span><br><span class="hljs-comment">//è§£é¢˜æ­¥éª¤</span><br><span class="hljs-comment">//1.é¦–å…ˆå°†å‰ä¸‰ä¸ªå…ƒç´ åŠ å…¥ ç„¶åå°±å¯ä»¥çŸ¥é“sçš„é•¿åº¦ä¸€å®šå¤§äºt--&gt;å¾—åˆ°s=122  t=12</span><br><span class="hljs-comment">//2.æ¥ç€è®©index=2æŒ‡å‘sçš„ç¬¬ä¸‰ä¸ªå…ƒç´ ç„¶åé¡¶ä¸€ä¸ªlengt=3 ï¼Œvalue=1ä¸ºæ¯æ¬¡è¦åŠ å…¥çš„å€¼ å’Œä¸€ä¸ªcountç»Ÿè®¡1çš„æ•°ç›®èµ·å§‹å€¼ä¸º1</span><br><span class="hljs-comment">//3.æ¥ç€è¿›å…¥å¾ªç¯ç»ˆæ­¢æ¡ä»¶ä¸ºlength&lt;nå°±æ˜¯ç»™çš„n</span><br><span class="hljs-comment">//4.æ¯æ¬¡è·å–array[index]å†…çš„æ•°å­—åˆ¤æ–­åœ¨æ•°ç»„å†…åŠ ä¸€ä¸ªå…ƒç´ è¿˜æ˜¯ä¸¤ä¸ªå¹¶ä¸”é˜²æ­¢lengthè¶Šç•Œ</span><br><span class="hljs-comment">//5.å°†éœ€è¦åŠ å…¥å‡ ä¸ªvalueèµ‹å€¼åˆ°arrayçš„åè¾¹ç„¶ålength++ å½“åŠ å…¥çš„value=1çš„æ—¶å€™åˆ™count++</span><br><span class="hljs-comment">//6.å½“æ­¤æ¬¡å®Œæˆåä¸‹æ¬¡åˆ™æ·»åŠ å¦ä¸€ä¸ªæ•°å­—ä¹Ÿå°±æ˜¯value=3-value å®ç°åˆ‡æ¢</span><br><span class="hljs-comment">//7.ç»“æŸåindex++;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">magicalString</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> {<br>        <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) {<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        }<br>        <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">3</span>) {<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        }<br>        <span class="hljs-type">int</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        <span class="hljs-comment">// è®¾ç½®åˆå€¼</span><br>        array[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;array[<span class="hljs-number">1</span>] = <span class="hljs-number">2</span>;array[<span class="hljs-number">2</span>] = <span class="hljs-number">2</span>;<br>        <span class="hljs-comment">// ç»Ÿè®¡ 1 çš„ä¸ªæ•°ï¼Œå‰ä¸‰ä¸ªå­—ç¬¦ä¸­æœ‰ 1 ä¸ª 1</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>        <span class="hljs-comment">// index è¡¨ç¤ºå­—ç¬¦ä¸² A çš„ç´¢å¼•ï¼Œlength è¡¨ç¤ºå­—ç¬¦ä¸²æœ‰æ•ˆå­—ç¬¦çš„ä¸ªæ•°ï¼Œ value è¡¨ç¤ºä¸‹æ¬¡ç”Ÿæˆçš„å­—ç¬¦</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>, length = <span class="hljs-number">3</span>, value = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span> (length &lt; n) {<br>            <span class="hljs-comment">// æ ¹æ® array[index] çš„å€¼å†³å®šç”Ÿæˆå‡ ä¸ª value</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; array[index] &amp;&amp; length &lt; n; i++) {<br>                array[length++] = value;<br>                <span class="hljs-comment">// ç»Ÿè®¡ 1 çš„ä¸ªæ•°</span><br>                <span class="hljs-keyword">if</span> (value == <span class="hljs-number">1</span>) {<br>                    count++;<br>                }<br>            }<br>            <span class="hljs-comment">// æ›´æ¢ç”Ÿæˆçš„å­—ç¬¦ï¼Œ3-1=2ï¼Œ3-2=1ï¼Œå®ç° 1 å’Œ 2 çš„äº¤æ›¿</span><br>            value = <span class="hljs-number">3</span> - value;<br>            index++;<br>        }<br>        <span class="hljs-keyword">return</span> count;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="779-ç¬¬Kä¸ªè¯­æ³•ç¬¦å·"><a href="#779-ç¬¬Kä¸ªè¯­æ³•ç¬¦å·" class="headerlink" title="779. ç¬¬Kä¸ªè¯­æ³•ç¬¦å·"></a><a href="https://leetcode.cn/problems/k-th-symbol-in-grammar/">779. ç¬¬Kä¸ªè¯­æ³•ç¬¦å·</a></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ–¹æ³•ä¸€å¯ä»¥åˆ©ç”¨é€’å½’çš„æ€æƒ³æ¥è§£é¢˜ æ ¹æ®é¢˜æ„å¯ä»¥çŸ¥é“ä»–æ˜¯ä¸ªæœ‰è§„å¾‹çš„æ•°å­—å½“n=5æ—¶çš„ç»“æœé¡ºåºä¸º</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">0   </span><br><span class="hljs-comment">01  </span><br><span class="hljs-comment">0110  </span><br><span class="hljs-comment">01101001  </span><br><span class="hljs-comment">0110100110010110 </span><br><span class="hljs-comment">*/</span><br><span class="hljs-comment">//è¿™æ˜¯ä¸ªæœ‰è§„å¾‹çš„æ•°å­—æ¯æ¬¡è¡¥å……çš„åé¢çš„ä¸€åŠå’Œå‰ä¸€åŠæ•°å­—ç›¸åå…¥ (01)(10)</span><br><span class="hljs-comment">//è¿™æ—¶æˆ‘ä»¬å¯ä»¥åˆ©ç”¨é€’å½’çš„æ€æƒ³æ¥ä½œé¢˜ å½“å–ç¬¬kä½æ—¶ æˆ‘ä»¬å¯ä»¥å»æ‰¾å…¶å‰ä¸€æ’å³n-1æ’kå¯¹åº”çš„æ•°æ®æ¥ç€æ‰¾å…¶n-2æ’å¯¹åº”çš„æ•°æ®</span><br><span class="hljs-comment">//ç­‰åˆ°é€’å½’åˆ°æœ€åº•å±‚çš„æ—¶å€™ç„¶åå†è¿”å›å»è°ƒç”¨</span><br><span class="hljs-comment">//å°±æ‹¿ 4ï¼Œ7 æ¥ä¸¾ä¾‹ é€’å½’ k-1çš„å˜åŒ–ä¸º 0 1 3 6  æ‰€ä»¥ä»åº•å±‚å¼€å§‹ å› ä¸ºå½“k=0æ˜¯res=0æ‰€ä»¥è¿›å…¥ä¸‹ä¸€å±‚resä¸å˜</span><br><span class="hljs-comment">//k=1  æ­¤æ—¶kä¸ºå¥‡æ•°æ‰€ä»¥res=1 ç„¶åè¿›å…¥ä¸‹ä¸€å±‚ k=3æ­¤æ—¶ kä¸ºå¥‡æ•°æ‰€ä»¥res=0  æ¥ç€è¿›å…¥æœ€åä¸€å±‚ k=6 ä¸ºå¶æ•°æ‰€ä»¥res=0ä¿æŒä¸å˜</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">kthGrammar</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> k)</span> {<br>        <span class="hljs-keyword">return</span> find(n, k - <span class="hljs-number">1</span>);<br>    }<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> N, <span class="hljs-type">int</span> K)</span> {<br>        <span class="hljs-keyword">if</span> (N == <span class="hljs-number">1</span>) {<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        }<br>        <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">//é¦–å…ˆå¾—åˆ°å‰n-1æ’çš„é‚£ä¸ªæ•°å­—</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> find(N - <span class="hljs-number">1</span>, K / <span class="hljs-number">2</span>);<br>        <span class="hljs-keyword">if</span> (K % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) {<span class="hljs-comment">//å¦‚æœä¸‹æ ‡kä¸ºå¶æ•°åˆ™ä»–çš„ç»“æœä¸è¿›è¡Œç¿»è½¬</span><br>            <span class="hljs-keyword">if</span> (num == <span class="hljs-number">1</span>) res = <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">else</span> res = <span class="hljs-number">0</span>;<br>        } <span class="hljs-keyword">else</span> {    <span class="hljs-comment">//åä¹‹kçš„ä¸‹æ ‡ä¸ºå¥‡æ•°å…¶ç»“æœéœ€è¦è¿›è¡Œç¿»è½¬</span><br>            <span class="hljs-keyword">if</span> (num == <span class="hljs-number">1</span>) res = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">else</span> res = <span class="hljs-number">1</span>;<br>        }<br>        <span class="hljs-keyword">return</span> res;<br>    }<br>    <span class="hljs-comment">//æ–¹æ³•äºŒç›´æ¥å¯¹kå€¼è¿›è¡Œæ¯”è¾ƒ æ ¹æ®è§„å¾‹æ€§å¯ä»¥å¾ˆå®¹æ˜“çš„å¾—å‡ºï¼Œä¸€è¡Œä¸­çš„ç¬¬ i ä¸ªå­—ç¬¦ï¼Œä¼šåœ¨ç¬¬ 2i å’Œç¬¬ 2i+1ä¸ªä½ç½®äº§ç”Ÿä¸¤ä¸ªå­—ç¬¦ã€‚</span><br>    <span class="hljs-comment">//å¯ä»¥å‘ç°ç¬¬2iä¸ªå­—ç¬¦å’Œç¬¬iä¸ªå­—ç¬¦æ€»æ˜¯ç›¸åŒçš„ï¼Œè€Œç¬¬2i+1ä¸ªå­—ç¬¦å’Œç¬¬iä¸ªå­—ç¬¦æ­£å¥½æ˜¯ç›¸åæ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¥‡æ•°ä½ä¸Šçš„å­—ç¬¦æ€»æ˜¯å‘ç”Ÿäº†ä¸€æ¬¡åè½¬è€Œæ¥çš„</span><br>    <span class="hljs-comment">//åè½¬å¶æ•°æ¬¡ï¼Œå­—ç¬¦ä¸å˜ï¼›åè½¬å¥‡æ•°æ¬¡ï¼Œç›¸å½“äºåè½¬äº†ä¸€æ¬¡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦çœ‹ k è¿™ä¸ªæ•°å­—æ˜¯å¦æ˜¯å¥‡æ•°ï¼Œè‹¥æ˜¯ï¼Œç´¯è®¡ä¸€æ¬¡åè½¬ã€‚ç„¶åå°† k é™¤ä»¥ 2ï¼Œç»§ç»­åˆ¤æ–­ï¼Œå¹¶ç´¯è®¡åè½¬æ¬¡æ•°ï¼Œç›´è‡³ k ä¸º 0ã€‚</span><br>    <span class="hljs-comment">//æœ€ååˆ¤æ–­åè½¬çš„æ¬¡æ•°æ˜¯å¦ä¸ºå¥‡æ•°ï¼Œæ˜¯åˆ™ç­”æ¡ˆä¸º 11ï¼Œå¦åˆ™ä¸º 00ã€‚</span><br>    <span class="hljs-comment">//æ‰€ä»¥è¿›è¡Œä½è¿ç®— ç»Ÿè®¡1çš„ä¸ªæ•°ç„¶åä¸1ç›¸ä¸å¯ä»¥å¾—åˆ°æœ€ç»ˆç»“æœ</span><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">kthGrammar</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> k)</span> {<br>        <span class="hljs-keyword">return</span> Integer.bitCount(k - <span class="hljs-number">1</span>) &amp; <span class="hljs-number">1</span>;<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure><h4 id="6-Z-å­—å½¢å˜æ¢"><a href="#6-Z-å­—å½¢å˜æ¢" class="headerlink" title="6. Z å­—å½¢å˜æ¢"></a><a href="https://leetcode.cn/problems/zigzag-conversion/">6. Z å­—å½¢å˜æ¢</a></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//é¢˜è§£ï¼šæ ¹æ®é¢˜ç›®å¯ä»¥çŸ¥é“éµå®ˆZå˜æ¢ æˆ‘ä»¬å¯ä»¥è¿™æ ·æƒ³ é¦–å…ˆæ ¹æ®ä»–ç»™çš„è¡Œæ•° æ¯è¡Œæˆ‘ä»¬å¼€è¾Ÿä¸€ä¸ªå­—ç¬¦ä¸²å®¹å™¨æ¥æ¥æ”¶éå†å¾—åˆ°çš„å­—ç¬¦</span><br><span class="hljs-comment">//æ‰€ä»¥ä»ä¸Šåˆ°ä¸‹ä»å·¦åˆ°å³ å°†så­—ç¬¦ä¸²ä¸€ä¸ªä¸€ä¸ªæ”¾å…¥åˆ°å­—ç¬¦ä¸²å®¹å™¨ä¸­ </span><br><span class="hljs-comment">//è¿™é‡Œå°±å¯ä»¥çœ‹å‡ºæ¥æ¯æ¬¡åˆ°è¾¾è¾¹ç•Œçš„æ—¶å€™ ä¼šè¿›è¡Œå˜æ–¹å‘è€Œä¸”æ­¤æ—¶æ”¹è¡Œä¸Šçš„å…ƒç´ ä¸èƒ½è¿›å…¥å®¹å™¨</span><br><span class="hljs-comment">//æ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥ä»¥ä¸€ä¸ªflagæ¥åˆ¤æ–­æ–¹å‘ kæ¥é¡¶è¾¹ç•Œ å½“æŠ„è¿‡è¾¹ç•Œçš„æ—¶å€™éœ€è¦k+2 æˆ–è€…k-2 è¿™æ˜¯å› ä¸º </span><br><span class="hljs-comment">//ä¾‹å¦‚æœ‰å››è¡Œçš„æ—¶å€™ zçš„æ„æˆä¸º 424  äº”è¡Œçš„æ—¶å€™ä¸º 535 ä¸­é—´ç›¸æ¯”äºä¸¤ä¾§éƒ½å°‘äº†2æ‰€ä»¥å¯ä»¥å®šä¸€ä¸ªè¾¹ç•Œå€¼</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">convert</span><span class="hljs-params">(String s, <span class="hljs-type">int</span> numRows)</span> {<br>        <span class="hljs-comment">//å½“è¡Œæ•°å°‘çš„æ—¶å€™ç›´æ¥è¿”å›åŸå­—ç¬¦ä¸²</span><br>        <span class="hljs-keyword">if</span> (numRows &lt; <span class="hljs-number">2</span>) {<br>            <span class="hljs-keyword">return</span> s;<br>        }<br>        <span class="hljs-comment">//æ„é€ å­—ç¬¦æ•°ç»„å®¹å™¨</span><br>        List&lt;StringBuilder&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; numRows; i++) {<br>            list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>());<br>        }<br>        <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">//è§‚æµ‹è¾¹ç•Œçš„k</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦è½¬å‘</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; s.length(); i++) {<br>            <span class="hljs-comment">//ä»ä¸Šåˆ°ä¸‹è¿›è¡Œè¿›å…¥å®¹å™¨</span><br>            <span class="hljs-keyword">if</span> (k &lt; numRows &amp;&amp; flag == <span class="hljs-number">1</span>) {<br>                list.get(k).append(s.charAt(i));<br>                k++;<br>                <span class="hljs-comment">//ä»ä¸‹åˆ°ä¸Šè¿›å…¥å®¹å™¨</span><br>            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (k &gt;= <span class="hljs-number">0</span> &amp;&amp; flag == -<span class="hljs-number">1</span>) {<br>                list.get(k).append(i);<br>                k--;<br>            }<br>            <span class="hljs-comment">//å¦‚æœkåˆ°è¾¾ä¸‹ç•Œè¾¹ç•Œ æ­¤æ—¶å› ä¸ºä¸‹æ ‡æ¯”numRowså°‘1è€Œä¸”ä»–åˆä¸åœ¨åŸæœ¬çš„è¡Œè€Œåœ¨åŸæœ¬è¡Œçš„ä¸Šä¸€è¡Œï¼Œ</span><br>            <span class="hljs-comment">//æ‰€ä»¥è¿™é‡Œk=k-2å®šä½</span><br>            <span class="hljs-keyword">if</span> (k == numRows) {<br>                k = k - <span class="hljs-number">2</span>;<br>                flag = -<span class="hljs-number">1</span>;  <span class="hljs-comment">//åå‘</span><br>                <span class="hljs-comment">//å½“k==-1æ—¶è¯æ˜å·²ç»éå†åˆ°æœ€ä¸Šæµ‹æ‰€ä»¥è¿™é‡Œéœ€è¦+2</span><br>            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (k == -<span class="hljs-number">1</span>) {<br>                k += <span class="hljs-number">2</span>;<br>                flag = <span class="hljs-number">1</span>;  <span class="hljs-comment">//åå‘</span><br>            }<br>        }<br>        <span class="hljs-type">String</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;<br>        <span class="hljs-comment">//æœ€åå¯¹å®¹å™¨å†…çš„ç»“æœè¿›è¡Œç›¸åŠ è¾“å…¥</span><br>        <span class="hljs-keyword">for</span> (StringBuilder stringBuilder :<br>                list) {<br>            res += stringBuilder;<br>        }<br>        <span class="hljs-keyword">return</span> res;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="686-é‡å¤å åŠ å­—ç¬¦ä¸²åŒ¹é…"><a href="#686-é‡å¤å åŠ å­—ç¬¦ä¸²åŒ¹é…" class="headerlink" title="686. é‡å¤å åŠ å­—ç¬¦ä¸²åŒ¹é…"></a><a href="https://leetcode.cn/problems/repeated-string-match/">686. é‡å¤å åŠ å­—ç¬¦ä¸²åŒ¹é…</a></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution2</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">repeatedStringMatch</span><span class="hljs-params">(String a, String b)</span> {<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">//é¦–ç›¸è®©açš„é•¿åº¦å¤§äºbçš„é•¿åº¦è¿™æ ·bæ‰èƒ½åŒ…å«è¿›å»</span><br>        <span class="hljs-keyword">while</span> (sb.length() &lt; b.length() &amp;&amp; ++ans &gt; <span class="hljs-number">0</span>) sb.append(a);<br>        <span class="hljs-comment">//å½“éå†ç»“æŸå æˆ‘ä»¬éœ€è¦åœ¨æœ«å°¾å†é™„åŠ ä¸€ä¸ªaçš„é•¿åº¦æ­¤æ—¶çš„antå…ˆä¸è¿›è¡Œ++æ“ä½œ</span><br>        sb.append(a);<br>        <span class="hljs-comment">//ç„¶åçœ‹å­—ç¬¦ä¸²bæ˜¯å¦èƒ½åœ¨indexä¸­æ‰¾åˆ° ä¸èƒ½çš„è¯ç›´æ¥è¿”å›-1å®ƒæ‰¾åˆ°çš„ä¸ºbå­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—æ¯å‡ºç°çš„ä¸‹æ ‡</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">idx</span> <span class="hljs-operator">=</span> sb.indexOf(b);<br>        <span class="hljs-keyword">if</span> (idx == -<span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        <span class="hljs-comment">//å¦‚æœæ­¤æ—¶çš„idx+bçš„é•¿åº¦ æ¯”åŠ ä¸€ä¸ªå­—ç¬¦ä¸²åçš„é•¿åº¦è¿˜è¦å¤§è¯´æ˜ æœ€ååŠ çš„aå­—ç¬¦ä¸²ä¹Ÿå‚ä¸äº† æ‰€ä»¥è¿”å›ans+1</span><br>        <span class="hljs-comment">//åä¹‹åˆ™è¯´æ˜æ²¡æœ‰</span><br>        <span class="hljs-keyword">return</span> idx + b.length() &gt; a.length() * ans ? ans + <span class="hljs-number">1</span> : ans;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>       <span class="hljs-type">String</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-string">"a"</span>, b = <span class="hljs-string">"aa"</span>;<br>        <span class="hljs-type">Solution2</span> <span class="hljs-variable">solution2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Solution2</span>();<br>        solution2.repeatedStringMatch(a,b);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="915-åˆ†å‰²æ•°ç»„"><a href="#915-åˆ†å‰²æ•°ç»„" class="headerlink" title="915. åˆ†å‰²æ•°ç»„"></a><a href="https://leetcode.cn/problems/partition-array-into-disjoint-intervals/">915. åˆ†å‰²æ•°ç»„</a></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è¯¥é¢˜çš„æ€è·¯æ—¶é—´å¤æ‚åº¦ä¸ºnç©ºé—´å¤æ‚åº¦ä¸º1  æ¡ˆä¾‹ 1 1 1 0 6 12 æˆ–è€… 5 0 3 6 8</span><br><span class="hljs-comment">//åˆè¯¥ç±»å‹æˆ‘ä»¬å¯ä»¥çŸ¥é“ä»–éœ€è¦çš„æ˜¯å·¦è¾¹çš„å€¼å…¨éƒ¨å°äºå³è¾¹çš„æ‰€ä»¥å½“éå†åˆ°ä¸€ä¸ªæ•°æ®æ˜¯ä¹Ÿå°±æ˜¯å·¦è¾¹çš„æœ€å¤§å€¼å°äºå³è¾¹çš„æœ€å°å€¼</span><br><span class="hljs-comment">//æ ¹æ®æ¬¡æƒ…å†µå¯ä»¥çŸ¥é“ é¦–å…ˆè®©å·¦è¾¹çš„æœ€å¤§å€¼ä¸ºç¬¬ä¸€ä¸ªæ•° å’Œå½“å‰çš„æœ€å¤§å€¼ä¹Ÿä¸ºç¬¬ä¸€ä¸ªæ•° åœ¨å®šä¹‰ä¸€ä¸ªè®°å½•æŒ‡é’ˆ</span><br><span class="hljs-comment">//ä»0å¼€å§‹éå†æ¯å½“éå†åˆ°ä¸€ä¸ªæ•°å…ˆåˆ¤æ–­æ˜¯å¦ æ¯”å½“å‰çš„æ•°å­—å¤§ å¦‚æœå¤§çš„è¯è®°å½•ä»–çš„å€¼ä¸ºcurMax</span><br><span class="hljs-comment">//æ¥ç€åˆ¤æ–­è¯¥æ•°å­—æ˜¯å¦å°äºå·¦è¾¹ç•Œçš„æœ€å¤§å€¼ false åˆ™è·³è¿‡ trueåˆ™è¿›è¡Œæœ€å¤§å€¼çš„æ›´æ›¿å’Œ è®°å½•æŒ‡é’ˆçš„æ›´æ–°</span><br><span class="hljs-comment">//è¯¥æ€æƒ³ä¸»è¦åˆ©ç”¨äº† åªè¦å³è¾¹æœ‰å°äºå·¦è¾¹çš„å€¼å°±èƒ½ç«‹å³æ›´æ–° å¦åˆ™åªèƒ½ä¸€ç›´çš„æ¯”å·¦è¾¹å¤§ä¸‹å» ã€‚</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">partitionDisjoint</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> {<br>        <span class="hljs-type">int</span> <span class="hljs-variable">maxLeft</span> <span class="hljs-operator">=</span> nums[<span class="hljs-number">0</span>], curI = <span class="hljs-number">0</span>, curMax = nums[<span class="hljs-number">0</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; nums.length; i++) {<br>            curMax = Math.max(curMax, nums[i]);<br>            <span class="hljs-keyword">if</span> (nums[i] &lt; maxLeft) {<br>                maxLeft = curMax;<br>                curI = i;<br>            }<br>        }<br>        <span class="hljs-keyword">return</span> curI + <span class="hljs-number">1</span>;<br>    }<br><span class="hljs-comment">//ç¬¬äºŒç§æ–¹æ³•æ€è·¯ å¯ä»¥é¦–å…ˆå¼€è¾Ÿä¸€ä¸ªæ–°æ•°ç»„ ä»åå¾€å‰éå†æ¯æ¬¡ å†æœ€åå¡«å…¥ä¸€ä¸ªæœ€å°çš„å€¼</span><br><span class="hljs-comment">//æ¡ˆä¾‹ 5 0 3 6 8  ==&gt;å¼€è¾Ÿåçš„æ–°æ•°ç»„ä¸º==&gt; 0 0 3 6 8     </span><br><span class="hljs-comment">//æ¥ç€å†ä»å‰å¾€åéå† è®°å½•æœ€å¤§å€¼ å½“å‡ºç°ç¬¬iä¸ªä½ç½®çš„å…ƒç´ å°äº æ–°å¼€è¾Ÿæ•°ç»„å†…çš„å€¼çš„æ—¶å€™å°±ç›´æ¥è¿”å›</span><br><span class="hljs-comment">//ä»å‰å¼€å§‹æ—¶ æœ€å¤§å€¼ä¸º5 å½“ä»å‰åˆ°ä¸‹æ ‡ä¸º3çš„æ—¶å€™ä¹Ÿå°±æ˜¯nums[2]=3 æ­£å¥½å°äºnewarr[3]=6 ç›´æ¥è¿”å› i+1</span><br><span class="hljs-comment">//å¦‚æœåˆ°æœ€åéƒ½æ²¡æœ‰å‡ºç°çš„è¯è¯´æ˜æ­£å¥½æœ€åçš„ç»“æœæ»¡è¶³è¿”å› n-1</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">partitionDisjoint</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> {<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> nums.length;<br>        <span class="hljs-type">int</span>[] minRight = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>        minRight[n - <span class="hljs-number">1</span>] = nums[n - <span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> n - <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; i--) {<br>            minRight[i] = Math.min(nums[i], minRight[i + <span class="hljs-number">1</span>]);<br>        }<br>        <span class="hljs-type">int</span> <span class="hljs-variable">maxLeft</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; i++) {<br>            maxLeft = Math.max(maxLeft, nums[i]);<br>            <span class="hljs-keyword">if</span> (maxLeft &lt;= minRight[i + <span class="hljs-number">1</span>]) {<br>                <span class="hljs-keyword">return</span> i + <span class="hljs-number">1</span>;<br>            }<br>        }<br>        <span class="hljs-keyword">return</span> n - <span class="hljs-number">1</span>;<br>    }<br><br><br></code></pre></td></tr></tbody></table></figure><h4 id="647-å›æ–‡å­ä¸²"><a href="#647-å›æ–‡å­ä¸²" class="headerlink" title="647. å›æ–‡å­ä¸²"></a><a href="https://leetcode.cn/problems/palindromic-substrings/">647. å›æ–‡å­ä¸²</a></h4><p>æ ¹æ®é¢˜ç›®æè¿°æˆ‘ä»¬å‡è®¾ä¸€å…±æœ‰å››ä¸ªæ•°æ® æœ€åçš„æƒ…å†µæ¯ä¸ªéƒ½å½“æˆä¸­å¿ƒ è¿›è¡Œéå† ç”±ä¸‹è¡¨å¯ä»¥çŸ¥é“æ¯ä¸ªè¢«å½“æˆä¸­å¿ƒçš„æ¬¡æ•°ä¸º2*4-1ä¸€å…±ä¸ƒæ¬¡</p><p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œä¸€æ¬¡å¾ªç¯éå† å¹¶åœ¨é‡Œé¢ä¸æ–­è¿›è¡Œåˆ¤æ–­ å¾—å‡ºç»“æœ.</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221024203621990.png" alt="image-20221024203621990"></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">countSubstrings</span><span class="hljs-params">(String s)</span> {<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length(), ans = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">2</span> * n - <span class="hljs-number">1</span>; ++i) {<br>            <span class="hljs-comment">//æ ¹æ®é¢˜ç›®å¯ä»¥çŸ¥é“ å¯ä»¥ç§°ä¸ºä¸­å¿ƒçš„ç‚¹æœ‰2n-1ä¸ªæ‰€ä»¥ å¯¹å°†æ¯ä¸ªç‚¹å½“æˆä¸­å¿ƒç‚¹ è¿›è¡Œéå†å¹¶ä¸æ–­çš„è®°å½• </span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> i / <span class="hljs-number">2</span>, r = i / <span class="hljs-number">2</span> + i % <span class="hljs-number">2</span>;<br>            <span class="hljs-comment">//æ ¹æ®ä»¥ä¸Šè¡¨è¾¾å¼å¯ä»¥çŸ¥é“l rçš„å–å€¼ä¸º  00 01 11 12 22 23 33 .......</span><br>            <span class="hljs-keyword">while</span> (l &gt;= <span class="hljs-number">0</span> &amp;&amp; r &lt; n &amp;&amp; s.charAt(l) == s.charAt(r)) {<br>                --l;<br>                ++r;<br>                ++ans;<br>            }<br>        }<br>        <span class="hljs-keyword">return</span> ans;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="7-æ•´æ•°åè½¬"><a href="#7-æ•´æ•°åè½¬" class="headerlink" title="7. æ•´æ•°åè½¬"></a><a href="https://leetcode.cn/problems/reverse-integer/">7. æ•´æ•°åè½¬</a></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//é¢˜ç›®è§£æé¦–å…ˆæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸¤ä¸ªè¾¹ç•Œå€¼</span><br><span class="hljs-comment">//å…¶æ¬¡æ•´æ•°ç¿»è½¬å¦ä¸€æ–¹é¢ä¹Ÿæ˜¯ä¸æ–­çš„å–ä½™æ•°å’Œæ•´æ•°</span><br><span class="hljs-comment">//æ‰€ä»¥å¯ä»¥å®šä¹‰ä¸€ä¸ªrevæ¥æ¥å—æ€»å’Œ</span><br><span class="hljs-comment">//æœ‰ä¸ªå‘å°±æ˜¯ ä¸èƒ½æŒ‰åŸå…ˆçš„ è·Ÿè¾¹ç•Œå€¼è¿›è¡Œæ¯”è¾ƒåˆ¤æ–­è¶Šç•Œ å› ä¸ºå¾ˆæœ‰å¯èƒ½è¯¥æ•°å­—å·²ç»è¶Šç•Œäº†æ‰€ä»¥å†åˆ¤æ–­æ„ä¹‰ä¸å¤§</span><br><span class="hljs-comment">//è¯´ä»¥æˆ‘ä»¬å¯ä»¥å–å…¶ç¼©å°åå€çš„æ•°å­—æ¥è¿›è¡Œæ¯”è¾ƒ</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-comment">//é¦–å…ˆå°†æœ€å¤§å’Œæœ€å°çš„å€¼ç»™å®šä¹‰å‡ºæ¥</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">Max</span> <span class="hljs-operator">=</span> Integer.MAX_VALUE;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">Min</span> <span class="hljs-operator">=</span> Integer.MIN_VALUE;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">reverse</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> {<br>        <span class="hljs-comment">//è®°å½•ç¿»è½¬çš„å’Œ</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">rev</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> (x != <span class="hljs-number">0</span>) {<br>            <span class="hljs-comment">//è¿™ä¸ªéœ€è¦æå‰çš„è¿›è¡Œç»ˆç»“å¦åˆ™å°†ä¼šè¶Šç•Œ å¦‚æœè¶Šç•Œçš„è¯å°±ç›´æ¥é€€å‡º</span><br>            <span class="hljs-keyword">if</span> (rev &lt; Min / <span class="hljs-number">10</span> || rev &gt; Max / <span class="hljs-number">10</span>) {<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>            }<br>            <span class="hljs-comment">//å¾—åˆ°è¯¥æ•°å­—çš„ä½™æ•°</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">digit</span> <span class="hljs-operator">=</span> x % <span class="hljs-number">10</span>;<br>            <span class="hljs-comment">//å°†è¯¥æ•°å­—ç¼©å°åå€</span><br>            x /= <span class="hljs-number">10</span>;<br>            rev = rev * <span class="hljs-number">10</span> + digit;<br>        }<br>        <span class="hljs-keyword">return</span> rev;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="479-æœ€å¤§å›æ–‡æ•°ä¹˜ç§¯"><a href="#479-æœ€å¤§å›æ–‡æ•°ä¹˜ç§¯" class="headerlink" title="479. æœ€å¤§å›æ–‡æ•°ä¹˜ç§¯"></a><a href="https://leetcode.cn/problems/largest-palindrome-product/">479. æœ€å¤§å›æ–‡æ•°ä¹˜ç§¯</a></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">ç»™å®šä¸€ä¸ªæ•´æ•° n ï¼Œè¿”å› å¯è¡¨ç¤ºä¸ºä¸¤ä¸ª n ä½æ•´æ•°ä¹˜ç§¯çš„ æœ€å¤§å›æ–‡æ•´æ•° ã€‚</span><br><span class="hljs-comment">å› ä¸ºç­”æ¡ˆå¯èƒ½éå¸¸å¤§ï¼Œæ‰€ä»¥è¿”å›å®ƒå¯¹ 1337 å–ä½™ ã€‚*/</span><br><span class="hljs-comment">//æ ¹æ®é¢˜ç›®æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ”¾æ³•æšä¸¾æ³•ä»æœ€å¤§çš„å¼€å§‹ç®—èµ·å› ä¸ºä¾‹å¦‚ä¸¤ä½æ•°å­—ç›¸ä¹˜çš„ç»“æœè‚¯å®šä¸ä¼šè¶…è¿‡å››ä½æ•°å­—</span><br><span class="hljs-comment">//æ‰€ä»¥ä»9999 -9889 -9779.... è¿›è¡Œé€ä¸ªæ’é™¤ å½“æ»¡è¶³ä¸€å®šçš„æ¡ä»¶å°±å¯ä»¥è¿”å›</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">largestPalindrome</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> {<br>        <span class="hljs-comment">//å¦‚æœä¸º1ç›´æ¥è¿”å›9</span><br>        <span class="hljs-keyword">if</span> (n == <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">9</span>;<br>        <span class="hljs-comment">//å¾—åˆ°nä½æ•°çš„æœ€å¤§å€¼</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) Math.pow(<span class="hljs-number">10</span>, n) - <span class="hljs-number">1</span>;<br>        <span class="hljs-comment">//å¤–å±‚çš„iå¾ªç¯æ˜¯ä»æœ€å¤§å¼€å§‹çš„</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> max; i &gt;= <span class="hljs-number">0</span>; i--) {<br>            <span class="hljs-type">long</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> i, t = i;<br>            <span class="hljs-comment">//è¯¥å¾ªç¯ä¸»è¦å¾—åˆ°å›æ–‡æ•°</span><br>            <span class="hljs-keyword">while</span> (t != <span class="hljs-number">0</span>) {<br>                num = num * <span class="hljs-number">10</span> + (t % <span class="hljs-number">10</span>);<br>                t /= <span class="hljs-number">10</span>;<br>            }<br>            <span class="hljs-comment">//å½“æœ‰äº†å›æ–‡æ•° æ¯æ¬¡jä»æœ€å¤§å¼€å§‹é€ä¸ªé€’å‡ å½“ä¸æ»¡è¶³j*j&gt;=numæ˜¯åˆ™è¯´æ˜è¯¥æ•°å­—ä¸æ»¡è¶³</span><br>            <span class="hljs-comment">//å¦‚æœæ»¡è¶³äº†å°±è®©å…¶å’Œjå–æ¨¡å¦‚æœä¸º0çš„è¯è¯æ˜å·²ç»å¾—åˆ°ç¬¦åˆæ¡ä»¶çš„ç»“æœäº†æ­¤æ—¶çš„ä¸¤ä¸ªæ•°åªçŸ¥é“ä¸€ä¸ªjæ»¡è¶³</span><br>            <span class="hljs-comment">//å¦ä¸€ä¸ªéœ€è¦</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> max; j * j &gt;= num; j--) {<br>                <span class="hljs-keyword">if</span> (num % j == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> (<span class="hljs-type">int</span>)(num % <span class="hljs-number">1337</span>);<br>            }<br>        }<br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="862-å’Œè‡³å°‘ä¸º-K-çš„æœ€çŸ­å­æ•°ç»„"><a href="#862-å’Œè‡³å°‘ä¸º-K-çš„æœ€çŸ­å­æ•°ç»„" class="headerlink" title="862. å’Œè‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„"></a><a href="https://leetcode.cn/problems/shortest-subarray-with-sum-at-least-k/">862. å’Œè‡³å°‘ä¸º K çš„æœ€çŸ­å­æ•°ç»„</a></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//åŸºæœ¬æ€æƒ³å¦‚ä¸‹å›¾å¯ä»¥é¦–å…ˆè®¡ç®—å‡ºå‰ç¼€å’Œç„¶åå¼€å§‹ä»0éå†æ•´ä¸ªå‰ç¼€å’Œæ•°ç»„</span><br><span class="hljs-comment">//å¹¶åœ¨éå†çš„è¿‡ç¨‹ä¸­åˆ¤æ–­å¦‚æœæ‰¾åˆ°äº†ï¼ˆå½“å‰çš„å‰ç¼€å’Œ-é˜Ÿåˆ—ä¸­å­˜å…¥çš„å¤´ä¸‹æ ‡çš„å‰ç¼€å’Œ)&gt;=3è¯´æ˜è¯¥æ¡ä»¶ç¬¦åˆï¼Œç„¶åå°±å’Œres</span><br><span class="hljs-comment">//è¿›è¡Œæ¯”è¾ƒå–å…¶æœ€å°å€¼ï¼Œå¹¶å°†è¯¥ä¸‹æ ‡çš„å…ƒç´ å‡ºé˜Ÿåˆ—ï¼Œæ¥ç€whileå¾ªç¯çœ‹çœ‹å®¹å™¨å†…ä¸‹ä¸€ä¸ªæ˜¯å¦ä¹Ÿç¬¦åˆ</span><br><span class="hljs-comment">//ç¬¬äºŒä¸ªwhileå¾ªç¯ä»é˜Ÿåˆ—çš„æœ€åé¢å¼€å§‹åˆ¤æ–­ï¼Œåˆ¤æ–­ä¸Šä¸€ä¸ªå…ƒç´ æ˜¯å¦å¤§äºå½“å‰çš„å€¼å¦‚æœå¤§äºçš„è¯å°±ç›´æ¥å‡ºé˜Ÿåˆ—ï¼Œç„¶åå†è®©å½“å‰çš„å€¼å…¥é˜Ÿåˆ—</span><br><span class="hljs-comment">//ä½ å¯ä»¥è¿™æ ·ç†è§£ å½“å‰çš„å€¼å°äºå®ƒäº†ï¼Œä½ çš„ç›®æ ‡æ•°-å¤§äºå½“å‰æ•°&lt;ä½ çš„ç›®æ ‡æ•°-å½“å‰æ•° ä¹Ÿå°±æ˜¯å‰ä¸€ä¸ªç¬¦åˆ åé¢å¿…å®šç¬¦åˆå¤§äºk</span><br><span class="hljs-comment">//æ‰€ä»¥ä¸ç¬¦åˆç›´æ¥å‡ºæ ˆå°±å¯ä»¥äº†</span><br><span class="hljs-comment">//ä¸¤ä¸ªwhileç»“æŸå è®©å½“å‰éå†çš„ä¸‹æ ‡å…¥é˜Ÿåˆ—</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">shortestSubarray</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> k)</span> {<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> nums.length;<br>        <span class="hljs-type">long</span>[] preSumArr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">long</span>[n + <span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) {<br>            preSumArr[i + <span class="hljs-number">1</span>] = preSumArr[i] + nums[i];<br>        }<br>        <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> n + <span class="hljs-number">1</span>;<br>        Deque&lt;Integer&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;Integer&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= n; i++) {<br>            <span class="hljs-type">long</span> <span class="hljs-variable">curSum</span> <span class="hljs-operator">=</span> preSumArr[i];<br>            <span class="hljs-keyword">while</span> (!queue.isEmpty() &amp;&amp; curSum - preSumArr[queue.peekFirst()] &gt;= k) {<br>                res = Math.min(res, i - queue.removeFirst());<br>            }<br>            <span class="hljs-keyword">while</span> (!queue.isEmpty() &amp;&amp; preSumArr[queue.peekLast()] &gt;= curSum) {<br>                queue.removeLast();<br>            }<br>            queue.addLast(i);<br>        }<br>        <span class="hljs-keyword">return</span> res &lt; n + <span class="hljs-number">1</span> ? res : -<span class="hljs-number">1</span>;<br>    }<br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221026092351232.png" alt="image-20221026092351232"></p><h4 id="476-æ•°å­—çš„è¡¥æ•°"><a href="#476-æ•°å­—çš„è¡¥æ•°" class="headerlink" title="476. æ•°å­—çš„è¡¥æ•°"></a><a href="https://leetcode.cn/problems/number-complement/">476. æ•°å­—çš„è¡¥æ•°</a></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">findComplement</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> {<br>        <span class="hljs-comment">//æ€è·¯é¦–å…ˆå¯¹numå–å ä¾‹å¦‚5==&gt; 00101  å»åå  11010  å‰ä¸¤ä½æ˜¯ä¸éœ€è¦çš„  </span><br>        <span class="hljs-comment">//æ‰€ä»¥æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªmask å…¨æ˜¯11111ä¹Ÿå°±æ˜¯ 0çš„é</span><br>        <span class="hljs-comment">//æ¥ç€è®©ä»–å’Œnumç›¸ä¸ 11111&amp;00101=11010 ä¸ä¸º0æ¥ç€è®©maskå·¦ç§»ä¸€ä½åœ¨äºnumç›¸ä¸</span><br>        <span class="hljs-comment">//11110&amp;00101=00100  æ¥ç€å†å·¦ç§» ç›´åˆ° mask=11000 å’Œnum=00101ç›¸ä¸çš„ç»“æœä¸º0 æ­¤æ—¶å¾—åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„mask</span><br>        <span class="hljs-comment">//ç„¶åå°±è®©numå–å num=11010  åœ¨å’Œmaskå¼‚æˆ–å°±å¯ä»¥å¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœ</span><br>        <span class="hljs-type">int</span> mask=~<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span>((num &amp; mask)!=<span class="hljs-number">0</span>){<br>            mask&lt;&lt;=<span class="hljs-number">1</span>;<br>        }<br>        <span class="hljs-keyword">return</span> mask^(~num);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ›æ‰£ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot2å¼€å‘å®ç”¨ç¯‡(äºŒ)</title>
      <link href="/2022/10/25/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SpringBoot2%20%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/"/>
      <url>/2022/10/25/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SpringBoot2%20%E5%BC%80%E5%8F%91%E5%AE%9E%E7%94%A8%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringBoot2-å¼€å‘å®ç”¨ç¯‡"><a href="#SpringBoot2-å¼€å‘å®ç”¨ç¯‡" class="headerlink" title="SpringBoot2 å¼€å‘å®ç”¨ç¯‡"></a><code>SpringBoot2</code> å¼€å‘å®ç”¨ç¯‡</h1><h2 id="1-çƒ­éƒ¨ç½²"><a href="#1-çƒ­éƒ¨ç½²" class="headerlink" title="1.çƒ­éƒ¨ç½²"></a>1.çƒ­éƒ¨ç½²</h2><p>çƒ­éƒ¨ç½²ï¼šç¨‹åºæ”¹äº†ï¼Œç°åœ¨è¦é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œä¸ç”¨é‡å¯ï¼ŒæœåŠ¡å™¨ä¼šè‡ªå·±æ‚„æ‚„çš„æŠŠæ›´æ–°åçš„ç¨‹åºç»™é‡æ–°åŠ è½½ä¸€éï¼Œè¿™å°±æ˜¯çƒ­éƒ¨ç½²ã€‚</p><p><strong>éspringbooté¡¹ç›®çƒ­éƒ¨ç½²å®ç°åŸç†</strong>ï¼ˆéº»çƒ¦ï¼‰</p><p>â€‹    å¼€å‘éspringbooté¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬è¦åˆ¶ä½œä¸€ä¸ªwebå·¥ç¨‹å¹¶é€šè¿‡tomcatå¯åŠ¨ï¼Œé€šå¸¸éœ€è¦å…ˆå®‰è£…tomcatæœåŠ¡å™¨åˆ°ç£ç›˜ä¸­ï¼Œå¼€å‘çš„ç¨‹åºé…ç½®å‘å¸ƒåˆ°å®‰è£…çš„tomcatæœåŠ¡å™¨ä¸Šã€‚å¦‚æœæƒ³å®ç°çƒ­éƒ¨ç½²çš„æ•ˆæœï¼Œè¿™ç§æƒ…å†µå…¶å®æœ‰ä¸¤ç§åšæ³•ï¼Œä¸€ç§æ˜¯åœ¨tomcatæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œè¿™ç§åšæ³•ä¸ä½ ä½¿ç”¨ä»€ä¹ˆIDEå·¥å…·æ— å…³ï¼Œä¸ç®¡ä½ ä½¿ç”¨eclipseè¿˜æ˜¯ideaéƒ½è¡Œã€‚è¿˜æœ‰ä¸€ç§åšæ³•æ˜¯é€šè¿‡IDEå·¥å…·è¿›è¡Œé…ç½®ï¼Œæ¯”å¦‚åœ¨ideaå·¥å…·ä¸­è¿›è¡Œè®¾ç½®ï¼Œè¿™ç§å½¢å¼éœ€è¦ä¾èµ–IDEå·¥å…·ï¼Œæ¯æ¬¾IDEå·¥å…·ä¸åŒï¼Œå¯¹åº”çš„é…ç½®ä¹Ÿä¸å¤ªä¸€æ ·ã€‚ä½†æ˜¯æ ¸å¿ƒæ€æƒ³æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯ä½¿ç”¨æœåŠ¡å™¨å»ç›‘æ§å…¶ä¸­åŠ è½½çš„åº”ç”¨ï¼Œå‘ç°äº§ç”Ÿäº†å˜åŒ–å°±é‡æ–°åŠ è½½ä¸€æ¬¡ã€‚</p><p><strong>springbooté¡¹ç›®çƒ­éƒ¨ç½²å®ç°åŸç†</strong></p><p>â€‹    åŸºäºspringbootå¼€å‘çš„webå·¥ç¨‹å…¶å®æœ‰ä¸€ä¸ªæ˜¾è‘—çš„ç‰¹å¾ï¼Œå°±æ˜¯tomcatæœåŠ¡å™¨å†…ç½®äº†ï¼ŒæœåŠ¡å™¨æ˜¯ä»¥ä¸€ä¸ªå¯¹è±¡çš„å½¢å¼åœ¨springå®¹å™¨ä¸­è¿è¡Œçš„ã€‚æœ¬æ¥æˆ‘ä»¬æœŸæœ›äºtomcatæœåŠ¡å™¨åŠ è½½ç¨‹åºåç”±tomcatæœåŠ¡å™¨ç›¯ç€ç¨‹åºï¼Œä½ å˜åŒ–åæˆ‘å°±é‡æ–°å¯åŠ¨é‡æ–°åŠ è½½ï¼Œä½†æ˜¯ç°åœ¨tomcatå’Œæˆ‘ä»¬çš„ç¨‹åºæ˜¯å¹³çº§çš„äº†ï¼Œéƒ½æ˜¯springå®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œè¿™ä¸‹å°±éº»çƒ¦äº†ï¼Œç¼ºä¹äº†ä¸€ä¸ªç›´æ¥çš„ç®¡ç†æƒï¼Œé‚£è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿç®€å•ï¼Œå†æä¸€ä¸ªç¨‹åºXåœ¨springå®¹å™¨ä¸­ç›¯ç€ä½ åŸå§‹å¼€å‘çš„ç¨‹åºAä¸å°±è¡Œäº†å—ï¼Ÿç¡®å®ï¼Œæä¸€ä¸ªç›¯ç€ç¨‹åºAçš„ç¨‹åºXå°±è¡Œäº†ï¼Œå¦‚æœä½ è‡ªå·±å¼€å‘çš„ç¨‹åºAå˜åŒ–äº†ï¼Œé‚£ä¹ˆç¨‹åºXå°±å‘½ä»¤tomcatå®¹å™¨é‡æ–°åŠ è½½ç¨‹åºAå°±OKäº†ã€‚å¹¶ä¸”è¿™æ ·åšæœ‰ä¸€ä¸ªå¥½å¤„ï¼Œspringå®¹å™¨ä¸­ä¸œè¥¿ä¸ç”¨å…¨éƒ¨é‡æ–°åŠ è½½ä¸€éï¼Œåªéœ€è¦é‡æ–°åŠ è½½ä½ å¼€å‘çš„ç¨‹åºé‚£ä¸€éƒ¨åˆ†å°±å¯ä»¥äº†ï¼Œè¿™ä¸‹æ•ˆç‡åˆé«˜äº†ï¼ŒæŒºå¥½ã€‚</p><h3 id="æ‰‹åŠ¨å¯åŠ¨çƒ­éƒ¨ç½²"><a href="#æ‰‹åŠ¨å¯åŠ¨çƒ­éƒ¨ç½²" class="headerlink" title="æ‰‹åŠ¨å¯åŠ¨çƒ­éƒ¨ç½²"></a>æ‰‹åŠ¨å¯åŠ¨çƒ­éƒ¨ç½²</h3><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥å¼€å‘è€…å·¥å…·å¯¹åº”çš„åæ ‡</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p><strong>æ­¥éª¤â‘¡</strong>ï¼šæ„å»ºé¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨å¿«æ·é”®æ¿€æ´»æ­¤åŠŸèƒ½</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025150834095.png" alt="image-20221025150834095"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025150949793.png" alt="image-20221025150949793"></p><p>è¿™æ ·ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™å°±å¯ä»¥è¿›è¡Œè‡ªåŠ¨æ„å»ºäº†ï¼Œå®ç°äº†çƒ­éƒ¨ç½²çš„æ•ˆæœã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>è‡ªåŠ¨çƒ­éƒ¨ç½²è¦å¼€å¯è‡ªåŠ¨æ„å»ºé¡¹ç›®</li><li>è‡ªåŠ¨çƒ­éƒ¨ç½²è¦å¼€å¯åœ¨ç¨‹åºè¿è¡Œæ—¶è‡ªåŠ¨æ„å»ºé¡¹ç›®</li></ol><h3 id="è‡ªåŠ¨å¯åŠ¨çƒ­éƒ¨ç½²"><a href="#è‡ªåŠ¨å¯åŠ¨çƒ­éƒ¨ç½²" class="headerlink" title="è‡ªåŠ¨å¯åŠ¨çƒ­éƒ¨ç½²"></a>è‡ªåŠ¨å¯åŠ¨çƒ­éƒ¨ç½²</h3><p>â€‹    è‡ªåŠ¨çƒ­éƒ¨ç½²å…¶å®å°±æ˜¯è®¾è®¡ä¸€ä¸ªå¼€å…³ï¼Œæ‰“å¼€è¿™ä¸ªå¼€å…³åï¼ŒIDEå·¥å…·å°±å¯ä»¥è‡ªåŠ¨çƒ­éƒ¨ç½²ã€‚å› æ­¤è¿™ä¸ªæ“ä½œå’ŒIDEå·¥å…·æœ‰å…³ï¼Œä»¥ä¸‹ä»¥ideaä¸ºä¾‹è®¾ç½®ideaä¸­å¯åŠ¨çƒ­éƒ¨ç½²</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šè®¾ç½®è‡ªåŠ¨æ„å»ºé¡¹ç›®</p><p>â€‹    æ‰“å¼€ã€Fileã€‘ï¼Œé€‰æ‹©ã€settingsâ€¦ã€‘,åœ¨é¢æ¿å·¦ä¾§çš„èœå•ä¸­æ‰¾åˆ°ã€Compileã€‘é€‰é¡¹ï¼Œç„¶åå‹¾é€‰ã€Build project automaticallyã€‘ï¼Œæ„æ€æ˜¯è‡ªåŠ¨æ„å»ºé¡¹ç›®</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025152000279.png" alt="image-20221025152000279"></p><p>â€‹    è‡ªåŠ¨æ„å»ºé¡¹ç›®é€‰é¡¹å‹¾é€‰å</p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šå…è®¸åœ¨ç¨‹åºè¿è¡Œæ—¶è¿›è¡Œè‡ªåŠ¨æ„å»º</p><p>â€‹        ä½¿ç”¨å¿«æ·é”®ã€Ctrlã€‘+ã€Altã€‘+ã€Shitã€‘+ã€/ã€‘æ‰“å¼€ç»´æŠ¤é¢æ¿ï¼Œé€‰æ‹©ç¬¬1é¡¹ã€Registryâ€¦ã€‘</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025152051460.png" alt="image-20221025152051460"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025152258418.png" alt="image-20221025152258418"></p><p>â€‹    è¿™æ ·ç¨‹åºåœ¨è¿è¡Œçš„æ—¶å€™å°±å¯ä»¥è¿›è¡Œè‡ªåŠ¨æ„å»ºäº†ï¼Œå®ç°äº†çƒ­éƒ¨ç½²çš„æ•ˆæœã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>è‡ªåŠ¨çƒ­éƒ¨ç½²è¦å¼€å¯è‡ªåŠ¨æ„å»ºé¡¹ç›®</li><li>è‡ªåŠ¨çƒ­éƒ¨ç½²è¦å¼€å¯åœ¨ç¨‹åºè¿è¡Œæ—¶è‡ªåŠ¨æ„å»ºé¡¹ç›®</li></ol><h3 id="å‚ä¸çƒ­éƒ¨ç½²ç›‘æ§çš„æ–‡ä»¶èŒƒå›´é…ç½®"><a href="#å‚ä¸çƒ­éƒ¨ç½²ç›‘æ§çš„æ–‡ä»¶èŒƒå›´é…ç½®" class="headerlink" title="å‚ä¸çƒ­éƒ¨ç½²ç›‘æ§çš„æ–‡ä»¶èŒƒå›´é…ç½®"></a>å‚ä¸çƒ­éƒ¨ç½²ç›‘æ§çš„æ–‡ä»¶èŒƒå›´é…ç½®</h3><p>é€šè¿‡ä¿®æ”¹é¡¹ç›®ä¸­çš„æ–‡ä»¶ï¼Œä½ å¯ä»¥å‘ç°å…¶å®å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ–‡ä»¶ä¿®æ”¹éƒ½ä¼šæ¿€æ´»çƒ­éƒ¨ç½²çš„ï¼ŒåŸå› åœ¨äºåœ¨å¼€å‘è€…å·¥å…·ä¸­æœ‰ä¸€ç»„é…ç½®ï¼Œå½“æ»¡è¶³äº†é…ç½®ä¸­çš„æ¡ä»¶åï¼Œæ‰ä¼šå¯åŠ¨çƒ­éƒ¨ç½²ï¼Œé…ç½®ä¸­é»˜è®¤ä¸å‚ä¸çƒ­éƒ¨ç½²çš„ç›®å½•ä¿¡æ¯å¦‚ä¸‹</p><ul><li>/META-INF/maven</li><li>/META-INF/resources</li><li>/resources</li><li>/static</li><li>/public</li><li>/templates</li></ul><p>â€‹        ä»¥ä¸Šç›®å½•ä¸­çš„æ–‡ä»¶å¦‚æœå‘ç”Ÿå˜åŒ–ï¼Œæ˜¯ä¸å‚ä¸çƒ­éƒ¨ç½²çš„ã€‚å¦‚æœæƒ³ä¿®æ”¹é…ç½®ï¼Œå¯ä»¥é€šè¿‡application.ymlæ–‡ä»¶è¿›è¡Œè®¾å®šå“ªäº›æ–‡ä»¶ä¸å‚ä¸çƒ­éƒ¨ç½²æ“ä½œ</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">devtools:</span><br>    <span class="hljs-attr">restart:</span><br>      <span class="hljs-comment"># è®¾ç½®ä¸å‚ä¸çƒ­éƒ¨ç½²çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹</span><br>      <span class="hljs-attr">exclude:</span> <span class="hljs-string">static/**,public/**,config/application.yml</span><br></code></pre></td></tr></tbody></table></figure><h4 id="å…³é—­çƒ­éƒ¨ç½²"><a href="#å…³é—­çƒ­éƒ¨ç½²" class="headerlink" title="å…³é—­çƒ­éƒ¨ç½²"></a>å…³é—­çƒ­éƒ¨ç½²</h4><p>çº¿ä¸Šç¯å¢ƒè¿è¡Œæ—¶æ˜¯ä¸å¯èƒ½ä½¿ç”¨çƒ­éƒ¨ç½²åŠŸèƒ½çš„ï¼Œæ‰€ä»¥éœ€è¦å¼ºåˆ¶å…³é—­æ­¤åŠŸèƒ½ï¼Œé€šè¿‡é…ç½®å¯ä»¥å…³é—­æ­¤åŠŸèƒ½ã€‚</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">devtools:</span><br>    <span class="hljs-attr">restart:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœå½“å¿ƒé…ç½®æ–‡ä»¶å±‚çº§è¿‡å¤šå¯¼è‡´ç›¸ç¬¦è¦†ç›–æœ€ç»ˆå¼•èµ·é…ç½®å¤±æ•ˆï¼Œå¯ä»¥æé«˜é…ç½®çš„å±‚çº§ï¼Œåœ¨æ›´é«˜å±‚çº§ä¸­é…ç½®å…³é—­çƒ­éƒ¨ç½²ã€‚ä¾‹å¦‚åœ¨å¯åŠ¨å®¹å™¨å‰é€šè¿‡ç³»ç»Ÿå±æ€§è®¾ç½®å…³é—­çƒ­éƒ¨ç½²åŠŸèƒ½ã€‚</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">@SpringBootApplication</span><br><span class="hljs-string">public</span> <span class="hljs-string">class</span> <span class="hljs-string">SSMPApplication</span> {<br>    <span class="hljs-string">public</span> <span class="hljs-string">static</span> <span class="hljs-string">void</span> <span class="hljs-string">main(String</span>[] <span class="hljs-string">args)</span> {<br>        <span class="hljs-string">System.setProperty("spring.devtools.restart.enabled"</span>,<span class="hljs-string">"false"</span><span class="hljs-string">);</span><br>        <span class="hljs-string">SpringApplication.run(SSMPApplication.class);</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>é€šè¿‡é…ç½®å¯ä»¥å…³é—­çƒ­éƒ¨ç½²åŠŸèƒ½é™ä½çº¿ä¸Šç¨‹åºçš„èµ„æºæ¶ˆè€—</li></ol><h3 id="é…ç½®é«˜çº§"><a href="#é…ç½®é«˜çº§" class="headerlink" title="é…ç½®é«˜çº§"></a>é…ç½®é«˜çº§</h3><h4 id="ConfigurationProperties"><a href="#ConfigurationProperties" class="headerlink" title="@ConfigurationProperties"></a>@ConfigurationProperties</h4><p>@ConfigurationPropertiesæ³¨è§£ï¼Œæ­¤æ³¨è§£çš„ä½œç”¨æ˜¯ç”¨æ¥ä¸ºbeanç»‘å®šå±æ€§çš„ã€‚å¼€å‘è€…å¯ä»¥åœ¨ymlé…ç½®æ–‡ä»¶ä¸­ä»¥å¯¹è±¡çš„æ ¼å¼æ·»åŠ è‹¥å¹²å±æ€§</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">servers:</span><br>  <span class="hljs-attr">ip-address:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> <br>  <span class="hljs-attr">port:</span> <span class="hljs-number">2345</span><br>  <span class="hljs-attr">timeout:</span> <span class="hljs-number">-1</span><br></code></pre></td></tr></tbody></table></figure><p>ç„¶åå†å¼€å‘ä¸€ä¸ªç”¨æ¥å°è£…æ•°æ®çš„å®ä½“ç±»ï¼Œæ³¨æ„è¦æä¾›å±æ€§å¯¹åº”çš„setteræ–¹æ³•</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerConfig</span> {<br>    <span class="hljs-keyword">private</span> String ipAddress;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> timeout;<br>}<br></code></pre></td></tr></tbody></table></figure><p>ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å°±å¯ä»¥å°†é…ç½®ä¸­çš„å±æ€§å€¼å…³è”åˆ°å¼€å‘çš„æ¨¡å‹ç±»ä¸Š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = "servers")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerConfig</span> {<br>    <span class="hljs-keyword">private</span> String ipAddress;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> timeout;<br>}<br></code></pre></td></tr></tbody></table></figure><p>è¿™æ ·åŠ è½½å¯¹åº”beançš„æ—¶å€™å°±å¯ä»¥ç›´æ¥åŠ è½½é…ç½®å±æ€§å€¼äº†ã€‚ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å…¶å®å¯ä»¥ä¸ºç¬¬ä¸‰æ–¹beanåŠ è½½å±æ€§ï¼Œæ ¼å¼ç‰¹æ®Šä¸€ç‚¹è€Œå·²ã€‚</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šä½¿ç”¨@Beanæ³¨è§£å®šä¹‰ç¬¬ä¸‰æ–¹bean</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-keyword">public</span> DruidDataSource <span class="hljs-title function_">datasource</span><span class="hljs-params">()</span>{<br>    <span class="hljs-type">DruidDataSource</span> <span class="hljs-variable">ds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();<br>    <span class="hljs-keyword">return</span> ds;<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>æ­¥éª¤â‘¡</strong>ï¼šåœ¨ymlä¸­å®šä¹‰è¦ç»‘å®šçš„å±æ€§ï¼Œæ³¨æ„datasourceæ­¤æ—¶å…¨å°å†™</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">datasource:</span><br>  <span class="hljs-attr">driverClassName:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span><br></code></pre></td></tr></tbody></table></figure><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ä¸ºç¬¬ä¸‰æ–¹beanè¿›è¡Œå±æ€§ç»‘å®šï¼Œæ³¨æ„å‰ç¼€æ˜¯å…¨å°å†™çš„datasource</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = "datasource")</span><br><span class="hljs-keyword">public</span> DruidDataSource <span class="hljs-title function_">datasource</span><span class="hljs-params">()</span>{<br>    <span class="hljs-type">DruidDataSource</span> <span class="hljs-variable">ds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();<br>    <span class="hljs-keyword">return</span> ds;<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹     æ“ä½œæ–¹å¼å®Œå…¨ä¸€æ ·ï¼Œåªä¸è¿‡@ConfigurationPropertiesæ³¨è§£ä¸ä»…èƒ½æ·»åŠ åˆ°ç±»ä¸Šï¼Œè¿˜å¯ä»¥æ·»åŠ åˆ°æ–¹æ³•ä¸Šï¼Œæ·»åŠ åˆ°ç±»ä¸Šæ˜¯ä¸ºspringå®¹å™¨ç®¡ç†çš„å½“å‰ç±»çš„å¯¹è±¡ç»‘å®šå±æ€§ï¼Œæ·»åŠ åˆ°æ–¹æ³•ä¸Šæ˜¯ä¸ºspringå®¹å™¨ç®¡ç†çš„å½“å‰æ–¹æ³•çš„è¿”å›å€¼å¯¹è±¡ç»‘å®šå±æ€§ï¼Œå…¶å®æœ¬è´¨ä¸Šéƒ½ä¸€æ ·ã€‚</p><p>â€‹    åšåˆ°è¿™å…¶å®å°±å‡ºç°äº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œç›®å‰æˆ‘ä»¬å®šä¹‰beanä¸æ˜¯é€šè¿‡ç±»æ³¨è§£å®šä¹‰å°±æ˜¯é€šè¿‡@Beanå®šä¹‰ï¼Œä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å¯ä»¥ä¸ºbeanè¿›è¡Œå±æ€§ç»‘å®šï¼Œé‚£åœ¨ä¸€ä¸ªä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œå“ªäº›beané€šè¿‡æ³¨è§£@ConfigurationPropertieså»ç»‘å®šå±æ€§äº†å‘¢ï¼Ÿå› ä¸ºè¿™ä¸ªæ³¨è§£ä¸ä»…å¯ä»¥å†™åœ¨ç±»ä¸Šï¼Œè¿˜å¯ä»¥å†™åœ¨æ–¹æ³•ä¸Šï¼Œæ‰€ä»¥æ‰¾èµ·æ¥å°±æ¯”è¾ƒéº»çƒ¦äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œspringç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå…¨æ–°çš„æ³¨è§£ï¼Œä¸“é—¨æ ‡æ³¨ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ç»‘å®šå±æ€§çš„beanæ˜¯å“ªäº›ã€‚è¿™ä¸ªæ³¨è§£å«åš@EnableConfigurationPropertiesã€‚å…·ä½“å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šåœ¨é…ç½®ç±»ä¸Šå¼€å¯@EnableConfigurationPropertiesæ³¨è§£ï¼Œå¹¶æ ‡æ³¨è¦ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ç»‘å®šå±æ€§çš„ç±»</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-meta">@EnableConfigurationProperties(ServerConfig.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Springboot13ConfigurationApplication</span> {<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>æ­¥éª¤â‘¡</strong>ï¼šåœ¨å¯¹åº”çš„ç±»ä¸Šç›´æ¥ä½¿ç”¨@ConfigurationPropertiesè¿›è¡Œå±æ€§ç»‘å®š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = "servers")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerConfig</span> {<br>    <span class="hljs-keyword">private</span> String ipAddress;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> timeout;<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    ç°åœ¨ç»‘å®šå±æ€§çš„ServerConfigç±»å¹¶æ²¡æœ‰å£°æ˜@Componentæ³¨è§£ã€‚å½“ä½¿ç”¨@EnableConfigurationPropertiesæ³¨è§£æ—¶ï¼Œspringä¼šé»˜è®¤å°†å…¶æ ‡æ³¨çš„ç±»å®šä¹‰ä¸ºbeanï¼Œå› æ­¤æ— éœ€å†æ¬¡å£°æ˜@Componentæ³¨è§£äº†ã€‚</p><p>æœ€åå†è¯´ä¸€ä¸ªå°æŠ€å·§ï¼Œä½¿ç”¨@ConfigurationPropertiesæ³¨è§£æ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªæç¤ºä¿¡æ¯</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025161509262.png" alt="image-20221025161509262"></p><p>å‡ºç°è¿™ä¸ªæç¤ºååªéœ€è¦æ·»åŠ ä¸€ä¸ªåæ ‡æ­¤æé†’å°±æ¶ˆå¤±äº†</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨@ConfigurationPropertieså¯ä»¥ä¸ºä½¿ç”¨@Beanå£°æ˜çš„ç¬¬ä¸‰æ–¹beanç»‘å®šå±æ€§</li><li>å½“ä½¿ç”¨@EnableConfigurationPropertieså£°æ˜è¿›è¡Œå±æ€§ç»‘å®šçš„beanåï¼Œæ— éœ€ä½¿ç”¨@Componentæ³¨è§£å†æ¬¡è¿›è¡Œbeanå£°æ˜</li></ol><h3 id="å®½æ¾ç»‘å®š-æ¾æ•£ç»‘å®š"><a href="#å®½æ¾ç»‘å®š-æ¾æ•£ç»‘å®š" class="headerlink" title="å®½æ¾ç»‘å®š/æ¾æ•£ç»‘å®š"></a>å®½æ¾ç»‘å®š/æ¾æ•£ç»‘å®š</h3><p>â€‹    åœ¨è¿›è¡Œå±æ€§ç»‘å®šæ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹æƒ…å†µï¼Œä¸ºäº†è¿›è¡Œæ ‡å‡†å‘½åï¼Œå¼€å‘è€…ä¼šå°†å±æ€§åä¸¥æ ¼æŒ‰ç…§é©¼å³°å‘½åæ³•ä¹¦å†™ï¼Œåœ¨ymlé…ç½®æ–‡ä»¶ä¸­å°†datasourceä¿®æ”¹ä¸ºdataSourceï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">dataSource:</span><br>  <span class="hljs-attr">driverClassName:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span><br></code></pre></td></tr></tbody></table></figure><p>æ­¤æ—¶ç¨‹åºå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œç„¶ååˆå°†ä»£ç ä¸­çš„å‰ç¼€datasourceä¿®æ”¹ä¸ºdataSourceï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = "dataSource")</span>  <span class="hljs-comment">//å‘ç”Ÿé”™è¯¯ è¿™é‡Œåªèƒ½è¿›è¡Œå°å†™</span><br><span class="hljs-keyword">public</span> DruidDataSource <span class="hljs-title function_">datasource</span><span class="hljs-params">()</span>{<br>    <span class="hljs-type">DruidDataSource</span> <span class="hljs-variable">ds</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();<br>    <span class="hljs-keyword">return</span> ds;<br>}<br><span class="hljs-comment">//æ­¤æ—¶å°±å‘ç”Ÿäº†ç¼–è¯‘é”™è¯¯ï¼Œè€Œä¸”å¹¶ä¸æ˜¯ideaå·¥å…·å¯¼è‡´çš„ï¼Œè¿è¡Œåä¾ç„¶ä¼šå‡ºç°é—®é¢˜ï¼Œé…ç½®å±æ€§ådataSourceæ˜¯æ— æ•ˆçš„</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">Configuration property name 'dataSource' is not valid:</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    Invalid characters: 'S'</span><br><span class="hljs-comment">    Bean: datasource</span><br><span class="hljs-comment">    Reason: Canonical names should be kebab-case ('-' separated), lowercase alpha-numeric characters and must start with a letter</span><br><span class="hljs-comment">Action:</span><br><span class="hljs-comment">Modify 'dataSource' so that it conforms to the canonical names requirements.</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></tbody></table></figure><p>springbootè¿›è¡Œå±æ€§ç»‘å®šæ—¶çš„ä¸€ä¸ªé‡è¦çŸ¥è¯†ç‚¹äº†ï¼Œæœ‰å…³å±æ€§åç§°çš„å®½æ¾ç»‘å®šï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºå®½æ¾ç»‘å®šã€‚</p><p>â€‹    ä¾‹å¦‚ï¼šåœ¨ServerConfigä¸­çš„ipAddresså±æ€§å</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = "servers")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerConfig</span> {<br>    <span class="hljs-keyword">private</span> String ipAddress;<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    å¯ä»¥ä¸ä¸‹é¢çš„é…ç½®å±æ€§åè§„åˆ™å…¨å…¼å®¹</p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">servers:</span><br>  <span class="hljs-attr">ipAddress:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.2</span>       <span class="hljs-comment"># é©¼å³°æ¨¡å¼</span><br>  <span class="hljs-attr">ip_address:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.2</span>      <span class="hljs-comment"># ä¸‹åˆ’çº¿æ¨¡å¼</span><br>  <span class="hljs-attr">ip-address:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.2</span>      <span class="hljs-comment"># çƒ¤è‚‰ä¸²æ¨¡å¼</span><br>  <span class="hljs-attr">IP_ADDRESS:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.2</span>      <span class="hljs-comment"># å¸¸é‡æ¨¡å¼</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹        ä¹Ÿå¯ä»¥è¯´ï¼Œä»¥ä¸Š4ç§æ¨¡å¼æœ€ç»ˆéƒ½å¯ä»¥åŒ¹é…åˆ°ipAddressè¿™ä¸ªå±æ€§å,åŸå› å°±æ˜¯åœ¨è¿›è¡ŒåŒ¹é…æ—¶ï¼Œé…ç½®ä¸­çš„åç§°è¦å»æ‰ä¸­åˆ’çº¿å’Œä¸‹åˆ’çº¿åï¼Œå¿½ç•¥å¤§å°å†™çš„æƒ…å†µä¸‹å»ä¸javaä»£ç ä¸­çš„å±æ€§åè¿›è¡Œå¿½ç•¥å¤§å°å†™çš„ç­‰å€¼åŒ¹é…ï¼Œä»¥ä¸Š4ç§å‘½åå»æ‰ä¸‹åˆ’çº¿ä¸­åˆ’çº¿å¿½ç•¥å¤§å°å†™åéƒ½æ˜¯ä¸€ä¸ªè¯ipaddressï¼Œjavaä»£ç ä¸­çš„å±æ€§åå¿½ç•¥å¤§å°å†™åä¹Ÿæ˜¯ipaddressï¼Œè¿™æ ·å°±å¯ä»¥è¿›è¡Œç­‰å€¼åŒ¹é…äº†ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™4ç§æ ¼å¼éƒ½èƒ½åŒ¹é…æˆåŠŸçš„åŸå› ã€‚</p><p>â€‹        ä»¥ä¸Šè§„åˆ™ä»…é’ˆå¯¹springbootä¸­@ConfigurationPropertiesæ³¨è§£è¿›è¡Œå±æ€§ç»‘å®šæ—¶æœ‰æ•ˆï¼Œå¯¹@Valueæ³¨è§£è¿›è¡Œå±æ€§æ˜ å°„æ— æ•ˆã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>@ConfigurationPropertiesç»‘å®šå±æ€§æ—¶æ”¯æŒå±æ€§åå®½æ¾ç»‘å®šï¼Œè¿™ä¸ªå®½æ¾ä½“ç°åœ¨å±æ€§åçš„å‘½åè§„åˆ™ä¸Š</li><li>@Valueæ³¨è§£ä¸æ”¯æŒæ¾æ•£ç»‘å®šè§„åˆ™</li><li>ç»‘å®šå‰ç¼€åæ¨èé‡‡ç”¨çƒ¤è‚‰ä¸²å‘½åè§„åˆ™ï¼Œå³ä½¿ç”¨ä¸­åˆ’çº¿åšåˆ†éš”ç¬¦</li></ol><h3 id="å¸¸ç”¨è®¡é‡å•ä½ç»‘å®š"><a href="#å¸¸ç”¨è®¡é‡å•ä½ç»‘å®š" class="headerlink" title="å¸¸ç”¨è®¡é‡å•ä½ç»‘å®š"></a>å¸¸ç”¨è®¡é‡å•ä½ç»‘å®š</h3><p>â€‹        ç¬¬ä¸‰é¡¹è¶…æ—¶æ—¶é—´timeoutæè¿°äº†æœåŠ¡å™¨æ“ä½œè¶…æ—¶æ—¶é—´ï¼Œå½“å‰å€¼æ˜¯-1è¡¨ç¤ºæ°¸ä¸è¶…æ—¶ã€‚</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">servers:</span><br>  <span class="hljs-attr">ip-address:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span> <br>  <span class="hljs-attr">port:</span> <span class="hljs-number">2345</span><br>  <span class="hljs-attr">timeout:</span> <span class="hljs-number">-1</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹    æ¯ä¸ªäººéƒ½è¿™ä¸ªå€¼çš„ç†è§£ä¼šäº§ç”Ÿä¸åŒå¯èƒ½æ˜¯åˆ†é’Ÿä¹Ÿå¯èƒ½æ˜¯ç§’ï¼›</p><p>â€‹        é™¤äº†åŠ å¼ºçº¦å®šä¹‹å¤–ï¼Œspringbootå……åˆ†åˆ©ç”¨äº†JDK8ä¸­æä¾›çš„å…¨æ–°çš„ç”¨æ¥è¡¨ç¤ºè®¡é‡å•ä½çš„æ–°æ•°æ®ç±»å‹ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä»¥ä¸‹æ¨¡å‹ç±»ä¸­æ·»åŠ äº†ä¸¤ä¸ªJDK8ä¸­æ–°å¢çš„ç±»ï¼Œåˆ†åˆ«æ˜¯Durationå’ŒDataSize</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = "servers")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerConfig</span> {<br>    <span class="hljs-meta">@DurationUnit(ChronoUnit.HOURS)</span><br>    <span class="hljs-keyword">private</span> Duration serverTimeOut;<br>    <span class="hljs-meta">@DataSizeUnit(DataUnit.MEGABYTES)</span><br>    <span class="hljs-keyword">private</span> DataSize dataSize;<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>Duration</strong>ï¼šè¡¨ç¤ºæ—¶é—´é—´éš”ï¼Œå¯ä»¥é€šè¿‡@DurationUnitæ³¨è§£æè¿°æ—¶é—´å•ä½ï¼Œä¾‹å¦‚ä¸Šä¾‹ä¸­æè¿°çš„å•ä½ä¸ºå°æ—¶ï¼ˆChronoUnit.HOURSï¼‰</p><p><strong>DataSize</strong>ï¼šè¡¨ç¤ºå­˜å‚¨ç©ºé—´ï¼Œå¯ä»¥é€šè¿‡@DataSizeUnitæ³¨è§£æè¿°å­˜å‚¨ç©ºé—´å•ä½ï¼Œä¾‹å¦‚ä¸Šä¾‹ä¸­æè¿°çš„å•ä½ä¸ºMBï¼ˆDataUnit.MEGABYTESï¼‰</p><p>â€‹    ä½¿ç”¨ä¸Šè¿°ä¸¤ä¸ªå•ä½å°±å¯ä»¥æœ‰æ•ˆé¿å…å› æ²Ÿé€šä¸åŒæ­¥æˆ–æ–‡æ¡£ä¸å¥å…¨å¯¼è‡´çš„ä¿¡æ¯ä¸å¯¹ç§°é—®é¢˜ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†é—®é¢˜ï¼Œé¿å…äº§ç”Ÿè¯¯è¯»ã€‚</p><p>Druationå¸¸ç”¨å•ä½å¦‚ä¸‹ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025163753780.png" alt="image-20221025163753780"></p><p>DataSizeå¸¸ç”¨å•ä½å¦‚ä¸‹ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025163822400.png" alt="image-20221025163822400"></p><p>å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥å†ymlæ–‡ä»¶ä¸­å®šä¹‰å•ä½</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">servers:</span><br>  <span class="hljs-attr">ip-address:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">2345</span><br>  <span class="hljs-attr">timeout:</span> <span class="hljs-number">-1</span><br>  <span class="hljs-attr">serverTime:</span> <span class="hljs-string">3h</span><br>  <span class="hljs-attr">datasize:</span> <span class="hljs-string">10MB</span><br></code></pre></td></tr></tbody></table></figure><p>è¾“å…¥ç»“æœï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025163947253.png" alt="image-20221025163947253"></p><h3 id="æ ¡éªŒ"><a href="#æ ¡éªŒ" class="headerlink" title="æ ¡éªŒ"></a>æ ¡éªŒ</h3><p>SpringBootç»™å‡ºäº†å¼ºå¤§çš„æ•°æ®æ ¡éªŒåŠŸèƒ½ï¼Œå¯ä»¥æœ‰æ•ˆçš„é¿å…æ­¤ç±»é—®é¢˜çš„å‘ç”Ÿã€‚åœ¨JAVAEEçš„JSR303è§„èŒƒä¸­ç»™å‡ºäº†å…·ä½“çš„æ•°æ®æ ¡éªŒæ ‡å‡†ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©å¯¹åº”çš„æ ¡éªŒæ¡†æ¶ï¼Œæ­¤å¤„ä½¿ç”¨Hibernateæä¾›çš„æ ¡éªŒæ¡†æ¶æ¥ä½œä¸ºå®ç°è¿›è¡Œæ•°æ®æ ¡éªŒ.</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¼€å¯æ ¡éªŒæ¡†æ¶</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--1.å¯¼å…¥JSR303è§„èŒƒ--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.validation<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>validation-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--ä½¿ç”¨hibernateæ¡†æ¶æä¾›çš„æ ¡éªŒå™¨åšå®ç°--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.hibernate.validator<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hibernate-validator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p><strong>æ­¥éª¤â‘¡</strong>ï¼šåœ¨éœ€è¦å¼€å¯æ ¡éªŒåŠŸèƒ½çš„ç±»ä¸Šä½¿ç”¨æ³¨è§£@Validatedå¼€å¯æ ¡éªŒåŠŸèƒ½</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = "servers")</span><br><span class="hljs-comment">//å¼€å¯å¯¹å½“å‰beançš„å±æ€§æ³¨å…¥æ ¡éªŒ</span><br><span class="hljs-meta">@Validated</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerConfig</span> {<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>æ­¥éª¤â‘¢</strong>ï¼šå¯¹å…·ä½“çš„å­—æ®µè®¾ç½®æ ¡éªŒè§„åˆ™</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = "servers")</span><br><span class="hljs-comment">//å¼€å¯å¯¹å½“å‰beançš„å±æ€§æ³¨å…¥æ ¡éªŒ</span><br><span class="hljs-meta">@Validated</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServerConfig</span> {<br>    <span class="hljs-comment">//è®¾ç½®å…·ä½“çš„è§„åˆ™</span><br>    <span class="hljs-meta">@Max(value = 8888,message = "æœ€å¤§å€¼ä¸èƒ½è¶…è¿‡8888")</span><br>    <span class="hljs-meta">@Min(value = 202,message = "æœ€å°å€¼ä¸èƒ½ä½äº202")</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port;<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    é€šè¿‡è®¾ç½®æ•°æ®æ ¼å¼æ ¡éªŒï¼Œå°±å¯ä»¥æœ‰æ•ˆé¿å…éæ³•æ•°æ®åŠ è½½ï¼Œå…¶å®ä½¿ç”¨èµ·æ¥è¿˜æ˜¯æŒºè½»æ¾çš„ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªæ ¼å¼ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>å¼€å¯Beanå±æ€§æ ¡éªŒåŠŸèƒ½ä¸€å…±3æ­¥ï¼šå¯¼å…¥JSR303ä¸Hibernateæ ¡éªŒæ¡†æ¶åæ ‡ã€ä½¿ç”¨@Validatedæ³¨è§£å¯ç”¨æ ¡éªŒåŠŸèƒ½ã€ä½¿ç”¨å…·ä½“æ ¡éªŒè§„åˆ™è§„èŒƒæ•°æ®æ ¡éªŒæ ¼å¼</li></ol><h3 id="æ•°æ®ç±»å‹è½¬æ¢"><a href="#æ•°æ®ç±»å‹è½¬æ¢" class="headerlink" title="æ•°æ®ç±»å‹è½¬æ¢"></a>æ•°æ®ç±»å‹è½¬æ¢</h3><p>å¼€å‘è€…é‡åˆ°çš„é—®é¢˜å°±æ˜¯ç”±äºbeançš„å±æ€§æ³¨å…¥å¼•å‘çš„ç¾éš¾ï¼šå¼€å‘è€…è¿æ¥æ•°æ®åº“æ­£å¸¸æ“ä½œï¼Œä½†æ˜¯è¿è¡Œç¨‹åºåæ˜¾ç¤ºçš„ä¿¡æ¯æ˜¯å¯†ç é”™è¯¯ã€‚</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs CMD"><span class="hljs-function">java.sql.SQLException: <span class="hljs-title">Access</span> <span class="hljs-title">denied</span> <span class="hljs-title">for</span> <span class="hljs-title">user</span> '<span class="hljs-title">root</span>'@'<span class="hljs-title">localhost</span>' (<span class="hljs-title">using</span> <span class="hljs-title">password</span>: <span class="hljs-title">YES</span>)</span><br></code></pre></td></tr></tbody></table></figure><p>å…¶å®çœ‹åˆ°è¿™ä¸ªæŠ¥é”™ï¼Œå‡ ä¹æ‰€æœ‰çš„å­¦ä¹ è€…éƒ½èƒ½åˆ†è¾¨å‡ºæ¥ï¼Œè¿™æ˜¯ç”¨æˆ·åå’Œå¯†ç ä¸åŒ¹é…ï¼Œå°±å°±æ˜¯å¯†ç è¾“å…¥é”™äº†ï¼Œä½†æ˜¯é—®é¢˜å°±åœ¨äºå¯†ç å¹¶æ²¡æœ‰è¾“å…¥é”™è¯¯ã€‚</p><p>é…ç½®ä¿¡æ¯ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-number">0127</span><br></code></pre></td></tr></tbody></table></figure><p>å¯†ç å°±ä½¿ç”¨äº†0127ï¼Œå…¶å®é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œäº†ã€‚å±æ€§æ³¨å…¥æ—¶:<strong>æ”¯æŒäºŒè¿›åˆ¶ï¼Œå…«è¿›åˆ¶ï¼Œåå…­è¿›åˆ¶</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025170355914.png" alt="image-20221025170355914"></p><p>â€‹        è¿™ä¸ªé—®é¢˜å°±å¤„åœ¨è¿™é‡Œäº†ï¼Œå› ä¸º0127åœ¨å¼€å‘è€…çœ¼ä¸­æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²â€œ0127â€ï¼Œä½†æ˜¯åœ¨springbootçœ‹æ¥ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªå…«è¿›åˆ¶çš„æ•°å­—ã€‚å½“åå°ä½¿ç”¨Stringç±»å‹æ¥æ”¶æ•°æ®æ—¶ï¼Œå¦‚æœé…ç½®æ–‡ä»¶ä¸­é…ç½®äº†ä¸€ä¸ªæ•´æ•°å€¼ï¼Œä»–æ˜¯å…ˆå®‰è£…æ•´æ•°è¿›è¡Œå¤„ç†ï¼Œè¯»å–åå†è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆç»™å¯†ç åŠ ä¸Š( â€œâ€)</strong></p><p><strong>æ€»ç»“</strong></p><ol><li>yamlæ–‡ä»¶ä¸­å¯¹äºæ•°å­—çš„å®šä¹‰æ”¯æŒè¿›åˆ¶ä¹¦å†™æ ¼å¼ï¼Œå¦‚éœ€ä½¿ç”¨å­—ç¬¦ä¸²è¯·ä½¿ç”¨å¼•å·æ˜ç¡®æ ‡æ³¨</li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaåç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot2ç†è®ºå­¦ä¹ (ä¸€)</title>
      <link href="/2022/10/23/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SpringBoot2%E7%90%86%E8%AE%BA%E5%AD%A6%E4%B9%A0/"/>
      <url>/2022/10/23/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SpringBoot2%E7%90%86%E8%AE%BA%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringBoot2ç†è®ºå­¦ä¹ "><a href="#SpringBoot2ç†è®ºå­¦ä¹ " class="headerlink" title="SpringBoot2ç†è®ºå­¦ä¹ "></a>SpringBoot2ç†è®ºå­¦ä¹ </h1><h2 id="1-å±æ€§é…ç½®"><a href="#1-å±æ€§é…ç½®" class="headerlink" title="1.å±æ€§é…ç½®"></a><strong>1.å±æ€§é…ç½®</strong></h2><ul><li>ä¿®æ”¹æœåŠ¡å™¨çš„ç«¯å£</li></ul><p><code>GET :  http://localhost:8080/books</code></p><p><code>GET:   http://locallhost/books</code></p><ul><li>SpringBooté»˜è®¤é…ç½®æ–‡ä»¶application.propertiesï¼Œé€šè¿‡é”®å€¼å¯¹é…ç½®å¯¹åº”å±æ€§<ul><li>ä¿®æ”¹æœåŠ¡å™¨ç«¯å£<code>server.port=80</code></li></ul></li></ul><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#ä¿®æ”¹banner ä»–æ˜¯ä¸€ä¸ªlogo å¯ä»¥å…³é—­é»˜è®¤çš„logo</span><br><span class="hljs-string">spring.main.banner-mode=off</span><br><span class="hljs-comment">#è‡ªå®šä¹‰çš„logo ç”¨å®ƒä¸Šä¸€å¥å…³é—­å…ˆå»æ‰</span><br><span class="hljs-string">spring.banner.image.location=xxx.jpg</span><br><span class="hljs-comment">#æ—¥å¿— é»˜è®¤ä¸ºinfo è¿˜æœ‰debugeï¼ˆæ›´è¯¦ç»†ï¼‰å’Œerror</span><br><span class="hljs-comment">#OFFã€FATALã€ERRORã€WARNã€INFOã€DEBUGã€TRACEã€ ALL</span><br><span class="hljs-string">logging.level.root=info</span><br><br></code></pre></td></tr></tbody></table></figure><h2 id="2-ymlè¯­æ³•è§„åˆ™"><a href="#2-ymlè¯­æ³•è§„åˆ™" class="headerlink" title="2.ymlè¯­æ³•è§„åˆ™"></a>2.ymlè¯­æ³•è§„åˆ™</h2><ul><li>å¤§å°å†™æ•æ„Ÿ</li><li>å±æ€§å±‚çº§å…³ç³»ä½¿ç”¨å¤šè¡Œæè¿°ï¼Œæ¯è¡Œç»“å°¾ä½¿ç”¨å†’å·ç»“æŸ</li><li>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»ï¼ŒåŒå±‚çº§å·¦ä¾§å¯¹é½ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼ï¼ˆä¸å…è®¸ä½¿ç”¨Tabé”®ï¼‰</li><li>å±æ€§å€¼å‰é¢æ·»åŠ ç©ºæ ¼ï¼ˆå±æ€§åä¸å±æ€§å€¼ä¹‹é—´ä½¿ç”¨å†’å·+ç©ºæ ¼ä½œä¸ºåˆ†éš”ï¼‰</li><li><p>è¡¨ç¤ºæ³¨é‡Š</p></li><li><p>æ ¸å¿ƒè§„åˆ™ï¼š<strong>æ•°æ®å‰é¢è¦åŠ ç©ºæ ¼ä¸å†’å·éš”å¼€</strong></p></li><li><p>æ³¨æ„å±æ€§åå†’å·åé¢ä¸æ•°æ®ä¹‹é—´æœ‰ä¸€ä¸ª<strong>ç©ºæ ¼</strong></p></li></ul><h4 id="2-1-ymalæ•°æ®è¯»å–"><a href="#2-1-ymalæ•°æ®è¯»å–" class="headerlink" title="2.1 ymalæ•°æ®è¯»å–"></a>2.1 ymalæ•°æ®è¯»å–</h4><ul><li>ä½¿ç”¨@Valueè¯»å–å•ä¸ªæ•°æ®ï¼Œå±æ€§åå¼•ç”¨æ–¹å¼ï¼š<strong>${</strong> <strong>ä¸€çº§å±æ€§å</strong> <strong>.</strong> <strong>äºŒçº§å±æ€§å</strong> <strong>â€¦â€¦}</strong></li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221023150418076.png" alt="image-20221023150418076"></p><ol><li><p>ä½¿ç”¨@Valueé…åˆSpELè¯»å–å•ä¸ªæ•°æ®</p></li><li><p>å¦‚æœæ•°æ®å­˜åœ¨å¤šå±‚çº§ï¼Œä¾æ¬¡ä¹¦å†™å±‚çº§åç§°å³å¯</p></li></ol><ul><li>ä½¿ç”¨@Valueè¯»å–å•ä¸ªæ•°æ®ï¼Œå±æ€§åå¼•ç”¨æ–¹å¼ï¼š<strong>${</strong> <strong>ä¸€çº§å±æ€§å</strong> <strong>.</strong> <strong>äºŒçº§å±æ€§å</strong> <strong>â€¦â€¦}</strong></li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221023150618838.png" alt="image-20221023150618838"></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">baseDire:</span> <span class="hljs-string">c:\window</span><br><span class="hljs-comment">#tempDir: c:\window\temp  è§£å†³æ­¤ç±»é—®é¢˜å¯ä»¥ç”¨${}æ¥è§£å†³</span><br><span class="hljs-attr">tempDir:</span> <span class="hljs-string">${baseDire}\temp</span><br><span class="hljs-comment">#ä»–ä¹Ÿæ”¯æŒè½¬ä¹‰å­—ç¬¦ åªéœ€è¦åœ¨"${baseDire}\temp"ä¸ŠåŠ å…¥\tå°±ä¼šè½¬ä¹‰æˆç©ºæ ¼</span><br></code></pre></td></tr></tbody></table></figure><ul><li>åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨å±æ€§åå¼•ç”¨æ–¹å¼å¼•ç”¨å±æ€§</li><li>å±æ€§å€¼ä¸­å¦‚æœå‡ºç°è½¬ç§»å­—ç¬¦ï¼Œéœ€è¦ä½¿ç”¨åŒå¼•å·åŒ…è£¹</li></ul><p><strong>å°è£…å…¨éƒ¨æ•°æ®åˆ°Environmentå¯¹è±¡</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221023153310902.png" alt="image-20221023153310902"></p><ol><li><p>ä½¿ç”¨Environmentå¯¹è±¡å°è£…å…¨éƒ¨é…ç½®ä¿¡æ¯</p></li><li><p>ä½¿ç”¨@Autowiredè‡ªåŠ¨è£…é…æ•°æ®åˆ°Environmentå¯¹è±¡ä¸­</p></li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å°è£…å…¨éƒ¨çš„æ•°æ®</span><br><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> Environment env;<br></code></pre></td></tr></tbody></table></figure><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#åˆ›å»ºç±»ï¼Œç”¨äºå°è£…ä¸‹é¢çš„æ•°æ®</span><br><span class="hljs-comment"># æœ‰springå¸®æˆ‘ä»¬å»åŠ è½½æ•°æ®åˆ°å¯¹è±¡ä¸­ï¼Œä¸€å®šè¦å‘Šè¯‰springåŠ è½½è¿™ç»„ä¿¡æ¯</span><br><span class="hljs-comment">#ä½¿ç”¨çš„æ—¶å€™ä»springä¸­ç›´æ¥è·å–ä¿¡æ¯ä½¿ç”¨</span><br><span class="hljs-attr">datasource:</span><br>  <span class="hljs-attr">drive:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span><br>  <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost/springboot_tb</span><br>  <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>  <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span><br></code></pre></td></tr></tbody></table></figure><p> <strong>åˆ›å»ºç±»</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è¿™ä¸ªæ³¨è§£è¯´æ˜å…¶å½’springæ¥ç®¡æ§</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-comment">//è¿™ä¸ªæ³¨è§£æ˜¯springèƒ½å¤Ÿæ‰¾åˆ°è¿™ä¸ªå°è£…çš„å¯¹è±¡çš„å‰æ</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = "datasource")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSource</span> {<br> <span class="hljs-keyword">private</span> String driverClassName;<br> <span class="hljs-keyword">private</span> String url;<br> <span class="hljs-keyword">private</span> String userName;<br> <span class="hljs-keyword">private</span> String password;<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>å°ç»“ï¼š</strong></p><ol><li><p>ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ç»‘å®šé…ç½®ä¿¡æ¯åˆ°å°è£…ç±»ä¸­</p></li><li><p>å°è£…ç±»éœ€è¦å®šä¹‰ä¸ºSpringç®¡ç†çš„beanï¼Œå¦åˆ™æ— æ³•è¿›è¡Œå±æ€§æ³¨å…¥</p></li></ol><h2 id="3-æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯"><a href="#3-æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯" class="headerlink" title="3.æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯"></a>3.æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯</h2><h4 id="3-1æ•´åˆJUnit"><a href="#3-1æ•´åˆJUnit" class="headerlink" title="3.1æ•´åˆJUnit"></a>3.1æ•´åˆJUnit</h4><ol><li><p>å¯¼å…¥æµ‹è¯•å¯¹åº”çš„starter</p></li><li><p>æµ‹è¯•ç±»ä½¿ç”¨@SpringBootTestä¿®é¥°</p></li><li><p>ä½¿ç”¨è‡ªåŠ¨è£…é…çš„å½¢å¼æ·»åŠ è¦æµ‹è¯•çš„å¯¹è±¡</p></li></ol><ul><li><p>SpringBootæ•´åˆJUnit</p><ul><li><p>åç§°ï¼š@SpringBootTest</p></li><li><p>ç±»å‹ï¼š<strong>æµ‹è¯•ç±»æ³¨è§£</strong></p></li><li><p>ä½ç½®ï¼šæµ‹è¯•ç±»å®šä¹‰ä¸Šæ–¹</p></li><li><p>ä½œç”¨ï¼šè®¾ç½®JUnitåŠ è½½çš„SpringBootå¯åŠ¨ç±»</p></li></ul></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Springboot04JunitApplicationTests</span> {<br>    <span class="hljs-comment">//åˆ›å»ºå¯¹è±¡</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookDao bookDao;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> {<br>        bookDao.save();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><ol><li><p>æµ‹è¯•ç±»å¦‚æœå­˜åœ¨äºå¼•å¯¼ç±»æ‰€åœ¨åŒ…æˆ–å­åŒ…ä¸­æ— éœ€æŒ‡å®šå¼•å¯¼ç±»</p></li><li><p>æµ‹è¯•ç±»å¦‚æœä¸å­˜åœ¨äºå¼•å¯¼ç±»æ‰€åœ¨çš„åŒ…æˆ–å­åŒ…ä¸­éœ€è¦é€šè¿‡classeså±æ€§æŒ‡å®šå¼•å¯¼ç±»</p></li></ol><ul><li>åç§°ï¼š@SpringBootTest</li><li>ç±»å‹ï¼šæµ‹è¯•ç±»æ³¨è§£</li><li>ä½ç½®ï¼šæµ‹è¯•ç±»å®šä¹‰ä¸Šæ–¹</li><li>ä½œç”¨ï¼šè®¾ç½®JUnitåŠ è½½çš„SpringBootå¯åŠ¨ç±»</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest(classes = Springboot05JUnitApplication.class)</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Springboot07JUnitApplicationTests</span> {}<br> <span class="hljs-comment">//classesï¼šè®¾ç½®SpringBootå¯åŠ¨ç±»</span><br></code></pre></td></tr></tbody></table></figure><p>æ³¨ï¼š <strong>è¯¥æ–¹æ³•ä¸»è¦è§£å†³æµ‹è¯•çš„æ–‡ä»¶ä¸ä¸»æ–‡ä»¶çš„ç›®å½•åŒ…ä¸åŒ¹é…</strong>ä¹Ÿå°±æ˜¯è¯´<strong>å¦‚æœæµ‹è¯•ç±»åœ¨SpringBootå¯åŠ¨ç±»çš„åŒ…æˆ–å­åŒ…ä¸­ï¼Œå¯ä»¥çœç•¥å¯åŠ¨ç±»çš„è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯çœç•¥classesçš„è®¾å®š</strong></p><h4 id="3-2-æ•´åˆMyBatis"><a href="#3-2-æ•´åˆMyBatis" class="headerlink" title="3.2 æ•´åˆMyBatis"></a>3.2 <strong>æ•´åˆ</strong>MyBatis</h4><ul><li>æ ¸å¿ƒé…ç½®ï¼šæ•°æ®åº“è¿æ¥ç›¸å…³ä¿¡æ¯ï¼ˆè¿ä»€ä¹ˆï¼Ÿè¿è°ï¼Ÿä»€ä¹ˆæƒé™ï¼‰</li><li>æ˜ å°„é…ç½®ï¼šSQLæ˜ å°„ï¼ˆXML/æ³¨è§£ï¼‰</li></ul><ol><li><p>å‹¾é€‰MyBatisæŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯å¯¼å…¥MyBatiså¯¹åº”çš„starter</p></li><li><p>æ•°æ®åº“è¿æ¥ç›¸å…³ä¿¡æ¯è½¬æ¢æˆé…ç½®</p></li><li><p>æ•°æ®åº“SQLæ˜ å°„éœ€è¦æ·»åŠ @Mapperè¢«å®¹å™¨è¯†åˆ«åˆ°</p></li></ol><p><strong>è®¾ç½®æ•°æ®å‘˜å‚æ•°ï¼š</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/db1</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span><br></code></pre></td></tr></tbody></table></figure><p><strong>å®šä¹‰å®ä½“ç±»</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ³¨æ„è¦ç”Ÿæˆç›¸åº”çš„getå’Œsetè¿˜æœ‰tostringæ–¹æ³• è¿™é‡Œå°±ä¸é™„ä¸Šä»£ç äº†</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Brand</span> {<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String brand_name;<br>    <span class="hljs-keyword">private</span> String company_name;<br>    <span class="hljs-keyword">private</span> Integer ordered;<br>    <span class="hljs-keyword">private</span> String  description;<br>    <span class="hljs-keyword">private</span> Integer status;<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>å®šä¹‰æ•°æ®å±‚æ¥å£ä¸æ˜ å°„é…ç½®</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å¤§å‰æéœ€è¦æŠŠBrandçš„å®ä½“ç±»ç»™å®šä¹‰å‡ºæ¥ è¿™é‡Œä»£ç è®¾ç½®ç›¸åº”çš„getå’Œsetæ–¹æ³•</span><br><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BrandDao</span> {<br>    <span class="hljs-meta">@Select("select *from tb_brand where id=#{id}")</span><br>    <span class="hljs-keyword">public</span> Brand <span class="hljs-title function_">getById</span><span class="hljs-params">(Integer id)</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>æµ‹è¯•ç±»ä¸­æ³¨å…¥daoæ¥å£ï¼Œæµ‹è¯•åŠŸèƒ½</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Springboot05MybatisApplicationTests</span> {<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BrandDao brandDao;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> {<br>        System.out.println( brandDao.getById(<span class="hljs-number">1</span>));<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><ol><li>MySQL 8.Xé©±åŠ¨å¼ºåˆ¶è¦æ±‚è®¾ç½®æ—¶åŒº</li></ol><ul><li>ä¿®æ”¹urlï¼Œæ·»åŠ serverTimezoneè®¾å®š</li><li>ä¿®æ”¹MySQLæ•°æ®åº“é…ç½®ï¼ˆç•¥ï¼‰</li></ul><ol><li>é©±åŠ¨ç±»è¿‡æ—¶ï¼Œæé†’æ›´æ¢ä¸ºcom.mysql.cj.jdbc.Driver</li></ol><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221023164805005.png" alt="image-20221023164805005"></p><h4 id="3-3-æ•´åˆ-MyBatis-Plus"><a href="#3-3-æ•´åˆ-MyBatis-Plus" class="headerlink" title="3.3 æ•´åˆ MyBatis-Plus"></a>3.3 <strong>æ•´åˆ</strong> <strong>MyBatis-Plus</strong></h4><ul><li><p>MyBatis-Plusä¸MyBatisåŒºåˆ«</p><ul><li><p>å¯¼å…¥åæ ‡ä¸åŒ</p></li><li><p>æ•°æ®å±‚å®ç°ç®€åŒ–</p></li></ul></li><li><p>æ‰‹å·¥æ·»åŠ MyBatis-Pluså¯¹åº”çš„starter</p></li><li>æ•°æ®å±‚æ¥å£ä½¿ç”¨BaseMapperç®€åŒ–å¼€å‘</li><li>éœ€è¦ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹æŠ€æœ¯æ— æ³•é€šè¿‡å‹¾é€‰ç¡®å®šæ—¶ï¼Œéœ€è¦æ‰‹å·¥æ·»åŠ åæ ‡</li></ul><p><strong>æ‰‹åŠ¨æ·»åŠ SpringBootæ•´åˆMyBatis-Plusçš„åæ ‡ï¼Œå¯ä»¥é€šè¿‡mvnrepositoryè·å–</strong></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/com.baomidou/mybatis-plus-boot-starter --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>å®šä¹‰æ•°æ®å±‚æ¥å£ä¸æ˜ å°„é…ç½®ï¼Œç»§æ‰¿<strong>BaseMapper</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BrandDao</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;Brand&gt; {<br>}<br></code></pre></td></tr></tbody></table></figure><p>æ³¨æ„ä»¥ä¸‹æ•°æ®åº“è¡¨çš„ä¸åŒï¼šå¯ä»¥æœ‰ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//é¦–å…ˆåœ¨å¯¹åº”çš„Brandç±»ä¸­æ·»åŠ @TableNameæ³¨è§£æŒ‡å®šå¯¹åº”çš„æ•°æ®åº“è¡¨åå­—</span><br><span class="hljs-meta">@TableName("tb_brand")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Brand</span> {<br>    <span class="hljs-keyword">private</span> Integer id;<br>}<br></code></pre></td></tr></tbody></table></figure><p>æˆ–è€…ç›´æ¥åœ¨é…ç½®ç±»ymlæ–‡ä»¶ä¸­æ·»åŠ ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">table-prefix:</span> <span class="hljs-string">tb_</span><br><span class="hljs-comment">#å› ä¸ºæ•°æ®åº“æœ‰é»˜è®¤çš„æ•°æ®åº“è¡¨å ä¸‹åˆ’çº¿è½¬é©¼å³°æ‰€ä»¥æˆ‘ä»¬éœ€è¦å…³é—­æ¬¡åŠŸèƒ½</span><br><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">false</span><br><br></code></pre></td></tr></tbody></table></figure><h4 id="3-4-æ•´åˆ-Druid"><a href="#3-4-æ•´åˆ-Druid" class="headerlink" title="3.4 æ•´åˆ Druid"></a>3.4 <strong>æ•´åˆ</strong> <strong>Druid</strong></h4><ol><li><p>æ•´åˆDruidéœ€è¦å¯¼å…¥Druidå¯¹åº”çš„starter</p></li><li><p>æ ¹æ®Druidæä¾›çš„é…ç½®æ–¹å¼è¿›è¡Œé…ç½®</p></li><li><p>æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯é€šç”¨æ–¹å¼</p><ul><li><p>å¯¼å…¥å¯¹åº”çš„starter</p></li><li><p>æ ¹æ®æä¾›çš„é…ç½®æ ¼å¼ï¼Œé…ç½®éé»˜è®¤å€¼å¯¹åº”çš„é…ç½®é¡¹</p></li></ul></li></ol><p><strong>å¯¼å…¥Druidå¯¹åº”çš„starter</strong></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid-spring-boot-starter --&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p><strong>å˜æ›´Druidçš„é…ç½®æ–¹å¼</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#ç¬¬ä¸€ç§</span><br><span class="hljs-comment">#spring:</span><br><span class="hljs-comment">#  datasource:</span><br><span class="hljs-comment">#    driver-class-name: com.mysql.cj.jdbc.Driver</span><br><span class="hljs-comment">#    url: jdbc:mysql://localhost:3306/db1</span><br><span class="hljs-comment">#    username: root</span><br><span class="hljs-comment">#    password: 123456</span><br><span class="hljs-comment">#    type: com.alibaba.druid.pool.DruidDataSource</span><br><br><span class="hljs-comment">#ç¬¬äºŒç§ (å¸¸ç”¨)</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">druid:</span><br>      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/db1</span><br>      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>      <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span><br></code></pre></td></tr></tbody></table></figure><h2 id="4-åŸºäº-SpringBoot-çš„-SSMP-æ•´åˆæ¡ˆä¾‹"><a href="#4-åŸºäº-SpringBoot-çš„-SSMP-æ•´åˆæ¡ˆä¾‹" class="headerlink" title="4.åŸºäº SpringBoot çš„ SSMP æ•´åˆæ¡ˆä¾‹"></a><strong>4.åŸºäº</strong> <strong>SpringBoot</strong> <strong>çš„</strong> <strong>SSMP</strong> <strong>æ•´åˆæ¡ˆä¾‹</strong></h2><h4 id="4-1-SSMP-æ•´åˆæ¡ˆä¾‹"><a href="#4-1-SSMP-æ•´åˆæ¡ˆä¾‹" class="headerlink" title="4.1 SSMP æ•´åˆæ¡ˆä¾‹"></a><strong>4.1 SSMP</strong> <strong>æ•´åˆæ¡ˆä¾‹</strong></h4><ul><li><p>æ¡ˆä¾‹æ•ˆæœæ¼”ç¤º</p></li><li><p>æ¡ˆä¾‹å®ç°æ–¹æ¡ˆåˆ†æ</p><ul><li><p>å®ä½“ç±»å¼€å‘â€”â€”â€”â€”ä½¿ç”¨Lombokå¿«é€Ÿåˆ¶ä½œå®ä½“ç±»</p></li><li><p>Daoå¼€å‘â€”â€”â€”â€”æ•´åˆMyBatisPlusï¼Œåˆ¶ä½œæ•°æ®å±‚æµ‹è¯•ç±»</p></li><li><p>Serviceå¼€å‘â€”â€”â€”â€”åŸºäºMyBatisPlusè¿›è¡Œå¢é‡å¼€å‘ï¼Œåˆ¶ä½œä¸šåŠ¡å±‚æµ‹è¯•ç±»</p></li><li><p>Controllerå¼€å‘â€”â€”â€”â€”åŸºäºRestfulå¼€å‘ï¼Œä½¿ç”¨PostManæµ‹è¯•æ¥å£åŠŸèƒ½</p></li><li><p>Controllerå¼€å‘â€”â€”â€”â€”å‰åç«¯å¼€å‘åè®®åˆ¶ä½œ</p></li><li><p>é¡µé¢å¼€å‘â€”â€”â€”â€”åŸºäºVUE+ElementUIåˆ¶ä½œï¼Œå‰åç«¯è”è°ƒï¼Œé¡µé¢æ•°æ®å¤„ç†ï¼Œé¡µé¢æ¶ˆæ¯å¤„ç†</p><ul><li>åˆ—è¡¨ã€æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ã€åˆ†é¡µã€æŸ¥è¯¢</li></ul></li><li><p>é¡¹ç›®å¼‚å¸¸å¤„ç†</p></li><li><p>æŒ‰æ¡ä»¶æŸ¥è¯¢â€”â€”â€”â€”é¡µé¢åŠŸèƒ½è°ƒæ•´ã€Controllerä¿®æ­£åŠŸèƒ½ã€Serviceä¿®æ­£åŠŸèƒ½</p></li></ul></li></ul><h4 id="0-æ¨¡å—åˆ›å»º"><a href="#0-æ¨¡å—åˆ›å»º" class="headerlink" title="0.æ¨¡å—åˆ›å»º"></a>0.æ¨¡å—åˆ›å»º</h4><p>â€‹    å¯¹äºè¿™ä¸ªæ¡ˆä¾‹å¦‚æœæŒ‰ç…§ä¼ä¸šå¼€å‘çš„å½¢å¼è¿›è¡Œåº”è¯¥åˆ¶ä½œåå°å¾®æœåŠ¡ï¼Œå‰åç«¯åˆ†ç¦»çš„å¼€å‘ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211129114306062.png" alt="image-20211129114306062" style="zoom:80%;"></p><p>æˆ‘çŸ¥é“è¿™ä¸ªå¯¹åˆå­¦çš„å°ä¼™ä¼´è¦æ±‚å¤ªé«˜äº†ï¼Œå’±ä»¬ç®€åŒ–ä¸€ä¸‹ã€‚åå°åšå•ä½“æœåŠ¡å™¨ï¼Œå‰ç«¯ä¸ä½¿ç”¨å‰åç«¯åˆ†ç¦»çš„åˆ¶ä½œäº†ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211129114328967.png" alt=""></p><p>ä¸€ä¸ªæœåŠ¡å™¨å³å……å½“åå°æœåŠ¡è°ƒç”¨ï¼Œåˆè´Ÿè´£å‰ç«¯é¡µé¢å±•ç¤ºï¼Œé™ä½å­¦ä¹ çš„é—¨æ§›ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å—ï¼ŒåŠ è½½è¦ä½¿ç”¨çš„æŠ€æœ¯å¯¹åº”çš„starterï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶æ ¼å¼ä¸ºymlæ ¼å¼ï¼Œå¹¶æŠŠwebè®¿é—®ç«¯å£å…ˆè®¾ç½®æˆ80ã€‚</p><p><strong>pom.xml</strong></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p><strong>application.yml</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">80</span><br></code></pre></td></tr></tbody></table></figure><h4 id="1-å®ä½“ç±»å¼€å‘"><a href="#1-å®ä½“ç±»å¼€å‘" class="headerlink" title="1.å®ä½“ç±»å¼€å‘"></a>1.å®ä½“ç±»å¼€å‘</h4><p>â€‹    æœ¬æ¡ˆä¾‹å¯¹åº”çš„æ¨¡å—è¡¨ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs tex">-- ----------------------------<br>-- Table structure for tbl<span class="hljs-built_in">_</span>book<br>-- ----------------------------<br>DROP TABLE IF EXISTS `tbl<span class="hljs-built_in">_</span>book`;<br>CREATE TABLE `tbl<span class="hljs-built_in">_</span>book`  (<br>  `id` int(11) NOT NULL AUTO<span class="hljs-built_in">_</span>INCREMENT,<br>  `type` varchar(20) CHARACTER SET utf8 COLLATE utf8<span class="hljs-built_in">_</span>general<span class="hljs-built_in">_</span>ci NULL DEFAULT NULL,<br>  `name` varchar(50) CHARACTER SET utf8 COLLATE utf8<span class="hljs-built_in">_</span>general<span class="hljs-built_in">_</span>ci NULL DEFAULT NULL,<br>  `description` varchar(255) CHARACTER SET utf8 COLLATE utf8<span class="hljs-built_in">_</span>general<span class="hljs-built_in">_</span>ci NULL DEFAULT NULL,<br>  PRIMARY KEY (`id`) USING BTREE<br>) ENGINE = InnoDB AUTO<span class="hljs-built_in">_</span>INCREMENT = 51 CHARACTER SET = utf8 COLLATE = utf8<span class="hljs-built_in">_</span>general<span class="hljs-built_in">_</span>ci ROW<span class="hljs-built_in">_</span>FORMAT = Dynamic;<br><br>-- ----------------------------<br>-- Records of tbl<span class="hljs-built_in">_</span>book<br>-- ----------------------------<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (1, 'è®¡ç®—æœºç†è®º', 'Springå®æˆ˜ ç¬¬5ç‰ˆ', 'Springå…¥é—¨ç»å…¸æ•™ç¨‹ï¼Œæ·±å…¥ç†è§£SpringåŸç†æŠ€æœ¯å†…å¹•');<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (2, 'è®¡ç®—æœºç†è®º', 'Spring 5æ ¸å¿ƒåŸç†ä¸30ä¸ªç±»æ‰‹å†™å®æˆ˜', 'åå¹´æ²‰æ·€ä¹‹ä½œï¼Œæ‰‹å†™Springç²¾åæ€æƒ³');<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (3, 'è®¡ç®—æœºç†è®º', 'Spring 5 è®¾è®¡æ¨¡å¼', 'æ·±å…¥Springæºç å‰–æSpringæºç ä¸­è•´å«çš„10å¤§è®¾è®¡æ¨¡å¼');<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (4, 'è®¡ç®—æœºç†è®º', 'Spring MVC+MyBatiså¼€å‘ä»å…¥é—¨åˆ°é¡¹ç›®å®æˆ˜', 'å…¨æ–¹ä½è§£æé¢å‘Webåº”ç”¨çš„è½»é‡çº§æ¡†æ¶ï¼Œå¸¦ä½ æˆä¸ºSpring MVCå¼€å‘é«˜æ‰‹');<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (5, 'è®¡ç®—æœºç†è®º', 'è½»é‡çº§Java Webä¼ä¸šåº”ç”¨å®æˆ˜', 'æºç çº§å‰–æSpringæ¡†æ¶ï¼Œé€‚åˆå·²æŒæ¡JavaåŸºç¡€çš„è¯»è€…');<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (6, 'è®¡ç®—æœºç†è®º', 'Javaæ ¸å¿ƒæŠ€æœ¯ å·I åŸºç¡€çŸ¥è¯†ï¼ˆåŸä¹¦ç¬¬11ç‰ˆï¼‰', 'Core Java ç¬¬11ç‰ˆï¼ŒJoltå¤§å¥–è·å¥–ä½œå“ï¼Œé’ˆå¯¹Java SE9ã€10ã€11å…¨é¢æ›´æ–°');<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (7, 'è®¡ç®—æœºç†è®º', 'æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº', '5ä¸ªç»´åº¦å…¨é¢å‰–æJVMï¼Œå¤§å‚é¢è¯•çŸ¥è¯†ç‚¹å…¨è¦†ç›–');<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (8, 'è®¡ç®—æœºç†è®º', 'Javaç¼–ç¨‹æ€æƒ³ï¼ˆç¬¬4ç‰ˆï¼‰', 'Javaå­¦ä¹ å¿…è¯»ç»å…¸,æ®¿å ‚çº§è‘—ä½œï¼èµ¢å¾—äº†å…¨çƒç¨‹åºå‘˜çš„å¹¿æ³›èµèª‰');<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (9, 'è®¡ç®—æœºç†è®º', 'é›¶åŸºç¡€å­¦Javaï¼ˆå…¨å½©ç‰ˆï¼‰', 'é›¶åŸºç¡€è‡ªå­¦ç¼–ç¨‹çš„å…¥é—¨å›¾ä¹¦ï¼Œç”±æµ…å…¥æ·±ï¼Œè¯¦è§£Javaè¯­è¨€çš„ç¼–ç¨‹æ€æƒ³å’Œæ ¸å¿ƒæŠ€æœ¯');<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (10, 'å¸‚åœºè¥é”€', 'ç›´æ’­å°±è¯¥è¿™ä¹ˆåšï¼šä¸»æ’­é«˜æ•ˆæ²Ÿé€šå®æˆ˜æŒ‡å—', 'æå­æŸ’ã€æä½³ç¦ã€è–‡å¨…æˆé•¿ä¸ºç½‘çº¢çš„ç§˜å¯†éƒ½åœ¨ä¹¦ä¸­');<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (11, 'å¸‚åœºè¥é”€', 'ç›´æ’­é”€è®²å®æˆ˜ä¸€æœ¬é€š', 'å’Œç§‹å¶ä¸€èµ·å­¦ç³»åˆ—ç½‘ç»œè¥é”€ä¹¦ç±');<br>INSERT INTO `tbl<span class="hljs-built_in">_</span>book` VALUES (12, 'å¸‚åœºè¥é”€', 'ç›´æ’­å¸¦è´§ï¼šæ·˜å®ã€å¤©çŒ«ç›´æ’­ä»æ–°æ‰‹åˆ°é«˜æ‰‹', 'ä¸€æœ¬æ•™ä½ å¦‚ä½•ç©è½¬ç›´æ’­çš„ä¹¦ï¼Œ10å ‚è¯¾è½»æ¾å®ç°å¸¦è´§æœˆå…¥3W+');<br></code></pre></td></tr></tbody></table></figure><p>â€‹    æ ¹æ®ä¸Šè¿°è¡¨ç»“æ„ï¼Œåˆ¶ä½œå¯¹åº”çš„å®ä½“ç±»</p><p><strong>å®ä½“ç±»</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> {<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String type;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String description;<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    å®ä½“ç±»çš„å¼€å‘å¯ä»¥è‡ªåŠ¨é€šè¿‡å·¥å…·æ‰‹å·¥ç”Ÿæˆget/setæ–¹æ³•ï¼Œç„¶åè¦†ç›–toString()æ–¹æ³•ï¼Œæ–¹ä¾¿è°ƒè¯•ï¼Œç­‰ç­‰ã€‚ä¸è¿‡è¿™ä¸€å¥—æ“ä½œä¹¦å†™å¾ˆç¹çï¼Œæœ‰å¯¹åº”çš„å·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬ç®€åŒ–å¼€å‘ï¼Œä»‹ç»ä¸€ä¸ªå°å·¥å…·ï¼Œlombokã€‚</p><p>â€‹    Lombokï¼Œä¸€ä¸ªJavaç±»åº“ï¼Œæä¾›äº†ä¸€ç»„æ³¨è§£ï¼Œç®€åŒ–POJOå®ä½“ç±»å¼€å‘ï¼ŒSpringBootç›®å‰é»˜è®¤é›†æˆäº†lombokæŠ€æœ¯ï¼Œå¹¶æä¾›äº†å¯¹åº”çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œæ‰€ä»¥åªéœ€è¦æä¾›å¯¹åº”çš„åæ ‡å³å¯ï¼Œåœ¨pom.xmlä¸­æ·»åŠ lombokçš„åæ ‡ã€‚</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs XML"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--lombok--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹    ä½¿ç”¨lombokå¯ä»¥é€šè¿‡ä¸€ä¸ªæ³¨è§£@Dataå®Œæˆä¸€ä¸ªå®ä½“ç±»å¯¹åº”çš„getterï¼Œsetterï¼ŒtoStringï¼Œequalsï¼ŒhashCodeç­‰æ“ä½œçš„å¿«é€Ÿæ·»åŠ </p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Book</span> {<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String type;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String description;<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    åˆ°è¿™é‡Œå®ä½“ç±»å°±åšå¥½äº†ï¼Œæ˜¯ä¸æ˜¯æ¯”ä¸ä½¿ç”¨lombokç®€åŒ–å¥½å¤šï¼Œè¿™ç§å·¥å…·åœ¨Javaå¼€å‘ä¸­è¿˜æœ‰Nå¤šï¼Œåé¢è¯¾ç¨‹ä¸­é‡åˆ°äº†èƒ½ç”¨çš„ä¸œè¥¿æ—¶ï¼Œåœ¨ä¸å¢åŠ å„ä½å°ä¼™ä¼´å¤§é‡çš„å­¦ä¹ æ—¶é—´çš„æƒ…å†µä¸‹ï¼Œå°½é‡å¤šç»™å¤§å®¶ä»‹ç»ä¸€äº›</p><p><strong>æ€»ç»“</strong></p><ol><li>å®ä½“ç±»åˆ¶ä½œ</li><li>ä½¿ç”¨lombokç®€åŒ–å¼€å‘<ul><li>å¯¼å…¥lombokæ— éœ€æŒ‡å®šç‰ˆæœ¬ï¼Œç”±SpringBootæä¾›ç‰ˆæœ¬</li><li>@Dataæ³¨è§£</li></ul></li></ol><h4 id="2-æ•°æ®å±‚å¼€å‘â€”â€”åŸºç¡€CRUD"><a href="#2-æ•°æ®å±‚å¼€å‘â€”â€”åŸºç¡€CRUD" class="headerlink" title="2.æ•°æ®å±‚å¼€å‘â€”â€”åŸºç¡€CRUD"></a>2.æ•°æ®å±‚å¼€å‘â€”â€”åŸºç¡€CRUD</h4><p>â€‹    æ•°æ®å±‚å¼€å‘æœ¬æ¬¡ä½¿ç”¨MyBatisPlusæŠ€æœ¯ï¼Œæ•°æ®æºä½¿ç”¨å‰é¢å­¦ä¹ çš„Druidï¼Œå­¦éƒ½å­¦äº†éƒ½ç”¨ä¸Š</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šå¯¼å…¥MyBatisPlusä¸Druidå¯¹åº”çš„starterï¼Œå½“ç„¶mysqlçš„é©±åŠ¨ä¸èƒ½å°‘</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p><strong>æ­¥éª¤â‘¡</strong>ï¼šé…ç½®æ•°æ®åº“è¿æ¥ç›¸å…³çš„æ•°æ®æºé…ç½®</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">80</span><br><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">druid:</span><br>      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span><br>      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>      <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br></code></pre></td></tr></tbody></table></figure><p><strong>æ­¥éª¤â‘¢</strong>ï¼šä½¿ç”¨MPçš„æ ‡å‡†é€šç”¨æ¥å£BaseMapperåŠ é€Ÿå¼€å‘ï¼Œåˆ«å¿˜äº†@Mapperå’Œæ³›å‹çš„æŒ‡å®š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BookDao</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;Book&gt; {<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>æ­¥éª¤â‘£</strong>ï¼šåˆ¶ä½œæµ‹è¯•ç±»æµ‹è¯•ç»“æœï¼Œè¿™ä¸ªæµ‹è¯•ç±»åˆ¶ä½œæ˜¯ä¸ªå¥½ä¹ æƒ¯ï¼Œä¸è¿‡åœ¨ä¼ä¸šå¼€å‘ä¸­å¾€å¾€éƒ½ä¸ºåŠ é€Ÿå¼€å‘è·³è¿‡æ­¤æ­¥ï¼Œä¸”è¡Œä¸”çæƒœå§</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">package</span> com.itheima.dao;<br><br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;<br><span class="hljs-keyword">import</span> com.itheima.domain.Book;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookDaoTestCase</span> {<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookDao bookDao;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetById</span><span class="hljs-params">()</span>{<br>        System.out.println(bookDao.selectById(<span class="hljs-number">1</span>));<br>    }<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSave</span><span class="hljs-params">()</span>{<br>        <span class="hljs-type">Book</span> <span class="hljs-variable">book</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>();<br>        book.setType(<span class="hljs-string">"æµ‹è¯•æ•°æ®123"</span>);<br>        book.setName(<span class="hljs-string">"æµ‹è¯•æ•°æ®123"</span>);<br>        book.setDescription(<span class="hljs-string">"æµ‹è¯•æ•°æ®123"</span>);<br>        bookDao.insert(book);<br>    }<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdate</span><span class="hljs-params">()</span>{<br>        <span class="hljs-type">Book</span> <span class="hljs-variable">book</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>();<br>        book.setId(<span class="hljs-number">17</span>);<br>        book.setType(<span class="hljs-string">"æµ‹è¯•æ•°æ®abcdefg"</span>);<br>        book.setName(<span class="hljs-string">"æµ‹è¯•æ•°æ®123"</span>);<br>        book.setDescription(<span class="hljs-string">"æµ‹è¯•æ•°æ®123"</span>);<br>        bookDao.updateById(book);<br>    }<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelete</span><span class="hljs-params">()</span>{<br>        bookDao.deleteById(<span class="hljs-number">16</span>);<br>    }<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetAll</span><span class="hljs-params">()</span>{<br>        bookDao.selectList(<span class="hljs-literal">null</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><font color="#f0f"><b>æ¸©é¦¨æç¤º</b></font><p>â€‹    MPæŠ€æœ¯é»˜è®¤çš„ä¸»é”®ç”Ÿæˆç­–ç•¥ä¸ºé›ªèŠ±ç®—æ³•ï¼Œç”Ÿæˆçš„ä¸»é”®IDé•¿åº¦è¾ƒå¤§ï¼Œå’Œç›®å‰çš„æ•°æ®åº“è®¾å®šè§„åˆ™ä¸ç›¸ç¬¦ï¼Œéœ€è¦é…ç½®ä¸€ä¸‹ä½¿MPä½¿ç”¨æ•°æ®åº“çš„ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Œæ–¹å¼å˜›è¿˜æ˜¯è€ä¸€å¥—ï¼Œåšé…ç½®ã€‚åœ¨application.ymlä¸­æ·»åŠ å¯¹åº”é…ç½®å³å¯ï¼Œå…·ä½“å¦‚ä¸‹</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">80</span><br><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">druid:</span><br>      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span><br>      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>      <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br><br><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">table-prefix:</span> <span class="hljs-string">tbl_</span><span class="hljs-comment">#è®¾ç½®è¡¨åé€šç”¨å‰ç¼€</span><br>      <span class="hljs-attr">id-type:</span> <span class="hljs-string">auto</span><span class="hljs-comment">#è®¾ç½®ä¸»é”®idå­—æ®µçš„ç”Ÿæˆç­–ç•¥ä¸ºå‚ç…§æ•°æ®åº“è®¾å®šçš„ç­–ç•¥ï¼Œå½“å‰æ•°æ®åº“è®¾ç½®idç”Ÿæˆç­–ç•¥ä¸ºè‡ªå¢</span><br></code></pre></td></tr></tbody></table></figure><h5 id="æŸ¥çœ‹MPè¿è¡Œæ—¥å¿—"><a href="#æŸ¥çœ‹MPè¿è¡Œæ—¥å¿—" class="headerlink" title="æŸ¥çœ‹MPè¿è¡Œæ—¥å¿—"></a>æŸ¥çœ‹MPè¿è¡Œæ—¥å¿—</h5><p>â€‹    åœ¨è¿›è¡Œæ•°æ®å±‚æµ‹è¯•çš„æ—¶å€™ï¼Œå› ä¸ºåŸºç¡€çš„CRUDæ“ä½œå‡ç”±MPç»™æˆ‘ä»¬æä¾›äº†ï¼Œæ‰€ä»¥å°±å‡ºç°äº†ä¸€ä¸ªå±€é¢ï¼Œå¼€å‘è€…ä¸éœ€è¦ä¹¦å†™SQLè¯­å¥äº†ï¼Œè¿™æ ·ç¨‹åºè¿è¡Œçš„æ—¶å€™æ€»æœ‰ä¸€ç§æ„Ÿè§‰ï¼Œä¸€åˆ‡çš„ä¸€åˆ‡éƒ½æ˜¯é»‘ç›’çš„ï¼Œä½œä¸ºå¼€å‘è€…æˆ‘ä»¬å•¥ä¹Ÿä¸çŸ¥é“å°±å®Œäº†ã€‚å¦‚æœç¨‹åºæ­£å¸¸è¿è¡Œè¿˜å¥½ï¼Œå¦‚æœæŠ¥é”™äº†ï¼Œè¿™ä¸ªæ—¶å€™å°±å¾ˆå´©æºƒï¼Œä½ ç”šè‡³éƒ½ä¸çŸ¥é“ä»ä½•ä¸‹æ‰‹ï¼Œå› ä¸ºä¼ é€’å‚æ•°ã€å°è£…SQLè¯­å¥è¿™äº›æ“ä½œå®Œå…¨ä¸æ˜¯ä½ å¹²é¢„å¼€å‘å‡ºæ¥çš„ï¼Œæ‰€ä»¥æŸ¥çœ‹æ‰§è¡ŒæœŸè¿è¡Œçš„SQLè¯­å¥å°±æˆä¸ºå½“åŠ¡ä¹‹æ€¥ã€‚</p><p>â€‹    SpringBootæ•´åˆMPçš„æ—¶å€™å……åˆ†è€ƒè™‘åˆ°äº†è¿™ç‚¹ï¼Œé€šè¿‡é…ç½®çš„å½¢å¼å°±å¯ä»¥æŸ¥é˜…æ‰§è¡ŒæœŸSQLè¯­å¥ï¼Œé…ç½®å¦‚ä¸‹</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">table-prefix:</span> <span class="hljs-string">tbl_</span><br>      <span class="hljs-attr">id-type:</span> <span class="hljs-string">auto</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹    å†æ¥çœ‹è¿è¡Œç»“æœï¼Œæ­¤æ—¶å°±æ˜¾ç¤ºäº†è¿è¡ŒæœŸæ‰§è¡ŒSQLçš„æƒ…å†µã€‚</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs tex">Creating a new SqlSession<br>SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9a6717] was not registered for synchronization because synchronization is not active<br>JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@6ca30b8a] will not be managed by Spring<br>==&gt;  Preparing: SELECT id,type,name,description FROM tbl<span class="hljs-built_in">_</span>book<br>==&gt; Parameters: <br>&lt;==    Columns: id, type, name, description<br>&lt;==        Row: 1, è®¡ç®—æœºç†è®º, Springå®æˆ˜ ç¬¬5ç‰ˆ, Springå…¥é—¨ç»å…¸æ•™ç¨‹ï¼Œæ·±å…¥ç†è§£SpringåŸç†æŠ€æœ¯å†…å¹•<br>&lt;==        Row: 2, è®¡ç®—æœºç†è®º, Spring 5æ ¸å¿ƒåŸç†ä¸30ä¸ªç±»æ‰‹å†™å®æˆ˜, åå¹´æ²‰æ·€ä¹‹ä½œï¼Œæ‰‹å†™Springç²¾åæ€æƒ³<br>&lt;==        Row: 3, è®¡ç®—æœºç†è®º, Spring 5 è®¾è®¡æ¨¡å¼, æ·±å…¥Springæºç å‰–æSpringæºç ä¸­è•´å«çš„10å¤§è®¾è®¡æ¨¡å¼<br>&lt;==        Row: 4, è®¡ç®—æœºç†è®º, Spring MVC+MyBatiså¼€å‘ä»å…¥é—¨åˆ°é¡¹ç›®å®æˆ˜, å…¨æ–¹ä½è§£æé¢å‘Webåº”ç”¨çš„è½»é‡çº§æ¡†æ¶ï¼Œå¸¦ä½ æˆä¸ºSpring MVCå¼€å‘é«˜æ‰‹<br>&lt;==        Row: 5, è®¡ç®—æœºç†è®º, è½»é‡çº§Java Webä¼ä¸šåº”ç”¨å®æˆ˜, æºç çº§å‰–æSpringæ¡†æ¶ï¼Œé€‚åˆå·²æŒæ¡JavaåŸºç¡€çš„è¯»è€…<br>&lt;==        Row: 6, è®¡ç®—æœºç†è®º, Javaæ ¸å¿ƒæŠ€æœ¯ å·I åŸºç¡€çŸ¥è¯†ï¼ˆåŸä¹¦ç¬¬11ç‰ˆï¼‰, Core Java ç¬¬11ç‰ˆï¼ŒJoltå¤§å¥–è·å¥–ä½œå“ï¼Œé’ˆå¯¹Java SE9ã€10ã€11å…¨é¢æ›´æ–°<br>&lt;==        Row: 7, è®¡ç®—æœºç†è®º, æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº, 5ä¸ªç»´åº¦å…¨é¢å‰–æJVMï¼Œå¤§å‚é¢è¯•çŸ¥è¯†ç‚¹å…¨è¦†ç›–<br>&lt;==        Row: 8, è®¡ç®—æœºç†è®º, Javaç¼–ç¨‹æ€æƒ³ï¼ˆç¬¬4ç‰ˆï¼‰, Javaå­¦ä¹ å¿…è¯»ç»å…¸,æ®¿å ‚çº§è‘—ä½œï¼èµ¢å¾—äº†å…¨çƒç¨‹åºå‘˜çš„å¹¿æ³›èµèª‰<br>&lt;==        Row: 9, è®¡ç®—æœºç†è®º, é›¶åŸºç¡€å­¦Javaï¼ˆå…¨å½©ç‰ˆï¼‰, é›¶åŸºç¡€è‡ªå­¦ç¼–ç¨‹çš„å…¥é—¨å›¾ä¹¦ï¼Œç”±æµ…å…¥æ·±ï¼Œè¯¦è§£Javaè¯­è¨€çš„ç¼–ç¨‹æ€æƒ³å’Œæ ¸å¿ƒæŠ€æœ¯<br>&lt;==        Row: 10, å¸‚åœºè¥é”€, ç›´æ’­å°±è¯¥è¿™ä¹ˆåšï¼šä¸»æ’­é«˜æ•ˆæ²Ÿé€šå®æˆ˜æŒ‡å—, æå­æŸ’ã€æä½³ç¦ã€è–‡å¨…æˆé•¿ä¸ºç½‘çº¢çš„ç§˜å¯†éƒ½åœ¨ä¹¦ä¸­<br>&lt;==        Row: 11, å¸‚åœºè¥é”€, ç›´æ’­é”€è®²å®æˆ˜ä¸€æœ¬é€š, å’Œç§‹å¶ä¸€èµ·å­¦ç³»åˆ—ç½‘ç»œè¥é”€ä¹¦ç±<br>&lt;==        Row: 12, å¸‚åœºè¥é”€, ç›´æ’­å¸¦è´§ï¼šæ·˜å®ã€å¤©çŒ«ç›´æ’­ä»æ–°æ‰‹åˆ°é«˜æ‰‹, ä¸€æœ¬æ•™ä½ å¦‚ä½•ç©è½¬ç›´æ’­çš„ä¹¦ï¼Œ10å ‚è¯¾è½»æ¾å®ç°å¸¦è´§æœˆå…¥3W+<br>&lt;==        Row: 13, æµ‹è¯•ç±»å‹, æµ‹è¯•æ•°æ®, æµ‹è¯•æè¿°æ•°æ®<br>&lt;==        Row: 14, æµ‹è¯•æ•°æ®update, æµ‹è¯•æ•°æ®update, æµ‹è¯•æ•°æ®update<br>&lt;==        Row: 15, -----------------, æµ‹è¯•æ•°æ®123, æµ‹è¯•æ•°æ®123<br>&lt;==      Total: 15<br></code></pre></td></tr></tbody></table></figure><p>â€‹    å…¶ä¸­æ¸…æ™°çš„æ ‡æ³¨äº†å½“å‰æ‰§è¡Œçš„SQLè¯­å¥æ˜¯ä»€ä¹ˆï¼Œæºå¸¦äº†ä»€ä¹ˆå‚æ•°ï¼Œå¯¹åº”çš„æ‰§è¡Œç»“æœæ˜¯ä»€ä¹ˆï¼Œæ‰€æœ‰ä¿¡æ¯åº”æœ‰å°½æœ‰ã€‚</p><p>â€‹    æ­¤å¤„è®¾ç½®çš„æ˜¯æ—¥å¿—çš„æ˜¾ç¤ºå½¢å¼ï¼Œå½“å‰é…ç½®çš„æ˜¯æ§åˆ¶å°è¾“å‡ºï¼Œå½“ç„¶è¿˜å¯ä»¥ç”±æ›´å¤šçš„é€‰æ‹©ï¼Œæ ¹æ®éœ€æ±‚åˆ‡æ¢å³å¯</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211129143207295.png" alt=""></p><p><strong>æ€»ç»“</strong></p><ol><li><p>æ‰‹å·¥å¯¼å…¥starteråæ ‡ï¼ˆ2ä¸ªï¼‰ï¼Œmysqlé©±åŠ¨ï¼ˆ1ä¸ªï¼‰</p></li><li><p>é…ç½®æ•°æ®æºä¸MyBatisPluså¯¹åº”çš„é…ç½®</p></li><li><p>å¼€å‘Daoæ¥å£ï¼ˆç»§æ‰¿BaseMapperï¼‰</p></li><li><p>åˆ¶ä½œæµ‹è¯•ç±»æµ‹è¯•DaoåŠŸèƒ½æ˜¯å¦æœ‰æ•ˆ</p></li><li><p>ä½¿ç”¨é…ç½®æ–¹å¼å¼€å¯æ—¥å¿—ï¼Œè®¾ç½®æ—¥å¿—è¾“å‡ºæ–¹å¼ä¸ºæ ‡å‡†è¾“å‡ºå³å¯æŸ¥é˜…SQLæ‰§è¡Œæ—¥å¿—</p></li></ol><h4 id="3-æ•°æ®å±‚å¼€å‘â€”â€”åˆ†é¡µåŠŸèƒ½åˆ¶ä½œ"><a href="#3-æ•°æ®å±‚å¼€å‘â€”â€”åˆ†é¡µåŠŸèƒ½åˆ¶ä½œ" class="headerlink" title="3.æ•°æ®å±‚å¼€å‘â€”â€”åˆ†é¡µåŠŸèƒ½åˆ¶ä½œ"></a>3.æ•°æ®å±‚å¼€å‘â€”â€”åˆ†é¡µåŠŸèƒ½åˆ¶ä½œ</h4><p>â€‹    å‰é¢ä»…ä»…æ˜¯ä½¿ç”¨äº†MPæä¾›çš„åŸºç¡€CRUDåŠŸèƒ½ï¼Œå®é™…ä¸ŠMPç»™æˆ‘ä»¬æä¾›äº†å‡ ä¹æ‰€æœ‰çš„åŸºç¡€æ“ä½œï¼Œè¿™ä¸€èŠ‚è¯´ä¸€ä¸‹å¦‚æœå®ç°æ•°æ®åº“ç«¯çš„åˆ†é¡µæ“ä½œ</p><p>â€‹    MPæä¾›çš„åˆ†é¡µæ“ä½œAPIå¦‚ä¸‹</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetPage</span><span class="hljs-params">()</span>{<br>    <span class="hljs-type">IPage</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>);<br>    bookDao.selectPage(page, <span class="hljs-literal">null</span>);<br>    System.out.println(page.getCurrent());<br>    System.out.println(page.getSize());<br>    System.out.println(page.getTotal());<br>    System.out.println(page.getPages());<br>    System.out.println(page.getRecords());<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    å…¶ä¸­selectPageæ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ªå°è£…åˆ†é¡µæ•°æ®çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡newçš„å½¢å¼åˆ›å»ºè¿™ä¸ªå¯¹è±¡ï¼Œå½“ç„¶è¿™ä¸ªå¯¹è±¡ä¹Ÿæ˜¯MPæä¾›çš„ï¼Œåˆ«é€‰é”™åŒ…äº†ã€‚åˆ›å»ºæ­¤å¯¹è±¡æ—¶å°±éœ€è¦æŒ‡å®šåˆ†é¡µçš„ä¸¤ä¸ªåŸºæœ¬æ•°æ®</p><ul><li>å½“å‰æ˜¾ç¤ºç¬¬å‡ é¡µ</li><li>æ¯é¡µæ˜¾ç¤ºå‡ æ¡æ•°æ®</li></ul><p>â€‹    å¯ä»¥é€šè¿‡åˆ›å»ºPageå¯¹è±¡æ—¶åˆ©ç”¨æ„é€ æ–¹æ³•åˆå§‹åŒ–è¿™ä¸¤ä¸ªæ•°æ®</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-type">IPage</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>);<br></code></pre></td></tr></tbody></table></figure><p>â€‹    å°†è¯¥å¯¹è±¡ä¼ å…¥åˆ°æŸ¥è¯¢æ–¹æ³•selectPageåï¼Œå¯ä»¥å¾—åˆ°æŸ¥è¯¢ç»“æœï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šå‘ç°å½“å‰æ“ä½œæŸ¥è¯¢ç»“æœè¿”å›å€¼ä»ç„¶æ˜¯ä¸€ä¸ªIPageå¯¹è±¡ï¼Œè¿™åˆæ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-type">IPage</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> bookDao.selectPage(page, <span class="hljs-literal">null</span>);<br></code></pre></td></tr></tbody></table></figure><p>â€‹    åŸæ¥è¿™ä¸ªIPageå¯¹è±¡ä¸­å°è£…äº†è‹¥å¹²ä¸ªæ•°æ®ï¼Œè€ŒæŸ¥è¯¢çš„ç»“æœä½œä¸ºIPageå¯¹è±¡å°è£…çš„ä¸€ä¸ªæ•°æ®å­˜åœ¨çš„ï¼Œå¯ä»¥ç†è§£ä¸ºæŸ¥è¯¢ç»“æœå¾—åˆ°åï¼Œåˆå¡åˆ°äº†è¿™ä¸ªIPageå¯¹è±¡ä¸­ï¼Œå…¶å®è¿˜æ˜¯ä¸ºäº†é«˜åº¦çš„å°è£…ï¼Œä¸€ä¸ªIPageæè¿°äº†åˆ†é¡µæ‰€æœ‰çš„ä¿¡æ¯ã€‚ä¸‹é¢5ä¸ªæ“ä½œå°±æ˜¯IPageå¯¹è±¡ä¸­å°è£…çš„æ‰€æœ‰ä¿¡æ¯äº†</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetPage</span><span class="hljs-params">()</span>{<br>    <span class="hljs-type">IPage</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>);<br>    bookDao.selectPage(page, <span class="hljs-literal">null</span>);<br>    System.out.println(page.getCurrent());<span class="hljs-comment">//å½“å‰é¡µç å€¼</span><br>    System.out.println(page.getSize());<span class="hljs-comment">//æ¯é¡µæ˜¾ç¤ºæ•°</span><br>    System.out.println(page.getTotal());<span class="hljs-comment">//æ•°æ®æ€»é‡</span><br>    System.out.println(page.getPages());<span class="hljs-comment">//æ€»é¡µæ•°</span><br>    System.out.println(page.getRecords());<span class="hljs-comment">//è¯¦ç»†æ•°æ®</span><br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    åˆ°è¿™é‡Œå°±çŸ¥é“è¿™äº›æ•°æ®å¦‚ä½•è·å–äº†ï¼Œä½†æ˜¯å½“ä½ å»æ‰§è¡Œè¿™ä¸ªæ“ä½œæ—¶ï¼Œä½ ä¼šå‘ç°å¹¶ä¸åƒæˆ‘ä»¬åˆ†æçš„è¿™æ ·ï¼Œå®é™…ä¸Šè¿™ä¸ªåˆ†é¡µå½“å‰æ˜¯æ— æ•ˆçš„ã€‚ä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼Ÿè¿™ä¸ªè¦æºäºMPçš„å†…éƒ¨æœºåˆ¶ã€‚</p><p>â€‹    å¯¹äºMySQLçš„åˆ†é¡µæ“ä½œä½¿ç”¨limitå…³é”®å­—è¿›è¡Œï¼Œè€Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ•°æ®åº“éƒ½ä½¿ç”¨limitå…³é”®å­—å®ç°çš„ï¼Œè¿™ä¸ªæ—¶å€™MPä¸ºäº†åˆ¶ä½œçš„å…¼å®¹æ€§å¼ºï¼Œå°†åˆ†é¡µæ“ä½œè®¾ç½®ä¸ºåŸºç¡€æŸ¥è¯¢æ“ä½œçš„å‡çº§ç‰ˆï¼Œä½ å¯ä»¥ç†è§£ä¸ºIPhone6ä¸IPhone6S-PLUSçš„å…³ç³»ã€‚</p><p>â€‹    åŸºç¡€æ“ä½œä¸­æœ‰æŸ¥è¯¢å…¨éƒ¨çš„åŠŸèƒ½ï¼Œè€Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šåªéœ€è¦å‡çº§ä¸€ä¸‹ï¼ˆPLUSï¼‰å°±å¯ä»¥å¾—åˆ°åˆ†é¡µæ“ä½œã€‚æ‰€ä»¥MPå°†åˆ†é¡µæ“ä½œåšæˆäº†ä¸€ä¸ªå¼€å…³ï¼Œä½ ç”¨åˆ†é¡µåŠŸèƒ½å°±æŠŠå¼€å…³å¼€å¯ï¼Œä¸ç”¨å°±ä¸éœ€è¦å¼€å¯è¿™ä¸ªå¼€å…³ã€‚è€Œæˆ‘ä»¬ç°åœ¨æ²¡æœ‰å¼€å¯è¿™ä¸ªå¼€å…³ï¼Œæ‰€ä»¥åˆ†é¡µæ“ä½œæ˜¯æ²¡æœ‰çš„ã€‚è¿™ä¸ªå¼€å…³æ˜¯é€šè¿‡MPçš„æ‹¦æˆªå™¨çš„å½¢å¼å­˜åœ¨çš„ï¼Œå…¶ä¸­çš„åŸç†è¿™é‡Œä¸åˆ†æäº†ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å­¦ä¹ MyBatisPlusè¿™é—¨è¯¾ç¨‹è¿›è¡Œè¯¦ç»†è§£è¯»ã€‚å…·ä½“è®¾ç½®æ–¹å¼å¦‚ä¸‹</p><p><strong>å®šä¹‰MPæ‹¦æˆªå™¨å¹¶å°†å…¶è®¾ç½®ä¸ºSpringç®¡æ§çš„bean</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MPConfig</span> {<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span>{<br>        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();<br>        interceptor.addInnerInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PaginationInnerInterceptor</span>());<br>        <span class="hljs-keyword">return</span> interceptor;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    ä¸Šè¿°ä»£ç ç¬¬ä¸€è¡Œæ˜¯åˆ›å»ºMPçš„æ‹¦æˆªå™¨æ ˆï¼Œè¿™ä¸ªæ—¶å€™æ‹¦æˆªå™¨æ ˆä¸­æ²¡æœ‰å…·ä½“çš„æ‹¦æˆªå™¨ï¼Œç¬¬äºŒè¡Œæ˜¯åˆå§‹åŒ–äº†åˆ†é¡µæ‹¦æˆªå™¨ï¼Œå¹¶æ·»åŠ åˆ°æ‹¦æˆªå™¨æ ˆä¸­ã€‚å¦‚æœåæœŸå¼€å‘å…¶ä»–åŠŸèƒ½ï¼Œéœ€è¦æ·»åŠ å…¨æ–°çš„æ‹¦æˆªå™¨ï¼ŒæŒ‰ç…§ç¬¬äºŒè¡Œçš„æ ¼å¼ç»§ç»­addè¿›å»æ–°çš„æ‹¦æˆªå™¨å°±å¯ä»¥äº†ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨IPageå°è£…åˆ†é¡µæ•°æ®</li><li>åˆ†é¡µæ“ä½œä¾èµ–MyBatisPlusåˆ†é¡µæ‹¦æˆªå™¨å®ç°åŠŸèƒ½</li><li>å€ŸåŠ©MyBatisPlusæ—¥å¿—æŸ¥é˜…æ‰§è¡ŒSQLè¯­å¥</li></ol><h4 id="4-æ•°æ®å±‚å¼€å‘â€”â€”æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½åˆ¶ä½œ"><a href="#4-æ•°æ®å±‚å¼€å‘â€”â€”æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½åˆ¶ä½œ" class="headerlink" title="4.æ•°æ®å±‚å¼€å‘â€”â€”æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½åˆ¶ä½œ"></a>4.æ•°æ®å±‚å¼€å‘â€”â€”æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½åˆ¶ä½œ</h4><p>â€‹    é™¤äº†åˆ†é¡µåŠŸèƒ½ï¼ŒMPè¿˜æä¾›æœ‰å¼ºå¤§çš„æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½ã€‚ä»¥å¾€æˆ‘ä»¬å†™æ¡ä»¶æŸ¥è¯¢è¦è‡ªå·±åŠ¨æ€æ‹¼å†™å¤æ‚çš„SQLè¯­å¥ï¼Œç°åœ¨ç®€å•äº†ï¼ŒMPå°†è¿™äº›æ“ä½œéƒ½åˆ¶ä½œæˆAPIæ¥å£ï¼Œè°ƒç”¨ä¸€ä¸ªåˆä¸€ä¸ªçš„æ–¹æ³•å°±å¯ä»¥å®ç°å„ç§å¥—ä»¶çš„æ‹¼è£…ã€‚è¿™é‡Œç»™å¤§å®¶æ™®åŠä¸€ä¸‹åŸºæœ¬æ ¼å¼ï¼Œè¯¦ç»†çš„æ“ä½œè¿˜æ˜¯åˆ°MPçš„è¯¾ç¨‹ä¸­æŸ¥é˜…å§</p><p>â€‹    ä¸‹é¢çš„æ“ä½œå°±æ˜¯æ‰§è¡Œä¸€ä¸ªæ¨¡ç³ŠåŒ¹é…å¯¹åº”çš„æ“ä½œï¼Œç”±likeæ¡ä»¶ä¹¦å†™å˜ä¸ºäº†likeæ–¹æ³•çš„è°ƒç”¨</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetBy</span><span class="hljs-params">()</span>{<br>    QueryWrapper&lt;Book&gt; qw = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br>    qw.like(<span class="hljs-string">"name"</span>,<span class="hljs-string">"Spring"</span>);<br>    bookDao.selectList(qw);<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    å…¶ä¸­ç¬¬ä¸€å¥QueryWrapperå¯¹è±¡æ˜¯ä¸€ä¸ªç”¨äºå°è£…æŸ¥è¯¢æ¡ä»¶çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯ä»¥åŠ¨æ€ä½¿ç”¨APIè°ƒç”¨çš„æ–¹æ³•æ·»åŠ æ¡ä»¶ï¼Œæœ€ç»ˆè½¬åŒ–æˆå¯¹åº”çš„SQLè¯­å¥ã€‚ç¬¬äºŒå¥å°±æ˜¯ä¸€ä¸ªæ¡ä»¶äº†ï¼Œéœ€è¦ä»€ä¹ˆæ¡ä»¶ï¼Œä½¿ç”¨QueryWapperå¯¹è±¡ç›´æ¥è°ƒç”¨å¯¹åº”æ“ä½œå³å¯ã€‚æ¯”å¦‚åšå¤§äºå°äºå…³ç³»ï¼Œå°±å¯ä»¥ä½¿ç”¨ltæˆ–gtæ–¹æ³•ï¼Œç­‰äºä½¿ç”¨eqæ–¹æ³•ï¼Œç­‰ç­‰ï¼Œæ­¤å¤„ä¸åšæ›´å¤šçš„è§£é‡Šäº†ã€‚</p><p>â€‹    è¿™ç»„APIä½¿ç”¨è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä½†æ˜¯å…³äºå±æ€§å­—æ®µåçš„ä¹¦å†™å­˜åœ¨ç€å®‰å…¨éšæ‚£ï¼Œæ¯”å¦‚æŸ¥è¯¢å­—æ®µnameï¼Œå½“å‰æ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢æ€ä¹¦å†™çš„ï¼Œä¸‡ä¸€å†™é”™ï¼Œç¼–è¯‘å™¨è¿˜æ²¡æœ‰åŠæ³•å‘ç°ï¼Œåªèƒ½å°†é—®é¢˜æŠ›åˆ°è¿è¡Œå™¨é€šè¿‡å¼‚å¸¸å †æ ˆå‘Šè¯‰å¼€å‘è€…ï¼Œä¸å¤ªå‹å¥½ã€‚</p><p>â€‹    MPé’ˆå¯¹å­—æ®µæ£€æŸ¥è¿›è¡Œäº†åŠŸèƒ½å‡çº§ï¼Œå…¨é¢æ”¯æŒLambdaè¡¨è¾¾å¼ï¼Œå°±æœ‰äº†ä¸‹é¢è¿™ç»„APIã€‚ç”±QueryWrapperå¯¹è±¡å‡çº§ä¸ºLambdaQueryWrapperå¯¹è±¡ï¼Œè¿™ä¸‹å°±å˜äº†ä¸Šè¿°é—®é¢˜çš„å‡ºç°</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetBy2</span><span class="hljs-params">()</span>{<br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"1"</span>;<br>    LambdaQueryWrapper&lt;Book&gt; lqw = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;Book&gt;();<br>    lqw.like(Book::getName,name);<br>    bookDao.selectList(lqw);<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    ä¸ºäº†ä¾¿äºå¼€å‘è€…åŠ¨æ€æ‹¼å†™SQLï¼Œé˜²æ­¢å°†nullæ•°æ®ä½œä¸ºæ¡ä»¶ä½¿ç”¨ï¼ŒMPè¿˜æä¾›äº†åŠ¨æ€æ‹¼è£…SQLçš„å¿«æ·ä¹¦å†™æ–¹å¼</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetBy2</span><span class="hljs-params">()</span>{<br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"1"</span>;<br>    LambdaQueryWrapper&lt;Book&gt; lqw = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;Book&gt;();<br>    <span class="hljs-comment">//if(name != null) lqw.like(Book::getName,name);//æ–¹å¼ä¸€ï¼šJAVAä»£ç æ§åˆ¶</span><br>    lqw.like(name != <span class="hljs-literal">null</span>,Book::getName,name);<span class="hljs-comment">//æ–¹å¼äºŒï¼šAPIæ¥å£æä¾›æ§åˆ¶å¼€å…³</span><br>    bookDao.selectList(lqw);<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    å…¶å®å°±æ˜¯ä¸ªæ ¼å¼ï¼Œæ²¡æœ‰åŒºåˆ«ã€‚å…³äºMPçš„åŸºç¡€æ“ä½œå°±è¯´åˆ°è¿™é‡Œå§ï¼Œå¦‚æœè¿™ä¸€å—çŸ¥è¯†ä¸å¤ªç†Ÿæ‚‰çš„å°ä¼™ä¼´è¿˜æ˜¯å»å®Œæ•´çš„å­¦ä¹ ä¸€ä¸‹MPçš„çŸ¥è¯†å§ï¼Œè¿™é‡Œåªæ˜¯èœ»èœ“ç‚¹æ°´çš„ç”¨äº†å‡ ä¸ªæ“ä½œè€Œå·²ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li><p>ä½¿ç”¨QueryWrapperå¯¹è±¡å°è£…æŸ¥è¯¢æ¡ä»¶</p></li><li><p>æ¨èä½¿ç”¨LambdaQueryWrapperå¯¹è±¡</p></li><li><p>æ‰€æœ‰æŸ¥è¯¢æ“ä½œå°è£…æˆæ–¹æ³•è°ƒç”¨</p></li><li><p>æŸ¥è¯¢æ¡ä»¶æ”¯æŒåŠ¨æ€æ¡ä»¶æ‹¼è£…</p></li></ol><h4 id="5-ä¸šåŠ¡å±‚å¼€å‘"><a href="#5-ä¸šåŠ¡å±‚å¼€å‘" class="headerlink" title="5.ä¸šåŠ¡å±‚å¼€å‘"></a>5.ä¸šåŠ¡å±‚å¼€å‘</h4><p>â€‹    æ•°æ®å±‚å¼€å‘å‘Šä¸€æ®µè½ï¼Œä¸‹é¢è¿›è¡Œä¸šåŠ¡å±‚å¼€å‘ï¼Œå…¶å®æ ‡å‡†ä¸šåŠ¡å±‚å¼€å‘å¾ˆå¤šåˆå­¦è€…è®¤ä¸ºå°±æ˜¯è°ƒç”¨æ•°æ®å±‚ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Ÿè¿™ä¸ªç†è§£æ˜¯æ²¡æœ‰å¤§é—®é¢˜çš„ï¼Œæ›´ç²¾å‡†çš„è¯´æ³•åº”è¯¥æ˜¯<font color="#ff0000"><b>ç»„ç»‡ä¸šåŠ¡é€»è¾‘åŠŸèƒ½ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå¯¹æ•°æ®æŒä¹…å±‚å‘èµ·è°ƒç”¨</b></font>ã€‚æœ‰ä»€ä¹ˆå·®åˆ«å‘¢ï¼Ÿç›®æ ‡æ˜¯ä¸ºäº†ç»„ç»‡å‡ºç¬¦åˆéœ€æ±‚çš„ä¸šåŠ¡é€»è¾‘åŠŸèƒ½ï¼Œè‡³äºè°ƒä¸è°ƒç”¨æ•°æ®å±‚è¿˜çœŸä¸å¥½è¯´ï¼Œæœ‰éœ€æ±‚å°±è°ƒç”¨ï¼Œæ²¡æœ‰éœ€æ±‚å°±ä¸è°ƒç”¨ã€‚</p><p>â€‹    ä¸€ä¸ªå¸¸è¯†æ€§çš„çŸ¥è¯†æ™®åŠä¸€ä¸‹ï¼Œä¸šåŠ¡å±‚çš„æ–¹æ³•åå®šä¹‰ä¸€å®šè¦ä¸ä¸šåŠ¡æœ‰å…³ï¼Œä¾‹å¦‚ç™»å½•æ“ä½œ</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JAVA">login(String username,String password);<br></code></pre></td></tr></tbody></table></figure><p>â€‹    è€Œæ•°æ®å±‚çš„æ–¹æ³•åå®šä¹‰ä¸€å®šä¸ä¸šåŠ¡æ— å…³ï¼Œæ˜¯ä¸€å®šï¼Œä¸æ˜¯å¯èƒ½ï¼Œä¹Ÿä¸æ˜¯æœ‰å¯èƒ½ï¼Œä¾‹å¦‚æ ¹æ®ç”¨æˆ·åå¯†ç æŸ¥è¯¢</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs JAVA">selectByUserNameAndPassword(String username,String password);<br></code></pre></td></tr></tbody></table></figure><p>â€‹    æˆ‘ä»¬åœ¨å¼€å‘çš„æ—¶å€™æ˜¯å¯ä»¥æ ¹æ®å®Œæˆçš„å·¥ä½œä¸åŒåˆ’åˆ†æˆä¸åŒèŒèƒ½çš„å¼€å‘å›¢é˜Ÿçš„ã€‚æ¯”å¦‚ä¸€ä¸ªå“¥ä»¬åˆ¶ä½œæ•°æ®å±‚ï¼Œä»–å°±å¯ä»¥ä¸çŸ¥é“ä¸šåŠ¡æ˜¯ä»€ä¹ˆæ ·å­ï¼Œæ‹¿åˆ°çš„éœ€æ±‚æ–‡æ¡£è¦æ±‚å¯èƒ½æ˜¯è¿™æ ·çš„</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">æ¥å£ï¼šä¼ å…¥ç”¨æˆ·åä¸å¯†ç å­—æ®µï¼ŒæŸ¥è¯¢å‡ºå¯¹åº”ç»“æœï¼Œç»“æœæ˜¯å•æ¡æ•°æ®<br>æ¥å£ï¼šä¼ å…¥IDå­—æ®µï¼ŒæŸ¥è¯¢å‡ºå¯¹åº”ç»“æœï¼Œç»“æœæ˜¯å•æ¡æ•°æ®<br>æ¥å£ï¼šä¼ å…¥ç¦»èŒå­—æ®µï¼ŒæŸ¥è¯¢å‡ºå¯¹åº”ç»“æœï¼Œç»“æœæ˜¯å¤šæ¡æ•°æ®<br></code></pre></td></tr></tbody></table></figure><p>â€‹    ä½†æ˜¯è¿›è¡Œä¸šåŠ¡åŠŸèƒ½å¼€å‘çš„å“¥ä»¬ï¼Œæ‹¿åˆ°çš„éœ€æ±‚æ–‡æ¡£è¦æ±‚å·®åˆ«å°±å¾ˆå¤§</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">æ¥å£ï¼šä¼ å…¥ç”¨æˆ·åä¸å¯†ç å­—æ®µï¼Œå¯¹ç”¨æˆ·åå­—æ®µåšé•¿åº¦æ ¡éªŒï¼Œ4-15ä½ï¼Œå¯¹å¯†ç å­—æ®µåšé•¿åº¦æ ¡éªŒï¼Œ8åˆ°24ä½ï¼Œå¯¹å–µå–µå–µå­—æ®µåšç‰¹æ®Šå­—ç¬¦æ ¡éªŒï¼Œä¸å…è®¸å­˜åœ¨ç©ºæ ¼ï¼ŒæŸ¥è¯¢ç»“æœä¸ºå¯¹è±¡ã€‚å¦‚æœä¸ºnullï¼Œè¿”å›BusinessExceptionï¼Œå°è£…æ¶ˆæ¯ç INFO<span class="hljs-built_in">_</span>LOGON<span class="hljs-built_in">_</span>USERNAME<span class="hljs-built_in">_</span>PASSWORD<span class="hljs-built_in">_</span>ERROR<br></code></pre></td></tr></tbody></table></figure><p>â€‹    ä½ æ¯”è¾ƒä¸€ä¸‹ï¼Œèƒ½æ˜¯ä¸€å›äº‹å—ï¼Ÿå·®åˆ«å¤ªå¤§äº†ï¼Œæ‰€ä»¥è¯´ä¸šåŠ¡å±‚æ–¹æ³•å®šä¹‰ä¸æ•°æ®å±‚æ–¹æ³•å®šä¹‰å·®å¼‚åŒ–å¾ˆå¤§ï¼Œåªä¸è¿‡æœ‰äº›å…¥é—¨çº§çš„å¼€å‘è€…æ‰‹æ‡’æˆ–è€…æ²¡æœ‰ä½¿ç”¨è¿‡å…¬å¸ç›¸å…³çš„ISOæ ‡å‡†åŒ–æ–‡æ¡£è€Œå·²ã€‚</p><p>â€‹    å¤šä½™çš„è¯ä¸è¯´äº†ï¼Œå’±ä»¬åšæ¡ˆä¾‹å°±ç®€å•åˆ¶ä½œäº†ï¼Œä¸šåŠ¡å±‚æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BookService</span> {<br>    Boolean <span class="hljs-title function_">save</span><span class="hljs-params">(Book book)</span>;<br>    Boolean <span class="hljs-title function_">update</span><span class="hljs-params">(Book book)</span>;<br>    Boolean <span class="hljs-title function_">delete</span><span class="hljs-params">(Integer id)</span>;<br>    Book <span class="hljs-title function_">getById</span><span class="hljs-params">(Integer id)</span>;<br>    List&lt;Book&gt; <span class="hljs-title function_">getAll</span><span class="hljs-params">()</span>;<br>    IPage&lt;Book&gt; <span class="hljs-title function_">getPage</span><span class="hljs-params">(<span class="hljs-type">int</span> currentPage,<span class="hljs-type">int</span> pageSize)</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    ä¸šåŠ¡å±‚å®ç°ç±»å¦‚ä¸‹ï¼Œè½¬è°ƒæ•°æ®å±‚å³å¯</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">BookService</span> {<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookDao bookDao;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">save</span><span class="hljs-params">(Book book)</span> {<br>        <span class="hljs-keyword">return</span> bookDao.insert(book) &gt; <span class="hljs-number">0</span>;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">update</span><span class="hljs-params">(Book book)</span> {<br>        <span class="hljs-keyword">return</span> bookDao.updateById(book) &gt; <span class="hljs-number">0</span>;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">delete</span><span class="hljs-params">(Integer id)</span> {<br>        <span class="hljs-keyword">return</span> bookDao.deleteById(id) &gt; <span class="hljs-number">0</span>;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Book <span class="hljs-title function_">getById</span><span class="hljs-params">(Integer id)</span> {<br>        <span class="hljs-keyword">return</span> bookDao.selectById(id);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> List&lt;Book&gt; <span class="hljs-title function_">getAll</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> bookDao.selectList(<span class="hljs-literal">null</span>);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> IPage&lt;Book&gt; <span class="hljs-title function_">getPage</span><span class="hljs-params">(<span class="hljs-type">int</span> currentPage, <span class="hljs-type">int</span> pageSize)</span> {<br>        <span class="hljs-type">IPage</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(currentPage,pageSize);<br>        bookDao.selectPage(page,<span class="hljs-literal">null</span>);<br>        <span class="hljs-keyword">return</span> page;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    åˆ«å¿˜äº†å¯¹ä¸šåŠ¡å±‚æ¥å£è¿›è¡Œæµ‹è¯•ï¼Œæµ‹è¯•ç±»å¦‚ä¸‹</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookServiceTest</span> {<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> IBookService bookService;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetById</span><span class="hljs-params">()</span>{<br>        System.out.println(bookService.getById(<span class="hljs-number">4</span>));<br>    }<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSave</span><span class="hljs-params">()</span>{<br>        <span class="hljs-type">Book</span> <span class="hljs-variable">book</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>();<br>        book.setType(<span class="hljs-string">"æµ‹è¯•æ•°æ®123"</span>);<br>        book.setName(<span class="hljs-string">"æµ‹è¯•æ•°æ®123"</span>);<br>        book.setDescription(<span class="hljs-string">"æµ‹è¯•æ•°æ®123"</span>);<br>        bookService.save(book);<br>    }<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdate</span><span class="hljs-params">()</span>{<br>        <span class="hljs-type">Book</span> <span class="hljs-variable">book</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Book</span>();<br>        book.setId(<span class="hljs-number">17</span>);<br>        book.setType(<span class="hljs-string">"-----------------"</span>);<br>        book.setName(<span class="hljs-string">"æµ‹è¯•æ•°æ®123"</span>);<br>        book.setDescription(<span class="hljs-string">"æµ‹è¯•æ•°æ®123"</span>);<br>        bookService.updateById(book);<br>    }<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelete</span><span class="hljs-params">()</span>{<br>        bookService.removeById(<span class="hljs-number">18</span>);<br>    }<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetAll</span><span class="hljs-params">()</span>{<br>        bookService.list();<br>    }<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetPage</span><span class="hljs-params">()</span>{<br>        IPage&lt;Book&gt; page = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>&lt;Book&gt;(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>);<br>        bookService.page(page);<br>        System.out.println(page.getCurrent());<br>        System.out.println(page.getSize());<br>        System.out.println(page.getTotal());<br>        System.out.println(page.getPages());<br>        System.out.println(page.getRecords());<br>    }<br><br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>Serviceæ¥å£åç§°å®šä¹‰æˆä¸šåŠ¡åç§°ï¼Œå¹¶ä¸Daoæ¥å£åç§°è¿›è¡ŒåŒºåˆ†</li><li>åˆ¶ä½œæµ‹è¯•ç±»æµ‹è¯•ServiceåŠŸèƒ½æ˜¯å¦æœ‰æ•ˆ</li></ol><h5 id="ä¸šåŠ¡å±‚å¿«é€Ÿå¼€å‘"><a href="#ä¸šåŠ¡å±‚å¿«é€Ÿå¼€å‘" class="headerlink" title="ä¸šåŠ¡å±‚å¿«é€Ÿå¼€å‘"></a>ä¸šåŠ¡å±‚å¿«é€Ÿå¼€å‘</h5><p>â€‹    å…¶å®MPæŠ€æœ¯ä¸ä»…æä¾›äº†æ•°æ®å±‚å¿«é€Ÿå¼€å‘æ–¹æ¡ˆï¼Œä¸šåŠ¡å±‚MPä¹Ÿç»™äº†ä¸€ä¸ªé€šç”¨æ¥å£ï¼Œä¸ªäººè§‚ç‚¹ä¸æ¨èä½¿ç”¨ï¼Œå‡‘åˆèƒ½ç”¨å§ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå°è£…+ç»§æ‰¿çš„æ€æƒ³ï¼Œä»£ç ç»™å‡ºï¼Œå®é™…å¼€å‘æ…ç”¨</p><p>â€‹    ä¸šåŠ¡å±‚æ¥å£å¿«é€Ÿå¼€å‘</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IBookService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IService</span>&lt;Book&gt; {<br>    <span class="hljs-comment">//æ·»åŠ éé€šç”¨æ“ä½œAPIæ¥å£</span><br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    ä¸šåŠ¡å±‚æ¥å£å®ç°ç±»å¿«é€Ÿå¼€å‘ï¼Œå…³æ³¨ç»§æ‰¿çš„ç±»éœ€è¦ä¼ å…¥ä¸¤ä¸ªæ³›å‹ï¼Œä¸€ä¸ªæ˜¯æ•°æ®å±‚æ¥å£ï¼Œå¦ä¸€ä¸ªæ˜¯å®ä½“ç±»</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;BookDao, Book&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IBookService</span> {<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> BookDao bookDao;<br><span class="hljs-comment">//æ·»åŠ éé€šç”¨æ“ä½œAPI</span><br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    å¦‚æœæ„Ÿè§‰MPæä¾›çš„åŠŸèƒ½ä¸è¶³ä»¥æ”¯æ’‘ä½ çš„ä½¿ç”¨éœ€è¦ï¼Œå…¶å®æ˜¯ä¸€å®šä¸èƒ½æ”¯æ’‘çš„ï¼Œå› ä¸ºéœ€æ±‚ä¸å¯èƒ½æ˜¯é€šç”¨çš„ï¼Œåœ¨åŸå§‹æ¥å£åŸºç¡€ä¸Šæ¥ç€å®šä¹‰æ–°çš„APIæ¥å£å°±è¡Œäº†ï¼Œæ­¤å¤„ä¸å†è¯´å¤ªå¤šäº†ï¼Œå°±æ˜¯è‡ªå®šä¹‰è‡ªå·±çš„æ“ä½œäº†ï¼Œä½†æ˜¯ä¸è¦å’Œå·²æœ‰çš„APIæ¥å£åå†²çªå³å¯ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨é€šç”¨æ¥å£ï¼ˆISerivce<t>ï¼‰å¿«é€Ÿå¼€å‘Service</t></li><li>ä½¿ç”¨é€šç”¨å®ç°ç±»ï¼ˆServiceImpl<m,t>ï¼‰å¿«é€Ÿå¼€å‘ServiceImpl</m,t></li><li>å¯ä»¥åœ¨é€šç”¨æ¥å£åŸºç¡€ä¸ŠåšåŠŸèƒ½é‡è½½æˆ–åŠŸèƒ½è¿½åŠ </li><li>æ³¨æ„é‡è½½æ—¶ä¸è¦è¦†ç›–åŸå§‹æ“ä½œï¼Œé¿å…åŸå§‹æä¾›çš„åŠŸèƒ½ä¸¢å¤±</li></ol><h4 id="6-è¡¨ç°å±‚å¼€å‘"><a href="#6-è¡¨ç°å±‚å¼€å‘" class="headerlink" title="6.è¡¨ç°å±‚å¼€å‘"></a>6.è¡¨ç°å±‚å¼€å‘</h4><p>â€‹    ç»ˆäºåšåˆ°è¡¨ç°å±‚äº†ï¼Œåšäº†è¿™ä¹ˆå¤šéƒ½æ˜¯åŸºç¡€å·¥ä½œã€‚å…¶å®ä½ ç°åœ¨å›å¤´çœ‹çœ‹ï¼Œå“ªé‡Œè¿˜æœ‰ä»€ä¹ˆSpringBootçš„å½±å­ï¼Ÿå‰é¢1,2æ­¥å°±æå®Œäº†ã€‚ç»§ç»­å®Œæˆè¡¨ç°å±‚åˆ¶ä½œå§ï¼Œå’±ä»¬è¡¨ç°å±‚çš„å¼€å‘ä½¿ç”¨åŸºäºRestfulçš„è¡¨ç°å±‚æ¥å£å¼€å‘ï¼ŒåŠŸèƒ½æµ‹è¯•é€šè¿‡Postmanå·¥å…·è¿›è¡Œ</p><p>â€‹    è¡¨ç°å±‚æ¥å£å¦‚ä¸‹:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping("/books")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookController2</span> {<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> IBookService bookService;<br><br>    <span class="hljs-meta">@GetMapping</span><br>    <span class="hljs-keyword">public</span> List&lt;Book&gt; <span class="hljs-title function_">getAll</span><span class="hljs-params">()</span>{<br>        <span class="hljs-keyword">return</span> bookService.list();<br>    }<br><br>    <span class="hljs-meta">@PostMapping</span><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">save</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Book book)</span>{<br>        <span class="hljs-keyword">return</span> bookService.save(book);<br>    }<br><br>    <span class="hljs-meta">@PutMapping</span><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Book book)</span>{<br>        <span class="hljs-keyword">return</span> bookService.modify(book);<br>    }<br><br>    <span class="hljs-meta">@DeleteMapping("{id}")</span><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">delete</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Integer id)</span>{<br>        <span class="hljs-keyword">return</span> bookService.delete(id);<br>    }<br><br>    <span class="hljs-meta">@GetMapping("{id}")</span><br>    <span class="hljs-keyword">public</span> Book <span class="hljs-title function_">getById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Integer id)</span>{<br>        <span class="hljs-keyword">return</span> bookService.getById(id);<br>    }<br><br>    <span class="hljs-meta">@GetMapping("{currentPage}/{pageSize}")</span><br>    <span class="hljs-keyword">public</span> IPage&lt;Book&gt; <span class="hljs-title function_">getPage</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> currentPage,<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> pageSize)</span>{<br>        <span class="hljs-keyword">return</span> bookService.getPage(currentPage,pageSize, <span class="hljs-literal">null</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    åœ¨å®ç”¨Postmanæµ‹è¯•æ—¶å…³æ³¨æäº¤ç±»å‹ï¼Œå¯¹åº”ä¸Šå³å¯ï¼Œä¸ç„¶å°±ä¼šæŠ¥405çš„é”™è¯¯ç äº†</p><p><strong>æ™®é€šGETè¯·æ±‚</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211129152237371.png" alt=""></p><p><strong>PUTè¯·æ±‚ä¼ é€’jsonæ•°æ®ï¼Œåå°å®ç”¨@RequestBodyæ¥æ”¶æ•°æ®</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211129152300177.png" alt=""></p><p><strong>GETè¯·æ±‚ä¼ é€’è·¯å¾„å˜é‡ï¼Œåå°å®ç”¨@PathVariableæ¥æ”¶æ•°æ®</strong></p><p><strong>æ€»ç»“</strong></p><ol><li>åŸºäºRestfulåˆ¶ä½œè¡¨ç°å±‚æ¥å£<ul><li>æ–°å¢ï¼šPOST</li><li>åˆ é™¤ï¼šDELETE</li><li>ä¿®æ”¹ï¼šPUT</li><li>æŸ¥è¯¢ï¼šGET</li></ul></li><li>æ¥æ”¶å‚æ•°<ul><li>å®ä½“æ•°æ®ï¼š@RequestBody</li><li>è·¯å¾„å˜é‡ï¼š@PathVariable</li></ul></li></ol><h4 id="7-è¡¨ç°å±‚æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†"><a href="#7-è¡¨ç°å±‚æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†" class="headerlink" title="7.è¡¨ç°å±‚æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†"></a>7.è¡¨ç°å±‚æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†</h4><p>â€‹    ç›®å‰æˆ‘ä»¬é€šè¿‡Postmanæµ‹è¯•åä¸šåŠ¡å±‚æ¥å£åŠŸèƒ½æ—¶é€šçš„ï¼Œä½†æ˜¯è¿™æ ·çš„ç»“æœç»™åˆ°å‰ç«¯å¼€å‘è€…ä¼šå‡ºç°ä¸€ä¸ªå°é—®é¢˜ã€‚ä¸åŒçš„æ“ä½œç»“æœæ‰€å±•ç¤ºçš„æ•°æ®æ ¼å¼å·®å¼‚åŒ–ä¸¥é‡</p><p>â€‹    <strong>å¢åˆ æ”¹æ“ä½œç»“æœ</strong></p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">true<br></code></pre></td></tr></tbody></table></figure><p>â€‹    <strong>æŸ¥è¯¢å•ä¸ªæ•°æ®æ“ä½œç»“æœ</strong></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">{</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"è®¡ç®—æœºç†è®º"</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"Springå®æˆ˜&nbsp;ç¬¬5ç‰ˆ"</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"Springå…¥é—¨ç»å…¸æ•™ç¨‹"</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹    <strong>æŸ¥è¯¢å…¨éƒ¨æ•°æ®æ“ä½œç»“æœ</strong></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">[</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-punctuation">{</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"è®¡ç®—æœºç†è®º"</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"Springå®æˆ˜&nbsp;ç¬¬5ç‰ˆ"</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"Springå…¥é—¨ç»å…¸æ•™ç¨‹"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-punctuation">{</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"è®¡ç®—æœºç†è®º"</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"Spring&nbsp;5æ ¸å¿ƒåŸç†ä¸30ä¸ªç±»æ‰‹å†™å®æˆ˜"</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"åå¹´æ²‰æ·€ä¹‹ä½œ"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-punctuation">}</span><br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹    æ¯ç§ä¸åŒæ“ä½œè¿”å›çš„æ•°æ®æ ¼å¼éƒ½ä¸ä¸€æ ·ï¼Œè€Œä¸”è¿˜ä¸çŸ¥é“ä»¥åè¿˜ä¼šæœ‰ä»€ä¹ˆæ ¼å¼ï¼Œè¿™æ ·çš„ç»“æœè®©å‰ç«¯äººå‘˜çœ‹äº†æ˜¯å¾ˆå®¹æ˜“è®©äººå´©æºƒçš„ï¼Œå¿…é¡»å°†æ‰€æœ‰æ“ä½œçš„æ“ä½œç»“æœæ•°æ®æ ¼å¼ç»Ÿä¸€èµ·æ¥ï¼Œéœ€è¦è®¾è®¡è¡¨ç°å±‚è¿”å›ç»“æœçš„æ¨¡å‹ç±»ï¼Œç”¨äºåç«¯ä¸å‰ç«¯è¿›è¡Œæ•°æ®æ ¼å¼ç»Ÿä¸€ï¼Œä¹Ÿç§°ä¸º<strong>å‰åç«¯æ•°æ®åè®®</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">R</span> {<br>    <span class="hljs-keyword">private</span> Boolean flag;<br>    <span class="hljs-keyword">private</span> Object data;<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    å…¶ä¸­flagç”¨äºæ ‡è¯†æ“ä½œæ˜¯å¦æˆåŠŸï¼Œdataç”¨äºå°è£…æ“ä½œæ•°æ®ï¼Œç°åœ¨çš„æ•°æ®æ ¼å¼å°±å˜äº†</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs JSON"><span class="hljs-punctuation">{</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"flag"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"è®¡ç®—æœºç†è®º"</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"Springå®æˆ˜&nbsp;ç¬¬5ç‰ˆ"</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"Springå…¥é—¨ç»å…¸æ•™ç¨‹"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-punctuation">}</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹    è¡¨ç°å±‚å¼€å‘æ ¼å¼ä¹Ÿéœ€è¦è½¬æ¢ä¸€ä¸‹</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211129153301262.png" alt=""></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211129153319052.png" alt=""></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211129153332499.png" alt=""></p><p>â€‹    ç»“æœè¿™ä¹ˆä¸€æŠ˜è…¾ï¼Œå…¨æ ¼å¼ç»Ÿä¸€ï¼Œç°åœ¨åç«¯å‘é€ç»™å‰ç«¯çš„æ•°æ®æ ¼å¼å°±ç»Ÿä¸€äº†ï¼Œå…å»äº†ä¸å°‘å‰ç«¯è§£ææ•°æ®çš„éº»çƒ¦ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li><p>è®¾è®¡ç»Ÿä¸€çš„è¿”å›å€¼ç»“æœç±»å‹ä¾¿äºå‰ç«¯å¼€å‘è¯»å–æ•°æ®</p></li><li><p>è¿”å›å€¼ç»“æœç±»å‹å¯ä»¥æ ¹æ®éœ€æ±‚è‡ªè¡Œè®¾å®šï¼Œæ²¡æœ‰å›ºå®šæ ¼å¼</p></li><li><p>è¿”å›å€¼ç»“æœæ¨¡å‹ç±»ç”¨äºåç«¯ä¸å‰ç«¯è¿›è¡Œæ•°æ®æ ¼å¼ç»Ÿä¸€ï¼Œä¹Ÿç§°ä¸ºå‰åç«¯æ•°æ®åè®®</p></li></ol><h4 id="8-å‰åç«¯è”é€šæ€§æµ‹è¯•"><a href="#8-å‰åç«¯è”é€šæ€§æµ‹è¯•" class="headerlink" title="8.å‰åç«¯è”é€šæ€§æµ‹è¯•"></a>8.å‰åç«¯è”é€šæ€§æµ‹è¯•</h4><p>â€‹    åç«¯çš„è¡¨ç°å±‚æ¥å£å¼€å‘å®Œæ¯•ï¼Œå°±å¯ä»¥è¿›è¡Œå‰ç«¯çš„å¼€å‘äº†ã€‚</p><p>â€‹    å°†å‰ç«¯äººå‘˜å¼€å‘çš„é¡µé¢ä¿å­˜åˆ°lresourcesç›®å½•ä¸‹çš„staticç›®å½•ä¸­ï¼Œå»ºè®®æ‰§è¡Œmavençš„cleanç”Ÿå‘½å‘¨æœŸï¼Œé¿å…ç¼“å­˜çš„é—®é¢˜å‡ºç°ã€‚</p><p>â€‹    <img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211129153831990.png" alt=""></p><p>â€‹    åœ¨è¿›è¡Œå…·ä½“çš„åŠŸèƒ½å¼€å‘ä¹‹å‰ï¼Œå…ˆåšè”é€šæ€§çš„æµ‹è¯•ï¼Œé€šè¿‡é¡µé¢å‘é€å¼‚æ­¥æäº¤ï¼ˆaxiosï¼‰ï¼Œè¿™ä¸€æ­¥è°ƒè¯•é€šè¿‡åå†è¿›è¡Œè¿›ä¸€æ­¥çš„åŠŸèƒ½å¼€å‘</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//åˆ—è¡¨</span><br><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) {<br>axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/books"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>{<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">data</span>);<br>});<br>},<br></code></pre></td></tr></tbody></table></figure><p>â€‹    åªè¦åå°ä»£ç èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œå‰ç«¯èƒ½å¤Ÿåœ¨æ—¥å¿—ä¸­æ¥æ”¶åˆ°æ•°æ®ï¼Œå°±è¯æ˜å‰åç«¯æ˜¯é€šçš„ï¼Œä¹Ÿå°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥çš„åŠŸèƒ½å¼€å‘äº†</p><p><strong>æ€»ç»“</strong></p><ol><li>å•ä½“é¡¹ç›®ä¸­é¡µé¢æ”¾ç½®åœ¨resources/staticç›®å½•ä¸‹</li><li>createdé’©å­å‡½æ•°ç”¨äºåˆå§‹åŒ–é¡µé¢æ—¶å‘èµ·è°ƒç”¨</li><li>é¡µé¢ä½¿ç”¨axioså‘é€å¼‚æ­¥è¯·æ±‚è·å–æ•°æ®åç¡®è®¤å‰åç«¯æ˜¯å¦è”é€š</li></ol><h4 id="9-é¡µé¢åŸºç¡€åŠŸèƒ½å¼€å‘"><a href="#9-é¡µé¢åŸºç¡€åŠŸèƒ½å¼€å‘" class="headerlink" title="9.é¡µé¢åŸºç¡€åŠŸèƒ½å¼€å‘"></a>9.é¡µé¢åŸºç¡€åŠŸèƒ½å¼€å‘</h4><h5 id="F-1-åˆ—è¡¨åŠŸèƒ½ï¼ˆéåˆ†é¡µç‰ˆï¼‰"><a href="#F-1-åˆ—è¡¨åŠŸèƒ½ï¼ˆéåˆ†é¡µç‰ˆï¼‰" class="headerlink" title="F-1.åˆ—è¡¨åŠŸèƒ½ï¼ˆéåˆ†é¡µç‰ˆï¼‰"></a>F-1.åˆ—è¡¨åŠŸèƒ½ï¼ˆéåˆ†é¡µç‰ˆï¼‰</h5><p>â€‹        åˆ—è¡¨åŠŸèƒ½ä¸»è¦æ“ä½œå°±æ˜¯åŠ è½½å®Œæ•°æ®ï¼Œå°†æ•°æ®å±•ç¤ºåˆ°é¡µé¢ä¸Šï¼Œæ­¤å¤„è¦åˆ©ç”¨VUEçš„æ•°æ®æ¨¡å‹ç»‘å®šï¼Œå‘é€è¯·æ±‚å¾—åˆ°æ•°æ®ï¼Œç„¶åé¡µé¢ä¸Šè¯»å–æŒ‡å®šæ•°æ®å³å¯</p><p>â€‹        <strong>é¡µé¢æ•°æ®æ¨¡å‹å®šä¹‰</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">data:{<br>dataList: [],//å½“å‰é¡µè¦å±•ç¤ºçš„åˆ—è¡¨æ•°æ®<br>...<br>},<br></code></pre></td></tr></tbody></table></figure><p>â€‹        å¼‚æ­¥è¯·æ±‚è·å–æ•°æ®</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//åˆ—è¡¨</span><br><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) {<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/books"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>{<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataList</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>;<br>    });<br>},<br></code></pre></td></tr></tbody></table></figure><p>â€‹        è¿™æ ·åœ¨é¡µé¢åŠ è½½æ—¶å°±å¯ä»¥è·å–åˆ°æ•°æ®ï¼Œå¹¶ä¸”ç”±VUEå°†æ•°æ®å±•ç¤ºåˆ°é¡µé¢ä¸Šäº†</p><p>æ€»ç»“ï¼š</p><ol><li>å°†æŸ¥è¯¢æ•°æ®è¿”å›åˆ°é¡µé¢ï¼Œåˆ©ç”¨å‰ç«¯æ•°æ®ç»‘å®šè¿›è¡Œæ•°æ®å±•ç¤º</li></ol><h5 id="F-2-æ·»åŠ åŠŸèƒ½"><a href="#F-2-æ·»åŠ åŠŸèƒ½" class="headerlink" title="F-2.æ·»åŠ åŠŸèƒ½"></a>F-2.æ·»åŠ åŠŸèƒ½</h5><p>â€‹        æ·»åŠ åŠŸèƒ½ç”¨äºæ”¶é›†æ•°æ®çš„è¡¨å•æ˜¯é€šè¿‡ä¸€ä¸ªå¼¹çª—å±•ç¤ºçš„ï¼Œå› æ­¤åœ¨æ·»åŠ æ“ä½œå‰é¦–å…ˆè¦è¿›è¡Œå¼¹çª—çš„å±•ç¤ºï¼Œæ·»åŠ åéšè—å¼¹çª—å³å¯ã€‚å› ä¸ºè¿™ä¸ªå¼¹çª—ä¸€ç›´å­˜åœ¨ï¼Œå› æ­¤å½“é¡µé¢åŠ è½½æ—¶é¦–å…ˆè®¾ç½®è¿™ä¸ªå¼¹çª—ä¸ºä¸å¯æ˜¾ç¤ºçŠ¶æ€ï¼Œéœ€è¦å±•ç¤ºï¼Œåˆ‡æ¢çŠ¶æ€å³å¯</p><p>â€‹        <strong>é»˜è®¤çŠ¶æ€</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vue">data:{<br>dialogFormVisible: false,//æ·»åŠ è¡¨å•æ˜¯å¦å¯è§<br>...<br>},<br></code></pre></td></tr></tbody></table></figure><p>â€‹        <strong>åˆ‡æ¢ä¸ºæ˜¾ç¤ºçŠ¶æ€</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//å¼¹å‡ºæ·»åŠ çª—å£</span><br><span class="hljs-title function_">handleCreate</span>(<span class="hljs-params"></span>) {<br><span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible</span> = <span class="hljs-literal">true</span>;<br>},<br></code></pre></td></tr></tbody></table></figure><p>â€‹        ç”±äºæ¯æ¬¡æ·»åŠ æ•°æ®éƒ½æ˜¯ä½¿ç”¨åŒä¸€ä¸ªå¼¹çª—å½•å…¥æ•°æ®ï¼Œæ‰€ä»¥æ¯æ¬¡æ“ä½œçš„ç—•è¿¹å°†åœ¨ä¸‹ä¸€æ¬¡æ“ä½œæ—¶å±•ç¤ºå‡ºæ¥ï¼Œéœ€è¦åœ¨æ¯æ¬¡æ“ä½œä¹‹å‰æ¸…ç†æ‰ä¸Šæ¬¡æ“ä½œçš„ç—•è¿¹</p><p>â€‹        <strong>å®šä¹‰æ¸…ç†æ•°æ®æ“ä½œ</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//é‡ç½®è¡¨å•</span><br><span class="hljs-title function_">resetForm</span>(<span class="hljs-params"></span>) {<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span> = {};<br>},<br></code></pre></td></tr></tbody></table></figure><p>â€‹        <strong>åˆ‡æ¢å¼¹çª—çŠ¶æ€æ—¶æ¸…ç†æ•°æ®</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//å¼¹å‡ºæ·»åŠ çª—å£</span><br><span class="hljs-title function_">handleCreate</span>(<span class="hljs-params"></span>) {<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible</span> = <span class="hljs-literal">true</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">resetForm</span>();<br>},<br></code></pre></td></tr></tbody></table></figure><p>â€‹        è‡³æ­¤å‡†å¤‡å·¥ä½œå®Œæˆï¼Œä¸‹é¢å°±è¦è°ƒç”¨åå°å®Œæˆæ·»åŠ æ“ä½œäº†</p><p>â€‹        <strong>æ·»åŠ æ“ä½œ</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//æ·»åŠ </span><br>handleAdd () {<br>    <span class="hljs-comment">//å‘é€å¼‚æ­¥è¯·æ±‚</span><br>    axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/books"</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>{<br>        <span class="hljs-comment">//å¦‚æœæ“ä½œæˆåŠŸï¼Œå…³é—­å¼¹å±‚ï¼Œæ˜¾ç¤ºæ•°æ®</span><br>        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">flag</span>){<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible</span> = <span class="hljs-literal">false</span>;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">"æ·»åŠ æˆåŠŸ"</span>);<br>        }<span class="hljs-keyword">else</span> {<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ·»åŠ å¤±è´¥"</span>);<br>        }<br>    }).<span class="hljs-title function_">finally</span>(<span class="hljs-function">()=&gt;</span>{<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAll</span>();<br>    });<br>},<br></code></pre></td></tr></tbody></table></figure><ol><li>å°†è¦ä¿å­˜çš„æ•°æ®ä¼ é€’åˆ°åå°ï¼Œé€šè¿‡postè¯·æ±‚çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’jsonæ•°æ®åˆ°åå°</li><li>æ ¹æ®è¿”å›çš„æ“ä½œç»“æœå†³å®šä¸‹ä¸€æ­¥æ“ä½œ<ul><li>å¦‚ä½•æ˜¯trueå°±å…³é—­æ·»åŠ çª—å£ï¼Œæ˜¾ç¤ºæ·»åŠ æˆåŠŸçš„æ¶ˆæ¯</li><li>å¦‚æœæ˜¯falseä¿ç•™æ·»åŠ çª—å£ï¼Œæ˜¾ç¤ºæ·»åŠ å¤±è´¥çš„æ¶ˆæ¯</li></ul></li><li>æ— è®ºæ·»åŠ æ˜¯å¦æˆåŠŸï¼Œé¡µé¢å‡è¿›è¡Œåˆ·æ–°ï¼ŒåŠ¨æ€åŠ è½½æ•°æ®ï¼ˆå¯¹getAllæ“ä½œå‘èµ·è°ƒç”¨ï¼‰</li></ol><p>â€‹        <strong>å–æ¶ˆæ·»åŠ æ“ä½œ</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//å–æ¶ˆ</span><br><span class="hljs-title function_">cancel</span>(<span class="hljs-params"></span>){<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible</span> = <span class="hljs-literal">false</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"æ“ä½œå–æ¶ˆ"</span>);<br>},<br></code></pre></td></tr></tbody></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>è¯·æ±‚æ–¹å¼ä½¿ç”¨POSTè°ƒç”¨åå°å¯¹åº”æ“ä½œ</li><li>æ·»åŠ æ“ä½œç»“æŸååŠ¨æ€åˆ·æ–°é¡µé¢åŠ è½½æ•°æ®</li><li>æ ¹æ®æ“ä½œç»“æœä¸åŒï¼Œæ˜¾ç¤ºå¯¹åº”çš„æç¤ºä¿¡æ¯</li><li>å¼¹å‡ºæ·»åŠ Divæ—¶æ¸…é™¤è¡¨å•æ•°æ®</li></ol><h5 id="F-3-åˆ é™¤åŠŸèƒ½"><a href="#F-3-åˆ é™¤åŠŸèƒ½" class="headerlink" title="F-3.åˆ é™¤åŠŸèƒ½"></a>F-3.åˆ é™¤åŠŸèƒ½</h5><p>â€‹        æ¨¡ä»¿æ·»åŠ æ“ä½œåˆ¶ä½œåˆ é™¤åŠŸèƒ½ï¼Œå·®åˆ«ä¹‹å¤„åœ¨äºåˆ é™¤æ“ä½œä»…ä¼ é€’ä¸€ä¸ªå¾…åˆ é™¤çš„æ•°æ®idåˆ°åå°å³å¯</p><p>â€‹        <strong>åˆ é™¤æ“ä½œ</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">// åˆ é™¤</span><br><span class="hljs-title function_">handleDelete</span>(<span class="hljs-params">row</span>) {<br>    axios.<span class="hljs-title function_">delete</span>(<span class="hljs-string">"/books/"</span>+row.<span class="hljs-property">id</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>{<br>        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">flag</span>){<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">"åˆ é™¤æˆåŠŸ"</span>);<br>        }<span class="hljs-keyword">else</span>{<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"åˆ é™¤å¤±è´¥"</span>);<br>        }<br>    }).<span class="hljs-title function_">finally</span>(<span class="hljs-function">()=&gt;</span>{<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAll</span>();<br>    });<br>},<br></code></pre></td></tr></tbody></table></figure><p>â€‹        <strong>åˆ é™¤æ“ä½œæç¤ºä¿¡æ¯</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">// åˆ é™¤</span><br><span class="hljs-title function_">handleDelete</span>(<span class="hljs-params">row</span>) {<br>    <span class="hljs-comment">//1.å¼¹å‡ºæç¤ºæ¡†</span><br>    <span class="hljs-variable language_">this</span>.$confirm(<span class="hljs-string">"æ­¤æ“ä½œæ°¸ä¹…åˆ é™¤å½“å‰æ•°æ®ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ"</span>,<span class="hljs-string">"æç¤º"</span>,{<br>        <span class="hljs-attr">type</span>:<span class="hljs-string">'info'</span><br>    }).<span class="hljs-title function_">then</span>(<span class="hljs-function">()=&gt;</span>{<br>        <span class="hljs-comment">//2.åšåˆ é™¤ä¸šåŠ¡</span><br>        axios.<span class="hljs-title function_">delete</span>(<span class="hljs-string">"/books/"</span>+row.<span class="hljs-property">id</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>{<br>       <span class="hljs-keyword">if</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">flag</span>){<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">"åˆ é™¤æˆåŠŸ"</span>);<br>        }<span class="hljs-keyword">else</span>{<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"åˆ é™¤å¤±è´¥"</span>);<br>        }<br>        }).<span class="hljs-title function_">finally</span>(<span class="hljs-function">()=&gt;</span>{<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAll</span>();<br>        });<br>    }).<span class="hljs-title function_">catch</span>(<span class="hljs-function">()=&gt;</span>{<br>        <span class="hljs-comment">//3.å–æ¶ˆåˆ é™¤</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">"å–æ¶ˆåˆ é™¤æ“ä½œ"</span>);<br>    });<br>}ï¼Œ<br></code></pre></td></tr></tbody></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>è¯·æ±‚æ–¹å¼ä½¿ç”¨Deleteè°ƒç”¨åå°å¯¹åº”æ“ä½œ</li><li>åˆ é™¤æ“ä½œéœ€è¦ä¼ é€’å½“å‰è¡Œæ•°æ®å¯¹åº”çš„idå€¼åˆ°åå°</li><li>åˆ é™¤æ“ä½œç»“æŸååŠ¨æ€åˆ·æ–°é¡µé¢åŠ è½½æ•°æ®</li><li>æ ¹æ®æ“ä½œç»“æœä¸åŒï¼Œæ˜¾ç¤ºå¯¹åº”çš„æç¤ºä¿¡æ¯</li><li>åˆ é™¤æ“ä½œå‰å¼¹å‡ºæç¤ºæ¡†é¿å…è¯¯æ“ä½œ</li></ol><h5 id="F-4-ä¿®æ”¹åŠŸèƒ½"><a href="#F-4-ä¿®æ”¹åŠŸèƒ½" class="headerlink" title="F-4.ä¿®æ”¹åŠŸèƒ½"></a>F-4.ä¿®æ”¹åŠŸèƒ½</h5><p>â€‹        ä¿®æ”¹åŠŸèƒ½å¯ä»¥è¯´æ˜¯åˆ—è¡¨åŠŸèƒ½ã€åˆ é™¤åŠŸèƒ½ä¸æ·»åŠ åŠŸèƒ½çš„åˆä½“ã€‚å‡ ä¸ªç›¸ä¼¼ç‚¹å¦‚ä¸‹ï¼š</p><ol><li><p>é¡µé¢ä¹Ÿéœ€è¦æœ‰ä¸€ä¸ªå¼¹çª—ç”¨æ¥åŠ è½½ä¿®æ”¹çš„æ•°æ®ï¼Œè¿™ä¸€ç‚¹ä¸æ·»åŠ ç›¸åŒï¼Œéƒ½æ˜¯è¦å¼¹çª—</p></li><li><p>å¼¹å‡ºçª—å£ä¸­è¦åŠ è½½å¾…ä¿®æ”¹çš„æ•°æ®ï¼Œè€Œæ•°æ®éœ€è¦é€šè¿‡æŸ¥è¯¢å¾—åˆ°ï¼Œè¿™ä¸€ç‚¹ä¸æŸ¥è¯¢å…¨éƒ¨ç›¸åŒï¼Œéƒ½æ˜¯è¦æŸ¥æ•°æ®</p></li><li><p>æŸ¥è¯¢æ“ä½œéœ€è¦å°†è¦ä¿®æ”¹çš„æ•°æ®idå‘é€åˆ°åå°ï¼Œè¿™ä¸€ç‚¹ä¸åˆ é™¤ç›¸åŒï¼Œéƒ½æ˜¯ä¼ é€’idåˆ°åå°</p></li><li><p>æŸ¥è¯¢å¾—åˆ°æ•°æ®åéœ€è¦å±•ç¤ºåˆ°å¼¹çª—ä¸­ï¼Œè¿™ä¸€ç‚¹ä¸æŸ¥è¯¢å…¨éƒ¨ç›¸åŒï¼Œéƒ½æ˜¯è¦é€šè¿‡æ•°æ®æ¨¡å‹ç»‘å®šå±•ç¤ºæ•°æ®</p></li><li><p>ä¿®æ”¹æ•°æ®æ—¶éœ€è¦å°†è¢«ä¿®æ”¹çš„æ•°æ®ä¼ é€’åˆ°åå°ï¼Œè¿™ä¸€ç‚¹ä¸æ·»åŠ ç›¸åŒï¼Œéƒ½æ˜¯è¦ä¼ é€’æ•°æ®</p><p>æ‰€ä»¥æ•´ä½“ä¸Šæ¥çœ‹ï¼Œä¿®æ”¹åŠŸèƒ½å°±æ˜¯å‰é¢å‡ ä¸ªåŠŸèƒ½çš„å¤§åˆä½“</p><p><strong>æŸ¥è¯¢å¹¶å±•ç¤ºæ•°æ®</strong></p></li></ol><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//å¼¹å‡ºç¼–è¾‘çª—å£</span><br><span class="hljs-title function_">handleUpdate</span>(<span class="hljs-params">row</span>) {<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/books/"</span>+row.<span class="hljs-property">id</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>{<br>        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">flag</span>){<br>            <span class="hljs-comment">//å±•ç¤ºå¼¹å±‚ï¼ŒåŠ è½½æ•°æ®</span><br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible4Edit</span> = <span class="hljs-literal">true</span>;<br>        }<span class="hljs-keyword">else</span>{<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ•°æ®åŒæ­¥å¤±è´¥ï¼Œè‡ªåŠ¨åˆ·æ–°"</span>);<br>        }<br>    });<br>},<br></code></pre></td></tr></tbody></table></figure><p>â€‹        <strong>ä¿®æ”¹æ“ä½œ</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//ä¿®æ”¹</span><br><span class="hljs-title function_">handleEdit</span>(<span class="hljs-params"></span>) {<br>    axios.<span class="hljs-title function_">put</span>(<span class="hljs-string">"/books"</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>{<br>        <span class="hljs-comment">//å¦‚æœæ“ä½œæˆåŠŸï¼Œå…³é—­å¼¹å±‚å¹¶åˆ·æ–°é¡µé¢</span><br>        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">flag</span>){<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible4Edit</span> = <span class="hljs-literal">false</span>;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">"ä¿®æ”¹æˆåŠŸ"</span>);<br>        }<span class="hljs-keyword">else</span> {<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ä¿®æ”¹å¤±è´¥ï¼Œè¯·é‡è¯•"</span>);<br>        }<br>    }).<span class="hljs-title function_">finally</span>(<span class="hljs-function">()=&gt;</span>{<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAll</span>();<br>    });<br>},<br></code></pre></td></tr></tbody></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>åŠ è½½è¦ä¿®æ”¹æ•°æ®é€šè¿‡ä¼ é€’å½“å‰è¡Œæ•°æ®å¯¹åº”çš„idå€¼åˆ°åå°æŸ¥è¯¢æ•°æ®ï¼ˆåŒåˆ é™¤ä¸æŸ¥è¯¢å…¨éƒ¨ï¼‰</li><li>åˆ©ç”¨å‰ç«¯åŒå‘æ•°æ®ç»‘å®šå°†æŸ¥è¯¢åˆ°çš„æ•°æ®è¿›è¡Œå›æ˜¾ï¼ˆåŒæŸ¥è¯¢å…¨éƒ¨ï¼‰</li><li>è¯·æ±‚æ–¹å¼ä½¿ç”¨PUTè°ƒç”¨åå°å¯¹åº”æ“ä½œï¼ˆåŒæ–°å¢ä¼ é€’æ•°æ®ï¼‰</li><li>ä¿®æ”¹æ“ä½œç»“æŸååŠ¨æ€åˆ·æ–°é¡µé¢åŠ è½½æ•°æ®ï¼ˆåŒæ–°å¢ï¼‰</li><li>æ ¹æ®æ“ä½œç»“æœä¸åŒï¼Œæ˜¾ç¤ºå¯¹åº”çš„æç¤ºä¿¡æ¯ï¼ˆåŒæ–°å¢ï¼‰</li></ol><p>â€‹    </p><h4 id="10-ä¸šåŠ¡æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†"><a href="#10-ä¸šåŠ¡æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†" class="headerlink" title="10.ä¸šåŠ¡æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†"></a>10.ä¸šåŠ¡æ¶ˆæ¯ä¸€è‡´æ€§å¤„ç†</h4><p>â€‹    ç›®å‰çš„åŠŸèƒ½åˆ¶ä½œåŸºæœ¬ä¸Šè¾¾æˆäº†æ­£å¸¸ä½¿ç”¨çš„æƒ…å†µï¼Œä»€ä¹ˆå«æ­£å¸¸ä½¿ç”¨å‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¿™ä¸ªç¨‹åºä¸å‡ºBUGï¼Œå¦‚æœæˆ‘ä»¬æä¸€ä¸ªBUGå‡ºæ¥ï¼Œä½ ä¼šå‘ç°ç¨‹åºé©¬ä¸Šå´©æºƒæ‰ã€‚æ¯”å¦‚åå°æ‰‹å·¥æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œçœ‹çœ‹å‰ç«¯æ¥æ”¶åˆ°çš„æ•°æ®ä»€ä¹ˆæ ·å­</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">{</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"2021-09-15T03:27:31.038+00:00"</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"status"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-number">500</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"error"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"Internal&nbsp;Server&nbsp;Error"</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"/books"</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹    é¢å¯¹è¿™ç§æƒ…å†µï¼Œå‰ç«¯çš„åŒå­¦åˆä¸ä¼šäº†ï¼Œè¿™åˆæ˜¯ä»€ä¹ˆæ ¼å¼ï¼Ÿæ€ä¹ˆå’Œä¹‹å‰çš„æ ¼å¼ä¸ä¸€æ ·ï¼Ÿ</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">{</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"flag"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"è®¡ç®—æœºç†è®º"</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"Springå®æˆ˜&nbsp;ç¬¬5ç‰ˆ"</span><span class="hljs-punctuation">,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span>&nbsp;<span class="hljs-string">"Springå…¥é—¨ç»å…¸æ•™ç¨‹"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-punctuation">}</span><br><span class="hljs-punctuation">}</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹    çœ‹æ¥ä¸ä»…è¦å¯¹æ­£ç¡®çš„æ“ä½œæ•°æ®æ ¼å¼åšå¤„ç†ï¼Œè¿˜è¦å¯¹é”™è¯¯çš„æ“ä½œæ•°æ®æ ¼å¼åšåŒæ ·çš„æ ¼å¼å¤„ç†</p><p>â€‹    é¦–å…ˆåœ¨å½“å‰çš„æ•°æ®ç»“æœä¸­æ·»åŠ æ¶ˆæ¯å­—æ®µï¼Œç”¨æ¥å…¼å®¹åå°å‡ºç°çš„æ“ä½œæ¶ˆæ¯</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">R</span>{<br>    <span class="hljs-keyword">private</span> Boolean flag;<br>    <span class="hljs-keyword">private</span> Object data;<br>    <span class="hljs-keyword">private</span> String msg;<span class="hljs-comment">//ç”¨äºå°è£…æ¶ˆæ¯</span><br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    åå°ä»£ç ä¹Ÿè¦æ ¹æ®æƒ…å†µåšå¤„ç†ï¼Œå½“å‰æ˜¯æ¨¡æ‹Ÿçš„é”™è¯¯</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@PostMapping</span><br><span class="hljs-keyword">public</span> R <span class="hljs-title function_">save</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Book book)</span> <span class="hljs-keyword">throws</span> IOException {<br>    <span class="hljs-type">Boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> bookService.insert(book);<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">R</span>(flag , flag ? <span class="hljs-string">"æ·»åŠ æˆåŠŸ^_^"</span> : <span class="hljs-string">"æ·»åŠ å¤±è´¥-_-!"</span>);<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    ç„¶ååœ¨è¡¨ç°å±‚åšç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†ï¼Œä½¿ç”¨SpringMVCæä¾›çš„å¼‚å¸¸å¤„ç†å™¨åšç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@RestControllerAdvice</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProjectExceptionAdvice</span> {<br>    <span class="hljs-meta">@ExceptionHandler(Exception.class)</span><br>    <span class="hljs-keyword">public</span> R <span class="hljs-title function_">doOtherException</span><span class="hljs-params">(Exception ex)</span>{<br>        <span class="hljs-comment">//è®°å½•æ—¥å¿—</span><br>        <span class="hljs-comment">//å‘é€æ¶ˆæ¯ç»™è¿ç»´</span><br>        <span class="hljs-comment">//å‘é€é‚®ä»¶ç»™å¼€å‘äººå‘˜,exå¯¹è±¡å‘é€ç»™å¼€å‘äººå‘˜</span><br>        ex.printStackTrace();<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">R</span>(<span class="hljs-literal">false</span>,<span class="hljs-literal">null</span>,<span class="hljs-string">"ç³»ç»Ÿé”™è¯¯ï¼Œè¯·ç¨åå†è¯•ï¼"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹    é¡µé¢ä¸Šå¾—åˆ°æ•°æ®åï¼Œå…ˆåˆ¤å®šæ˜¯å¦æœ‰åå°ä¼ é€’è¿‡æ¥çš„æ¶ˆæ¯ï¼Œæ ‡å¿—å°±æ˜¯å½“å‰æ“ä½œæ˜¯å¦æˆåŠŸï¼Œå¦‚æœè¿”å›æ“ä½œç»“æœfalseï¼Œå°±è¯»å–åå°ä¼ é€’çš„æ¶ˆæ¯</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//æ·»åŠ </span><br>handleAdd () {<br><span class="hljs-comment">//å‘é€ajaxè¯·æ±‚</span><br>    axios.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/books"</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>)=&gt;</span>{<br>        <span class="hljs-comment">//å¦‚æœæ“ä½œæˆåŠŸï¼Œå…³é—­å¼¹å±‚ï¼Œæ˜¾ç¤ºæ•°æ®</span><br>        <span class="hljs-keyword">if</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">flag</span>){<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dialogFormVisible</span> = <span class="hljs-literal">false</span>;<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">"æ·»åŠ æˆåŠŸ"</span>);<br>        }<span class="hljs-keyword">else</span> {<br>            <span class="hljs-variable language_">this</span>.<span class="hljs-property">$message</span>.<span class="hljs-title function_">error</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">msg</span>);<span class="hljs-comment">//æ¶ˆæ¯æ¥è‡ªäºåå°ä¼ é€’è¿‡æ¥ï¼Œè€Œéå›ºå®šå†…å®¹</span><br>        }<br>    }).<span class="hljs-title function_">finally</span>(<span class="hljs-function">()=&gt;</span>{<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAll</span>();<br>    });<br>},<br></code></pre></td></tr></tbody></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨æ³¨è§£@RestControllerAdviceå®šä¹‰SpringMVCå¼‚å¸¸å¤„ç†å™¨ç”¨æ¥å¤„ç†å¼‚å¸¸çš„</li><li>å¼‚å¸¸å¤„ç†å™¨å¿…é¡»è¢«æ‰«æåŠ è½½ï¼Œå¦åˆ™æ— æ³•ç”Ÿæ•ˆ</li><li>è¡¨ç°å±‚è¿”å›ç»“æœçš„æ¨¡å‹ç±»ä¸­æ·»åŠ æ¶ˆæ¯å±æ€§ç”¨æ¥ä¼ é€’æ¶ˆæ¯åˆ°é¡µé¢</li></ol><p>â€‹    </p><h4 id="11-é¡µé¢åŠŸèƒ½å¼€å‘"><a href="#11-é¡µé¢åŠŸèƒ½å¼€å‘" class="headerlink" title="11.é¡µé¢åŠŸèƒ½å¼€å‘"></a>11.é¡µé¢åŠŸèƒ½å¼€å‘</h4><h5 id="F-5-åˆ†é¡µåŠŸèƒ½"><a href="#F-5-åˆ†é¡µåŠŸèƒ½" class="headerlink" title="F-5.åˆ†é¡µåŠŸèƒ½"></a>F-5.åˆ†é¡µåŠŸèƒ½</h5><p>â€‹        åˆ†é¡µåŠŸèƒ½çš„åˆ¶ä½œç”¨äºæ›¿æ¢å‰é¢çš„æŸ¥è¯¢å…¨éƒ¨ï¼Œå…¶ä¸­è¦ä½¿ç”¨åˆ°elementUIæä¾›çš„åˆ†é¡µç»„ä»¶</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;!--åˆ†é¡µç»„ä»¶--&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pagination-container"</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">el-pagination</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">class</span>=<span class="hljs-string">"pagiantion"</span></span></span><br><span class="hljs-tag"><span class="language-xml">@<span class="hljs-attr">current-change</span>=<span class="hljs-string">"handleCurrentChange"</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">:current-page</span>=<span class="hljs-string">"pagination.currentPage"</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">:page-size</span>=<span class="hljs-string">"pagination.pageSize"</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">layout</span>=<span class="hljs-string">"total, prev, pager, next, jumper"</span></span></span><br><span class="hljs-tag"><span class="language-xml"><span class="hljs-attr">:total</span>=<span class="hljs-string">"pagination.total"</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">el-pagination</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre></td></tr></tbody></table></figure><p>â€‹        ä¸ºäº†é…åˆåˆ†é¡µç»„ä»¶ï¼Œå°è£…åˆ†é¡µå¯¹åº”çš„æ•°æ®æ¨¡å‹</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">data:{<br>pagination: {<br>//åˆ†é¡µç›¸å…³æ¨¡å‹æ•°æ®<br>currentPage: 1,//å½“å‰é¡µç <br>pageSize:10,//æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°<br>total:0,//æ€»è®°å½•æ•°<br>}<br>},<br></code></pre></td></tr></tbody></table></figure><p>â€‹        ä¿®æ”¹æŸ¥è¯¢å…¨éƒ¨åŠŸèƒ½ä¸ºåˆ†é¡µæŸ¥è¯¢ï¼Œé€šè¿‡è·¯å¾„å˜é‡ä¼ é€’é¡µç ä¿¡æ¯å‚æ•°</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) {<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/books/"</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span>+<span class="hljs-string">"/"</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pageSize</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {<br>    });<br>},<br></code></pre></td></tr></tbody></table></figure><p>â€‹        åå°æä¾›å¯¹åº”çš„åˆ†é¡µåŠŸèƒ½</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@GetMapping("/{currentPage}/{pageSize}")</span><br><span class="hljs-keyword">public</span> R <span class="hljs-title function_">getAll</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Integer currentPage,<span class="hljs-meta">@PathVariable</span> Integer pageSize)</span>{<br>    IPage&lt;Book&gt; pageBook = bookService.getPage(currentPage, pageSize);<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">R</span>(<span class="hljs-literal">null</span> != pageBook ,pageBook);<br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹        é¡µé¢æ ¹æ®åˆ†é¡µæ“ä½œç»“æœè¯»å–å¯¹åº”æ•°æ®ï¼Œå¹¶è¿›è¡Œæ•°æ®æ¨¡å‹ç»‘å®š</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) {<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/books/"</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span>+<span class="hljs-string">"/"</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pageSize</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">total</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">total</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">current</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pagesize</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">size</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataList</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">records</span>;<br>    });<br>},<br></code></pre></td></tr></tbody></table></figure><p>â€‹        å¯¹åˆ‡æ¢é¡µç æ“ä½œè®¾ç½®è°ƒç”¨å½“å‰åˆ†é¡µæ“ä½œ</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-comment">//åˆ‡æ¢é¡µç </span><br><span class="hljs-title function_">handleCurrentChange</span>(<span class="hljs-params">currentPage</span>) {<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span> = currentPage;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAll</span>();<br>},<br></code></pre></td></tr></tbody></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>ä½¿ç”¨elåˆ†é¡µç»„ä»¶</li><li>å®šä¹‰åˆ†é¡µç»„ä»¶ç»‘å®šçš„æ•°æ®æ¨¡å‹</li><li>å¼‚æ­¥è°ƒç”¨è·å–åˆ†é¡µæ•°æ®</li><li>åˆ†é¡µæ•°æ®é¡µé¢å›æ˜¾</li></ol><h5 id="F-6-åˆ é™¤åŠŸèƒ½ç»´æŠ¤"><a href="#F-6-åˆ é™¤åŠŸèƒ½ç»´æŠ¤" class="headerlink" title="F-6.åˆ é™¤åŠŸèƒ½ç»´æŠ¤"></a>F-6.åˆ é™¤åŠŸèƒ½ç»´æŠ¤</h5><p>â€‹        ç”±äºä½¿ç”¨äº†åˆ†é¡µåŠŸèƒ½ï¼Œå½“æœ€åä¸€é¡µåªæœ‰ä¸€æ¡æ•°æ®æ—¶ï¼Œåˆ é™¤æ“ä½œå°±ä¼šå‡ºç°BUGï¼Œæœ€åä¸€é¡µæ— æ•°æ®ä½†æ˜¯ç‹¬ç«‹å±•ç¤ºï¼Œå¯¹åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½è¿›è¡Œåå°åŠŸèƒ½ç»´æŠ¤ï¼Œå¦‚æœå½“å‰é¡µç å€¼å¤§äºæœ€å¤§é¡µç å€¼ï¼Œé‡æ–°æ‰§è¡ŒæŸ¥è¯¢ã€‚å…¶å®è¿™ä¸ªé—®é¢˜è§£å†³æ–¹æ¡ˆå¾ˆå¤šï¼Œè¿™é‡Œç»™å‡ºæ¯”è¾ƒç®€å•çš„ä¸€ç§å¤„ç†æ–¹æ¡ˆ</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@GetMapping("{currentPage}/{pageSize}")</span><br><span class="hljs-keyword">public</span> R <span class="hljs-title function_">getPage</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> currentPage,<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> pageSize)</span>{<br>    IPage&lt;Book&gt; page = bookService.getPage(currentPage, pageSize);<br>    <span class="hljs-comment">//å¦‚æœå½“å‰é¡µç å€¼å¤§äºäº†æ€»é¡µç å€¼ï¼Œé‚£ä¹ˆé‡æ–°æ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œä½¿ç”¨æœ€å¤§é¡µç å€¼ä½œä¸ºå½“å‰é¡µç å€¼</span><br>    <span class="hljs-keyword">if</span>( currentPage &gt; page.getPages()){<br>        page = bookService.getPage((<span class="hljs-type">int</span>)page.getPages(), pageSize);<br>    }<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">R</span>(<span class="hljs-literal">true</span>, page);<br>}<br></code></pre></td></tr></tbody></table></figure><h5 id="F-7-æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½"><a href="#F-7-æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½" class="headerlink" title="F-7.æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½"></a>F-7.æ¡ä»¶æŸ¥è¯¢åŠŸèƒ½</h5><p>â€‹        æœ€åä¸€ä¸ªåŠŸèƒ½æ¥åšæ¡ä»¶æŸ¥è¯¢ï¼Œå…¶å®æ¡ä»¶æŸ¥è¯¢å¯ä»¥ç†è§£ä¸ºåˆ†é¡µæŸ¥è¯¢çš„æ—¶å€™é™¤äº†æºå¸¦åˆ†é¡µæ•°æ®å†å¤šå¸¦å‡ ä¸ªæ•°æ®çš„æŸ¥è¯¢ã€‚è¿™äº›å¤šå¸¦çš„æ•°æ®å°±æ˜¯æŸ¥è¯¢æ¡ä»¶ã€‚æ¯”è¾ƒä¸€ä¸‹ä¸å¸¦æ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢ä¸å¸¦æ¡ä»¶çš„åˆ†é¡µæŸ¥è¯¢å·®åˆ«ä¹‹å¤„ï¼Œè¿™ä¸ªåŠŸèƒ½å°±å¥½åšäº†</p><ul><li><p>é¡µé¢å°è£…çš„æ•°æ®ï¼šå¸¦ä¸å¸¦æ¡ä»¶å½±å“çš„ä»…ä»…æ˜¯ä¸€æ¬¡æ€§ä¼ é€’åˆ°åå°çš„æ•°æ®æ€»é‡ï¼Œç”±ä¼ é€’2ä¸ªåˆ†é¡µç›¸å…³çš„æ•°æ®è½¬æ¢æˆ2ä¸ªåˆ†é¡µæ•°æ®åŠ è‹¥å¹²ä¸ªæ¡ä»¶</p></li><li><p>åå°æŸ¥è¯¢åŠŸèƒ½ï¼šæŸ¥è¯¢æ—¶ç”±ä¸å¸¦æ¡ä»¶ï¼Œè½¬æ¢æˆå¸¦æ¡ä»¶ï¼Œåæ­£ä¸å¸¦æ¡ä»¶çš„æ—¶å€™æŸ¥è¯¢æ¡ä»¶å¯¹è±¡ä½¿ç”¨çš„æ˜¯nullï¼Œç°åœ¨æ¢æˆå…·ä½“æ¡ä»¶ï¼Œå·®åˆ«ä¸å¤§</p></li><li><p>æŸ¥è¯¢ç»“æœï¼šä¸ç®¡å¸¦ä¸å¸¦æ¡ä»¶ï¼Œå‡ºæ¥çš„æ•°æ®åªæ˜¯æœ‰æ•°é‡ä¸Šçš„å·®åˆ«ï¼Œå…¶ä»–éƒ½å·®åˆ«ï¼Œè¿™ä¸ªå¯ä»¥å¿½ç•¥</p><p>ç»è¿‡ä¸Šè¿°åˆ†æï¼Œçœ‹æ¥éœ€è¦åœ¨é¡µé¢å‘é€è¯·æ±‚çš„æ ¼å¼æ–¹é¢åšä¸€å®šçš„ä¿®æ”¹ï¼Œåå°çš„è°ƒç”¨æ•°æ®å±‚æ“ä½œæ—¶å‘é€ä¿®æ”¹ï¼Œå…¶ä»–æ²¡æœ‰åŒºåˆ«</p><p>é¡µé¢å‘é€è¯·æ±‚æ—¶ï¼Œä¸¤ä¸ªåˆ†é¡µæ•°æ®ä»ç„¶ä½¿ç”¨è·¯å¾„å˜é‡ï¼Œå…¶ä»–æ¡ä»¶é‡‡ç”¨åŠ¨æ€æ‹¼è£…urlå‚æ•°çš„å½¢å¼ä¼ é€’</p><p><strong>é¡µé¢å°è£…æŸ¥è¯¢æ¡ä»¶å­—æ®µ</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">pagination: {<br>//åˆ†é¡µç›¸å…³æ¨¡å‹æ•°æ®<br>currentPage: 1,//å½“å‰é¡µç <br>pageSize:10,//æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°<br>total:0,//æ€»è®°å½•æ•°<br>name: "",<br>type: "",<br>description: ""<br>},<br></code></pre></td></tr></tbody></table></figure><p>é¡µé¢æ·»åŠ æŸ¥è¯¢æ¡ä»¶å­—æ®µå¯¹åº”çš„æ•°æ®æ¨¡å‹ç»‘å®šåç§°</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs HTML"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-container"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å›¾ä¹¦ç±»åˆ«"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"pagination.type"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-item"</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å›¾ä¹¦åç§°"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"pagination.name"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-item"</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å›¾ä¹¦æè¿°"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"pagination.description"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"filter-item"</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"getAll()"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dalfBut"</span>&gt;</span>æŸ¥è¯¢<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"butT"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleCreate()"</span>&gt;</span>æ–°å»º<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>å°†æŸ¥è¯¢æ¡ä»¶ç»„ç»‡æˆurlå‚æ•°ï¼Œæ·»åŠ åˆ°è¯·æ±‚urlåœ°å€ä¸­ï¼Œè¿™é‡Œå¯ä»¥å€ŸåŠ©å…¶ä»–ç±»åº“å¿«é€Ÿå¼€å‘ï¼Œå½“å‰ä½¿ç”¨æ‰‹å·¥å½¢å¼æ‹¼æ¥ï¼Œé™ä½å­¦ä¹ è¦æ±‚</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) {<br>    <span class="hljs-comment">//1.è·å–æŸ¥è¯¢æ¡ä»¶,æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶</span><br>    param = <span class="hljs-string">"?name="</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">name</span>;<br>    param += <span class="hljs-string">"&amp;type="</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">type</span>;<br>    param += <span class="hljs-string">"&amp;description="</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">description</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"-----------------"</span>+ param);<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/books/"</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span>+<span class="hljs-string">"/"</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pageSize</span>+param).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataList</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">records</span>;<br>    });<br>},<br></code></pre></td></tr></tbody></table></figure><p>åå°ä»£ç ä¸­å®šä¹‰å®ä½“ç±»å°æŸ¥è¯¢æ¡ä»¶</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@GetMapping("{currentPage}/{pageSize}")</span><br><span class="hljs-keyword">public</span> R <span class="hljs-title function_">getAll</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> currentPage,<span class="hljs-meta">@PathVariable</span> <span class="hljs-type">int</span> pageSize,Book book)</span> {<br>    System.out.println(<span class="hljs-string">"å‚æ•°=====&gt;"</span>+book);<br>    IPage&lt;Book&gt; pageBook = bookService.getPage(currentPage,pageSize);<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">R</span>(<span class="hljs-literal">null</span> != pageBook ,pageBook);<br>}<br></code></pre></td></tr></tbody></table></figure><p>å¯¹åº”ä¸šåŠ¡å±‚æ¥å£ä¸å®ç°ç±»è¿›è¡Œä¿®æ­£</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IBookService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IService</span>&lt;Book&gt; {<br>    IPage&lt;Book&gt; <span class="hljs-title function_">getPage</span><span class="hljs-params">(Integer currentPage,Integer pageSize,Book queryBook)</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookServiceImpl2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;BookDao,Book&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IBookService</span> {<br>    <span class="hljs-keyword">public</span> IPage&lt;Book&gt; <span class="hljs-title function_">getPage</span><span class="hljs-params">(Integer currentPage,Integer pageSize,Book queryBook)</span>{<br>        <span class="hljs-type">IPage</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(currentPage,pageSize);<br>        LambdaQueryWrapper&lt;Book&gt; lqw = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;Book&gt;();<br>        lqw.like(Strings.isNotEmpty(queryBook.getName()),Book::getName,queryBook.getName());<br>        lqw.like(Strings.isNotEmpty(queryBook.getType()),Book::getType,queryBook.getType());<br>        lqw.like(Strings.isNotEmpty(queryBook.getDescription()),Book::getDescription,queryBook.getDescription());<br>        <span class="hljs-keyword">return</span> bookDao.selectPage(page,lqw);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>é¡µé¢å›æ˜¾æ•°æ®</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">getAll</span>(<span class="hljs-params"></span>) {<br>    <span class="hljs-comment">//1.è·å–æŸ¥è¯¢æ¡ä»¶,æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶</span><br>    param = <span class="hljs-string">"?name="</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">name</span>;<br>    param += <span class="hljs-string">"&amp;type="</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">type</span>;<br>    param += <span class="hljs-string">"&amp;description="</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">description</span>;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"-----------------"</span>+ param);<br>    axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/books/"</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span>+<span class="hljs-string">"/"</span>+<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pageSize</span>+param).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">total</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">total</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">currentPage</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">current</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">pagesize</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">size</span>;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataList</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>.<span class="hljs-property">records</span>;<br>    });<br>},<br></code></pre></td></tr></tbody></table></figure></li></ul><p><strong>æ€»ç»“</strong></p><ol><li>å®šä¹‰æŸ¥è¯¢æ¡ä»¶æ•°æ®æ¨¡å‹ï¼ˆå½“å‰å°è£…åˆ°åˆ†é¡µæ•°æ®æ¨¡å‹ä¸­ï¼‰</li><li>å¼‚æ­¥è°ƒç”¨åˆ†é¡µåŠŸèƒ½å¹¶é€šè¿‡è¯·æ±‚å‚æ•°ä¼ é€’æ•°æ®åˆ°åå°</li></ol><h2 id="åŸºç¡€ç¯‡å®Œç»“"><a href="#åŸºç¡€ç¯‡å®Œç»“" class="headerlink" title="åŸºç¡€ç¯‡å®Œç»“"></a>åŸºç¡€ç¯‡å®Œç»“</h2><p>â€‹    åŸºç¡€ç¯‡åˆ°è¿™é‡Œå°±å…¨éƒ¨ç»“æŸäº†ï¼Œåœ¨åŸºç¡€ç¯‡ä¸­å¸¦ç€å¤§å®¶å­¦ä¹ äº†å¦‚æœåˆ›å»ºä¸€ä¸ªSpringBootå·¥ç¨‹ï¼Œç„¶åå­¦ä¹ äº†SpringBootçš„åŸºç¡€é…ç½®è¯­æ³•æ ¼å¼ï¼Œæ¥ä¸‹æ¥å¯¹å¸¸è§çš„å¸‚é¢ä¸Šçš„å®ç”¨æŠ€æœ¯åšäº†æ•´åˆï¼Œæœ€åé€šè¿‡ä¸€ä¸ªå°çš„æ¡ˆä¾‹å¯¹å‰é¢å­¦ä¹ çš„å†…å®¹åšäº†ä¸€ä¸ªç»¼åˆåº”ç”¨ã€‚æ•´ä½“æ¥è¯´å°±æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„å…¥é—¨ï¼Œå…³äºSpringBootçš„å®é™…å¼€å‘å…¶å®æ¥è§¦çš„è¿˜æ˜¯å¾ˆå°‘çš„ï¼Œæˆ‘ä»¬åˆ°å®ç”¨ç¯‡å’ŒåŸç†ç¯‡ä¸­ç»§ç»­å§ï¼Œå„ä½å°ä¼™ä¼´ï¼ŒåŠ æ²¹å­¦ä¹ ï¼Œå†è§ã€‚</p><p>äºŒã€SpringBootè¿ç»´å®ç”¨ç¯‡</p><h2 id="1-æ‰“åŒ…ç¨‹åº"><a href="#1-æ‰“åŒ…ç¨‹åº" class="headerlink" title="1.æ‰“åŒ…ç¨‹åº"></a>1.æ‰“åŒ…ç¨‹åº</h2><ul><li>æ‰“åŒ…ä¸è¿è¡Œ</li><li>é…ç½®é«˜çº§</li><li>å¤šç¯å¢ƒå¼€å‘</li><li>æ—¥å¿—</li></ul><p>â€‹    æˆ‘ä»¬çš„æ‰“åŒ…å’Œè¿è¡Œè¿‡ç¨‹ã€‚æ‰€è°“æ‰“åŒ…æŒ‡å°†ç¨‹åºè½¬æ¢æˆä¸€ä¸ªå¯æ‰§è¡Œçš„æ–‡ä»¶ï¼Œæ‰€è°“è¿è¡ŒæŒ‡ä¸ä¾èµ–å¼€å‘ç¯å¢ƒæ‰§è¡Œæ‰“åŒ…äº§ç”Ÿçš„æ–‡ä»¶ã€‚ä¸Šè¿°ä¸¤ä¸ªæ“ä½œéƒ½æœ‰å¯¹åº”çš„å‘½ä»¤å¯ä»¥å¿«é€Ÿæ‰§è¡Œã€‚</p><p>â‘ ï¼šå¯¹SpringBooté¡¹ç›®æ‰“åŒ…ï¼ˆæ‰§è¡ŒMavenæ„å»ºæŒ‡ä»¤packageï¼‰<code>mvn package</code></p><p>â‘¡ï¼šè¿è¡Œé¡¹ç›®ï¼ˆæ‰§è¡Œå¯åŠ¨æŒ‡ä»¤ï¼‰<code>java â€“jar springboot.jar</code></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025092530206.png" alt=""></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025092722627.png" alt=""></p><p>jaræ”¯æŒå‘½ä»¤è¡Œå¯åŠ¨éœ€è¦ä¾èµ–mavenæ’ä»¶æ”¯æŒï¼Œè¯·ç¡®è®¤æ‰“åŒ…æ—¶æ˜¯å¦å…·æœ‰SpringBootå¯¹åº”çš„mavenæ’ä»¶</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h2 id="2ã€SpringBootç¨‹åºæ‰“åŒ…å¤±è´¥å¤„ç†"><a href="#2ã€SpringBootç¨‹åºæ‰“åŒ…å¤±è´¥å¤„ç†" class="headerlink" title="2ã€SpringBootç¨‹åºæ‰“åŒ…å¤±è´¥å¤„ç†"></a>2ã€SpringBootç¨‹åºæ‰“åŒ…å¤±è´¥å¤„ç†</h2><p>åœ¨SpringBootå·¥ç¨‹çš„pom.xmlä¸­æœ‰ä¸‹é¢è¿™ç»„é…ç½®ï¼Œè¿™ç»„é…ç½®å†³å®šäº†æ‰“åŒ…å‡ºæ¥çš„ç¨‹åºåŒ…æ˜¯å¦å¯ä»¥æ‰§è¡Œã€‚</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>å¦‚æœæ³¨é”€è¿™æ®µä»£ç æˆ‘ä»¬å¯ä»¥å‘ç°æœ‰ä»¥ä¸‹æ˜æ˜¾çš„ç‰¹å¾ï¼š</p><ul><li>æ‰“åŒ…åæ–‡ä»¶çš„å¤§å°ä¸åŒ</li><li>æ‰“åŒ…åæ‰€åŒ…å«çš„å†…å®¹ä¸åŒ</li><li>æ‰“åŒ…ç¨‹åºä¸­ä¸ªåˆ«æ–‡ä»¶å†…å®¹ä¸åŒ</li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025100316846.png" alt="image-20221025100316846"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹çœ‹å…¶ä¸­çš„å·®åˆ«ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211201100929151.png" alt="image-20211201100929151"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211201100951653.png" alt="image-20211201100951653"></p><p> å¯ä»¥å‘ç°å†…å®¹ä¹Ÿå®Œå…¨ä¸ä¸€æ ·ï¼Œä»…æœ‰ä¸€ä¸ªç›®å½•æ˜¯ä¸€æ ·çš„ï¼Œå«åšMETA-INFã€‚æ‰“å¼€å®¹é‡å¤§çš„ç¨‹åºåŒ…ä¸­çš„BOOT-INFç›®å½•ä¸‹çš„classesç›®å½•ï¼Œæˆ‘ä»¬å‘ç°å…¶ä¸­çš„å†…å®¹å±…ç„¶å’Œå®¹é‡å°çš„ç¨‹åºåŒ…ä¸­çš„å†…å®¹å®Œå…¨ä¸€æ ·ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211201101805569.png" alt=""></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211201101652868.png" alt="image-20211201101652868"></p><p>  å¤§çš„ç¨‹åºåŒ…ä¸­é™¤äº†åŒ…å«å°çš„ç¨‹åºåŒ…ä¸­çš„å†…å®¹ï¼Œè¿˜æœ‰ï¼šå›åˆ°BOOT-INFç›®å½•ä¸‹ï¼Œæ‰“å¼€libç›®å½•ï¼Œé‡Œé¢æ˜¾ç¤ºäº†å¾ˆå¤šä¸ªjaræ–‡ä»¶ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211201102025791.png" alt="image-20211201102025791"></p><p>è¿™äº›jaræ–‡ä»¶éƒ½æ˜¯æˆ‘ä»¬åˆ¶ä½œè¿™ä¸ªå·¥ç¨‹æ—¶å¯¼å…¥çš„åæ ‡å¯¹åº”çš„æ–‡ä»¶ï¼ŒSpringBootç¨‹åºä¸ºäº†è®©è‡ªå·±æ‰“åŒ…ç”Ÿæˆçš„ç¨‹åºå¯ä»¥ç‹¬ç«‹è¿è¡Œï¼Œä¸ä»…å°†é¡¹ç›®ä¸­è‡ªå·±å¼€å‘çš„å†…å®¹è¿›è¡Œäº†æ‰“åŒ…ï¼Œè¿˜æŠŠå½“å‰å·¥ç¨‹è¿è¡Œéœ€è¦ä½¿ç”¨çš„jaråŒ…å…¨éƒ¨æ‰“åŒ…è¿›æ¥äº†ã€‚æ˜¯ä¸ºäº†å¯ä»¥ç‹¬ç«‹è¿è¡Œã€‚ä¸ä¾èµ–ç¨‹åºåŒ…å¤–éƒ¨çš„ä»»ä½•èµ„æºå¯ä»¥ç‹¬ç«‹è¿è¡Œå½“å‰ç¨‹åºã€‚</p><p>å¤§ç¨‹åºåŒ…æœ€å¤–å±‚ç›®å½•åŒ…å«ä¸€ä¸ªorgç›®å½•ï¼Œè¿›å…¥æ­¤ç›®å½•ï¼Œç›®å½•åæ˜¯org\springframework\boot\loaderï¼Œåœ¨é‡Œé¢å¯ä»¥æ‰¾åˆ°ä¸€ä¸ª<font color="#ff0000"><b>JarLauncher.class</b></font>çš„æ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ªSpringçš„ç›®å½•åã€‚</p><p>å›åˆ°ä¸¤ä¸ªç¨‹åºåŒ…çš„æœ€å¤–å±‚ç›®å½•ï¼ŒæŸ¥çœ‹åç§°ç›¸åŒçš„æ–‡ä»¶å¤¹META-INFä¸‹éƒ½æœ‰ä¸€ä¸ªå«åšMANIFEST.MFçš„æ–‡ä»¶ä¸¤è€…çš„åŒºåˆ«ï¼š</p><ul><li>å°å®¹é‡æ–‡ä»¶çš„MANIFEST.MF</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">Manifest-Version: <span class="hljs-number">1.0</span><br>Implementation-Title: springboot_08_ssmp<br>Implementation-Version: <span class="hljs-number">0.0</span><span class="hljs-number">.1</span>-SNAPSHOT<br>Build-Jdk-Spec: <span class="hljs-number">1.8</span><br>Created-By: Maven Jar Plugin <span class="hljs-number">3.2</span><span class="hljs-number">.0</span><br></code></pre></td></tr></tbody></table></figure><ul><li><p>å¤§å®¹é‡æ–‡ä»¶çš„MANIFEST.MF</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs JAVA">Manifest-Version: <span class="hljs-number">1.0</span><br>Spring-Boot-Classpath-Index: BOOT-INF/classpath.idx<br>Implementation-Title: springboot_08_ssmp<br>Implementation-Version: <span class="hljs-number">0.0</span><span class="hljs-number">.1</span>-SNAPSHOT<br>Spring-Boot-Layers-Index: BOOT-INF/layers.idx<br>Start-Class: com.itheima.SSMPApplication<br>Spring-Boot-Classes: BOOT-INF/classes/<br>Spring-Boot-Lib: BOOT-INF/lib/<br>Build-Jdk-Spec: <span class="hljs-number">1.8</span><br>Spring-Boot-Version: <span class="hljs-number">2.5</span><span class="hljs-number">.4</span><br>Created-By: Maven Jar Plugin <span class="hljs-number">3.2</span><span class="hljs-number">.0</span><br>Main-Class: org.springframework.boot.loader.JarLauncher<br></code></pre></td></tr></tbody></table></figure></li></ul><p>â€‹        å¤§æ–‡ä»¶ä¸­æ˜æ˜¾æ¯”å°æ–‡ä»¶ä¸­å¤šäº†å‡ è¡Œä¿¡æ¯ï¼Œå…¶ä¸­æœ€åä¸€è¡Œä¿¡æ¯æ˜¯Main-Class: </p><p>org.springframework.boot.loader.<font color="#ff0000"><b>JarLauncher</b></font>:è¦æŸ¥æ‰¾Start-Classå±æ€§ä¸­é…ç½®çš„ç±»ï¼Œå¹¶æ‰§è¡Œå¯¹åº”çš„ç±»ã€‚è¿™ä¸ªå±æ€§åœ¨å½“å‰é…ç½®ä¸­ä¹Ÿå­˜åœ¨ï¼Œå¯¹åº”çš„å°±æ˜¯æˆ‘ä»¬çš„å¼•å¯¼ç±»ç±»åã€‚ä¹Ÿå°±æ˜¯æŸ¥æ‰¾åˆ°Main-Classå¹¶ä¸”æ‰§è¡Œå®ƒã€‚æ‰€ä»¥æ€»çš„æ‰§è¡Œæµç¨‹ä¸ºï¼š</p><ol><li>SpringBootç¨‹åºæ·»åŠ é…ç½®åä¼šæ‰“å‡ºä¸€ä¸ªç‰¹æ®Šçš„åŒ…ï¼ŒåŒ…å«Springæ¡†æ¶éƒ¨åˆ†åŠŸèƒ½ï¼ŒåŸå§‹å·¥ç¨‹å†…å®¹ï¼ŒåŸå§‹å·¥ç¨‹ä¾èµ–çš„jaråŒ…</li><li>é¦–å…ˆè¯»å–MANIFEST.MFæ–‡ä»¶ä¸­çš„Main-Classå±æ€§ï¼Œç”¨æ¥æ ‡è®°æ‰§è¡Œjava -jarå‘½ä»¤åè¿è¡Œçš„ç±»</li><li>JarLauncherç±»æ‰§è¡Œæ—¶ä¼šæ‰¾åˆ°Start-Classå±æ€§ï¼Œä¹Ÿå°±æ˜¯å¯åŠ¨ç±»ç±»å</li><li>è¿è¡Œå¯åŠ¨ç±»æ—¶ä¼šè¿è¡Œå½“å‰å·¥ç¨‹çš„å†…å®¹</li><li>è¿è¡Œå½“å‰å·¥ç¨‹æ—¶ä¼šä½¿ç”¨ä¾èµ–çš„jaråŒ…ï¼Œä»libç›®å½•ä¸­æŸ¥</li></ol><p><strong>æ€»ç»“</strong></p><ol><li>spring-boot-maven-pluginæ’ä»¶ç”¨äºå°†å½“å‰ç¨‹åºæ‰“åŒ…æˆä¸€ä¸ªå¯ä»¥ç‹¬ç«‹è¿è¡Œçš„ç¨‹åºåŒ…</li></ol><h2 id="3-å‘½ä»¤è¡Œå¯åŠ¨å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"><a href="#3-å‘½ä»¤è¡Œå¯åŠ¨å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="3.å‘½ä»¤è¡Œå¯åŠ¨å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"></a>3.å‘½ä»¤è¡Œå¯åŠ¨å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h2><p>åœ¨DOSç¯å¢ƒä¸‹å¯åŠ¨SpringBootå·¥ç¨‹æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ç«¯å£å ç”¨çš„é—®é¢˜ä»¥ä¸‹å‘½ä»¤å¯ä»¥è¿›è¡Œè§£å†³è¾“å…¥åœ¨DOSä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"># é¦–å…ˆæŸ¥è¯¢ç«¯å£  è¿™ä¸ªæ˜¯æŸ¥è¯¢æ‰€æœ‰çš„ç«¯å£<br>netstat -ano<br># æŸ¥è¯¢æŒ‡å®šç«¯å£<br>netstat -ano |findstr <span class="hljs-string">"ç«¯å£å·"</span><br># æ ¹æ®è¿›ç¨‹PIDæŸ¥è¯¢è¿›ç¨‹åç§°<br>tasklist |findstr <span class="hljs-string">"è¿›ç¨‹PIDå·"</span><br># æ ¹æ®PIDæ€æ­»ä»»åŠ¡ï¼ˆå¸¸ç”¨ï¼‰<br>taskkill /F /PID <span class="hljs-string">"è¿›ç¨‹PIDå·"</span><br># æ ¹æ®è¿›ç¨‹åç§°æ€æ­»ä»»åŠ¡ï¼ˆä¸å¸¸ç”¨ï¼‰<br>taskkill -f -t -im <span class="hljs-string">"è¿›ç¨‹åç§°"</span><br></code></pre></td></tr></tbody></table></figure><h2 id="4-SpringBooté¡¹ç›®å¿«é€Ÿå¯åŠ¨ï¼ˆLinuxç‰ˆï¼‰"><a href="#4-SpringBooté¡¹ç›®å¿«é€Ÿå¯åŠ¨ï¼ˆLinuxç‰ˆï¼‰" class="headerlink" title="4.SpringBooté¡¹ç›®å¿«é€Ÿå¯åŠ¨ï¼ˆLinuxç‰ˆï¼‰"></a>4.SpringBooté¡¹ç›®å¿«é€Ÿå¯åŠ¨ï¼ˆLinuxç‰ˆï¼‰</h2><ul><li>åŸºäºLinuxï¼ˆCenterOS7ï¼‰</li><li>å®‰è£…JDKï¼Œä¸”ç‰ˆæœ¬ä¸ä½äºæ‰“åŒ…æ—¶ä½¿ç”¨çš„JDKç‰ˆæœ¬</li><li>å®‰è£…åŒ…ä¿å­˜åœ¨/usr/local/è‡ªå®šä¹‰ç›®å½•ä¸­æˆ–$HOMEä¸‹</li><li>å…¶ä»–æ“ä½œå‚ç…§Windowsç‰ˆè¿›è¡Œ</li></ul><ol><li><p>Bootç¨‹åºæ‰“åŒ…ä¾èµ–SpringBootå¯¹åº”çš„Mavenæ’ä»¶å³å¯æ‰“åŒ…å‡ºå¯æ‰§è¡Œçš„jaråŒ…</p></li><li><p>è¿è¡ŒjaråŒ…ä½¿ç”¨jarå‘½ä»¤è¿›è¡Œ</p></li><li><p>Windowsä¸Linuxä¸‹æ‰§è¡ŒBootæ‰“åŒ…ç¨‹åºæµç¨‹ç›¸åŒï¼Œä»…éœ€ç¡®ä¿è¿è¡Œç¯å¢ƒæœ‰æ•ˆå³å¯</p></li></ol><p>é¦–å…ˆå¯åŠ¨linuxæœåŠ¡å™¨ç„¶åå°†jaråŒ…ç»™ä¼ ç»™linuxã€‚ä¸€èˆ¬å»ºç«‹æ–‡ä»¶å¤¹åœ¨/usr/local/app æ”¾åœ¨ä¸‹é¢ æˆåŠŸåæ‰“å¼€linuxæœåŠ¡å™¨ç»ˆç«¯åˆ‡æ¢åˆ°è¯¥æ–‡ä»¶å¤¹ç„¶åè¾“å…¥<code>java -jar springboot_08_ssmp-0.0.1-SNAPSHOT.jar</code>æ¥è¿è¡Œè¯¥æ–‡ä»¶</p><p>ç„¶åå†windowsç•Œé¢è®¿é—®è™šæ‹Ÿæœºçš„åœ°å€å°†localhostæ”¹ä¸ºè™šæ‹Ÿæœºçš„åœ°å€å°±å¯ä»¥è®¿é—®åˆ°é¡µé¢ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ç½‘é¡µä¸Šæ²¡æœ‰æ•°æ®ã€‚åŸå› ï¼šå†xmlæ–‡ä»¶ä¸­æˆ‘ä»¬é…ç½®çš„æ•°æ®åº“åœ°å€ä¸ºæœ¬åœ°ï¼Œåœ°å€æ‰€ä»¥æˆ‘ä»¬éœ€è¦å†å»ºç«‹ä¸€ä¸ªæ•°æ®åº“ä½¿ç”¨è™šæ‹Ÿæœºåœ°å€ï¼Œç„¶åå†é“¾æ¥åå°†æœ¬åœ°çš„æ•°æ®åº“æ‹·è´åˆ°è™šæ‹Ÿæœºç«¯å£çš„æ•°æ®åº“å†…ç„¶åè¿è¡Œè™šæ‹Ÿæœºçš„å¯†ç <code>hspwedu100</code></p><p>åå°å¯åŠ¨</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">nohup java -jar springboot_08_ssmp-<span class="hljs-number">0.0</span><span class="hljs-number">.1</span>-SNAPSHOT.jar<br><span class="hljs-comment">//æŒ‡å®šæ—¥å¿—ä¿å­˜è¿è¡Œç»†èŠ‚ å…¶ä¸­çš„server.logä¸ºæ—¥å¿—ä¿å­˜æ–‡ä»¶ è¿™æ¡å‘½ä»¤ä¸ºåå°å¯åŠ¨</span><br>nohup java -jar springboot_08_ssmp-<span class="hljs-number">0.0</span><span class="hljs-number">.1</span>-SNAPSHOT.jar &gt; server.log <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> &amp;<br><span class="hljs-comment">//å…³é—­è¿è¡Œ çš„ç¨‹åºé¦–å…ˆæŸ¥è¯¢ä»–çš„PID </span><br>ps -ef | grep <span class="hljs-string">"java -jar"</span><br><span class="hljs-comment">//æ€æ­»å½“å‰çš„è¿›ç¨‹</span><br>kill -<span class="hljs-number">9</span> <span class="hljs-string">'è¿›ç¨‹å·'</span><br></code></pre></td></tr></tbody></table></figure><h3 id="5-é…ç½®é«˜çº§"><a href="#5-é…ç½®é«˜çº§" class="headerlink" title="5.é…ç½®é«˜çº§"></a>5.é…ç½®é«˜çº§</h3><p>â€¢ ä¸´æ—¶å±æ€§è®¾ç½®</p><p>â€¢ é…ç½®æ–‡ä»¶åˆ†ç±»</p><p>â€¢ è‡ªå®šä¹‰é…ç½®æ–‡ä»¶</p><p>SpringBootæä¾›äº†çµæ´»çš„é…ç½®æ–¹å¼ï¼Œå¦‚æœä½ å‘ç°ä½ çš„é¡¹ç›®ä¸­æœ‰ä¸ªåˆ«å±æ€§éœ€è¦é‡æ–°é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä¸´æ—¶å±æ€§çš„æ–¹å¼å¿«é€Ÿä¿®æ”¹æŸäº›é…ç½®ã€‚æ–¹æ³•ä¹Ÿç‰¹åˆ«ç®€å•ï¼Œåœ¨å¯åŠ¨çš„æ—¶å€™æ·»åŠ ä¸Šå¯¹åº”å‚æ•°å°±å¯ä»¥äº†</p><ul><li>å¸¦å±æ€§æ•°å¯åŠ¨SpringBoot</li></ul><p><code>java â€“jar springboot.jar â€“-server.port=8080</code>  ä¿®æ”¹ç«¯å£</p><ul><li>æºå¸¦å¤šä¸ªå±æ€§å¯åŠ¨SpringBootï¼Œå±æ€§é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”</li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025112132515.png" alt="image-20221025112132515"></p><p>å¦‚æœä½ å‘ç°è¦ä¿®æ”¹çš„å±æ€§ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥æŒ‰ç…§ä¸Šè¿°æ ¼å¼ç»§ç»­å†™ï¼Œå±æ€§ä¸å±æ€§ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚</p><p><code>java â€“jar springboot.jar â€“-server.port=80 --logging.level.root=debug</code></p><p>ä¸»è¦è§£å†³ï¼š</p><p>â€‹    æ¯”å¦‚ä½ ç°åœ¨åŠ è½½äº†ä¸€ä¸ªuser.nameå±æ€§ã€‚ç»“æœä½ å‘ç°å‡ºæ¥çš„ç»“æœå’Œä½ æƒ³çš„ä¸ä¸€æ ·ï¼Œé‚£è‚¯å®šæ˜¯åˆ«çš„ä¼˜å…ˆçº§æ¯”ä½ é«˜çš„å±æ€§è¦†ç›–ä½ çš„é…ç½®å±æ€§äº†ï¼Œé‚£ä½ å°±å¯ä»¥çœ‹ç€è¿™ä¸ªé¡ºåºæŒ¨ä¸ªæ’æŸ¥ã€‚å“ªä¸ªä½ç½®æœ‰å¯èƒ½è¦†ç›–äº†ä½ çš„å±æ€§ã€‚</p><p>â€‹    <strong>ä¾‹å¦‚å‰é¢å‡ºç°çš„è¯»å–usernameä¸ºè‡ªå·±çš„ç”µè„‘åç§°ï¼š</strong>å› ä¸ºåœ¨ç³»ç»Ÿå±æ€§ä¸­æœ‰ä¸€ä¸ªå±æ€§å«åšuser.nameï¼Œä¸¤ä¸ªç›¸äº’å†²çªäº†ã€‚è€Œç³»ç»Ÿå±æ€§çš„åŠ è½½ä¼˜å…ˆé¡ºåºåœ¨ä¸Šé¢è¿™ä¸ªåˆ—è¡¨ä¸­æ˜¯5å·ï¼Œé«˜äº3å·ï¼Œæ‰€ä»¥SpringBootæœ€ç»ˆä¼šåŠ è½½ç³»ç»Ÿé…ç½®å±æ€§user.nameã€‚</p><p>æ€»ç»“ï¼š</p><ol><li>ä½¿ç”¨jarå‘½ä»¤å¯åŠ¨SpringBootå·¥ç¨‹æ—¶å¯ä»¥ä½¿ç”¨ä¸´æ—¶å±æ€§æ›¿æ¢é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§</li><li>ä¸´æ—¶å±æ€§æ·»åŠ æ–¹å¼ï¼šjava â€“jar å·¥ç¨‹å.jar â€“-å±æ€§å=å€¼</li><li>å¤šä¸ªä¸´æ—¶å±æ€§ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”</li><li>ä¸´æ—¶å±æ€§å¿…é¡»æ˜¯å½“å‰bootå·¥ç¨‹æ”¯æŒçš„å±æ€§ï¼Œå¦åˆ™è®¾ç½®æ— æ•ˆ</li></ol><h3 id="6-å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ä¸´æ—¶å±æ€§"><a href="#6-å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ä¸´æ—¶å±æ€§" class="headerlink" title="6.å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ä¸´æ—¶å±æ€§"></a>6.å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ä¸´æ—¶å±æ€§</h3><p>å¼€å‘ç¯å¢ƒä¸­å¦‚ä½•ä½¿ç”¨ä¸´æ—¶å±æ€§ï¼Œå…¶å®å°±æ˜¯Ideaç•Œé¢ä¸‹å¦‚ä½•æ“ä½œäº†ï¼š</p><p>æ‰“å¼€SpringBootå¼•å¯¼ç±»çš„è¿è¡Œç•Œé¢ï¼Œåœ¨é‡Œé¢æ‰¾åˆ°é…ç½®é¡¹ã€‚å…¶ä¸­Program argumentså¯¹åº”çš„ä½ç½®å°±æ˜¯æ·»åŠ ä¸´æ—¶å±æ€§çš„ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025112955713.png" alt="image-20221025112955713"></p><p>æ¥ç€æ‰¾åˆ°ä»–</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025113153857.png" alt="image-20221025113153857"></p><p>å¯ä»¥åœ¨é‡Œé¢å¡«å…¥æ•°æ®<code>--server.port=8080</code>ç„¶åè¿è¡Œ æˆ‘ä»¬å°±å¯ä»¥å‘ç°ä¸´æ—¶å±æ€§å°±ç”Ÿæ•ˆäº†.</p><p>ç”±æ­¤æˆ‘ä»¬å¯ä»¥æ˜ç™½ï¼šæˆ‘ä»¬è¿è¡Œmainæ–¹æ³•çš„æ—¶å€™ï¼Œå¦‚æœæƒ³ä½¿ç”¨mainæ–¹æ³•çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢çš„argså‚æ•°ï¼Œå°±æ˜¯åœ¨ä¸Šé¢è¿™ä¸ªä½ç½®æ·»åŠ çš„å‚æ•°ã€‚æ‰€ä»¥é€šè¿‡è¿™ä¸ªargså°±å¯ä»¥è·å–åˆ°å‚æ•°ã€‚</p><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥å†ç¨‹åºä¸­é…ç½®ï¼Œæ‰¾åˆ°è¿è¡Œçš„ä¸»å‡½æ•°ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025113431084.png" alt="image-20221025113431084"></p><p>å°†é…ç½®ä¸å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œç›´æ¥å†™æˆä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œä¼ é€’ç»™ç¨‹åºå…¥å£ã€‚è¿™ç§åšæ³•å¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…å¼€å‘æ„ä¹‰ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>    String[] arg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[<span class="hljs-number">1</span>];<br>    arg[<span class="hljs-number">0</span>] = <span class="hljs-string">"--server.port=8082"</span>;<br>    SpringApplication.run(SSMPApplication.class, arg);<br>}<br></code></pre></td></tr></tbody></table></figure><p>ä¸€èˆ¬å¦‚æœæˆ‘ä»¬ä¸æƒ³è®©å¤–ç•Œæ¥ä¿®æ”¹æˆ‘ä»¬çš„ç«¯å£çš„è¯å°±ç›´æ¥å°†argsç»™å…³é—­ä¹Ÿå°±æ˜¯ç›´æ¥åˆ é™¤å‚æ•°</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221025113721492.png" alt="image-20221025113721492"></p><h3 id="7-YW-2-2-é…ç½®æ–‡ä»¶åˆ†ç±»"><a href="#7-YW-2-2-é…ç½®æ–‡ä»¶åˆ†ç±»" class="headerlink" title="7.YW-2-2.é…ç½®æ–‡ä»¶åˆ†ç±»"></a>7.YW-2-2.é…ç½®æ–‡ä»¶åˆ†ç±»</h3><p>â€‹        SpringBootæä¾›äº†é…ç½®æ–‡ä»¶å’Œä¸´æ—¶å±æ€§çš„æ–¹å¼æ¥å¯¹ç¨‹åºè¿›è¡Œé…ç½®ã€‚å‰é¢ä¸€ç›´è¯´çš„æ˜¯ä¸´æ—¶å±æ€§ï¼Œè¿™ä¸€èŠ‚è¦è¯´è¯´é…ç½®æ–‡ä»¶äº†ã€‚å…¶å®è¿™ä¸ªé…ç½®æ–‡ä»¶æˆ‘ä»¬ä¸€ç›´åœ¨ä½¿ç”¨ï¼Œåªä¸è¿‡æˆ‘ä»¬ç”¨çš„æ˜¯SpringBootæä¾›çš„4çº§é…ç½®æ–‡ä»¶ä¸­çš„å…¶ä¸­ä¸€ä¸ªçº§åˆ«ã€‚4ä¸ªçº§åˆ«åˆ†åˆ«æ˜¯ï¼š</p><ul><li>ç±»è·¯å¾„ä¸‹é…ç½®æ–‡ä»¶ï¼ˆä¸€ç›´ä½¿ç”¨çš„æ˜¯è¿™ä¸ªï¼Œä¹Ÿå°±æ˜¯resourcesç›®å½•ä¸­çš„application.ymlæ–‡ä»¶ï¼‰</li><li>ç±»è·¯å¾„ä¸‹configç›®å½•ä¸‹é…ç½®æ–‡ä»¶</li><li>ç¨‹åºåŒ…æ‰€åœ¨ç›®å½•ä¸­é…ç½®æ–‡ä»¶</li><li>ç¨‹åºåŒ…æ‰€åœ¨ç›®å½•ä¸­configç›®å½•ä¸‹é…ç½®æ–‡ä»¶</li></ul><p>â€‹        å¥½å¤æ‚ï¼Œä¸€ä¸ªä¸€ä¸ªè¯´ã€‚å…¶å®ä¸Šè¿°4ç§æ–‡ä»¶æ˜¯æä¾›ç»™ä½ äº†4ç§é…ç½®æ–‡ä»¶ä¹¦å†™çš„ä½ç½®ï¼ŒåŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯åšé…ç½®çš„ã€‚é‚£å¤§å®¶å…³å¿ƒçš„å°±æ˜¯å·®åˆ«äº†ï¼Œæ²¡é”™ï¼Œå°±æ˜¯å› ä¸ºä½ç½®ä¸åŒï¼Œäº§ç”Ÿäº†å·®å¼‚ã€‚æ€»ä½“ä¸Šæ¥è¯´ï¼Œ4ç§é…ç½®æ–‡ä»¶å¦‚æœéƒ½å­˜åœ¨çš„è¯ï¼Œæœ‰ä¸€ä¸ªä¼˜å…ˆçº§çš„é—®é¢˜ï¼Œè¯´ç™½äº†å°±æ˜¯åŠ å…¥4ä¸ªæ–‡ä»¶æˆ‘éƒ½æœ‰ï¼Œé‡Œé¢éƒ½æœ‰ä¸€æ ·çš„é…ç½®ï¼Œè°ç”Ÿæ•ˆçš„é—®é¢˜ã€‚ä¸Šé¢4ä¸ªæ–‡ä»¶çš„åŠ è½½ä¼˜å…ˆé¡ºåºä¸º</p><ol><li>file ï¼šconfig/application.yml <strong>ã€æœ€é«˜ã€‘</strong></li><li>file ï¼šapplication.yml</li><li>classpathï¼šconfig/application.yml</li><li>classpathï¼šapplication.yml  <strong>ã€æœ€ä½ã€‘</strong></li></ol><p>â€‹        é‚£ä¸ºä»€ä¹ˆè®¾è®¡è¿™ç§å¤šç§å‘¢ï¼Ÿè¯´ä¸€ä¸ªæœ€å…¸å‹çš„åº”ç”¨å§ã€‚</p><ul><li>åœºæ™¯Aï¼šä½ ä½œä¸ºä¸€ä¸ªå¼€å‘è€…ï¼Œä½ åšç¨‹åºçš„æ—¶å€™ä¸ºäº†æ–¹ä¾¿è‡ªå·±å†™ä»£ç ï¼Œé…ç½®çš„æ•°æ®åº“è‚¯å®šæ˜¯è¿æ¥ä½ è‡ªå·±æœ¬æœºçš„ï¼Œå’±ä»¬ä½¿ç”¨4è¿™ä¸ªçº§åˆ«ï¼Œä¹Ÿå°±æ˜¯ä¹‹å‰ä¸€ç›´ç”¨çš„application.ymlã€‚</li><li>åœºæ™¯Bï¼šç°åœ¨é¡¹ç›®å¼€å‘åˆ°äº†ä¸€ä¸ªé˜¶æ®µï¼Œè¦è”è°ƒæµ‹è¯•äº†ï¼Œè¿æ¥çš„æ•°æ®åº“æ˜¯æµ‹è¯•æœåŠ¡å™¨çš„æ•°æ®åº“ï¼Œè‚¯å®šè¦æ¢ä¸€ç»„é…ç½®å§ã€‚ä½ å¯ä»¥é€‰æ‹©æŠŠä½ ä¹‹å‰çš„æ–‡ä»¶ä¸­çš„å†…å®¹éƒ½æ”¹äº†ï¼Œç›®å‰è¿˜ä¸éº»çƒ¦ã€‚</li><li>åœºæ™¯Cï¼šæµ‹è¯•å®Œäº†ï¼Œä¸€åˆ‡OKã€‚ä½ ç»§ç»­å†™ä½ çš„ä»£ç ï¼Œä½ å‘ç°ä½ åŸæ¥å†™çš„é…ç½®æ–‡ä»¶è¢«æ”¹æˆæµ‹è¯•æœåŠ¡å™¨çš„å†…å®¹äº†ï¼Œä½ è¦å†æ”¹å›æ¥ã€‚ç°åœ¨æ˜ç™½äº†ä¸ï¼Ÿåœºæ™¯Bä¸­æŠŠä½ çš„å†…å®¹éƒ½æ”¹æ‰äº†ï¼Œä½ ç°åœ¨è¦é‡æ–°æ”¹å›æ¥ï¼Œä»¥åå‘¢ï¼Ÿæ”¹æ¥æ”¹å»å—ï¼Ÿ</li></ul><p>â€‹        è§£å†³æ–¹æ¡ˆå¾ˆç®€å•ï¼Œç”¨ä¸Šé¢çš„3è¿™ä¸ªçº§åˆ«çš„é…ç½®æ–‡ä»¶å°±å¯ä»¥å¿«é€Ÿè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå†å†™ä¸€ä¸ªé…ç½®å°±è¡Œäº†ã€‚ä¸¤ä¸ªé…ç½®æ–‡ä»¶å…±å­˜ï¼Œå› ä¸ºconfigç›®å½•ä¸­çš„é…ç½®åŠ è½½ä¼˜å…ˆçº§æ¯”ä½ çš„é«˜ï¼Œæ‰€ä»¥é…ç½®é¡¹å¦‚æœå’Œçº§åˆ«4é‡Œé¢çš„å†…å®¹ç›¸åŒå°±è¦†ç›–äº†ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ</p><p>â€‹        çº§åˆ«1å’Œ2ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å‘¢ï¼Ÿç¨‹åºæ‰“åŒ…ä»¥åå°±è¦ç”¨è¿™ä¸ªçº§åˆ«äº†ï¼Œç®¡ä½ ç¨‹åºé‡Œé¢é…ç½®å†™çš„æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘çš„çº§åˆ«é«˜ï¼Œå¯ä»¥è½»æ¾è¦†ç›–ä½ ï¼Œå°±ä¸ç”¨è€ƒè™‘è¿™äº›é…ç½®å†²çªçš„é—®é¢˜äº†ã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li><p>é…ç½®æ–‡ä»¶åˆ†ä¸º4ç§</p><ul><li>é¡¹ç›®ç±»è·¯å¾„é…ç½®æ–‡ä»¶ï¼šæœåŠ¡äºå¼€å‘äººå‘˜æœ¬æœºå¼€å‘ä¸æµ‹è¯•</li><li>é¡¹ç›®ç±»è·¯å¾„configç›®å½•ä¸­é…ç½®æ–‡ä»¶ï¼šæœåŠ¡äºé¡¹ç›®ç»ç†æ•´ä½“è°ƒæ§</li><li>å·¥ç¨‹è·¯å¾„é…ç½®æ–‡ä»¶ï¼šæœåŠ¡äºè¿ç»´äººå‘˜é…ç½®æ¶‰å¯†çº¿ä¸Šç¯å¢ƒ</li><li>å·¥ç¨‹è·¯å¾„configç›®å½•ä¸­é…ç½®æ–‡ä»¶ï¼šæœåŠ¡äºè¿ç»´ç»ç†æ•´ä½“è°ƒæ§</li></ul></li><li><p>å¤šå±‚çº§é…ç½®æ–‡ä»¶é—´çš„å±æ€§é‡‡ç”¨å åŠ å¹¶è¦†ç›–çš„å½¢å¼ä½œç”¨äºç¨‹åº</p></li></ol><h3 id="7-YW-3-å¤šç¯å¢ƒå¼€å‘"><a href="#7-YW-3-å¤šç¯å¢ƒå¼€å‘" class="headerlink" title="7,YW-3.å¤šç¯å¢ƒå¼€å‘"></a>7,YW-3.å¤šç¯å¢ƒå¼€å‘</h3><p>   å¸¸è§çš„å¤šç¯å¢ƒå¼€å‘ä¸»è¦å…¼é¡¾3ç§ç¯å¢ƒè®¾ç½®ï¼Œå¼€å‘ç¯å¢ƒâ€”â€”è‡ªå·±ç”¨çš„ï¼Œæµ‹è¯•ç¯å¢ƒâ€”â€”è‡ªå·±å…¬å¸ç”¨çš„ï¼Œç”Ÿäº§ç¯å¢ƒâ€”â€”ç”²æ–¹çˆ¸çˆ¸ç”¨çš„ã€‚å› ä¸ºè¿™æ˜¯ç»å¯¹ä¸åŒçš„ä¸‰å°ç”µè„‘ï¼Œæ‰€ä»¥ç¯å¢ƒè‚¯å®šæœ‰æ‰€ä¸åŒï¼Œæ¯”å¦‚è¿æ¥çš„æ•°æ®åº“ä¸ä¸€æ ·ï¼Œè®¾ç½®çš„è®¿é—®ç«¯å£ä¸ä¸€æ ·ç­‰ç­‰ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211206110958819.png" alt="image-20211206110958819"></p><h4 id="YW-3-1-å¤šç¯å¢ƒå¼€å‘ï¼ˆyamlå•ä¸€æ–‡ä»¶ç‰ˆï¼‰"><a href="#YW-3-1-å¤šç¯å¢ƒå¼€å‘ï¼ˆyamlå•ä¸€æ–‡ä»¶ç‰ˆï¼‰" class="headerlink" title="YW-3-1.å¤šç¯å¢ƒå¼€å‘ï¼ˆyamlå•ä¸€æ–‡ä»¶ç‰ˆï¼‰"></a>YW-3-1.å¤šç¯å¢ƒå¼€å‘ï¼ˆyamlå•ä¸€æ–‡ä»¶ç‰ˆï¼‰</h4><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br><span class="hljs-attr">profiles:</span><br><span class="hljs-attr">active:</span> <span class="hljs-string">pro</span><span class="hljs-comment"># å¯åŠ¨pro</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">spring:</span><br><span class="hljs-attr">profiles:</span> <span class="hljs-string">pro</span><br><span class="hljs-attr">server:</span><br><span class="hljs-attr">port:</span> <span class="hljs-number">80</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">spring:</span><br><span class="hljs-attr">profiles:</span> <span class="hljs-string">dev</span><br><span class="hljs-attr">server:</span><br><span class="hljs-attr">port:</span> <span class="hljs-number">81</span><br><span class="hljs-meta">---</span><br><span class="hljs-attr">spring:</span><br><span class="hljs-attr">profiles:</span> <span class="hljs-string">test</span><br><span class="hljs-attr">server:</span><br><span class="hljs-attr">port:</span> <span class="hljs-number">82</span><br></code></pre></td></tr></tbody></table></figure><p>å…¶ä¸­å…³äºç¯å¢ƒåç§°å®šä¹‰ä¸Šè¿°æ ¼å¼æ˜¯è¿‡æ—¶æ ¼å¼ï¼Œæ ‡å‡†æ ¼å¼å¦‚ä¸‹</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br><span class="hljs-attr">config:</span><br>    <span class="hljs-attr">activate:</span><br>        <span class="hljs-attr">on-profile:</span> <span class="hljs-string">pro</span><br></code></pre></td></tr></tbody></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>å¤šç¯å¢ƒå¼€å‘éœ€è¦è®¾ç½®è‹¥å¹²ç§å¸¸ç”¨ç¯å¢ƒï¼Œä¾‹å¦‚å¼€å‘ã€ç”Ÿäº§ã€æµ‹è¯•ç¯å¢ƒ</li><li>yamlæ ¼å¼ä¸­è®¾ç½®å¤šç¯å¢ƒä½¿ç”¨â€”-åŒºåˆ†ç¯å¢ƒè®¾ç½®è¾¹ç•Œ</li><li>æ¯ç§ç¯å¢ƒçš„åŒºåˆ«åœ¨äºåŠ è½½çš„é…ç½®å±æ€§ä¸åŒ</li><li>å¯ç”¨æŸç§ç¯å¢ƒæ—¶éœ€è¦æŒ‡å®šå¯åŠ¨æ—¶ä½¿ç”¨è¯¥ç¯å¢ƒ</li></ol><h4 id="YW-3-2-å¤šç¯å¢ƒå¼€å‘ï¼ˆyamlå¤šæ–‡ä»¶ç‰ˆï¼‰"><a href="#YW-3-2-å¤šç¯å¢ƒå¼€å‘ï¼ˆyamlå¤šæ–‡ä»¶ç‰ˆï¼‰" class="headerlink" title="YW-3-2.å¤šç¯å¢ƒå¼€å‘ï¼ˆyamlå¤šæ–‡ä»¶ç‰ˆï¼‰"></a>YW-3-2.å¤šç¯å¢ƒå¼€å‘ï¼ˆyamlå¤šæ–‡ä»¶ç‰ˆï¼‰</h4><p>â€‹    å°†æ‰€æœ‰çš„é…ç½®éƒ½æ”¾åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œå°¤å…¶æ˜¯æ¯ä¸€ä¸ªé…ç½®åº”ç”¨åœºæ™¯éƒ½ä¸ä¸€æ ·ï¼Œè¿™æ˜¾ç„¶ä¸åˆç†ï¼Œäºæ˜¯å°±æœ‰äº†å°†ä¸€ä¸ªé…ç½®æ–‡ä»¶æ‹†åˆ†æˆå¤šä¸ªé…ç½®æ–‡ä»¶çš„æƒ³æ³•ã€‚æ‹†åˆ†åï¼Œæ¯ä¸ªé…ç½®æ–‡ä»¶ä¸­å†™è‡ªå·±çš„é…ç½®ï¼Œä¸»é…ç½®æ–‡ä»¶ä¸­å†™æ¸…æ¥šç”¨å“ªä¸€ä¸ªé…ç½®æ–‡ä»¶å°±å¥½äº†ã€‚</p><p><strong>ä¸»é…ç½®æ–‡ä»¶</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br><span class="hljs-attr">profiles:</span><br><span class="hljs-attr">active:</span> <span class="hljs-string">pro</span><span class="hljs-comment"># å¯åŠ¨pro</span><br></code></pre></td></tr></tbody></table></figure><p><strong>ç¯å¢ƒé…ç½®æ–‡ä»¶</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br><span class="hljs-attr">port:</span> <span class="hljs-number">80</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹        ç¯å¢ƒé…ç½®æ–‡ä»¶å› ä¸ºæ¯ä¸€ä¸ªéƒ½æ˜¯é…ç½®è‡ªå·±çš„é¡¹ï¼Œæ‰€ä»¥è¿åå­—éƒ½ä¸ç”¨å†™é‡Œé¢äº†ã€‚é‚£é—®é¢˜æ˜¯å¦‚ä½•åŒºåˆ†è¿™æ˜¯å“ªä¸€ç»„é…ç½®å‘¢ï¼Ÿä½¿ç”¨æ–‡ä»¶ååŒºåˆ†ã€‚</p><p><strong>application-pro.yaml</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br><span class="hljs-attr">port:</span> <span class="hljs-number">80</span><br></code></pre></td></tr></tbody></table></figure><p><strong>application-dev.yaml</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br><span class="hljs-attr">port:</span> <span class="hljs-number">81</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹        æ–‡ä»¶çš„å‘½åè§„åˆ™ä¸ºï¼šapplication-ç¯å¢ƒå.ymlã€‚</p><p>â€‹        åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚æœæŸäº›é…ç½®é¡¹æ‰€æœ‰ç¯å¢ƒéƒ½ä¸€æ ·ï¼Œå¯ä»¥å°†è¿™äº›é¡¹å†™å…¥åˆ°ä¸»é…ç½®ä¸­ï¼Œåªæœ‰å“ªäº›æœ‰åŒºåˆ«çš„é¡¹æ‰å†™å…¥åˆ°ç¯å¢ƒé…ç½®æ–‡ä»¶ä¸­ã€‚</p><ul><li>ä¸»é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å…¬å…±é…ç½®ï¼ˆå…¨å±€ï¼‰</li><li>ç¯å¢ƒåˆ†ç±»é…ç½®æ–‡ä»¶ä¸­å¸¸ç”¨äºè®¾ç½®å†²çªå±æ€§ï¼ˆå±€éƒ¨ï¼‰</li></ul><p><strong>æ€»ç»“</strong></p><ol><li><p>å¯ä»¥ä½¿ç”¨ç‹¬ç«‹é…ç½®æ–‡ä»¶å®šä¹‰ç¯å¢ƒå±æ€§</p></li><li><p>ç‹¬ç«‹é…ç½®æ–‡ä»¶ä¾¿äºçº¿ä¸Šç³»ç»Ÿç»´æŠ¤æ›´æ–°å¹¶ä¿éšœç³»ç»Ÿå®‰å…¨æ€§</p></li></ol><h4 id="å¤šç¯å¢ƒå¼€å‘ï¼ˆpropertieså¤šæ–‡ä»¶ç‰ˆï¼‰-äº†è§£"><a href="#å¤šç¯å¢ƒå¼€å‘ï¼ˆpropertieså¤šæ–‡ä»¶ç‰ˆï¼‰-äº†è§£" class="headerlink" title="å¤šç¯å¢ƒå¼€å‘ï¼ˆpropertieså¤šæ–‡ä»¶ç‰ˆï¼‰(äº†è§£)"></a>å¤šç¯å¢ƒå¼€å‘ï¼ˆpropertieså¤šæ–‡ä»¶ç‰ˆï¼‰(äº†è§£)</h4><p><strong>ä¸»é…ç½®æ–‡ä»¶</strong></p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">spring.profiles.active</span>=<span class="hljs-string">pro</span><br></code></pre></td></tr></tbody></table></figure><p><strong>ç¯å¢ƒé…ç½®æ–‡ä»¶</strong></p><p><strong>application-pro.properties</strong></p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">server.port</span>=<span class="hljs-string">80</span><br></code></pre></td></tr></tbody></table></figure><p><strong>application-dev.properties</strong></p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">server.port</span>=<span class="hljs-string">81</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹        æ–‡ä»¶çš„å‘½åè§„åˆ™ä¸ºï¼šapplication-ç¯å¢ƒå.propertiesã€‚</p><p><strong>æ€»ç»“</strong></p><ol><li>propertiesæ–‡ä»¶å¤šç¯å¢ƒé…ç½®ä»…æ”¯æŒå¤šæ–‡ä»¶æ ¼å¼</li></ol><h4 id="ä»£ç ä¸­ä½¿ç”¨æ—¥å¿—å·¥å…·è®°å½•æ—¥å¿—"><a href="#ä»£ç ä¸­ä½¿ç”¨æ—¥å¿—å·¥å…·è®°å½•æ—¥å¿—" class="headerlink" title="ä»£ç ä¸­ä½¿ç”¨æ—¥å¿—å·¥å…·è®°å½•æ—¥å¿—"></a>ä»£ç ä¸­ä½¿ç”¨æ—¥å¿—å·¥å…·è®°å½•æ—¥å¿—</h4><p>æ—¥å¿—çš„ä½¿ç”¨æ ¼å¼éå¸¸å›ºå®šï¼Œç›´æ¥ä¸Šæ“ä½œæ­¥éª¤ï¼š</p><p><strong>æ­¥éª¤â‘ </strong>ï¼šæ·»åŠ æ—¥å¿—è®°å½•æ“ä½œ</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping("/books")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseClass</span>{<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(BookController.class);<br>    <span class="hljs-meta">@GetMapping</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getById</span><span class="hljs-params">()</span>{<br>        log.debug(<span class="hljs-string">"debug..."</span>);<br>        log.info(<span class="hljs-string">"info..."</span>);<br>        log.warn(<span class="hljs-string">"warn..."</span>);<br>        log.error(<span class="hljs-string">"error..."</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"springboot is running...2"</span>;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>ä¸Šè¿°ä»£ç ä¸­logå¯¹è±¡å°±æ˜¯ç”¨æ¥è®°å½•æ—¥å¿—çš„å¯¹è±¡ï¼Œä¸‹é¢çš„log.debugï¼Œlog.infoè¿™äº›æ“ä½œå°±æ˜¯å†™æ—¥å¿—çš„APIäº†ã€‚</p><p><strong>æ­¥éª¤â‘¡</strong>ï¼šè®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ«</p><p>â€‹        æ—¥å¿—è®¾ç½®å¥½ä»¥åå¯ä»¥æ ¹æ®è®¾ç½®é€‰æ‹©å“ªäº›å‚ä¸è®°å½•ã€‚è¿™é‡Œæ˜¯æ ¹æ®æ—¥å¿—çš„çº§åˆ«æ¥è®¾ç½®çš„ã€‚æ—¥å¿—çš„çº§åˆ«åˆ†ä¸º6ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>TRACEï¼šè¿è¡Œå †æ ˆä¿¡æ¯ï¼Œä½¿ç”¨ç‡ä½</li><li>DEBUGï¼šç¨‹åºå‘˜è°ƒè¯•ä»£ç ä½¿ç”¨</li><li>INFOï¼šè®°å½•è¿ç»´è¿‡ç¨‹æ•°æ®</li><li>WARNï¼šè®°å½•è¿ç»´è¿‡ç¨‹æŠ¥è­¦æ•°æ®</li><li>ERRORï¼šè®°å½•é”™è¯¯å †æ ˆä¿¡æ¯</li><li>FATALï¼šç¾éš¾ä¿¡æ¯ï¼Œåˆå¹¶è®¡å…¥ERROR</li></ul><p>â€‹        ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¼€å‘æ—¶å€™ä½¿ç”¨DEBUGï¼Œä¸Šçº¿åä½¿ç”¨INFOï¼Œè¿ç»´ä¿¡æ¯è®°å½•ä½¿ç”¨WARNå³å¯ã€‚ä¸‹é¢å°±è®¾ç½®ä¸€ä¸‹æ—¥å¿—çº§åˆ«ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># å¼€å¯debugæ¨¡å¼ï¼Œè¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œå¸¸ç”¨äºæ£€æŸ¥ç³»ç»Ÿè¿è¡ŒçŠ¶å†µ</span><br><span class="hljs-attr">debug:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹        è¿™ä¹ˆè®¾ç½®å¤ªç®€å•ç²—æš´äº†ï¼Œæ—¥å¿—ç³»ç»Ÿé€šå¸¸éƒ½æä¾›äº†ç»†ç²’åº¦çš„æ§åˆ¶</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># å¼€å¯debugæ¨¡å¼ï¼Œè¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œå¸¸ç”¨äºæ£€æŸ¥ç³»ç»Ÿè¿è¡ŒçŠ¶å†µ</span><br><span class="hljs-attr">debug:</span> <span class="hljs-literal">true</span><br><br><span class="hljs-comment"># è®¾ç½®æ—¥å¿—çº§åˆ«ï¼Œrootè¡¨ç¤ºæ ¹èŠ‚ç‚¹ï¼Œå³æ•´ä½“åº”ç”¨æ—¥å¿—çº§åˆ«</span><br><span class="hljs-attr">logging:</span><br><span class="hljs-attr">level:</span><br>    <span class="hljs-attr">root:</span> <span class="hljs-string">debug</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹        è¿˜å¯ä»¥å†è®¾ç½®æ›´ç»†ç²’åº¦çš„æ§åˆ¶</p><p><strong>æ­¥éª¤â‘¢</strong>ï¼šè®¾ç½®æ—¥å¿—ç»„ï¼Œæ§åˆ¶æŒ‡å®šåŒ…å¯¹åº”çš„æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ§åˆ¶æŒ‡å®šåŒ…å¯¹åº”çš„æ—¥å¿—è¾“å‡ºçº§åˆ«</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">logging:</span><br><span class="hljs-comment"># è®¾ç½®æ—¥å¿—ç»„</span><br>    <span class="hljs-attr">group:</span><br>    <span class="hljs-comment"># è‡ªå®šä¹‰ç»„åï¼Œè®¾ç½®å½“å‰ç»„ä¸­æ‰€åŒ…å«çš„åŒ…</span><br>        <span class="hljs-attr">ebank:</span> <span class="hljs-string">com.itheima.controller</span><br>    <span class="hljs-attr">level:</span><br>    <span class="hljs-attr">root:</span> <span class="hljs-string">warn</span><br>        <span class="hljs-comment"># ä¸ºå¯¹åº”ç»„è®¾ç½®æ—¥å¿—çº§åˆ«</span><br>        <span class="hljs-attr">ebank:</span> <span class="hljs-string">debug</span><br>    <span class="hljs-comment"># ä¸ºå¯¹åŒ…è®¾ç½®æ—¥å¿—çº§åˆ«</span><br>        <span class="hljs-attr">com.itheima.controller:</span> <span class="hljs-string">debug</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹        è¯´ç™½äº†å°±æ˜¯æ€»ä½“è®¾ç½®ä¸€ä¸‹ï¼Œæ¯ä¸ªåŒ…è®¾ç½®ä¸€ä¸‹ï¼Œå¦‚æœæ„Ÿè§‰è®¾ç½®çš„éº»çƒ¦ï¼Œå°±å…ˆæŠŠåŒ…åˆ†ä¸ªç»„ï¼Œå¯¹ç»„è®¾ç½®</p><p><strong>æ€»ç»“</strong></p><ol><li>æ—¥å¿—ç”¨äºè®°å½•å¼€å‘è°ƒè¯•ä¸è¿ç»´è¿‡ç¨‹æ¶ˆæ¯</li><li>æ—¥å¿—çš„çº§åˆ«å…±6ç§ï¼Œé€šå¸¸ä½¿ç”¨4ç§å³å¯ï¼Œåˆ†åˆ«æ˜¯DEBUGï¼ŒINFO,WARN,ERROR</li><li>å¯ä»¥é€šè¿‡æ—¥å¿—ç»„æˆ–ä»£ç åŒ…çš„å½¢å¼è¿›è¡Œæ—¥å¿—æ˜¾ç¤ºçº§åˆ«çš„æ§åˆ¶</li></ol><h4 id="ä¼˜åŒ–æ—¥å¿—å¯¹è±¡åˆ›å»ºä»£ç "><a href="#ä¼˜åŒ–æ—¥å¿—å¯¹è±¡åˆ›å»ºä»£ç " class="headerlink" title="ä¼˜åŒ–æ—¥å¿—å¯¹è±¡åˆ›å»ºä»£ç "></a>ä¼˜åŒ–æ—¥å¿—å¯¹è±¡åˆ›å»ºä»£ç </h4><p>å†™ä»£ç çš„æ—¶å€™æ¯ä¸ªç±»éƒ½è¦å†™åˆ›å»ºæ—¥å¿—è®°å½•å¯¹è±¡ï¼Œè¿™ä¸ªå¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ï¼Œä½¿ç”¨å‰é¢ç”¨è¿‡çš„lombokæŠ€æœ¯ç»™æˆ‘ä»¬æä¾›çš„å·¥å…·ç±»ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping("/books")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseClass</span>{<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(BookController.class);<span class="hljs-comment">//è¿™ä¸€å¥å¯ä»¥ä¸å†™äº†</span><br>}<br></code></pre></td></tr></tbody></table></figure><p>â€‹        å¯¼å…¥lombokåä½¿ç”¨æ³¨è§£æå®šï¼Œæ—¥å¿—å¯¹è±¡åä¸ºlog</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JAVA"><span class="hljs-meta">@Slf4j</span><span class="hljs-comment">//è¿™ä¸ªæ³¨è§£æ›¿ä»£äº†ä¸‹é¢é‚£ä¸€è¡Œ</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping("/books")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseClass</span>{<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(BookController.class);<span class="hljs-comment">//è¿™ä¸€å¥å¯ä»¥ä¸å†™äº†</span><br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>æ€»ç»“</strong></p><ol><li>åŸºäºlombokæä¾›çš„@Slf4jæ³¨è§£ä¸ºç±»å¿«é€Ÿæ·»åŠ æ—¥å¿—å¯¹è±¡</li></ol><h4 id="æ—¥å¿—è¾“å‡ºæ ¼å¼æ§åˆ¶"><a href="#æ—¥å¿—è¾“å‡ºæ ¼å¼æ§åˆ¶" class="headerlink" title="æ—¥å¿—è¾“å‡ºæ ¼å¼æ§åˆ¶"></a>æ—¥å¿—è¾“å‡ºæ ¼å¼æ§åˆ¶</h4><p>å‰è®°å½•çš„æ ¼å¼æ˜¯SpringBootç»™æˆ‘ä»¬æä¾›çš„ï¼Œå¦‚æœæƒ³è‡ªå®šä¹‰æ§åˆ¶å°±éœ€è¦è‡ªå·±è®¾ç½®äº†ã€‚å…ˆåˆ†æä¸€ä¸‹å½“å‰æ—¥å¿—çš„è®°å½•æ ¼å¼ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20211206123431222.png" alt="image-20211206123431222"></p><p>å•æ¡æ—¥å¿—ä¿¡æ¯æ¥è¯´ï¼Œæ—¥æœŸï¼Œè§¦å‘ä½ç½®ï¼Œè®°å½•ä¿¡æ¯æ˜¯æœ€æ ¸å¿ƒçš„ä¿¡æ¯ã€‚çº§åˆ«ç”¨äºåšç­›é€‰è¿‡æ»¤ï¼ŒPIDä¸çº¿ç¨‹åç”¨äºåšç²¾å‡†åˆ†æã€‚</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">logging:</span><br><span class="hljs-attr">pattern:</span><br>    <span class="hljs-attr">console:</span> <span class="hljs-string">"%d %clr(%p) --- [%16t] %clr(%-40.40c){cyan} : %m %n"</span><br></code></pre></td></tr></tbody></table></figure><h4 id="æ—¥å¿—æ–‡ä»¶"><a href="#æ—¥å¿—æ–‡ä»¶" class="headerlink" title="æ—¥å¿—æ–‡ä»¶"></a>æ—¥å¿—æ–‡ä»¶</h4><p>â€‹    æ—¥å¿—ä¿¡æ¯æ˜¾ç¤ºï¼Œè®°å½•å·²ç»æ§åˆ¶ä½äº†ï¼Œä¸‹é¢å°±è¦è¯´ä¸€ä¸‹æ—¥å¿—çš„è½¬å­˜äº†ã€‚æ—¥å¿—ä¸èƒ½ä»…æ˜¾ç¤ºåœ¨æ§åˆ¶å°ä¸Šï¼Œè¦æŠŠæ—¥å¿—è®°å½•åˆ°æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿åæœŸç»´æŠ¤æŸ¥é˜…ã€‚</p><p>â€‹    è®°å½•æ—¥å¿—åˆ°æ–‡ä»¶ä¸­æ ¼å¼éå¸¸ç®€å•ï¼Œè®¾ç½®æ—¥å¿—æ–‡ä»¶åå³å¯ã€‚</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">logging:</span><br><span class="hljs-attr">file:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">server.log</span><br></code></pre></td></tr></tbody></table></figure><p>é¢å¯¹çº¿ä¸Šçš„å¤æ‚æƒ…å†µï¼Œä¸€ä¸ªæ–‡ä»¶è®°å½•è‚¯å®šæ˜¯ä¸èƒ½å¤Ÿæ»¡è¶³è¿ç»´è¦æ±‚çš„ï¼Œé€šå¸¸ä¼šæ¯å¤©è®°å½•æ—¥å¿—æ–‡ä»¶ï¼ŒåŒæ—¶ä¸ºäº†ä¾¿äºç»´æŠ¤ï¼Œè¿˜è¦é™åˆ¶æ¯ä¸ªæ—¥å¿—æ–‡ä»¶çš„å¤§å°ã€‚ä¸‹é¢ç»™å‡ºæ—¥å¿—æ–‡ä»¶çš„å¸¸ç”¨é…ç½®æ–¹å¼ï¼š</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">logging:</span><br><span class="hljs-attr">logback:</span><br>    <span class="hljs-attr">rollingpolicy:</span><br>        <span class="hljs-attr">max-file-size:</span> <span class="hljs-string">3KB</span><br>            <span class="hljs-attr">file-name-pattern:</span> <span class="hljs-string">server.%d{yyyy-MM-dd}.%i.log</span><br></code></pre></td></tr></tbody></table></figure><p>â€‹        ä»¥ä¸Šæ ¼å¼æ˜¯åŸºäºlogbackæ—¥å¿—æŠ€æœ¯è®¾ç½®æ¯æ—¥æ—¥å¿—æ–‡ä»¶çš„è®¾ç½®æ ¼å¼ï¼Œè¦æ±‚å®¹é‡åˆ°è¾¾3KBä»¥åå°±è½¬å­˜ä¿¡æ¯åˆ°ç¬¬äºŒä¸ªæ–‡ä»¶ä¸­ã€‚æ–‡ä»¶å‘½åè§„åˆ™ä¸­çš„%dæ ‡è¯†æ—¥æœŸï¼Œ%iæ˜¯ä¸€ä¸ªé€’å¢å˜é‡ï¼Œç”¨äºåŒºåˆ†æ—¥å¿—æ–‡ä»¶ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaåç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mybatis-Pluså­¦ä¹ ç¬”è®°</title>
      <link href="/2022/10/22/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Mybatis-Plus/"/>
      <url>/2022/10/22/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Mybatis-Plus/</url>
      
        <content type="html"><![CDATA[<h1 id="Mybatis-Plus"><a href="#Mybatis-Plus" class="headerlink" title="Mybatis-Plus"></a>Mybatis-Plus</h1><h3 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1. ç®€ä»‹"></a>1. ç®€ä»‹</h3><p><strong>MyBatis-Plus</strong>ï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª <strong>MyBatis</strong> <strong>çš„å¢å¼ºå·¥å…·</strong>ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Š<strong>åªåšå¢å¼ºä¸åšæ”¹å˜</strong>ï¼Œä¸º</p><p><strong>ç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿ</strong>ã€‚</p><h3 id="2-ç‰¹æ€§"><a href="#2-ç‰¹æ€§" class="headerlink" title="2. ç‰¹æ€§"></a>2. ç‰¹æ€§</h3><p><strong>æ— ä¾µå…¥</strong>ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘</p><p><strong>æŸè€—å°</strong>ï¼šå¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ CURDï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œ</p><p><strong>å¼ºå¤§çš„</strong> <strong>CRUD</strong> <strong>æ“ä½œ</strong>ï¼šå†…ç½®é€šç”¨ Mapperã€é€šç”¨ Serviceï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ†CRUD æ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚</p><p><strong>æ”¯æŒ</strong> <strong>Lambda</strong> <strong>å½¢å¼è°ƒç”¨</strong>ï¼šé€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™</p><p><strong>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šæ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥ï¼ˆå†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ - Sequenceï¼‰ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜</p><p><strong>æ”¯æŒ</strong> <strong>ActiveRecord</strong> <strong>æ¨¡å¼</strong>ï¼šæ”¯æŒ ActiveRecord å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§çš„ CRUD æ“ä½œ</p><p><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>ï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥ï¼ˆ Write once, use anywhere ï¼‰</p><p><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>ï¼šé‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ Mapper ã€ Model ã€ Service ã€Controller å±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨</p><p><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>ï¼šåŸºäº MyBatis ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒäºæ™®é€š List æŸ¥è¯¢</p><p><strong>åˆ†é¡µæ’ä»¶æ”¯æŒå¤šç§æ•°æ®åº“</strong>ï¼šæ”¯æŒ MySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€Postgreã€SQLServer ç­‰å¤šç§æ•°æ®åº“</p><p><strong>å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶</strong>ï¼šå¯è¾“å‡º SQL è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢æŸ¥è¯¢</p><p><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶</strong>ï¼šæä¾›å…¨è¡¨ delete ã€ update æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯æ“ä½œ</p><h3 id="3-æ”¯æŒçš„æ•°æ®åº“"><a href="#3-æ”¯æŒçš„æ•°æ®åº“" class="headerlink" title="3.æ”¯æŒçš„æ•°æ®åº“"></a>3.æ”¯æŒçš„æ•°æ®åº“</h3><ul><li><p>MySQLï¼ŒOracleï¼ŒDB2ï¼ŒH2ï¼ŒHSQLï¼ŒSQLiteï¼ŒPostgreSQLï¼ŒSQLServerï¼ŒPhoenixï¼ŒGauss ï¼ŒClickHouseï¼ŒSybaseï¼ŒOceanBaseï¼ŒFirebirdï¼ŒCubridï¼ŒGoldilocksï¼Œcsiidb</p></li><li><p>è¾¾æ¢¦æ•°æ®åº“ï¼Œè™šè°·æ•°æ®åº“ï¼Œäººå¤§é‡‘ä»“æ•°æ®åº“ï¼Œå—å¤§é€šç”¨(ååº“)æ•°æ®åº“ï¼Œå—å¤§é€šç”¨æ•°æ®åº“ï¼Œç¥é€šæ•°æ®åº“ï¼Œç€šé«˜æ•°æ®åº“</p></li></ul><h3 id="4-æ¡†æ¶ç»“æ„"><a href="#4-æ¡†æ¶ç»“æ„" class="headerlink" title="4.æ¡†æ¶ç»“æ„"></a>4.æ¡†æ¶ç»“æ„</h3><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/mybatis-plus-framework.jpg" alt="framework"></p><h3 id="5-ä»£ç ä»¥åŠå®˜æ–¹æ–‡æ¡£"><a href="#5-ä»£ç ä»¥åŠå®˜æ–¹æ–‡æ¡£" class="headerlink" title="5.ä»£ç ä»¥åŠå®˜æ–¹æ–‡æ¡£"></a>5.ä»£ç ä»¥åŠå®˜æ–¹æ–‡æ¡£</h3><p>å®˜æ–¹åœ°å€: <a href="http://mp.baomidou.com">http://mp.baomidou.com</a></p><p><strong>ä»£ç å‘å¸ƒåœ°å€:</strong></p><p>Github: <a href="https://github.com/baomidou/mybatis-plus">https://github.com/baomidou/mybatis-plus</a></p><p>Gitee: <a href="https://gitee.com/baomidou/mybatis-plus">https://gitee.com/baomidou/mybatis-plus</a></p><p>æ–‡æ¡£å‘å¸ƒåœ°å€: <a href="https://baomidou.com/pages/24112f">https://baomidou.com/pages/24112f</a></p><h1 id="äºŒã€å…¥é—¨æ¡ˆä¾‹"><a href="#äºŒã€å…¥é—¨æ¡ˆä¾‹" class="headerlink" title="äºŒã€å…¥é—¨æ¡ˆä¾‹"></a>äºŒã€å…¥é—¨æ¡ˆä¾‹</h1><h3 id="1-å¼€å‘ç¯å¢ƒ"><a href="#1-å¼€å‘ç¯å¢ƒ" class="headerlink" title="1.å¼€å‘ç¯å¢ƒ"></a>1.å¼€å‘ç¯å¢ƒ</h3><p>IDEï¼šidea 2021.1.3</p><p>JDKï¼šJDK8+</p><p>æ„å»ºå·¥å…·ï¼šmaven 3.5.4</p><p>MySQLç‰ˆæœ¬ï¼šMySQL 8.0</p><p>Spring Bootï¼š2.6.3</p><p>MyBatis-Plusï¼š3.5.1</p><h3 id="2-åˆ›å»ºå·¥ç¨‹"><a href="#2-åˆ›å»ºå·¥ç¨‹" class="headerlink" title="2.åˆ›å»ºå·¥ç¨‹"></a>2.åˆ›å»ºå·¥ç¨‹</h3><p>ä½¿ç”¨ Spring Initializr å¿«é€Ÿåˆå§‹åŒ–ä¸€ä¸ª Spring Boot å·¥ç¨‹</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221022142442601.png" alt="image-20221022142442601"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221022142527037.png" alt="image-20221022142527037"></p><p>åˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221022142631689.png" alt="image-20221022142631689"></p><h3 id="3-a-gt-åˆ›å»ºæ•°æ®åº“è¡¨"><a href="#3-a-gt-åˆ›å»ºæ•°æ®åº“è¡¨" class="headerlink" title="3.a>åˆ›å»ºæ•°æ®åº“è¡¨"></a>3.a&gt;åˆ›å»ºæ•°æ®åº“è¡¨</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE `mybatis_plus`   <span class="hljs-comment">/*!40100 DEFAULT CHARACTER SET utf8mb4 */</span>;<br>use `mybatis_plus`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `<span class="hljs-keyword">user</span>` (<br>`id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,<br>`name` <span class="hljs-type">varchar</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å§“å'</span>,<br>`age` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¹´é¾„'</span>,<br>`email` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'é‚®ç®±'</span>,<br><span class="hljs-keyword">PRIMARY</span> KEY (`id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br></code></pre></td></tr></tbody></table></figure><h3 id="b-gt-æ·»åŠ æ•°æ®"><a href="#b-gt-æ·»åŠ æ•°æ®" class="headerlink" title="b>æ·»åŠ æ•°æ®"></a>b&gt;æ·»åŠ æ•°æ®</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (id, name, age, email) <span class="hljs-keyword">VALUES</span><br>(<span class="hljs-number">1</span>, <span class="hljs-string">'Jone'</span>, <span class="hljs-number">18</span>, <span class="hljs-string">'test1@baomidou.com'</span>),<br>(<span class="hljs-number">2</span>, <span class="hljs-string">'Jack'</span>, <span class="hljs-number">20</span>, <span class="hljs-string">'test2@baomidou.com'</span>),<br>(<span class="hljs-number">3</span>, <span class="hljs-string">'Tom'</span>, <span class="hljs-number">28</span>, <span class="hljs-string">'test3@baomidou.com'</span>),<br>(<span class="hljs-number">4</span>, <span class="hljs-string">'Sandy'</span>, <span class="hljs-number">21</span>, <span class="hljs-string">'test4@baomidou.com'</span>),<br>(<span class="hljs-number">5</span>, <span class="hljs-string">'Billie'</span>, <span class="hljs-number">24</span>, <span class="hljs-string">'test5@baomidou.com'</span>);<br></code></pre></td></tr></tbody></table></figure><h3 id="c-gt-å¼•å…¥ä¾èµ–"><a href="#c-gt-å¼•å…¥ä¾èµ–" class="headerlink" title="c>å¼•å…¥ä¾èµ–"></a>c&gt;å¼•å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml">      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!--æ”¹lombokä¾èµ–IDEAå¯èƒ½å·²ç»å†…éƒ¨é›†æˆ--&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h3 id="4-ç¼–å†™ä»£ç "><a href="#4-ç¼–å†™ä»£ç " class="headerlink" title="4.ç¼–å†™ä»£ç "></a>4.ç¼–å†™ä»£ç </h3><h4 id="a-gt-é…ç½®application-yml"><a href="#a-gt-é…ç½®application-yml" class="headerlink" title="a>é…ç½®application.yml"></a>a&gt;é…ç½®<strong>application.yml</strong></h4><p>é¦–å…ˆåœ¨<code>src/resource</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªapplication.ymlæ–‡ä»¶ç„¶åå†™å…¥ä»¥ä¸‹ä»£ç </p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br><span class="hljs-comment"># é…ç½®æ•°æ®æºä¿¡æ¯</span><br>  <span class="hljs-attr">datasource:</span><br>  <span class="hljs-comment"># é…ç½®æ•°æ®æºç±»å‹</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">com.zaxxer.hikari.HikariDataSource</span><br>    <span class="hljs-comment"># é…ç½®è¿æ¥æ•°æ®åº“ä¿¡æ¯</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-comment">#æ³¨æ„è¯¥è·¯å¾„éœ€è¦è‡ªå·±é…ç½®3306/åé¢çš„æ—¶æ•°æ®åº“åå­—</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/db1?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ³¨æ„ï¼ï¼ï¼</p><p>1ã€é©±åŠ¨ç±»driver-class-name</p><p>spring boot 2.0ï¼ˆå†…ç½®jdbc5é©±åŠ¨ï¼‰ï¼Œé©±åŠ¨ç±»ä½¿ç”¨ï¼š</p><p>driver-class-name: com.mysql.jdbc.Driver</p><p>spring boot 2.1åŠä»¥ä¸Šï¼ˆå†…ç½®jdbc8é©±åŠ¨ï¼‰ï¼Œé©±åŠ¨ç±»ä½¿ç”¨ï¼š</p><p>driver-class-name: com.mysql.cj.jdbc.Driver</p><p>å¦åˆ™è¿è¡Œæµ‹è¯•ç”¨ä¾‹çš„æ—¶å€™ä¼šæœ‰ WARN ä¿¡æ¯</p><p>2ã€è¿æ¥åœ°å€url</p><p>MySQL5.7ç‰ˆæœ¬çš„urlï¼š</p><p>jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&amp;useSSL=false</p><p>MySQL8.0ç‰ˆæœ¬çš„urlï¼š</p><p>jdbc:mysql://localhost:3306/mybatis_plus?serverTimezone=GMT%2B8&amp;characterEncoding=utf-8&amp;useSSL=false</p><p>å¦åˆ™è¿è¡Œæµ‹è¯•ç”¨ä¾‹æŠ¥å‘Šå¦‚ä¸‹é”™è¯¯ï¼š</p><p>java.sql.SQLException: The server time zone value â€˜Ã–ÃÂ¹ÃºÂ±ÃªÃ—Â¼ÃŠÂ±Â¼Ã¤â€™ is unrecognized or represents more</p></blockquote><h4 id="b-gt-å¯åŠ¨ç±»"><a href="#b-gt-å¯åŠ¨ç±»" class="headerlink" title="b>å¯åŠ¨ç±»"></a>b&gt;å¯åŠ¨ç±»</h4><blockquote><p>åœ¨Spring Bootå¯åŠ¨ç±»ä¸­æ·»åŠ @MapperScanæ³¨è§£ï¼Œæ‰«æmapperåŒ…</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-comment">//æ‰«æmapperæ¥å£æ‰€åœ¨çš„åŒ…</span><br><span class="hljs-meta">@MapperScan("com.atguigu.mybaitsplus.mapper")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybaitsPlusApplication</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        SpringApplication.run(MybaitsPlusApplication.class, args);<br>    }<br><br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="c-gt-æ·»åŠ å®ä½“"><a href="#c-gt-æ·»åŠ å®ä½“" class="headerlink" title="c>æ·»åŠ å®ä½“"></a>c&gt;æ·»åŠ å®ä½“</h4><p>åœ¨è¯¥ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªpojoçš„æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾å®ä½“ã€ç„¶åå»ºç«‹ä¸€ä¸ªUserç±»å¯¼å…¥ä»¥ä¸‹æ•°æ®</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-comment">//lombokæ³¨è§£ è¯¥æ³¨è§£è‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„getå’Œsetã€hashcodeæ–¹æ³•</span><br><span class="hljs-meta">@Data</span> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {<br>    <span class="hljs-keyword">private</span> Long id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> String email;<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="d-gt-æ·»åŠ mapper"><a href="#d-gt-æ·»åŠ mapper" class="headerlink" title="d>æ·»åŠ mapper"></a>d&gt;æ·»åŠ mapper</h4><blockquote><p>BaseMapperæ˜¯MyBatis-Plusæä¾›çš„æ¨¡æ¿mapperï¼Œå…¶ä¸­åŒ…å«äº†åŸºæœ¬çš„CRUDæ–¹æ³•ï¼Œæ³›å‹ä¸ºæ“ä½œçš„å®ä½“ç±»å‹</p></blockquote><p>é¦–å…ˆåœ¨javaå¯¹åº”çš„ç›®å½•ä¸‹å»ºç«‹ä¸€ä¸ªmapperæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾å„ç§mapperé¡¹ç›®ç»“æ„å›¾å¦‚ä¸‹</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221022144551484.png" alt="image-20221022144551484"></p><p>æ·»åŠ ä¸€ä¸ªUserMapperæ¥å£è®©ä»–ç»§æ‰¿BaseMapperå¯ä»¥æ‹¥æœ‰ä¸€äº›åŸºç¡€çš„CRUDåŠŸèƒ½</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è¿™ä¸ªæ³¨è§£ä½¿å…¶æŒä¹…åŒ– è§£å†³åé¢çš„å•è¯æŠ¥é”™é—®é¢˜ å¯ä»¥ä¸éœ€è¦</span><br><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;User&gt; {<br><br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="d-gt-æµ‹è¯•"><a href="#d-gt-æµ‹è¯•" class="headerlink" title="d>æµ‹è¯•"></a>d&gt;æµ‹è¯•</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//é¦–å…ˆåŠ ä¸ŠSpringBootTestçš„æ³¨è§£</span><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisPlusTest</span> {<br>    <span class="hljs-comment">//å¯¹userMapperè‡ªåŠ¨çš„è£…é…</span><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserMapper userMapper;<br><span class="hljs-comment">//ç¬¬ä¸€ä¸ªæµ‹è¯•æ¡ˆä¾‹æ‰“ä¸Šæ³¨è§£</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectList</span><span class="hljs-params">()</span>{<br>        <span class="hljs-comment">//é€šè¿‡æ¡ä»¶æ„é€ å™¨æŸ¥è¯¢listé›†åˆ</span><br>        List&lt;User&gt; list = userMapper.selectList(<span class="hljs-literal">null</span>);<br>        list.forEach(System.out::println);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="f-gt-æ·»åŠ æ—¥å¿—"><a href="#f-gt-æ·»åŠ æ—¥å¿—" class="headerlink" title="f >æ·»åŠ æ—¥å¿—"></a>f &gt;æ·»åŠ æ—¥å¿—</h4><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">configuration:</span><br>  <span class="hljs-comment">#åŸç”Ÿçš„æ—¥å¿—</span><br>    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span><br></code></pre></td></tr></tbody></table></figure><h1 id="ä¸‰ã€åŸºæœ¬çš„CRUD"><a href="#ä¸‰ã€åŸºæœ¬çš„CRUD" class="headerlink" title="ä¸‰ã€åŸºæœ¬çš„CRUD"></a>ä¸‰ã€åŸºæœ¬çš„CRUD</h1><h3 id="1-BaseMapper"><a href="#1-BaseMapper" class="headerlink" title="1.BaseMapper"></a>1.BaseMapper</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ä»–å·²ç»å¸®æˆ‘é—¨å®ç°äº†ä¸€äº›åŸºç¡€çš„åŠŸèƒ½</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">BaseMapper</span>&lt;T&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Mapper</span>&lt;T&gt; {<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ’å…¥ä¸€æ¡è®°å½•</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> entity å®ä½“å¯¹è±¡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(T entity)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ® ID åˆ é™¤</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id ä¸»é”®ID</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">deleteById</span><span class="hljs-params">(Serializable id)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ®å®ä½“(ID)åˆ é™¤</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> entity å®ä½“å¯¹è±¡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@since</span> 3.4.4</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">deleteById</span><span class="hljs-params">(T entity)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ® columnMap æ¡ä»¶ï¼Œåˆ é™¤è®°å½•</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> columnMap è¡¨å­—æ®µ map å¯¹è±¡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">deleteByMap</span><span class="hljs-params">(<span class="hljs-meta">@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ® entity æ¡ä»¶ï¼Œåˆ é™¤è®°å½•</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º null,é‡Œé¢çš„ entity ç”¨äºç”Ÿæˆ where</span><br><span class="hljs-comment">     *                     è¯­å¥ï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">delete</span><span class="hljs-params">(<span class="hljs-meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ é™¤ï¼ˆæ ¹æ®ID æ‰¹é‡åˆ é™¤ï¼‰</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> idList ä¸»é”®IDåˆ—è¡¨(ä¸èƒ½ä¸º null ä»¥åŠ empty)</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">deleteBatchIds</span><span class="hljs-params">(<span class="hljs-meta">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ® ID ä¿®æ”¹</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> entity å®ä½“å¯¹è±¡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">updateById</span><span class="hljs-params">(<span class="hljs-meta">@Param(Constants.ENTITY)</span> T entity)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ® whereEntity æ¡ä»¶ï¼Œæ›´æ–°è®°å½•</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> entity        å®ä½“å¯¹è±¡ (set æ¡ä»¶å€¼,å¯ä»¥ä¸º null)</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> updateWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º null,é‡Œé¢çš„ entity ç”¨äºç”Ÿæˆ</span><br><span class="hljs-comment">     *                      where è¯­å¥ï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-meta">@Param(Constants.ENTITY)</span> T entity, <span class="hljs-meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; updateWrapper)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ® ID æŸ¥è¯¢</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id ä¸»é”®ID</span><br><span class="hljs-comment">     */</span><br>    T <span class="hljs-title function_">selectById</span><span class="hljs-params">(Serializable id)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŸ¥è¯¢ï¼ˆæ ¹æ®ID æ‰¹é‡æŸ¥è¯¢ï¼‰</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> idList ä¸»é”®IDåˆ—è¡¨(ä¸èƒ½ä¸º null ä»¥åŠ empty)</span><br><span class="hljs-comment">     */</span><br>    List&lt;T&gt; <span class="hljs-title function_">selectBatchIds</span><span class="hljs-params">(<span class="hljs-meta">@Param(Constants.COLLECTION)</span> Collection&lt;? extends Serializable&gt; idList)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŸ¥è¯¢ï¼ˆæ ¹æ® columnMap æ¡ä»¶ï¼‰</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> columnMap è¡¨å­—æ®µ map å¯¹è±¡</span><br><span class="hljs-comment">     */</span><br>    List&lt;T&gt; <span class="hljs-title function_">selectByMap</span><span class="hljs-params">(<span class="hljs-meta">@Param(Constants.COLUMN_MAP)</span> Map&lt;String, Object&gt; columnMap)</span>;<br><br>    <span class="hljs-comment">/*** æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•</span><br><span class="hljs-comment">     * &lt;p&gt;æŸ¥è¯¢ä¸€æ¡è®°å½•ï¼Œä¾‹å¦‚ qw.last("limit 1") é™åˆ¶å–ä¸€æ¡è®°å½•, æ³¨æ„ï¼šå¤šæ¡æ•°æ®ä¼šæŠ¥å¼‚å¸¸</span><br><span class="hljs-comment">     &lt;/p&gt;</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">default</span> T <span class="hljs-title function_">selectOne</span><span class="hljs-params">(<span class="hljs-meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span> {<br>        List&lt;T&gt; ts = <span class="hljs-built_in">this</span>.selectList(queryWrapper);<br>        <span class="hljs-keyword">if</span> (CollectionUtils.isNotEmpty(ts)) {<br>            <span class="hljs-keyword">if</span> (ts.size() != <span class="hljs-number">1</span>) {<br>                <span class="hljs-keyword">throw</span> ExceptionUtils.mpe(<span class="hljs-string">"One record is expected, but the query result is multiple records"</span>);<br>            }<br>            <span class="hljs-keyword">return</span> ts.get(<span class="hljs-number">0</span>);<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢æ€»è®°å½•æ•°</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span><br><span class="hljs-comment">     */</span><br>    Long <span class="hljs-title function_">selectCount</span><span class="hljs-params">(<span class="hljs-meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span><br><span class="hljs-comment">     */</span><br>    List&lt;T&gt; <span class="hljs-title function_">selectList</span><span class="hljs-params">(<span class="hljs-meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span><br><span class="hljs-comment">     */</span><br>    List&lt;Map&lt;String, Object&gt;&gt; <span class="hljs-title function_">selectMaps</span><span class="hljs-params">(<span class="hljs-meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt;</span><br><span class="hljs-params">                                                 queryWrapper)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•</span><br><span class="hljs-comment">     * &lt;p&gt;æ³¨æ„ï¼š åªè¿”å›ç¬¬ä¸€ä¸ªå­—æ®µçš„å€¼&lt;/p&gt;</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span><br><span class="hljs-comment">     */</span><br>    List&lt;Object&gt; <span class="hljs-title function_">selectObjs</span><span class="hljs-params">(<span class="hljs-meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> page         åˆ†é¡µæŸ¥è¯¢æ¡ä»¶ï¼ˆå¯ä»¥ä¸º RowBounds.DEFAULTï¼‰</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»ï¼ˆå¯ä»¥ä¸º nullï¼‰</span><br><span class="hljs-comment">     */</span><br>    &lt;P <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IPage</span>&lt;T&gt;&gt; P <span class="hljs-title function_">selectPage</span><span class="hljs-params">(P page, <span class="hljs-meta">@Param(Constants.WRAPPER)</span></span><br><span class="hljs-params">            Wrapper&lt;T&gt; queryWrapper)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> page         åˆ†é¡µæŸ¥è¯¢æ¡ä»¶</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> queryWrapper å®ä½“å¯¹è±¡å°è£…æ“ä½œç±»</span><br><span class="hljs-comment">     */</span><br>    &lt;P <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IPage</span>&lt;Map&lt;String, Object&gt;&gt;&gt; P <span class="hljs-title function_">selectMapsPage</span><span class="hljs-params">(P page, <span class="hljs-meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;T&gt; queryWrapper)</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="2-æ’å…¥æ“ä½œ"><a href="#2-æ’å…¥æ“ä½œ" class="headerlink" title="2.æ’å…¥æ“ä½œ"></a>2.æ’å…¥æ“ä½œ</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br> <span class="hljs-comment">/**</span><br><span class="hljs-comment">  * å®ç°æ–°å¢ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment">  */</span><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testInsertUser</span><span class="hljs-params">()</span> {<br>     <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>     user.setName(<span class="hljs-string">"å¼ ä¸‰"</span>);<br>     user.setAge(<span class="hljs-number">29</span>);<br>     user.setEmail(<span class="hljs-string">"zhangsan@guigu"</span>);<br>     <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userMapper.insert(user);<br>     System.out.println(result);<br> }<br></code></pre></td></tr></tbody></table></figure><h4 id="2-é€šè¿‡-id-æ‰¹é‡åˆ é™¤è®°å½•"><a href="#2-é€šè¿‡-id-æ‰¹é‡åˆ é™¤è®°å½•" class="headerlink" title="2. é€šè¿‡ id æ‰¹é‡åˆ é™¤è®°å½•"></a><strong>2.</strong> <strong>é€šè¿‡</strong> <strong>id</strong> <strong>æ‰¹é‡åˆ é™¤è®°å½•</strong></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDeleteById</span><span class="hljs-params">()</span> {<br>    <span class="hljs-comment">//åˆ é™¤ä¸€ä¸ª</span><br>    <span class="hljs-comment">// int result = userMapper.deleteById(1583380690149076993L);</span><br>    <span class="hljs-comment">//System.out.println("result="+result);</span><br>    <br>    <span class="hljs-comment">//æ ¹æ®mapåˆ é™¤</span><br>   <span class="hljs-comment">/* Map&lt;String,Object&gt;map=new HashMap&lt;&gt;();</span><br><span class="hljs-comment">    map.put("name","å¼ ä¸‰");</span><br><span class="hljs-comment">    map.put("age","23");</span><br><span class="hljs-comment">    int result = userMapper.deleteByMap(map);</span><br><span class="hljs-comment">    System.out.println("result="+result);</span><br><span class="hljs-comment">    */</span><br>    <span class="hljs-comment">//å®ç°æ‰¹é‡åˆ é™¤</span><br>    List&lt;Long&gt; list = Arrays.asList(<span class="hljs-number">1L</span>, <span class="hljs-number">2L</span>, <span class="hljs-number">3L</span>);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> userMapper.deleteBatchIds(list);<br>    System.out.println(<span class="hljs-string">"result="</span> + i);<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="3-ä¿®æ”¹"><a href="#3-ä¿®æ”¹" class="headerlink" title="3.ä¿®æ”¹"></a>3.ä¿®æ”¹</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdate</span><span class="hljs-params">()</span> {<br>   <span class="hljs-comment">//UPDATE user SET name=?, age=? WHERE id=?</span><br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    user.setId(<span class="hljs-number">4L</span>);<br>    user.setName(<span class="hljs-string">"æå››"</span>);<br>    user.setAge(<span class="hljs-number">23</span>);<br>    user.setEmail(<span class="hljs-string">"lis@quda"</span>);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> userMapper.updateById(user);<br>    System.out.println(<span class="hljs-string">"result="</span> + update);<br>}<br><br></code></pre></td></tr></tbody></table></figure><h4 id="4-æŸ¥è¯¢"><a href="#4-æŸ¥è¯¢" class="headerlink" title="4.æŸ¥è¯¢"></a>4.æŸ¥è¯¢</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectById</span><span class="hljs-params">()</span> {<br>   <span class="hljs-comment">//æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span><br>   <span class="hljs-comment">//SELECT id,name,age,email FROM user WHERE id=?</span><br>       <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userMapper.selectById(<span class="hljs-number">4L</span>);<br>       System.out.println(user);<br>   }<br></code></pre></td></tr></tbody></table></figure><p><strong>æ ¹æ®å¤šä¸ªidæŸ¥è¯¢å¤šä¸ªç”¨æˆ·ä¿¡æ¯</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectBatchIds</span><span class="hljs-params">()</span> {<br>    <span class="hljs-comment">//æ ¹æ®å¤šä¸ªidæŸ¥è¯¢å¤šä¸ªç”¨æˆ·ä¿¡æ¯</span><br>    <span class="hljs-comment">//SELECT id,name,age,email FROM user WHERE id IN ( ? , ? )</span><br>    List&lt;Long&gt; idList = Arrays.asList(<span class="hljs-number">4L</span>, <span class="hljs-number">5L</span>);<br>    List&lt;User&gt; list = userMapper.selectBatchIds(idList);<br>    list.forEach(System.out::println);<br>}<br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectByMap</span><span class="hljs-params">()</span>{<br> <span class="hljs-comment">//é€šè¿‡mapæ¡ä»¶æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span><br> <span class="hljs-comment">//SELECT id,name,age,email FROM user WHERE name = ? AND age = ?</span><br>    Map&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    map.put(<span class="hljs-string">"age"</span>, <span class="hljs-number">22</span>);<br>    map.put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"admin"</span>);<br>    List&lt;User&gt; list = userMapper.selectByMap(map);<br>    list.forEach(System.out::println);<br>}<br></code></pre></td></tr></tbody></table></figure><blockquote><p>é€šè¿‡è§‚å¯ŸBaseMapperä¸­çš„æ–¹æ³•ï¼Œå¤§å¤šæ–¹æ³•ä¸­éƒ½æœ‰Wrapperç±»å‹çš„å½¢å‚ï¼Œæ­¤ä¸ºæ¡ä»¶æ„é€ å™¨ï¼Œå¯é’ˆå¯¹äºSQLè¯­å¥è®¾ç½®ä¸åŒçš„æ¡ä»¶ï¼Œè‹¥æ²¡æœ‰æ¡ä»¶ï¼Œåˆ™å¯ä»¥ä¸ºè¯¥å½¢å‚èµ‹å€¼nullï¼Œå³æŸ¥è¯¢ï¼ˆåˆ é™¤/ä¿®æ”¹ï¼‰æ‰€æœ‰æ•°æ®</p></blockquote><h3 id="5-é€šç”¨çš„Service"><a href="#5-é€šç”¨çš„Service" class="headerlink" title="5.é€šç”¨çš„Service"></a>5.é€šç”¨çš„Service</h3><blockquote><p>è¯´æ˜:</p><p>é€šç”¨ Service CRUD å°è£…IServiceæ¥å£ï¼Œè¿›ä¸€æ­¥å°è£… CRUD é‡‡ç”¨ get æŸ¥è¯¢å•è¡Œ remove åˆ é™¤ list æŸ¥è¯¢é›†åˆ page åˆ†é¡µ å‰ç¼€å‘½åæ–¹å¼åŒºåˆ† Mapper å±‚é¿å…æ··æ·†ï¼Œæ³›å‹ T ä¸ºä»»æ„å®ä½“å¯¹è±¡å»ºè®®å¦‚æœå­˜åœ¨è‡ªå®šä¹‰é€šç”¨ Service æ–¹æ³•çš„å¯èƒ½ï¼Œè¯·åˆ›å»ºè‡ªå·±çš„ IBaseService ç»§æ‰¿Mybatis-Plus æä¾›çš„åŸºç±»</p><p>å®˜ç½‘åœ°å€ï¼š<a href="https://baomidou.com/pages/49cc81/#service-crud-%E6%8E%A5%E5%8F%A3">https://baomidou.com/pages/49cc81/#service-crud-%E6%8E%A5%E5%8F%A3</a></p></blockquote><h4 id="a-gt-IService"><a href="#a-gt-IService" class="headerlink" title="a>IService"></a><strong>a&gt;IService</strong></h4><p>MyBatis-Plusä¸­æœ‰ä¸€ä¸ªæ¥å£ IServiceå’Œå…¶å®ç°ç±» ServiceImplï¼Œå°è£…äº†å¸¸è§çš„ä¸šåŠ¡å±‚é€»è¾‘è¯¦æƒ…æŸ¥çœ‹æºç IServiceå’ŒServiceImpl</p><h4 id="b-gt-åˆ›å»º-Service-æ¥å£å’Œå®ç°ç±»"><a href="#b-gt-åˆ›å»º-Service-æ¥å£å’Œå®ç°ç±»" class="headerlink" title="b> åˆ›å»º Service æ¥å£å’Œå®ç°ç±»"></a><strong>b&gt;</strong> <strong>åˆ›å»º</strong> <strong>Service</strong> <strong>æ¥å£å’Œå®ç°ç±»</strong></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* UserServiceç»§æ‰¿IServiceæ¨¡æ¿æä¾›çš„åŸºç¡€åŠŸèƒ½</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IService</span>&lt;User&gt; {<br>}<br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* ServiceImplå®ç°äº†IServiceï¼Œæä¾›äº†IServiceä¸­åŸºç¡€åŠŸèƒ½çš„å®ç°</span><br><span class="hljs-comment">* è‹¥ServiceImplæ— æ³•æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è‡ªå®šçš„UserServiceå®šä¹‰æ–¹æ³•ï¼Œå¹¶åœ¨å®ç°ç±»ä¸­å®ç°</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;UserMapper,User&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> {<br>}<br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221022150748320.png" alt="image-20221022150748320"></p><h4 id="c-gt-æµ‹è¯•æŸ¥è¯¢è®°å½•æ•°"><a href="#c-gt-æµ‹è¯•æŸ¥è¯¢è®°å½•æ•°" class="headerlink" title="c> æµ‹è¯•æŸ¥è¯¢è®°å½•æ•°"></a><strong>c&gt;</strong> <strong>æµ‹è¯•æŸ¥è¯¢è®°å½•æ•°</strong></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br> <span class="hljs-keyword">private</span> UserService userService;<br> <span class="hljs-meta">@Test</span><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGetCount</span><span class="hljs-params">()</span>{<br>     <span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> userService.count();<br>     System.out.println(<span class="hljs-string">"æ€»è®°å½•æ•°ï¼š"</span> + count);<br> }<br></code></pre></td></tr></tbody></table></figure><h4 id="d-gt-æµ‹è¯•æ‰¹é‡æ’å…¥"><a href="#d-gt-æµ‹è¯•æ‰¹é‡æ’å…¥" class="headerlink" title="d> æµ‹è¯•æ‰¹é‡æ’å…¥"></a><strong>d&gt;</strong> <strong>æµ‹è¯•æ‰¹é‡æ’å…¥</strong></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java">   <span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSaveBatch</span><span class="hljs-params">()</span> {<br><span class="hljs-comment">// SQLé•¿åº¦æœ‰é™åˆ¶ï¼Œæµ·é‡æ•°æ®æ’å…¥å•æ¡SQLæ— æ³•å®è¡Œï¼Œ</span><br><span class="hljs-comment">// å› æ­¤MPå°†æ‰¹é‡æ’å…¥æ”¾åœ¨äº†é€šç”¨Serviceä¸­å®ç°ï¼Œè€Œä¸æ˜¯é€šç”¨Mapper</span><br>       ArrayList&lt;User&gt; users = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>       <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {<br>           <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>           user.setName(<span class="hljs-string">"ybc"</span> + i);<br>           user.setAge(<span class="hljs-number">20</span> + i);<br>           users.add(user);<br>       }<br>   <span class="hljs-comment">//SQL:INSERT INTO t_user ( username, age ) VALUES ( ?, ? )</span><br>       userService.saveBatch(users);<br>   }<br></code></pre></td></tr></tbody></table></figure><h1 id="å››ã€å¸¸ç”¨æ³¨è§£"><a href="#å››ã€å¸¸ç”¨æ³¨è§£" class="headerlink" title="å››ã€å¸¸ç”¨æ³¨è§£"></a><strong>å››ã€å¸¸ç”¨æ³¨è§£</strong></h1><h3 id="1-ã€-TableName"><a href="#1-ã€-TableName" class="headerlink" title="1 ã€ @TableName"></a><strong>1</strong> <strong>ã€</strong> <strong>@TableName</strong></h3><blockquote><p>ç»è¿‡ä»¥ä¸Šçš„æµ‹è¯•ï¼Œåœ¨ä½¿ç”¨MyBatis-Pluså®ç°åŸºæœ¬çš„CRUDæ—¶ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æŒ‡å®šè¦æ“ä½œçš„è¡¨ï¼Œåªæ˜¯åœ¨Mapperæ¥å£ç»§æ‰¿BaseMapperæ—¶ï¼Œè®¾ç½®äº†æ³›å‹Userï¼Œè€Œæ“ä½œçš„è¡¨ä¸ºuserè¡¨</p><p>ç”±æ­¤å¾—å‡ºç»“è®ºï¼ŒMyBatis-Plusåœ¨ç¡®å®šæ“ä½œçš„è¡¨æ—¶ï¼Œç”±BaseMapperçš„æ³›å‹å†³å®šï¼Œå³å®ä½“ç±»å‹å†³å®šï¼Œä¸”é»˜è®¤æ“ä½œçš„è¡¨åå’Œå®ä½“ç±»å‹çš„ç±»åä¸€è‡´</p></blockquote><p>ä¸ºäº†è§£å†³å®ä½“ç±»ç±»å‹çš„ç±»åå’Œè¦æ“ä½œçš„è¡¨çš„è¡¨åä¸ä¸€è‡´ï¼š<strong>é€šè¿‡</strong> <strong>@TableName</strong> <strong>è§£å†³é—®é¢˜</strong></p><blockquote><p>åœ¨å®ä½“ç±»ç±»å‹ä¸Šæ·»åŠ @TableName(â€œt_userâ€)ï¼Œæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨ï¼Œå³å¯æˆåŠŸæ‰§è¡ŒSQLè¯­å¥ //æ‹¬å·å†…æ˜¯è¦åŠ å…¥çš„æŒ‡å®šæ•°æ®åº“è¡¨å</p></blockquote><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221022151456161.png" alt="image-20221022151456161"></p><h4 id="c-gt-é€šè¿‡å…¨å±€é…ç½®è§£å†³é—®é¢˜"><a href="#c-gt-é€šè¿‡å…¨å±€é…ç½®è§£å†³é—®é¢˜" class="headerlink" title="c>é€šè¿‡å…¨å±€é…ç½®è§£å†³é—®é¢˜"></a>c&gt;é€šè¿‡å…¨å±€é…ç½®è§£å†³é—®é¢˜</h4><blockquote><p>åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°ä»¥ä¸Šçš„é—®é¢˜ï¼Œå³å®ä½“ç±»æ‰€å¯¹åº”çš„è¡¨éƒ½æœ‰å›ºå®šçš„å‰ç¼€ï¼Œä¾‹å¦‚t<em> æˆ–tbl</em> æ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨MyBatis-Plusæä¾›çš„å…¨å±€é…ç½®ï¼Œä¸ºå®ä½“ç±»æ‰€å¯¹åº”çš„è¡¨åè®¾ç½®é»˜è®¤çš„å‰ç¼€ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦åœ¨æ¯ä¸ªå®ä½“ç±»ä¸Šé€šè¿‡@TableNameæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨</p></blockquote><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-comment"># é…ç½®MyBatis-Plusæ“ä½œè¡¨çš„é»˜è®¤å‰ç¼€</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">table-prefix:</span> <span class="hljs-string">t_</span><br></code></pre></td></tr></tbody></table></figure><h3 id="2-ã€-TableId"><a href="#2-ã€-TableId" class="headerlink" title="2 ã€ @TableId"></a><strong>2</strong> <strong>ã€</strong> <strong>@TableId</strong></h3><h4 id="b-gt-é€šè¿‡-TableId-è§£å†³ä¸»é”®ä¸æ˜¯idçš„é—®é¢˜"><a href="#b-gt-é€šè¿‡-TableId-è§£å†³ä¸»é”®ä¸æ˜¯idçš„é—®é¢˜" class="headerlink" title="b> é€šè¿‡ @TableId è§£å†³ä¸»é”®ä¸æ˜¯idçš„é—®é¢˜"></a><strong>b&gt;</strong> <strong>é€šè¿‡</strong> <strong>@TableId</strong> <strong>è§£å†³ä¸»é”®ä¸æ˜¯idçš„é—®é¢˜</strong></h4><p>ç»è¿‡ä»¥ä¸Šçš„æµ‹è¯•ï¼ŒMyBatis-Plusåœ¨å®ç°CRUDæ—¶ï¼Œä¼šé»˜è®¤å°†idä½œä¸ºä¸»é”®åˆ—ï¼Œå¹¶åœ¨æ’å…¥æ•°æ®æ—¶ï¼Œé»˜è®¤åŸºäºé›ªèŠ±ç®—æ³•çš„ç­–ç•¥ç”Ÿæˆid</p><blockquote><p>åœ¨å®ä½“ç±»ä¸­uidå±æ€§ä¸Šé€šè¿‡@TableIdå°†å…¶æ ‡è¯†ä¸ºä¸»é”®ï¼Œå³å¯æˆåŠŸæ‰§è¡ŒSQLè¯­å¥</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span> <span class="hljs-comment">//lombokæ³¨è§£</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {<br>    <span class="hljs-meta">@TableId</span><br>    <span class="hljs-keyword">private</span> Long id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> String email;<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="c-gt-TableId-çš„-value-å±æ€§"><a href="#c-gt-TableId-çš„-value-å±æ€§" class="headerlink" title="c>@TableId çš„ value å±æ€§"></a><strong>c&gt;@TableId</strong> <strong>çš„</strong> <strong>value</strong> <strong>å±æ€§</strong></h4><blockquote><p>è‹¥å®ä½“ç±»ä¸­ä¸»é”®å¯¹åº”çš„å±æ€§ä¸ºidï¼Œè€Œè¡¨ä¸­è¡¨ç¤ºä¸»é”®çš„å­—æ®µä¸ºuidï¼Œæ­¤æ—¶è‹¥åªåœ¨å±æ€§idä¸Šæ·»åŠ æ³¨è§£@TableIdï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸Unknown column â€˜idâ€™ in â€˜field listâ€™ï¼Œå³MyBatis-Plusä»ç„¶ä¼šå°†idä½œä¸ºè¡¨çš„ä¸»é”®æ“ä½œï¼Œè€Œè¡¨ä¸­è¡¨ç¤ºä¸»é”®çš„æ˜¯å­—æ®µuidæ­¤æ—¶éœ€è¦é€šè¿‡@TableIdæ³¨è§£çš„valueå±æ€§ï¼ŒæŒ‡å®šè¡¨ä¸­çš„ä¸»é”®å­—æ®µï¼Œ@TableId(â€œuidâ€)æˆ–@TableId(value=â€uidâ€)</p></blockquote><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221022152333945.png" alt="image-20221022152333945"></p><p><strong>é…ç½®å…¨å±€ä¸»é”®ç­–ç•¥ï¼š</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-comment"># é…ç½®MyBatis-Plusæ“ä½œè¡¨çš„é»˜è®¤å‰ç¼€</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">table-prefix:</span> <span class="hljs-string">t_</span><br>      <span class="hljs-comment"># é…ç½®MyBatis-Plusçš„ä¸»é”®ç­–ç•¥</span><br>      <span class="hljs-attr">id-type:</span> <span class="hljs-string">auto</span><br></code></pre></td></tr></tbody></table></figure><h3 id="3-TableField"><a href="#3-TableField" class="headerlink" title="3.TableField"></a>3.TableField</h3><p>ç»è¿‡ä»¥ä¸Šçš„æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒMyBatis-Plusåœ¨æ‰§è¡ŒSQLè¯­å¥æ—¶ï¼Œè¦ä¿è¯å®ä½“ç±»ä¸­çš„å±æ€§åå’Œè¡¨ä¸­çš„å­—æ®µåä¸€è‡´</p><h4 id="a-gt-æƒ…å†µ-1"><a href="#a-gt-æƒ…å†µ-1" class="headerlink" title="a> æƒ…å†µ 1"></a><strong>a&gt;</strong> <strong>æƒ…å†µ</strong> <strong>1</strong></h4><blockquote><p>è‹¥å®ä½“ç±»ä¸­çš„å±æ€§ä½¿ç”¨çš„æ˜¯é©¼å³°å‘½åé£æ ¼ï¼Œè€Œè¡¨ä¸­çš„å­—æ®µä½¿ç”¨çš„æ˜¯ä¸‹åˆ’çº¿å‘½åé£æ ¼ä¾‹å¦‚å®ä½“ç±»å±æ€§userNameï¼Œè¡¨ä¸­å­—æ®µuser_nameæ­¤æ—¶MyBatis-Plusä¼šè‡ªåŠ¨å°†ä¸‹åˆ’çº¿å‘½åé£æ ¼è½¬åŒ–ä¸ºé©¼å³°å‘½åé£æ ¼ç›¸å½“äºåœ¨MyBatisä¸­é…ç½®</p></blockquote><h4 id="b-gt-æƒ…å†µ-2"><a href="#b-gt-æƒ…å†µ-2" class="headerlink" title="b> æƒ…å†µ 2"></a><strong>b&gt;</strong> <strong>æƒ…å†µ</strong> <strong>2</strong></h4><blockquote><p>è‹¥å®ä½“ç±»ä¸­çš„å±æ€§å’Œè¡¨ä¸­çš„å­—æ®µä¸æ»¡è¶³æƒ…å†µ1ä¾‹å¦‚å®ä½“ç±»å±æ€§nameï¼Œè¡¨ä¸­å­—æ®µusernameæ­¤æ—¶éœ€è¦åœ¨å®ä½“ç±»å±æ€§ä¸Šä½¿ç”¨@TableField(â€œusernameâ€)è®¾ç½®å±æ€§æ‰€å¯¹åº”çš„å­—æ®µå</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span> <span class="hljs-comment">//lombokæ³¨è§£</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {<br>    <span class="hljs-meta">@TableId</span><br>    <span class="hljs-keyword">private</span> Long id;<br>    <span class="hljs-meta">@TableField("username")</span><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> String email;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="4-ã€-TableLogic"><a href="#4-ã€-TableLogic" class="headerlink" title="4 ã€ @TableLogic"></a><strong>4</strong> <strong>ã€</strong> <strong>@TableLogic</strong></h3><p>è¯´æ˜:</p><p>åªå¯¹è‡ªåŠ¨æ³¨å…¥çš„ sql èµ·æ•ˆ:</p><ul><li>æ’å…¥: ä¸ä½œé™åˆ¶</li><li>æŸ¥æ‰¾: è¿½åŠ  where æ¡ä»¶è¿‡æ»¤æ‰å·²åˆ é™¤æ•°æ®,å¦‚æœä½¿ç”¨ wrapper.entity ç”Ÿæˆçš„ where æ¡ä»¶ä¹Ÿä¼šè‡ªåŠ¨è¿½åŠ è¯¥å­—æ®µ</li><li>æ›´æ–°: è¿½åŠ  where æ¡ä»¶é˜²æ­¢æ›´æ–°åˆ°å·²åˆ é™¤æ•°æ®,å¦‚æœä½¿ç”¨ wrapper.entity ç”Ÿæˆçš„ where æ¡ä»¶ä¹Ÿä¼šè‡ªåŠ¨è¿½åŠ è¯¥å­—æ®µ</li><li>åˆ é™¤: è½¬å˜ä¸º æ›´æ–°</li></ul><p>ä¾‹å¦‚:</p><ul><li>åˆ é™¤: <code>update user set deleted=1 where id = 1 and deleted=0</code></li><li>æŸ¥æ‰¾: <code>select id,name,deleted from user where deleted=0</code></li></ul><p>å­—æ®µç±»å‹æ”¯æŒè¯´æ˜:</p><ul><li>æ”¯æŒæ‰€æœ‰æ•°æ®ç±»å‹(æ¨èä½¿ç”¨ <code>Integer</code>,<code>Boolean</code>,<code>LocalDateTime</code>)</li><li>å¦‚æœæ•°æ®åº“å­—æ®µä½¿ç”¨<code>datetime</code>,é€»è¾‘æœªåˆ é™¤å€¼å’Œå·²åˆ é™¤å€¼æ”¯æŒé…ç½®ä¸ºå­—ç¬¦ä¸²<code>null</code>,å¦ä¸€ä¸ªå€¼æ”¯æŒé…ç½®ä¸ºå‡½æ•°æ¥è·å–å€¼å¦‚<code>now()</code></li></ul><p>é™„å½•:</p><ul><li>é€»è¾‘åˆ é™¤æ˜¯ä¸ºäº†æ–¹ä¾¿æ•°æ®æ¢å¤å’Œä¿æŠ¤æ•°æ®æœ¬èº«ä»·å€¼ç­‰ç­‰çš„ä¸€ç§æ–¹æ¡ˆï¼Œä½†å®é™…å°±æ˜¯åˆ é™¤ã€‚</li><li>å¦‚æœä½ éœ€è¦é¢‘ç¹æŸ¥å‡ºæ¥çœ‹å°±ä¸åº”ä½¿ç”¨é€»è¾‘åˆ é™¤ï¼Œè€Œæ˜¯ä»¥ä¸€ä¸ªçŠ¶æ€å»è¡¨ç¤ºã€‚</li></ul><h4 id="1-ä½¿ç”¨æ–¹æ³•é…ç½®application-ymlæ–‡ä»¶"><a href="#1-ä½¿ç”¨æ–¹æ³•é…ç½®application-ymlæ–‡ä»¶" class="headerlink" title="1.ä½¿ç”¨æ–¹æ³•é…ç½®application.ymlæ–‡ä»¶"></a>1.ä½¿ç”¨æ–¹æ³•é…ç½®application.ymlæ–‡ä»¶</h4><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">logic-delete-field:</span> <span class="hljs-string">flag</span> <span class="hljs-comment"># å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå(since 3.3.0,é…ç½®åå¯ä»¥å¿½ç•¥ä¸é…ç½®æ­¥éª¤2)</span><br>      <span class="hljs-attr">logic-delete-value:</span> <span class="hljs-number">1</span> <span class="hljs-comment"># é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)</span><br>      <span class="hljs-attr">logic-not-delete-value:</span> <span class="hljs-number">0</span> <span class="hljs-comment"># é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)</span><br></code></pre></td></tr></tbody></table></figure><h4 id="2-å®ä½“ç±»å­—æ®µä¸ŠåŠ ä¸Š-TableLogicæ³¨è§£"><a href="#2-å®ä½“ç±»å­—æ®µä¸ŠåŠ ä¸Š-TableLogicæ³¨è§£" class="headerlink" title="2.å®ä½“ç±»å­—æ®µä¸ŠåŠ ä¸Š@TableLogicæ³¨è§£"></a>2.å®ä½“ç±»å­—æ®µä¸ŠåŠ ä¸Š<code>@TableLogic</code>æ³¨è§£</h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@TableLogic</span><br><span class="hljs-keyword">private</span> Integer deleted;<br></code></pre></td></tr></tbody></table></figure><h1 id="äº”ã€æ¡ä»¶æ„é€ å™¨å’Œå¸¸ç”¨æ¥å£"><a href="#äº”ã€æ¡ä»¶æ„é€ å™¨å’Œå¸¸ç”¨æ¥å£" class="headerlink" title="äº”ã€æ¡ä»¶æ„é€ å™¨å’Œå¸¸ç”¨æ¥å£"></a><strong>äº”ã€æ¡ä»¶æ„é€ å™¨å’Œå¸¸ç”¨æ¥å£</strong></h1><h3 id="1-ã€-wapper-ä»‹ç»"><a href="#1-ã€-wapper-ä»‹ç»" class="headerlink" title="1 ã€ wapper ä»‹ç»"></a><strong>1</strong> <strong>ã€</strong> <strong>wapper</strong> <strong>ä»‹ç»</strong></h3><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221022153506737.png" alt="image-20221022153506737"></p><ul><li>Wrapper ï¼š æ¡ä»¶æ„é€ æŠ½è±¡ç±»ï¼Œæœ€é¡¶ç«¯çˆ¶ç±»<ul><li>AbstractWrapper ï¼š ç”¨äºæŸ¥è¯¢æ¡ä»¶å°è£…ï¼Œç”Ÿæˆ sql çš„ where æ¡ä»¶<ul><li>QueryWrapper ï¼š æŸ¥è¯¢æ¡ä»¶å°è£…</li><li>UpdateWrapper ï¼š Update æ¡ä»¶å°è£…</li><li>AbstractLambdaWrapper ï¼š ä½¿ç”¨Lambda è¯­æ³•<ul><li>LambdaQueryWrapper ï¼šç”¨äºLambdaè¯­æ³•ä½¿ç”¨çš„æŸ¥è¯¢Wrapper</li><li>LambdaUpdateWrapper ï¼š Lambda æ›´æ–°å°è£…Wrapper</li></ul></li></ul></li></ul></li></ul><h3 id="2-ã€-QueryWrapper"><a href="#2-ã€-QueryWrapper" class="headerlink" title="2 ã€ QueryWrapper"></a><strong>2</strong> <strong>ã€</strong> <strong>QueryWrapper</strong></h3><h4 id="a-gt-ä¾‹-1-ï¼šç»„è£…æŸ¥è¯¢æ¡ä»¶"><a href="#a-gt-ä¾‹-1-ï¼šç»„è£…æŸ¥è¯¢æ¡ä»¶" class="headerlink" title="a> ä¾‹ 1 ï¼šç»„è£…æŸ¥è¯¢æ¡ä»¶"></a><strong>a&gt;</strong> <strong>ä¾‹</strong> <strong>1</strong> <strong>ï¼šç»„è£…æŸ¥è¯¢æ¡ä»¶</strong></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">  <span class="hljs-meta">@Autowired</span><br>  <span class="hljs-keyword">private</span> UserMapper userMapper;<br>  <span class="hljs-meta">@Test</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectTest</span><span class="hljs-params">()</span>{<br>      <span class="hljs-comment">//æŸ¥è¯¢ç”¨æˆ·ååŒ…å«aï¼Œå¹´é¾„åœ¨20åˆ°30ä¹‹é—´ï¼Œå¹¶ä¸”é‚®ç®±ä¸ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯</span><br><span class="hljs-comment">//SELECT id,username AS name,age,email,is_deleted FROM t_user WHEREis_deleted=0 AND (username LIKE ? AND age BETWEEN ? AND ? AND email IS NOT NULL)</span><br>      QueryWrapper&lt;User&gt; queryWrapper=<span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;User&gt;();<br>      queryWrapper.like(<span class="hljs-string">"name"</span>,<span class="hljs-string">"a"</span>).between(<span class="hljs-string">"age"</span>,<span class="hljs-number">18</span>,<span class="hljs-number">30</span>).isNotNull(<span class="hljs-string">"email"</span>);<br>      List&lt;User&gt; list = userMapper.selectList(queryWrapper);<br>      list.forEach(System.out::println);<br>  }<br></code></pre></td></tr></tbody></table></figure><h4 id="b-gt-ä¾‹-2-ï¼šç»„è£…æ’åºæ¡ä»¶"><a href="#b-gt-ä¾‹-2-ï¼šç»„è£…æ’åºæ¡ä»¶" class="headerlink" title="b> ä¾‹ 2 ï¼šç»„è£…æ’åºæ¡ä»¶"></a><strong>b&gt;</strong> <strong>ä¾‹</strong> <strong>2</strong> <strong>ï¼šç»„è£…æ’åºæ¡ä»¶</strong></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java">    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSort</span><span class="hljs-params">()</span>{<br>        <span class="hljs-comment">//æŒ‰å¹´é¾„é™åºæŸ¥è¯¢ç”¨æˆ·ï¼Œå¦‚æœå¹´é¾„ç›¸åŒåˆ™æŒ‰idå‡åºæ’åˆ—</span><br><span class="hljs-comment">//SELECT id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 ORDER BY age DESC,id ASC</span><br>        QueryWrapper&lt;User&gt; queryWrapper=<span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br>        queryWrapper.orderByDesc(<span class="hljs-string">"age"</span>).orderByAsc(<span class="hljs-string">"id"</span>);<br>        List&lt;User&gt; list = userMapper.selectList(queryWrapper);<br>        list.forEach(System.out::println);<br>    }<br></code></pre></td></tr></tbody></table></figure><h4 id="c-gt-ä¾‹-3-ï¼šç»„è£…åˆ é™¤æ¡ä»¶"><a href="#c-gt-ä¾‹-3-ï¼šç»„è£…åˆ é™¤æ¡ä»¶" class="headerlink" title="c> ä¾‹ 3 ï¼šç»„è£…åˆ é™¤æ¡ä»¶"></a><strong>c&gt;</strong> <strong>ä¾‹</strong> <strong>3</strong> <strong>ï¼šç»„è£…åˆ é™¤æ¡ä»¶</strong></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test03</span><span class="hljs-params">()</span> {<br><span class="hljs-comment">//åˆ é™¤emailä¸ºç©ºçš„ç”¨æˆ·</span><br><span class="hljs-comment">//DELETE FROM t_user WHERE (email IS NULL)</span><br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br>    queryWrapper.isNull(<span class="hljs-string">"email"</span>);<br><span class="hljs-comment">//æ¡ä»¶æ„é€ å™¨ä¹Ÿå¯ä»¥æ„å»ºåˆ é™¤è¯­å¥çš„æ¡ä»¶</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userMapper.delete(queryWrapper);<br>    System.out.println(<span class="hljs-string">"å—å½±å“çš„è¡Œæ•°ï¼š"</span> + result);<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="d-gt-ä¾‹-4-ï¼šæ¡ä»¶çš„ä¼˜å…ˆçº§"><a href="#d-gt-ä¾‹-4-ï¼šæ¡ä»¶çš„ä¼˜å…ˆçº§" class="headerlink" title="d> ä¾‹ 4 ï¼šæ¡ä»¶çš„ä¼˜å…ˆçº§"></a><strong>d&gt;</strong> <strong>ä¾‹</strong> <strong>4</strong> <strong>ï¼šæ¡ä»¶çš„ä¼˜å…ˆçº§</strong></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdate</span><span class="hljs-params">()</span> {<br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br>    <span class="hljs-comment">//å¹´é¾„å¤§äº20ä¸”åŒ…å«a æˆ–è€…é‚®ç®±ä¸ºnullçš„ä¿®æ”¹</span><br>    queryWrapper<br>            .gt(<span class="hljs-string">"age"</span>, <span class="hljs-number">20</span>)<br>            .like(<span class="hljs-string">"name"</span>, <span class="hljs-string">"a"</span>)<br>            .or()<br>            .isNull(<span class="hljs-string">"email"</span>);<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    user.setName(<span class="hljs-string">"LYC"</span>);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> userMapper.update(user, queryWrapper);<br>    System.out.println(update);<br>}<br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å°†ç”¨æˆ·ååŒ…å«Bå¹¶ä¸”ï¼ˆå¹´é¾„å¤§äº20æˆ–è€…é‚®ç®±ä¸ºç©ºçš„ï¼‰ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹</span><br><span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdate2</span><span class="hljs-params">()</span> {<br>       QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br>       queryWrapper<br>               .like(<span class="hljs-string">"name"</span>, <span class="hljs-string">"B"</span>)<br>               .and(i -&gt; i<br>                       .gt(<span class="hljs-string">"age"</span>, <span class="hljs-number">20</span>)<br>                       .or()<br>                       .isNull(<span class="hljs-string">"email"</span>)<br>               );<br>       <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>       user.setName(<span class="hljs-string">"ç‹äº”"</span>);<br>       <span class="hljs-type">int</span> <span class="hljs-variable">update</span> <span class="hljs-operator">=</span> userMapper.update(user, queryWrapper);<br>       System.out.println(<span class="hljs-string">"result="</span> + update);<br>   }<br></code></pre></td></tr></tbody></table></figure><h4 id="e-gt-ä¾‹-5-ï¼šç»„è£…-select-å­å¥"><a href="#e-gt-ä¾‹-5-ï¼šç»„è£…-select-å­å¥" class="headerlink" title="e> ä¾‹ 5 ï¼šç»„è£… select å­å¥"></a><strong>e&gt;</strong> <strong>ä¾‹</strong> <strong>5</strong> <strong>ï¼šç»„è£…</strong> <strong>select</strong> <strong>å­å¥</strong></h4><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"> <span class="hljs-comment">//æŸ¥è¯¢ç”¨æˆ·çš„å¹´é¾„é‚®ç®±å’Œå§“å</span><br>  <span class="hljs-meta">@Test</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">selectTest</span><span class="hljs-params">()</span> {<br>      <span class="hljs-comment">//æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„usernameå’Œageå­—æ®µ</span><br><span class="hljs-comment">//SELECT username,age FROM t_user</span><br>      QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br>      queryWrapper.select(<span class="hljs-string">"name"</span>, <span class="hljs-string">"age"</span>);<br>      <span class="hljs-comment">//selectMaps()è¿”å›Mapé›†åˆåˆ—è¡¨ï¼Œé€šå¸¸é…åˆselect()ä½¿ç”¨ï¼Œé¿å…Userå¯¹è±¡ä¸­æ²¡æœ‰è¢«æŸ¥è¯¢åˆ°çš„åˆ—å€¼ä¸ºnull</span><br>      List&lt;Map&lt;String, Object&gt;&gt; maps = userMapper.selectMaps(queryWrapper);<br>      maps.forEach(System.out::println);<br>  }<br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// f&gt;ä¾‹6ï¼šå®ç°å­æŸ¥è¯¢</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test06</span><span class="hljs-params">()</span> {<br> <span class="hljs-comment">//æŸ¥è¯¢idå°äºç­‰äº3çš„ç”¨æˆ·ä¿¡æ¯</span><br> <span class="hljs-comment">//SELECT id,username AS name,age,email,is_deleted FROM t_user WHERE (id IN(select id from t_user where id &lt;= 3))</span><br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br>    queryWrapper.inSql(<span class="hljs-string">"id"</span>, <span class="hljs-string">"select id from t_user where id &lt;= 3"</span>);<br>    List&lt;User&gt; list = userMapper.selectList(queryWrapper);<br>    list.forEach(System.out::println);<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="3-ã€-UpdateWrapper"><a href="#3-ã€-UpdateWrapper" class="headerlink" title="3 ã€ UpdateWrapper"></a><strong>3</strong> <strong>ã€</strong> <strong>UpdateWrapper</strong></h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test07</span><span class="hljs-params">()</span> {<br><span class="hljs-comment">//å°†ï¼ˆå¹´é¾„å¤§äº20æˆ–é‚®ç®±ä¸ºnullï¼‰å¹¶ä¸”ç”¨æˆ·åä¸­åŒ…å«æœ‰açš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹</span><br><span class="hljs-comment">//ç»„è£…setå­å¥ä»¥åŠä¿®æ”¹æ¡ä»¶</span><br>    UpdateWrapper&lt;User&gt; updateWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateWrapper</span>&lt;&gt;();<br><span class="hljs-comment">//lambdaè¡¨è¾¾å¼å†…çš„é€»è¾‘ä¼˜å…ˆè¿ç®—</span><br>    updateWrapper<br>            .set(<span class="hljs-string">"age"</span>, <span class="hljs-number">18</span>)<br>            .set(<span class="hljs-string">"email"</span>, <span class="hljs-string">"user@atguigu.com"</span>)<br>            .like(<span class="hljs-string">"username"</span>, <span class="hljs-string">"a"</span>)<br>            .and(i -&gt; i.gt(<span class="hljs-string">"age"</span>, <span class="hljs-number">20</span>).or().isNull(<span class="hljs-string">"email"</span>));<br><span class="hljs-comment">//è¿™é‡Œå¿…é¡»è¦åˆ›å»ºUserå¯¹è±¡ï¼Œå¦åˆ™æ— æ³•åº”ç”¨è‡ªåŠ¨å¡«å……ã€‚å¦‚æœæ²¡æœ‰è‡ªåŠ¨å¡«å……ï¼Œå¯ä»¥è®¾ç½®ä¸ºnull</span><br><span class="hljs-comment">//UPDATE t_user SET username=?, age=?,email=? WHERE (username LIKE ? AND(age &gt; ? OR email IS NULL))</span><br><span class="hljs-comment">//User user = new User();</span><br><span class="hljs-comment">//user.setName("å¼ ä¸‰");</span><br>    <span class="hljs-comment">//int result = userMapper.update(user, updateWrapper);</span><br><span class="hljs-comment">//UPDATE t_user SET age=?,email=? WHERE (username LIKE ? AND (age &gt; ? ORemail IS NULL))</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> userMapper.update(<span class="hljs-literal">null</span>, updateWrapper);<br>    System.out.println(result);<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="4-ã€-condition"><a href="#4-ã€-condition" class="headerlink" title="4 ã€ condition"></a><strong>4</strong> <strong>ã€</strong> <strong>condition</strong></h3><blockquote><p>åœ¨çœŸæ­£å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œç»„è£…æ¡ä»¶æ˜¯å¸¸è§çš„åŠŸèƒ½ï¼Œè€Œè¿™äº›æ¡ä»¶æ•°æ®æ¥æºäºç”¨æˆ·è¾“å…¥ï¼Œæ˜¯å¯é€‰çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ç»„è£…è¿™äº›æ¡ä»¶æ—¶ï¼Œå¿…é¡»å…ˆåˆ¤æ–­ç”¨æˆ·æ˜¯å¦é€‰æ‹©äº†è¿™äº›æ¡ä»¶ï¼Œè‹¥é€‰æ‹©åˆ™éœ€è¦ç»„è£…è¯¥æ¡ä»¶ï¼Œè‹¥æ²¡æœ‰é€‰æ‹©åˆ™ä¸€å®šä¸èƒ½ç»„è£…ï¼Œä»¥å…å½±å“SQLæ‰§è¡Œçš„ç»“æœ</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java">   <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test08UseCondition</span><span class="hljs-params">()</span> {<br><span class="hljs-comment">//å®šä¹‰æŸ¥è¯¢æ¡ä»¶ï¼Œæœ‰å¯èƒ½ä¸ºnullï¼ˆç”¨æˆ·æœªè¾“å…¥æˆ–æœªé€‰æ‹©ï¼‰</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">ageBegin</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>        <span class="hljs-type">Integer</span> <span class="hljs-variable">ageEnd</span> <span class="hljs-operator">=</span> <span class="hljs-number">24</span>;<br>        QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br><span class="hljs-comment">//StringUtils.isNotBlank()åˆ¤æ–­æŸå­—ç¬¦ä¸²æ˜¯å¦ä¸ä¸ºç©ºä¸”é•¿åº¦ä¸ä¸º0ä¸”ä¸ç”±ç©ºç™½ç¬¦(whitespace)æ„æˆ</span><br>        queryWrapper<br>                .like(StringUtils.isNotBlank(username), <span class="hljs-string">"username"</span>, <span class="hljs-string">"a"</span>)<br>            .ge(ageBegin != <span class="hljs-literal">null</span>, <span class="hljs-string">"age"</span>, ageBegin)<br>                .le(ageEnd != <span class="hljs-literal">null</span>, <span class="hljs-string">"age"</span>, ageEnd);<br><span class="hljs-comment">//SELECT id,username AS name,age,email,is_deleted FROM t_user WHERE (age &gt;=? AND age &lt;= ?)</span><br>        List&lt;User&gt; users = userMapper.selectList(queryWrapper);<br>        users.forEach(System.out::println);<br>    }<br></code></pre></td></tr></tbody></table></figure><h3 id="5-ã€-LambdaQueryWrapper"><a href="#5-ã€-LambdaQueryWrapper" class="headerlink" title="5 ã€ LambdaQueryWrapper"></a><strong>5</strong> <strong>ã€</strong> <strong>LambdaQueryWrapper</strong></h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test09</span><span class="hljs-params">()</span> {<br> <span class="hljs-comment">//å®šä¹‰æŸ¥è¯¢æ¡ä»¶ï¼Œæœ‰å¯èƒ½ä¸ºnullï¼ˆç”¨æˆ·æœªè¾“å…¥ï¼‰</span><br>     <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">"a"</span>;<br>     <span class="hljs-type">Integer</span> <span class="hljs-variable">ageBegin</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br>     <span class="hljs-type">Integer</span> <span class="hljs-variable">ageEnd</span> <span class="hljs-operator">=</span> <span class="hljs-number">24</span>;<br>     LambdaQueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();<br> <span class="hljs-comment">//é¿å…ä½¿ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºå­—æ®µï¼Œé˜²æ­¢è¿è¡Œæ—¶é”™è¯¯</span><br>     queryWrapper<br>             .like(StringUtils.isNotBlank(username), User::getName, username)<br>             .ge(ageBegin != <span class="hljs-literal">null</span>, User::getAge, ageBegin)<br>             .le(ageEnd != <span class="hljs-literal">null</span>, User::getAge, ageEnd);<br>     List&lt;User&gt; users = userMapper.selectList(queryWrapper);<br>     users.forEach(System.out::println);<br> }<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaåç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå­¦ä¹ ç¬”è®°</title>
      <link href="/2022/10/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/LINUX%E7%90%86%E8%AE%BA%E5%AD%A6%E4%B9%A0/"/>
      <url>/2022/10/19/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/LINUX%E7%90%86%E8%AE%BA%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="LINUXç†è®ºå­¦ä¹ "><a href="#LINUXç†è®ºå­¦ä¹ " class="headerlink" title="LINUXç†è®ºå­¦ä¹ "></a>LINUXç†è®ºå­¦ä¹ </h1><p>ç½‘ç»œé“¾æ¥çš„ä¸‰ç§æ¨¡å¼ï¼š</p><p>1.æ¡¥æ¥æ¨¡å¼ï¼Œè™šæ‹Ÿç³»ç»Ÿå¯ä»¥å’Œå¤–éƒ¨ç³»ç»Ÿé€šè®¯ï¼Œä½†å®¹æ˜“é€ æˆIPå†²çª</p><p>2.NATæ¨¡å¼ï¼Œç½‘ç»œåœ°å€è½¬æ¢æ¨¡å¼ï¼Œè™šæ‹Ÿç³»ç»Ÿå¯ä»¥å’Œå¤–éƒ¨ç³»ç»Ÿé€šè®¯ï¼Œä¸é€ æˆIPå†²çª</p><p>3.ä¸»æœºæ¨¡å¼ï¼šç‹¬ç«‹çš„ç³»ç»Ÿ</p><h4 id="2-è™šæ‹Ÿæœºå…‹éš†"><a href="#2-è™šæ‹Ÿæœºå…‹éš†" class="headerlink" title="2.è™šæ‹Ÿæœºå…‹éš†"></a>2.è™šæ‹Ÿæœºå…‹éš†</h4><ol><li>ç›´æ¥æ‹·è´ä¸€ä»½å®‰è£…å¥½çš„è™šæ‹Ÿæœºæ–‡ä»¶</li><li>ä½¿ç”¨vmwareè½¯ä»¶</li><li>æ³¨æ„ç§‘éš†æ—¶å…³é—­è™šæ‹Ÿæœºlinuxç³»ç»Ÿ</li></ol><h4 id="3-è™šæ‹Ÿæœºçš„å¿«ç…§"><a href="#3-è™šæ‹Ÿæœºçš„å¿«ç…§" class="headerlink" title="3.è™šæ‹Ÿæœºçš„å¿«ç…§"></a>3.è™šæ‹Ÿæœºçš„å¿«ç…§</h4><p>å¦‚æœåœ¨ä½¿ç”¨è™šæ‹Ÿæœºç³»ç»Ÿçš„æ—¶å€™ï¼Œæƒ³å›åˆ°åŸå…ˆçš„æŸä¸€ä¸ªçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯æ‹…å¿ƒæœ‰å¯èƒ½è¿›è¡Œè¯¯æ“ä½œé€ æˆçš„ç³»ç»Ÿçš„å¼‚å¸¸ï¼Œéœ€è¦å›åˆ°åŸå…ˆæŸä¸ªæ­£å¸¸è¿è¡Œçš„çŠ¶æ€ï¼Œvmwareä¹Ÿæä¾›äº†è¿™æ ·çš„åŠŸèƒ½å«åšå¿«ç…§ç®¡ç†ã€‚</p><p>åº”ç”¨å®ä¾‹ï¼š</p><ol><li>å®‰è£…å¥½ç³»ç»Ÿä»¥åï¼Œå…ˆåšä¸€ä¸ªå¿«ç…§A</li><li>è¿›å…¥åˆ°ç³»ç»Ÿåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå†å­˜ä¸€ä¸ªå¿«ç…§b</li><li>å›åˆ°ç³»ç»Ÿåˆšåˆšå®‰è£…å¥½çš„çŠ¶æ€å³å¿«ç…§A</li></ol><h4 id="3-Linuxç›®å½•ç»“æ„"><a href="#3-Linuxç›®å½•ç»“æ„" class="headerlink" title="3. Linuxç›®å½•ç»“æ„"></a>3. Linuxç›®å½•ç»“æ„</h4><ol><li>Linuxçš„æ–‡ä»¶ç³»ç»Ÿæ—¶é‡‡ç”¨çº§å±‚å¼çš„æ ‘çŠ¶ç›®å½•ç»“æ„</li><li>åœ¨Linux ä¸­ä¸€åˆ‡çš†æ–‡ä»¶</li></ol><p><strong>ç›®å½•ç»“æ„è¯¦è§£</strong></p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/d253f567a574442c98facc4e74aebf66.bmp" alt="img"></p><div class="table-container"><table><thead><tr><th style="text-align:center"><strong>ç›®å½•</strong></th><th style="text-align:center"><strong>æ³¨è§£</strong></th><th style="text-align:center"><strong>ä»‹ç»</strong></th></tr></thead><tbody><tr><td style="text-align:center">/bin</td><td style="text-align:center">å¸¸ç”¨</td><td style="text-align:center">æ˜¯ Binary çš„ç¼©å†™, è¿™ä¸ªç›®å½•å­˜æ”¾ç€æœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ï¼›å­ç›®å½•ï¼š/usr/bin å’Œ /usr/local/bin</td></tr><tr><td style="text-align:center">/sbin</td><td style="text-align:center"></td><td style="text-align:center">s å°±æ˜¯ Super User çš„æ„æ€ï¼Œè¿™é‡Œå­˜æ”¾çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿç®¡ç†ç¨‹åºï¼›å­ç›®å½•ï¼š/usr/sbin å’Œ /usr/local/sbin</td></tr><tr><td style="text-align:center">/home</td><td style="text-align:center">å¸¸ç”¨</td><td style="text-align:center">å­˜æ”¾æ™®é€šç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œåœ¨ Linux ä¸­æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•åæ˜¯ä»¥ç”¨æˆ·çš„è´¦å·å‘½å</td></tr><tr><td style="text-align:center">/root</td><td style="text-align:center">å¸¸ç”¨</td><td style="text-align:center">è¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•</td></tr><tr><td style="text-align:center">/lib</td><td style="text-align:center"></td><td style="text-align:center">ç³»ç»Ÿå¼€æœºæ‰€éœ€è¦æœ€åŸºæœ¬çš„åŠ¨æ€è¿æ¥å…±äº«åº“ï¼Œå…¶ä½œç”¨ç±»ä¼¼äº Windows é‡Œçš„ DLL æ–‡ä»¶ã€‚å‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦ç”¨åˆ°è¿™äº›å…±äº«åº“</td></tr><tr><td style="text-align:center">/etc</td><td style="text-align:center">å¸¸ç”¨</td><td style="text-align:center">æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•, æ¯”å¦‚å®‰è£… mysql æ•°æ®åº“ my.conf</td></tr><tr><td style="text-align:center">/user</td><td style="text-align:center">å¸¸ç”¨</td><td style="text-align:center">è¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®å½•ï¼Œç”¨æˆ·çš„å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œç±»ä¼¼ä¸ windows ä¸‹çš„ program files ç›®å½•</td></tr><tr><td style="text-align:center">/boot</td><td style="text-align:center">å¸¸ç”¨</td><td style="text-align:center">å­˜æ”¾çš„æ˜¯å¯åŠ¨ Linux æ—¶ä½¿ç”¨çš„ä¸€äº›æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€äº›è¿æ¥æ–‡ä»¶ä»¥åŠé•œåƒæ–‡ä»¶</td></tr><tr><td style="text-align:center">/proc</td><td style="text-align:center"></td><td style="text-align:center">è¿™ä¸ªç›®å½•æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç›®å½•ï¼Œå®ƒæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œè®¿é—®è¿™ä¸ªç›®å½•æ¥è·å–ç³»ç»Ÿä¿¡æ¯</td></tr><tr><td style="text-align:center">/srv</td><td style="text-align:center"></td><td style="text-align:center">service ç¼©å†™ï¼Œè¯¥ç›®å½•å­˜æ”¾ä¸€äº›æœåŠ¡å¯åŠ¨ä¹‹åéœ€è¦æå–çš„æ•°æ®</td></tr><tr><td style="text-align:center">/sys</td><td style="text-align:center"></td><td style="text-align:center">è¿™æ˜¯ linux2.6 å†…æ ¸çš„ä¸€ä¸ªå¾ˆå¤§çš„å˜åŒ–ã€‚è¯¥ç›®å½•ä¸‹å®‰è£…äº† 2.6 å†…æ ¸ä¸­æ–°å‡ºç°çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ sysfs</td></tr><tr><td style="text-align:center">/tmp</td><td style="text-align:center"></td><td style="text-align:center">è¿™ä¸ªç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶çš„</td></tr><tr><td style="text-align:center">/dev</td><td style="text-align:center"></td><td style="text-align:center">ç±»ä¼¼äº windows çš„è®¾å¤‡ç®¡ç†å™¨ï¼ŒæŠŠæ‰€æœ‰çš„ç¡¬ä»¶ç”¨æ–‡ä»¶çš„å½¢å¼å­˜å‚¨</td></tr><tr><td style="text-align:center">/media</td><td style="text-align:center">å¸¸ç”¨</td><td style="text-align:center">linux ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œä¾‹å¦‚ U ç›˜ã€å…‰é©±ç­‰ç­‰ï¼Œå½“è¯†åˆ«åï¼Œlinux ä¼šæŠŠè¯†åˆ«çš„è®¾å¤‡æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹</td></tr><tr><td style="text-align:center">/mnt</td><td style="text-align:center">å¸¸ç”¨</td><td style="text-align:center">ç³»ç»Ÿæä¾›è¯¥ç›®å½•æ˜¯ä¸ºäº†è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿçš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤–éƒ¨çš„å­˜å‚¨æŒ‚è½½åœ¨/mnt/ä¸Šï¼Œç„¶åè¿›å…¥è¯¥ç›®å½•å°±å¯ä»¥æŸ¥çœ‹é‡Œçš„å†…å®¹äº†ã€‚ (æ¯”å¦‚å…±äº«æ–‡ä»¶)</td></tr><tr><td style="text-align:center">/opt</td><td style="text-align:center"></td><td style="text-align:center">è¿™æ˜¯ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€å­˜æ”¾çš„ç›®å½•(æƒ³è¦å®‰è£…æŸä¸ªè½¯ä»¶ï¼ŒæŠŠå®ƒçš„å®‰è£…è½¯ä»¶æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹)ã€‚å¦‚æƒ³è¦åœ¨è™šæ‹Ÿç³»ç»Ÿä¸Šå®‰è£… ORACLE æ•°æ®åº“å°±å¯ä»¥å…ˆæŠŠå…¶å®‰è£…æ–‡ä»¶æ”¾åœ¨è¯¥ç›®å½•ä¸‹ã€‚é»˜è®¤ä¸ºç©º</td></tr><tr><td style="text-align:center">/user/local</td><td style="text-align:center">å¸¸ç”¨</td><td style="text-align:center">è¿™æ˜¯å¦ä¸€ä¸ªç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€å®‰è£…çš„ç›®å½•(è½¯ä»¶å®‰è£…åçš„ç›®æ ‡ç›®å½•)ã€‚ä¸€èˆ¬æ˜¯é€šè¿‡ç¼–è¯‘æºç æ–¹å¼å®‰è£…çš„ç¨‹åº</td></tr><tr><td style="text-align:center">/var</td><td style="text-align:center">å¸¸ç”¨</td><td style="text-align:center">è¿™ä¸ªç›®å½•ä¸­å­˜æ”¾ç€åœ¨ä¸æ–­æ‰©å……ç€çš„ä¸œè¥¿ï¼Œä¹ æƒ¯å°†ç»å¸¸è¢«ä¿®æ”¹çš„ç›®å½•æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚åŒ…æ‹¬å„ç§æ—¥å¿—æ–‡ä»¶</td></tr><tr><td style="text-align:center">/selinux</td><td style="text-align:center">security-enhanced linux</td><td style="text-align:center">SELinux æ˜¯ä¸€ç§å®‰å…¨å­ç³»ç»Ÿ,å®ƒèƒ½æ§åˆ¶ç¨‹åºåªèƒ½è®¿é—®ç‰¹å®šæ–‡ä»¶, æœ‰ä¸‰ç§å·¥ä½œæ¨¡å¼ï¼Œå¯ä»¥è‡ªè¡Œè®¾ç½®. ç±»ä¼¼äº360ï¼Œä¿è¯ç³»ç»Ÿå®‰å…¨ã€‚è¿™ä¸ªç›®å½•çœ‹ä¸åˆ°ï¼Œå› ä¸ºæ²¡æœ‰è¢«å¯ç”¨</td></tr></tbody></table></div><h4 id="4-ä¸ºä»€ä¹ˆéœ€è¦è¿œç¨‹ç™»å½•Linux"><a href="#4-ä¸ºä»€ä¹ˆéœ€è¦è¿œç¨‹ç™»å½•Linux" class="headerlink" title="4.ä¸ºä»€ä¹ˆéœ€è¦è¿œç¨‹ç™»å½•Linux"></a>4.ä¸ºä»€ä¹ˆéœ€è¦è¿œç¨‹ç™»å½•Linux</h4><p>è¯´æ˜: å…¬å¸å¼€å‘æ—¶å€™ï¼Œå…·ä½“çš„åº”ç”¨åœºæ™¯æ˜¯è¿™æ ·çš„ï¼š</p><ol><li>linux æœåŠ¡å™¨æ˜¯å¼€å‘å°ç»„å…±äº« </li><li>æ­£å¼ä¸Šçº¿çš„é¡¹ç›®æ˜¯è¿è¡Œåœ¨å…¬ç½‘</li><li>å› æ­¤ç¨‹åºå‘˜éœ€è¦è¿œç¨‹ç™»å½•åˆ° Linux è¿›è¡Œé¡¹ç›®ç®¡ç†æˆ–è€…å¼€å‘</li></ol><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/6db4149faa9c4a2f82cce5210927803e.bmp" alt="img"></p><p><strong>Xshellå’ŒXftp6</strong></p><p>è¿œç¨‹ç™»å½•å·¥å…·Xshellï¼š<br>    1.Xshell æ˜¯ç›®å‰æœ€å¥½çš„è¿œç¨‹ç™»å½•åˆ° Linux æ“ä½œçš„è½¯ä»¶ï¼Œæµç•…çš„é€Ÿåº¦å¹¶ä¸”å®Œç¾è§£å†³äº†ä¸­æ–‡ä¹±ç çš„é—®é¢˜ï¼Œæ˜¯ç›®å‰ç¨‹åºå‘˜é¦–é€‰çš„è½¯ä»¶ã€‚<br>    2.Xshell æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å®‰å…¨ç»ˆç«¯æ¨¡æ‹Ÿè½¯ä»¶ï¼Œå®ƒæ”¯æŒ SSH1, SSH2, ä»¥åŠ Microsoft Windows å¹³å°çš„ TELNET åè®®ã€‚<br>    3.Xshell å¯ä»¥åœ¨ Windows ç•Œé¢ä¸‹ç”¨æ¥è®¿é—®è¿œç«¯ä¸åŒç³»ç»Ÿä¸‹çš„æœåŠ¡å™¨ï¼Œä»è€Œæ¯”è¾ƒå¥½çš„è¾¾åˆ°è¿œç¨‹æ§åˆ¶ç»ˆç«¯çš„ç›®çš„ã€‚</p><p>æ³¨æ„ï¼š<br>1.ä½¿ç”¨Xshellä¹‹å‰ï¼Œéœ€è¦çŸ¥é“Linuxçš„ipåœ°å€<br>    å¦‚ä½•çŸ¥é“ipåœ°å€ï¼Ÿ<br>        åœ¨Linuxä¸­ï¼Œé¼ æ ‡å³å‡»æ¡Œé¢æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ifconfigæŒ‡ä»¤ï¼Œens33ä¸­ï¼Œå°±å¯ä»¥çŸ¥é“ipåœ°å€äº†ã€‚<br>2.è¦ä¿è¯æœ¬æœºå¯ä»¥pingé€šè™šæ‹Ÿä¸»æœº<br>    åœ¨æœ¬æœºDOSå‘½ä»¤çª—å£ä¸­è¾“å…¥å‘½ä»¤ï¼šping è™šæ‹Ÿä¸»æœºipåœ°å€</p><p>ç™»å½•Xshellï¼š<br>    æ‰“å¼€Xshellâ€”-&gt;æ·»åŠ ä¼šè¯â€”-&gt;ä¸»æœº(è™šæ‹Ÿä¸»æœºipåœ°å€)â€”-&gt;ç¡®å®š<br>    åŒå‡»å¯†é’¥â€”-&gt;é€‰æ‹©æ¥å—å¹¶ä¿å­˜ä¸»æœºå¯†é’¥(å°±ä¸ç”¨é‡å¤æ¥å—äº†)<br>    è¿œç¨‹ç™»é™†æˆåŠŸ</p><p>è¿œç¨‹ä¸Šä¼ ä¸‹è½½æ–‡ä»¶Xftpï¼š<br>    æ˜¯ä¸€ä¸ªåŸºäº windows å¹³å°çš„åŠŸèƒ½å¼ºå¤§çš„ SFTPã€FTP æ–‡ä»¶ä¼ è¾“è½¯ä»¶ã€‚<br>    ä½¿ç”¨äº† Xftp ä»¥åï¼Œwindows ç”¨æˆ·èƒ½å®‰å…¨åœ°åœ¨ UNIX/Linux å’Œ Windows PC ä¹‹é—´ä¼ è¾“æ–‡ä»¶</p><pre><code>æ“ä½œåŒä¸Šæ³¨æ„ï¼šxftpæ‰“å¼€æ—¶ä¹±ç ï¼šå±æ€§---&gt;é€‰é¡¹---&gt;UTF-8ç¼–ç </code></pre><h4 id="5-vi-å’Œ-vim-çš„åŸºæœ¬ä»‹ç»"><a href="#5-vi-å’Œ-vim-çš„åŸºæœ¬ä»‹ç»" class="headerlink" title="5. vi å’Œ vim çš„åŸºæœ¬ä»‹ç»"></a>5. vi å’Œ vim çš„åŸºæœ¬ä»‹ç»</h4><p> <strong>Linux ç³»ç»Ÿä¼šå†…ç½® vi æ–‡æœ¬ç¼–è¾‘å™¨</strong></p><p>â€‹     Vimå¯ä»¥çœ‹ä½œæ˜¯Viçš„å¢å¼ºç‰ˆæœ¬ï¼ŒVim å…·æœ‰ç¨‹åºç¼–è¾‘çš„èƒ½åŠ›ï¼Œå¯ä»¥ä¸»åŠ¨çš„ä»¥å­—ä½“é¢œè‰²è¾¨åˆ«è¯­æ³•çš„æ­£ç¡®æ€§ï¼Œæ–¹ä¾¿ç¨‹åºè®¾è®¡ã€‚ä»£ç è¡¥å®Œã€ç¼–è¯‘åŠé”™è¯¯è·³è½¬ç­‰æ–¹ä¾¿ç¼–ç¨‹çš„åŠŸèƒ½ç‰¹åˆ«ä¸°å¯Œã€‚</p><p> <strong>vi å’Œ vim å¸¸ç”¨çš„ä¸‰ç§æ¨¡å¼</strong></p><ol><li>æ­£å¸¸æ¨¡å¼ï¼š ä»¥ vim æ‰“å¼€ä¸€ä¸ªæ¡£æ¡ˆå°±ç›´æ¥è¿›å…¥ä¸€èˆ¬æ¨¡å¼äº†(è¿™æ˜¯é»˜è®¤çš„æ¨¡å¼)ã€‚ åœ¨è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ã€ä¸Šä¸‹å·¦å³ã€æŒ‰é”®æ¥ç§»åŠ¨å…‰æ ‡ï¼Œ å¯ä»¥ä½¿ç”¨ã€åˆ é™¤å­—ç¬¦ã€æˆ–ã€åˆ é™¤æ•´è¡Œã€æ¥å¤„ç†æ¡£æ¡ˆå†…å®¹ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨ã€å¤åˆ¶ã€ç²˜è´´ã€æ¥å¤„ç†ä½ çš„æ–‡ä»¶æ•°æ®ã€‚</li><li>æ’å…¥æ¨¡å¼ æŒ‰ä¸‹ i, I, o, O, a, A, r, R ç­‰ä»»ä½•ä¸€ä¸ªå­—æ¯ä¹‹åæ‰ä¼šè¿›å…¥ç¼–è¾‘æ¨¡å¼, ä¸€èˆ¬æ¥è¯´æŒ‰ i å³å¯. å¯ä»¥å†™ä¸œè¥¿äº†ã€‚ </li><li>å‘½ä»¤è¡Œæ¨¡å¼ åœ¨è¿™ä¸ªæ¨¡å¼å½“ä¸­ï¼Œå¯ä»¥æä¾›ä½ ç›¸å…³æŒ‡ä»¤ï¼Œå®Œæˆè¯»å–ã€å­˜ç›˜ã€æ›¿æ¢ã€ç¦»å¼€ vimï¼Œæ˜¾ç¤ºè¡Œå·ç­‰åŠ¨ä½œã€‚</li></ol><p><strong>ä¾‹å­ï¼š</strong></p><figure class="highlight tcl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs tcl">æ¡ˆä¾‹ï¼šä½¿ç”¨ vim å¼€å‘ä¸€ä¸ª Hello.java ç¨‹åº<br>ä½¿ç”¨xshellç™»å½•ç¼–å†™(å› ä¸ºä»¥åå·¥ä½œéƒ½æ˜¯è¿™æ ·å†™çš„)ï¼š<br>é¦–å…ˆè¾“å…¥ï¼švi Hello.java æˆ–è€… vim Hello.java (ä½¿ç”¨vimç¼–è¾‘å™¨ç¼–å†™javaç¨‹åº)<br>å›è½¦åè¿›å…¥æ­£å¸¸æ¨¡å¼<br>ä¹‹åè¾“å…¥iç­‰å­—æ¯ï¼Œè¿›å…¥æ’å…¥æ¨¡å¼(ç¼–è¾‘æ¨¡å¼)<br>ç„¶åå¯æ˜¯å†™ä»£ç ï¼š<br>public class Hello{<br>public static void main(String[] args){<br>System.out.println(<span class="hljs-string">"Hello World"</span>);<br>}<br>}<br>ç„¶åä¿å­˜ï¼Œæ€ä¹ˆä¿å­˜ï¼Ÿ<br>å…ˆ æŒ‰ Esc å›åˆ°æ­£å¸¸æ¨¡å¼<br>ç„¶åè¾“å…¥å†’å·:  æ¥ç€è¾“å…¥wq (ä»£è¡¨å†™å…¥å¹¶é€€å‡ºwrite quit)<br>å›è½¦<br>ç»“æŸ<br>è¾“å…¥lså‘½ä»¤ï¼Œå°±å¯ä»¥çœ‹åˆ°Hello.javaæ–‡ä»¶<br>è¿˜æƒ³ä¿®è¯¥æ–‡ä»¶ï¼šå†è¾“å…¥ vim Hello.java (æŒ‰Tabé”® ä»£ç è¡¥å…¨) å°±æœ‰å›åˆ°äº†ä¸Šé¢<br><br></code></pre></td></tr></tbody></table></figure><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/138b0786b5ae48c8a5d0fdbc2c712419.bmp" alt="img"></p><p> <strong>vi å’Œ vim å¿«æ·é”®</strong></p><div class="table-container"><table><thead><tr><th style="text-align:center">å¿«æ·é”®</th><th style="text-align:center">æ¨¡å¼</th><th style="text-align:center">ä»‹ç»</th></tr></thead><tbody><tr><td style="text-align:center">yy</td><td style="text-align:center">æ­£å¸¸æ¨¡å¼</td><td style="text-align:center">å¤åˆ¶å½“å‰è¡Œ</td></tr><tr><td style="text-align:center">p</td><td style="text-align:center">æ­£å¸¸æ¨¡å¼</td><td style="text-align:center">ç²˜è´´</td></tr><tr><td style="text-align:center">5yy</td><td style="text-align:center">æ­£å¸¸æ¨¡å¼</td><td style="text-align:center">å¤åˆ¶å½“å‰è¡Œå‘ä¸‹çš„5è¡Œ</td></tr><tr><td style="text-align:center">dd</td><td style="text-align:center">æ­£å¸¸æ¨¡å¼</td><td style="text-align:center">åˆ é™¤å½“å‰è¡Œ</td></tr><tr><td style="text-align:center">5dd</td><td style="text-align:center">æ­£å¸¸æ¨¡å¼</td><td style="text-align:center">åˆ é™¤å½“å‰è¡Œå‘ä¸‹çš„5è¡Œ</td></tr></tbody></table></div><figure class="highlight tcl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs tcl">åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾æŸä¸ªå•è¯ï¼š<br>åˆå§‹åœ¨æ­£å¸¸æ¨¡å¼ï¼Œè¾“å…¥/ï¼Œè¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œç„¶åè¾“å…¥è¦æŸ¥æ‰¾çš„å•è¯ï¼Œå›è½¦æŸ¥æ‰¾<br>è¾“å…¥næŸ¥æ‰¾åˆ°ä¸‹ä¸€ä¸ª<br>æƒ³æŸ¥æ‰¾å¦ä¸€ä¸ªå•è¯ï¼šè¾“å…¥/ï¼Œé‡å¤ä¸Šè¿°å³å¯<br>æ­£å¸¸æ¨¡å¼---&gt;å‘½ä»¤è¡Œæ¨¡å¼<br>ç»™æ–‡ä»¶æ¯è¡Œè®¾ç½®è¡Œå·ï¼š<br>å…ˆå†’å·: <br>ç„¶å<span class="hljs-keyword">set</span> nu  (<span class="hljs-keyword">set</span> number)<br>å›è½¦<br>å–æ¶ˆè¡Œå·ï¼š<br>å…ˆå†’å·:<br>ç„¶å<span class="hljs-keyword">set</span> nonu<br>å›è½¦<br>å¿«æ·é”®åˆ°è¯¥æ–‡æ¡£çš„æœ€é¦–è¡Œ(æ­£å¸¸æ¨¡å¼)ï¼šgg<br>å¿«æ·é”®åˆ°è¯¥æ–‡æ¡£çš„æœ€æœ«è¡Œ(æ­£å¸¸æ¨¡å¼)ï¼šG<br>æ’¤é”€åŠ¨ä½œ(æ¯”å¦‚åˆ é™¤æŸä¸€è¡Œï¼Œå‘ç°åˆ é”™äº†ï¼Œç„¶åæ¢å¤è¿™ä¸€è¡Œ)(æ­£å¸¸æ¨¡å¼)ï¼šu<br>åœ¨æŸä¸ªæ–‡ä»¶ä¸­ï¼Œæƒ³è®©å…‰æ ‡ç§»åŠ¨åˆ°ç¬¬<span class="hljs-number">20</span>è¡Œ(æ­£å¸¸æ¨¡å¼)ï¼šè¾“å…¥<span class="hljs-number">20</span>ï¼Œå†è¾“å…¥ shift+g<br>æ›´å¤šçš„å¿«æ·é”®ï¼šæœ‰æ•´ç†çš„æ–‡æ¡£å’Œä¸‹å›¾<br><br></code></pre></td></tr></tbody></table></figure><p> <strong>å…³æœºå’Œé‡å¯å‘½ä»¤</strong></p><div class="table-container"><table><thead><tr><th style="text-align:center">å‘½ä»¤</th><th style="text-align:center">ä»‹ç»</th></tr></thead><tbody><tr><td style="text-align:center"><code>shutdown -h now</code></td><td style="text-align:center">ç«‹å³å…³æœº(hâ€”&gt;haltåœæ­¢)</td></tr><tr><td style="text-align:center"><code>halt</code></td><td style="text-align:center">ç«‹å³å…³æœºï¼ŒåŒä¸Š</td></tr><tr><td style="text-align:center"><code>shutdown</code></td><td style="text-align:center">1åˆ†é’Ÿåå…³æœº</td></tr><tr><td style="text-align:center"><code>shutdown -h 1</code></td><td style="text-align:center">åŒä¸Šï¼Œç»™æ¯ä¸€ä¸ªç™»å½•åˆ°Linuxç³»ç»Ÿçš„ç”¨æˆ·å‘ä¸€æ¡æ¶ˆæ¯ï¼š1åˆ†é’Ÿåå…³æœº</td></tr><tr><td style="text-align:center"><code>shutdown -h 2</code></td><td style="text-align:center">2åˆ†é’Ÿåå…³æœº</td></tr><tr><td style="text-align:center"><code>shutdonw -r now</code></td><td style="text-align:center">ç°åœ¨é‡æ–°å¯åŠ¨(râ€”&gt;rbooté‡å¯)</td></tr><tr><td style="text-align:center"><code>reboot</code></td><td style="text-align:center">ç°åœ¨é‡æ–°å¯åŠ¨ï¼ŒåŒä¸Š</td></tr><tr><td style="text-align:center"><code>sync</code></td><td style="text-align:center">æŠŠå†…å­˜çš„æ•°æ®åŒæ­¥åˆ°ç£ç›˜</td></tr><tr><td style="text-align:center">æ³¨æ„</td><td style="text-align:center">ä¸ç®¡æ˜¯é‡å¯è¿˜æ˜¯å…³æœºï¼Œé¦–å…ˆè¦è¿è¡Œ sync å‘½ä»¤ï¼ŒæŠŠå†…å­˜ä¸­çš„æ•°æ®å†™åˆ°ç£ç›˜ä¸­ï¼›ç›®å‰çš„ <code>shutdown/reboot/halt</code> ç­‰å‘½ä»¤å‡å·²ç»åœ¨å…³æœºå‰è¿›è¡Œäº†syncï¼Œä½†è¿˜æ˜¯æ‰‹åŠ¨æ‰§è¡Œä¸€ä¸‹syncä¿é™©</td></tr></tbody></table></div><p> <strong>ç”¨æˆ·ç™»å½•å’Œæ³¨é”€</strong></p><p><strong>ç”¨æˆ·ç™»å½•ï¼š</strong><br>    ç™»å½•æ—¶å°½é‡å°‘ç”¨ root å¸å·ç™»å½•ï¼Œå› ä¸ºå®ƒæ˜¯ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæœ€å¤§çš„æƒé™ï¼Œé¿å…æ“ä½œå¤±è¯¯ã€‚<br>    è€Œä¸”ä»¥åä¹Ÿç”¨ä¸åˆ°rootï¼Œé™¤éä½ æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ã€‚<br>    å¯ä»¥åˆ©ç”¨æ™®é€šç”¨æˆ·ç™»å½•ï¼Œç™»å½•åå†ç”¨â€su - ç”¨æˆ·åâ€™å‘½ä»¤æ¥åˆ‡æ¢æˆç³»ç»Ÿç®¡ç†å‘˜èº«ä»½.</p><p><strong>æ³¨é”€ï¼š</strong><br>    åœ¨æç¤ºç¬¦ä¸‹è¾“å…¥ logout  å³å¯æ³¨é”€ç”¨æˆ·</p><p>æ³¨æ„ï¼šlogout æ³¨é”€æŒ‡ä»¤åœ¨å›¾å½¢è¿è¡Œçº§åˆ«æ— æ•ˆï¼Œåœ¨è¿è¡Œçº§åˆ« 3 ä¸‹æœ‰æ•ˆ.<br>è¿è¡Œçº§åˆ«åé¢è®²ã€‚</p><p><strong>éªŒè¯ï¼š</strong><br>    ä½¿ç”¨æ™®é€šç”¨æˆ·ç™»å½•<br>    ä½¿ç”¨Xshellè¿œç¨‹ç™»é™†Linux<br>    è¾“å…¥å‘½ä»¤ï¼šsu - root   å˜ä¸ºrootç”¨æˆ·<br>    å†è¾“å…¥ï¼šlogout  æ³¨é”€ç”¨æˆ·å›åˆ°æ™®é€šç”¨æˆ·<br>    å†è¾“å…¥ï¼šlogout é€€å‡ºç³»ç»Ÿ</p><p><strong>æ³¨æ„ï¼š</strong>é€€å‡ºç³»ç»Ÿåï¼Œå¦‚ä½•è¦é‡æ–°è¿æ¥åˆ°Linuxï¼ŒåŒå‡»å·¦æ ä¼šè¯å†é‡æ–°è¾“å…¥å³å¯ã€‚</p><h4 id="6-Linux-å®æ“ç¯‡"><a href="#6-Linux-å®æ“ç¯‡" class="headerlink" title="6.Linux å®æ“ç¯‡"></a>6.Linux å®æ“ç¯‡</h4><ol><li><strong>ä»‹ç»</strong></li></ol><p>Linux ç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·å¤šä»»åŠ¡çš„æ“ä½œç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªè¦ä½¿ç”¨ç³»ç»Ÿèµ„æºçš„ç”¨æˆ·ï¼Œéƒ½å¿…é¡»é¦–å…ˆå‘ç³»ç»Ÿç®¡ç†å‘˜ç”³è¯·ä¸€ä¸ªè´¦å·ï¼Œç„¶åä»¥è¿™ä¸ªè´¦å·çš„èº«ä»½è¿›å…¥ç³»ç»Ÿã€‚</p><p>ä¸€ä¸ªLinuxç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªrootç”¨æˆ·ï¼Œä½†æ˜¯ç”±rootç”¨æˆ·å¯ä»¥åˆ›å»ºå¤šä¸ªå…¶ä»–ç”¨æˆ·ï¼Œå¯ä»¥ç»™è¿™äº›ç”¨æˆ·åˆ†é…æƒé™ï¼Œ<br>å…¶ä¸­æ¯ä¸ªç”¨æˆ·ä¼šå¯¹åº”ä¸€ä¸ªç›®å½•ï¼Œè¿™ä¸ªç›®å½•å«åšå®¶ç›®å½•ã€‚</p><ol><li><strong>æ·»åŠ ç”¨æˆ·</strong></li></ol><p>è¯­æ³•ï¼š<strong>useradd ç”¨æˆ·å</strong><br>æ¯”å¦‚ï¼šuseradd milan æ³¨å†Œæ–°ç”¨æˆ·milan</p><p>æ³¨æ„ï¼šå½“åˆ›å»ºç”¨æˆ·æˆåŠŸåï¼Œä¼šè‡ªåŠ¨åˆ›å»ºå’Œç”¨æˆ·åŒåçš„å®¶ç›®å½•ï¼Œè¯¥ç”¨æˆ·çš„å®¶ç›®å½•é»˜è®¤åœ¨homeç›®å½•ä¸‹</p><p>ä¹Ÿå¯ä»¥ç»™æ–°ç”¨æˆ·æŒ‡å®šå®¶ç›®å½•ï¼š<strong>useradd -d æŒ‡å®šç›®å½• æ–°ç”¨æˆ·å</strong><br>æ¯”å¦‚ï¼š<strong>useradd -d /home/test king åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·kingï¼Œå…¶å®¶ç›®å½•test</strong></p><ol><li><strong>æŒ‡å®šä¿®æ”¹å¯†ç </strong></li></ol><p>è¯­æ³•ï¼š<strong>passwd ç”¨æˆ·å</strong>  ç»™æŸä¸ªç”¨æˆ·è®¾ç½®/æ›´æ”¹å¯†ç </p><p>æ³¨æ„ï¼šè¦å†™ç”¨æˆ·åã€‚ä¸å†™ç”¨æˆ·åé»˜è®¤è®¾ç½®å½“å‰ç”¨æˆ·ï¼Œå¦‚æœå½“å‰ç”¨æˆ·æ˜¯rootå°±éº»çƒ¦äº†ã€‚</p><p>æ¯”å¦‚ï¼šç»™milanè®¾ç½®å¯†ç  </p><p>å‘½ä»¤ï¼špwd â€”-&gt;æ˜¾ç¤ºå½“å‰ç”¨æˆ·æ‰€åœ¨ç›®å½• Print Working Directory</p><ol><li><strong>åˆ é™¤è´¦æˆ·</strong></li></ol><p>è¯­æ³•ï¼š <strong>userdel ç”¨æˆ·å</strong></p><p>æ™®é€šç”¨æˆ·ä¸èƒ½åˆ é™¤åˆ«çš„ç”¨æˆ·ï¼Œåªæœ‰rootç”¨æˆ·å¯ä»¥ï¼›å¹¶ä¸”ä¸èƒ½è‡ªå·±åˆ é™¤è‡ªå·±</p><ul><li><p>åˆ æ‰ç”¨æˆ·ï¼Œä½†æ˜¯ä¿ç•™å…¶å®¶ç›®å½•ï¼š    userdel ç”¨æˆ·å</p></li><li><p>å°†ç”¨æˆ·å’Œå…¶å®¶ç›®å½•ä¸€èµ·åˆ é™¤(è¿™ä¸ªæ“ä½œè¦è°¨æ…)ï¼š  user -r ç”¨æˆ·å</p></li></ul><p>â€‹     ä¸€èˆ¬æƒ…å†µï¼Œå»ºè®®ä¿ç•™å®¶ç›®å½•(ä¸åˆ é™¤)</p><ol><li><strong>æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</strong></li></ol><p><strong>è¯­æ³•ï¼šid ç”¨æˆ·å</strong><br>id root:<br><code>uid=0(root) gid=0(root) ç»„=0(root)  useridæ˜¯0 gruopidç»„idæ˜¯0 æ‰€åœ¨ç»„0</code></p><p>å½“ç”¨æˆ·ä¸å­˜åœ¨ï¼šè¿”å›æ— æ­¤ç”¨æˆ· no such user</p><ol><li><strong>åˆ‡æ¢ç”¨æˆ·</strong></li></ol><p>åœ¨æ“ä½œ Linux ä¸­ï¼Œå¦‚æœå½“å‰ç”¨æˆ·çš„æƒé™ä¸å¤Ÿï¼Œå¯ä»¥é€šè¿‡ su - æŒ‡ä»¤ï¼Œåˆ‡æ¢åˆ°é«˜æƒé™ç”¨æˆ·(æ¯”å¦‚ root)</p><p>è¯­æ³•ï¼š <strong>su - åˆ‡æ¢ç”¨æˆ·å</strong></p><p>æ³¨æ„ï¼š</p><ul><li>ä»æƒé™é«˜çš„ç”¨æˆ·åˆ‡æ¢åˆ°æƒé™ä½çš„ç”¨æˆ·ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œåä¹‹éœ€è¦ã€‚</li><li>å½“éœ€è¦è¿”å›åˆ°åŸæ¥ç”¨æˆ·æ—¶ï¼Œä½¿ç”¨ exit/logout æŒ‡ä»¤</li></ul><ol><li><strong>æŸ¥çœ‹å½“å‰ç”¨æˆ·</strong></li></ol><p><strong>è¯­æ³•ï¼šwho am i æˆ–è€… who am I</strong><br><code>who am i ---&gt;ç¬¬ä¸€ä¸ªç™»å½•è¯¥ç³»ç»Ÿçš„ç”¨æˆ·ä¿¡æ¯</code></p><p>å‡è®¾Aç”¨æˆ·ç™»å½•ç³»ç»Ÿï¼Œåˆ‡æ¢åˆ°Bç”¨æˆ·ï¼ŒBè¾“å…¥å‘½ä»¤who am iï¼Œè¾“å‡ºçš„è¿˜æ˜¯Aç”¨æˆ·çš„ä¿¡æ¯</p><ol><li><strong>ç”¨æˆ·ç»„</strong></li></ol><p>ä»‹ç»ï¼šç±»ä¼¼äºè§’è‰²ï¼Œç³»ç»Ÿå¯ä»¥å¯¹æœ‰å…±æ€§/æœ‰ç›¸åŒçš„æƒé™çš„å¤šä¸ªç”¨æˆ·è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†</p><p><strong>æ–°å¢ç»„ï¼šgroupadd ç»„å</strong></p><p>ä»‹ç»ï¼šç±»ä¼¼äºè§’è‰²ï¼Œç³»ç»Ÿå¯ä»¥å¯¹æœ‰å…±æ€§/æœ‰ç›¸åŒçš„æƒé™çš„å¤šä¸ªç”¨æˆ·è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†<br><strong>æ–°å¢ç»„ï¼šgroupadd ç»„å</strong><br>    ä¾‹å­ï¼šå¢åŠ ä¸€ä¸ªç”¨æˆ·zwjï¼ŒæŠŠä»–ç›´æ¥æ”¾åˆ°ç»„wudangä¸­<br>    å‘½ä»¤ï¼š<br>        <strong><code>groupadd wudang</code></strong><br>        <strong><code>useradd -g wudang zwj</code></strong><br><code>id zwjï¼šuid=1001(zwj) gid=1001(wudang) ç»„=1001(wudang)</code><br>ä¿®æ”¹ç”¨æˆ·çš„ç»„ï¼š<strong>usermod -g ç”¨æˆ·ç»„ ç”¨æˆ·å</strong><br>    ä¾‹å­ï¼šæŠŠzwj æ”¾åˆ°ç»„ mojiao ä¸­<br>    å‘½ä»¤ï¼š<br>        <code>groupadd mojiao</code><br>        <code>usermod -g mojiao zwj</code><br>        <code>id zwjï¼šuid=1001(zwj) gid=1002(mojiao) ç»„=1002(mojiao)</code><br>    æ–°å¢ä¸€ä¸ªç”¨æˆ·johnï¼Œæ€ä¹ˆæŠŠjohnæ”¾è¿›ç»„mojiaoä¸­ï¼Ÿ<br>        <code>useradd jhon</code><br>        <code>usermod -g mojiao jhon</code><br>        æ–°å¢ä¸€ä¸ªç”¨æˆ·johnï¼Œjohnåœ¨ä»¥è‡ªå·±çš„åå­—å‘½åçš„ç»„johnä¸­ï¼Œä»johnç»„åˆ°mojiaoç»„<br><strong>åˆ é™¤ç»„ï¼šgroupdel ç»„å</strong></p><ol><li><strong>ç”¨æˆ·å’Œç»„çš„ç›¸å…³æ–‡ä»¶</strong></li></ol><p>(1)<code>/etc/passwd</code> æ–‡ä»¶<br>æ¯å¢åŠ ä¸€ä¸ªç”¨æˆ·ï¼Œå°±ä¼šæŠŠç”¨æˆ·çš„ä¿¡æ¯ä¿å­˜åˆ°è¯¥æ–‡ä»¶ã€‚<br>ç”¨æˆ·ï¼ˆuserï¼‰çš„é…ç½®æ–‡ä»¶ï¼Œè®°å½•ç”¨æˆ·çš„å„ç§ä¿¡æ¯<br>æ¯è¡Œéƒ½æ˜¯ä¸€ä¸ªç”¨æˆ·ï¼Œæ¯è¡Œçš„å«ä¹‰ï¼šç”¨æˆ·å:å£ä»¤:ç”¨æˆ·æ ‡è¯†å·:ç»„æ ‡è¯†å·:æ³¨é‡Šæ€§æè¿°:ä¸»ç›®å½•:ç™»å½•Shell</p><p>ä¸»ç›®å½•ï¼šç”¨æˆ·æ‰€åœ¨çš„å®¶ç›®å½•</p><p>shellï¼šå‘½ä»¤è§£é‡Šç¨‹åº<br>    å°†å‘å¸ƒçš„æŒ‡ä»¤é€šè¿‡shellè§£æï¼Œå†ä¼ ç»™Linuxå†…æ ¸<br>    Linuxæ˜¯çœ‹ä¸æ‡‚å‘å¸ƒçš„æŒ‡ä»¤çš„<br>    shellæœ‰å¾ˆå¤šç§ï¼Œä¸­å›½ä¸€èˆ¬ç”¨çš„æ˜¯bash</p><p>å‘½ä»¤ï¼š<code>vim /etc/passwd</code> å¯ä»¥æŸ¥çœ‹è¯¥æ–‡ä»¶(è¿˜æœ‰å…¶ä»–å‘½ä»¤)</p><p>(2)/etc/shadow æ–‡ä»¶<br>å£ä»¤çš„é…ç½®æ–‡ä»¶<br>æ¯è¡Œçš„å«ä¹‰ï¼šç™»å½•å:åŠ å¯†å£ä»¤:æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´:æœ€å°æ—¶é—´é—´éš”:æœ€å¤§æ—¶é—´é—´éš”:è­¦å‘Šæ—¶é—´:ä¸æ´»åŠ¨æ—¶é—´:å¤±æ•ˆæ—¶é—´:æ ‡å¿—</p><p>(3)<code>/etc/group</code> æ–‡ä»¶<br>ç»„(group)çš„é…ç½®æ–‡ä»¶ï¼Œè®°å½• Linux åŒ…å«çš„ç»„çš„ä¿¡æ¯æ¯è¡Œå«ä¹‰ï¼šç»„å:å£ä»¤:ç»„æ ‡è¯†å·:ç»„å†…ç”¨æˆ·åˆ—è¡¨</p><h4 id="7-Linux-å®æ“ç¯‡-å®ç”¨æŒ‡ä»¤"><a href="#7-Linux-å®æ“ç¯‡-å®ç”¨æŒ‡ä»¤" class="headerlink" title="7.Linux å®æ“ç¯‡-å®ç”¨æŒ‡ä»¤"></a>7.Linux å®æ“ç¯‡-å®ç”¨æŒ‡ä»¤</h4><ol><li>è¿è¡Œçº§åˆ«</li></ol><p>Linuxç³»ç»Ÿè¿è¡Œçº§åˆ«ï¼š<br>0ï¼šå…³æœº<br>1ï¼šå•ç”¨æˆ·ã€å¯ä»¥æ‰¾å›ä¸¢å¤±å¯†ç ã€‘<br>2ï¼šå¤šç”¨æˆ·çŠ¶æ€æ²¡æœ‰ç½‘ç»œæœåŠ¡(ä¸€èˆ¬ä¸ç”¨ï¼Œæ²¡ç½‘ç»œ)<br>3ï¼šå¤šç”¨æˆ·çŠ¶æ€æœ‰ç½‘ç»œæœåŠ¡<br>4ï¼šç³»ç»Ÿæœªä½¿ç”¨ä¿ç•™ç»™ç”¨æˆ·<br>5ï¼šå›¾å½¢ç•Œé¢<br>6ï¼šç³»ç»Ÿé‡å¯<br>å¸¸ç”¨è¿è¡Œçº§åˆ«æ˜¯ 3 å’Œ 5</p><p>åˆ‡æ¢è¿è¡Œçº§åˆ«å‘½ä»¤ï¼šinit é€‰0-6</p><p>æŒ‡å®šé»˜è®¤è¿è¡Œçº§åˆ«ï¼š<br>    CentOS7ä¹‹å‰æ˜¯åœ¨æ–‡ä»¶<code>/etc/inittab</code>æ–‡ä»¶ä¸­è®¾ç½®<br>    CentOS7ä¹‹åå¯¹è®¾ç½®è¿›è¡Œäº†ç®€åŒ–ï¼š<br>        ç”¨ <code>multi-user.target</code> ä»£è¡¨3è¿è¡Œçº§åˆ«<br>        ç”¨ <code>graphical.target</code> ä»£è¡¨5è¿è¡Œçº§åˆ«<br>        7ç‰ˆæœ¬ä¹‹åä¸»è¦ç”¨3å’Œ5è¿è¡Œçº§åˆ«ã€‚</p><p>ç”¨å‘½ä»¤ï¼š<code>systemctl get-default</code> æŸ¥çœ‹å½“å‰ç³»ç»Ÿè¿è¡Œçº§åˆ«<br>ç”¨å‘½ä»¤ï¼š<code>systemctl set-default multi-user.target /graphical.target</code>  è®¾ç½®é»˜è®¤è¿è¡Œçº§åˆ«</p><ol><li><strong>å¸®åŠ©æŒ‡ä»¤</strong></li></ol><p><strong>è¯­æ³•ï¼šman å‘½ä»¤æˆ–é…ç½®æ–‡ä»¶</strong><br>æ˜¯manualçš„ç®€å†™ï¼Œmanualæ˜¯æ‰‹å†Œçš„æ„æ€</p><p>åŠŸèƒ½ï¼šè·å¾—å¸®åŠ©ä¿¡æ¯<br>ä¾‹å­ï¼šæŸ¥çœ‹lså‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯</p><p>è¾“å…¥ man ls ä¹‹åï¼Œä¼šçœ‹åˆ°lsçš„å…·ä½“ä¿¡æ¯(è¦å›åˆ°å‰ä¸€ä¸ªé¡µé¢ï¼Œè¾“å…¥q)<br>æ³¨æ„ï¼šå¯èƒ½ä¸æ­¢ä¸€é¡µï¼Œä½¿ç”¨ç©ºæ ¼æˆ–ä¸‹é”®ï¼Œå¯ä»¥å¾€ä¸‹çœ‹</p><p>lså‘½ä»¤ï¼šåˆ—å‡ºç›®å½•å†…å®¹<br>æ ¼å¼ï¼š<code>ls [é€‰é¡¹] [æ–‡ä»¶å...]</code><br>     <code>ls  -a</code>  â€”-&gt;åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶(éšè—æ–‡ä»¶ä»¥ . å¼€å¤´)<br>     <code>ls  -l</code>  â€”-&gt;å•åˆ—è¾“å‡º </p><p>é€‰é¡¹ä»¥ - å¼€å§‹<br>é€‰é¡¹å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œæ²¡æœ‰é¡ºåºï¼š<br>æ¯”å¦‚ï¼š ls -al  ä¹Ÿå¯ä»¥ ls -a -l  è¡¨ç¤ºåˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶ å¹¶ å•åˆ—è¾“å‡º</p><p>lsé»˜è®¤æ˜¯å¯¹å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶<br>ä¹Ÿå¯ä»¥æŒ‡å®šæŸä¸ªç›®å½•ï¼š</p><p>å¦‚ï¼š <code>ls -al /root</code>  æŠŠrootç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å•åˆ—è¾“å‡º</p><p>è¯­æ³•ï¼šhelp å‘½ä»¤<br>åŠŸèƒ½ï¼šè·å¾— shell å†…ç½®å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯<br>ä¾‹å­ï¼šæŸ¥çœ‹ cd å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯<code>help cd</code></p><p>è¯­æ³•ï¼šman [å‘½ä»¤æˆ–é…ç½®æ–‡ä»¶]<br>åŠŸèƒ½ï¼šè·å¾—å¸®åŠ©ä¿¡æ¯<br>ä¾‹å­ï¼šæŸ¥çœ‹lså‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯<code>man ls</code></p><ol><li><strong>æ–‡ä»¶ç›®å½•æŒ‡ä»¤</strong></li></ol><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">åŸºæœ¬è¯­æ³•ï¼špwd    (print working directory)<br>åŠŸèƒ½ï¼šæ˜¾ç¤ºå½“å‰ç›®å½•çš„ç»å¯¹è·¯å¾„<br>---------------------------------------------------------------------<br><br>åŸºæœ¬è¯­æ³•ï¼šls [é€‰é¡¹] [ç›®å½•æˆ–æ˜¯æ–‡ä»¶]<br>å¸¸ç”¨é€‰é¡¹ï¼š<br>-aï¼šæ˜¾ç¤ºå½“å‰ç›®å½•æ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒ…æ‹¬éšè—çš„ã€‚<br>-lï¼šä»¥åˆ—è¡¨çš„æ–¹å¼æ˜¾ç¤ºä¿¡æ¯<br>---------------------------------------------------------------------<br><br>åŸºæœ¬è¯­æ³•ï¼šcd [å‚æ•°]<br>åŠŸèƒ½ï¼šåˆ‡æ¢åˆ°æŒ‡å®šç›®å½•<br><br>cd ~ æˆ–è€… cd ---&gt;å›åˆ°å½“å‰ç”¨æˆ·çš„å®¶ç›®å½• <br>cd ..   ---&gt;å›åˆ°å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•<br><br>æ¡ˆä¾‹ 1ï¼šä½¿ç”¨ç»å¯¹è·¯å¾„åˆ‡æ¢åˆ° root ç›®å½•<br>cd /root<br><br>æ¡ˆä¾‹ 2ï¼šä½¿ç”¨ç›¸å¯¹è·¯å¾„åˆ° root ç›®å½•<br>æ¯”å¦‚å½“å‰åœ¨ /home/tom <br>cd ../../root    ../..å›åˆ°äº†æ ¹ç›®å½•,å†/root<br><br>---------------------------------------------------------------------<br><br>åŸºæœ¬è¯­æ³•ï¼šmkdir [é€‰é¡¹] è¦åˆ›å»ºçš„ç›®å½•è·¯å¾„<br>åŠŸèƒ½ï¼šåˆ›å»ºç›®å½•<br>å¸¸ç”¨é€‰é¡¹ï¼š<br>-pï¼šåˆ›å»ºå¤šçº§ç›®å½•<br><br>æ¡ˆä¾‹1ï¼šåœ¨homeä¸‹åˆ›å»ºä¸€ä¸ªç›®å½•dog<br>mkdir /home/dog<br><br>æ¡ˆä¾‹2ï¼šåœ¨homeä¸‹åˆ›å»ºå¤šçº§ç›®å½• /home/animal/tiger <br>mkdir -p /home/animal/tiger<br><br>---------------------------------------------------------------------<br><br>åŸºæœ¬è¯­æ³•ï¼šrmdir [é€‰é¡¹] è¦åˆ é™¤çš„ç©ºç›®å½•è·¯å¾„<br>åŠŸèƒ½ï¼šåˆ é™¤ä¸€ä¸ªç©ºç›®å½•<br><br>æ¡ˆä¾‹:åˆ é™¤ä¸€ä¸ªç›®å½• /home/dog<br>rmdir /home/dog<br><br>æ³¨æ„ï¼š<br>rmdir åˆ é™¤çš„æ˜¯ç©ºç›®å½•ï¼Œå¦‚æœç›®å½•ä¸‹æœ‰å†…å®¹æ˜¯æ— æ³•åˆ é™¤çš„ã€‚<br>å¦‚æœéœ€è¦åˆ é™¤éç©ºç›®å½•ï¼Œéœ€è¦ä½¿ç”¨å‘½ä»¤ï¼šrm -rf è¦åˆ é™¤çš„ç›®å½•<br>æ¯”å¦‚ï¼š åˆ é™¤animalç›®å½•<br>rm -rf /home/animal<br>---------------------------------------------------------------------<br><br>åŸºæœ¬è¯­æ³•ï¼štouch æ–‡ä»¶åç§°<br>åŠŸèƒ½ï¼šåˆ›å»ºç©ºæ–‡ä»¶<br><br>æ¡ˆä¾‹:ï¼šåœ¨/home ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ hello.txt<br>touch /home/hello.txt<br>æˆ–è€…å½“å‰ç›®å½•æ˜¯homeï¼štouch hello.text<br><br>---------------------------------------------------------------------<br><br>åŸºæœ¬è¯­æ³•ï¼šcp [é€‰é¡¹] è¢«æ‹·è´çš„æ–‡ä»¶ æ‹·è´åˆ°å“ªä¸ªåœ°æ–¹<br>åŠŸèƒ½ï¼šæ‹·è´æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•<br>å¸¸ç”¨é€‰é¡¹ï¼š<br>-rï¼šé€’å½’å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹<br><br>æ¡ˆä¾‹1ï¼šå°† /home/hello.txt  æ‹·è´åˆ°/home/bbb  ç›®å½•ä¸‹<br>è‹¥åœ¨æ ¹ç›®å½•ä¸‹æ“ä½œï¼š<br>å…ˆåˆ›å»º bbbç›®å½•<br>mkdir /home/bbb<br>ç„¶åå¤åˆ¶<br>cp /home/hello.txt /home/bbb<br><br>æ¡ˆä¾‹2ï¼šé€’å½’å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚å°† /home/bbb æ•´ä¸ªç›®å½•ï¼Œæ‹·è´åˆ° /opt <br>cp -r /home/bbb /opt<br><br>æ³¨æ„ï¼šå¼ºåˆ¶è¦†ç›–ä¸æç¤ºçš„æ–¹æ³•ï¼š\cp<br>\cp -r /home/bbb /opt<br><br>---------------------------------------------------------------------<br><br>åŸºæœ¬è¯­æ³•ï¼šrm[é€‰é¡¹] è¦åˆ é™¤çš„æ–‡ä»¶æˆ–ç›®å½•<br>åŠŸèƒ½ï¼šç§»é™¤æ–‡ä»¶æˆ–ç›®å½•<br>å¸¸ç”¨é€‰é¡¹ï¼š<br>-rï¼šé€’å½’åˆ é™¤æ•´ä¸ªæ–‡ä»¶å¤¹<br>-fï¼šå¼ºåˆ¶åˆ é™¤ä¸æç¤º<br><br>æ¡ˆä¾‹1ï¼šå°† /home/hello.txt åˆ é™¤ <br>rm/home/hello.txt<br><br>æ¡ˆä¾‹2ï¼šé€’å½’åˆ é™¤æ•´ä¸ªæ–‡ä»¶å¤¹ /home/bbb ï¼Œå¹¶ä¸æç¤º<br>rm -rf /home/bbb <br><br>æ³¨æ„ï¼šå¼ºåˆ¶åˆ é™¤ä¸æç¤ºçš„æ–¹æ³•ï¼šå¸¦ä¸Š -f å‚æ•°å³å¯<br>---------------------------------------------------------------------<br><br>åŠŸèƒ½ï¼šç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•æˆ–é‡å‘½å<br>åŸºæœ¬è¯­æ³•ï¼š<br>mvåŸæ–‡ä»¶å æ–°æ–‡ä»¶å      (åŠŸèƒ½æè¿°ï¼šé‡å‘½å)<br>mv  è¢«ç§»åŠ¨çš„æ–‡ä»¶ ç§»åŠ¨åˆ°å“ª   (åŠŸèƒ½æè¿°ï¼šç§»åŠ¨æ–‡ä»¶)<br><br>æ¡ˆä¾‹ 1: å°† /home/cat.txt æ–‡ä»¶ é‡æ–°å‘½åä¸º pig.txt<br>[root@hspEdu01 ~]# cd /home<br>[root@hspEdu01 home]# touch cat.txt<br>[root@hspEdu01 home]# ls<br>cat.txt  jack  king  milan  zwj<br>[root@hspEdu01 home]# mv cat.txt pig.txt<br>[root@hspEdu01 home]# ls<br>jack  king  milan  pig.txt  zwj<br><br>æ¡ˆä¾‹ 2:å°† /home/pig.txtæ–‡ä»¶ ç§»åŠ¨åˆ° /root ç›®å½•ä¸‹<br>[root@hspEdu01 home]# mv pig.txt /root<br>[root@hspEdu01 home]# ls<br>jack  king  milan  zwj<br>[root@hspEdu01 home]# cd /root<br>[root@hspEdu01 ~]# ls<br>Hello.java  pig.txt <br><br>ç§»åŠ¨å¹¶é‡åï¼šmv pig.txt /root/cow.txt<br><br>æ¡ˆä¾‹ 3: ç§»åŠ¨æ•´ä¸ªç›®å½•,æ¯”å¦‚å°† /opt/bbb  ç§»åŠ¨åˆ° /home ä¸‹<br> mv /opt/bbb /home/<br><br>---------------------------------------------------------------------<br>å‰é¢å­¦è¿‡ä¸€ä¸ªæŸ¥çœ‹ï¼švim<br>catä¹Ÿå¯ä»¥æŸ¥çœ‹ï¼Œcatåªèƒ½æŸ¥çœ‹ä¸èƒ½ä¿®æ”¹ï¼Œcatæ›´å®‰å…¨ã€‚<br><br>åŸºæœ¬è¯­æ³•ï¼šcat[é€‰é¡¹] è¦æŸ¥çœ‹çš„æ–‡ä»¶<br>åŠŸèƒ½ï¼šæŸ¥çœ‹æ–‡ä»¶å†…å®¹<br>å¸¸ç”¨é€‰é¡¹ï¼š<br>-nï¼šæ˜¾ç¤ºè¡Œå·<br><br>æ¡ˆä¾‹1ï¼šæŸ¥çœ‹ /etc/profile æ–‡ä»¶å†…å®¹ï¼Œå¹¶æ˜¾ç¤ºè¡Œå·ã€‚<br>cat-n /etc/profile <br>æ³¨æ„ï¼š<br>cat åªèƒ½æµè§ˆæ–‡ä»¶ï¼Œè€Œä¸èƒ½ä¿®æ”¹æ–‡ä»¶ï¼›ä¸ºäº†æµè§ˆæ–¹ä¾¿å†åŠ ä¸Šç®¡é“å‘½ä»¤ | more <br>ç®¡é“å‘½ä»¤ï¼šæŠŠå‰é¢çš„ç»“æœå†äº¤ç»™ä¸‹ä¸€ä¸ªæŒ‡ä»¤è¿›è¡Œå¤„ç†ã€‚<br>è¯­æ³•ï¼š| å…¶ä»–æŒ‡ä»¤<br><br>cat-n /etc/profile | more <br>æ„æ€ï¼šå…ˆæ‰§è¡Œcat -n /etc/profile ç„¶åï¼ŒæŒ‰å›è½¦é”®è¾“å‡ºä¸€è¡Œï¼ŒæŒ‰ç©ºæ ¼ç¿»é¡µç­‰ã€‚<br><br>---------------------------------------------------------------------<br><br>åŸºæœ¬è¯­æ³•ï¼šmore è¦æŸ¥çœ‹çš„æ–‡ä»¶<br>åŠŸèƒ½ï¼š<br>more æŒ‡ä»¤æ˜¯ä¸€ä¸ªåŸºäº VI ç¼–è¾‘å™¨çš„æ–‡æœ¬è¿‡æ»¤å™¨ï¼Œå®ƒä»¥å…¨å±å¹•çš„æ–¹å¼æŒ‰é¡µæ˜¾ç¤ºæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹ã€‚<br>more æŒ‡ä»¤ä¸­å†…ç½®äº†è‹¥å¹²å¿«æ·é”®(äº¤äº’çš„æŒ‡ä»¤)ï¼Œè¯¦è§æ“ä½œè¯´æ˜ï¼š<br><br></code></pre></td></tr></tbody></table></figure><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/567c27b6513c4c8f948226bc232b38dc.bmp" alt="img"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">åŸºæœ¬è¯­æ³•ï¼šless è¦æŸ¥çœ‹çš„æ–‡ä»¶<br>åŠŸèƒ½ï¼š<br>less æŒ‡ä»¤ç”¨æ¥åˆ†å±æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œå®ƒçš„åŠŸèƒ½ä¸ more æŒ‡ä»¤ç±»ä¼¼ï¼Œä½†æ˜¯æ¯” more æŒ‡ä»¤æ›´åŠ å¼ºå¤§ï¼Œæ”¯æŒå„ç§æ˜¾ç¤ºç»ˆç«¯ã€‚<br>less æŒ‡ä»¤åœ¨æ˜¾ç¤ºæ–‡ä»¶å†…å®¹æ—¶ï¼Œå¹¶ä¸æ˜¯ä¸€æ¬¡å°†æ•´ä¸ªæ–‡ä»¶åŠ è½½ä¹‹åæ‰æ˜¾ç¤ºï¼Œè€Œæ˜¯æ ¹æ®æ˜¾ç¤ºéœ€è¦åŠ è½½å†…å®¹ï¼Œå¯¹äºæ˜¾ç¤ºå¤§å‹æ–‡ä»¶å…·æœ‰è¾ƒé«˜çš„æ•ˆç‡ã€‚<br><br>æœ‰ä¸€ä¸ªæ–‡ä»¶æ˜¯100Mï¼Œç”¨vimæŸ¥çœ‹ä¼šå°†å…¶å…¨éƒ¨åŠ è½½å†æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·ä¼šå¾ˆæ…¢ã€‚<br>ä½¿ç”¨lessï¼Œä¼šå…ˆåŠ è½½ä¸€éƒ¨åˆ†æ˜¾ç¤ºå‡ºæ¥ï¼Œå†æ ¹æ®æŒ‡ä»¤æ˜¾ç¤ºå‰©ä¸‹çš„ï¼Œè¿™æ ·æ›´å¿«ã€‚<br><br>æ‰€ä»¥è¦æŸ¥æ‰¾ä¸€äº›å¤§çš„æ–‡ä»¶ï¼Œå»ºè®®ç”¨lessã€‚<br>æ¡ˆä¾‹: é‡‡ç”¨ less æŸ¥çœ‹ä¸€ä¸ªå¤§æ–‡ä»¶æ–‡ä»¶ /opt/æ‚æ–‡.txt<br>é¦–å…ˆä½¿ç”¨xftpå°†æ‚æ–‡.txtä¼ è¾“åˆ°optä¸‹<br>ç„¶åè¾“å…¥æŒ‡ä»¤ï¼šless /opt/æ‚æ–‡.txt  <br><br>ä¸‹é¢æ“ä½œä¸­ï¼š<br>æƒ³è¦æ‰¾æŸä¸ªå­—æˆ–è¯<br>è¾“å…¥ï¼š/è¦æ‰¾çš„å­—æˆ–è¯    ç„¶åæŒ‰nå‘ä¸‹æ‰¾  æŒ‰Nå‘ä¸Šæ‰¾<br>æ“ä½œè¯´æ˜ï¼š<br></code></pre></td></tr></tbody></table></figure><h2 id="ç¬¬ä¸ƒç« -Linux-å®æ“-å¼€æœºã€é‡å¯å’Œç”¨æˆ·æ³¨é”€"><a href="#ç¬¬ä¸ƒç« -Linux-å®æ“-å¼€æœºã€é‡å¯å’Œç”¨æˆ·æ³¨é”€" class="headerlink" title="ç¬¬ä¸ƒç«  Linux å®æ“-å¼€æœºã€é‡å¯å’Œç”¨æˆ·æ³¨é”€"></a>ç¬¬ä¸ƒç«  Linux å®æ“-å¼€æœºã€é‡å¯å’Œç”¨æˆ·æ³¨é”€</h2><h3 id="7-1-å…³æœº-amp-é‡å¯å‘½ä»¤"><a href="#7-1-å…³æœº-amp-é‡å¯å‘½ä»¤" class="headerlink" title="7.1 å…³æœº&amp;é‡å¯å‘½ä»¤"></a>7.1 å…³æœº&amp;é‡å¯å‘½ä»¤</h3><ul><li><code>shutdown</code>   -h   now     ç«‹åˆ»è¿›è¡Œå…³æœº</li><li>shutdown   -h     1               â€œhello,1åˆ†é’Ÿåå°±ä¼šå…³æœºäº†â€ </li><li>shutdown    -r     now             ç°åœ¨é‡æ–°å¯åŠ¨è®¡ç®—æœº</li><li>halt                                            å…³æœº</li><li>reboot                                      ç°åœ¨é‡æ–°å¯åŠ¨è®¡ç®—æœº</li><li>sync                                           æŠŠå†…å­˜çš„æ•°æ®åŒæ­¥åˆ°ç£ç›˜ä¸Š</li></ul><p>æ³¨æ„ï¼šä¸ç®¡é‡å¯ç³»ç»Ÿè¿˜æ˜¯å…³é—­ç³»ç»Ÿï¼Œé¦–å…ˆè¦è¿è¡Œsyncå‘½ä»¤ï¼ŒæŠŠå†…å­˜çš„æ•°æ®å†™åˆ°ç£ç›˜ä¸­</p><p>å…¶ä¸­<code>shutdown/reboot/halt</code> ç­‰å‘½ä»¤å‡å·²åœ¨å…³æœºå‰è¿›è¡Œäº†sync</p><h3 id="7-2-ç”¨æˆ·ç™»å½•å’Œæ³¨é”€"><a href="#7-2-ç”¨æˆ·ç™»å½•å’Œæ³¨é”€" class="headerlink" title="7.2  ç”¨æˆ·ç™»å½•å’Œæ³¨é”€"></a>7.2  ç”¨æˆ·ç™»å½•å’Œæ³¨é”€</h3><ol><li><code>su -ç”¨æˆ·å</code>ç”¨æ¥åˆ‡æ¢æˆç®¡ç†å‘˜èº«ä»½å’Œç”¨æˆ·èº«ä»½</li><li><code>logout</code> ç«‹å³æ³¨é”€ç”¨æˆ·</li></ol><p>æ³¨æ„ï¼š<code>logout</code>æ³¨é”€å‘½ä»¤åœ¨å›¾å½¢è¿è¡Œçº§åˆ«æ— æ•ˆï¼Œåœ¨è¿è¡Œçº§åˆ«3ä»¥ä¸‹æœ‰æ•ˆ</p><h2 id="ç¬¬å…«ç« -LINUXå®æ“ç¯‡-ç”¨æˆ·ç®¡ç†"><a href="#ç¬¬å…«ç« -LINUXå®æ“ç¯‡-ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç¬¬å…«ç«  LINUXå®æ“ç¯‡-ç”¨æˆ·ç®¡ç†"></a>ç¬¬å…«ç«  LINUXå®æ“ç¯‡-ç”¨æˆ·ç®¡ç†</h2><h3 id="8-1-åŸºæœ¬ä»‹ç»"><a href="#8-1-åŸºæœ¬ä»‹ç»" class="headerlink" title="8.1 åŸºæœ¬ä»‹ç»"></a>8.1 åŸºæœ¬ä»‹ç»</h3><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221019090240881.png" alt="image-20221019090240881"></p><h3 id="8-2-æ·»åŠ ç”¨æˆ·"><a href="#8-2-æ·»åŠ ç”¨æˆ·" class="headerlink" title="8.2 æ·»åŠ ç”¨æˆ·"></a>8.2 æ·»åŠ ç”¨æˆ·</h3><h4 id="8-2-1-åŸºæœ¬è¯­æ³•"><a href="#8-2-1-åŸºæœ¬è¯­æ³•" class="headerlink" title="8.2.1 åŸºæœ¬è¯­æ³•"></a>8.2.1 åŸºæœ¬è¯­æ³•</h4><p><code>useradd</code> ç”¨æˆ·å</p><ul><li>ç»†èŠ‚:å½“åˆ›å»ºç”¨æˆ·å®Œæˆåï¼Œä¼šè‡ªåŠ¨åˆ›å»ºå’Œç”¨æˆ·åŒåçš„å®¶ç›®å½•</li><li>ä¹Ÿå¯ä»¥é€šè¿‡useradd -d æŒ‡å®šç›®å½• æ–°çš„ç”¨æˆ·å ï¼Œç»™æ–°åˆ›å»ºçš„ç”¨æˆ·æŒ‡å®šå®¶ç›®å½•</li></ul><h3 id="8-3-æŒ‡å®šä¿®æ”¹å¯†ç "><a href="#8-3-æŒ‡å®šä¿®æ”¹å¯†ç " class="headerlink" title="8.3 æŒ‡å®šä¿®æ”¹å¯†ç "></a>8.3 æŒ‡å®šä¿®æ”¹å¯†ç </h3><p><code>passwd</code> ç”¨æˆ·å           ä¾‹å­ï¼š  passwd    milan   ç»™ç±³è“ æŒ‡å®šå¯†ç </p><h3 id="8-4-åˆ é™¤ç”¨æˆ·"><a href="#8-4-åˆ é™¤ç”¨æˆ·" class="headerlink" title="8.4 åˆ é™¤ç”¨æˆ·"></a>8.4 åˆ é™¤ç”¨æˆ·</h3><p><code>userdel</code>   ç”¨æˆ·å</p><ul><li>userdel  milan  åˆ é™¤ç”¨æˆ·ä½†æ˜¯ä¿ç•™å®¶ç›®å½•</li><li>åˆ é™¤ç”¨æˆ·åŠç”¨æˆ·çš„ä¸»ç›®å½•ï¼šuserdel -r tom</li></ul><h3 id="8-5-æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æŒ‡ä»¤"><a href="#8-5-æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æŒ‡ä»¤" class="headerlink" title="8.5 æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æŒ‡ä»¤"></a>8.5 æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æŒ‡ä»¤</h3><p>id ç”¨æˆ·å       ä¾‹å¦‚   # id  root    æŸ¥è¯¢rootçš„ä¿¡æ¯ </p><p>ç»†èŠ‚ï¼šå½“ç”¨æˆ·ä¸å­˜åœ¨æ˜¯ï¼Œè¿”å›æ— æ­¤ç”¨æˆ·</p><h3 id="8-6-åˆ‡æ¢ç”¨æˆ·"><a href="#8-6-åˆ‡æ¢ç”¨æˆ·" class="headerlink" title="8.6 åˆ‡æ¢ç”¨æˆ·"></a>8.6 åˆ‡æ¢ç”¨æˆ·</h3><p>su       åˆ‡æ¢ç”¨æˆ·å</p><ul><li>ä»æƒé™é«˜çš„ç”¨æˆ·åˆ‡æ¢åˆ°æƒé™ä½çš„ç”¨æˆ·ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç åä¹‹éœ€è¦</li><li>å½“éœ€è¦è¿”å›åˆ°åŸæ¥ç”¨æˆ·çš„æ¡Œé¢æ˜¯ï¼Œä½¿ç”¨exit/logout æŒ‡ä»¤</li></ul><h3 id="8-7-æŸ¥çœ‹å½“å‰ç”¨æˆ·-ç™»å½•ç”¨æˆ·"><a href="#8-7-æŸ¥çœ‹å½“å‰ç”¨æˆ·-ç™»å½•ç”¨æˆ·" class="headerlink" title="8.7 æŸ¥çœ‹å½“å‰ç”¨æˆ·/ç™»å½•ç”¨æˆ·"></a>8.7 æŸ¥çœ‹å½“å‰ç”¨æˆ·/ç™»å½•ç”¨æˆ·</h3><p><code>whoami/ who  an  i</code></p><h3 id="8-8-ç”¨æˆ·ç»„"><a href="#8-8-ç”¨æˆ·ç»„" class="headerlink" title="8.8 ç”¨æˆ·ç»„"></a>8.8 ç”¨æˆ·ç»„</h3><p><code>groupadd</code>   ç»„å</p><p>åˆ é™¤ç»„ï¼š<code>gropudel</code> ç»„å</p><ul><li>å¢åŠ ç”¨æˆ·æ—¶ç›´æ¥åŠ å…¥ç»„</li><li>useradd -g ç”¨æˆ·ç»„  ç”¨æˆ·å</li><li>å¢åŠ ä¸€ä¸ªç”¨æˆ· zwj  ç›´æ¥æŒ‡å®šä»–çš„ç»„ä¸º wudang</li><li>groupadd wudang           useradd -g wudang zwj</li></ul><p>ä¿®æ”¹ç”¨æˆ·çš„ç»„</p><figure class="highlight plaintext"><figcaption><span>-g```  ç”¨æˆ·ç»„  ç”¨æˆ·å</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><code class="hljs usermod"><br>### 8.9 ç”¨æˆ·å’Œç»„çš„ç›¸å…³æ–‡ä»¶<br><br>`/etc/passwd` æ–‡ä»¶ æ¯è¡Œçš„å«ä¹‰ :ç”¨æˆ·åï¼šå£ä»¤ï¼šç”¨æˆ·æ ‡è¯†ç¬¦ï¼šæ³¨é‡Šæ€§æè¿°ï¼šä¸»ç›®å½•ï¼šç™»å½•Shell<br><br>`/etc/shadow` æ–‡ä»¶ æ¯è¡Œçš„å«ä¹‰ï¼šç™»å½•åï¼šåŠ å¯†å£ä»¤ï¼šæœ€åä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ï¼šæœ€å°æ—¶é—´é—´éš”ï¼šæœ€å¤§æ—¶é—´é—´éš”ï¼šä¸æ´»åŠ¨æ—¶é—´ï¼šå¤±æ•ˆæ—¶é—´ï¼šæ ‡å¿—<br><br>`/etc/group` æ–‡ä»¶  æ¯è¡Œçš„å«ä¹‰:ç»„åï¼šç»„æ ‡è¯†å·ï¼šç»„å†…ç”¨æˆ·åˆ—è¡¨<br><br>## ç¬¬ä¹ç«  LINUXå®æ“ç¯‡-å®ç”¨æŒ‡ä»¤<br><br>0ï¼šå…³æœº<br><br>1ï¼šå•ç”¨æˆ·ã€å¯ä»¥æ‰¾å›ä¸¢å¤±å¯†ç ã€‘<br><br>2ï¼šå¤šç”¨æˆ·çŠ¶æ€æ²¡æœ‰ç½‘ç»œæœåŠ¡(ä¸€èˆ¬ä¸ç”¨ï¼Œæ²¡ç½‘ç»œ) <br><br>3ï¼šå¤šç”¨æˆ·çŠ¶æ€æœ‰ç½‘ç»œæœåŠ¡ <br><br>4ï¼šç³»ç»Ÿæœªä½¿ç”¨ä¿ç•™ç»™ç”¨æˆ· <br><br>5ï¼šå›¾å½¢ç•Œé¢ <br><br>6ï¼šç³»ç»Ÿé‡å¯<br><br>å¸¸ç”¨è¿è¡Œçº§åˆ«æ˜¯ 3 å’Œ 5  åˆ‡æ¢è¿è¡Œçº§åˆ«å‘½ä»¤ï¼šinit  * (é€‰åˆ™0-6çš„ä¸€ä¸ª)<br><br>CentOS7ä¹‹å‰æ˜¯åœ¨æ–‡ä»¶/etc/inittabæ–‡ä»¶ä¸­è®¾ç½®åœ¨å…¶ä¹‹åè®¾ç½®è¿›è¡Œäº†ç®€åŒ–ï¼š<br><br>`multi-user.target:analogous to runlevel 3`<br><br>`graphical.target:analogous to runlevel 5`<br><br>`systemctl get-default` æŸ¥çœ‹å½“å‰ç³»ç»Ÿè¿è¡Œçº§åˆ«<br><br>`systemctl set-default multi-user.target /graphical.target`  è®¾ç½®é»˜è®¤è¿è¡Œçº§åˆ«<br><br>**æ‰¾å›ç”¨æˆ·å¯†ç **<br><br>1. å†å¼€æœºå¯åŠ¨è¿›å…¥å¼€æœºç•Œé¢æŒ‰'e'è¿›å…¥ç¼–è¾‘ç•Œé¢ç„¶å<br>2. æ‰¾åˆ°ä»¥ LINXU16å¼€å¤´çš„è¡Œ åœ¨æœ€åè¾“å…¥çš„`init=/bin/sh`<br>3. è¾“å…¥å®ŒæˆåæŒ‰`Ctrl+x`è¿›å…¥å•ç”¨æˆ·æ¨¡å¼<br>4. æ¥ç€åœ¨å…‰æ ‡é—ªçƒçš„ä½ç½®ä¸­è¾“å…¥ : `mount -o remount,rw /` æ¯ä¸ªå•è¯é—´æœ‰ç©ºæ ¼ å®Œæˆåå›è½¦<br>5. åœ¨æ–°çš„ä¸€è¡Œæœ€åè¾“å…¥: passwd  å®Œæˆä¿®æ”¹ å†æ¬¡è¾“å…¥å¯†ç <br>6. æ¥ç€åœ¨é¼ æ ‡é—ªçƒçš„æœ€åä¸€è¡Œä¸­è¾“å…¥:`touch /.autorelable`  (æ³¨æ„touchä¸/åæœ‰ä¸€ä¸ªç©ºæ ¼)å®Œæˆåå›è½¦<br>7. æ¥ç€åœ¨è¾“å…¥ `exec /sbin/init` å®Œæˆåå›è½¦ç­‰å¾…ç³»ç»Ÿé‡å¯<br><br>**å¸®åŠ©æŒ‡ä»¤**<br><br>man ã€å‘½ä»¤æˆ–é…ç½®æ–‡ä»¶ã€‘<br><br>ä¾‹å¦‚ è¾“å…¥ `man ls` ä¹‹åï¼Œä¼šçœ‹åˆ°lsçš„å…·ä½“ä¿¡æ¯(è¦å›åˆ°å‰ä¸€ä¸ªé¡µé¢ï¼Œè¾“å…¥q)<br><br>ls   ï¼ˆåˆ—å‡ºç›®å½•å†…å®¹ï¼‰<br><br>æŒ‡ä»¤ï¼šls [é€‰é¡¹] [æ–‡ä»¶å...]<br><br>â€‹            ls  -a  ---&gt;åˆ—å‡ºæ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶(éšè—æ–‡ä»¶ä»¥ . å¼€å¤´)<br><br>â€‹ls  -l  ---&gt;å•åˆ—è¾“å‡º <br><br>å¯ä»¥ä»¥ -å¼€å§‹ä½¿ç”¨ç»„åˆï¼Œæ²¡æœ‰é¡ºåº<br><br>ä¾‹å¦‚ï¼š `ls -al`  æˆ–è€… `ls -a -l`  ï¼šè¡¨ç¤ºåˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶å¹¶å•åˆ—è¾“å‡º<br><br>â€‹`ls -al /root`  ï¼šæŠŠrootç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å•åˆ—è¾“å‡º<br><br>`help` å‘½ä»¤ï¼šè·å¾— shell å†…ç½®å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯<br><br> **å…³äºæ–‡ä»¶ç›®å½•çš„æŒ‡ä»¤**<br><br>`pwd    (print working directory)` ï¼šæ˜¾ç¤ºå½“å‰ç›®å½•çš„ç»å¯¹è·¯å¾„<br><br>åŸºæœ¬è¯­æ³•ï¼š`ls  [é€‰é¡¹] [ç›®å½•æˆ–æ˜¯æ–‡ä»¶]`<br><br>å¸¸ç”¨é€‰é¡¹ï¼š`-aï¼šæ˜¾ç¤ºå½“å‰ç›®å½•æ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒ…æ‹¬éšè—çš„ã€‚`<br><br>â€‹`-lï¼šä»¥åˆ—è¡¨çš„æ–¹å¼æ˜¾ç¤ºä¿¡æ¯`<br><br>åŸºæœ¬è¯­æ³•ï¼š`cd [å‚æ•°]`  ï¼šåˆ‡æ¢åˆ°æŒ‡å®šç›®å½•<br><br>â€‹`cd ~ æˆ–è€… cd` ï¼šå›åˆ°å½“å‰ç”¨æˆ·çš„å®¶ç›®å½• <br><br>â€‹`cd ..`  ï¼šå›åˆ°å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•<br><br>â€‹`cd /root`ï¼šä½¿ç”¨ç»å¯¹è·¯å¾„åˆ‡æ¢åˆ° root ç›®å½•<br><br>åŸºæœ¬è¯­æ³•ï¼š`mkdir [é€‰é¡¹] è¦åˆ›å»ºçš„ç›®å½•è·¯å¾„` ï¼šåˆ›å»ºç›®å½•<br><br>â€‹`madir -p è¦åˆ›å»ºçš„ç›®å½•è·¯å¾„` :   åˆ›å»ºå¤šçº§ç›®å½•<br><br>ä¾‹å¦‚ï¼š `mkdir /home/dog` ï¼šåœ¨homeä¸‹åˆ›å»ºä¸€ä¸ªç›®å½•dog<br><br>â€‹`mkdir -p /home/animal/tiger`  ï¼šåœ¨homeä¸‹åˆ›å»ºå¤šçº§ç›®å½• /home/animal/tiger <br><br>åŸºæœ¬è¯­æ³•ï¼š`rmdir [é€‰é¡¹] è¦åˆ é™¤çš„ç©ºç›®å½•è·¯å¾„`  ï¼šåˆ é™¤ä¸€ä¸ªç©ºç›®å½•<br><br>æ³¨æ„ï¼š rmdir åˆ é™¤çš„æ˜¯ç©ºç›®å½•ï¼Œå¦‚æœç›®å½•ä¸‹æœ‰å†…å®¹æ˜¯æ— æ³•åˆ é™¤çš„ã€‚ å¦‚æœéœ€è¦åˆ é™¤éç©ºç›®å½•ï¼Œéœ€è¦ä½¿ç”¨å‘½ä»¤ï¼šrm -rf è¦åˆ é™¤çš„ç›®å½•<br><br>ä¾‹å¦‚ï¼š`rm -rf /home/animal` ï¼šåˆ é™¤animalç›®å½•<br><br>åŸºæœ¬è¯­æ³•ï¼š`touch æ–‡ä»¶åç§° ` ï¼šåˆ›å»ºç©ºæ–‡ä»¶<br><br>ä¾‹å¦‚; `touch /home/hello.txt`  :åœ¨/home ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ hello.txt<br><br>åŸºæœ¬è¯­æ³•ï¼š`cp [é€‰é¡¹] è¢«æ‹·è´çš„æ–‡ä»¶ æ‹·è´åˆ°å“ªä¸ªåœ°æ–¹ ` :æ‹·è´æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•<br><br>â€‹é€‰é¡¹-rï¼šé€’å½’å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹<br><br> ä¾‹å¦‚ï¼š`cp /home/hello.txt /home/bbb` ï¼šå°† /home/hello.txt  æ‹·è´åˆ°/home/bbb  ç›®å½•ä¸‹<br><br>â€‹`cp -r /home/bbb /opt `ï¼šé€’å½’å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚å°† /home/bbb æ•´ä¸ªç›®å½•ï¼Œæ‹·è´åˆ° /opt <br><br>â€‹`\cp -r /home/bbb /opt` ï¼šå¼ºåˆ¶è¦†ç›–ä¸æç¤ºçš„æ–¹æ³•ï¼š\cp<br><br>åŸºæœ¬è¯­æ³•ï¼š`rm[é€‰é¡¹] è¦åˆ é™¤çš„æ–‡ä»¶æˆ–ç›®å½•` ï¼šç§»é™¤æ–‡ä»¶æˆ–ç›®å½•<br><br>å¸¸ç”¨é€‰é¡¹ï¼š-rï¼šé€’å½’åˆ é™¤æ•´ä¸ªæ–‡ä»¶å¤¹<br><br>â€‹-fï¼šå¼ºåˆ¶åˆ é™¤ä¸æç¤º<br><br>ä¾‹å¦‚ï¼š `rm -rf /home/bbb`  ï¼šé€’å½’åˆ é™¤æ•´ä¸ªæ–‡ä»¶å¤¹ /home/bbb ï¼Œå¹¶ä¸æç¤º<br><br>æ³¨æ„ï¼šå¼ºåˆ¶åˆ é™¤ä¸æç¤ºçš„æ–¹æ³•ï¼šå¸¦ä¸Š -f å‚æ•°å³å¯<br><br>```shell<br>åŸºæœ¬è¯­æ³•ï¼š<br>mvåŸæ–‡ä»¶å æ–°æ–‡ä»¶å      (åŠŸèƒ½æè¿°ï¼šé‡å‘½å)<br>mv  è¢«ç§»åŠ¨çš„æ–‡ä»¶ ç§»åŠ¨åˆ°å“ª   (åŠŸèƒ½æè¿°ï¼šç§»åŠ¨æ–‡ä»¶)<br>æ¡ˆä¾‹ :å°† /home/cat.txt æ–‡ä»¶ é‡æ–°å‘½åä¸º pig.txt<br>[root@hspEdu01 ~]# cd /home<br>[root@hspEdu01 home]# touch cat.txt<br>[root@hspEdu01 home]# ls<br>cat.txt  jack  king  milan  zwj<br>[root@hspEdu01 home]# mv cat.txt pig.txt<br>[root@hspEdu01 home]# ls<br>jack  king  milan  pig.txt  zwj<br>æ¡ˆä¾‹ 2:å°† /home/pig.txtæ–‡ä»¶ ç§»åŠ¨åˆ° /root ç›®å½•ä¸‹<br>[root@hspEdu01 home]# mv pig.txt /root<br>[root@hspEdu01 home]# ls<br>jack  king  milan  zwj<br>[root@hspEdu01 home]# cd /root<br>[root@hspEdu01 ~]# ls<br>Hello.java  pig.txt <br>ç§»åŠ¨å¹¶é‡åï¼šmv pig.txt /root/cow.txt<br>æ¡ˆä¾‹ 3: ç§»åŠ¨æ•´ä¸ªç›®å½•,æ¯”å¦‚å°† /opt/bbb  ç§»åŠ¨åˆ° /home ä¸‹<br> mv /opt/bbb /home/<br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim å’Œ cat éƒ½å¯ä»¥æŸ¥çœ‹ä½†æ˜¯ï¼šcatåªèƒ½æŸ¥çœ‹ä¸èƒ½ä¿®æ”¹ï¼Œcatæ›´å®‰å…¨ã€‚<br>åŸºæœ¬è¯­æ³•ï¼š<br>cat[é€‰é¡¹] è¦æŸ¥çœ‹çš„æ–‡ä»¶<br>åŠŸèƒ½ï¼šæŸ¥çœ‹æ–‡ä»¶å†…å®¹<br>å¸¸ç”¨é€‰é¡¹ï¼š<br>-nï¼šæ˜¾ç¤ºè¡Œå·<br>æ¡ˆä¾‹1ï¼šæŸ¥çœ‹ /etc/profile æ–‡ä»¶å†…å®¹ï¼Œå¹¶æ˜¾ç¤ºè¡Œå·ã€‚<br>cat-n /etc/profile<br>æ³¨æ„ï¼š        <br>cat åªèƒ½æµè§ˆæ–‡ä»¶ï¼Œè€Œä¸èƒ½ä¿®æ”¹æ–‡ä»¶ï¼›ä¸ºäº†æµè§ˆæ–¹ä¾¿å†åŠ ä¸Šç®¡é“å‘½ä»¤ | more <br>ç®¡é“å‘½ä»¤ï¼šæŠŠå‰é¢çš„ç»“æœå†äº¤ç»™ä¸‹ä¸€ä¸ªæŒ‡ä»¤è¿›è¡Œå¤„ç†ã€‚<br>è¯­æ³•ï¼š| å…¶ä»–æŒ‡ä»¤<br><br>cat-n /etc/profile | more <br>æ„æ€ï¼šå…ˆæ‰§è¡Œcat -n /etc/profile ç„¶åï¼ŒæŒ‰å›è½¦é”®è¾“å‡ºä¸€è¡Œï¼ŒæŒ‰ç©ºæ ¼ç¿»é¡µç­‰ã€‚<br>åŸºæœ¬è¯­æ³•ï¼šmore è¦æŸ¥çœ‹çš„æ–‡ä»¶<br>åŠŸèƒ½:<br>more æŒ‡ä»¤æ˜¯ä¸€ä¸ªåŸºäº VI ç¼–è¾‘å™¨çš„æ–‡æœ¬è¿‡æ»¤å™¨ï¼Œå®ƒä»¥å…¨å±å¹•çš„æ–¹å¼æŒ‰é¡µæ˜¾ç¤ºæ–‡æœ¬æ–‡ä»¶çš„å†…å®¹ã€‚<br>more æŒ‡ä»¤ä¸­å†…ç½®äº†è‹¥å¹²å¿«æ·é”®(äº¤äº’çš„æŒ‡ä»¤)ï¼Œè¯¦è§æ“ä½œè¯´æ˜ï¼š<br></code></pre></td></tr></tbody></table></figure><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221019100037822.png" alt="image-20221019100037822"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">åŸºæœ¬è¯­æ³•ï¼šless è¦æŸ¥çœ‹çš„æ–‡ä»¶</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">åŠŸèƒ½ï¼š</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">less æŒ‡ä»¤ç”¨æ¥åˆ†å±æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œå®ƒçš„åŠŸèƒ½ä¸ more æŒ‡ä»¤ç±»ä¼¼ï¼Œä½†æ˜¯æ¯” more æŒ‡ä»¤æ›´åŠ å¼ºå¤§ï¼Œæ”¯æŒå„ç§æ˜¾ç¤ºç»ˆç«¯ã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">less æŒ‡ä»¤åœ¨æ˜¾ç¤ºæ–‡ä»¶å†…å®¹æ—¶ï¼Œå¹¶ä¸æ˜¯ä¸€æ¬¡å°†æ•´ä¸ªæ–‡ä»¶åŠ è½½ä¹‹åæ‰æ˜¾ç¤ºï¼Œè€Œæ˜¯æ ¹æ®æ˜¾ç¤ºéœ€è¦åŠ è½½å†…å®¹ï¼Œå¯¹äºæ˜¾ç¤ºå¤§å‹æ–‡ä»¶å…·æœ‰è¾ƒé«˜çš„æ•ˆç‡ã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æœ‰ä¸€ä¸ªæ–‡ä»¶æ˜¯100Mï¼Œç”¨vimæŸ¥çœ‹ä¼šå°†å…¶å…¨éƒ¨åŠ è½½å†æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·ä¼šå¾ˆæ…¢ã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä½¿ç”¨lessï¼Œä¼šå…ˆåŠ è½½ä¸€éƒ¨åˆ†æ˜¾ç¤ºå‡ºæ¥ï¼Œå†æ ¹æ®æŒ‡ä»¤æ˜¾ç¤ºå‰©ä¸‹çš„ï¼Œè¿™æ ·æ›´å¿«ã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ‰€ä»¥è¦æŸ¥æ‰¾ä¸€äº›å¤§çš„æ–‡ä»¶ï¼Œå»ºè®®ç”¨lessã€‚</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹: é‡‡ç”¨ less æŸ¥çœ‹ä¸€ä¸ªå¤§æ–‡ä»¶æ–‡ä»¶ /opt/æ‚æ–‡.txt</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">è¾“å…¥æŒ‡ä»¤ï¼š</span><br>less /opt/æ‚æ–‡.txt  <br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¸‹é¢æ“ä½œä¸­ï¼š</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æƒ³è¦æ‰¾æŸä¸ªå­—æˆ–è¯</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">è¾“å…¥ï¼š/è¦æ‰¾çš„å­—æˆ–è¯    ç„¶åæŒ‰nå‘ä¸‹æ‰¾  æŒ‰Nå‘ä¸Šæ‰¾</span><br></code></pre></td></tr></tbody></table></figure><p>æ“ä½œè¯´æ˜ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221019100348211.png" alt="image-20221019100348211"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">åŸºæœ¬è¯­æ³•ï¼šecho [é€‰é¡¹][è¾“å‡ºå†…å®¹]<br><span class="hljs-meta prompt_">#</span><span class="language-bash">åŠŸèƒ½ï¼šè¾“å‡ºå†…å®¹åˆ°æ§åˆ¶å°</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹: ä½¿ç”¨ <span class="hljs-built_in">echo</span>  æŒ‡ä»¤è¾“å‡ºç¯å¢ƒå˜é‡</span><br>echo $HOSTNAME (ç¯å¢ƒå˜é‡ä¸€èˆ¬åŠ $)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹: ä½¿ç”¨ <span class="hljs-built_in">echo</span> æŒ‡ä»¤è¾“å‡º hello,world!</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">è¾“å…¥ï¼š<span class="hljs-built_in">echo</span> hello,world!</span><br> echo "hello,world!"  #åŠ ä¸åŠ å¼•å·éƒ½å¯ä»¥<br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">åŠŸèƒ½ï¼š<span class="hljs-built_in">head</span> ç”¨äºæ˜¾ç¤ºæ–‡ä»¶çš„å¼€å¤´éƒ¨åˆ†å†…å®¹ï¼Œé»˜è®¤æƒ…å†µä¸‹ <span class="hljs-built_in">head</span> æŒ‡ä»¤æ˜¾ç¤ºæ–‡ä»¶çš„å‰ 10 è¡Œå†…å®¹ã€‚</span><br>åŸºæœ¬è¯­æ³•ï¼š<br>head  æ–‡ä»¶    #(åŠŸèƒ½æè¿°ï¼šæŸ¥çœ‹æ–‡ä»¶å¤´ 10 è¡Œå†…å®¹)<br>head -n 5 æ–‡ä»¶#(åŠŸèƒ½æè¿°ï¼šæŸ¥çœ‹æ–‡ä»¶å¤´ 5 è¡Œå†…å®¹ï¼Œ5 å¯ä»¥æ˜¯ä»»æ„è¡Œæ•°)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹: æŸ¥çœ‹/etc/profile çš„å‰é¢ 5 è¡Œä»£ç </span><br>head -n 5 /etc/profile<br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#åŠŸèƒ½ï¼štail ç”¨äºè¾“å‡ºæ–‡ä»¶ä¸­å°¾éƒ¨çš„å†…å®¹ï¼Œé»˜è®¤æƒ…å†µä¸‹ tail æŒ‡ä»¤æ˜¾ç¤ºæ–‡ä»¶çš„å‰ 10 è¡Œå†…å®¹ã€‚</span></span><br>åŸºæœ¬è¯­æ³•ï¼š<br>tail æ–‡ä»¶    #ï¼ˆåŠŸèƒ½æè¿°ï¼šæŸ¥çœ‹æ–‡ä»¶å°¾ 10 è¡Œå†…å®¹ï¼‰<br>tail -n 5 æ–‡ä»¶#ï¼ˆåŠŸèƒ½æè¿°ï¼šæŸ¥çœ‹æ–‡ä»¶å°¾ 5 è¡Œå†…å®¹ï¼Œ5 å¯ä»¥æ˜¯ä»»æ„è¡Œæ•°ï¼‰<br>tail -fæ–‡ä»¶    #ï¼ˆåŠŸèƒ½æè¿°ï¼šå®æ—¶è¿½è¸ªè¯¥æ–‡æ¡£çš„æ‰€æœ‰æ›´æ–°ï¼Œåªè¦è¯¥æ–‡ä»¶æ”¹åŠ¨äº†ä»€ä¹ˆå†…å®¹å°±å¯å®æ—¶çœ‹åˆ°ï¼‰<br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">æŒ‡ä»¤å’Œ&gt;&gt;æŒ‡ä»¤ï¼š</span><br><span class="hljs-meta prompt_">&gt; </span><span class="language-bash">è¾“å‡ºé‡å®šå‘(è¦†ç›–)</span><br>    &gt;&gt; è¿½åŠ <br>åŸºæœ¬è¯­æ³•ï¼š<br>ls -l &gt;æ–‡ä»¶1         #(åŠŸèƒ½æè¿°ï¼šå°†åˆ—è¡¨çš„å†…å®¹å†™å…¥æ–‡ä»¶1ä¸­(è¦†ç›–å†™))<br>ls -al &gt;&gt;æ–‡ä»¶1        #(åŠŸèƒ½æè¿°ï¼šå°†åˆ—è¡¨çš„å†…å®¹è¿½åŠ åˆ°æ–‡ä»¶1çš„æœ«å°¾)<br>cat æ–‡ä»¶ 1 &gt; æ–‡ä»¶ 2  #(åŠŸèƒ½æè¿°ï¼šå°†æ–‡ä»¶ 1 çš„å†…å®¹è¦†ç›–åˆ°æ–‡ä»¶ 2)<br>echo "å†…å®¹"&gt;&gt; æ–‡ä»¶1     #(å°†å†…å®¹è¿½åŠ åˆ°æ–‡ä»¶1çš„æœ«å°¾)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 1: å°† /home ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ å†™å…¥åˆ° /home/info.txt ä¸­,è¦†ç›–å†™å…¥ã€‚</span><br>ls -l /home &gt; /home/info.txt#[å¦‚æœ info.txt æ²¡æœ‰ï¼Œåˆ™ä¼šè‡ªåŠ¨åˆ›å»º] <br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 2: å°†å½“å‰æ—¥å†ä¿¡æ¯ è¿½åŠ åˆ°/home/mycal æ–‡ä»¶ä¸­</span><br>cal &gt;&gt; /home/mycal<br><span class="hljs-meta prompt_">#</span><span class="language-bash">åŠŸèƒ½ï¼šç»™åŸæ–‡ä»¶åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"> è½¯é“¾æ¥ä¹Ÿç§°ä¸ºç¬¦å·é“¾æ¥ï¼Œç±»ä¼¼äº windows é‡Œçš„å¿«æ·æ–¹å¼ï¼Œä¸»è¦å­˜æ”¾äº†é“¾æ¥å…¶ä»–æ–‡ä»¶çš„è·¯å¾„</span><br>åŸºæœ¬è¯­æ³•ï¼š<br>ln -s [åŸæ–‡ä»¶æˆ–ç›®å½•] [è½¯é“¾æ¥å] #ï¼ˆåŠŸèƒ½æè¿°ï¼šç»™åŸæ–‡ä»¶åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼‰<br>lnæ˜¯link<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹1ï¼šåœ¨/home ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªè½¯è¿æ¥ myrootï¼Œè¿æ¥åˆ° /root ç›®å½•</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">(è¿™æ · åˆ‡æ¢åˆ°myroot å…¶å®å°±æ˜¯åˆ‡æ¢åˆ°root)</span><br>ln -s /root/home/myroot<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹2: åˆ é™¤è½¯è¿æ¥ myroot</span> <br>rm/home/myroot<br><span class="hljs-meta prompt_">#</span><span class="language-bash">å½“æˆ‘ä»¬ä½¿ç”¨ <span class="hljs-built_in">pwd</span> æŒ‡ä»¤æŸ¥çœ‹ç›®å½•æ—¶ï¼Œä»ç„¶çœ‹åˆ°çš„æ˜¯è½¯é“¾æ¥æ‰€åœ¨ç›®å½•ã€‚</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">åŠŸèƒ½ï¼šæŸ¥çœ‹å·²ç»æ‰§è¡Œè¿‡å†å²å‘½ä»¤,ä¹Ÿå¯ä»¥æ‰§è¡Œå†å²æŒ‡ä»¤</span><br>åŸºæœ¬è¯­æ³•ï¼š<br>history #ï¼ˆåŠŸèƒ½æè¿°ï¼šæŸ¥çœ‹å·²ç»æ‰§è¡Œè¿‡å†å²å‘½ä»¤ï¼‰<br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¯ä»¥çœ‹å…¶ä»–ç™»å½•çš„ç”¨æˆ·åšäº†ä»€ä¹ˆæ“ä½œã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 1: æ˜¾ç¤ºæ‰€æœ‰çš„å†å²å‘½ä»¤</span><br>history<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 2: æ˜¾ç¤ºæœ€è¿‘ä½¿ç”¨è¿‡çš„ 10 ä¸ªæŒ‡ä»¤ã€‚</span><br>history 10<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 3ï¼šæ‰§è¡Œå†å²ç¼–å·ä¸º 5 çš„æŒ‡ä»¤</span><br>!5<br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs shell">dateæŒ‡ä»¤ï¼š<br>1.æ˜¾ç¤ºå½“å‰æ—¥æœŸ<br>åŸºæœ¬è¯­æ³•ï¼š<br>date  ï¼ˆåŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰æ—¶é—´ï¼‰<br>date +%Y  ï¼ˆåŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰å¹´ä»½ï¼‰<br>date +%m  ï¼ˆåŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰æœˆä»½ï¼‰<br>date +%d  ï¼ˆåŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰æ˜¯å“ªä¸€å¤©ï¼‰<br>date "+%Y-%m-%d %H:%M:%S"ï¼ˆåŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼‰<br>Y year<br>m month<br>d day<br>H hour<br>M minute<br>S second<br>æ¡ˆä¾‹ 1: æ˜¾ç¤ºå½“å‰æ—¶é—´ä¿¡æ¯<br>date<br>æ¡ˆä¾‹ 2: æ˜¾ç¤ºå½“å‰æ—¶é—´å¹´æœˆæ—¥<br>date "+%Y-%m-%d"<br>æ¡ˆä¾‹ 3: æ˜¾ç¤ºå½“å‰æ—¶é—´å¹´æœˆæ—¥æ—¶åˆ†ç§’<br>date "+%Y-%m-%d %H:%M:%S"<br><br>2.è®¾ç½®æ—¥æœŸ<br>åŸºæœ¬è¯­æ³•ï¼š<br>date -så­—ç¬¦ä¸²æ—¶é—´<br><br>æ¡ˆä¾‹ 1: è®¾ç½®ç³»ç»Ÿå½“å‰æ—¶é—´<br>date -s "2020-11-03 20:02:10"<br><br><br>calæŒ‡ä»¤ï¼š<br>æŸ¥çœ‹æ—¥å†æŒ‡ä»¤ cal<br><br>åŸºæœ¬è¯­æ³•ï¼š<br>cal [é€‰é¡¹]ï¼ˆåŠŸèƒ½æè¿°ï¼šä¸åŠ é€‰é¡¹ï¼Œæ˜¾ç¤ºæœ¬æœˆæ—¥å†ï¼‰<br><br>æ¡ˆä¾‹ 1: æ˜¾ç¤ºå½“å‰æ—¥å† <br>cal<br>æ¡ˆä¾‹ 2: æ˜¾ç¤º 2020 å¹´æ—¥å† <br>cal 2020<br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">find æŒ‡ä»¤<br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä»æŒ‡å®šç›®å½•å‘ä¸‹é€’å½’åœ°éå†å…¶å„ä¸ªå­ç›®å½•ï¼Œå°†æ»¡è¶³æ¡ä»¶çš„æ–‡ä»¶æˆ–è€…ç›®å½•æ˜¾ç¤ºåœ¨ç»ˆç«¯ã€‚</span><br>    <br>    åŸºæœ¬è¯­æ³•ï¼š<br>find [æœç´¢èŒƒå›´] [é€‰é¡¹]<br></code></pre></td></tr></tbody></table></figure><p>é€‰é¡¹è¯´æ˜ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221019101315674.png" alt="image-20221019101315674"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 1: æŒ‰æ–‡ä»¶åï¼šæ ¹æ®åç§°æŸ¥æ‰¾ /home ç›®å½•ä¸‹çš„ hello.txt æ–‡ä»¶</span><br>find /home -name hello.txt<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 2ï¼šæŒ‰æ‹¥æœ‰è€…ï¼šæŸ¥æ‰¾ /opt ç›®å½•ä¸‹ï¼Œç”¨æˆ·åç§°ä¸º nobody çš„æ–‡ä»¶</span><br>find /opt -user nobody<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 3ï¼šæŸ¥æ‰¾æ•´ä¸ª linux ç³»ç»Ÿä¸‹å¤§äº 200M çš„æ–‡ä»¶</span><br>+n å¤§äº<br>    -n å°äº<br>    n ç­‰äº<br>å•ä½æœ‰ k,M,G <br>find / -size +200M<br>ä¾‹å­ï¼š<br>[root@hspEdu01 opt]# find / -size +200M<br>/run/media/root/CentOS 7 x86_64/LiveOS/squashfs.img (è¿™ä¸ªæ–‡ä»¶å¤§äº200M)<br>[root@hspEdu01 opt]# cd /run/media/root/CentOS\ 7\ x86_64/LiveOS/<br>[root@hspEdu01 LiveOS]# ls<br>squashfs.img  TRANS.TBL<br>[root@hspEdu01 LiveOS]# ls -l<br>æ€»ç”¨é‡ 442741<br>-rw-r--r--. 1 root root 453365760 11æœˆ 26 2018 squashfs.img<br>-r--r--r--. 1 root root       224 11æœˆ 26 2018 TRANS.TBL<br>[root@hspEdu01 LiveOS]# ls -lh  #(ä¸Šé¢çš„æ€»ç”¨é‡å¤§å°çœ‹ä¸æ‡‚ï¼ŒåŠ ä¸Šh human èƒ½çœ‹æ‡‚çš„å†…å®¹)<br>æ€»ç”¨é‡ 433M<br>-rw-r--r--. 1 root root 433M 11æœˆ 26 2018 squashfs.img<br>-r--r--r--. 1 root root  224 11æœˆ 26 2018 TRANS.TBL<br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">locate æŒ‡ä»¤<br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¯ä»¥å¿«é€Ÿå®šä½æ–‡ä»¶è·¯å¾„ã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">åˆ©ç”¨äº‹å…ˆå»ºç«‹çš„ç³»ç»Ÿä¸­æ‰€æœ‰æ–‡ä»¶åç§°åŠè·¯å¾„çš„ locate æ•°æ®åº“å®ç°å¿«é€Ÿå®šä½ç»™å®šçš„æ–‡ä»¶ã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">Locate æŒ‡ä»¤æ— éœ€éå†æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼ŒæŸ¥è¯¢é€Ÿåº¦è¾ƒå¿«ã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¸ºäº†ä¿è¯æŸ¥è¯¢ç»“æœçš„å‡†ç¡®åº¦ï¼Œç®¡ç†å‘˜å¿…é¡»å®šæœŸæ›´æ–° locate æ—¶åˆ»</span><br><br>åŸºæœ¬è¯­æ³•:<br>locate æœç´¢æ–‡ä»¶<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ³¨æ„ï¼š</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç”±äº locate æŒ‡ä»¤åŸºäºæ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ï¼Œ</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ‰€ä»¥ç¬¬ä¸€æ¬¡è¿è¡Œå‰ï¼Œå¿…é¡»ä½¿ç”¨ updatedb æŒ‡ä»¤åˆ›å»º locate æ•°æ®åº“ã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 1: è¯·ä½¿ç”¨ locate æŒ‡ä»¤å¿«é€Ÿå®šä½ hello.txt æ–‡ä»¶æ‰€åœ¨ç›®å½•</span><br>updatedb<br>locate hello.txt<br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell">grep æŒ‡ä»¤å’Œ ç®¡é“ç¬¦å· |  <br><span class="hljs-meta prompt_">#</span><span class="language-bash">grepæŒ‡ä»¤å¾€å¾€å’Œç®¡é“ç¬¦å· | ç»“åˆä½¿ç”¨</span><br>grepï¼šè¿‡æ»¤æŸ¥æ‰¾<br>ç®¡é“ç¬¦ï¼šâ€œ|â€<br><span class="hljs-meta prompt_">#</span><span class="language-bash">è¡¨ç¤ºå°†å‰ä¸€ä¸ªå‘½ä»¤çš„å¤„ç†ç»“æœè¾“å‡ºä¼ é€’ç»™åé¢çš„å‘½ä»¤å¤„ç†ã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¯”å¦‚ï¼šå…ˆ <span class="hljs-built_in">cat</span> a.txtï¼Œç„¶ååˆæƒ³çœ‹a.txtæ–‡ä»¶ä¸­æœ‰æ²¡æœ‰helloè¿™ä¸ªè¯</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">é‚£ä¹ˆå°± <span class="hljs-built_in">cat</span> a.txt | grep <span class="hljs-string">"hello"</span> ---&gt;å…ˆæ‰¾åˆ°a.txtï¼Œç„¶åå†åœ¨a.txtä¸­æ‰¾hello</span><br><br>åŸºæœ¬è¯­æ³•ï¼š<br>grep [é€‰é¡¹] æŸ¥æ‰¾å†…å®¹ æºæ–‡ä»¶<br>å¸¸ç”¨é€‰é¡¹ï¼š<br>-n  æ˜¾ç¤ºåŒ¹é…è¡ŒåŠè¡Œå·<br>-i   å¿½ç•¥å­—æ¯å¤§å°å†™<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 1: è¯·åœ¨ hello.txt æ–‡ä»¶ä¸­ï¼ŒæŸ¥æ‰¾<span class="hljs-string">"yes"</span>æ‰€åœ¨è¡Œï¼Œå¹¶ä¸”æ˜¾ç¤ºè¡Œå·</span><br>å†™æ³• 1: <br>        cat /home/hello.txt| grep "yes"      #å¼•å·å†™ä¸å†™éƒ½è¡Œ<br>cat /home/hello.txt| grep -n "yes"   # æ˜¾ç¤ºè¡Œå·    <br>å†™æ³• 2: <br>        grep -n "yes" /home/hello.txt<br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell">gzip/gunzip æŒ‡ä»¤<br>gzip    #ç”¨äºå‹ç¼©æ–‡ä»¶<br>gunzip  #ç”¨äºè§£å‹çš„<br>    åŸºæœ¬è¯­æ³•ï¼š<br>gzip æ–‡ä»¶  #åŠŸèƒ½æè¿°ï¼šå‹ç¼©æ–‡ä»¶ï¼Œåªèƒ½å°†æ–‡ä»¶å‹ç¼©ä¸º*.gz æ–‡ä»¶ï¼‰<br>gunzip æ–‡ä»¶.gz #ï¼ˆåŠŸèƒ½æè¿°ï¼šè§£å‹ç¼©æ–‡ä»¶å‘½ä»¤ï¼‰<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#æ¡ˆä¾‹ 1: gzip å‹ç¼©ï¼Œå°† /home ä¸‹çš„ hello.txt æ–‡ä»¶è¿›è¡Œå‹ç¼©</span></span><br>gzip /home/hello.txt<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 2: gunzip è§£ç¼©ï¼Œå°† /home ä¸‹çš„ hello.txt.gz æ–‡ä»¶è¿›è¡Œè§£å‹</span><br>gunzip /home/hello.txt.gz<br><br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs shell">zip/unzip æŒ‡ä»¤<br>zip ç”¨äºå‹ç¼©æ–‡ä»¶<br>unzip ç”¨äºè§£å‹çš„ <br><span class="hljs-meta prompt_">#</span><span class="language-bash">ï¼ˆè¿™ä¸ªåœ¨é¡¹ç›®æ‰“åŒ…å‘å¸ƒä¸­å¾ˆæœ‰ç”¨çš„ï¼‰</span><br><br>åŸºæœ¬è¯­æ³•ï¼š<br>zip[é€‰é¡¹] XXX.zip å°†è¦å‹ç¼©çš„å†…å®¹    #ï¼ˆåŠŸèƒ½æè¿°ï¼šå‹ç¼©æ–‡ä»¶å’Œç›®å½•çš„å‘½ä»¤ï¼‰<br>unzip [é€‰é¡¹] XXX.zip              #ï¼ˆåŠŸèƒ½æè¿°ï¼šè§£å‹æ–‡ä»¶ï¼‰<br>    <br>    zip å¸¸ç”¨é€‰é¡¹<br>-rï¼šé€’å½’å‹ç¼©ï¼Œå³å‹ç¼©ç›®å½•<br><br>unzip çš„å¸¸ç”¨é€‰é¡¹<br>-d&lt;ç›®å½•&gt; ï¼šæŒ‡å®šè§£å‹åæ–‡ä»¶çš„å­˜æ”¾ç›®å½•<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 1:å°† /home ä¸‹çš„æ‰€æœ‰æ–‡ä»¶/æ–‡ä»¶å¤¹å‹ç¼©æˆ myhome.zip</span><br>zip -r myhome.zip /home/#[å°† home ç›®å½•åŠå…¶åŒ…å«çš„æ–‡ä»¶å’Œå­æ–‡ä»¶å¤¹éƒ½å‹ç¼©] <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 2:å°† myhome.zip è§£å‹åˆ° /opt/tmp ç›®å½•ä¸‹</span><br>mkdir /opt/tmp<br>unzip -d /opt/tmp /home/myhome.zip<br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">tar æŒ‡ä»¤<br><span class="hljs-meta prompt_">#</span><span class="language-bash">tar æŒ‡ä»¤æ˜¯æ‰“åŒ…æŒ‡ä»¤ï¼Œæœ€åæ‰“åŒ…åçš„æ–‡ä»¶æ˜¯ .tar.gz çš„æ–‡ä»¶ã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æŠŠä¸€ä¸ªæˆ–è€…å¤šä¸ªæ–‡ä»¶ï¼ˆå¤¹ï¼‰ç”¨å‹ç¼©è½¯ä»¶è¿›è¡Œå‹ç¼©çš„è¿‡ç¨‹ï¼Œä¸€èˆ¬å¯ç§°ä¹‹ä¸ºæ‰“åŒ…ã€‚</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">taræŒ‡ä»¤å¯ä»¥å‹ç¼©ä¹Ÿå¯ä»¥è§£å‹ã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ ¹æ®é€‰é¡¹æ¥ å‹ç¼©è¿˜æ˜¯è§£å‹ã€‚</span><br><br>åŸºæœ¬è¯­æ³•ï¼š<br>tar[é€‰é¡¹] XXX.tar.gz æ‰“åŒ…çš„å†…å®¹ # (åŠŸèƒ½æè¿°ï¼šæ‰“åŒ…ç›®å½•ï¼Œå‹ç¼©åçš„æ–‡ä»¶æ ¼å¼.tar.gz)<br></code></pre></td></tr></tbody></table></figure><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221019102258590.png" alt="image-20221019102258590"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 1:å‹ç¼©å¤šä¸ªæ–‡ä»¶ï¼Œå°† /home/pig.txt å’Œ /home/cat.txt å‹ç¼©æˆ pc.tar.gz</span> <br>tar -zcvf pc.tar.gz /home/pig.txt /home/cat.txt<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#ä½¿ç”¨äº†é€‰é¡¹ï¼š-z -c -v -f</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¤šä¸ªæ–‡ä»¶å°± ç©ºæ ¼ç›´æ¥å†™åœ¨åé¢å°±å¥½äº†</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 2:å°† /home çš„æ–‡ä»¶å¤¹å‹ç¼©æˆ myhome.tar.gz</span> <br>tar -zcvf myhome.tar.gz /home/<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 3:å°† pc.tar.gz è§£å‹åˆ°å½“å‰ç›®å½•</span><br>tar -zxvf pc.tar.gz<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 4:å°† myhome.tar.gz è§£å‹åˆ° /opt/tmp2 ç›®å½•ä¸‹</span><br>mkdir /opt/tmp2 <br>   tar -zxvf /home/myhome.tar.gz -C /opt/tmp2<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ³¨æ„ï¼š-C åå†™è¦è§£å‹åˆ°çš„ä½ç½®</span><br></code></pre></td></tr></tbody></table></figure><h2 id="ç¬¬åç« -LINXUç»„ç®¡ç†å’Œæƒé™ç®¡ç†"><a href="#ç¬¬åç« -LINXUç»„ç®¡ç†å’Œæƒé™ç®¡ç†" class="headerlink" title="ç¬¬åç«  LINXUç»„ç®¡ç†å’Œæƒé™ç®¡ç†"></a>ç¬¬åç«  LINXUç»„ç®¡ç†å’Œæƒé™ç®¡ç†</h2><p>åœ¨ linux ä¸­çš„æ¯ä¸ªç”¨æˆ·å¿…é¡»å±äºä¸€ä¸ªç»„ï¼Œä¸èƒ½ç‹¬ç«‹äºç»„å¤–ã€‚<br>åœ¨ linux ä¸­æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰æ‰€æœ‰è€…ã€æ‰€åœ¨ç»„ã€å…¶å®ƒç»„çš„æ¦‚å¿µã€‚</p><p>1)    æ‰€æœ‰è€…<br>2)    æ‰€åœ¨ç»„<br>3)    å…¶å®ƒç»„<br>4)    æ”¹å˜ç”¨æˆ·æ‰€åœ¨çš„ç»„</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">ä¸€èˆ¬ä¸ºæ–‡ä»¶çš„åˆ›å»ºè€…ï¼Œè°åˆ›å»ºäº†è¯¥æ–‡ä»¶ï¼Œå°±è‡ªç„¶çš„æˆä¸ºè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ã€‚<br>ä½†æ˜¯æ‰€æœ‰è€…ä¹Ÿå¯ä»¥æ›´æ”¹ã€‚<br><br>1.æŸ¥çœ‹æ–‡ä»¶/ç›®å½•çš„æ‰€æœ‰è€…(åœ¨/homeä¸‹æ‰èƒ½çœ‹åˆ°)<br>æŒ‡ä»¤ï¼šls â€“ahl<br>-ahlæ˜¯ä¸‰ä¸ªé€‰é¡¹<br>-h human è®©è¾“å‡ºçš„ç»“æœæ–¹ä¾¿äººçœ‹(æ–‡ä»¶çš„å¤§å°å®¹æ˜“çœ‹)<br><br>drwxr-xr-x.  6 root root   4.0K 2æœˆ  23 13:59 .<br>dr-xr-xr-x. 18 root root   4.0K 2æœˆ  20 16:45 ..<br>-rw-r--r--.  1 root root     24 2æœˆ  22 21:59 hello.txt<br>...<br>ç¬¬ä¸‰åˆ—å°±æ˜¯æ–‡ä»¶çš„æ‰€æœ‰è€…<br><br>2.ä¿®æ”¹æ–‡ä»¶/ç›®å½•æ‰€æœ‰è€…æŒ‡ä»¤ï¼šchown æ–°æ‰€æœ‰è€… æ–‡ä»¶å<br>æ¡ˆä¾‹ï¼š<br>è¦æ±‚ï¼šä½¿ç”¨ root åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ apple.txt ï¼Œç„¶åå°†å…¶æ‰€æœ‰è€…ä¿®æ”¹æˆ tom<br>  chown tom apple.txt<br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell">åŸºæœ¬æŒ‡ä»¤:<br>groupadd ç»„å<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ï¼šåˆ›å»ºä¸€ä¸ªç»„ monster</span> <br>groupadd monster<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">åˆ›å»ºä¸€ä¸ªç”¨æˆ· fox ï¼Œå¹¶æ”¾å…¥åˆ°monster ç»„ä¸­</span><br>useradd -g monster fox<br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">å½“æŸä¸ªç”¨æˆ·åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶åï¼Œè¿™ä¸ªæ–‡ä»¶çš„æ‰€åœ¨ç»„å°±æ˜¯è¯¥ç”¨æˆ·æ‰€åœ¨çš„ç»„(é»˜è®¤)ã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æŸ¥çœ‹æ–‡ä»¶/ç›®å½•æ‰€åœ¨ç»„</span><br>æŒ‡ä»¤:<br>ls â€“ahl  æˆ–è€…ll<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">llå¹¶ä¸æ˜¯linuxä¸‹ä¸€ä¸ªåŸºæœ¬çš„å‘½ä»¤ï¼Œå®ƒå®é™…ä¸Šæ˜¯<span class="hljs-built_in">ls</span> -lçš„ä¸€ä¸ªåˆ«åã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">Ubuntué»˜è®¤ä¸æ”¯æŒå‘½ä»¤llï¼Œå¿…é¡»ç”¨ <span class="hljs-built_in">ls</span> -lï¼Œè¿™æ ·ä½¿ç”¨èµ·æ¥ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚</span><br><br>æ¡ˆä¾‹ï¼šä½¿ç”¨ fox æ¥åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œçœ‹çœ‹è¯¥æ–‡ä»¶å±äºå“ªä¸ªç»„?<br>ä½¿ç”¨foxåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼š<br>su fox<br>ç„¶åtouch ok.txt<br>ç„¶åll<br><br>-rw-r--r--. 1 fox monster 0 11 æœˆ 5 12:50 ok.txt<br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç¬¬ä¸‰åˆ—ï¼šæ–‡ä»¶çš„æ‰€æœ‰è€…(è°åˆ›å»ºäº†è¿™ä¸ªæ–‡ä»¶ï¼Œå°±æ˜¯è¿™ä¸ªæ–‡ä»¶çš„æ‰€æœ‰è€…)</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç¬¬å››åˆ—ï¼šæ–‡ä»¶çš„æ‰€åœ¨ç»„(æŸä¸ªç”¨æˆ·åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ‰€åœ¨ç»„=è¯¥ç”¨æˆ·æ‰€åœ¨ç»„)</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ³¨æ„ï¼š/etc/groupä¸‹å­˜æ”¾ç€æ‰€æœ‰çš„ç»„</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä½¿ç”¨æŒ‡ä»¤ï¼š<span class="hljs-built_in">cat</span> /etc/group å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„ç»„</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¯”å¦‚æŸ¥çœ‹æœ‰æ²¡æœ‰mojiaoè¿™ä¸ªç»„</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¯ä»¥ä½¿ç”¨ç®¡é“å‘½ä»¤å’Œgrepè¿‡æ»¤</span><br>cat /etc/group | grep mojiao<br><span class="hljs-meta prompt_">#</span><span class="language-bash">å½“ä¸€ä¸ªæ–‡ä»¶å¾ˆå¤§ï¼Œæƒ³æ‰¾æŸä¸ªå…³é”®è¯å°±å¯ä»¥è¿™ä¸ªè¿‡æ»¤ï¼</span><br><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¿®æ”¹æ–‡ä»¶/ç›®å½•æ‰€åœ¨çš„ç»„</span><br>æŒ‡ä»¤ï¼š<br>chgrp ç»„å æ–‡ä»¶å<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ï¼šä½¿ç”¨ root ç”¨æˆ·åˆ›å»ºæ–‡ä»¶ orange.txt ,çœ‹çœ‹å½“å‰è¿™ä¸ªæ–‡ä»¶å±äºå“ªä¸ªç»„ï¼Œ</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"> ç„¶åå°†è¿™ä¸ªæ–‡ä»¶æ‰€åœ¨ç»„ï¼Œä¿®æ”¹åˆ° fruit ç»„ã€‚</span><br><br>groupadd fruit<br>touch orange.txt<br><span class="hljs-meta prompt_">#</span><span class="language-bash">çœ‹çœ‹å½“å‰è¿™ä¸ªæ–‡ä»¶å±äºå“ªä¸ªç»„ -&gt; root ç»„</span><br>chgrp fruit orange.txt<br></code></pre></td></tr></tbody></table></figure><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">åœ¨æ·»åŠ ç”¨æˆ·æ—¶ï¼Œå¯ä»¥æŒ‡å®šå°†è¯¥ç”¨æˆ·æ·»åŠ åˆ°å“ªä¸ªç»„ä¸­ï¼ŒåŒæ ·çš„ç”¨ root çš„ç®¡ç†æƒé™å¯ä»¥æ”¹å˜æŸä¸ªç”¨æˆ·æ‰€åœ¨çš„ç»„ã€‚</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ”¹å˜ç”¨æˆ·æ‰€åœ¨ç»„</span><br>usermodâ€“gæ–°ç»„åç”¨æˆ·å<br>usermodâ€“dç›®å½•åç”¨æˆ·å (æ”¹å˜è¯¥ç”¨æˆ·ç™»é™†çš„åˆå§‹ç›®å½•)<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç‰¹åˆ«è¯´æ˜ï¼šç”¨æˆ·éœ€è¦æœ‰è¿›å…¥åˆ°æ–°ç›®å½•çš„æƒé™ã€‚</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¦‚ä½•æŸ¥çœ‹ç”¨æˆ·æ‰€åœ¨çš„ç»„ï¼Ÿ</span><br>id ç”¨æˆ·å  ---&gt;æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ï¼š</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å°† zwj è¿™ä¸ªç”¨æˆ·ä»åŸæ¥æ‰€åœ¨ç»„ï¼Œä¿®æ”¹åˆ° wudang ç»„</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å…ˆæŸ¥çœ‹zwjåœ¨å“ªä¸ªç»„ï¼š</span><br>id zwj<br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç„¶åæŸ¥çœ‹æœ‰æ²¡æœ‰wudangè¿™ä¸ªç»„ï¼š</span><br>cat /etc/group | grep wudang<br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¿®æ”¹ï¼š</span><br>usermod -g wudang zwj<br><br></code></pre></td></tr></tbody></table></figure><p><strong>æƒé™çš„åŸºæœ¬ä»‹ç»</strong></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">ls -l ä¸­æ˜¾ç¤ºçš„å†…å®¹å¦‚ä¸‹ï¼š<br>-rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc<br>ç¬¬ä¸€åˆ—å…±10ä½<br><br>0-9 ä½è¯´æ˜ï¼š<br> ç¬¬ 0 ä½ç¡®å®šæ–‡ä»¶ç±»å‹(d, - , l , c , b)<br>d æ˜¯ç›®å½•ï¼Œç›¸å½“äº windows çš„æ–‡ä»¶å¤¹<br>- ä»£è¡¨æ˜¯æ™®é€šæ–‡ä»¶(.txt)<br>l æ˜¯é“¾æ¥ï¼Œç›¸å½“äº windows çš„å¿«æ·æ–¹å¼<br>c æ˜¯å­—ç¬¦è®¾å¤‡æ–‡ä»¶ï¼Œæ¯”å¦‚é¼ æ ‡ï¼Œé”®ç›˜    ---&gt; /dev/ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°<br>b æ˜¯å—è®¾å¤‡ï¼Œæ¯”å¦‚ç¡¬ç›˜    ---&gt; /dev/ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°<br><br>ç¬¬ 1-3 ä½ç¡®å®š è¯¥æ–‡ä»¶çš„æ‰€æœ‰è€… å¯¹è¯¥æ–‡ä»¶çš„ æƒé™ã€‚---User<br>ç¬¬ 4-6 ä½ç¡®å®š è¯¥æ–‡ä»¶æ‰€å±çš„ç»„å’Œè¯¥ç»„ä¸­çš„ç”¨æˆ· å¯¹è¯¥æ–‡ä»¶çš„ æƒé™ã€‚---Group <br>ç¬¬ 7-9 ä½ç¡®å®š å…¶ä»–ç”¨æˆ·(ä¸æ˜¯æ‰€æœ‰è€…ï¼Œä¹Ÿä¸æ˜¯åŒä¸€ç»„çš„å…¶ä»–ç”¨æˆ·) å¯¹è¯¥æ–‡ä»¶çš„æƒé™ ---Other<br></code></pre></td></tr></tbody></table></figure><p>rwxæƒé™çš„è¯¦è§£</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">æƒé™æœ‰ä¸‰ç§ï¼š<br>r ä»£è¡¨å¯è¯»(read)<br>w ä»£è¡¨å¯å†™(write)<br>x ä»£è¡¨å¯æ‰§è¡Œ(execute)<br><br>rwx ä½œç”¨åˆ°æ–‡ä»¶ï¼š<br>r: å¯ä»¥è¯»å–,æŸ¥çœ‹<br>w: å¯ä»¥ä¿®æ”¹,ä½†æ˜¯ä¸ä»£è¡¨å¯ä»¥åˆ é™¤è¯¥æ–‡ä»¶<br>   åˆ é™¤ä¸€ä¸ªæ–‡ä»¶çš„å‰ææ¡ä»¶æ˜¯ å¯¹è¯¥æ–‡ä»¶æ‰€åœ¨çš„ç›®å½• æœ‰ å†™æƒé™ï¼Œæ‰èƒ½åˆ é™¤è¯¥æ–‡ä»¶.<br>x: å¯ä»¥è¢«æ‰§è¡Œ,å‰ææ˜¯å¯æ‰§è¡Œæ–‡ä»¶<br><br>rwx ä½œç”¨åˆ°ç›®å½•ï¼š<br>r: å¯ä»¥è¯»å–ï¼Œå¯ä»¥ç”¨ ls æŸ¥çœ‹ç›®å½•å†…å®¹<br>w: å¯ä»¥ä¿®æ”¹, å¯ä»¥å¯¹ç›®å½•è¿›è¡Œ åˆ›å»º+åˆ é™¤+é‡å‘½åç›®å½•<br>x: å¯ä»¥è¿›å…¥è¯¥ç›®å½•<br></code></pre></td></tr></tbody></table></figure><p><strong>æ–‡ä»¶/ç›®å½•æƒé™çš„å®é™…æ¡ˆä¾‹</strong></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs shell">ls -l ä¸­æ˜¾ç¤ºçš„å†…å®¹å¦‚ä¸‹ï¼š<br>-rwxrw-r-- 1 root root 1213 Feb 2 09:39 abc<br><br>ç¬¬ä¸€åˆ—ä¸­ 10 ä¸ªå­—ç¬¦ ç¡®å®šä¸åŒç”¨æˆ·èƒ½å¯¹æ–‡ä»¶å¹²ä»€ä¹ˆ(æƒé™)ï¼š<br>ç¬¬ä¸€ä¸ªå­—ç¬¦ä»£è¡¨æ–‡ä»¶ç±»å‹ï¼š - l d c b<br>å…¶ä½™å­—ç¬¦æ¯ 3 ä¸ªä¸€ç»„(rwx) è¯»(r) å†™(w) æ‰§è¡Œ(x) <br><br>ç¬¬ä¸€ç»„ rwxï¼šæ–‡ä»¶æ‰€æœ‰è€…çš„æƒé™æ˜¯ è¯»ã€å†™å’Œæ‰§è¡Œ<br>ç¬¬äºŒç»„ rw-ï¼šä¸æ–‡ä»¶æ‰€æœ‰è€…åŒä¸€ç»„çš„ç”¨æˆ·çš„æƒé™æ˜¯ è¯»ã€å†™ä½†ä¸èƒ½æ‰§è¡Œ<br>ç¬¬ä¸‰ç»„ r- ï¼šä¸ä¸æ–‡ä»¶æ‹¥æ‰€æœ‰è€…åŒç»„çš„å…¶ä»–ç”¨æˆ· çš„æƒé™æ˜¯ è¯»ä¸èƒ½å†™å’Œæ‰§è¡Œ<br><br>ä¹Ÿå¯ä»¥ç”¨æ•°å­—è¡¨ç¤ºå¯¹åº”çš„æƒé™ï¼š<br>r=4,w=2,x=1  <br>å› æ­¤ rwx=4+2+1=7 <br>æ•°å­—å¯ä»¥è¿›è¡Œç»„åˆ<br><br>å…¶å®ƒè¯´æ˜ï¼š<br>ç¬¬äºŒåˆ—ï¼š1å¦‚æœæ˜¯æ™®é€šæ–‡ä»¶ï¼Œç›´æ¥å°±æ˜¯1ï¼›<br>å¦‚æœæ˜¯ç›®å½•ï¼Œä»£è¡¨è¯¥ç›®å½•ä¸‹æœ‰å¤šå°‘å†…å®¹(å³å­ç›®å½•æ•°+æ–‡ä»¶æ•°)<br><br>ç¬¬ä¸‰åˆ—ï¼šrootè¯¥æ–‡ä»¶/ç›®å½•çš„æ‰€æœ‰è€…<br>ç¬¬å››åˆ—ï¼šrootè¯¥æ–‡ä»¶/ç›®å½•çš„æ‰€åœ¨ç»„<br>ç¬¬äº”åˆ—ï¼š1213æ–‡ä»¶å¤§å°(è¿™é‡Œæ˜¯å­—èŠ‚)<br>ç¬¬å…­åˆ—ï¼šFeb 2 09:39æœ€åä¿®æ”¹æ—¥æœŸ<br>ç¬¬ä¸ƒåˆ—ï¼šabcæ–‡ä»¶å<br><br></code></pre></td></tr></tbody></table></figure><p><strong>ä¿®æ”¹æƒé™</strong></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">åŸºæœ¬è¯´æ˜ï¼š</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">é€šè¿‡ <span class="hljs-built_in">chmod</span> æŒ‡ä»¤ï¼Œå¯ä»¥ä¿®æ”¹æ–‡ä»¶æˆ–è€…ç›®å½•çš„æƒé™ã€‚</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç¬¬ä¸€ç§æ–¹å¼ï¼šé€šè¿‡ + ã€-ã€=  å˜æ›´æƒé™</span><br>u:æ‰€æœ‰è€…<br>g:æ‰€åœ¨ç»„(åŒä¸€ä¸ªç»„çš„å…¶ä»–ç”¨æˆ·)<br>o:å…¶ä»–äºº(ä¸åŒä¸€ä¸ªç»„çš„å…¶ä»–ç”¨æˆ·)<br>a:æ‰€æœ‰äºº(æ‰€æœ‰ç”¨æˆ·)(uã€gã€o çš„æ€»å’Œ)<br><br>chmod u=rwx,g=rx,o=x#æ–‡ä»¶/ç›®å½•å  (è¯¥æ–‡ä»¶/ç›®å½•çš„uçš„æƒé™æ˜¯rwxï¼Œgçš„æƒé™æ˜¯rxï¼Œoçš„æƒé™æ˜¯x)<br>chmodo+w#æ–‡ä»¶/ç›®å½•å  (è¯¥æ–‡ä»¶/ç›®å½•çš„oçš„æƒé™åŠ ä¸Šw)<br>chmoda-x#æ–‡ä»¶/ç›®å½•å  (å–æ¶ˆè¯¥æ–‡ä»¶/ç›®å½•çš„açš„xæƒé™)<br><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹æ¼”ç¤ºï¼š</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">1.ç»™ abc æ–‡ä»¶ çš„æ‰€æœ‰è€…è¯»å†™æ‰§è¡Œçš„æƒé™ï¼Œç»™æ‰€åœ¨ç»„è¯»æ‰§è¡Œæƒé™ï¼Œç»™å…¶å®ƒç»„è¯»æ‰§è¡Œæƒé™ã€‚</span><br>chmod u=rwx,g=rx,o=rx abc<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.ç»™ abc æ–‡ä»¶çš„æ‰€æœ‰è€…é™¤å»æ‰§è¡Œçš„æƒé™ï¼Œå¢åŠ ç»„å†™çš„æƒé™</span><br>chmod u-x,g+w abc<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">3.ç»™ abc æ–‡ä»¶çš„æ‰€æœ‰ç”¨æˆ·æ·»åŠ è¯»çš„æƒé™</span><br>chmod a+r abc<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ³¨æ„ï¼š</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¯æ‰§è¡Œæ–‡ä»¶ å›¾æ ‡   ç»¿è‰²</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ™®é€šæ–‡ä»¶ å›¾æ ‡    ç™½è‰²</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç›®å½•/æ–‡ä»¶å¤¹å›¾æ ‡    è“è‰²</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#å‹ç¼©æ–‡ä»¶å›¾æ ‡    çº¢è‰²</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç¬¬äºŒç§æ–¹å¼ï¼šé€šè¿‡æ•°å­—å˜æ›´æƒé™</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æƒé™å¯ä»¥ç”¨æ•°å­—ä»£æ›¿ï¼šr=4 w=2 x=1</span><br> <br>chmod u=rwx,g=rx,o=x æ–‡ä»¶/ç›®å½•å<br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç›¸å½“äº</span> <br>chmod 751     æ–‡ä»¶/ç›®å½•å<br><br>rwx=4+2+1=7<br>rx=4+1=5<br>x=1<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹æ¼”ç¤º</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">è¦æ±‚ï¼šå°† /home/abc.txt æ–‡ä»¶çš„æƒé™ä¿®æ”¹æˆrwxr-xr-x,ä½¿ç”¨ç»™æ•°å­—çš„æ–¹å¼å®ç°ï¼š</span><br>rwxr-xr-xï¼šu-rwx g=r-x o=r-x<br>chmod 755 /home/abc.txt<br><br></code></pre></td></tr></tbody></table></figure><p><strong>ä¿®æ”¹æ–‡ä»¶/ç›®å½•çš„æ‰€æœ‰è€…-chown</strong></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs shell">åŸºæœ¬ä»‹ç»<br>chownnewowneræ–‡ä»¶/ç›®å½•#(ä¿®æ”¹æ‰€æœ‰è€…)<br>chown newowner:newgroupæ–‡ä»¶/ç›®å½• #(åŒæ—¶ä¿®æ”¹æ‰€æœ‰è€…å’Œæ‰€åœ¨ç»„)<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">é€‰é¡¹ï¼š-Rå¦‚æœæ˜¯ç›®å½• åˆ™ä½¿å…¶ä¸‹æ‰€æœ‰å­æ–‡ä»¶æˆ–ç›®å½•é€’å½’ç”Ÿæ•ˆ</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹æ¼”ç¤º</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">1.è¯·å°† /home/abc.txt æ–‡ä»¶çš„æ‰€æœ‰è€…ä¿®æ”¹æˆ tom</span><br>chown tom /home/abc.txt<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.è¯·å°† /home/test ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•çš„æ‰€æœ‰è€…éƒ½ä¿®æ”¹æˆ tom</span> <br>chown -R tom /home/test<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">R:Recursiveé€’å½’</span><br></code></pre></td></tr></tbody></table></figure><p>ä¿®æ”¹æ–‡ä»¶/ç›®å½•çš„æ‰€åœ¨ç»„-chgrp</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">chgrp  newgroup  æ–‡ä»¶/ç›®å½•(æ”¹å˜æ‰€åœ¨ç»„)<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹æ¼”ç¤º:</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">1.è¯·å°† /home/abc.txt æ–‡ä»¶çš„æ‰€åœ¨ç»„ä¿®æ”¹æˆ shaolin (å°‘æ—)</span> <br>groupadd shaolin<br>chgrp shaolin /home/abc.txt<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.è¯·å°† /home/test ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•çš„æ‰€åœ¨ç»„éƒ½ä¿®æ”¹æˆ shaolin(å°‘æ—)</span> <br>chgrp -R shaolin /home/test<br><br></code></pre></td></tr></tbody></table></figure><p>ä¾‹å­å®éªŒï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">æœ‰ä¸¤ä¸ªç»„ï¼špoliceç»„ï¼Œbanditç»„</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æœ‰å››ä¸ªç”¨æˆ·ï¼šjackie,jerry,xh,xq</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">jackie,jerry: è­¦å¯Ÿ</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">xh,xq: åœŸåŒª</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">1.åˆ›å»ºç»„</span><br>groupadd police<br>groupadd bandit<br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.åˆ›å»ºç”¨æˆ·(ç›´æ¥æ”¾åˆ°å¯¹åº”ç»„)</span><br>useradd -g police jackie<br>useradd -g police jerry<br>useradd -g bandit xh<br>useradd -g bandit xq<br><span class="hljs-meta prompt_">#</span><span class="language-bash">3.jackie åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œè‡ªå·±å¯ä»¥è¯» r å†™ wï¼Œæœ¬ç»„äººå¯ä»¥è¯»ï¼Œå…¶å®ƒç»„æ²¡äººä»»ä½•æƒé™</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">é¦–å…ˆjackieç™»å½•ï¼Œå¯ä»¥ä½¿ç”¨åˆ‡æ¢ç”¨æˆ·ï¼šsu jackie ----&gt;è¿™æ ·ä¸è¡Œï¼Œæ— æ³•åˆ›å»ºæ–‡ä»¶ï¼Œæƒé™ä¸å¤Ÿ</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä½¿ç”¨jackieç™»å½•ï¼Œå…ˆè®¾ç½®å¯†ç 123ï¼Œç„¶åé€€å‡ºç³»ç»Ÿç”¨jackieç™»å½•ï¼špasswd jackie</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç„¶ååˆ›å»ºæ–‡ä»¶ï¼š<span class="hljs-built_in">touch</span> jackie.txt</span> <br><span class="hljs-meta prompt_">#</span><span class="language-bash">æƒé™è®¾ç½®ï¼š</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">åŸæƒé™ï¼šrw-r--r--</span><br>chmod o-r jackie.txt <br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¿®æ”¹åæƒé™ï¼šrw-r-----</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æ•°å­—æ–¹å¼ï¼š<span class="hljs-built_in">chmod</span> 640 jackie.txt</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">4.jackie ä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œè®©å…¶å®ƒç»„äººå¯ä»¥è¯»ï¼Œæœ¬ç»„äººå¯ä»¥è¯»å†™</span><br>chmod g+w o+r jackie.txt <br><span class="hljs-meta prompt_">#</span><span class="language-bash">æˆ–è€…</span><br>chmod 664 jackie.txt<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#æ”¹åæƒé™ï¼šrw-rw-r--</span></span><br><br>5.xhæŠ•é è­¦å¯Ÿ<br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç”±rootæ‰§è¡Œè¿™æ¡æŒ‡ä»¤</span><br>usermod -g police xh<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">6.æµ‹è¯•xhå’Œxqèƒ½ä¸èƒ½å¯¹jackie.txtæ–‡ä»¶è¿›è¡Œè¯»å†™</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">åˆ†åˆ«ä½¿ç”¨xhå’Œxqç™»å½•(é¦–å…ˆå¯¹å…¶è®¾ç½®å¯†ç 123)</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">jackie.txtæ–‡ä»¶åœ¨jackieç›®å½•ä¸‹</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">è¦æƒ³å¯¹jackie.txtæ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œé¦–å…ˆè¿›å…¥jackieç›®å½•</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä½†æ˜¯jackieç›®å½•æƒé™æ˜¯ï¼šrwx------</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ‰€ä»¥xhè¿jackieç›®å½•éƒ½è¿›ä¸å»</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"><span class="hljs-comment">#è§£å†³åŠæ³•ï¼šç™»å½•jackieï¼Œå¯¹jackieç›®å½•æƒé™è¿›è¡Œä¿®æ”¹(ä¹Ÿå¯ä»¥ç™»å½•rootè¿›è¡Œä¿®æ”¹)(å¿…é¡»éƒ½åœ¨homeä¸‹æ‰èƒ½æ‰§è¡Œè¿™ä¸ªä¿®æ”¹æƒé™å‘½ä»¤)</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç™»å½•</span><br>cd /home/<br>ll<br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¾—åˆ°jackieåŸç›®å½•æƒé™ï¼šrwx------</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¿®æ”¹æƒé™ï¼š<span class="hljs-built_in">chmod</span> 770 jackie(æƒé™ä¸­æœ‰xæ‰èƒ½è¿›å…¥ç›®å½•)</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¿®æ”¹åjackieç›®å½•æƒé™ï¼šrwxrwx---</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">è¿™æ—¶xhå°±å¯ä»¥è¿›å…¥jackieç›®å½•ï¼Œå¹¶å¯¹jackie.txtè¿›è¡Œè¯»å†™</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç»“è®ºï¼šå¦‚æœè¦å¯¹ç›®å½•å†…çš„æ–‡ä»¶è¿›è¡Œæ“ä½œï¼Œé¦–å…ˆè¦æœ‰å¯¹è¯¥ç›®å½•æœ‰ç›¸åº”æƒé™</span><br></code></pre></td></tr></tbody></table></figure><p>è”ç³»2ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#1.å»ºç«‹ä¸¤ä¸ªç»„ï¼ˆç¥ä»™(sx),å¦–æ€ª(yg)ï¼‰</span></span><br>groupadd sx<br>groupadd yg<br><span class="hljs-meta prompt_">#</span><span class="language-bash">2.å»ºç«‹å››ä¸ªç”¨æˆ·(å”åƒ§,æ‚Ÿç©ºï¼Œå…«æˆ’ï¼Œæ²™åƒ§)</span><br>useradd ts<br>useradd wk<br>useradd bj<br>useradd ss<br><span class="hljs-meta prompt_">#</span><span class="language-bash">3.è®¾ç½®å¯†ç (éƒ½ä¸º123)</span><br>passwd ts<br>passwd wk<br>passwd bj<br>passwd ss<br><span class="hljs-meta prompt_">#</span><span class="language-bash">4.å¦–æ€ªç»„ï¼šæ‚Ÿç©ºï¼Œå…«æˆ’ï¼›ç¥ä»™ç»„ï¼šå”åƒ§ï¼Œæ²™åƒ§</span><br>usermod -g yg wk<br>usermod -g yg bj<br>usermod -g sx ts<br>usermod -g sx ss<br><span class="hljs-meta prompt_">#</span><span class="language-bash">5.ç”¨æ‚Ÿç©ºå»ºç«‹ä¸€ä¸ªæ–‡ä»¶ monkey.txt ï¼Œè¯¥æ–‡ä»¶è¦è¾“å‡º i am a monkey</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å…ˆä½¿ç”¨æ‚Ÿç©ºç™»å½•</span><br>vim monkey.txt<br>i am a monkey<br>:wq<br><span class="hljs-meta prompt_">#</span><span class="language-bash">6.ç»™å…«æˆ’ä¸€ä¸ªå¯ä»¥ r w çš„æƒé™</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ‚Ÿç©ºå’Œå…«æˆ’æ˜¯ä¸€ç»„çš„</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å½“å‰monkey.txtæƒé™ï¼š-rw-r--r--</span><br>3æ­¤æ—¶å…«æˆ’åªèƒ½r<br><span class="hljs-meta prompt_">#</span><span class="language-bash">å‘½ä»¤ï¼š</span><br>chmod g+w monkey.txt<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#ç°åœ¨monkey.txtæƒé™ï¼š-rw-rw-r--</span></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">7.å…«æˆ’ä¿®æ”¹ monkey.txt åŠ å…¥ä¸€å¥è¯( i am a pig)</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">monkey.txtæ–‡ä»¶åœ¨wkç›®å½•ä¸‹</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å…«æˆ’è¦ä¿®æ”¹monkey.txtæ–‡ä»¶å°±è¦å…ˆè¿›å…¥wkç›®å½•</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä½†æ˜¯æ­¤æ—¶wkç›®å½•æƒé™ï¼šrwx------</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å…«æˆ’è¿›ä¸å»wkç›®å½•</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ‰€ä»¥å…ˆä¿®æ”¹wkç›®å½•æƒé™ï¼š<span class="hljs-built_in">chmod</span> g+r+w+x wk  (å…ˆæŠŠæ‰€ä»¥æƒé™éƒ½ç»™ï¼Œåœ¨wkçš„homeä¸‹å†™æŒ‡ä»¤æˆ–rootçš„homeä¸‹å†™æŒ‡ä»¤ï¼Œå› ä¸ºç›®å½•åœ¨homeä¸‹)</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç°åœ¨wkç›®å½•æƒé™ï¼šrwxrwx---</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">è¿™æ—¶å…«æˆ’å°±èƒ½è¿›å…¥wkç›®å½•äº†</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">8.å”åƒ§ æ²™åƒ§ å¯¹è¯¥æ–‡ä»¶æ²¡æœ‰æƒé™</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å”åƒ§å’Œæ²™åƒ§æ˜¯å…¶ä»–ç»„ï¼Œè¿›ä¸å»wkç›®å½•</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">9.æŠŠ æ²™åƒ§ æ”¾å…¥å¦–æ€ªç»„</span><br>usermod -g yg ss<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">10.è®©æ²™åƒ§ä¿®æ”¹è¯¥æ–‡ä»¶ monkey.txt, åŠ å…¥ä¸€å¥è¯ (<span class="hljs-string">"æˆ‘æ˜¯æ²™åƒ§ï¼Œæˆ‘æ˜¯å¦–æ€ª!"</span>);</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä½¿ç”¨æ²™åƒ§ç™»å½•</span><br>cd /home/wk<br>viw monkey.txt<br>...<br>:wq<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ³¨æ„ï¼š</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">rwxæƒé™å¯¹äº æ–‡ä»¶å¤¹(ç›®å½•) çš„ç»†èŠ‚è®¨è®ºå’Œæµ‹è¯•!!!</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">x: è¡¨ç¤ºå¯ä»¥è¿›å…¥åˆ°è¯¥ç›®å½•,æ¯”å¦‚ <span class="hljs-built_in">cd</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">r: è¡¨ç¤ºå¯ä»¥ <span class="hljs-built_in">ls</span> ,å°†ç›®å½•çš„å†…å®¹æ˜¾ç¤º</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">w: è¡¨ç¤ºå¯ä»¥åœ¨è¯¥ç›®å½•ä¸‹åˆ é™¤æˆ–è€…åˆ›å»ºæ–‡ä»¶</span><br></code></pre></td></tr></tbody></table></figure><h2 id="ç¬¬åä¸€ç« Linux-å®šæ—¶ä»»åŠ¡è°ƒåº¦"><a href="#ç¬¬åä¸€ç« Linux-å®šæ—¶ä»»åŠ¡è°ƒåº¦" class="headerlink" title="ç¬¬åä¸€ç« Linux å®šæ—¶ä»»åŠ¡è°ƒåº¦"></a>ç¬¬åä¸€ç« Linux å®šæ—¶ä»»åŠ¡è°ƒåº¦</h2><p><strong>crondä»»åŠ¡è°ƒåº¦</strong></p><p>1.æ¦‚è¿°<br>ä»»åŠ¡è°ƒåº¦ï¼šæ˜¯æŒ‡ç³»ç»Ÿåœ¨æŸä¸ªæ—¶é—´æ‰§è¡Œç‰¹å®šçš„å‘½ä»¤æˆ–ç¨‹åºã€‚<br>crondâ€”-&gt;å‘¨æœŸä»»åŠ¡<br>ä»»åŠ¡è°ƒåº¦åˆ†ç±»ï¼š<br>    (1)ç³»ç»Ÿå·¥ä½œï¼šæœ‰äº›é‡è¦çš„å·¥ä½œå¿…é¡»å‘¨è€Œå¤å§‹åœ°æ‰§è¡Œã€‚å¦‚ç—…æ¯’æ‰«æç­‰<br>    (2)ä¸ªåˆ«ç”¨æˆ·å·¥ä½œï¼šä¸ªåˆ«ç”¨æˆ·å¯èƒ½å¸Œæœ›æ‰§è¡ŒæŸäº›ç¨‹åºï¼Œæ¯”å¦‚å¯¹ mysql æ•°æ®åº“çš„å¤‡ä»½ã€‚<br>ç¤ºæ„å›¾ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019110415747.png" alt="image-20221019110415747"></p><p>2.åŸºæœ¬è¯­æ³•<br>    <code>crontab [é€‰é¡¹]</code><br>    åŠŸèƒ½ï¼šè¿›è¡Œå®šæ—¶ä»»åŠ¡çš„è®¾ç½®<br>    <img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019110439761.png" alt="image-20221019110439761"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">4.å¿«é€Ÿå…¥é—¨</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">åœ¨/etc/ä¸‹æœ‰ä¸€ä¸ªcrontabæ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†™å…¥æ‰€æœ‰çš„å®šæ—¶ä»»åŠ¡</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">è¾“å…¥</span><br>crontab -e  #å°±ä¼šè¿›å…¥crontabæ–‡ä»¶<br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç„¶ååœ¨æ–‡ä»¶ä¸­å†™å…¥å®šæ—¶ä»»åŠ¡ï¼š</span><br>*/1 * * * * ls â€“l/etc/ &gt; /tmp/to.txt<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ„æ€è¯´æ¯å°æ—¶çš„æ¯åˆ†é’Ÿæ‰§è¡Œ <span class="hljs-built_in">ls</span> â€“l /etc/ &gt; /tmp/to.txt å‘½ä»¤</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æœ€åä¿å­˜é€€å‡º</span><br></code></pre></td></tr></tbody></table></figure><p>å‚æ•°ç»†èŠ‚è¯´æ˜ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221019104157830.png" alt="image-20221019104157830"></p><p><strong>ç‰¹æ®Šç¬¦å·è¯´æ˜</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019110548932.png" alt="image-20221019110548932"></p><p>ç‰¹å®šçš„äº‹ä»¶æ‰§è¡Œä»»åŠ¡æ¡ˆä¾‹ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019110616007.png" alt="image-20221019110616007"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">5.åº”ç”¨å®ä¾‹</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 1ï¼šæ¯éš” 1 åˆ†é’Ÿï¼Œå°±å°†å½“å‰çš„æ—¥æœŸä¿¡æ¯ï¼Œè¿½åŠ åˆ° /tmp/mydate æ–‡ä»¶ä¸­</span><br>crontab -e<br>*/1 * * * * date &gt;&gt; /tmp/mydate<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 2ï¼šæ¯éš” 1 åˆ†é’Ÿï¼Œå°†å½“å‰æ—¥æœŸå’Œæ—¥å†éƒ½è¿½åŠ åˆ° /home/mycal æ–‡ä»¶ä¸­</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç¬¬ä¸€ç§æ–¹æ³•ï¼š</span><br>crontab -e<br><span class="hljs-meta prompt_">#</span><span class="language-bash">åœ¨crontabæ–‡ä»¶ä¸­è¾“å…¥ï¼š</span><br>*/1 * * * * date &gt;&gt; /home/mycal <br>*/1 * * * * cal &gt;&gt; /home/mycal <br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¿å­˜é€€å‡º</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç¬¬äºŒç§æ–¹æ³•ï¼š</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å°† <span class="hljs-built_in">date</span> &gt;&gt; /home/mycal å’Œ  cal &gt;&gt; /home/mycal å‘½ä»¤å†™åœ¨æ–‡ä»¶ /home/my.shä¸­</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å°±æ˜¯å°†å‘½ä»¤éƒ½å†™åœ¨shellè„šæœ¬ä¸­ï¼Œç›´æ¥è°ƒç”¨shellè„šæœ¬</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ­¥éª¤ï¼š</span><br>vim /home/my.sh<br>åœ¨my.shä¸­å†™å…¥ï¼š<br>date &gt;&gt; /home/mycal<br>cal &gt;&gt; /home/mycal<br>:wq<br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç»™ my.sh å¢åŠ æ‰§è¡Œæƒé™ï¼š<span class="hljs-built_in">chmod</span> u+x /home/my.sh (å¦åˆ™æ— æ³•ä½¿ç”¨crontabå‘½ä»¤)</span><br>crontab -e<br>åœ¨crontabä¸­å†™å…¥ï¼š*/1 * * * */home/my.sh<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ³¨æ„ï¼šå¯ä»¥å†™è„šæœ¬ä¹Ÿå¯ä»¥ä¸å†™è„šæœ¬</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 3:æ¯å¤©å‡Œæ™¨ 2:00  å°† mysql æ•°æ®åº“ testdb å¤‡ä»½åˆ°æ–‡ä»¶ä¸­ã€‚</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æç¤º: æŒ‡ä»¤ä¸º mysqldump -u root -på¯†ç  æ•°æ®åº“ &gt; /home/db.bak</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ­¥éª¤(1)</span> <br>crontab -e<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ­¥éª¤(2)</span><br>0 2 * * * mysqldump -u root -proot testdb &gt; /home/db.bak<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">6. crond ç›¸å…³æŒ‡ä»¤</span><br>conrtab â€“rï¼š#ç»ˆæ­¢ä»»åŠ¡è°ƒåº¦ã€‚<br>crontab â€“lï¼š#åˆ—å‡ºå½“å‰æœ‰é‚£äº›ä»»åŠ¡è°ƒåº¦<br>service crond restartï¼šé‡å¯ä»»åŠ¡è°ƒåº¦<br><br></code></pre></td></tr></tbody></table></figure><p>atå®šæ—¶ä»»åŠ¡è°ƒåº¦</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.åŸºæœ¬ä»‹ç»<br>(1)at å‘½ä»¤æ˜¯ä¸€æ¬¡æ€§å®šæ—¶è®¡åˆ’ä»»åŠ¡ï¼Œat çš„å®ˆæŠ¤è¿›ç¨‹ atd ä¼šä»¥åå°æ¨¡å¼è¿è¡Œï¼Œæ£€æŸ¥ä½œä¸šé˜Ÿåˆ—æ¥è¿è¡Œï¼›<br>(2) æ¯ä¸ªä½œä¸šé˜Ÿåˆ—(ä»»åŠ¡é˜Ÿåˆ—)ä¸­éƒ½æœ‰ä½œä¸š(ä½œä¸šé‡Œæ˜¯æŒ‡ä»¤/è„šæœ¬)ï¼›<br>(3)é»˜è®¤æƒ…å†µä¸‹ï¼Œatd å®ˆæŠ¤è¿›ç¨‹æ¯ 60 ç§’æ£€æŸ¥ä½œä¸šé˜Ÿåˆ—ï¼›<br>æœ‰ä½œä¸šæ—¶ï¼Œä¼šæ£€æŸ¥ä½œä¸šè¿è¡Œæ—¶é—´ï¼Œå¦‚æœæ—¶é—´ä¸å½“å‰æ—¶é—´åŒ¹é…ï¼Œåˆ™è¿è¡Œæ­¤ä½œä¸šï¼›<br>è¿è¡Œå®Œè¿™ä¸ªä½œä¸š(ä»»åŠ¡)ä¹‹åï¼Œè¿™ä¸ªä½œä¸šå°±ä¸ä¼šå†è¢«æ‰§è¡Œäº†ï¼›<br>(4)at å‘½ä»¤æ˜¯ä¸€æ¬¡æ€§å®šæ—¶è®¡åˆ’ä»»åŠ¡ï¼Œæ‰§è¡Œå®Œä¸€ä¸ªä»»åŠ¡åä¸å†æ‰§è¡Œæ­¤ä»»åŠ¡äº†ï¼›<br>(5)åœ¨ä½¿ç”¨ at å‘½ä»¤çš„æ—¶å€™ï¼Œä¸€å®šè¦ä¿è¯ atd è¿›ç¨‹çš„å¯åŠ¨ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å…³æŒ‡ä»¤æ¥æŸ¥çœ‹<br>ps -ef| grep atd //å¯ä»¥æ£€æµ‹ atd æ˜¯å¦åœ¨è¿è¡Œ<br>ps -ef ---&gt; æŸ¥çœ‹æ‰€æœ‰çš„è¿›ç¨‹<br>æ€»ç»“ï¼šatå‘½ä»¤å°±æ˜¯å¯¹æŸä¸ªå®šæ—¶ä»»åŠ¡åªæ‰§è¡Œä¸€æ¬¡<br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019110826307.png" alt="image-20221019110826307"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">2. at å‘½ä»¤æ ¼å¼</span><br>at [é€‰é¡¹] [æ—¶é—´]<br>ç„¶åè¾“å…¥ä¸¤æ¬¡ï¼šCtrl + D(ç»“æŸ at å‘½ä»¤çš„è¾“å…¥)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">3. at å‘½ä»¤é€‰é¡¹ï¼š</span><br><br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019113608977.png" alt="image-20221019113608977"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs shell">4. at æŒ‡å®šæ—¶é—´çš„æ–¹æ³•ï¼š<br><br>(1)æ¥å—åœ¨å½“å¤©çš„ hh:mmï¼ˆå°æ—¶:åˆ†é’Ÿï¼‰å¼çš„æ—¶é—´æŒ‡å®šã€‚<br>å‡å¦‚è¯¥æ—¶é—´å·²è¿‡å»ï¼Œé‚£ä¹ˆå°±æ”¾åœ¨ç¬¬äºŒå¤©æ‰§è¡Œã€‚ ä¾‹å¦‚ï¼š04:00<br>(2)ä½¿ç”¨ midnightï¼ˆæ·±å¤œï¼‰ï¼Œnoonï¼ˆä¸­åˆï¼‰ï¼Œteatimeï¼ˆé¥®èŒ¶æ—¶é—´ï¼Œä¸€èˆ¬æ˜¯ä¸‹åˆ 4 ç‚¹ï¼‰ç­‰æ¯”è¾ƒæ¨¡ç³Šçš„è¯è¯­æ¥æŒ‡å®šæ—¶é—´ã€‚<br>(3)é‡‡ç”¨ 12 å°æ—¶è®¡æ—¶åˆ¶ï¼Œå³åœ¨æ—¶é—´åé¢åŠ ä¸Š AMï¼ˆä¸Šåˆï¼‰æˆ– PMï¼ˆä¸‹åˆï¼‰æ¥è¯´æ˜æ˜¯ä¸Šåˆè¿˜æ˜¯ä¸‹åˆã€‚ <br>ä¾‹å¦‚ï¼š12pm<br>(4)æŒ‡å®šå‘½ä»¤æ‰§è¡Œçš„å…·ä½“æ—¥æœŸï¼ŒæŒ‡å®šæ ¼å¼ä¸º month dayï¼ˆæœˆ æ—¥ï¼‰æˆ– mm/dd/yyï¼ˆæœˆ/æ—¥/å¹´ï¼‰æˆ– dd.mm.yyï¼ˆæ—¥.æœˆ.å¹´ï¼‰ï¼ŒæŒ‡å®šçš„æ—¥æœŸå¿…é¡»è·Ÿåœ¨æŒ‡å®šæ—¶é—´çš„åé¢ã€‚ <br>ä¾‹å¦‚ï¼š04:00 2021-03-1 (å°çš„æ—¶é—´å†™å‰é¢ï¼Œå¤§çš„æ—¶é—´å†™åé¢)<br>(5)ä½¿ç”¨ç›¸å¯¹è®¡æ—¶æ³•ã€‚<br>æŒ‡å®šæ ¼å¼ä¸ºï¼šnow + count time-units<br>now å°±æ˜¯å½“å‰æ—¶é—´ï¼Œtime-units æ˜¯æ—¶é—´å•ä½ï¼Œè¿™é‡Œèƒ½å¤Ÿæ˜¯ minutesï¼ˆåˆ†é’Ÿï¼‰ã€hoursï¼ˆå°æ—¶ï¼‰ã€daysï¼ˆå¤©ï¼‰ã€weeksï¼ˆæ˜ŸæœŸï¼‰ã€‚<br>count æ˜¯æ—¶é—´çš„æ•°é‡ï¼Œå‡ å¤©ï¼Œå‡ å°æ—¶ã€‚ <br>ä¾‹å¦‚ï¼šnow + 5 minutes<br>(6)ç›´æ¥ä½¿ç”¨ todayï¼ˆä»Šå¤©ï¼‰ã€tomorrowï¼ˆæ˜å¤©ï¼‰æ¥æŒ‡å®šå®Œæˆå‘½ä»¤çš„æ—¶é—´ã€‚<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">5.åº”ç”¨å®ä¾‹</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 1ï¼š2 å¤©åçš„ä¸‹åˆ 5 ç‚¹æ‰§è¡Œ /bin/ls /home</span><br>at 5pm + 2 days<br>/bin/ls /home<br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¸¤æ¬¡ctrl+D</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 2ï¼šatq å‘½ä»¤æ¥æŸ¥çœ‹ç³»ç»Ÿä¸­æ²¡æœ‰æ‰§è¡Œçš„å·¥ä½œä»»åŠ¡</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç›´æ¥è¾“å…¥atq æŸ¥è¯¢</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 3ï¼šæ˜å¤©17ç‚¹é’Ÿï¼Œè¾“å‡ºæ—¶é—´åˆ°æŒ‡å®šæ–‡ä»¶å†… æ¯”å¦‚ /root/date100.<span class="hljs-built_in">log</span></span><br>at 5pm tomorrow<br>date &gt; /root/date100.log<br>ä¸¤æ¬¡ctrl+D<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 4ï¼š2åˆ†é’Ÿåï¼Œè¾“å‡ºæ—¶é—´åˆ°æŒ‡å®šæ–‡ä»¶å†… æ¯”å¦‚ /root/date200.<span class="hljs-built_in">log</span></span><br>at now + 2 minutes<br>date &gt; /root/date200.log<br>ä¸¤æ¬¡ctrl+D<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 5ï¼šåˆ é™¤å·²ç»è®¾ç½®çš„ä»»åŠ¡</span><br>atrm ä»»åŠ¡ç¼–å·<br>atrm 4   #//è¡¨ç¤ºå°† job é˜Ÿåˆ—ï¼Œç¼–å·ä¸º 4 çš„ job åˆ é™¤.<br><br>atq:<br>2Thu Feb 24 09:53:00 2022 a root<br>1Fri Feb 25 17:00:00 2022 a root<br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç¬¬ä¸€åˆ—å°±æ˜¯ç¼–å·</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ³¨æ„ï¼šä¹Ÿå¯ä»¥æ‰§è¡Œè„šæœ¬</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¯”å¦‚ï¼š</span><br>at now +2 minutes<br>/root/my.sh  <br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä½†è¦æœ‰è¿™ä¸ªè„šæœ¬ï¼Œå¹¶ä¸”æœ‰æ‰§è¡Œæƒé™x</span><br><br></code></pre></td></tr></tbody></table></figure><h2 id="ç¬¬åäºŒç« -Linuxå®æ“ç¯‡ç£ç›˜åˆ†åŒºã€æŒ‚è½½"><a href="#ç¬¬åäºŒç« -Linuxå®æ“ç¯‡ç£ç›˜åˆ†åŒºã€æŒ‚è½½" class="headerlink" title="ç¬¬åäºŒç«  Linuxå®æ“ç¯‡ç£ç›˜åˆ†åŒºã€æŒ‚è½½"></a>ç¬¬åäºŒç«  Linuxå®æ“ç¯‡ç£ç›˜åˆ†åŒºã€æŒ‚è½½</h2><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1) Linux æ— è®ºæœ‰å‡ ä¸ªåˆ†åŒºï¼Œåˆ†ç»™å“ªä¸€ç›®å½•ä½¿ç”¨ï¼Œå®ƒå½’æ ¹ç»“åº•å°±åªæœ‰ä¸€ä¸ªæ ¹ç›®å½•ï¼Œä¸€ä¸ªç‹¬ç«‹ä¸”å”¯ä¸€çš„æ–‡ä»¶ç»“æ„ <br>Linux ä¸­æ¯ä¸ªåˆ†åŒºéƒ½æ˜¯ç”¨æ¥ç»„æˆæ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚<br><br>(2)Linux é‡‡ç”¨äº†ä¸€ç§å«â€œè½½å…¥â€çš„å¤„ç†æ–¹æ³•ï¼Œå®ƒçš„æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­åŒ…å«äº†ä¸€æ•´å¥—çš„æ–‡ä»¶å’Œç›®å½•ï¼Œä¸”å°†ä¸€ä¸ªåˆ†åŒºå’Œä¸€ä¸ªç›®å½•è”ç³»èµ·æ¥ã€‚<br>è¿™æ—¶è¦è½½å…¥çš„ä¸€ä¸ªåˆ†åŒºå°†ä½¿å®ƒçš„å­˜å‚¨ç©ºé—´åœ¨ä¸€ä¸ªç›®å½•ä¸‹è·å¾—ã€‚<br>(3)å›¾è§£ï¼š<br>ç¡¬ç›˜ä¸Šçš„ä¸€ä¸ªåˆ†åŒº é€šè¿‡æŒ‚è½½mountæœºåˆ¶ ä¸æ–‡ä»¶ç³»ç»Ÿä¸­çš„æŸä¸ªç›®å½•è”ç³»èµ·æ¥<br>å³åˆ†åŒºæŒ‚è½½åˆ°ç›®å½•<br>è®¿é—®è¿™ä¸ªç›®å½•å³è®¿é—®è¿™ä¸ªåˆ†åŒº<br>å¯ä»¥é€šè¿‡æŒ‡ä»¤æŸ¥çœ‹æŒ‚è½½æƒ…å†µï¼Œä¸‹é¢ä¼šè¯´ã€‚<br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019113855644.png" alt="image-20221019113855644"></p><p><strong>ç¡¬ç›˜è¯´æ˜ï¼š</strong></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1)Linux ç¡¬ç›˜ä¸»è¦åˆ†ä¸ºï¼š<br> IDE ç¡¬ç›˜å’Œ SCSI ç¡¬ç›˜<br> ç›®å‰åŸºæœ¬ä¸Šæ˜¯ SCSI ç¡¬ç›˜<br><br>(2)å¯¹äº IDE ç¡¬ç›˜ï¼Œé©±åŠ¨å™¨æ ‡è¯†ç¬¦ä¸ºâ€œhdx~â€<br>å…¶ä¸­â€œhdâ€è¡¨æ˜åˆ†åŒºæ‰€åœ¨è®¾å¤‡çš„ç±»å‹ï¼Œè¿™é‡Œæ˜¯æŒ‡ IDE ç¡¬ç›˜<br><br>â€œxâ€ä¸ºç›˜å·<br>a ä¸ºåŸºæœ¬ç›˜ ç¬¬ä¸€ä¸ªç¡¬ç›˜<br>b ä¸ºåŸºæœ¬ä»å±ç›˜ ç¬¬äºŒä¸ªç¡¬ç›˜<br>c ä¸ºè¾…åŠ©ä¸»ç›˜ ç¬¬ä¸‰ä¸ªç¡¬ç›˜<br>d ä¸ºè¾…åŠ©ä»å±ç›˜ ç¬¬å››ä¸ªç¡¬ç›˜<br><br>â€œ~â€ä»£è¡¨åˆ†åŒº<br>å‰å››ä¸ªåˆ†åŒºç”¨æ•°å­— 1 åˆ° 4 è¡¨ç¤ºï¼Œå®ƒä»¬æ˜¯ä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒºï¼Œä» 5 å¼€å§‹å°±æ˜¯é€»è¾‘åˆ†åŒº<br><br>ä¾‹ï¼šhda3 è¡¨ç¤ºä¸ºç¬¬ä¸€ä¸ª IDE ç¡¬ç›˜ä¸Šçš„ç¬¬ä¸‰ä¸ªä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒº<br>     hdb2 è¡¨ç¤ºä¸ºç¬¬äºŒä¸ª IDE ç¡¬ç›˜ä¸Šçš„ç¬¬äºŒä¸ªä¸»åˆ†åŒºæˆ–æ‰©å±•åˆ†åŒº<br>     <br>(3)å¯¹äº SCSI ç¡¬ç›˜åˆ™æ ‡è¯†ä¸ºâ€œsdx~â€<br>SCSI ç¡¬ç›˜æ˜¯ç”¨â€œsdâ€æ¥è¡¨ç¤ºåˆ†åŒºæ‰€åœ¨è®¾å¤‡çš„ç±»å‹çš„ï¼Œå…¶ä½™åˆ™å’Œ IDE ç¡¬ç›˜çš„è¡¨ç¤ºæ–¹æ³•ä¸€æ ·<br><br></code></pre></td></tr></tbody></table></figure><p>æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡æŒ‚è½½æƒ…å†µï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs shell">å‘½ä»¤ ï¼šlsblkæˆ–è€… lsblk -f<br><br>lsblkï¼šlist block devices <br><br>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT<br>sda      8:0    0   20G  0 disk <br>â”œâ”€sda1   8:1    0    1G  0 part /boot<br>â”œâ”€sda2   8:2    0    2G  0 part [SWAP]<br>â””â”€sda3   8:3    0   17G  0 part /<br>sr0     11:0    1  4.3G  0 rom <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">sda1åˆ†åŒºæŒ‚è½½åˆ°/bootç›®å½•</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">sda2åˆ†åŒºæŒ‚è½½åˆ°swapç›®å½•</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">sda3åˆ†åŒºæŒ‚è½½åˆ°æ ¹ç›®å½•</span><br><br>lsblk -f  #(æ›´åŠ è¯¦ç»†çš„æ˜¾ç¤º)<br><br>NAME   FSTYPE  LABEL           UUID                                 MOUNTPOINT<br>sda                                                                 <br>â”œâ”€sda1 ext4                    bd7b7249-b3fa-434f-acfd-5127a56c0673 /boot<br>â”œâ”€sda2 swap                    4381675a-652c-4ffa-9a9d-cb23d19be79b [SWAP]<br>â””â”€sda3 ext4                    531c2867-a7e9-4ae7-8f79-4453ceb76c5b /<br>sr0    iso9660 CentOS 7 x86_64 2018-11-25-23-54-16-00    <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç¬¬ä¸€åˆ—å¯ä»¥çœ‹åˆ°è®¾å¤‡/ç¡¬ç›˜åˆ†åŒºæƒ…å†µ</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">#FSTYPE:æ–‡ä»¶ç³»ç»Ÿç±»å‹</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">UUID:æ ¼å¼åŒ–ä¹‹åï¼Œä¼šç»™æ¯ä¸€ä¸ªåˆ†åŒºåˆ†é…ä¸€ä¸ª å”¯ä¸€çš„ ä¸é‡å¤çš„ 40ä½ çš„ å­—ç¬¦ä¸²</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">MOUNTPOINT:æŒ‚è½½ç‚¹</span><br></code></pre></td></tr></tbody></table></figure><p>å¦‚ä½•å¢åŠ ä¸€å—ç¡¬ç›˜:</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">1)è™šæ‹Ÿæœºæ·»åŠ ç¡¬ç›˜<br>2)åˆ†åŒº<br>3)æ ¼å¼åŒ–<br>4)æŒ‚è½½<br>5)è®¾ç½®å¯ä»¥è‡ªåŠ¨æŒ‚è½½<br></code></pre></td></tr></tbody></table></figure><ol><li>è™šæ‹Ÿæœºæ·»åŠ ç¡¬ç›˜</li></ol><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">åœ¨ã€è™šæ‹Ÿæœºã€‘èœå•ä¸­é€‰æ‹©ã€è®¾ç½®ã€‘<br>ç„¶åè®¾å¤‡åˆ—è¡¨é‡Œæ·»åŠ ç¡¬ç›˜<br>ç„¶åä¸€è·¯ã€ä¸‹ä¸€æ­¥ã€‘<br>ä¸­é—´åªæœ‰é€‰æ‹©ç£ç›˜å¤§å°çš„åœ°æ–¹éœ€è¦ä¿®æ”¹ï¼Œè‡³åˆ°å®Œæˆ<br><br>ä½¿ç”¨å‘½ä»¤lsblkå‘ç°æ²¡æœ‰æ–°å¢çš„ç¡¬ç›˜ï¼Ÿ<br>éœ€è¦é‡å¯ç³»ç»Ÿï¼ˆæ‰èƒ½è¯†åˆ«ï¼‰<br><br>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT<br>sda      8:0    0   20G  0 disk <br>â”œâ”€sda1   8:1    0    1G  0 part /boot<br>â”œâ”€sda2   8:2    0    2G  0 part [SWAP]<br>â””â”€sda3   8:3    0   17G  0 part /<br>sdb      8:16   0    1G  0 disk <br>sr0     11:0    1  4.3G  0 rom  <br>æ–°å¢ç¡¬ç›˜sdbï¼Œè¿˜æœªåˆ†åŒºã€‚<br></code></pre></td></tr></tbody></table></figure><ol><li>åˆ†åŒº</li></ol><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs shell">å¯¹sdbè¿›è¡Œåˆ†åŒºï¼š<br><br>åˆ†åŒºå‘½ä»¤ï¼šfdisk /dev/sdb   (devç›®å½•ä¸‹æ˜¯ä¸€äº›è®¾å¤‡)<br>æ­¥éª¤ï¼š<br>å¼€å§‹åˆ†åŒºåè¾“å…¥ n  (æ–°å¢åˆ†åŒº)<br>ç„¶åé€‰æ‹© p     (åˆ†åŒºç±»å‹ä¸ºä¸»åˆ†åŒº)<br>ä¸¤æ¬¡å›è½¦<br>æœ€åè¾“å…¥ w  (å†™å…¥åˆ†åŒºå¹¶é€€å‡º)(è‹¥ä¸ä¿å­˜å¹¶é€€å‡ºè¾“å…¥ qï¼Œå³ä¸Šé¢æ­¥éª¤å‡ºé”™äº†æƒ³é‡æ¥å°±å¯ä»¥è¾“å…¥q)<br><br>è¯´æ˜ï¼š<br>mæ˜¾ç¤ºå‘½ä»¤åˆ—è¡¨           <br>pæ˜¾ç¤ºç£ç›˜åˆ†åŒº (åŒ fdisk â€“l) <br>næ–°å¢åˆ†åŒº<br>dåˆ é™¤åˆ†åŒº<br>wå†™å…¥å¹¶é€€å‡º<br><br><br>å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šm<br>å‘½ä»¤æ“ä½œ<br>   a   toggle a bootable flag<br>   b   edit bsd disklabel<br>   c   toggle the dos compatibility flag<br>   d   delete a partition<br>   g   create a new empty GPT partition table<br>   G   create an IRIX (SGI) partition table<br>   l   list known partition types<br>   m   print this menu<br>   n   add a new partition<br>   o   create a new empty DOS partition table<br>   p   print the partition table<br>   q   quit without saving changes<br>   s   create a new empty Sun disklabel<br>   t   change a partition's system id<br>   u   change display/entry units<br>   v   verify the partition table<br>   w   write table to disk and exit<br>   x   extra functionality (experts only)<br><br><br>é€‰æ‹©åˆ†åŒºç±»å‹ï¼šä¸»åˆ†åŒº/æ‰©å±•åˆ†åŒº<br>å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šn<br>Partition type:<br>   p   primary (0 primary, 0 extended, 4 free)<br>   e   extended<br>Select (default p): p<br><br><br>åˆ†åŒºå· (1-4ï¼Œé»˜è®¤ 1)ï¼š                  ---&gt;è¾“å…¥2ï¼Œç¡¬ç›˜å°±æœ‰2ä¸ªåˆ†åŒº<br>èµ·å§‹ æ‰‡åŒº (2048-2097151ï¼Œé»˜è®¤ä¸º 2048)ï¼š<br>å°†ä½¿ç”¨é»˜è®¤å€¼ 2048<br>Last æ‰‡åŒº, +æ‰‡åŒº or +size{K,M,G} (2048-2097151ï¼Œé»˜è®¤ä¸º 2097151)ï¼š<br>å°†ä½¿ç”¨é»˜è®¤å€¼ 2097151<br>åˆ†åŒº 1 å·²è®¾ç½®ä¸º Linux ç±»å‹ï¼Œå¤§å°è®¾ä¸º 1023 MiB<br><br><br>å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šw<br>The partition table has been altered!<br><br>Calling ioctl() to re-read partition table.<br>æ­£åœ¨åŒæ­¥ç£ç›˜ã€‚<br><br><br>lsblk<br>NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT<br>sda      8:0    0   20G  0 disk <br>â”œâ”€sda1   8:1    0    1G  0 part /boot<br>â”œâ”€sda2   8:2    0    2G  0 part [SWAP]<br>â””â”€sda3   8:3    0   17G  0 part /<br>sdb      8:16   0    1G  0 disk <br>â””â”€sdb1   8:17   0 1023M  0 part <br>sr0     11:0    1  4.3G  0 rom  <br>åˆ†åŒºæˆåŠŸ<br>ç¡¬ç›˜sdbä¸­åªæœ‰ä¸€ä¸ªåˆ†åŒºsdb1<br></code></pre></td></tr></tbody></table></figure><ol><li>æ ¼å¼åŒ–</li></ol><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">æ ¼å¼åŒ–ç£ç›˜</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¸ºä»€ä¹ˆè¦æ ¼å¼åŒ–ï¼Ÿ</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ç»™è¿™ä¸ªåˆ†åŒºæŒ‡å®šå®ƒçš„æ–‡ä»¶ç±»å‹</span><br><br>[root@Edu01 ~]# lsblk -f<br>NAME   FSTYPE  LABEL           UUID                                 MOUNTPOINT<br>sda                                                                 <br>â”œâ”€sda1 ext4                    bd7b7249-b3fa-434f-acfd-5127a56c0673 /boot<br>â”œâ”€sda2 swap                    4381675a-652c-4ffa-9a9d-cb23d19be79b [SWAP]<br>â””â”€sda3 ext4                    531c2867-a7e9-4ae7-8f79-4453ceb76c5b /<br>sdb                                                                 <br>â””â”€sdb1                                                              <br>sr0    iso9660 CentOS 7 x86_64 2018-11-25-23-54-16-00    <br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">sdb1çš„UUIDä¸ºç©ºï¼Œè¯´æ˜è¿˜æ²¡æœ‰æ ¼å¼åŒ–ã€‚</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ ¼å¼åŒ–å‘½ä»¤:</span><br>mkfs -text4 /dev/sdb1 å…¶ä¸­ ext4 æ˜¯åˆ†åŒºç±»å‹<br><br></code></pre></td></tr></tbody></table></figure><ol><li>æŒ‚è½½</li></ol><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">æŒ‚è½½: å°†ä¸€ä¸ªåˆ†åŒºä¸ä¸€ä¸ªç›®å½•è”ç³»èµ·æ¥ï¼Œ</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å‘½ä»¤ï¼šmount è®¾å¤‡åç§° æŒ‚è½½ç›®å½•</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">é¦–å…ˆåˆ›å»ºä¸€ä¸ªç›®å½•newdisk (ç›®å½•ä½ç½®éšä¾¿)</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å‡å¦‚åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºï¼š<span class="hljs-built_in">mkdir</span> newdisk</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">è¿›è¡ŒæŒ‚è½½ï¼šmount /dev/sdb1 /newdisk</span><br><br>NAME   FSTYPE  LABEL           UUID                                 MOUNTPOINT<br>sda                                                                 <br>â”œâ”€sda1 ext4                    bd7b7249-b3fa-434f-acfd-5127a56c0673 /boot<br>â”œâ”€sda2 swap                    4381675a-652c-4ffa-9a9d-cb23d19be79b [SWAP]<br>â””â”€sda3 ext4                    531c2867-a7e9-4ae7-8f79-4453ceb76c5b /<br>sdb                                                                 <br>â””â”€sdb1 ext4                    d1856552-dee4-4fbc-9953-f650231ecaac /newdisk<br>sr0    iso9660 CentOS 7 x86_64 2018-11-25-23-54-16-00  <br><span class="hljs-meta prompt_">#</span><span class="language-bash">æŒ‚è½½ç‚¹æœ‰äº†ï¼ŒæŒ‚è½½æˆåŠŸã€‚</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å¸è½½(å»é™¤åˆ†åŒºä¸ç›®å½•çš„è”ç³»)ï¼š</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å‘½ä»¤ï¼šumountè®¾å¤‡åç§° æˆ–è€…æŒ‚è½½ç›®å½•</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¾‹å¦‚ï¼šumount/dev/sdb1 æˆ–è€… umount /newdisk</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ³¨æ„: ç”¨å‘½ä»¤è¡ŒæŒ‚è½½,é‡å¯åä¼šå¤±æ•ˆã€‚</span><br><br></code></pre></td></tr></tbody></table></figure><ol><li>è®¾ç½®å¯ä»¥è‡ªåŠ¨æŒ‚è½½</li></ol><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs shell">è§£å†³  ç”¨å‘½ä»¤è¡ŒæŒ‚è½½,é‡å¯åä¼šå¤±æ•ˆ é—®é¢˜<br><br>æ°¸ä¹…æŒ‚è½½: <br>é€šè¿‡ä¿®æ”¹/etc/fstab å®ç°æŒ‚è½½<br>æ·»åŠ å®Œæˆå æ‰§è¡Œ mountâ€“a å³åˆ»ç”Ÿæ•ˆ æˆ–è€… é‡å¯ç³»ç»Ÿreboot<br><br>æ­¥éª¤ï¼š<br>vim /etc/fstab<br>å¢åŠ ä¸€è¡Œï¼šUUID=ä¸Šé¢sdb1çš„UUID    /newdisk    ext4    defaults     0 0<br>ä¹Ÿå¯ä»¥æ˜¯ï¼š/dev/sdb1      /newdisk    ext4    defaults     0 0<br><br><br><br><br>è¦æŒ‚è½½çš„è®¾å¤‡æˆ–ä¼ªæ–‡ä»¶ç³»ç»Ÿ  æŒ‚è½½ç‚¹  æ–‡ä»¶ç³»ç»Ÿç±»å‹  æŒ‚è½½é€‰é¡¹ è½¬å‚¨é¢‘ç‡ è‡ªæ£€æ¬¡åº<br>UUID=ä¸Šé¢sdb1çš„UUID   /newdisk    ext4    defaults   0    0<br><br>è¦æŒ‚è½½çš„è®¾å¤‡æˆ–ä¼ªæ–‡ä»¶ç³»ç»Ÿï¼š<br>è®¾å¤‡æ–‡ä»¶ã€LABEL(LABEL="")ã€UUID(UUID="")ã€ä¼ªæ–‡ä»¶ç³»ç»Ÿåç§°(proc, sysfs)<br><br>æŒ‚è½½ç‚¹ï¼šæŒ‡å®šçš„æ–‡ä»¶å¤¹<br><br>æŒ‚è½½é€‰é¡¹ï¼šdefaults<br><br>è½¬å‚¨é¢‘ç‡ï¼š<br>  0ï¼šä¸åšå¤‡ä»½<br>  1ï¼šæ¯å¤©è½¬å‚¨<br>  2ï¼šæ¯éš”ä¸€å¤©è½¬å‚¨<br><br>è‡ªæ£€æ¬¡åºï¼š<br>  0ï¼šä¸è‡ªæ£€<br>  1ï¼šé¦–å…ˆè‡ªæ£€ï¼›ä¸€èˆ¬åªæœ‰rootfsæ‰ç”¨1ï¼›<br></code></pre></td></tr></tbody></table></figure><p>æŸ¥è¯¢ç£ç›˜ä½¿ç”¨æƒ…å†µ</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">åŸºæœ¬è¯­æ³•:</span><br>df -h   (disk free)<br><span class="hljs-meta prompt_">#</span><span class="language-bash">æŸ¥è¯¢ç³»ç»Ÿæ•´ä½“ç£ç›˜ä½¿ç”¨æƒ…å†µ</span><br></code></pre></td></tr></tbody></table></figure><p>æŸ¥è¯¢æŒ‡å®šç›®å½•ç£ç›˜å ç”¨æƒ…å†µï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs shell">åŸºæœ¬è¯­æ³•ï¼š<br>du -h  æŒ‡å®šç›®å½•    (disk usage)<br>åŠŸèƒ½ï¼šæŸ¥è¯¢æŒ‡å®šç›®å½•çš„ç£ç›˜å ç”¨æƒ…å†µï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•<br>-s æŒ‡å®šç›®å½•å ç”¨å¤§å°æ±‡æ€»<br>-h å¸¦è®¡é‡å•ä½<br>-a å«æ–‡ä»¶<br>--max-depth=1å­ç›®å½•æ·±åº¦<br>-c åˆ—å‡ºæ˜ç»†çš„åŒæ—¶ï¼Œå¢åŠ æ±‡æ€»å€¼<br><br>åº”ç”¨å®ä¾‹<br>æŸ¥è¯¢ /opt ç›®å½•çš„ç£ç›˜å ç”¨æƒ…å†µï¼Œæ·±åº¦ä¸º 1<br>du -hac --max-depth=1 /opt<br><br></code></pre></td></tr></tbody></table></figure><p>å·¥ä½œå®ç”¨ æŒ‡ä»¤</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">1. ç»Ÿè®¡/opt æ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„ä¸ªæ•°</span><br>ls -l /opt | grep "^-" | wc -l<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">è¯´æ˜ï¼š</span><br>grep "^-" ---&gt;ç­›é€‰å‡ºä»¥-å¼€å¤´çš„ï¼Œå› ä¸ºä»¥-å¼€å¤´çš„éƒ½æ˜¯æ–‡ä»¶<br>wc (word count) ç»Ÿè®¡æ•°é‡<br>wc -l ç»Ÿè®¡è¡Œæ•° lå³lines<br>ç»Ÿè®¡grepç­›é€‰åçš„è¡Œæ•°å³æ–‡ä»¶ä¸ªæ•°<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">2. ç»Ÿè®¡/opt æ–‡ä»¶å¤¹ä¸‹ç›®å½•çš„ä¸ªæ•°</span><br>ls -l /opt | grep "^d" | wc -l<br><br>3. ç»Ÿè®¡/opt æ–‡ä»¶å¤¹ä¸‹æ–‡ä»¶çš„ä¸ªæ•°ï¼ŒåŒ…æ‹¬å­æ–‡ä»¶å¤¹é‡Œçš„<br>ls -lR /opt | grep "^-" | wc -l<br>-R é€’å½’åˆ—å‡ºé‡åˆ°çš„å­ç›®å½•<br><br>4. ç»Ÿè®¡/opt æ–‡ä»¶å¤¹ä¸‹ç›®å½•çš„ä¸ªæ•°ï¼ŒåŒ…æ‹¬å­æ–‡ä»¶å¤¹é‡Œçš„<br>ls -lR /opt | grep "^d" | wc -l<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">5. ä»¥æ ‘çŠ¶æ˜¾ç¤ºç›®å½•ç»“æ„</span> <br><span class="hljs-meta prompt_"># </span><span class="language-bash">æŒ‡ä»¤ï¼štree ç›®å½•</span> <br><span class="hljs-meta prompt_"> #</span><span class="language-bash">é»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰treeæŒ‡ä»¤</span><br><span class="hljs-meta prompt_"> #</span><span class="language-bash">å¦‚æœæ²¡æœ‰ tree ,åˆ™ä½¿ç”¨ yum install tree æŒ‡ä»¤å®‰è£…</span><br><br></code></pre></td></tr></tbody></table></figure><h2 id="LINUXç½‘ç»œé…ç½®"><a href="#LINUXç½‘ç»œé…ç½®" class="headerlink" title="LINUXç½‘ç»œé…ç½®"></a>LINUXç½‘ç»œé…ç½®</h2><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019114700324.png" alt="image-20221019114700324"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.é€šè¿‡ifconfigæŒ‡ä»¤æŸ¥çœ‹Linuxè™šæ‹Ÿæœºçš„ipåœ°å€<br>192.168.2.131<br>2.ç„¶ååœ¨æœ¬æœºDOSå‘½ä»¤çª—å£è¾“å…¥æŒ‡ä»¤ipconfigï¼ŒæŸ¥çœ‹vmnet8çš„ipåœ°å€<br>192.168.2.1<br>ä¸Šä¸¤ä¸ªåœ¨åŒä¸€ç½‘æ®µï¼Œæ‰€ä»¥å¯ä»¥é€šä¿¡ã€‚<br><br>3.ç”±ç¬¬äºŒæ­¥éª¤å¯ä»¥å¾—åˆ°æœ¬æœºçš„æ— çº¿ç½‘ç»œé€‚é…å™¨(æ— çº¿ç½‘å¡)çš„ipåœ°å€<br>192.168.101.8<br><br>ä¸ºä»€ä¹ˆLinuxè™šæ‹Ÿæœºå¯ä»¥è¿å¤–ç½‘(æ¯”å¦‚æ‰“å¼€ç™¾åº¦)ï¼Ÿ<br>Linuxè™šæ‹Ÿæœº---&gt;æœ¬æœºvmnet8---&gt;æœ¬æœºæ— çº¿ç½‘å¡---&gt;æ•™å®¤å±€åŸŸç½‘ç½‘å…³---&gt;å¤–ç½‘<br><br>æ¯æ¬¡å¼€æœºlinuxè™šæ‹Ÿæœºçš„ipåœ°å€ä¸ä¸€å®šç›¸åŒ<br>linuxè™šæ‹Ÿæœºçš„ipåœ°å€å¯ä»¥è®¾ç½®<br><br>ä»¥ä¸‹ï¼šå¦‚ä½•ç¼–è¾‘è™šæ‹Ÿæœºçš„ç½‘ç»œå’Œä¿®æ”¹å…¶ipåœ°å€ï¼Ÿ<br></code></pre></td></tr></tbody></table></figure><p>æŸ¥çœ‹ç½‘ç»œIPå’Œç½‘å…³</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">vmware---&gt;</span><span class="language-bash">ç¼–è¾‘---&gt;è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨</span><br>è¿™æ ·å°±å¯ä»¥æŸ¥çœ‹å’Œä¿®æ”¹è™šæ‹Ÿç½‘ç»œvmnet8çš„ipåœ°å€å’Œç½‘å…³<br><br>é€šè¿‡æœ¬æœºDOSå‘½ä»¤çª—å£ï¼Œè¾“å…¥æŒ‡ä»¤ï¼šipconfig<br>æŸ¥çœ‹vmnet8çš„ç½‘ç»œé…ç½®<br><br>åœ¨xshellæˆ–linuxç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼šifconfig<br>æŸ¥çœ‹ linux çš„ç½‘ç»œé…ç½®<br><br><br><br>pingå‘½ä»¤ æµ‹è¯•ä¸»æœºä¹‹é—´ç½‘ç»œè¿é€šæ€§<br>åŸºæœ¬è¯­æ³•ï¼š<br>ping ç›®çš„ä¸»æœº ï¼ˆåŠŸèƒ½æè¿°ï¼šæµ‹è¯•å½“å‰æœåŠ¡å™¨æ˜¯å¦å¯ä»¥è¿æ¥ç›®çš„ä¸»æœºï¼‰<br><br>åº”ç”¨å®ä¾‹<br>æµ‹è¯•å½“å‰æœåŠ¡å™¨æ˜¯å¦å¯ä»¥è¿æ¥ç™¾åº¦<br>ping www.baidu.com<br><br></code></pre></td></tr></tbody></table></figure><p>Linuxç½‘ç»œç¯å¢ƒé…ç½®</p><p>è‡ªåŠ¨è·å–ipï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">ç™»é™†åï¼Œé€šè¿‡ç•Œé¢è®¾ç½®è‡ªåŠ¨è·å–ip<br>åº”ç”¨ç¨‹åº---&gt;ç³»ç»Ÿå·¥---&gt;è®¾ç½®---&gt;ç½‘ç»œ---&gt;å°é½¿è½®---&gt;IPV4<br>ç‰¹ç‚¹ï¼šlinux å¯åŠ¨åä¼šè‡ªåŠ¨è·å– IPï¼Œå¯ä»¥é¿å…ipå†²çª<br>ç¼ºç‚¹ï¼šæ¯æ¬¡è‡ªåŠ¨è·å–çš„ ip åœ°å€å¯èƒ½ä¸ä¸€æ ·ï¼Œä½†æ˜¯ä½œä¸ºæœåŠ¡å™¨ipåœ°å€ä¸èƒ½å˜ã€‚<br>å·¥ä½œæ—¶ï¼Œä¸€èˆ¬å°†Linuxçš„ipåœ°å€æ‰‹åŠ¨è®¾å®šï¼Œä¸æ”¹å˜ã€‚<br></code></pre></td></tr></tbody></table></figure><p>æ‰‹åŠ¨è®¾ç½®ip</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs shell">æ‰‹åŠ¨æŒ‡å®šlinuxçš„ipåœ°å€ï¼Œä½¿å…¶ä¸å˜åŒ–ã€‚<br><br>ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥æŒ‡å®š IP,å¹¶å¯ä»¥è¿æ¥åˆ°å¤–ç½‘(ç¨‹åºå‘˜æ¨è)<br>å…³äºç½‘ç»œçš„é…ç½®æ–‡ä»¶åœ¨ï¼š/etc/sysconfig/network-scripts/ifcfg-ens33<br><br>è¦æ±‚ï¼šå°†ipåœ°å€é…ç½®ä¸ºé™æ€çš„(ä¸å˜çš„)ï¼Œæ¯”å¦‚: ip åœ°å€ä¸º 192.168.200.130<br><br>è¾“å…¥æŒ‡ä»¤ï¼švim /etc/sysconfig/network-scripts/ifcfg-ens33<br>ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼š<br>BOOTPROTO="static"<br>åŠ ä¸Šï¼š<br>IPADDR=192.168.200.130   (IPåœ°å€,è‡ªå·±è®¾å®šçš„)<br>GATEWAY=192.168.200.2 (ç½‘å…³,è‡ªå·±è®¾å®šçš„)<br>DNS1=192.168.200.2 (åŸŸåè§£æå™¨,è‡ªå·±è®¾å®šçš„)<br><br>ä¸‹ä¸€æ­¥ï¼švmnet8å’ŒLinuxåœ¨åŒä¸€ç½‘æ®µä¸Šï¼Œè¦èƒ½å¤Ÿé€šä¿¡ï¼Œä¹Ÿè¦ä¿®æ”¹ç›¸åº”çš„vmnet8<br><span class="hljs-meta prompt_">vmware---&gt;</span><span class="language-bash">ç¼–è¾‘---&gt;è™šæ‹Ÿç½‘ç»œç¼–è¾‘å™¨</span><br>æ‰“å¼€è™šæ‹Ÿç¼–è¾‘å™¨ï¼Œç‚¹å‡»vmnet8ï¼Œä¿®æ”¹ä¸‹é¢çš„å­ç½‘ipä¸ºï¼š192.168.200.0<br>ç„¶åç‚¹å‡»NATè®¾ç½®ï¼Œå°†ç½‘å…³æ”¹ä¸º192.168.200.2<br><br>åº”ç”¨ç¡®å®š<br>è¾“å…¥æŒ‡ä»¤ï¼šservice network restart æˆ– reboot  ä½¿ä¸Šè¿°ä¿®æ”¹ç”Ÿæ•ˆ<br></code></pre></td></tr></tbody></table></figure><p> è®¾ç½®Linuxç³»ç»Ÿçš„ä¸»æœºåå’Œ hosts æ˜ å°„</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs shell">Linuxç³»ç»Ÿçš„ä¸»æœºåç›¸å½“äºå…¶ipåœ°å€ï¼Œèµ·ä¸€ä¸ªä¸»æœºåæ˜¯å› ä¸ºipåœ°å€ä¸å¥½è®°å¿†ï¼Œä¸æ–¹ä¾¿ã€‚<br>ä¹Ÿå¯ä»¥ä¿®æ”¹ä¸»æœºåã€‚<br><br>æŸ¥çœ‹å½“å‰ä¸»æœºçš„ä¸»æœºåæŒ‡ä»¤ï¼šhostname<br><br>ä¸»æœºåæ”¾åœ¨/etc/hostnameæ–‡ä»¶ä¸­ï¼Œè¦ä¿®æ”¹ä¸»æœºåå³ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼š<br>è¾“å…¥æŒ‡ä»¤ï¼š<br>vim /etc/hostname<br>ä¿®æ”¹å†…å®¹<br>:wq<br>é‡å¯ç³»ç»Ÿ<br><span class="hljs-meta prompt_">#</span><span class="language-bash">è®¾ç½®hostæ˜ å°„</span><br><br>åœ¨Windowsä¸­ï¼Œå¦‚ä½•é€šè¿‡ ä¸»æœºå æ‰¾åˆ°(æ¯”å¦‚ ping) æŸä¸ª linux ç³»ç»Ÿ?<br><br>ä¿®æ”¹ipåœ°å€ä¸ä¸»æœºåçš„æ˜ å°„å…³ç³»ï¼š<br>åœ¨windows C:\Windows\System32\drivers\etc\hosts æ–‡ä»¶ä¸­<br>æŒ‡å®šLinuxç³»ç»Ÿçš„ipåœ°å€ä¸ä¸»æœºåçš„æ˜ å°„å…³ç³»<br>æ ¼å¼ï¼šlinuxç³»ç»Ÿipåœ°å€ linuxç³»ç»Ÿä¸»æœºå<br>å¦‚æŒ‡å®šä¸º: 192.168.200.130 hspedu100 (è¿™è¡Œä»£ç æ·»åŠ åˆ°æ–‡ä»¶ä¸­å°±è¡Œäº†)<br><br>ping hspedu100 ----&gt;å°±ä¼šå»è¯¥æ–‡ä»¶ä¸­æ‰¾ç›¸åº”çš„ipåœ°å€<br><br><br>é‚£ä¹ˆï¼Œå¦‚æœä¹Ÿæƒ³åœ¨Linuxç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ä¸»æœºå æ¥ ping æŸä¸ªWindowsç³»ç»Ÿï¼Œæ€ä¹ˆåšï¼Ÿ<br>åœ¨ linux ç³»ç»Ÿçš„ /etc/hosts æ–‡ä»¶ä¸­ æŒ‡å®š<br>å¦‚æŒ‡å®šä¸º: 192.168.200.1 ThinkPad-PC<br>è¿™æ ·å°±å¯ä»¥ ping ThinkPad-PC<br></code></pre></td></tr></tbody></table></figure><p> ä¸»æœºåè§£æè¿‡ç¨‹åˆ†æ(hostsã€DNS)</p><p>hostsæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œç”¨æ¥è®°å½• IP å’Œ Hostname(ä¸»æœºå)çš„æ˜ å°„å…³ç³»</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">DNS  Domain Name System åŸŸåç³»ç»Ÿ<br>æ˜¯äº’è”ç½‘ä¸Šä½œä¸ºåŸŸåå’Œ IP åœ°å€ç›¸äº’æ˜ å°„çš„ä¸€ä¸ªåˆ†å¸ƒå¼æ•°æ®åº“<br>ä¸ºä»€ä¹ˆå¯ä»¥é€šè¿‡ä¸»æœºåè®¿é—®ï¼Ÿ<br>é€šè¿‡DNSåŸŸåè§£æç³»ç»Ÿï¼Œå°†ä¸»æœºåè§£æä¸ºipåœ°å€ï¼Œå®é™…ä¸Šè¿˜æ˜¯ç”¨çš„ipåœ°å€ã€‚<br></code></pre></td></tr></tbody></table></figure><p>ä¾‹å­ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">ç”¨æˆ·åœ¨æµè§ˆå™¨è¾“å…¥äº†www.baidu.com<br><br>1.æµè§ˆå™¨å…ˆæ£€æŸ¥æµè§ˆå™¨ç¼“å­˜ä¸­æœ‰æ²¡æœ‰è¯¥åŸŸåè§£æ IP åœ°å€ï¼Œæœ‰å°±å…ˆè°ƒç”¨è¿™ä¸ª IP å®Œæˆè§£æï¼›<br>å¦‚æœæ²¡æœ‰ï¼Œå°±æ£€æŸ¥ DNS è§£æå™¨ç¼“å­˜ï¼Œå¦‚æœæœ‰ç›´æ¥è¿”å› IP å®Œæˆè§£æã€‚<br>è¿™ä¸¤ä¸ªç¼“å­˜ï¼Œå¯ä»¥ç†è§£ä¸º æœ¬åœ°è§£æå™¨ç¼“å­˜<br><br>DNS è§£æå™¨ç¼“å­˜ï¼š<br>ä¸€èˆ¬æ¥è¯´ï¼Œå½“ç”µè„‘ç¬¬ä¸€æ¬¡æˆåŠŸè®¿é—®æŸä¸€ç½‘ç«™åï¼Œåœ¨ä¸€å®šæ—¶é—´å†…ï¼Œæµè§ˆå™¨æˆ–æ“ä½œç³»ç»Ÿä¼šç¼“å­˜ä»–çš„ IP åœ°å€ï¼ˆDNS è§£æè®°å½•ï¼‰<br>å¦‚åœ¨ cmd çª—å£ä¸­è¾“å…¥<br>ipconfig /displaydns//DNS åŸŸåè§£æç¼“å­˜<br>ipconfig /flushdns//æ‰‹åŠ¨æ¸…ç† dns ç¼“å­˜<br><br>2. å¦‚æœæœ¬åœ°è§£æå™¨ç¼“å­˜æ²¡æœ‰æ‰¾åˆ°å¯¹åº”æ˜ å°„ï¼Œæ£€æŸ¥ç³»ç»Ÿä¸­ hosts æ–‡ä»¶ä¸­æœ‰æ²¡æœ‰é…ç½®å¯¹åº”çš„åŸŸå IP æ˜ å°„ï¼Œå¦‚æœæœ‰ï¼Œåˆ™å®Œæˆè§£æå¹¶è¿”å›ã€‚<br><br>3. å¦‚æœæœ¬åœ° DNS è§£æå™¨ç¼“å­˜ å’Œ hosts æ–‡ä»¶ ä¸­å‡æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„ IPï¼Œåˆ™åˆ°åŸŸåæœåŠ¡å™¨æ‰¾<br>4. è¿˜æ‰¾ä¸åˆ°ï¼Œå°±æ²¡æœ‰äº†ã€‚<br></code></pre></td></tr></tbody></table></figure><p>å›¾è§£</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019115203027.png" alt="image-20221019115203027"></p><p>ç¬¬åå››ç« è¿›ç¨‹ç®¡ç†ï¼š</p><p>åŸºæœ¬ä»‹ç»ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1)åœ¨ LINUX ä¸­ï¼Œæ¯ä¸ªæ‰§è¡Œçš„ç¨‹åºéƒ½ç§°ä¸ºä¸€ä¸ªè¿›ç¨‹ã€‚æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½åˆ†é…ä¸€ä¸ª ID å·(pid,è¿›ç¨‹å·)ã€‚<br>ç¨‹åºæ‰§è¡Œä¹‹ååŠ è½½åˆ°å†…å­˜ä¸­æˆä¸ºè¿›ç¨‹ã€‚ç¨‹åºæ˜¯é™æ€çš„ï¼Œè¿›ç¨‹æ˜¯åŠ¨æ€çš„ã€‚<br>(2)æ¯ä¸ªè¿›ç¨‹éƒ½å¯èƒ½ä»¥ä¸¤ç§æ–¹å¼å­˜åœ¨ï¼š<br>å‰å°ä¸åå°<br>å‰å°è¿›ç¨‹ï¼šæ˜¯ç”¨æˆ·ç›®å‰çš„å±å¹•ä¸Šå¯ä»¥è¿›è¡Œæ“ä½œçš„ã€‚<br>åå°è¿›ç¨‹ï¼šæ˜¯å®é™…åœ¨æ“ä½œçš„ï¼Œä½†å±å¹•ä¸Šæ— æ³•çœ‹åˆ°ï¼Œé€šå¸¸ä½¿ç”¨åå°æ–¹å¼æ‰§è¡Œã€‚<br>(3)ä¸€èˆ¬ç³»ç»Ÿçš„æœåŠ¡éƒ½æ˜¯ä»¥åå°è¿›ç¨‹çš„æ–¹å¼å­˜åœ¨ï¼Œè€Œä¸”éƒ½ä¼šå¸¸é©»åœ¨ç³»ç»Ÿä¸­ï¼Œç›´åˆ°å…³æœºæ‰ç»“æŸã€‚<br></code></pre></td></tr></tbody></table></figure><p>pså‘½ä»¤ï¼šæ˜¾ç¤ºç³»ç»Ÿæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.åŸºæœ¬ä»‹ç»ï¼š<br>pså‘½ä»¤æ˜¯ç”¨æ¥æŸ¥çœ‹ç›®å‰ç³»ç»Ÿä¸­ï¼Œæœ‰å“ªäº›è¿›ç¨‹æ­£åœ¨æ‰§è¡Œï¼Œä»¥åŠå®ƒä»¬æ‰§è¡Œçš„çŠ¶å†µã€‚<br>å¯ä»¥ä¸åŠ ä»»ä½•å‚æ•°ã€‚<br><br>è¯­æ³•ï¼š<br>ps [é€‰é¡¹]    Process Status<br>é€‰é¡¹ï¼š<br>-aæ˜¾ç¤ºå½“å‰ç»ˆç«¯çš„æ‰€æœ‰è¿›ç¨‹ä¿¡æ¯<br>-uä»¥ç”¨æˆ·çš„æ ¼å¼æ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯<br>-xæ˜¾ç¤ºåå°ç¨‹åºè¿è¡Œçš„å‚æ•°<br><br>ä¸€èˆ¬ä¸‰ä¸ªé€‰é¡¹ä¸€èµ·ç”¨ï¼š<br>ps -aux<br><br>æ˜¾ç¤ºå‡ºå¦‚ä¸‹å†…å®¹ï¼š<br>USER  æ‰§è¡Œè¿›ç¨‹ç”¨æˆ·åç§°  <br>PID      è¿›ç¨‹å·<br><span class="hljs-meta prompt_">%</span><span class="language-bash">CPU           è¿›ç¨‹å ç”¨CPUç™¾åˆ†æ¯”</span><br><span class="hljs-meta prompt_">%</span><span class="language-bash">MEM      è¿›ç¨‹å ç”¨ç‰©ç†å†…å­˜çš„ç™¾åˆ†æ¯”</span><br>VSZ      è¿›ç¨‹å ç”¨çš„è™šæ‹Ÿå†…å­˜å¤§å°ï¼ˆå•ä½ï¼šKBï¼‰<br>RSS   è¿›ç¨‹å ç”¨çš„ç‰©ç†å†…å­˜å¤§å°ï¼ˆå•ä½ï¼šKBï¼‰<br>TTY      ç»ˆç«¯åç§°(æœ‰æ—¶ç¼©å†™)<br>STAT             è¿›ç¨‹çŠ¶æ€ï¼š<br> S-ç¡çœ <br> s-è¡¨ç¤ºè¯¥è¿›ç¨‹æ˜¯ä¼šè¯çš„å…ˆå¯¼è¿›ç¨‹<br> N-è¡¨ç¤ºè¿›ç¨‹æ‹¥æœ‰æ¯”æ™®é€šä¼˜å…ˆçº§æ›´ä½çš„ä¼˜å…ˆçº§<br> R-æ­£åœ¨è¿è¡Œ<br> D-çŸ­æœŸç­‰å¾…<br> Z-åƒµæ­»è¿›ç¨‹<br> T-è¢«è·Ÿè¸ªæˆ–è€…è¢«åœæ­¢ç­‰ç­‰<br>START            è¿›ç¨‹æ‰§è¡Œçš„å¼€å§‹æ—¶é—´<br>TIME             CPU æ—¶é—´ï¼Œå³è¿›ç¨‹ä½¿ç”¨ CPU çš„æ€»æ—¶é—´<br>COMMAND      å¯åŠ¨è¿›ç¨‹æ‰€ç”¨çš„å‘½ä»¤å’Œå‚æ•°ï¼Œå¦‚æœè¿‡é•¿ä¼šè¢«æˆªæ–­æ˜¾ç¤º<br><br><br><br>ä¸Šè¿°å‘½ä»¤å°†æ‰€æœ‰è¿›ç¨‹æ˜¾ç¤ºå‡ºæ¥ï¼Œè‹¥åªæƒ³æŸ¥æ‰¾æŸä¸€ä¸ªè¿›ç¨‹ï¼š<br>æŒ‡ä»¤ï¼šps â€“aux|grep xxx  <br>æ¯”å¦‚æŸ¥æ‰¾ sshd è¿›ç¨‹ï¼šps -aux | grep sshd<br><br>åº”ç”¨å®ä¾‹ï¼š<br>è¦æ±‚ï¼šä»¥å…¨æ ¼å¼æ˜¾ç¤ºå½“å‰æ‰€æœ‰çš„è¿›ç¨‹ï¼ŒæŸ¥çœ‹è¿›ç¨‹çš„çˆ¶è¿›ç¨‹ã€‚ <br><br>çˆ¶è¿›ç¨‹ï¼šä¸€ä¸ªè¿›ç¨‹å¯ä»¥ç”Ÿæˆå¤šä¸ªå­è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹ç§°ä¸ºçˆ¶è¿›ç¨‹ã€‚<br><br><br>æŸ¥çœ‹ sshd çš„çˆ¶è¿›ç¨‹ä¿¡æ¯ï¼š<br>çŸ¥é“ä¸€ä¸ªçˆ¶è¿›ç¨‹çš„pidå°±å¯ä»¥çŸ¥é“å®ƒçš„ä¿¡æ¯ã€‚<br><br>ps -ef æ˜¯ä»¥å…¨æ ¼å¼æ˜¾ç¤ºå½“å‰æ‰€æœ‰çš„è¿›ç¨‹ã€‚-e æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ã€‚-f å…¨æ ¼å¼ã€‚<br><br>ps -ef æŒ‡ä»¤æ˜¾ç¤ºå†…å®¹å¦‚ä¸‹ï¼š <br>UID         ç”¨æˆ·ID<br>PID   è¿›ç¨‹ID<br>PPID  çˆ¶è¿›ç¨‹ID             <br>C CPU ç”¨äºè®¡ç®—æ‰§è¡Œä¼˜å…ˆçº§çš„å› å­ã€‚<br>æ•°å€¼è¶Šå¤§ï¼Œè¡¨æ˜è¿›ç¨‹æ˜¯ CPU å¯†é›†å‹è¿ç®—ï¼Œæ‰§è¡Œä¼˜å…ˆçº§ä¼šé™ä½ï¼›<br>æ•°å€¼è¶Šå°ï¼Œè¡¨æ˜è¿›ç¨‹æ˜¯ I/O å¯†é›†å‹è¿ç®—ï¼Œæ‰§è¡Œä¼˜å…ˆçº§ä¼šæé«˜<br>STIME    è¿›ç¨‹å¯åŠ¨çš„æ—¶é—´<br>TTY         å®Œæ•´çš„ç»ˆç«¯åç§°<br>TIME        CPU ä½¿ç”¨æ—¶é—´<br>CMD    å¯åŠ¨è¿›ç¨‹æ‰€ç”¨çš„å‘½ä»¤å’Œå‚æ•°<br><br>è¾“å…¥ï¼šps -ef | grep sshd<br>å¾—åˆ°ç¬¬ä¸‰åˆ—ä¸º1ï¼Œå³çˆ¶è¿›ç¨‹ID=1<br><br></code></pre></td></tr></tbody></table></figure><p>kill å’Œ killallæŒ‡ä»¤ï¼šç»ˆæ­¢è¿›ç¨‹</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.ä»‹ç»:<br>è‹¥æ˜¯æŸä¸ªè¿›ç¨‹æ‰§è¡Œä¸€åŠéœ€è¦åœæ­¢æ—¶ï¼Œæˆ–æ˜¯å·²ç»æ¶ˆè€—äº†å¾ˆå¤§çš„ç³»ç»Ÿèµ„æºæ—¶ï¼Œæ­¤æ—¶å¯ä»¥è€ƒè™‘åœæ­¢è¯¥è¿›ç¨‹ã€‚<br>ä½¿ç”¨ kill å‘½ä»¤æ¥å®Œæˆæ­¤é¡¹ä»»åŠ¡ã€‚<br><br>2.åŸºæœ¬è¯­æ³•ï¼š<br>kill [é€‰é¡¹] è¿›ç¨‹å·ï¼ˆåŠŸèƒ½æè¿°ï¼šé€šè¿‡è¿›ç¨‹å·æ€æ­»/ç»ˆæ­¢è¿›ç¨‹ï¼‰<br>killall è¿›ç¨‹åç§°    ï¼ˆåŠŸèƒ½æè¿°ï¼šé€šè¿‡è¿›ç¨‹åç§°æ€æ­»è¿›ç¨‹ï¼Œä¹Ÿæ”¯æŒé€šé…ç¬¦ï¼Œè¿™åœ¨ç³»ç»Ÿå› è´Ÿè½½è¿‡å¤§è€Œå˜å¾—å¾ˆæ…¢æ—¶å¾ˆæœ‰ç”¨ï¼‰<br> ä½¿ç”¨killallï¼Œä¼šå°†è¯¥è¿›ç¨‹çš„æ‰€æœ‰å­è¿›ç¨‹ä¹Ÿéƒ½åˆ é™¤/ç»ˆæ­¢ã€‚<br><br><br>3.å¸¸ç”¨é€‰é¡¹ï¼š<br>-9   è¡¨ç¤ºå¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹<br> (ç³»ç»Ÿè§‰å¾—æŸä¸ªç¨‹åºé‡è¦ï¼Œå¯èƒ½ä¼šå±è”½ä½ çš„killæŒ‡ä»¤ï¼Œè¿™æ—¶ä½¿ç”¨é€‰é¡¹-9å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹)<br><br><br>4.æ¡ˆä¾‹ï¼š<br>æ¡ˆä¾‹ 1ï¼šè¸¢æ‰æŸä¸ªéæ³•ç™»å½•ç”¨æˆ·<br>kill è¿›ç¨‹å· <br>æ¯”å¦‚ kill 11421<br><br>å‡å¦‚ä½¿ç”¨tomç™»å½•ï¼Œç„¶ååœ¨å›¾å½¢ç•Œé¢æ‰“å¼€ç»ˆç«¯å†™ä»£ç <br>å‡è®¾è®¤ä¸ºtomæ˜¯ä¸ªéæ³•ç”¨æˆ·ï¼Œè¦è¸¢æ‰å®ƒ<br>å…ˆåœ¨å›¾å½¢ç•Œé¢å†™ä»£ç ï¼šps -aux | grep sshd<br>sshd æ˜¯è®°è½½è¿œç¨‹è¿æ¥æœåŠ¡çš„é…ç½®æ–‡ä»¶<br>ä¸Šè¿°æŒ‡ä»¤æ˜¾ç¤ºå‡ºäº†ï¼Œè¿œç¨‹ç™»å½•çš„è¿›ç¨‹ä¿¡æ¯ï¼Œä»ä¸­çœ‹åˆ°äº†tomç™»å½•çš„è¿›ç¨‹çš„è¿›ç¨‹å·11421<br>æ‰€ä»¥ kill 11421  è¿™æ ·tomå°±ä¸‹çº¿äº†ï¼<br><br><br>æ¡ˆä¾‹ 2ï¼šç»ˆæ­¢è¿œç¨‹ç™»å½•æœåŠ¡ sshd, åœ¨é€‚å½“æ—¶å€™å†æ¬¡é‡å¯ sshd æœåŠ¡<br>sshd ---&gt; secure shell<br><br>é¦–å…ˆæŸ¥çœ‹ sshd å¯¹åº”çš„è¿›ç¨‹å·ï¼š<br>ä½¿ç”¨å‘½ä»¤ï¼šps -aux | grep sshd<br>æœ‰ /user/sbin/sshd çš„é‚£ä¸ªè¿›ç¨‹å°±æ˜¯ sshd æœåŠ¡è¿›ç¨‹ è¿›ç¨‹å·10748<br>ç»ˆæ­¢ sshd ä¹‹åï¼Œå°±æ— æ³•åœ¨xshellè¿œç¨‹ç™»é™†äº†ï¼<br><br>é‡å¯ sshd æœåŠ¡æŒ‡ä»¤ï¼š<br>/bin/systemctl start æœåŠ¡åç§°<br>/bin/systemctl start sshd.service<br><br><br>æ¡ˆä¾‹ 3ï¼šç»ˆæ­¢å¤šä¸ª gedit (æ–‡æœ¬ç¼–è¾‘å™¨)<br>åœ¨Linuxæ¡Œé¢ï¼Œä¸»æ–‡ä»¶å¤¹ä¸­ï¼Œæ‰“å¼€å¤šä¸ªæ–‡æœ¬ï¼Œç„¶åä½¿ç”¨killall å¯ä»¥åŒæ—¶å…³é—­æ‰€æœ‰æ‰“å¼€çš„æ–‡æœ¬<br>killallgedit<br><br>æ¡ˆä¾‹ 4ï¼šå¼ºåˆ¶æ€æ‰ä¸€ä¸ªç»ˆç«¯<br>åœ¨Linuxç³»ç»Ÿæ¡Œé¢æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯ï¼Œbashå³ä»£è¡¨ç»ˆç«¯è¿›ç¨‹<br>åœ¨ä¸€ä¸ªç»ˆç«¯ä¸­è¾“å…¥æŒ‡ä»¤å¼ºåˆ¶å…³é—­å¦ä¸€ä¸ªç»ˆç«¯<br>é¦–å…ˆï¼šæŸ¥çœ‹ç»ˆç«¯è¿›ç¨‹çš„è¿›ç¨‹å·ï¼šps -aux | grep bash<br>å¾—åˆ°å¯¹åº”çš„è¿›ç¨‹å·ï¼Œè¾“å…¥ï¼škill -9  å¯¹åº”çš„è¿›ç¨‹å·<br><br>ä¹Ÿå¯ä»¥ç»ˆç«¯è‡ªå·±ç»ˆæ­¢è‡ªå·±<br></code></pre></td></tr></tbody></table></figure><p> æŸ¥çœ‹è¿›ç¨‹æ ‘ pstree</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.åŸºæœ¬è¯­æ³•ï¼špstree [é€‰é¡¹] <br>åŠŸèƒ½ï¼šå¯ä»¥æ›´åŠ ç›´è§‚çš„æ¥çœ‹è¿›ç¨‹ä¿¡æ¯(æ ‘çš„å½¢å¼)<br><br>2.å¸¸ç”¨é€‰é¡¹ï¼š<br>-p :æ˜¾ç¤ºè¿›ç¨‹çš„ PID (çˆ¶è¿›ç¨‹ID)<br>-u :æ˜¾ç¤ºè¿›ç¨‹çš„æ‰€å±ç”¨æˆ·<br><br><br>3.åº”ç”¨å®ä¾‹ï¼š<br>æ¡ˆä¾‹ 1ï¼šç”¨æ ‘çŠ¶çš„å½¢å¼æ˜¾ç¤ºè¿›ç¨‹çš„pid(è¿›ç¨‹å·)<br>pstree -p<br><br>æ¡ˆä¾‹ 2ï¼šç”¨æ ‘çŠ¶çš„å½¢å¼æ˜¾ç¤ºè¿›ç¨‹çš„ç”¨æˆ·<br>pstree -u<br><br></code></pre></td></tr></tbody></table></figure><p>æœåŠ¡ç®¡ç†</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">æœåŠ¡(service) æœ¬è´¨å°±æ˜¯è¿›ç¨‹ï¼Œä½†æ˜¯æ˜¯è¿è¡Œåœ¨åå°çš„ï¼Œ<br>é€šå¸¸éƒ½ä¼šç›‘å¬æŸä¸ªç«¯å£ï¼Œç­‰å¾…å…¶å®ƒç¨‹åºçš„è¯·æ±‚ï¼Œæ¯”å¦‚(mysqld , sshdé˜²ç«å¢™ç­‰)ï¼Œ<br>å› æ­¤æˆ‘ä»¬åˆç§°ä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼Œæ˜¯ Linux ä¸­éå¸¸é‡è¦çš„çŸ¥è¯†ç‚¹ã€‚<br></code></pre></td></tr></tbody></table></figure><p>service ç®¡ç†æŒ‡ä»¤</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1)serviceæœåŠ¡å [start | stop | restart | reload | status]<br>start å¼€å¯æœåŠ¡<br>stop ç»ˆæ­¢æœåŠ¡<br>restart é‡å¯æœåŠ¡<br>reload é‡è½½æœåŠ¡<br>status æŸ¥çœ‹æœåŠ¡çš„çŠ¶æ€<br><br>(2)åœ¨ CentOS7.0 åå¾ˆå¤šæœåŠ¡ä¸å†ä½¿ç”¨ serviceæŒ‡ä»¤ç®¡ç†,è€Œæ˜¯ä½¿ç”¨ systemctl (åé¢ä¸“é—¨è®²)<br><br>(3)è¿˜æœ‰ä¸€äº›åœ¨ /etc/init.d ä¸‹çš„æœåŠ¡ä»ä½¿ç”¨ service æŒ‡ä»¤ç®¡ç†<br><br>æ¡ˆä¾‹ï¼š<br>è¯·ä½¿ç”¨ service æŒ‡ä»¤ï¼ŒæŸ¥çœ‹ï¼Œå…³é—­ï¼Œå¯åŠ¨ network<br>[æ³¨æ„ï¼šåœ¨è™šæ‹Ÿç³»ç»Ÿæ‰“å¼€ç»ˆç«¯æ¼”ç¤ºï¼Œå› ä¸ºç½‘ç»œè¿æ¥ä¼šå…³é—­]<br>æŒ‡ä»¤:<br>service network status <br>service network stop <br>service network start<br></code></pre></td></tr></tbody></table></figure><p>æŸ¥çœ‹æœåŠ¡åçš„æ–¹å¼ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">æ–¹å¼ 1ï¼šç›´æ¥è¾“å…¥ setup å³å¯çœ‹åˆ°æ‰€æœ‰æœåŠ¡<br>å…¶ä¸­å‰é¢å¸¦ * çš„æœåŠ¡ä¼šéšç€Linuxç³»ç»Ÿçš„å¯åŠ¨è€Œè‡ªåŠ¨å¯åŠ¨ã€‚<br>æ–¹å¼ 2:ls -l /etc/init.d<br>åªèƒ½çœ‹åˆ°éƒ¨åˆ†æœåŠ¡ï¼šè¿˜æœ‰ä¸€äº›åœ¨ /etc/init.d ä¸‹çš„æœåŠ¡ä»ä½¿ç”¨ service æŒ‡ä»¤ç®¡ç†<br><br></code></pre></td></tr></tbody></table></figure><p> æœåŠ¡çš„è¿è¡Œçº§åˆ«(runlevel)</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">Linux ç³»ç»Ÿæœ‰ 7 ç§è¿è¡Œçº§åˆ«(runlevel)ï¼šå¸¸ç”¨çš„æ˜¯çº§åˆ« 3 å’Œ 5<br><br>è¿è¡Œçº§åˆ« 0ï¼šç³»ç»ŸåœæœºçŠ¶æ€ï¼Œç³»ç»Ÿé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º 0ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨<br>è¿è¡Œçº§åˆ« 1ï¼šå•ç”¨æˆ·å·¥ä½œçŠ¶æ€ï¼Œroot æƒé™ï¼Œç”¨äºç³»ç»Ÿç»´æŠ¤ï¼Œç¦æ­¢è¿œç¨‹ç™»é™†<br>è¿è¡Œçº§åˆ« 2ï¼šå¤šç”¨æˆ·çŠ¶æ€(æ²¡æœ‰ NFS)ï¼Œä¸æ”¯æŒç½‘ç»œ<br>è¿è¡Œçº§åˆ« 3ï¼šå®Œå…¨çš„å¤šç”¨æˆ·çŠ¶æ€(æœ‰ NFS)ï¼Œæ— ç•Œé¢ï¼Œç™»é™†åè¿›å…¥æ§åˆ¶å°å‘½ä»¤è¡Œæ¨¡å¼<br>è¿è¡Œçº§åˆ« 4ï¼šç³»ç»Ÿæœªä½¿ç”¨ï¼Œä¿ç•™<br>è¿è¡Œçº§åˆ« 5ï¼šX11 æ§åˆ¶å°ï¼Œç™»é™†åè¿›å…¥å›¾å½¢ GUI æ¨¡å¼<br>è¿è¡Œçº§åˆ« 6ï¼šç³»ç»Ÿæ­£å¸¸å…³é—­å¹¶é‡å¯ï¼Œé»˜è®¤è¿è¡Œçº§åˆ«ä¸èƒ½è®¾ä¸º 6ï¼Œå¦åˆ™ä¸èƒ½æ­£å¸¸å¯åŠ¨<br>æˆè¯¾æ—¶ä½¿ç”¨5ï¼Œå·¥ä½œæ—¶å¤§å¤šä½¿ç”¨3ã€‚<br></code></pre></td></tr></tbody></table></figure><p>å¼€æœºçš„æµç¨‹è¯´æ˜ï¼š</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019115702418.png" alt="image-20221019115702418"></p><p> CentOS7 åè¿è¡Œçº§åˆ«è¯´æ˜</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">åœ¨ /etc/initab <br>è¿›è¡Œäº†ç®€åŒ–ï¼Œå¦‚ä¸‹:<br>multi-user.target: analogous to runlevel 3 <br>graphical.target: analogous to runlevel 5 <br><br>æŸ¥çœ‹å½“å‰è¿è¡Œçº§åˆ«ï¼šsystemctl get-default<br>ctl ---&gt; control<br><br>æ›´æ”¹è¿è¡Œçº§åˆ«ï¼šsystemctl set-default multi-user.target/graphical.target<br>    ç„¶åé‡å¯ reboot<br></code></pre></td></tr></tbody></table></figure><p>chkconfig æŒ‡ä»¤</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell">é€šè¿‡ chkconfig å‘½ä»¤å¯ä»¥ç»™æœåŠ¡åœ¨ å„ä¸ªè¿è¡Œçº§åˆ« è®¾ç½®å¼€å¯è‡ªå¯åŠ¨/å…³é—­è‡ªå¯åŠ¨<br><br>chkconfig æŒ‡ä»¤ç®¡ç†çš„æœåŠ¡åœ¨ /etc/init.d  æŸ¥çœ‹<br><br>æ³¨æ„: Centos7.0 åï¼Œå¾ˆå¤šæœåŠ¡ä½¿ç”¨ systemctl ç®¡ç† (åé¢é©¬ä¸Šè®²)<br><br><br>chkconfig åŸºæœ¬è¯­æ³•ï¼š<br>(1)æŸ¥çœ‹æœåŠ¡å’ŒæœåŠ¡åœ¨å„ä¸ªçº§åˆ«æ˜¯å¼€å¯/å…³é—­è‡ªå¯åŠ¨  (æœ‰é™ï¼Œåªèƒ½æŸ¥çœ‹chkconfigç®¡ç†ä¸‹çš„æœåŠ¡)<br>chkconfig --list [| grepxxx]    (è‹¥æŸ¥æ‰¾æŸä¸€ä¸ªæœåŠ¡ä½¿ç”¨grepè¿‡æ»¤)<br> <br>(2)chkconfig æœåŠ¡å --list<br><br>(3)chkconfig --level 5 æœåŠ¡å on   ç»™è¯¥æœåŠ¡åœ¨5è¿è¡Œçº§åˆ«å¼€å¯è‡ªå¯åŠ¨<br>chkconfig --level 5 æœåŠ¡å off     ç»™è¯¥æœåŠ¡åœ¨5è¿è¡Œçº§åˆ«å…³é—­è‡ªå¯åŠ¨<br><br>æ¡ˆä¾‹æ¼”ç¤º: å¯¹networkæœåŠ¡è¿›è¡Œå„ç§æ“ä½œ,æŠŠ network åœ¨ 3 è¿è¡Œçº§åˆ« å…³é—­è‡ªå¯åŠ¨<br>chkconfig --level 3 network off <br><br>æ³¨æ„ï¼šchkconfig é‡æ–°è®¾ç½®æœåŠ¡åè‡ªå¯åŠ¨æˆ–å…³é—­ï¼Œéœ€è¦é‡å¯æœºå™¨ reboot ç”Ÿæ•ˆ.<br></code></pre></td></tr></tbody></table></figure><p> systemctl ç®¡ç†æŒ‡ä»¤</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">åŸºæœ¬è¯­æ³•ï¼šsystemctl [start | stop | restart | status] æœåŠ¡å<br>systemctl æŒ‡ä»¤ç®¡ç†çš„æœåŠ¡åœ¨ /usr/lib/systemd/system æŸ¥çœ‹<br></code></pre></td></tr></tbody></table></figure><p> systemctl  è®¾ç½®æœåŠ¡çš„è‡ªå¯åŠ¨çŠ¶æ€</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl list-unit-files [ | grep æœåŠ¡å] (æŸ¥çœ‹æœåŠ¡å¼€æœºå¯åŠ¨çŠ¶æ€, grep å¯ä»¥è¿›è¡Œè¿‡æ»¤) <br>systemctl enable æœåŠ¡å (è®¾ç½®æœåŠ¡å¼€æœºè‡ªå¯åŠ¨)<br>systemctl disable æœåŠ¡å (å…³é—­æœåŠ¡å¼€æœºè‡ªå¯åŠ¨)<br>systemctl is-enabled æœåŠ¡å  (æŸ¥è¯¢æŸä¸ªæœåŠ¡æ˜¯å¦æ˜¯è‡ªå¯åŠ¨çš„)<br><br>centos7ä¹‹åè¿è¡Œçº§åˆ«åªæœ‰3å’Œ5ï¼Œæ‰€ä»¥ä»¥ä¸ŠæŒ‡ä»¤å¯¹3å’Œ5è¿è¡Œçº§åˆ«åŒæ—¶é€‚ç”¨ã€‚<br><br>åº”ç”¨æ¡ˆä¾‹ï¼š<br>æŸ¥çœ‹å½“å‰é˜²ç«å¢™çš„çŠ¶å†µï¼Œå…³é—­é˜²ç«å¢™å’Œé‡å¯é˜²ç«å¢™ firewalld.service <br>æŸ¥çœ‹å½“å‰é˜²ç«å¢™æƒ…å†µï¼šsystemctl status firewalld<br>å…³é—­é˜²ç«å¢™ï¼šsystemctl stop firewalld<br>é‡å¯é˜²ç«å¢™ï¼šsystemctl start firewalld<br>.serviceå†™ä¸å†™éƒ½è¡Œ<br>æ³¨æ„ï¼šå…³é—­æˆ–è€…å¯ç”¨é˜²ç«å¢™åï¼Œç«‹å³ç”Ÿæ•ˆã€‚<br>ä½†æ˜¯ è¿™ç§æ–¹å¼åªæ˜¯ä¸´æ—¶ç”Ÿæ•ˆï¼Œå½“é‡å¯ç³»ç»Ÿåï¼Œè¿˜æ˜¯å›å½’ä»¥å‰å¯¹æœåŠ¡çš„è®¾ç½®ã€‚<br><br>å¦‚æœå¸Œæœ›è®¾ç½®æŸä¸ªæœåŠ¡è‡ªå¯åŠ¨æˆ–å…³é—­æ°¸ä¹…ç”Ÿæ•ˆ<br>è¦ä½¿ç”¨ systemctl[enable|disable] æœåŠ¡å<br></code></pre></td></tr></tbody></table></figure><p> firewall æŒ‡ä»¤ï¼šæ‰“å¼€æˆ–è€…å…³é—­æŒ‡å®šç«¯å£</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">åœ¨çœŸæ­£çš„ç”Ÿäº§ç¯å¢ƒï¼Œå¾€å¾€éœ€è¦å°†é˜²ç«å¢™æ‰“å¼€ã€‚<br>ä½†é—®é¢˜æ¥äº†ï¼Œå¦‚æœæˆ‘ä»¬æŠŠé˜²ç«å¢™æ‰“å¼€ï¼Œé‚£ä¹ˆå¤–éƒ¨è¯·æ±‚æ•°æ®åŒ…å°±ä¸èƒ½è·ŸæœåŠ¡å™¨ç›‘å¬ç«¯å£é€šè®¯ã€‚<br>è¿™æ—¶ï¼Œéœ€è¦æ‰“å¼€æŒ‡å®šçš„ç«¯å£ã€‚æ¯”å¦‚ 80ã€22ã€8080 ç­‰ã€‚<br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019115940049.png" alt="image-20221019115940049"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1)æ‰“å¼€ç«¯å£: firewall-cmd --permanent --add-port=ç«¯å£å·/åè®®<br><br>é€šè¿‡ netstat -anp | more æŒ‡ä»¤æŸ¥çœ‹ç«¯å£å·çš„åè®® (more åˆ†é¡µæ˜¾ç¤º)<br>è¯¥æŒ‡ä»¤è¾“å‡ºçš„ä¿¡æ¯ä¸­ï¼š<br>Local Addressä¸‹æ˜¯ ipåœ°å€:ç«¯å£å·<br>Proto æ˜¯åè®®   (protocol åè®®)<br><br>(2)å…³é—­ç«¯å£: firewall-cmd --permanent --remove-port=ç«¯å£å·/åè®®<br><br>æ³¨æ„ï¼šæ— è®ºæ˜¯æ‰“å¼€ç«¯å£è¿˜æ˜¯å…³é—­ç«¯å£ï¼Œè¦é‡æ–°è½½å…¥æ‰èƒ½ç”Ÿæ•ˆ<br>é‡æ–°è½½å…¥ï¼šfirewall-cmd --reload<br><br>(3) æŸ¥è¯¢ç«¯å£æ˜¯å¦å¼€æ”¾: firewall-cmd --query-port=ç«¯å£/åè®®<br><br>åº”ç”¨æ¡ˆä¾‹ï¼š<br>(1)å¯ç”¨é˜²ç«å¢™ï¼Œæµ‹è¯• 111 ç«¯å£æ˜¯å¦èƒ½ telnet (è¿œç¨‹ç™»å½•) ä¸è¡Œ<br>åœ¨æœ¬åœ°ä¸»æœºDOSå‘½ä»¤çª—å£è¾“å…¥ï¼štelnet Linuxè™šæ‹Ÿæœºipåœ°å€:ç«¯å£å·<br>æµ‹è¯•æœ¬åœ°ä¸»æœºèƒ½å¦è®¿é—®è™šæ‹Ÿæœºçš„111ç«¯å£<br>telnet 192.168.200.130 111<br><br>é˜²ç«å¢™æ‰“å¼€+ç«¯å£å…³é—­---&gt;ä¸å¯ä»¥è®¿é—®ç«¯å£<br><br>(2)å¼€æ”¾ 111 ç«¯å£<br>firewall-cmd --permanent --add-port=111/tcp ;<br>éœ€è¦ firewall-cmd --reload<br><br>é˜²ç«å¢™æ‰“å¼€+ç«¯å£æ‰“å¼€---&gt;å¯ä»¥è®¿é—®ç«¯å£<br><br>(3)å†æ¬¡å…³é—­ 111 ç«¯å£<br>firewall-cmd --permanent --remove-port=111/tcp <br>éœ€è¦ firewall-cmd --reload<br></code></pre></td></tr></tbody></table></figure><p> topæŒ‡ä»¤ï¼šåŠ¨æ€ç›‘æ§è¿›ç¨‹</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">top ä¸ ps å‘½ä»¤å¾ˆç›¸ä¼¼ã€‚<br>å®ƒä»¬éƒ½ç”¨æ¥æ˜¾ç¤ºæ­£åœ¨æ‰§è¡Œçš„è¿›ç¨‹ã€‚<br>top ä¸ ps æœ€å¤§çš„ä¸åŒä¹‹å¤„åœ¨äº: top åœ¨æ‰§è¡Œä¸€æ®µæ—¶é—´å¯ä»¥æ›´æ–°æ­£åœ¨è¿è¡Œçš„çš„è¿›ç¨‹ã€‚<br>è¯­æ³•ï¼š<br>top [é€‰é¡¹]<br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019120108788.png" alt="image-20221019120108788"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs shell">è¾“å…¥topæŒ‡ä»¤åï¼šæ¯ä¸€æ¡éƒ½æ˜¯ä¸€ä¸ªè¿›ç¨‹<br>æ˜¾ç¤ºï¼š<br>ç¬¬ä¸€è¡Œ<br>ç¬¬ä¸€ä¸ªæ—¶é—´      å½“å‰æ—¶é—´<br>ç¬¬äºŒä¸ªæ—¶é—´      ç³»ç»Ÿè¿è¡Œæ—¶é—´<br>2 users       æœ‰å‡ ä¸ªç”¨æˆ·<br>load average   è´Ÿè½½å€¼(ä¸‰ä¸ªå€¼ç›¸åŠ é™¤ä»¥3&gt;0.7 è¯´æ˜ç³»ç»Ÿè´Ÿè½½è¿‡å¤§ï¼Œè¦æé«˜æ€§èƒ½)<br>ç¬¬äºŒè¡Œ<br>Tasks ç³»ç»Ÿä»»åŠ¡æ•°<br>1 running 1ä¸ªæ­£åœ¨è¿è¡Œè¿›ç¨‹<br>184 sleeping 184ä¸ªä¼‘çœ è¿›ç¨‹<br>0 stopped 0ä¸ªç»ˆæ­¢è¿›ç¨‹<br>0 zombie 0ä¸ªåƒµæ­»è¿›ç¨‹   (è¦æ¸…é™¤åƒµæ­»è¿›ç¨‹ï¼Œå› ä¸ºåƒµæ­»è¿›ç¨‹æ— ç”¨ä¸”å å†…å­˜ç©ºé—´)<br>ç¬¬ä¸‰è¡Œ å ç”¨çš„CPUç™¾åˆ†æ¯”<br>us ç”¨æˆ·å ç”¨çš„CPU<br>sy ç³»ç»Ÿå ç”¨çš„CPU<br>id ç©ºé—²<br>ç¬¬å››è¡Œ Mem å†…å­˜å ç”¨æƒ…å†µ<br>total æ€»å…±å†…å­˜<br>free ç©ºé—²å†…å­˜<br>user å·²ä½¿ç”¨å†…å­˜<br>ç¬¬äº”è¡Œ Swap åˆ†åŒº<br>total æ€»å…±å¤§å°<br>free æœªä½¿ç”¨å¤§å°<br>used å·²ç”¨å¤§å°<br>avail Mem å¯è·å–çš„å†…å­˜å¤§å°<br></code></pre></td></tr></tbody></table></figure><p>äº¤äº’æ“ä½œè¯´æ˜</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">è¾“å…¥å‘½ä»¤top<br>ç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå¾—ä»¥ä¸‹åŠŸèƒ½å¯¹è¿›ç¨‹è¿›è¡Œæ’åº<br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019120213845.png" alt="image-20221019120213845"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell">æ¡ˆä¾‹ 1ï¼šç›‘è§†ç‰¹å®šç”¨æˆ·, æ¯”å¦‚ç›‘æ§ tom ç”¨æˆ·<br>è¾“å…¥top<br>å›è½¦<br>è¾“å…¥u<br>å›è½¦<br>è¾“å…¥è¦ç›‘æ§ç”¨æˆ·å (è¯¥ç”¨æˆ·è¦ç™»å½•æ‰èƒ½çœ‹åˆ°ä»–çš„è¿›ç¨‹ä¿¡æ¯)<br><br><br>æ¡ˆä¾‹ 2ï¼šç»ˆæ­¢æŒ‡å®šçš„è¿›ç¨‹, æ¯”å¦‚æˆ‘ä»¬è¦ç»“æŸ tom ç™»å½•<br>è¾“å…¥top<br>å›è½¦<br>è¾“å…¥k<br>å›è½¦<br>è¾“å…¥è¦ç»“æŸçš„è¿›ç¨‹ ID å· ï¼ˆbashé‚£ä¸ªè¿›ç¨‹çš„PIDï¼‰<br>å›è½¦<br>è¾“å…¥ä¿¡å·é‡ 9 å¼ºåˆ¶åˆ é™¤<br>tomæ‰çº¿<br><br>æ¡ˆä¾‹ 3ï¼šæŒ‡å®šç³»ç»ŸçŠ¶æ€æ›´æ–°çš„æ—¶é—´(æ¯éš” 10 ç§’è‡ªåŠ¨æ›´æ–°),é»˜è®¤æ˜¯ 3 ç§’<br>top -d 10<br></code></pre></td></tr></tbody></table></figure><p> æŸ¥çœ‹ç³»ç»Ÿç½‘ç»œæƒ…å†µnetstat</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs shell">åŸºæœ¬è¯­æ³•ï¼š<br>netstat [é€‰é¡¹]<br><br>é€‰é¡¹è¯´æ˜ï¼š<br>-anæŒ‰ä¸€å®šé¡ºåºæ’åˆ—è¾“å‡º<br>-pæ˜¾ç¤ºå“ªä¸ªè¿›ç¨‹åœ¨è°ƒç”¨<br><br>è¾“å…¥netstat -an | more (more åˆ†é¡µå±•ç¤º)<br>æ˜¾ç¤ºï¼š<br>Proto åè®®<br>Recv-Qæ¥æ”¶ä¿¡æ¯é˜Ÿåˆ—<br>Send-Q å‘é€ä¿¡æ¯é˜Ÿåˆ—<br>Local Address      æœ¬åœ°åœ°å€ Linuxåœ°å€ <br>Foreign Address         å¤–éƒ¨åœ°å€    <br>State LISTEN ç›‘å¬  ESTABLISHED å·²å»ºç«‹è¿æ¥ TIME_WAIT è¶…æ—¶ç­‰å¾…<br><br>TIME_WAIT è¶…æ—¶ç­‰å¾… <br><span class="hljs-meta prompt_">---&gt;</span><span class="language-bash">æŸä¸ªè¿æ¥æ–­äº†ä¹‹å(å¦‚ç”¨æˆ·é€€å‡ºç™»å½•)ï¼Œè¿æ¥ä¸ä¼šç«‹åˆ»æ¶ˆå¤±ï¼Œè€Œæ˜¯Stateå˜ä¸ºTIME_WAIT</span><br>ç³»ç»Ÿè®¤ä¸ºå¯èƒ½æ˜¯ç½‘ç»œçŠ¶æ€ä¸å¥½ï¼Œè¿‡ä¸€æ®µæ—¶é—´ä»æ— æ³•è¿æ¥ï¼Œåˆ™è¿æ¥æ¶ˆå¤±ã€‚ <br><br><br>Proto Recv-Q Send-Q Local Address           Foreign Address         State <br>tcp        0     36 192.168.200.130:22      192.168.200.1:14498     ESTABLISHED<br>è¦å»ºç«‹è¿æ¥åŒæ–¹éƒ½è¦æœ‰ä¸€ä¸ªç«¯å£<br>22ç«¯å£åœ¨Linux<br>14498ç«¯å£åœ¨Windows<br>å¦‚ä¸‹å›¾ï¼š<br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019120328489.png" alt="image-20221019120328489"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">æ¡ˆä¾‹ï¼šæŸ¥çœ‹æœåŠ¡åä¸º sshd çš„æœåŠ¡çš„ä¿¡æ¯ã€‚<br>netstat -anp | grep sshd<br>æ˜¯ä¸€ç§ç½‘ç»œæ£€æµ‹å·¥å…·ï¼Œå®ƒä¸»è¦æ˜¯ç”¨æ£€æµ‹è¿œç¨‹ä¸»æœºæ˜¯å¦æ­£å¸¸ï¼Œæˆ–æ˜¯ä¸¤éƒ¨ä¸»æœºé—´çš„ç½‘çº¿æˆ–ç½‘å¡æ•…éšœã€‚<br>å¦‚: ping å¯¹æ–¹çš„ipåœ°å€<br></code></pre></td></tr></tbody></table></figure><h2 id="ç¬¬åäº”ç« ï¼šLinux-å®æ“ç¯‡-RPM-ä¸-YUM"><a href="#ç¬¬åäº”ç« ï¼šLinux-å®æ“ç¯‡-RPM-ä¸-YUM" class="headerlink" title="ç¬¬åäº”ç« ï¼šLinux å®æ“ç¯‡- RPM ä¸ YUM"></a>ç¬¬åäº”ç« ï¼šLinux å®æ“ç¯‡- RPM ä¸ YUM</h2><h4 id="RPM-ä»‹ç»"><a href="#RPM-ä»‹ç»" class="headerlink" title="RPM ä»‹ç»"></a>RPM ä»‹ç»</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs shell">RPM æ˜¯ Red-Hat Package Managerï¼ˆçº¢å¸½è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼‰çš„ç¼©å†™<br>è¿™ä¸€æ–‡ä»¶æ ¼å¼åç§°è™½ç„¶æ‰“ä¸Šäº†RedHatçš„æ ‡å¿—ï¼Œä½†æ˜¯å…¶åŸå§‹è®¾è®¡ç†å¿µæ˜¯å¼€æ”¾å¼çš„ï¼Œ<br>åŒ…æ‹¬OpenLinuxã€S.u.S.E.ä»¥åŠTurbo Linuxç­‰Linuxçš„åˆ†å‘ç‰ˆæœ¬éƒ½æœ‰é‡‡ç”¨ï¼Œå¯ä»¥ç®—æ˜¯å…¬è®¤çš„è¡Œä¸šæ ‡å‡†äº†ã€‚<br>æ˜¯ä¸€ç§ç”¨äºäº’è”ç½‘ä¸‹è½½åŒ…çš„æ‰“åŒ…åŠå®‰è£…å·¥å…·ï¼Œå®ƒåŒ…å«åœ¨æŸäº›Linuxåˆ†å‘ç‰ˆä¸­ã€‚å®ƒç”Ÿæˆå…·æœ‰.RPMæ‰©å±•åçš„æ–‡ä»¶ã€‚<br>ç±»ä¼¼äº windows çš„ setup.exe<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-comment">##########################</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">rpm çš„ç®€å•æŸ¥è¯¢æŒ‡ä»¤</span><br>æŸ¥è¯¢å·²å®‰è£…çš„ rpmè½¯ä»¶åŒ… åˆ—è¡¨ï¼š<br>rpm â€“qa|grep xx <br>æŸ¥è¯¢ç»“æœè¿”å›ä¸€ä¸ªè½¯ä»¶åŒ…çš„åŒ…å<br><br>ä¸¾ä¾‹ï¼šæŸ¥çœ‹å½“å‰ç³»ç»Ÿæ˜¯å¦å®‰è£…äº† firefox <br>æŒ‡ä»¤: rpm -qa | grep firefox<br>æŸ¥è¯¢ç»“æœï¼šfirefox-60.2.2-1.el7.centos.x86_64<br>ç»“æœè¯´æ˜ï¼š<br>è½¯ä»¶åï¼šfirefox<br>ç‰ˆæœ¬å·ï¼š60.2.2-1<br>é€‚ç”¨æ“ä½œç³»ç»Ÿ: el7.centos.x86_64 (è¡¨ç¤º centos7.x çš„ 64 ä½ç³»ç»Ÿ)<br>å¦‚æœæ˜¯ i686ã€i386 è¡¨ç¤º 32 ä½ç³»ç»Ÿï¼Œnoarch è¡¨ç¤ºé€šç”¨(32/64ä½ç³»ç»Ÿéƒ½é€‚ç”¨)<br></code></pre></td></tr></tbody></table></figure><p> rpm çš„å…¶å®ƒæŸ¥è¯¢æŒ‡ä»¤</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell">rpm -qa (æŸ¥è¯¢æ‰€å®‰è£…çš„æ‰€æœ‰ rpm è½¯ä»¶åŒ…)<br><br>rpm -qa | more  (åˆ†é¡µæ˜¾ç¤ºmore)<br><br>rpm -qa | grep X    (è¿‡æ»¤,æ¯”å¦‚ rpm -qa | grep firefox )<br><br>rpm -q  è½¯ä»¶åŒ…å      (æŸ¥è¯¢æŸä¸ªè½¯ä»¶åŒ…æ˜¯å¦å®‰è£…)<br>æ¡ˆä¾‹ï¼šrpm -q firefox<br><br>rpm -qi è½¯ä»¶åŒ…å    (æŸ¥è¯¢è½¯ä»¶åŒ…çš„è¯¦ç»†ä¿¡æ¯)<br>æ¡ˆä¾‹: rpm -qi firefox<br><br>rpm -ql è½¯ä»¶åŒ…å  (æŸ¥è¯¢è½¯ä»¶åŒ…ä¸­çš„æ–‡ä»¶å’Œè¯¥è½¯ä»¶åŒ…åœ¨å“ªä¸ªæ–‡ä»¶ä¸‹)<br>æ¡ˆä¾‹ï¼š rpm -ql firefox<br><br>rpm -qf æ–‡ä»¶å…¨è·¯å¾„å  (æŸ¥è¯¢æŸä¸ªæ–‡ä»¶æ‰€å±åœ¨å“ªä¸ªè½¯ä»¶åŒ…)<br>æ¡ˆä¾‹ï¼šrpm -qf /etc/passwd rpm <br>æ¡ˆä¾‹ï¼š-qf /root/install.log<br></code></pre></td></tr></tbody></table></figure><p> åˆ é™¤ rpm è½¯ä»¶åŒ…</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs shell">åŸºæœ¬è¯­æ³•ï¼šrpm -e RPMè½¯ä»¶åŒ…çš„åç§°//-e eraseæ“¦å»<br>æ¡ˆä¾‹ï¼šåˆ é™¤ firefox è½¯ä»¶åŒ…<br>rpm -e firefox<br><br>æ³¨æ„ï¼š<br>(1)å¦‚æœå…¶å®ƒè½¯ä»¶åŒ…ä¾èµ–äºæ‚¨è¦åˆ é™¤çš„è½¯ä»¶åŒ…ï¼Œåˆ é™¤æ—¶åˆ™ä¼šäº§ç”Ÿé”™è¯¯ä¿¡æ¯ã€‚<br>å¦‚ï¼š<br>rpm -e foo<br>removing these packages would break dependencies:foo is needed by bar-1.0-1<br>fooè½¯ä»¶åŒ…è¢« bar-1.0-1éœ€è¦ï¼Œåˆ é™¤fooå¯¹barr-1.0-1æœ‰å½±å“<br><br>(2)å¦‚æœæˆ‘ä»¬å°±æ˜¯è¦åˆ é™¤ foo è¿™ä¸ª rpm åŒ…ï¼Œå¯ä»¥å¢åŠ å‚æ•° --nodeps ,å°±å¯ä»¥å¼ºåˆ¶åˆ é™¤<br>   ä½†æ˜¯ä¸€èˆ¬ä¸æ¨èè¿™æ ·åšï¼Œå› ä¸ºä¾èµ–äºè¯¥è½¯ä»¶åŒ…çš„ç¨‹åºå¯èƒ½æ— æ³•è¿è¡Œ<br>å¦‚ï¼šrpm -e --nodeps foo            (nodeps ä¸æ£€æŸ¥ä¾èµ–å…³ç³» no dependencies)<br><br></code></pre></td></tr></tbody></table></figure><p>å®‰è£… rpm è½¯ä»¶åŒ…</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell">åŸºæœ¬è¯­æ³•ï¼šrpm -ivh RPMè½¯ä»¶åŒ…å…¨è·¯å¾„åç§°<br><br>rpmè½¯ä»¶åŒ…å…¶å®æ˜¯ä¸€ä¸ªè½¯ä»¶çš„å®‰è£…åŒ…<br>ç‚¹å‡»Linuxç³»ç»Ÿæ¡Œé¢çš„å…‰ç›˜ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªPackagesæ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹é‡Œæœ‰å¾ˆå¤šrpmè½¯ä»¶å®‰è£…åŒ…<br><br>åœ¨/run/media/root/CentOS\ 7\ x86_64/Packages/ ç›®å½•ä¸‹<br><br><br>é€‰é¡¹ï¼š<br>i=install å®‰è£…<br>v=verbose æç¤º<br>h=hash  è¿›åº¦æ¡<br><br><br>åº”ç”¨å®ä¾‹ï¼š<br>æ¼”ç¤ºå¸è½½å’Œå®‰è£… firefox æµè§ˆå™¨<br>rpm -e firefox <br>rpm -ivh /run/media/root/CentOS\ 7\ x86_64/Packages/firefox-60.2.2-1.el7.centos.x86_64.rpm<br><br>ä¹Ÿå¯ä»¥åœ¨Packagesä¸­æ‰¾åˆ°firefoxå®‰è£…åŒ…ï¼Œå¤åˆ¶åˆ°æŸä¸€ä¸ªç›®å½•ä¸‹ï¼Œè¿™æ ·å†™è·¯å¾„ç®€å•<br><br></code></pre></td></tr></tbody></table></figure><h4 id="yumä»‹ç»"><a href="#yumä»‹ç»" class="headerlink" title="yumä»‹ç»"></a>yumä»‹ç»</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">Yumï¼ˆå…¨ç§°ä¸º Yellow dog Updater, Modifiedï¼‰æ˜¯ä¸€ä¸ª Shell å‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚<br>åŸºäº RPM åŒ…ç®¡ç†ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½ RPM åŒ…å¹¶ä¸”å®‰è£…ï¼Œ<br>å¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œå¹¶ä¸”ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…ã€‚<br><br>ä½¿ç”¨ yum list|grep è½¯ä»¶å å‘yumæœåŠ¡å™¨æŸ¥è¯¢æœ‰æ²¡æœ‰è¯¥è½¯ä»¶<br>æœ‰çš„è¯ï¼Œä½¿ç”¨ yum install è½¯ä»¶å ä¸‹è½½å®‰è£…è¯¥è½¯ä»¶<br></code></pre></td></tr></tbody></table></figure><p>  yum çš„åŸºæœ¬æŒ‡ä»¤</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">æŸ¥è¯¢ yum æœåŠ¡å™¨æ˜¯å¦æœ‰ éœ€è¦å®‰è£…çš„è½¯ä»¶ï¼š<br>yum list|grep è½¯ä»¶å<br><br>å®‰è£…æŒ‡å®šçš„è½¯ä»¶ï¼š<br>yum install è½¯ä»¶å<br><br>æ¡ˆä¾‹ï¼šè¯·ä½¿ç”¨ yum çš„æ–¹å¼æ¥å®‰è£… firefox <br>rpm -e firefox<br>yum list | grep firefox <br>yum install firefox<br></code></pre></td></tr></tbody></table></figure><p>æ€»ç»“ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">rpm æ˜¯ä»æœ¬åœ°å®‰è£…åŒ…ä¸‹è½½<br>yum æ˜¯ä»yumæœåŠ¡å™¨ä¸‹è½½å®‰è£…è½¯ä»¶<br></code></pre></td></tr></tbody></table></figure><h2 id="ç¬¬åä¸ƒç« ï¼šå¤§æ•°æ®å®šåˆ¶ç¯‡-Shellç¼–ç¨‹"><a href="#ç¬¬åä¸ƒç« ï¼šå¤§æ•°æ®å®šåˆ¶ç¯‡-Shellç¼–ç¨‹" class="headerlink" title="ç¬¬åä¸ƒç« ï¼šå¤§æ•°æ®å®šåˆ¶ç¯‡-Shellç¼–ç¨‹"></a>ç¬¬åä¸ƒç« ï¼šå¤§æ•°æ®å®šåˆ¶ç¯‡-Shellç¼–ç¨‹</h2><h4 id="Shell-æ˜¯ä»€ä¹ˆ"><a href="#Shell-æ˜¯ä»€ä¹ˆ" class="headerlink" title="Shell æ˜¯ä»€ä¹ˆ"></a>Shell æ˜¯ä»€ä¹ˆ</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell">Shell æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œå®ƒä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªå‘ Linux å†…æ ¸å‘é€è¯·æ±‚ä»¥ä¾¿è¿è¡Œç¨‹åºçš„ç•Œé¢ç³»ç»Ÿçº§ç¨‹åºï¼Œç”¨æˆ·å¯ä»¥ç”¨ Shell æ¥å¯åŠ¨ã€æŒ‚èµ·ã€åœæ­¢ç”šè‡³æ˜¯ç¼–å†™ä¸€äº›ç¨‹åºã€‚<br><br>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼ŒShellä¿—ç§°å£³ï¼ˆç”¨æ¥åŒºåˆ«äºæ ¸ï¼‰<br>æ˜¯æŒ‡â€œä¸ºä½¿ç”¨è€…æä¾›æ“ä½œç•Œé¢â€çš„è½¯ä»¶ï¼ˆcommand interpreterï¼Œå‘½ä»¤è§£æå™¨ï¼‰ã€‚<br>å®ƒç±»ä¼¼äºDOSä¸‹çš„COMMAND.COMå’Œåæ¥çš„cmd.exeã€‚<br>å®ƒæ¥æ”¶ç”¨æˆ·å‘½ä»¤ï¼Œç„¶åè°ƒç”¨ç›¸åº”çš„åº”ç”¨ç¨‹åºã€‚<br><br>ä¸­æ–‡åå£³<br>å¤–æ–‡åshell<br>æ€§è´¨å‘½ä»¤è§£æå™¨<br>ç”¨é€”æ¥æ”¶ç”¨æˆ·å‘½ä»¤<br>Shell æ˜¯æŒ‡ä¸€ç§åº”ç”¨ç¨‹åºï¼Œè¿™ä¸ªåº”ç”¨ç¨‹åºæä¾›äº†ä¸€ä¸ªç•Œé¢ï¼Œç”¨æˆ·é€šè¿‡è¿™ä¸ªç•Œé¢è®¿é—®æ“ä½œç³»ç»Ÿå†…æ ¸çš„æœåŠ¡ã€‚æ˜¯ç”¨æˆ·ä½¿ç”¨ Linux çš„æ¡¥æ¢.<br>ç”¨æˆ·å†™äº†ä¸€ä¸ªæŒ‡ä»¤ï¼Œè¯¥æŒ‡ä»¤ä¸èƒ½ç›´æ¥å‘ç»™Linuxå†…æ ¸å»æ‰§è¡Œï¼Œè€Œæ˜¯ç”±shellå¸®æˆ‘ä»¬å»æ‰§è¡Œï¼Œæ‰§è¡Œå®Œä¹‹åå†é€šè¿‡shellè¿”å›ç»™æˆ‘ä»¬ç»“æœã€‚<br>åœ¨Linuxä¸­ä¸æ­¢ä¸€ç§shellï¼Œæˆ‘ä»¬å¸¸ç”¨çš„æ˜¯bashã€‚<br>å¯ä»¥ç›´æ¥å‘ä¸€ä¸ªæŒ‡ä»¤ç»™shellï¼Œä¹Ÿå¯ä»¥å°†æŒ‡ä»¤å†™åœ¨ä¸€ä¸ªæ–‡ä»¶/è„šæœ¬(.sh shellè„šæœ¬)é‡Œã€‚<br>shellç¼–ç¨‹å°±æ˜¯åœ¨shellè„šæœ¬ä¸­å†™æŒ‡ä»¤ã€‚<br></code></pre></td></tr></tbody></table></figure><p>Shellè„šæœ¬</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.è„šæœ¬æ ¼å¼è¦æ±‚ï¼š<br>è„šæœ¬ä»¥ #!/bin/bash å¼€å¤´ ---&gt;ç¡®å®šshellçš„ç±»å‹<br>    è„šæœ¬éœ€è¦æœ‰å¯æ‰§è¡Œæƒé™<br>    shellè„šæœ¬æ–‡ä»¶ä»¥.shç»“å°¾ï¼Œä¹Ÿå¯ä»¥ä¸ä»¥.shç»“å°¾<br><br>2.ç¼–å†™ç¬¬ä¸€ä¸ªShell è„šæœ¬<br>éœ€æ±‚è¯´æ˜ï¼šåˆ›å»ºä¸€ä¸ª Shell è„šæœ¬ï¼Œè¾“å‡º hello world! <br>åˆ›å»ºä¸€ä¸ªç›®å½•ï¼šmkdir /root/shcode<br>cd /root/shcode<br>vim hello.sh<br>å†™å…¥ï¼š<br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br>echo "hello,world!"<br><br>3.shellè„šæœ¬çš„å¸¸ç”¨æ‰§è¡Œæ–¹å¼<br>æ–¹å¼ 1ï¼š<br>é¦–å…ˆè¦ç»™shellè„šæœ¬åŠ xæ‰§è¡Œæƒé™ï¼šchomod u+x hello.sh<br>å†è¾“å…¥è¯¥è„šæœ¬çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„æ¥æ‰§è¡Œè¯¥è„šæœ¬<br>    æ¯”å¦‚ï¼š<br> ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼š./hello.sh <br> ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼š/root/shcode/hello.sh<br><br>æ–¹å¼ 2ï¼š<br>ä¸ç”¨èµ‹äºˆè„šæœ¬+x æƒé™ï¼Œç›´æ¥æ‰§è¡Œå³å¯ã€‚(ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼Œå³ä½¿æ²¡æœ‰æ‰§è¡Œæƒé™ä¹Ÿå¯ä»¥æ‰§è¡Œ)<br>ä½¿ç”¨æŒ‡ä»¤ï¼š sh  shellè„šæœ¬/shellè„šæœ¬çš„ç»å¯¹è·¯å¾„<br>æ¯”å¦‚sh hello.sh <br><br></code></pre></td></tr></tbody></table></figure><h4 id="Shell-çš„å˜é‡"><a href="#Shell-çš„å˜é‡" class="headerlink" title="Shell çš„å˜é‡"></a>Shell çš„å˜é‡</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1)Linux Shell ä¸­çš„å˜é‡åˆ†ä¸º:ç³»ç»Ÿå˜é‡å’Œç”¨æˆ·è‡ªå®šä¹‰å˜é‡ã€‚<br>ç³»ç»Ÿå˜é‡ï¼šç³»ç»Ÿè‡ªå¸¦çš„å˜é‡<br><br>(2)ç³»ç»Ÿå˜é‡æ¯”å¦‚ï¼š$HOMEã€$PWDã€$SHELLã€$USER ç­‰ç­‰<br>echo $HOME---&gt;æ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„å®¶ç›®å½•<br><br>(3)å¯ä»¥é€šè¿‡ set æŒ‡ä»¤æ˜¾ç¤ºå‡ºshellä¸­çš„æ‰€æœ‰ç³»ç»Ÿå˜é‡<br></code></pre></td></tr></tbody></table></figure><h4 id="shell-è‡ªå®šä¹‰å˜é‡"><a href="#shell-è‡ªå®šä¹‰å˜é‡" class="headerlink" title="shell è‡ªå®šä¹‰å˜é‡"></a>shell è‡ªå®šä¹‰å˜é‡</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs shell">åŸºæœ¬è¯­æ³•ï¼š<br>(1)å®šä¹‰å˜é‡ï¼šå˜é‡å=å€¼  ---&gt;ä¸åŠ ç©ºæ ¼<br>(2)æ’¤é”€å˜é‡ï¼šunset å˜é‡å<br>(3)å£°æ˜é™æ€å˜é‡ï¼šreadonly å˜é‡ (æ”¹å˜é‡ä¸èƒ½ unsetæ’¤é”€)<br><br><br>æ¡ˆä¾‹ 1ï¼šå®šä¹‰å˜é‡ A<br>æ¡ˆä¾‹ 2ï¼šæ’¤é”€å˜é‡ A<br>æ¡ˆä¾‹ 3ï¼šå£°æ˜é™æ€çš„å˜é‡ B=2ï¼Œä¸èƒ½ unset<br><br>cd /root/shcode<br>vim vr.sh<br>è¾“å…¥ï¼š <br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 1ï¼šå®šä¹‰å˜é‡ A=100  (<span class="hljs-comment">#ä¸ºæ³¨é‡Šç¬¦)</span></span><br>A=100<br><span class="hljs-meta prompt_">#</span><span class="language-bash">è¾“å‡ºå˜é‡éœ€è¦åŠ ä¸Š$ ($---&gt;å¼•ç”¨å˜é‡)</span><br>echo $A<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¸Šè¿°è¾“å‡ºç»“æœæ˜¯100ï¼Œæƒ³è¦è¾“å‡ºç»“æœä¸ºA=100ï¼Œè¿™æ ·å†™(A=ä»¥æ™®é€šæ–‡æœ¬å½¢å¼è¾“å‡ºï¼Œ<span class="hljs-variable">$A</span>å¼•ç”¨å˜é‡çš„å€¼)</span><br>echo A=$A æˆ–è€… echo "A=$A" <br><br><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 2ï¼šæ’¤é”€å˜é‡ A</span> <br>unset A<br>echo "A=$A"    (---&gt;è¾“å‡º A= )<br><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 3ï¼šå£°æ˜é™æ€çš„å˜é‡ B=2ï¼Œä¸èƒ½ <span class="hljs-built_in">unset</span></span> <br>readonly B=2<br>echo "B=$B" <br><br>ä¿å­˜ï¼šwq<br>æœ€åè¾“å…¥æ‰§è¡Œå‘½ä»¤ï¼šsh vr.sh<br><br>--------------------------------------------------------------------<br><br><br>shell å˜é‡åçš„å®šä¹‰è§„åˆ™ï¼š<br>(1)å˜é‡åç§°å¯ä»¥ç”±å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆï¼Œä½†æ˜¯ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚5A=200(Ã—)<br>(2)ç­‰å·ä¸¤ä¾§ä¸èƒ½æœ‰ç©ºæ ¼<br>(3)å˜é‡åç§°ä¸€èˆ¬ä¹ æƒ¯ä¸ºå¤§å†™ï¼Œè¿™æ˜¯ä¸€ä¸ªè§„èŒƒï¼Œæˆ‘ä»¬éµå®ˆå³å¯<br><br>--------------------------------------------------------------------<br>å°†å‘½ä»¤çš„è¿”å›å€¼èµ‹ç»™å˜é‡ï¼š<br>(1)A=`date`åå¼•å·ï¼Œè¿è¡Œé‡Œé¢çš„å‘½ä»¤ï¼Œå¹¶æŠŠç»“æœè¿”å›ç»™å˜é‡ A <br>(2)A=$(date) ç­‰ä»·äºåå¼•å·<br>æ¡ˆä¾‹ï¼š<br><span class="hljs-meta prompt_">#</span><span class="language-bash">å°†æŒ‡ä»¤è¿”å›çš„ç»“æœèµ‹ç»™å˜é‡</span><br>C=`date` <br>D=$(date)<br>echo "C=$C" <br>echo "D=$D"<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä½¿ç”¨ç¯å¢ƒå˜é‡ TOMCAT_HOME</span><br>echo "tomcat_home=$TOMCAT_HOME"<br></code></pre></td></tr></tbody></table></figure><h4 id="è®¾ç½®ç¯å¢ƒå˜é‡-å…¨å±€å˜é‡"><a href="#è®¾ç½®ç¯å¢ƒå˜é‡-å…¨å±€å˜é‡" class="headerlink" title="è®¾ç½®ç¯å¢ƒå˜é‡(å…¨å±€å˜é‡)"></a>è®¾ç½®ç¯å¢ƒå˜é‡(å…¨å±€å˜é‡)</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs shell">å¯ä»¥å°†å˜é‡æå‡ä¸ºå…¨å±€ç¯å¢ƒå˜é‡ï¼Œä¾›å¤šä¸ªshellç¨‹åºå…±åŒä½¿ç”¨ã€‚<br><br>åŸºæœ¬è¯­æ³•ï¼š<br>(1)export å˜é‡å=å˜é‡å€¼ <br>ï¼ˆåŠŸèƒ½æè¿°ï¼šå°† shell å˜é‡è¾“å‡ºä¸ºç¯å¢ƒå˜é‡/å…¨å±€å˜é‡ï¼‰<br><br>(2)source é…ç½®æ–‡ä»¶    <br>ï¼ˆåŠŸèƒ½æè¿°ï¼šåœ¨æŸæ–‡ä»¶ä¸­å®šä¹‰ç¯å¢ƒå˜é‡ä¹‹åï¼Œè¦å¯¹è¯¥æ–‡ä»¶è¿›è¡Œåˆ·æ–°æ‰èƒ½ä½¿å…¶ç”Ÿæ•ˆï¼Œå³è®©ä¿®æ”¹åçš„é…ç½®ä¿¡æ¯ç«‹å³ç”Ÿæ•ˆï¼‰<br><br>(3)echo $å˜é‡å<br>ï¼ˆåŠŸèƒ½æè¿°ï¼šæŸ¥è¯¢ç¯å¢ƒå˜é‡çš„å€¼ï¼‰<br><br>å¿«é€Ÿå…¥é—¨ï¼š<br>(1)åœ¨/etc/profile æ–‡ä»¶ä¸­å®šä¹‰ TOMCAT_HOME ç¯å¢ƒå˜é‡<br>TOMCAT_HOME ---&gt;æ„æ€æ˜¯tomcatçš„å®¶ç›®å½•æ˜¯ä»€ä¹ˆ<br>(2)æŸ¥çœ‹ç¯å¢ƒå˜é‡ TOMCAT_HOME çš„å€¼<br>vim /etc/profile<br>å†™å…¥ï¼šexport TOMCAT_HOME=/opt/tomcat<br>ä¿å­˜é€€å‡º<br>source /etc/profile<br>echo $TOMCAT_HOME ---è¾“å‡º /opt/tomcat<br><br><br>(3)åœ¨å¦å¤–ä¸€ä¸ª shell ç¨‹åºä¸­ä½¿ç”¨ TOMCAT_HOME<br>åœ¨å¦ä¸€ä¸ªshellç¨‹åºä¸­å†™å…¥ï¼š<br>echo "tomcat_home=$TOMCAT_HOME"<br><br><br>æ³¨æ„ï¼šåœ¨è¾“å‡º TOMCAT_HOME ç¯å¢ƒå˜é‡å‰ï¼Œéœ€è¦è®©å…¶ç”Ÿæ•ˆsource /etc/profile<br><br><br>shell è„šæœ¬çš„<br>å•è¡Œæ³¨é‡Šï¼š#<br>å¤šè¡Œæ³¨é‡Šï¼š   :&lt;&lt;!   ç‹¬å ä¸€è¡Œ<br>å†…å®¹ <br>    !    ç‹¬å ä¸€è¡Œ<br></code></pre></td></tr></tbody></table></figure><h4 id="ä½ç½®å‚æ•°å˜é‡"><a href="#ä½ç½®å‚æ•°å˜é‡" class="headerlink" title="ä½ç½®å‚æ•°å˜é‡"></a>ä½ç½®å‚æ•°å˜é‡</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.ä»‹ç»<br>å½“æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ª shell è„šæœ¬æ—¶ï¼Œå¦‚æœå¸Œæœ›è·å–åˆ°å‘½ä»¤è¡Œçš„å‚æ•°ä¿¡æ¯ï¼Œå°±å¯ä»¥ä½¿ç”¨åˆ°ä½ç½®å‚æ•°å˜é‡<br>æ¯”å¦‚ï¼š ./myshell.sh 100 200 è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªæ‰§è¡Œ shell çš„å‘½ä»¤è¡Œï¼Œå¯ä»¥åœ¨ myshell è„šæœ¬ä¸­è·å–åˆ°å‚æ•°ä¿¡æ¯<br><br>./myshell.sh ---&gt;æ‰§è¡Œmyshellè„šæœ¬å‘½ä»¤<br>100 200 éƒ½æ˜¯è¯¥å‘½ä»¤è¡Œçš„å‚æ•°<br>ä½¿ç”¨ä½ç½®å‚æ•°å˜é‡å¯ä»¥åœ¨myshellè„šæœ¬ä¸­è·å¾—å‚æ•°<br><br><br>2.åŸºæœ¬è¯­æ³•<br><span class="hljs-meta prompt_">$</span><span class="language-bash">n ï¼ˆåŠŸèƒ½æè¿°ï¼šn ä¸ºæ•°å­—ï¼Œ<span class="hljs-variable">$0</span> ä»£è¡¨å‘½ä»¤æœ¬èº«(å¦‚./myshell.sh)ï¼Œ<span class="hljs-variable">$1</span>-<span class="hljs-variable">$9</span> ä»£è¡¨ç¬¬ä¸€åˆ°ç¬¬ä¹ä¸ªå‚æ•°(å¦‚ï¼š<span class="hljs-variable">$1</span> å°±æ˜¯100 <span class="hljs-variable">$2</span> å°±æ˜¯200)ï¼Œåä»¥ä¸Šçš„å‚æ•°éœ€è¦ç”¨å¤§æ‹¬å·åŒ…å«ï¼Œå¦‚<span class="hljs-variable">${10}</span>ï¼‰</span><br><span class="hljs-meta prompt_">$</span><span class="language-bash">* ï¼ˆåŠŸèƒ½æè¿°ï¼šè¿™ä¸ªå˜é‡ä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰çš„å‚æ•°ï¼Œ$*æŠŠæ‰€æœ‰çš„å‚æ•°çœ‹æˆä¸€ä¸ªæ•´ä½“ï¼‰</span><br><span class="hljs-meta prompt_">$</span><span class="language-bash">@ ï¼ˆåŠŸèƒ½æè¿°ï¼šè¿™ä¸ªå˜é‡ä¹Ÿä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰çš„å‚æ•°ï¼Œä¸è¿‡<span class="hljs-variable">$@</span>æŠŠæ¯ä¸ªå‚æ•°åŒºåˆ†å¯¹å¾…ï¼‰</span><br><span class="hljs-meta prompt_">$</span><span class="language-bash"><span class="hljs-comment"># ï¼ˆåŠŸèƒ½æè¿°ï¼šè¿™ä¸ªå˜é‡ä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰å‚æ•°çš„ä¸ªæ•°ï¼‰</span></span><br><br>æ¡ˆä¾‹ï¼šç¼–å†™ä¸€ä¸ª shell è„šæœ¬ myshell.sh ï¼Œåœ¨è„šæœ¬ä¸­è·å–åˆ°å‘½ä»¤è¡Œçš„å„ä¸ªå‚æ•°ä¿¡æ¯ã€‚<br>vim myshell.sh<br>å†™å…¥:<br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br>echo "å‘½ä»¤æœ¬èº«=$0 ç¬¬ä¸€ä¸ªå‚æ•°=$1 ç¬¬äºŒä¸ªå‚æ•°=$2"<br>echo "æ‰€æœ‰çš„å‚æ•°=$*"<br>echo "$@"<br>echo "å‚æ•°ä¸ªæ•°=$#"<br>ä¿å­˜é€€å‡º<br>sh myshell.sh 100 200<br></code></pre></td></tr></tbody></table></figure><h4 id="é¢„å®šä¹‰å˜é‡"><a href="#é¢„å®šä¹‰å˜é‡" class="headerlink" title="é¢„å®šä¹‰å˜é‡"></a>é¢„å®šä¹‰å˜é‡</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.åŸºæœ¬ä»‹ç»ï¼š<br>é¢„å®šä¹‰å˜é‡æ˜¯ shell è®¾è®¡è€…äº‹å…ˆå·²ç»å®šä¹‰å¥½çš„å˜é‡ï¼Œå¯ä»¥ç›´æ¥åœ¨ shell è„šæœ¬ä¸­ä½¿ç”¨<br><br><br>2.åŸºæœ¬è¯­æ³•ï¼š<br>(1)$$ ï¼ˆåŠŸèƒ½æè¿°ï¼šå½“å‰è¿›ç¨‹çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰ï¼‰<br>(2)$! ï¼ˆåŠŸèƒ½æè¿°ï¼šåå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰ï¼‰<br>(3)$ï¼Ÿï¼ˆåŠŸèƒ½æè¿°ï¼šæœ€åä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤çš„è¿”å›çŠ¶æ€ã€‚å¦‚æœè¿™ä¸ªå˜é‡çš„å€¼ä¸º 0ï¼Œè¯æ˜ä¸Šä¸€ä¸ªå‘½ä»¤æ­£ç¡®æ‰§è¡Œï¼›å¦‚æœè¿™ä¸ªå˜é‡çš„å€¼ä¸ºé 0ï¼ˆå…·ä½“æ˜¯å“ªä¸ªæ•°ï¼Œç”±å‘½ä»¤è‡ªå·±æ¥å†³å®šï¼‰ï¼Œåˆ™è¯æ˜ä¸Šä¸€ä¸ªå‘½ä»¤æ‰§è¡Œä¸æ­£ç¡®äº†ã€‚ï¼‰<br><br>3.åº”ç”¨å®ä¾‹ï¼š<br>åœ¨ä¸€ä¸ª shell è„šæœ¬ä¸­ç®€å•ä½¿ç”¨ä¸€ä¸‹é¢„å®šä¹‰å˜é‡<br><br>vim preVar.sh<br>å†™å…¥ï¼š<br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br>echo "å½“å‰æ‰§è¡Œçš„è¿›ç¨‹ id=$$"<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä»¥åå°çš„æ–¹å¼è¿è¡Œä¸€ä¸ªè„šæœ¬(åœ¨è„šæœ¬ååŠ ä¸€ä¸ª$)ï¼Œå¹¶è·å–ä»–çš„è¿›ç¨‹å·</span><br>/root/shcode/myshell.sh &amp;<br><br>echo "æœ€åä¸€ä¸ªåå°æ–¹å¼è¿è¡Œçš„è¿›ç¨‹ id=$!" <br><br>echo "æ‰§è¡Œçš„ç»“æœæ˜¯=$?"<br>ä¿å­˜å¹¶é€€å‡º<br>sh preVar.sh<br><br></code></pre></td></tr></tbody></table></figure><p>è¿ç®—ç¬¦ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.åŸºæœ¬ä»‹ç»ï¼š<br>å­¦ä¹ å¦‚ä½•åœ¨ shell ä¸­è¿›è¡Œå„ç§è¿ç®—æ“ä½œã€‚<br><br><br>2.åŸºæœ¬è¯­æ³•ï¼š<br>(1)ä¸‰ç§å†™æ³•ï¼š<br><span class="hljs-meta prompt_">$</span><span class="language-bash">((è¿ç®—å¼))</span><br><span class="hljs-meta prompt_">$</span><span class="language-bash">[è¿ç®—å¼]</span><br>expr m + n (expression è¡¨è¾¾å¼)<br> <br>(2)æ³¨æ„ expr è¿ç®—ç¬¦é—´è¦æœ‰ç©ºæ ¼<br>å¦‚æœå¸Œæœ›å°† expr çš„ç»“æœèµ‹ç»™æŸä¸ªå˜é‡ï¼Œä½¿ç”¨ `` æˆ–è€… $( )<br><br>(3)expr m - n<br><br>(4)expr \*, /, %ä¹˜ï¼Œé™¤ï¼Œå–ä½™<br><br><br>3.åº”ç”¨å®ä¾‹ oper.sh<br>æ¡ˆä¾‹ 1ï¼šè®¡ç®—ï¼ˆ2+3ï¼‰X4 çš„å€¼<br>æ¡ˆä¾‹ 2ï¼šè¯·æ±‚å‡ºå‘½ä»¤è¡Œçš„ä¸¤ä¸ªå‚æ•°[æ•´æ•°]çš„å’Œ 20 50<br><br>vim oper.sh<br>å†™å…¥:<br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 1ï¼šè®¡ç®—ï¼ˆ2+3ï¼‰X4 çš„å€¼</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼</span><br>RES1=$(((2+3)*4))        ---&gt;ç”¨ä¸€ä¸ªå˜é‡RES1æ¥æ”¶<br>echo "res1=$RES1"<br>ä¿å­˜å¹¶é€€å‡º<br>sh oper.sh<br><br>vim oper.sh<br>å†™å…¥:<br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼, æ¨èä½¿ç”¨</span><br>RES2=$[(2+3)*4]<br>echo "res2=$RES2"<br>ä¿å­˜å¹¶é€€å‡º<br>sh oper.sh<br><br>vim oper.sh<br>å†™å…¥:<br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä½¿ç”¨ç¬¬ä¸‰ç§æ–¹å¼ <span class="hljs-built_in">expr</span></span> <br>TEMP=`expr 2 + 3`       <br>RES4=`expr $TEMP \* 4` <br>echo "temp=$TEMP"<br>echo "res4=$RES4"<br>ä¿å­˜å¹¶é€€å‡º<br>sh oper.sh<br><br>vim oper.sh<br>å†™å…¥:<br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 2ï¼šè¯·æ±‚å‡ºå‘½ä»¤è¡Œçš„ä¸¤ä¸ªå‚æ•°[æ•´æ•°]çš„å’Œ 20 50</span> <br>SUM=$[$1+$2]<br>echo "sum=$SUM"<br>ä¿å­˜å¹¶é€€å‡º<br>sh oper.sh 20 50<br><br></code></pre></td></tr></tbody></table></figure><h4 id="æ¡ä»¶åˆ¤æ–­"><a href="#æ¡ä»¶åˆ¤æ–­" class="headerlink" title="æ¡ä»¶åˆ¤æ–­"></a>æ¡ä»¶åˆ¤æ–­</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.åŸºæœ¬è¯­æ³•ï¼š<br>[ condition ] ï¼ˆæ³¨æ„ condition å‰åè¦æœ‰ç©ºæ ¼ï¼‰<br><span class="hljs-meta prompt_">#</span><span class="language-bash">éç©ºè¿”å› <span class="hljs-literal">true</span>ï¼Œå¯ä½¿ç”¨$?éªŒè¯ï¼ˆ0 ä¸º <span class="hljs-literal">true</span>ï¼Œ&gt;1 ä¸º <span class="hljs-literal">false</span>ï¼‰</span><br><br><br>2.åº”ç”¨å®ä¾‹ï¼š<br>[ hspEdu ]è¿”å› true <br>[ ]è¿”å› false<br>[ condition ] &amp;&amp; echo OK || echo notokæ¡ä»¶æ»¡è¶³ï¼Œæ‰§è¡Œåé¢çš„è¯­å¥<br><br><br>3.åˆ¤æ–­è¯­å¥ï¼š<br>å¸¸ç”¨åˆ¤æ–­æ¡ä»¶ï¼š<br>(1) = å­—ç¬¦ä¸²æ¯”è¾ƒ<br>(2)ä¸¤ä¸ªæ•´æ•°çš„æ¯”è¾ƒ<br>-lt å°äº     less than<br>-le å°äºç­‰äº  less equal<br>-eq ç­‰äº      equal<br>-gt å¤§äº      greater<br>-ge å¤§äºç­‰äº   greater equal<br>-ne ä¸ç­‰äº     not equal<br>(3)æŒ‰ç…§æ–‡ä»¶æƒé™è¿›è¡Œåˆ¤æ–­<br>-r æœ‰è¯»çš„æƒé™<br>-w æœ‰å†™çš„æƒé™<br>-x æœ‰æ‰§è¡Œçš„æƒé™<br>(4)æŒ‰ç…§æ–‡ä»¶ç±»å‹è¿›è¡Œåˆ¤æ–­<br>-f æ–‡ä»¶å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå¸¸è§„çš„æ–‡ä»¶<br>-e æ–‡ä»¶å­˜åœ¨<br>-d æ–‡ä»¶å­˜åœ¨å¹¶æ˜¯ä¸€ä¸ªç›®å½•<br><br><br>4.åº”ç”¨å®ä¾‹ï¼š<br>æ¡ˆä¾‹ 1ï¼š"ok"æ˜¯å¦ç­‰äº"ok"<br>åˆ¤æ–­è¯­å¥ï¼šä½¿ç”¨ =<br>æ¡ˆä¾‹ 2ï¼š23 æ˜¯å¦å¤§äºç­‰äº 22<br>åˆ¤æ–­è¯­å¥ï¼šä½¿ç”¨ -ge<br>æ¡ˆä¾‹ 3ï¼š/root/shcode/aaa.txt ç›®å½•ä¸­çš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨<br>åˆ¤æ–­è¯­å¥ï¼š ä½¿ç”¨ -f<br><br>ä»£ç å¦‚ä¸‹:<br>vim ifdemo.sh<br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 1ï¼š<span class="hljs-string">"ok"</span>æ˜¯å¦ç­‰äº<span class="hljs-string">"ok"</span></span><br>if [ "ok" = "ok"  ]<br>then<br>        echo "equal"<br>fi                    -----&gt; ifè¯­å¥ ä»¥ifå¼€å¤´ ä»¥fiç»“å°¾<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 2ï¼š23 æ˜¯å¦å¤§äºç­‰äº 22</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">åˆ¤æ–­è¯­å¥ï¼šä½¿ç”¨ -ge</span><br>if [ 23 -ge 22 ]<br>then<br>        echo "å¤§äº"<br>fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 3ï¼š/root/shcode/aaa.txt ç›®å½•ä¸­çš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">åˆ¤æ–­è¯­å¥ï¼š ä½¿ç”¨ -f</span><br>if [ -f  /root/shcode/aaa.txt ]<br>then<br>        echo "æ–‡ä»¶å­˜åœ¨"<br>fi<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">çœ‹å‡ ä¸ªæ¡ˆä¾‹</span><br>if [ ]<br>then<br>        echo "å­˜åœ¨"<br>fi<br><br>if [ hspEdu01 ]<br>then<br>        echo "hello hspEdu01"<br>fi<br>sh ifdemo.sh<br><br>è¾“å‡ºç»“æœï¼š<br>equal<br>å¤§äº<br>hello hspEdu01<br></code></pre></td></tr></tbody></table></figure><h4 id="if-è¯­å¥"><a href="#if-è¯­å¥" class="headerlink" title="if è¯­å¥"></a>if è¯­å¥</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.åŸºæœ¬è¯­æ³•ï¼š<br>if [ æ¡ä»¶åˆ¤æ–­å¼ ] <br>then<br>ä»£ç <br>fi<br><br>æˆ–è€… å¤šåˆ†æ”¯<br><br>if [ æ¡ä»¶åˆ¤æ–­å¼ ] <br>then<br>ä»£ç <br>elif [æ¡ä»¶åˆ¤æ–­å¼] <br>then<br>ä»£ç <br>fi<br><br>2.æ³¨æ„äº‹é¡¹ï¼š[ æ¡ä»¶åˆ¤æ–­å¼ ]ï¼Œä¸­æ‹¬å·å’Œæ¡ä»¶åˆ¤æ–­å¼ä¹‹é—´å¿…é¡»æœ‰ç©ºæ ¼<br><br>3.åº”ç”¨å®ä¾‹ ifCase.sh<br>æ¡ˆä¾‹ï¼šè¯·ç¼–å†™ä¸€ä¸ª shell ç¨‹åºï¼Œå¦‚æœè¾“å…¥çš„å‚æ•°ï¼Œå¤§äºç­‰äº 60ï¼Œåˆ™è¾“å‡º "åŠæ ¼äº†"ï¼Œå¦‚æœå°äº 60,åˆ™è¾“å‡º "ä¸åŠæ ¼"<br>if [ $1 -ge 60 ]<br>then<br>        echo "åŠæ ¼äº†"<br>else<br>        echo "ä¸åŠæ ¼"<br>fi<br><br>æˆ–è€…<br><br>if [ $1 -ge 60 ]<br>then<br>        echo "åŠæ ¼äº†"<br>elif[ $1 -lt 60]<br>then<br>        echo "ä¸åŠæ ¼"<br>fi<br><br></code></pre></td></tr></tbody></table></figure><h4 id="case-è¯­å¥"><a href="#case-è¯­å¥" class="headerlink" title="case è¯­å¥"></a>case è¯­å¥</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.åŸºæœ¬è¯­æ³•ï¼š<br><br>case $å˜é‡å in<br>"å€¼ 1")<br>å¦‚æœå˜é‡çš„å€¼ç­‰äºå€¼ 1ï¼Œåˆ™æ‰§è¡Œç¨‹åº 1<br>;;<br>"å€¼ 2")<br>å¦‚æœå˜é‡çš„å€¼ç­‰äºå€¼ 2ï¼Œåˆ™æ‰§è¡Œç¨‹åº 2<br>;;<br>â€¦çœç•¥å…¶ä»–åˆ†æ”¯â€¦<br><br>*)<br>å¦‚æœå˜é‡çš„å€¼éƒ½ä¸æ˜¯ä»¥ä¸Šçš„å€¼ï¼Œåˆ™æ‰§è¡Œæ­¤ç¨‹åº<br>;;<br>esac<br><br>åº”ç”¨å®ä¾‹ testCase.sh<br>æ¡ˆä¾‹1ï¼šå½“å‘½ä»¤è¡Œå‚æ•°æ˜¯1æ—¶ï¼Œè¾“å‡º "å‘¨ä¸€", æ˜¯2æ—¶ï¼Œå°±è¾“å‡º"å‘¨äºŒ"ï¼Œå…¶å®ƒæƒ…å†µè¾“å‡º"other"<br>vim testCase.sh<br>å†™å…¥ï¼š<br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹1ï¼šå½“å‘½ä»¤è¡Œå‚æ•°æ˜¯1æ—¶ï¼Œè¾“å‡º <span class="hljs-string">"å‘¨ä¸€"</span>, æ˜¯2æ—¶ï¼Œå°±è¾“å‡º<span class="hljs-string">"å‘¨äºŒ"</span>ï¼Œå…¶å®ƒæƒ…å†µè¾“å‡º<span class="hljs-string">"other"</span></span><br>case $1 in<br>"1")<br>echo "å‘¨ä¸€"<br>;;<br>"2")<br>echo "å‘¨äºŒ"<br>;;<br>*)<br>echo "other..."<br>;;<br>esac<br>ä¿å­˜å¹¶é€€å‡º<br><br>sh testCase.sh 1<br>å‘¨ä¸€<br><br></code></pre></td></tr></tbody></table></figure><h4 id="for-å¾ªç¯"><a href="#for-å¾ªç¯" class="headerlink" title="for å¾ªç¯"></a>for å¾ªç¯</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs shell">åŸºæœ¬è¯­æ³•ï¼š<br><br>ç¬¬ä¸€ç§æ–¹å¼ï¼š<br><br>for å˜é‡ in  å€¼ 1  å€¼ 2  å€¼ 3â€¦ <br>do<br>ç¨‹åº/ä»£ç <br>done<br><br>åº”ç”¨å®ä¾‹ testFor1.sh<br>æ¡ˆä¾‹ï¼šæ‰“å°å‘½ä»¤è¡Œè¾“å…¥çš„å‚æ•° [è¿™é‡Œå¯ä»¥çœ‹å‡º$*  å’Œ $@ çš„åŒºåˆ«]<br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ï¼šæ‰“å°å‘½ä»¤è¡Œè¾“å…¥çš„å‚æ•° [è¿™é‡Œå¯ä»¥çœ‹å‡º$*  å’Œ <span class="hljs-variable">$@</span> çš„åŒºåˆ«]</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ³¨æ„ï¼š$* æ˜¯æŠŠè¾“å…¥çš„å‚æ•°å½“ä½œä¸€ä¸ªæ•´ä½“ï¼Œæ‰€ä»¥åªä¼šè¾“å‡ºä¸€å¥è¯</span><br>for i in "$*"<br>do<br>        echo "num is $*"<br>done<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä½¿ç”¨ <span class="hljs-variable">$@</span> æ¥è·å–è¾“å…¥çš„å‚æ•°ï¼Œæ³¨æ„ï¼šä¹Ÿæ˜¯æŠŠè¾“å…¥çš„å‚æ•°çœ‹ä½œä¸€ä¸ªæ•´ä½“ï¼Œä½†è¿™æ˜¯åˆ†åˆ«å¯¹å¾…ï¼›æ‰€ä»¥æœ‰å‡ ä¸ªå‚æ•°å°±è¾“å‡ºå‡ å¥</span><br>echo "======================================"<br>for j in "$@"<br>do<br>        echo "num is $@"<br>done<br><br>sh testFor1.sh 100 200 300<br>num is 100 200 300<br>======================================<br>num is 100 200 300<br>num is 100 200 300<br>num is 100 200 300<br><br><br><br><br><br>ç¬¬äºŒç§æ–¹å¼ï¼š<br><br>for (( åˆå§‹å€¼;å¾ªç¯æ§åˆ¶æ¡ä»¶;å˜é‡å˜åŒ– ))<br>do<br>ç¨‹åº/ä»£ç <br>done<br><br>åº”ç”¨å®ä¾‹ testFor2.sh<br>æ¡ˆä¾‹ï¼šä» 1 åŠ åˆ° 100 çš„å€¼è¾“å‡ºæ˜¾ç¤º<br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ï¼šä» 1 åŠ åˆ° 100 çš„å€¼è¾“å‡ºæ˜¾ç¤º</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">å®šä¹‰ä¸€ä¸ªå˜é‡SUM</span><br>SUM=0<br>for(( i=1; i&lt;=100; i++  ))<br>do<br>        SUM=$[$SUM+$i]<br>done<br>echo "æ€»å’ŒSUM=$SUM"<br><br>sh testFor2.sh <br>æ€»å’ŒSUM=5050<br><br>å¦‚æœ1åŠ åˆ°x xç”±è‡ªå·±è¾“å…¥<br>SUM=0<br>for(( i=1; i&lt;=$1; i++  ))<br>do<br>        SUM=$[$SUM+$i]<br>done<br>echo "æ€»å’ŒSUM=$SUM"<br><br>sh textFor2.sh 1000<br>æ€»å’ŒSUM=500500<br><br></code></pre></td></tr></tbody></table></figure><h4 id="while-å¾ªç¯"><a href="#while-å¾ªç¯" class="headerlink" title="while å¾ªç¯"></a>while å¾ªç¯</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs shell">åŸºæœ¬è¯­æ³•ï¼š<br>while [ æ¡ä»¶åˆ¤æ–­å¼ ]<br>do<br>ç¨‹åº/ä»£ç <br>done<br><br>æ³¨æ„ï¼šwhile å’Œ [æœ‰ç©ºæ ¼ï¼Œæ¡ä»¶åˆ¤æ–­å¼å’Œ[  ]ä¹Ÿæœ‰ç©ºæ ¼<br><br>åº”ç”¨å®ä¾‹ï¼štestWhile.sh<br>æ¡ˆä¾‹ï¼šä»å‘½ä»¤è¡Œè¾“å…¥ä¸€ä¸ªæ•° nï¼Œç»Ÿè®¡ä» 1+..+ n  çš„å€¼æ˜¯å¤šå°‘ï¼Ÿ<br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br>SUM=0<br>i=0<br>while [ $i -le $1 ] <br>do<br>SUM=$[$SUM+$i]<br><span class="hljs-meta prompt_">#</span><span class="language-bash">i è‡ªå¢</span><br>i=$[$i+1]<br>done<br>echo "æ‰§è¡Œç»“æœ=$SUM"<br><br>sh testWhile.sh 100<br>æ‰§è¡Œç»“æœ=5050<br><br></code></pre></td></tr></tbody></table></figure><h4 id="read-è¯»å–æ§åˆ¶å°è¾“å…¥"><a href="#read-è¯»å–æ§åˆ¶å°è¾“å…¥" class="headerlink" title="read è¯»å–æ§åˆ¶å°è¾“å…¥"></a>read è¯»å–æ§åˆ¶å°è¾“å…¥</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.åŸºæœ¬è¯­æ³•ï¼š<br>read(é€‰é¡¹)(å‚æ•°)<br>é€‰é¡¹ï¼š<br>-pï¼šæŒ‡å®šè¯»å–å€¼æ—¶çš„æç¤ºç¬¦ï¼›<br>-tï¼šæŒ‡å®šè¯»å–å€¼æ—¶ç­‰å¾…çš„æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œå¦‚æœæ²¡æœ‰åœ¨æŒ‡å®šçš„æ—¶é—´å†…è¾“å…¥ï¼Œå°±ä¸å†ç­‰å¾…äº†<br>å‚æ•°ï¼š<br>å˜é‡ï¼šæŒ‡å®šè¯»å–å€¼çš„å˜é‡å<br><br>2.åº”ç”¨å®ä¾‹ testRead.sh<br>æ¡ˆä¾‹ 1ï¼šè¯»å–æ§åˆ¶å°è¾“å…¥ä¸€ä¸ª NUM1 å€¼<br>æ¡ˆä¾‹ 2ï¼šè¯»å–æ§åˆ¶å°è¾“å…¥ä¸€ä¸ª NUM2 å€¼ï¼Œåœ¨ 10 ç§’å†…è¾“å…¥ã€‚ä»£ç :<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 1ï¼šè¯»å–æ§åˆ¶å°è¾“å…¥ä¸€ä¸ª NUM1 å€¼</span><br>read -p "è¯·è¾“å…¥ä¸€ä¸ªæ•° NUM1=" NUM1 <br>echo "ä½ è¾“å…¥çš„ NUM1=$NUM1"<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">æ¡ˆä¾‹ 2ï¼šè¯»å–æ§åˆ¶å°è¾“å…¥ä¸€ä¸ª NUM2 å€¼ï¼Œåœ¨ 10 ç§’å†…è¾“å…¥ã€‚</span><br>read -t 10 -p "è¯·è¾“å…¥ä¸€ä¸ªæ•° NUM2=" NUM2 <br>echo "ä½ è¾“å…¥çš„ NUM2=$NUM2"<br><br>sh testRead.sh<br>è¯·è¾“å…¥ä¸€ä¸ªæ•° NUM1=100<br>ä½ è¾“å…¥çš„ NUM1=100<br><br></code></pre></td></tr></tbody></table></figure><h4 id="å‡½æ•°ä»‹ç»"><a href="#å‡½æ•°ä»‹ç»" class="headerlink" title="å‡½æ•°ä»‹ç»"></a>å‡½æ•°ä»‹ç»</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">shell ç¼–ç¨‹å’Œå…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼Œæœ‰ç³»ç»Ÿå‡½æ•°ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰å‡½æ•°ã€‚ç³»ç»Ÿå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä»‹ç»ä¸¤ä¸ªã€‚<br></code></pre></td></tr></tbody></table></figure><h4 id="ç³»ç»Ÿå‡½æ•°"><a href="#ç³»ç»Ÿå‡½æ•°" class="headerlink" title="ç³»ç»Ÿå‡½æ•°"></a>ç³»ç»Ÿå‡½æ•°</h4><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs sh">1.<span class="hljs-built_in">basename</span> åŸºæœ¬è¯­æ³•<br>åŠŸèƒ½ï¼šè¿”å›å®Œæ•´è·¯å¾„æœ€å / çš„éƒ¨åˆ†ï¼Œå¸¸ç”¨äºè·å–æ–‡ä»¶å<br><span class="hljs-built_in">basename</span> [pathname] [suffix]<br><span class="hljs-built_in">basename</span> [string] [suffix]<br><br>åŠŸèƒ½æè¿°ï¼š<span class="hljs-built_in">basename</span> å‘½ä»¤ä¼šåˆ æ‰æ‰€æœ‰çš„å‰ç¼€åŒ…æ‹¬æœ€åä¸€ä¸ªï¼ˆâ€˜/â€™ï¼‰å­—ç¬¦ï¼Œç„¶åå°†å­—ç¬¦ä¸²æ˜¾ç¤ºå‡ºæ¥ã€‚<br>é€‰é¡¹ï¼šsuffix ä¸ºåç¼€ï¼Œå¦‚æœ suffix è¢«æŒ‡å®šäº†ï¼Œ<span class="hljs-built_in">basename</span> ä¼šå°† pathname æˆ– string ä¸­çš„ suffix å»æ‰ã€‚<br><br>æ¡ˆä¾‹ 1ï¼šè¯·è¿”å› /home/aaa/test.txt çš„ <span class="hljs-string">"test.txt"</span> éƒ¨åˆ†<br><span class="hljs-built_in">basename</span> /home/aaa/test.txt<br>è¿”å›test.txt<br><br>å¦‚æœè¾“å…¥ï¼š<span class="hljs-built_in">basename</span> /home/aaa/test.txt .txt<br>è¿”å›<span class="hljs-built_in">test</span><br>2.<span class="hljs-built_in">dirname</span> åŸºæœ¬è¯­æ³•<br>åŠŸèƒ½ï¼šè¿”å›å®Œæ•´è·¯å¾„æœ€å / çš„å‰é¢çš„éƒ¨åˆ†ï¼Œå¸¸ç”¨äºè¿”å›è·¯å¾„éƒ¨åˆ†<br><span class="hljs-built_in">dirname</span> æ–‡ä»¶ç»å¯¹è·¯å¾„ <br><br>åŠŸèƒ½æè¿°ï¼šä»ç»™å®šçš„åŒ…å«ç»å¯¹è·¯å¾„çš„æ–‡ä»¶åä¸­å»é™¤æ–‡ä»¶åï¼ˆéç›®å½•çš„éƒ¨åˆ†ï¼‰ï¼Œç„¶åè¿”å›å‰©ä¸‹çš„è·¯å¾„ï¼ˆç›®å½•çš„éƒ¨åˆ†ï¼‰<br><br>æ¡ˆä¾‹ 1ï¼šè¯·è¿”å› /home/aaa/test.txt çš„ /home/aaa <br><span class="hljs-built_in">dirname</span> /home/aaa/test.txt<br>è¿”å›/home/aaa<br></code></pre></td></tr></tbody></table></figure><h4 id="è‡ªå®šä¹‰å‡½æ•°"><a href="#è‡ªå®šä¹‰å‡½æ•°" class="headerlink" title="è‡ªå®šä¹‰å‡½æ•°"></a>è‡ªå®šä¹‰å‡½æ•°</h4><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs sh">åŸºæœ¬è¯­æ³•ï¼š<br>[ <span class="hljs-keyword">function</span> ] funname[()]<br>{<br>Action; <br>[<span class="hljs-built_in">return</span> int;]<br>}<br><br>è°ƒç”¨ç›´æ¥å†™å‡½æ•°åï¼šfunname[å€¼]<br><br><br>æ¡ˆä¾‹ 1ï¼šè®¡ç®—è¾“å…¥ä¸¤ä¸ªå‚æ•°çš„å’Œ(åŠ¨æ€çš„è·å–) testFun.sh<br><span class="hljs-comment">#!/bin/bash</span><br><span class="hljs-comment">#æ¡ˆä¾‹ 1ï¼šè®¡ç®—è¾“å…¥ä¸¤ä¸ªå‚æ•°çš„å’Œ(åŠ¨æ€çš„è·å–)</span><br><br><span class="hljs-comment">#å®šä¹‰å‡½æ•° getSum </span><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">getSum</span></span>() {<br>SUM=$[<span class="hljs-variable">$n1</span>+<span class="hljs-variable">$n2</span>] <br><span class="hljs-built_in">echo</span> <span class="hljs-string">"å’Œæ˜¯=<span class="hljs-variable">$SUM</span>"</span><br>}<br><br><span class="hljs-comment">#è¾“å…¥ä¸¤ä¸ªå€¼</span><br><span class="hljs-built_in">read</span> -p <span class="hljs-string">"è¯·è¾“å…¥ä¸€ä¸ªæ•° n1="</span> n1 <br><span class="hljs-built_in">read</span> -p <span class="hljs-string">"è¯·è¾“å…¥ä¸€ä¸ªæ•° n2="</span> n2<br><br><span class="hljs-comment">#è°ƒç”¨è‡ªå®šä¹‰å‡½æ•°</span><br>getSum <span class="hljs-variable">$n1</span> <span class="hljs-variable">$n2</span><br><br><br>sh testFun.sh <br>è¯·è¾“å…¥ä¸€ä¸ªæ•° n1=10<br>è¯·è¾“å…¥ä¸€ä¸ªæ•° n2=90<br>å’Œæ˜¯=100<br><br></code></pre></td></tr></tbody></table></figure><h2 id="ç¬¬äºŒåä¸€ç« ï¼šLinux-é«˜çº§ç¯‡-æ—¥å¿—ç®¡ç†"><a href="#ç¬¬äºŒåä¸€ç« ï¼šLinux-é«˜çº§ç¯‡-æ—¥å¿—ç®¡ç†" class="headerlink" title="ç¬¬äºŒåä¸€ç« ï¼šLinux é«˜çº§ç¯‡-æ—¥å¿—ç®¡ç†"></a>ç¬¬äºŒåä¸€ç« ï¼šLinux é«˜çº§ç¯‡-æ—¥å¿—ç®¡ç†</h2><h4 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">(1)æ—¥å¿—æ–‡ä»¶æ˜¯é‡è¦çš„ç³»ç»Ÿä¿¡æ¯æ–‡ä»¶ï¼Œå…¶ä¸­è®°å½•äº†è®¸å¤šé‡è¦çš„ç³»ç»Ÿäº‹ä»¶ï¼ŒåŒ…æ‹¬ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ã€ç³»ç»Ÿçš„å¯åŠ¨ä¿¡æ¯ã€ç³»ç»Ÿçš„å®‰å…¨ä¿¡æ¯ã€é‚®ä»¶ç›¸å…³ä¿¡æ¯ã€å„ç§æœåŠ¡ç›¸å…³ä¿¡æ¯ç­‰ã€‚<br>(2)æ—¥å¿—å¯¹äºå®‰å…¨æ¥è¯´ä¹Ÿå¾ˆé‡è¦ï¼Œå®ƒè®°å½•äº†ç³»ç»Ÿæ¯å¤©å‘ç”Ÿçš„å„ç§äº‹æƒ…ï¼Œé€šè¿‡æ—¥å¿—æ¥æ£€æŸ¥é”™è¯¯å‘ç”Ÿçš„åŸå› ï¼Œæˆ–è€…å—åˆ°æ”»å‡»æ—¶æ”»å‡»è€…ç•™ä¸‹çš„ç—•è¿¹ã€‚<br>(3)å¯ä»¥è¿™æ ·ç†è§£ æ—¥å¿—æ˜¯ç”¨æ¥è®°å½•é‡å¤§äº‹ä»¶çš„å·¥å…·<br></code></pre></td></tr></tbody></table></figure><h4 id="ç³»ç»Ÿå¸¸ç”¨çš„æ—¥å¿—"><a href="#ç³»ç»Ÿå¸¸ç”¨çš„æ—¥å¿—" class="headerlink" title="ç³»ç»Ÿå¸¸ç”¨çš„æ—¥å¿—"></a>ç³»ç»Ÿå¸¸ç”¨çš„æ—¥å¿—</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶çš„ä¿å­˜ä½ç½®ï¼š/var/log/ ç›®å½•ä¸‹<br>åº”ç”¨æ¡ˆä¾‹ï¼š<br>ä½¿ç”¨ root ç”¨æˆ·é€šè¿‡ xshell6 ç™»é™†ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨é”™è¯¯çš„å¯†ç ï¼Œç¬¬äºŒæ¬¡ä½¿ç”¨æ­£ç¡®çš„å¯†ç ç™»å½•æˆåŠŸçœ‹çœ‹åœ¨æ—¥å¿—æ–‡ä»¶/var/log/secure é‡Œæœ‰æ²¡æœ‰è®°å½•ç›¸å…³ä¿¡æ¯<br>ç³»ç»Ÿå¸¸ç”¨æ—¥å¿—ï¼š<br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019121939561.png" alt="image-20221019121939561"></p><p>æ—¥å¿—ç®¡ç†æœåŠ¡rsyslogd</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">CentOS7.6 æ—¥å¿—æœåŠ¡æ˜¯ rsyslogd   (rocket-fast system for log)<br>CentOS6.x æ—¥å¿—æœåŠ¡æ˜¯ syslogd <br>rsyslogd åŠŸèƒ½æ›´å¼ºå¤§<br>rsyslogd çš„ä½¿ç”¨ã€æ—¥å¿—æ–‡ä»¶çš„æ ¼å¼ï¼Œå’Œ syslogd æœåŠ¡æ˜¯å…¼å®¹çš„<br><br>rsyslogdæ˜¯ä¸€ä¸ªåå°ç¨‹åº(æœåŠ¡)ï¼Œæ¥ç®¡ç†/è®°å½•/æ“ä½œç›¸å…³æ—¥å¿—ã€‚<br>å°†æ—¥å¿—è®°å½•åˆ°å¯¹åº”çš„æ–‡ä»¶ä¸­ã€‚<br><br>/etc/rsyslog.confé…ç½®æ–‡ä»¶ä¸­è®°å½•äº†è¦ç®¡ç†å“ªäº›æ—¥å¿—å’Œå°†è¿™äº›æ—¥å¿—è®°å½•åˆ°å“ªä¸ªæ–‡ä»¶ä¸­ã€‚<br></code></pre></td></tr></tbody></table></figure><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/3481/image-20221019145550645.png" alt="image-20221019145550645"></p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs shell">1.åœ¨è¿›è¡Œæ—¥å¿—ç®¡ç†æ—¶ï¼Œè¦ä¿è¯rsyslogdæœåŠ¡æ˜¯å¯åŠ¨çš„ï¼<br><br>(1)æŸ¥è¯¢ Linux ä¸­çš„ rsyslogd æœåŠ¡æ˜¯å¦å¯åŠ¨<br>ps aux | grep "rsyslog" <br><br>ps aux | grep "rsyslog" | grep -v "grep"<br>| grep -v "grep" ---&gt; ç­›é€‰å‡ºps aux | grep "rsyslog" ç»“æœä¸­ä¸æ˜¯grepçš„<br><br>(2)æŸ¥è¯¢ rsyslogd æœåŠ¡çš„è‡ªå¯åŠ¨çŠ¶æ€(æ˜¯å¦æ˜¯è‡ªå¯åŠ¨çŠ¶æ€enable)<br>systemctl list-unit-files | grep rsyslog<br><br><br>2.é…ç½®æ–‡ä»¶ï¼š/etc/rsyslog.conf<br>è¯¥é…ç½®æ–‡ä»¶ä¸­è®°å½•äº†ï¼šæ—¥å¿—å’Œæ—¥å¿—å­˜æ”¾åœ¨å“ªä¸ªæ–‡ä»¶<br><br>å…³äºæ—¥å¿—ï¼š*.*<br>å…¶ä¸­ç¬¬ä¸€ä¸ª*ä»£è¡¨æ—¥å¿—ç±»å‹ï¼Œç¬¬äºŒä¸ª*ä»£è¡¨æ—¥å¿—çº§åˆ«<br><br>(1)æ—¥å¿—ç±»å‹åˆ†ä¸ºï¼š<br>auth##pam äº§ç”Ÿçš„æ—¥å¿—<br>authpriv##sshã€ftp ç­‰ç™»å½•ä¿¡æ¯çš„éªŒè¯ä¿¡æ¯<br>corn##æ—¶é—´ä»»åŠ¡ç›¸å…³<br>kern##å†…æ ¸<br>lpr##æ‰“å°<br>mail##é‚®ä»¶<br>mark(syslog)-rsyslog##æœåŠ¡å†…éƒ¨çš„ä¿¡æ¯ï¼Œæ—¶é—´æ ‡è¯†<br>news##æ–°é—»ç»„<br>user##ç”¨æˆ·ç¨‹åºäº§ç”Ÿçš„ç›¸å…³ä¿¡æ¯<br>uucp##unix to nuix copyä¸»æœºä¹‹é—´ç›¸å…³çš„é€šä¿¡<br>local 1-7##è‡ªå®šä¹‰çš„æ—¥å¿—è®¾å¤‡<br><br>(2)æ—¥å¿—çº§åˆ«åˆ†ä¸ºï¼š<br>debug##æœ‰è°ƒè¯•ä¿¡æ¯çš„ï¼Œæ—¥å¿—é€šä¿¡æœ€å¤š<br>info##ä¸€èˆ¬ä¿¡æ¯æ—¥å¿—ï¼Œæœ€å¸¸ç”¨<br>notice##æœ€å…·æœ‰é‡è¦æ€§çš„æ™®é€šæ¡ä»¶çš„ä¿¡æ¯<br>warning##è­¦å‘Šçº§åˆ«<br>err##é”™è¯¯çº§åˆ«ï¼Œé˜»æ­¢æŸä¸ªåŠŸèƒ½æˆ–è€…æ¨¡å—ä¸èƒ½æ­£å¸¸å·¥ä½œçš„ä¿¡æ¯<br>crit##ä¸¥é‡çº§åˆ«ï¼Œé˜»æ­¢æ•´ä¸ªç³»ç»Ÿæˆ–è€…æ•´ä¸ªè½¯ä»¶ä¸èƒ½æ­£å¸¸å·¥ä½œçš„ä¿¡æ¯<br>alert##éœ€è¦ç«‹åˆ»ä¿®æ”¹çš„ä¿¡æ¯<br>emerg##å†…æ ¸å´©æºƒç­‰é‡è¦ä¿¡æ¯<br>none##ä»€ä¹ˆéƒ½ä¸è®°å½•<br>æ³¨æ„ï¼šä»ä¸Šåˆ°ä¸‹ï¼Œçº§åˆ«ä»ä½åˆ°é«˜ï¼Œè®°å½•ä¿¡æ¯è¶Šæ¥è¶Šå°‘<br><br><br>3.ç”±æ—¥å¿—æœåŠ¡ rsyslogd è®°å½•çš„æ—¥å¿—æ–‡ä»¶ï¼Œ<br>æ—¥å¿—æ–‡ä»¶çš„å†…å®¹ï¼šæ¯ä¸€è¡Œéƒ½ä»£è¡¨ä¸€ä¸ªäº‹ä»¶ï¼Œæ¯ä¸€è¡Œæœ‰ä»¥ä¸‹å››ä¸ªå†…å®¹ï¼š<br>1)äº‹ä»¶äº§ç”Ÿçš„æ—¶é—´<br>2)äº§ç”Ÿäº‹ä»¶çš„æœåŠ¡å™¨çš„ä¸»æœºå<br>3)äº§ç”Ÿäº‹ä»¶çš„æœåŠ¡åæˆ–ç¨‹åºå<br>4)äº‹ä»¶çš„å…·ä½“ä¿¡æ¯<br><br><br>4.æ—¥å¿—å¦‚ä½•æŸ¥çœ‹å®ä¾‹<br>æŸ¥çœ‹ä¸€ä¸‹ /var/log/secure æ—¥å¿—ï¼Œè¿™ä¸ªæ—¥å¿—ä¸­è®°å½•çš„æ˜¯ç”¨æˆ·éªŒè¯å’Œæˆæƒæ–¹é¢çš„ä¿¡æ¯ æ¥åˆ†æå¦‚ä½•æŸ¥çœ‹<br><br>5.æ—¥å¿—ç®¡ç†æœåŠ¡åº”ç”¨å®ä¾‹ï¼ˆå¢åŠ è‡ªå®šä¹‰çš„æ—¥å¿—ï¼‰<br>åœ¨/etc/rsyslog.conf ä¸­æ·»åŠ ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶/var/log/hsp.log,å½“æœ‰äº‹ä»¶å‘é€æ—¶(æ¯”å¦‚ sshd æœåŠ¡ç›¸å…³äº‹ä»¶)ï¼Œè¯¥æ–‡ä»¶ä¼šæ¥æ”¶åˆ°ä¿¡æ¯å¹¶ä¿å­˜. <br>ç»™å°ä¼™ä¼´æ¼”ç¤º é‡å¯ï¼Œç™»å½• çš„æƒ…å†µï¼Œçœ‹çœ‹æ˜¯å¦æœ‰æ—¥å¿—ä¿å­˜<br><br>vim /etc/rsyslog.conf <br>å†™å…¥ï¼š<br>*.*  /var/log/hsp.log<br>ä¿å­˜é€€å‡º<br><span class="hljs-meta prompt_">&gt; </span><span class="language-bash">/var/log/hsp.log  (åˆ›å»ºæ—¥å¿—æ–‡ä»¶)</span><br>ç„¶åé‡å¯ï¼Œé‡å¯äº‹ä»¶ä¼šè¢«è®°å½•åˆ°/var/log/hsp.logä¸­<br>cat hsp.log | grep sshd å°±å¯ä»¥æŸ¥åˆ°ä¿¡æ¯(sshdè¿œç¨‹è¿æ¥)<br><br></code></pre></td></tr></tbody></table></figure><h4 id="æ—¥å¿—è½®æ›¿"><a href="#æ—¥å¿—è½®æ›¿" class="headerlink" title="æ—¥å¿—è½®æ›¿"></a>æ—¥å¿—è½®æ›¿</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell">æ—¥å¿—è½®æ›¿(logrotate)å°±æ˜¯æŠŠæ—§çš„æ—¥å¿—æ–‡ä»¶ç§»åŠ¨å¹¶æ”¹åï¼ŒåŒæ—¶å»ºç«‹æ–°çš„ç©ºæ—¥å¿—æ–‡ä»¶ï¼Œå½“æ—§æ—¥å¿—æ–‡ä»¶è¶…å‡ºä¿å­˜çš„èŒƒå›´ä¹‹åï¼Œå°±ä¼šè¿›è¡Œåˆ é™¤<br>æ¸…é™¤æ—¥å¿—ä¸­æ—§çš„ä¿¡æ¯<br>(1)centos7 ä½¿ç”¨ logrotate è¿›è¡Œæ—¥å¿—è½®æ›¿ç®¡ç†<br>è¦æƒ³æ”¹å˜æ—¥å¿—è½®æ›¿æ–‡ä»¶åå­—ï¼Œé€šè¿‡ /etc/logrotate.conf é…ç½®æ–‡ä»¶ä¸­â€œdateextâ€ å‚æ•°<br><br>(2)å¦‚æœé…ç½®æ–‡ä»¶ä¸­æœ‰â€œdateextâ€å‚æ•°ï¼Œé‚£ä¹ˆæ—¥å¿—ä¼šç”¨æ—¥æœŸæ¥ä½œä¸ºæ—¥å¿—æ–‡ä»¶çš„åç¼€ï¼Œä¾‹å¦‚ â€œsecure-20201010â€ã€‚<br>è¿™æ ·æ—¥å¿—æ–‡ä»¶åä¸ä¼šé‡å ï¼Œä¹Ÿå°±ä¸éœ€è¦æ—¥å¿—æ–‡ä»¶çš„æ”¹åï¼Œåªéœ€è¦æŒ‡å®šä¿å­˜æ—¥å¿—ä¸ªæ•°ï¼Œåˆ é™¤å¤šä½™çš„æ—¥å¿—æ–‡ä»¶å³å¯ã€‚<br><br>(3)å¦‚æœé…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰â€œdateextâ€å‚æ•°ï¼Œæ—¥å¿—æ–‡ä»¶å°±éœ€è¦è¿›è¡Œæ”¹åäº†ã€‚<br>å½“ç¬¬ä¸€æ¬¡è¿›è¡Œæ—¥å¿—è½®æ›¿æ—¶ï¼Œå½“å‰çš„â€œsecureâ€æ—¥å¿—ä¼šè‡ªåŠ¨æ”¹åä¸ºâ€œsecure.1â€ï¼Œç„¶åæ–°å»ºâ€œsecureâ€æ—¥å¿—ï¼Œ ç”¨æ¥ä¿å­˜æ–°çš„æ—¥å¿—ã€‚<br>å½“ç¬¬äºŒæ¬¡è¿›è¡Œæ—¥å¿—è½®æ›¿æ—¶ï¼Œâ€œsecure.1â€ ä¼šè‡ªåŠ¨æ”¹åä¸ºâ€œsecure.2â€ï¼Œ å½“å‰çš„â€œsecureâ€æ—¥å¿—ä¼šè‡ªåŠ¨æ”¹åä¸ºâ€œsecure.1â€ï¼Œç„¶åä¹Ÿä¼šæ–°å»ºâ€œsecureâ€æ—¥å¿—ï¼Œç”¨æ¥ä¿å­˜æ–°çš„æ—¥å¿—ï¼Œä»¥æ­¤ç±»æ¨ã€‚<br><br></code></pre></td></tr></tbody></table></figure><h4 id="logrotate-é…ç½®æ–‡ä»¶"><a href="#logrotate-é…ç½®æ–‡ä»¶" class="headerlink" title="logrotate é…ç½®æ–‡ä»¶"></a>logrotate é…ç½®æ–‡ä»¶</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs shell">/etc/logrotate.conf ä¸º logrotate çš„å…¨å±€é…ç½®æ–‡ä»¶(å†™äº†æ—¥å¿—æ–‡ä»¶è½®æ›¿è§„åˆ™)<br><br>/etc/logrotate.confä¸­çš„è½®æ›¿è§„åˆ™é€‚ç”¨äºæ‰€æœ‰æ—¥å¿—æ–‡ä»¶(é™¤äº†å•ç‹¬æŒ‡å®šè½®æ›¿è§„åˆ™çš„æ—¥å¿—æ–‡ä»¶)<br>å¯ä»¥åœ¨/etc/logrotate.confå¯¹æŸäº›æ—¥å¿—æ–‡ä»¶å•ç‹¬æŒ‡å®šè½®æ›¿è§„åˆ™<br>ä¹Ÿå¯ä»¥æŠŠå¯¹æŸäº›æ—¥å¿—æ–‡ä»¶å•ç‹¬æŒ‡å®šçš„è½®æ›¿è§„åˆ™å†™åœ¨/etc/logrotate.dç›®å½•ä¸‹ï¼Œç„¶ååœ¨/etc/logrotate.conf ä¸­includeè°ƒç”¨<br><br>/etc/logrotate.confæ–‡ä»¶å†…å®¹ï¼š<br><span class="hljs-meta prompt_"># </span><span class="language-bash">rotate <span class="hljs-built_in">log</span> files weekly---&gt;æ¯å‘¨å¯¹æ—¥å¿—æ–‡ä»¶è¿›è¡Œä¸€æ¬¡è½®æ›¿</span><br>weekly<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">keep 4 weeks worth of backlogs---&gt;å…±ä¿å­˜ 4 ä»½æ—¥å¿—æ–‡ä»¶ï¼Œå½“å»ºç«‹æ–°çš„æ—¥å¿—æ–‡ä»¶æ—¶ï¼Œæ—§çš„å°†ä¼šè¢«åˆ é™¤</span><br>rotate 4<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">create new (empty) <span class="hljs-built_in">log</span> files after rotating old ones---&gt;åˆ›å»ºæ–°çš„ç©ºçš„æ—¥å¿—æ–‡ä»¶ï¼Œåœ¨æ—¥å¿—è½®æ›¿å</span><br>create<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">use <span class="hljs-built_in">date</span> as a suffix of the rotated file---&gt;ä½¿ç”¨æ—¥æœŸä½œä¸ºæ—¥å¿—è½®æ›¿æ–‡ä»¶çš„åç¼€</span><br>dateext<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">uncomment this <span class="hljs-keyword">if</span> you want your <span class="hljs-built_in">log</span> files compressed---&gt;æ—¥å¿—æ–‡ä»¶æ˜¯å¦å‹ç¼©ã€‚å¦‚æœå–æ¶ˆæ³¨é‡Šï¼Œåˆ™æ—¥å¿—ä¼šåœ¨è½¬å‚¨çš„åŒæ—¶è¿›è¡Œå‹ç¼©</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">compress</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">RPM packages drop <span class="hljs-built_in">log</span> rotation information into this directory</span> <br>include /etc/logrotate.d---&gt;å¯ä»¥æŠŠä¸€äº›å•ç‹¬çš„è½®æ›¿è§„åˆ™å†™åœ¨/etc/logrotate.dä¸‹(åœ¨æœ¬æ–‡ä»¶ä¸­includeè°ƒç”¨ä¸€ä¸‹å°±è¡Œ)ï¼Œä¹Ÿå¯ä»¥å†™åœ¨æœ¬æ–‡ä»¶ä¸­(å¦‚ä¸‹é¢å†™çš„)<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">ä¸‹é¢æ˜¯å•ç‹¬è®¾ç½®ï¼Œä¼˜å…ˆçº§æ›´é«˜ã€‚</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">no packages own wtmp and btmp -- we<span class="hljs-string">'ll rotate them here</span></span><br>/var/log/wtmp {<br>monthly # æ¯æœˆå¯¹æ—¥å¿—æ–‡ä»¶è¿›è¡Œä¸€æ¬¡è½®æ›¿<br>create 0664 root utmp  # å»ºç«‹çš„æ–°æ—¥å¿—æ–‡ä»¶ï¼Œæƒé™æ˜¯ 0664  ï¼Œæ‰€æœ‰è€…æ˜¯ root ï¼Œæ‰€å±ç»„æ˜¯ utmp ç»„<br>minsize 1M # æ—¥å¿—æ–‡ä»¶æœ€å°è½®æ›¿å¤§å°æ˜¯ 1MB ã€‚ä¹Ÿå°±æ˜¯æ—¥å¿—ä¸€å®šè¦è¶…è¿‡ 1MB æ‰ä¼šè½®æ›¿ï¼Œå¦åˆ™å°±ç®—æ—¶é—´è¾¾åˆ°ä¸€ä¸ªæœˆï¼Œä¹Ÿä¸è¿›è¡Œæ—¥å¿—è½¬å‚¨<br>rotate 1  # ä»…ä¿ç•™ä¸€ä¸ªæ—¥å¿—å¤‡ä»½ã€‚ä¹Ÿå°±æ˜¯åªæœ‰ wtmp  å’Œ wtmp.1  æ—¥å¿—ä¿ç•™è€Œå·²<br>}<br><br>/var/log/btmp {<br>missingok  # å¦‚æœæ—¥å¿—ä¸å­˜åœ¨ï¼Œåˆ™å¿½ç•¥è¯¥æ—¥å¿—çš„è­¦å‘Šä¿¡æ¯<br>monthly<br>create 0600 root utmp rotate 1<br>}<br><br><br><br><br>å•ç‹¬æŒ‡å®šæŸä¸ªæ—¥å¿—æ–‡ä»¶çš„è½®æ›¿è§„åˆ™çš„å‚æ•°è¯´æ˜ï¼š<br>dailyæ—¥å¿—çš„è½®æ›¿å‘¨æœŸæ˜¯æ¯å¤©<br>weeklyæ—¥å¿—çš„è½®æ›¿å‘¨æœŸæ˜¯æ¯å‘¨<br>monthlyæ—¥å¿—çš„è½®æ›¿å‘¨æœŸæ˜¯æ¯æœˆ<br>rotate æ•°å­—ä¿ç•™çš„æ—¥å¿—æ–‡ä»¶çš„ä¸ªæ•°ã€‚0 æŒ‡æ²¡æœ‰å¤‡ä»½<br>compressæ—¥å¿—è½®æ›¿æ—¶ï¼Œæ—§çš„æ—¥å¿—è¿›è¡Œå‹ç¼©<br>create mode owner groupå»ºç«‹æ–°æ—¥å¿—ï¼ŒåŒæ—¶æŒ‡å®šæ–°æ—¥å¿—çš„æƒé™ä¸æ‰€æœ‰è€…å’Œæ‰€å±ç»„ã€‚<br>mail addresså½“æ—¥å¿—è½®æ›¿æ—¶ï¼Œè¾“å‡ºå†…å®¹é€šè¿‡é‚®ä»¶å‘é€åˆ°æŒ‡å®šçš„é‚®ä»¶åœ°å€ã€‚<br>missingokå¦‚æœæ—¥å¿—ä¸å­˜åœ¨ï¼Œåˆ™å¿½ç•¥è¯¥æ—¥å¿—çš„è­¦å‘Šä¿¡æ¯<br>notifemptyå¦‚æœæ—¥å¿—ä¸ºç©ºæ–‡ä»¶ï¼Œåˆ™ä¸è¿›è¡Œæ—¥å¿—è½®æ›¿<br>minsize å¤§å°æ—¥å¿—è½®æ›¿çš„æœ€å°å€¼ã€‚ä¹Ÿå°±æ˜¯æ—¥å¿—ä¸€å®šè¦è¾¾åˆ°è¿™ä¸ªæœ€å°å€¼æ‰ä¼šè½®æ›¿ï¼Œå¦åˆ™å°±ç®—æ—¶é—´è¾¾åˆ°ä¹Ÿä¸è½®æ›¿<br>size å¤§å°æ—¥å¿—åªæœ‰å¤§äºæŒ‡å®šå¤§å°æ‰è¿›è¡Œæ—¥å¿—è½®æ›¿ï¼Œè€Œä¸æ˜¯æŒ‰ç…§æ—¶é—´è½®æ›¿ã€‚<br>dateextä½¿ç”¨æ—¥æœŸä½œä¸ºæ—¥å¿—è½®æ›¿æ–‡ä»¶çš„åç¼€ã€‚<br>sharedscriptsåœ¨æ­¤å…³é”®å­—ä¹‹åçš„è„šæœ¬åªæ‰§è¡Œä¸€æ¬¡ã€‚<br>prerotate/endscriptåœ¨æ—¥å¿—è½®æ›¿ä¹‹å‰æ‰§è¡Œè„šæœ¬å‘½ä»¤ã€‚<br>postrotate/endscriptåœ¨æ—¥å¿—è½®æ›¿ä¹‹åæ‰§è¡Œè„šæœ¬å‘½ä»¤ã€‚<br></code></pre></td></tr></tbody></table></figure><h4 id="æŠŠè‡ªå·±çš„æ—¥å¿—åŠ å…¥æ—¥å¿—è½®æ›¿"><a href="#æŠŠè‡ªå·±çš„æ—¥å¿—åŠ å…¥æ—¥å¿—è½®æ›¿" class="headerlink" title="æŠŠè‡ªå·±çš„æ—¥å¿—åŠ å…¥æ—¥å¿—è½®æ›¿"></a>æŠŠè‡ªå·±çš„æ—¥å¿—åŠ å…¥æ—¥å¿—è½®æ›¿</h4><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">1)ç¬¬ä¸€ç§æ–¹æ³•ï¼š<br>ç›´æ¥åœ¨/etc/logrotate.conf é…ç½®æ–‡ä»¶ä¸­å†™å…¥è¯¥æ—¥å¿—çš„è½®æ›¿ç­–ç•¥<br>2)ç¬¬äºŒç§æ–¹æ³•ï¼š<br>åœ¨/etc/logrotate.d/ç›®å½•ä¸­æ–°å»ºç«‹è¯¥æ—¥å¿—çš„è½®æ›¿æ–‡ä»¶ï¼Œåœ¨è¯¥è½®æ›¿æ–‡ä»¶ä¸­å†™å…¥æ­£ç¡®çš„è½®æ›¿ç­–ç•¥ï¼Œå› ä¸ºè¯¥ç›®å½•ä¸­çš„æ–‡ä»¶éƒ½ä¼šè¢«â€œincludeâ€åˆ°ä¸»é…ç½®æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥æŠŠæ—¥å¿—åŠ å…¥è½®æ›¿ã€‚<br><br>3)æ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ï¼Œå› ä¸ºç³»ç»Ÿä¸­éœ€è¦è½®æ›¿çš„æ—¥å¿—éå¸¸å¤šï¼Œå¦‚æœå…¨éƒ½ç›´æ¥å†™ å…¥/etc/logrotate.conf é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶çš„å¯ç®¡ç†æ€§å°±ä¼šéå¸¸å·®ï¼Œä¸åˆ©äºæ­¤æ–‡ä»¶çš„ç»´æŠ¤ã€‚<br></code></pre></td></tr></tbody></table></figure><p>æ¡ˆä¾‹ï¼š</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs sh">æ¡ˆä¾‹ï¼šåœ¨/etc/logrotate.conf è¿›è¡Œé…ç½®, æˆ–è€…ç›´æ¥åœ¨ /etc/logrotate.d/ ä¸‹åˆ›å»ºæ–‡ä»¶ hsplog  <br>ç¼–å†™å¦‚ä¸‹å†…å®¹,å…·ä½“è½®æ›¿çš„æ•ˆæœ å¯ä»¥å‚è€ƒ /var/log  ä¸‹çš„ boot.log æƒ…å†µ.<br>/var/log/hsp.log<br>{<br>missingok<br>daily<br>copytruncate<br>rotate 7<br>notifempty<br>}<br><br><br>åœ¨ /etc/logrotate.d/ ä¸‹åˆ›å»ºæ–‡ä»¶ hsplog  <br>vim  hsplog  <br>å†™å…¥ï¼š<br>/var/log/hsp.log<br>{<br>missingok<br>daily<br>copytruncate<br>rotate 1<br>notifempty<br>}<br>ä¿å­˜é€€å‡º<br><br>è¿™æ ·å°±å¥½äº†ï¼Œå› ä¸º/etc/logrotate.conf ä¸­æœ‰ï¼šinclude /etc/logrotate.d<br><br></code></pre></td></tr></tbody></table></figure><p>æ—¥å¿—è½®æ›¿æœºåˆ¶åŸç†ï¼š</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">æ—¥å¿—è½®æ›¿ä¹‹æ‰€ä»¥å¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´å¤‡ä»½æ—¥å¿—ï¼Œæ˜¯ä¾èµ–ç³»ç»Ÿå®šæ—¶ä»»åŠ¡ã€‚<br>åœ¨ /etc/cron.daily/ç›®å½•ï¼Œå°±ä¼šå‘ç°è¿™ä¸ªç›®å½•ä¸­æ˜¯æœ‰ logrotate æ–‡ä»¶(å¯æ‰§è¡Œ)ï¼Œ<br>logrotate é€šè¿‡è¿™ä¸ªæ–‡ä»¶ä¾èµ–å®šæ—¶ä»»åŠ¡æ‰§è¡Œçš„ã€‚<br><br>crondå®šæ—¶åå°ç¨‹åºä¼šå®šæ—¶æ‰§è¡Œcron.dailyå†…çš„æ–‡ä»¶<br>logrotate æ–‡ä»¶åœ¨cron.dailyä¸‹<br>æ‰€ä»¥ä¹Ÿä¼šå®šæ—¶æ‰§è¡Œæ–‡ä»¶ä¸­çš„è½®æ›¿è§„åˆ™<br>å†™æ—¥å¿—æ˜¯rsyslogd<br>æ—¥å¿—è½®æ›¿æ˜¯logrotate<br></code></pre></td></tr></tbody></table></figure><p>æŸ¥çœ‹å†…å­˜æ—¥å¿—</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs shell">æœ‰ä¸€äº›æ—¥å¿—æ˜¯å†™åˆ°å†…å­˜é‡Œçš„ï¼Œè¿˜æ²¡æœ‰å†™åˆ°æ–‡ä»¶é‡Œï¼Œå› ä¸ºè¿™äº›æ—¥å¿—æ˜¯å®æ—¶å˜åŒ–çš„<br>é‡å¯ä¹‹åå†…å­˜æ—¥å¿—ä¼šè¢«æ¸…ç©º<br><br>æŸ¥çœ‹å†…å­˜æ—¥å¿—æŒ‡ä»¤ï¼šjournalctl<br>journalctlæŸ¥çœ‹å…¨éƒ¨<br>journalctl -n 3æŸ¥çœ‹æœ€æ–° 3 æ¡<br>journalctl --since 19:00--until 19:10:10æŸ¥çœ‹èµ·å§‹æ—¶é—´åˆ°ç»“æŸæ—¶é—´çš„æ—¥å¿—å¯åŠ æ—¥æœŸ<br>journalctl -p erræŠ¥é”™æ—¥å¿—<br>journalctl -o verboseæ—¥å¿—è¯¦ç»†å†…å®¹<br>journalctl _PID=1245 _COMM=sshdæŸ¥çœ‹åŒ…å«è¿™äº›å‚æ•°çš„æ—¥å¿—ï¼ˆåœ¨è¯¦ç»†æ—¥å¿—æŸ¥çœ‹ï¼‰ æˆ–è€… journalctl |grep sshd<br> <br><br>æ³¨æ„: journalctlæŸ¥çœ‹çš„æ˜¯å†…å­˜æ—¥å¿—, é‡å¯æ¸…ç©º<br><br>æ¼”ç¤ºæ¡ˆä¾‹:<br>ä½¿ç”¨ journalctl | grep sshdæ¥çœ‹çœ‹ç”¨æˆ·ç™»å½•æ¸…ç©º, é‡å¯ç³»ç»Ÿï¼Œå†æ¬¡æŸ¥è¯¢ï¼Œçœ‹çœ‹æ—¥å¿—æœ‰ä»€ä¹ˆå˜åŒ–æ²¡æœ‰<br><br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaåç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVCç†è®ºå­¦ä¹ </title>
      <link href="/2022/10/11/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SpringMVC%E7%AC%94%E8%AE%B0/"/>
      <url>/2022/10/11/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/SpringMVC%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€SpringMVCç®€ä»‹"><a href="#ä¸€ã€SpringMVCç®€ä»‹" class="headerlink" title="ä¸€ã€SpringMVCç®€ä»‹"></a>ä¸€ã€SpringMVCç®€ä»‹</h1><h3 id="1ã€ä»€ä¹ˆæ˜¯MVC"><a href="#1ã€ä»€ä¹ˆæ˜¯MVC" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯MVC"></a>1ã€ä»€ä¹ˆæ˜¯MVC</h3><p>MVCæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„çš„æ€æƒ³ï¼Œå°†è½¯ä»¶æŒ‰ç…§æ¨¡å‹ã€è§†å›¾ã€æ§åˆ¶å™¨æ¥åˆ’åˆ†</p><p>Mï¼šModelï¼Œæ¨¡å‹å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„JavaBeanï¼Œä½œç”¨æ˜¯å¤„ç†æ•°æ®</p><p>JavaBeanåˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li>ä¸€ç±»ç§°ä¸ºå®ä½“ç±»Beanï¼šä¸“é—¨å­˜å‚¨ä¸šåŠ¡æ•°æ®çš„ï¼Œå¦‚ Studentã€User ç­‰</li><li>ä¸€ç±»ç§°ä¸ºä¸šåŠ¡å¤„ç† Beanï¼šæŒ‡ Service æˆ– Dao å¯¹è±¡ï¼Œä¸“é—¨ç”¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®ã€‚</li></ul><p>Vï¼šViewï¼Œè§†å›¾å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„htmlæˆ–jspç­‰é¡µé¢ï¼Œä½œç”¨æ˜¯ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œå±•ç¤ºæ•°æ®</p><p>Cï¼šControllerï¼Œæ§åˆ¶å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„servletï¼Œä½œç”¨æ˜¯æ¥æ”¶è¯·æ±‚å’Œå“åº”æµè§ˆå™¨</p><p>MVCçš„å·¥ä½œæµç¨‹ï¼š<br>ç”¨æˆ·é€šè¿‡è§†å›¾å±‚å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸­è¯·æ±‚è¢«Controlleræ¥æ”¶ï¼ŒControllerè°ƒç”¨ç›¸åº”çš„Modelå±‚å¤„ç†è¯·æ±‚ï¼Œå¤„ç†å®Œæ¯•å°†ç»“æœè¿”å›åˆ°Controllerï¼ŒControllerå†æ ¹æ®è¯·æ±‚å¤„ç†çš„ç»“æœæ‰¾åˆ°ç›¸åº”çš„Viewè§†å›¾ï¼Œæ¸²æŸ“æ•°æ®åæœ€ç»ˆå“åº”ç»™æµè§ˆå™¨</p><h3 id="2ã€ä»€ä¹ˆæ˜¯SpringMVC"><a href="#2ã€ä»€ä¹ˆæ˜¯SpringMVC" class="headerlink" title="2ã€ä»€ä¹ˆæ˜¯SpringMVC"></a>2ã€ä»€ä¹ˆæ˜¯SpringMVC</h3><p>SpringMVCæ˜¯Springçš„ä¸€ä¸ªåç»­äº§å“ï¼Œæ˜¯Springçš„ä¸€ä¸ªå­é¡¹ç›®</p><p>SpringMVC æ˜¯ Spring ä¸ºè¡¨è¿°å±‚å¼€å‘æä¾›çš„ä¸€æ•´å¥—å®Œå¤‡çš„è§£å†³æ–¹æ¡ˆã€‚åœ¨è¡¨è¿°å±‚æ¡†æ¶å†ç» Strustã€WebWorkã€Strust2 ç­‰è¯¸å¤šäº§å“çš„å†ä»£æ›´è¿­ä¹‹åï¼Œç›®å‰ä¸šç•Œæ™®éé€‰æ‹©äº† SpringMVC ä½œä¸º Java EE é¡¹ç›®è¡¨è¿°å±‚å¼€å‘çš„<strong>é¦–é€‰æ–¹æ¡ˆ</strong>ã€‚</p><blockquote><p>æ³¨ï¼šä¸‰å±‚æ¶æ„åˆ†ä¸ºè¡¨è¿°å±‚ï¼ˆæˆ–è¡¨ç¤ºå±‚ï¼‰ã€ä¸šåŠ¡é€»è¾‘å±‚ã€æ•°æ®è®¿é—®å±‚ï¼Œè¡¨è¿°å±‚è¡¨ç¤ºå‰å°é¡µé¢å’Œåå°servlet</p></blockquote><h3 id="3ã€SpringMVCçš„ç‰¹ç‚¹"><a href="#3ã€SpringMVCçš„ç‰¹ç‚¹" class="headerlink" title="3ã€SpringMVCçš„ç‰¹ç‚¹"></a>3ã€SpringMVCçš„ç‰¹ç‚¹</h3><ul><li><strong>Spring å®¶æ—åŸç”Ÿäº§å“</strong>ï¼Œä¸ IOC å®¹å™¨ç­‰åŸºç¡€è®¾æ–½æ— ç¼å¯¹æ¥</li><li><strong>åŸºäºåŸç”Ÿçš„Servlet</strong>ï¼Œé€šè¿‡äº†åŠŸèƒ½å¼ºå¤§çš„<strong>å‰ç«¯æ§åˆ¶å™¨DispatcherServlet</strong>ï¼Œå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œç»Ÿä¸€å¤„ç†</li><li>è¡¨è¿°å±‚å„ç»†åˆ†é¢†åŸŸéœ€è¦è§£å†³çš„é—®é¢˜<strong>å…¨æ–¹ä½è¦†ç›–</strong>ï¼Œæä¾›<strong>å…¨é¢è§£å†³æ–¹æ¡ˆ</strong></li><li><strong>ä»£ç æ¸…æ–°ç®€æ´</strong>ï¼Œå¤§å¹…åº¦æå‡å¼€å‘æ•ˆç‡</li><li>å†…éƒ¨ç»„ä»¶åŒ–ç¨‹åº¦é«˜ï¼Œå¯æ’æ‹”å¼ç»„ä»¶<strong>å³æ’å³ç”¨</strong>ï¼Œæƒ³è¦ä»€ä¹ˆåŠŸèƒ½é…ç½®ç›¸åº”ç»„ä»¶å³å¯</li><li><strong>æ€§èƒ½å“è‘—</strong>ï¼Œå°¤å…¶é€‚åˆç°ä»£å¤§å‹ã€è¶…å¤§å‹äº’è”ç½‘é¡¹ç›®è¦æ±‚</li></ul><h1 id="äºŒã€HelloWorld"><a href="#äºŒã€HelloWorld" class="headerlink" title="äºŒã€HelloWorld"></a>äºŒã€HelloWorld</h1><h3 id="1ã€å¼€å‘ç¯å¢ƒ"><a href="#1ã€å¼€å‘ç¯å¢ƒ" class="headerlink" title="1ã€å¼€å‘ç¯å¢ƒ"></a>1ã€å¼€å‘ç¯å¢ƒ</h3><p>IDEï¼šidea 2019.2</p><p>æ„å»ºå·¥å…·ï¼šmaven3.5.4</p><p>æœåŠ¡å™¨ï¼štomcat7</p><p>Springç‰ˆæœ¬ï¼š5.3.1</p><h3 id="2ã€åˆ›å»ºmavenå·¥ç¨‹"><a href="#2ã€åˆ›å»ºmavenå·¥ç¨‹" class="headerlink" title="2ã€åˆ›å»ºmavenå·¥ç¨‹"></a>2ã€åˆ›å»ºmavenå·¥ç¨‹</h3><h5 id="a-gt-æ·»åŠ webæ¨¡å—"><a href="#a-gt-æ·»åŠ webæ¨¡å—" class="headerlink" title="a>æ·»åŠ webæ¨¡å—"></a>a&gt;æ·»åŠ webæ¨¡å—</h5><h5 id="b-gt-æ‰“åŒ…æ–¹å¼ï¼šwar"><a href="#b-gt-æ‰“åŒ…æ–¹å¼ï¼šwar" class="headerlink" title="b>æ‰“åŒ…æ–¹å¼ï¼šwar"></a>b&gt;æ‰“åŒ…æ–¹å¼ï¼šwar</h5><h5 id="c-gt-å¼•å…¥ä¾èµ–"><a href="#c-gt-å¼•å…¥ä¾èµ–" class="headerlink" title="c>å¼•å…¥ä¾èµ–"></a>c&gt;å¼•å…¥ä¾èµ–</h5><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- SpringMVC --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- æ—¥å¿— --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-classic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ServletAPI --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.0&lt;/vers ion&gt;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- Spring5å’ŒThymeleafæ•´åˆåŒ… --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.thymeleaf<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>thymeleaf-spring5<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.12.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>æ³¨ï¼šç”±äº Maven çš„ä¼ é€’æ€§ï¼Œæˆ‘ä»¬ä¸å¿…å°†æ‰€æœ‰éœ€è¦çš„åŒ…å…¨éƒ¨é…ç½®ä¾èµ–ï¼Œè€Œæ˜¯é…ç½®æœ€é¡¶ç«¯çš„ä¾èµ–ï¼Œå…¶ä»–é ä¼ é€’æ€§å¯¼å…¥ã€‚</p><h3 id="3ã€é…ç½®web-xml"><a href="#3ã€é…ç½®web-xml" class="headerlink" title="3ã€é…ç½®web.xml"></a>3ã€é…ç½®web.xml</h3><p>æ³¨å†ŒSpringMVCçš„å‰ç«¯æ§åˆ¶å™¨DispatcherServlet</p><h5 id="a-gt-é»˜è®¤é…ç½®æ–¹å¼"><a href="#a-gt-é»˜è®¤é…ç½®æ–¹å¼" class="headerlink" title="a>é»˜è®¤é…ç½®æ–¹å¼"></a>a&gt;é»˜è®¤é…ç½®æ–¹å¼</h5><p>æ­¤é…ç½®ä½œç”¨ä¸‹ï¼ŒSpringMVCçš„é…ç½®æ–‡ä»¶é»˜è®¤ä½äºWEB-INFä¸‹ï¼Œé»˜è®¤åç§°ä¸º\<servlet-name>-servlet.xmlï¼Œä¾‹å¦‚ï¼Œä»¥ä¸‹é…ç½®æ‰€å¯¹åº”SpringMVCçš„é…ç½®æ–‡ä»¶ä½äºWEB-INFä¸‹ï¼Œæ–‡ä»¶åä¸ºspringMVC-servlet.xml</servlet-name></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œå¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚ç»Ÿä¸€è¿›è¡Œå¤„ç† --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        è®¾ç½®springMVCçš„æ ¸å¿ƒæ§åˆ¶å™¨æ‰€èƒ½å¤„ç†çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„</span><br><span class="hljs-comment">        /æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯/loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„</span><br><span class="hljs-comment">        ä½†æ˜¯/ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h5 id="b-gt-æ‰©å±•é…ç½®æ–¹å¼"><a href="#b-gt-æ‰©å±•é…ç½®æ–¹å¼" class="headerlink" title="b>æ‰©å±•é…ç½®æ–¹å¼"></a>b&gt;æ‰©å±•é…ç½®æ–¹å¼</h5><p>å¯é€šè¿‡init-paramæ ‡ç­¾è®¾ç½®SpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§°ï¼Œé€šè¿‡load-on-startupæ ‡ç­¾è®¾ç½®SpringMVCå‰ç«¯æ§åˆ¶å™¨DispatcherServletçš„åˆå§‹åŒ–æ—¶é—´</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œå¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚ç»Ÿä¸€è¿›è¡Œå¤„ç† --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- é€šè¿‡åˆå§‹åŒ–å‚æ•°æŒ‡å®šSpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§° --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- contextConfigLocationä¸ºå›ºå®šå€¼ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- ä½¿ç”¨classpath:è¡¨ç¤ºä»ç±»è·¯å¾„æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚mavenå·¥ç¨‹ä¸­çš„src/main/resources --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>classpath:springMVC.xml<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment"> ä½œä¸ºæ¡†æ¶çš„æ ¸å¿ƒç»„ä»¶ï¼Œåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­æœ‰å¤§é‡çš„åˆå§‹åŒ–æ“ä½œè¦åš</span><br><span class="hljs-comment">è€Œè¿™äº›æ“ä½œæ”¾åœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶æ‰æ‰§è¡Œä¼šä¸¥é‡å½±å“è®¿é—®é€Ÿåº¦</span><br><span class="hljs-comment">å› æ­¤éœ€è¦é€šè¿‡æ­¤æ ‡ç­¾å°†å¯åŠ¨æ§åˆ¶DispatcherServletçš„åˆå§‹åŒ–æ—¶é—´æå‰åˆ°æœåŠ¡å™¨å¯åŠ¨æ—¶</span><br><span class="hljs-comment">--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">load-on-startup</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>springMVC<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        è®¾ç½®springMVCçš„æ ¸å¿ƒæ§åˆ¶å™¨æ‰€èƒ½å¤„ç†çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„</span><br><span class="hljs-comment">        /æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯/loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„</span><br><span class="hljs-comment">        ä½†æ˜¯/ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ³¨ï¼š</p><p>\<url-pattern>æ ‡ç­¾ä¸­ä½¿ç”¨/å’Œ/*çš„åŒºåˆ«ï¼š</url-pattern></p><p>/æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯/loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„ï¼Œä½†æ˜¯/ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚</p><p>å› æ­¤å°±å¯ä»¥é¿å…åœ¨è®¿é—®jspé¡µé¢æ—¶ï¼Œè¯¥è¯·æ±‚è¢«DispatcherServletå¤„ç†ï¼Œä»è€Œæ‰¾ä¸åˆ°ç›¸åº”çš„é¡µé¢</p><p>/<em>åˆ™èƒ½å¤ŸåŒ¹é…æ‰€æœ‰è¯·æ±‚ï¼Œä¾‹å¦‚åœ¨ä½¿ç”¨è¿‡æ»¤å™¨æ—¶ï¼Œè‹¥éœ€è¦å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œè¿‡æ»¤ï¼Œå°±éœ€è¦ä½¿ç”¨/\</em>çš„å†™æ³•</p></blockquote><h3 id="4ã€åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨"><a href="#4ã€åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨" class="headerlink" title="4ã€åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨"></a>4ã€åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨</h3><p>ç”±äºå‰ç«¯æ§åˆ¶å™¨å¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚è¿›è¡Œäº†ç»Ÿä¸€çš„å¤„ç†ï¼Œä½†æ˜¯å…·ä½“çš„è¯·æ±‚æœ‰ä¸åŒçš„å¤„ç†è¿‡ç¨‹ï¼Œå› æ­¤éœ€è¦åˆ›å»ºå¤„ç†å…·ä½“è¯·æ±‚çš„ç±»ï¼Œå³è¯·æ±‚æ§åˆ¶å™¨</p><p>è¯·æ±‚æ§åˆ¶å™¨ä¸­æ¯ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ–¹æ³•æˆä¸ºæ§åˆ¶å™¨æ–¹æ³•</p><p>å› ä¸ºSpringMVCçš„æ§åˆ¶å™¨ç”±ä¸€ä¸ªPOJOï¼ˆæ™®é€šçš„Javaç±»ï¼‰æ‹…ä»»ï¼Œå› æ­¤éœ€è¦é€šè¿‡@Controlleræ³¨è§£å°†å…¶æ ‡è¯†ä¸ºä¸€ä¸ªæ§åˆ¶å±‚ç»„ä»¶ï¼Œäº¤ç»™Springçš„IoCå®¹å™¨ç®¡ç†ï¼Œæ­¤æ—¶SpringMVCæ‰èƒ½å¤Ÿè¯†åˆ«æ§åˆ¶å™¨çš„å­˜åœ¨</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloController</span> {<br>    <br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="5ã€åˆ›å»ºspringMVCçš„é…ç½®æ–‡ä»¶"><a href="#5ã€åˆ›å»ºspringMVCçš„é…ç½®æ–‡ä»¶" class="headerlink" title="5ã€åˆ›å»ºspringMVCçš„é…ç½®æ–‡ä»¶"></a>5ã€åˆ›å»ºspringMVCçš„é…ç½®æ–‡ä»¶</h3><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ… --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"com.atguigu.mvc.controller"</span>/&gt;</span><br><br><span class="hljs-comment">&lt;!-- é…ç½®Thymeleafè§†å›¾è§£æå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"viewResolver"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.thymeleaf.spring5.view.ThymeleafViewResolver"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"order"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"characterEncoding"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"UTF-8"</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"templateEngine"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.thymeleaf.spring5.SpringTemplateEngine"</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"templateResolver"</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver"</span>&gt;</span><br>    <br>                    <span class="hljs-comment">&lt;!-- è§†å›¾å‰ç¼€ --&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"prefix"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"/WEB-INF/templates/"</span>/&gt;</span><br>    <br>                    <span class="hljs-comment">&lt;!-- è§†å›¾åç¼€ --&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"suffix"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">".html"</span>/&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"templateMode"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"HTML5"</span>/&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"characterEncoding"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment">   å¤„ç†é™æ€èµ„æºï¼Œä¾‹å¦‚htmlã€jsã€cssã€jpg</span><br><span class="hljs-comment">  è‹¥åªè®¾ç½®è¯¥æ ‡ç­¾ï¼Œåˆ™åªèƒ½è®¿é—®é™æ€èµ„æºï¼Œå…¶ä»–è¯·æ±‚åˆ™æ— æ³•è®¿é—®</span><br><span class="hljs-comment">  æ­¤æ—¶å¿…é¡»è®¾ç½®&lt;mvc:annotation-driven/&gt;è§£å†³é—®é¢˜</span><br><span class="hljs-comment"> --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:default-servlet-handler</span>/&gt;</span><br><br><span class="hljs-comment">&lt;!-- å¼€å¯mvcæ³¨è§£é©±åŠ¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:annotation-driven</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:message-converters</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- å¤„ç†å“åº”ä¸­æ–‡å†…å®¹ä¹±ç  --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.springframework.http.converter.StringHttpMessageConverter"</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"defaultCharset"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"supportedMediaTypes"</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>text/html<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>application/json<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mvc:message-converters</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:annotation-driven</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h3 id="6ã€æµ‹è¯•HelloWorld"><a href="#6ã€æµ‹è¯•HelloWorld" class="headerlink" title="6ã€æµ‹è¯•HelloWorld"></a>6ã€æµ‹è¯•HelloWorld</h3><h5 id="a-gt-å®ç°å¯¹é¦–é¡µçš„è®¿é—®"><a href="#a-gt-å®ç°å¯¹é¦–é¡µçš„è®¿é—®" class="headerlink" title="a>å®ç°å¯¹é¦–é¡µçš„è®¿é—®"></a>a&gt;å®ç°å¯¹é¦–é¡µçš„è®¿é—®</h5><p>åœ¨è¯·æ±‚æ§åˆ¶å™¨ä¸­åˆ›å»ºå¤„ç†è¯·æ±‚çš„æ–¹æ³•</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// @RequestMappingæ³¨è§£ï¼šå¤„ç†è¯·æ±‚å’Œæ§åˆ¶å™¨æ–¹æ³•ä¹‹é—´çš„æ˜ å°„å…³ç³»</span><br><span class="hljs-comment">// @RequestMappingæ³¨è§£çš„valueå±æ€§å¯ä»¥é€šè¿‡è¯·æ±‚åœ°å€åŒ¹é…è¯·æ±‚ï¼Œ/è¡¨ç¤ºçš„å½“å‰å·¥ç¨‹çš„ä¸Šä¸‹æ–‡è·¯å¾„</span><br><span class="hljs-comment">// localhost:8080/springMVC/</span><br><span class="hljs-meta">@RequestMapping("/")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">index</span><span class="hljs-params">()</span> {<br>    <span class="hljs-comment">//è®¾ç½®è§†å›¾åç§°</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"index"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h5 id="b-gt-é€šè¿‡è¶…é“¾æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢"><a href="#b-gt-é€šè¿‡è¶…é“¾æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢" class="headerlink" title="b>é€šè¿‡è¶…é“¾æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢"></a>b&gt;é€šè¿‡è¶…é“¾æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢</h5><p>åœ¨ä¸»é¡µindex.htmlä¸­è®¾ç½®è¶…é“¾æ¥</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/hello}"</span>&gt;</span>HelloWorld<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>åœ¨è¯·æ±‚æ§åˆ¶å™¨ä¸­åˆ›å»ºå¤„ç†è¯·æ±‚çš„æ–¹æ³•</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/hello")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">HelloWorld</span><span class="hljs-params">()</span> {<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"target"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="7ã€æ€»ç»“"><a href="#7ã€æ€»ç»“" class="headerlink" title="7ã€æ€»ç»“"></a>7ã€æ€»ç»“</h3><p>æµè§ˆå™¨å‘é€è¯·æ±‚ï¼Œè‹¥è¯·æ±‚åœ°å€ç¬¦åˆå‰ç«¯æ§åˆ¶å™¨çš„url-patternï¼Œè¯¥è¯·æ±‚å°±ä¼šè¢«å‰ç«¯æ§åˆ¶å™¨DispatcherServletå¤„ç†ã€‚å‰ç«¯æ§åˆ¶å™¨ä¼šè¯»å–SpringMVCçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œé€šè¿‡æ‰«æç»„ä»¶æ‰¾åˆ°æ§åˆ¶å™¨ï¼Œå°†è¯·æ±‚åœ°å€å’Œæ§åˆ¶å™¨ä¸­@RequestMappingæ³¨è§£çš„valueå±æ€§å€¼è¿›è¡ŒåŒ¹é…ï¼Œè‹¥åŒ¹é…æˆåŠŸï¼Œè¯¥æ³¨è§£æ‰€æ ‡è¯†çš„æ§åˆ¶å™¨æ–¹æ³•å°±æ˜¯å¤„ç†è¯·æ±‚çš„æ–¹æ³•ã€‚å¤„ç†è¯·æ±‚çš„æ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„è§†å›¾åç§°ï¼Œè¯¥è§†å›¾åç§°ä¼šè¢«è§†å›¾è§£æå™¨è§£æï¼ŒåŠ ä¸Šå‰ç¼€å’Œåç¼€ç»„æˆè§†å›¾çš„è·¯å¾„ï¼Œé€šè¿‡Thymeleafå¯¹è§†å›¾è¿›è¡Œæ¸²æŸ“ï¼Œæœ€ç»ˆè½¬å‘åˆ°è§†å›¾æ‰€å¯¹åº”é¡µé¢</p><h1 id="ä¸‰ã€-RequestMappingæ³¨è§£"><a href="#ä¸‰ã€-RequestMappingæ³¨è§£" class="headerlink" title="ä¸‰ã€@RequestMappingæ³¨è§£"></a>ä¸‰ã€@RequestMappingæ³¨è§£</h1><h3 id="1ã€-RequestMappingæ³¨è§£çš„åŠŸèƒ½"><a href="#1ã€-RequestMappingæ³¨è§£çš„åŠŸèƒ½" class="headerlink" title="1ã€@RequestMappingæ³¨è§£çš„åŠŸèƒ½"></a>1ã€@RequestMappingæ³¨è§£çš„åŠŸèƒ½</h3><p>ä»æ³¨è§£åç§°ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ@RequestMappingæ³¨è§£çš„ä½œç”¨å°±æ˜¯å°†è¯·æ±‚å’Œå¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨æ–¹æ³•å…³è”èµ·æ¥ï¼Œå»ºç«‹æ˜ å°„å…³ç³»ã€‚</p><p>SpringMVC æ¥æ”¶åˆ°æŒ‡å®šçš„è¯·æ±‚ï¼Œå°±ä¼šæ¥æ‰¾åˆ°åœ¨æ˜ å°„å…³ç³»ä¸­å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚</p><h3 id="2ã€-RequestMappingæ³¨è§£çš„ä½ç½®"><a href="#2ã€-RequestMappingæ³¨è§£çš„ä½ç½®" class="headerlink" title="2ã€@RequestMappingæ³¨è§£çš„ä½ç½®"></a>2ã€@RequestMappingæ³¨è§£çš„ä½ç½®</h3><p>@RequestMappingæ ‡è¯†ä¸€ä¸ªç±»ï¼šè®¾ç½®æ˜ å°„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„çš„åˆå§‹ä¿¡æ¯</p><p>@RequestMappingæ ‡è¯†ä¸€ä¸ªæ–¹æ³•ï¼šè®¾ç½®æ˜ å°„è¯·æ±‚è¯·æ±‚è·¯å¾„çš„å…·ä½“ä¿¡æ¯</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping("/test")</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestMappingController</span> {<br><br><span class="hljs-comment">//æ­¤æ—¶è¯·æ±‚æ˜ å°„æ‰€æ˜ å°„çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„ä¸ºï¼š/test/testRequestMapping</span><br>    <span class="hljs-meta">@RequestMapping("/testRequestMapping")</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRequestMapping</span><span class="hljs-params">()</span>{<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>    }<br><br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="3ã€-RequestMappingæ³¨è§£çš„valueå±æ€§"><a href="#3ã€-RequestMappingæ³¨è§£çš„valueå±æ€§" class="headerlink" title="3ã€@RequestMappingæ³¨è§£çš„valueå±æ€§"></a>3ã€@RequestMappingæ³¨è§£çš„valueå±æ€§</h3><p>@RequestMappingæ³¨è§£çš„valueå±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚åœ°å€åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMappingæ³¨è§£çš„valueå±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜ å°„èƒ½å¤ŸåŒ¹é…å¤šä¸ªè¯·æ±‚åœ°å€æ‰€å¯¹åº”çš„è¯·æ±‚</p><p>@RequestMappingæ³¨è§£çš„valueå±æ€§å¿…é¡»è®¾ç½®ï¼Œè‡³å°‘é€šè¿‡è¯·æ±‚åœ°å€åŒ¹é…è¯·æ±‚æ˜ å°„</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/testRequestMapping}"</span>&gt;</span>æµ‹è¯•@RequestMappingçš„valueå±æ€§--&gt;/testRequestMapping<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/test}"</span>&gt;</span>æµ‹è¯•@RequestMappingçš„valueå±æ€§--&gt;/test<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">        value = {"/testRequestMapping", "/test"}</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRequestMapping</span><span class="hljs-params">()</span>{<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="4ã€-RequestMappingæ³¨è§£çš„methodå±æ€§"><a href="#4ã€-RequestMappingæ³¨è§£çš„methodå±æ€§" class="headerlink" title="4ã€@RequestMappingæ³¨è§£çš„methodå±æ€§"></a>4ã€@RequestMappingæ³¨è§£çš„methodå±æ€§</h3><p>@RequestMappingæ³¨è§£çš„methodå±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚æ–¹å¼ï¼ˆgetæˆ–postï¼‰åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMappingæ³¨è§£çš„methodå±æ€§æ˜¯ä¸€ä¸ªRequestMethodç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜ å°„èƒ½å¤ŸåŒ¹é…å¤šç§è¯·æ±‚æ–¹å¼çš„è¯·æ±‚</p><p>è‹¥å½“å‰è¯·æ±‚çš„è¯·æ±‚åœ°å€æ»¡è¶³è¯·æ±‚æ˜ å°„çš„valueå±æ€§ï¼Œä½†æ˜¯è¯·æ±‚æ–¹å¼ä¸æ»¡è¶³methodå±æ€§ï¼Œåˆ™æµè§ˆå™¨æŠ¥é”™405ï¼šRequest method â€˜POSTâ€™ not supported</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/test}"</span>&gt;</span>æµ‹è¯•@RequestMappingçš„valueå±æ€§--&gt;/test<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">"@{/test}"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">        value = {"/testRequestMapping", "/test"},</span><br><span class="hljs-meta">        method = {RequestMethod.GET, RequestMethod.POST}</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRequestMapping</span><span class="hljs-params">()</span>{<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ³¨ï¼š</p><p>1ã€å¯¹äºå¤„ç†æŒ‡å®šè¯·æ±‚æ–¹å¼çš„æ§åˆ¶å™¨æ–¹æ³•ï¼ŒSpringMVCä¸­æä¾›äº†@RequestMappingçš„æ´¾ç”Ÿæ³¨è§£</p><p>å¤„ç†getè¯·æ±‚çš„æ˜ å°„â€”&gt;@GetMapping</p><p>å¤„ç†postè¯·æ±‚çš„æ˜ å°„â€”&gt;@PostMapping</p><p>å¤„ç†putè¯·æ±‚çš„æ˜ å°„â€”&gt;@PutMapping</p><p>å¤„ç†deleteè¯·æ±‚çš„æ˜ å°„â€”&gt;@DeleteMapping</p><p>2ã€å¸¸ç”¨çš„è¯·æ±‚æ–¹å¼æœ‰getï¼Œpostï¼Œputï¼Œdelete</p><p>ä½†æ˜¯ç›®å‰æµè§ˆå™¨åªæ”¯æŒgetå’Œpostï¼Œè‹¥åœ¨formè¡¨å•æäº¤æ—¶ï¼Œä¸ºmethodè®¾ç½®äº†å…¶ä»–è¯·æ±‚æ–¹å¼çš„å­—ç¬¦ä¸²ï¼ˆputæˆ–deleteï¼‰ï¼Œåˆ™æŒ‰ç…§é»˜è®¤çš„è¯·æ±‚æ–¹å¼getå¤„ç†</p><p>è‹¥è¦å‘é€putå’Œdeleteè¯·æ±‚ï¼Œåˆ™éœ€è¦é€šè¿‡springæä¾›çš„è¿‡æ»¤å™¨HiddenHttpMethodFilterï¼Œåœ¨RESTfuléƒ¨åˆ†ä¼šè®²åˆ°</p></blockquote><h3 id="5ã€-RequestMappingæ³¨è§£çš„paramså±æ€§ï¼ˆäº†è§£ï¼‰"><a href="#5ã€-RequestMappingæ³¨è§£çš„paramså±æ€§ï¼ˆäº†è§£ï¼‰" class="headerlink" title="5ã€@RequestMappingæ³¨è§£çš„paramså±æ€§ï¼ˆäº†è§£ï¼‰"></a>5ã€@RequestMappingæ³¨è§£çš„paramså±æ€§ï¼ˆäº†è§£ï¼‰</h3><p>@RequestMappingæ³¨è§£çš„paramså±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚å‚æ•°åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMappingæ³¨è§£çš„paramså±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡å››ç§è¡¨è¾¾å¼è®¾ç½®è¯·æ±‚å‚æ•°å’Œè¯·æ±‚æ˜ å°„çš„åŒ¹é…å…³ç³»</p><p>â€œparamâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦paramè¯·æ±‚å‚æ•°</p><p>â€œ!paramâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»ä¸èƒ½æºå¸¦paramè¯·æ±‚å‚æ•°</p><p>â€œparam=valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦paramè¯·æ±‚å‚æ•°ä¸”param=value</p><p>â€œparam!=valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦paramè¯·æ±‚å‚æ•°ä½†æ˜¯param!=value</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/test(username='admin',password=123456)"</span>&gt;</span>æµ‹è¯•@RequestMappingçš„paramså±æ€§--&gt;/test<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(</span><br><span class="hljs-meta">        value = {"/testRequestMapping", "/test"}</span><br><span class="hljs-meta">        ,method = {RequestMethod.GET, RequestMethod.POST}</span><br><span class="hljs-meta">        ,params = {"username","password!=123456"}</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRequestMapping</span><span class="hljs-params">()</span>{<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ³¨ï¼š</p><p>è‹¥å½“å‰è¯·æ±‚æ»¡è¶³@RequestMappingæ³¨è§£çš„valueå’Œmethodå±æ€§ï¼Œä½†æ˜¯ä¸æ»¡è¶³paramså±æ€§ï¼Œæ­¤æ—¶é¡µé¢å›æŠ¥é”™400ï¼šParameter conditions â€œusername, password!=123456â€ not met for actual request parameters: username={admin}, password={123456}</p></blockquote><h3 id="6ã€-RequestMappingæ³¨è§£çš„headerså±æ€§ï¼ˆäº†è§£ï¼‰"><a href="#6ã€-RequestMappingæ³¨è§£çš„headerså±æ€§ï¼ˆäº†è§£ï¼‰" class="headerlink" title="6ã€@RequestMappingæ³¨è§£çš„headerså±æ€§ï¼ˆäº†è§£ï¼‰"></a>6ã€@RequestMappingæ³¨è§£çš„headerså±æ€§ï¼ˆäº†è§£ï¼‰</h3><p>@RequestMappingæ³¨è§£çš„headerså±æ€§é€šè¿‡è¯·æ±‚çš„è¯·æ±‚å¤´ä¿¡æ¯åŒ¹é…è¯·æ±‚æ˜ å°„</p><p>@RequestMappingæ³¨è§£çš„headerså±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡å››ç§è¡¨è¾¾å¼è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯å’Œè¯·æ±‚æ˜ å°„çš„åŒ¹é…å…³ç³»</p><p>â€œheaderâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯</p><p>â€œ!headerâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»ä¸èƒ½æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯</p><p>â€œheader=valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯ä¸”header=value</p><p>â€œheader!=valueâ€ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯ä¸”header!=value</p><p>è‹¥å½“å‰è¯·æ±‚æ»¡è¶³@RequestMappingæ³¨è§£çš„valueå’Œmethodå±æ€§ï¼Œä½†æ˜¯ä¸æ»¡è¶³headerså±æ€§ï¼Œæ­¤æ—¶é¡µé¢æ˜¾ç¤º404é”™è¯¯ï¼Œå³èµ„æºæœªæ‰¾åˆ°</p><h3 id="7ã€SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„"><a href="#7ã€SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„" class="headerlink" title="7ã€SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„"></a>7ã€SpringMVCæ”¯æŒanté£æ ¼çš„è·¯å¾„</h3><p>ï¼Ÿï¼šè¡¨ç¤ºä»»æ„çš„å•ä¸ªå­—ç¬¦</p><p>*ï¼šè¡¨ç¤ºä»»æ„çš„0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦</p><p>**ï¼šè¡¨ç¤ºä»»æ„çš„ä¸€å±‚æˆ–å¤šå±‚ç›®å½•</p><p>æ³¨æ„ï¼šåœ¨ä½¿ç”¨*<em>æ—¶ï¼Œåªèƒ½ä½¿ç”¨/*</em>/xxxçš„æ–¹å¼</p><h3 id="8ã€SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦ï¼ˆé‡ç‚¹ï¼‰"><a href="#8ã€SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="8ã€SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦ï¼ˆé‡ç‚¹ï¼‰"></a>8ã€SpringMVCæ”¯æŒè·¯å¾„ä¸­çš„å ä½ç¬¦ï¼ˆé‡ç‚¹ï¼‰</h3><p>åŸå§‹æ–¹å¼ï¼š/deleteUser?id=1</p><p>restæ–¹å¼ï¼š/deleteUser/1</p><p>SpringMVCè·¯å¾„ä¸­çš„å ä½ç¬¦å¸¸ç”¨äºRESTfulé£æ ¼ä¸­ï¼Œå½“è¯·æ±‚è·¯å¾„ä¸­å°†æŸäº›æ•°æ®é€šè¿‡è·¯å¾„çš„æ–¹å¼ä¼ è¾“åˆ°æœåŠ¡å™¨ä¸­ï¼Œå°±å¯ä»¥åœ¨ç›¸åº”çš„@RequestMappingæ³¨è§£çš„valueå±æ€§ä¸­é€šè¿‡å ä½ç¬¦{xxx}è¡¨ç¤ºä¼ è¾“çš„æ•°æ®ï¼Œåœ¨é€šè¿‡@PathVariableæ³¨è§£ï¼Œå°†å ä½ç¬¦æ‰€è¡¨ç¤ºçš„æ•°æ®èµ‹å€¼ç»™æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/testRest/1/admin}"</span>&gt;</span>æµ‹è¯•è·¯å¾„ä¸­çš„å ä½ç¬¦--&gt;/testRest<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testRest/{id}/{username}")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRest</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable("id")</span> String id, <span class="hljs-meta">@PathVariable("username")</span> String username)</span>{<br>    System.out.println(<span class="hljs-string">"id:"</span>+id+<span class="hljs-string">",username:"</span>+username);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br><span class="hljs-comment">//æœ€ç»ˆè¾“å‡ºçš„å†…å®¹ä¸º--&gt;id:1,username:admin</span><br></code></pre></td></tr></tbody></table></figure><h1 id="å››ã€SpringMVCè·å–è¯·æ±‚å‚æ•°"><a href="#å››ã€SpringMVCè·å–è¯·æ±‚å‚æ•°" class="headerlink" title="å››ã€SpringMVCè·å–è¯·æ±‚å‚æ•°"></a>å››ã€SpringMVCè·å–è¯·æ±‚å‚æ•°</h1><h3 id="1ã€é€šè¿‡ServletAPIè·å–"><a href="#1ã€é€šè¿‡ServletAPIè·å–" class="headerlink" title="1ã€é€šè¿‡ServletAPIè·å–"></a>1ã€é€šè¿‡ServletAPIè·å–</h3><p>å°†HttpServletRequestä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ï¼Œæ­¤æ—¶HttpServletRequestç±»å‹çš„å‚æ•°è¡¨ç¤ºå°è£…äº†å½“å‰è¯·æ±‚çš„è¯·æ±‚æŠ¥æ–‡çš„å¯¹è±¡</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testParam")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testParam</span><span class="hljs-params">(HttpServletRequest request)</span>{<br>    <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">"username"</span>);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-string">"password"</span>);<br>    System.out.println(<span class="hljs-string">"username:"</span>+username+<span class="hljs-string">",password:"</span>+password);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="2ã€é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°"><a href="#2ã€é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°" class="headerlink" title="2ã€é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°"></a>2ã€é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°</h3><p>åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®ï¼Œè®¾ç½®å’Œè¯·æ±‚å‚æ•°åŒåçš„å½¢å‚ï¼Œå½“æµè§ˆå™¨å‘é€è¯·æ±‚ï¼ŒåŒ¹é…åˆ°è¯·æ±‚æ˜ å°„æ—¶ï¼Œåœ¨DispatcherServletä¸­å°±ä¼šå°†è¯·æ±‚å‚æ•°èµ‹å€¼ç»™ç›¸åº”çš„å½¢å‚</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/testParam(username='admin',password=123456)}"</span>&gt;</span>æµ‹è¯•è·å–è¯·æ±‚å‚æ•°--&gt;/testParam<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testParam")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testParam</span><span class="hljs-params">(String username, String password)</span>{<br>    System.out.println(<span class="hljs-string">"username:"</span>+username+<span class="hljs-string">",password:"</span>+password);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ³¨ï¼š</p><p>è‹¥è¯·æ±‚æ‰€ä¼ è¾“çš„è¯·æ±‚å‚æ•°ä¸­æœ‰å¤šä¸ªåŒåçš„è¯·æ±‚å‚æ•°ï¼Œæ­¤æ—¶å¯ä»¥åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä¸­è®¾ç½®å­—ç¬¦ä¸²æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²ç±»å‹çš„å½¢å‚æ¥æ”¶æ­¤è¯·æ±‚å‚æ•°</p><p>è‹¥ä½¿ç”¨å­—ç¬¦ä¸²æ•°ç»„ç±»å‹çš„å½¢å‚ï¼Œæ­¤å‚æ•°çš„æ•°ç»„ä¸­åŒ…å«äº†æ¯ä¸€ä¸ªæ•°æ®</p><p>è‹¥ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹çš„å½¢å‚ï¼Œæ­¤å‚æ•°çš„å€¼ä¸ºæ¯ä¸ªæ•°æ®ä¸­é—´ä½¿ç”¨é€—å·æ‹¼æ¥çš„ç»“æœ</p></blockquote><h3 id="3ã€-RequestParam"><a href="#3ã€-RequestParam" class="headerlink" title="3ã€@RequestParam"></a>3ã€@RequestParam</h3><p>@RequestParamæ˜¯å°†è¯·æ±‚å‚æ•°å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚åˆ›å»ºæ˜ å°„å…³ç³»</p><p>@RequestParamæ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼š</p><p>valueï¼šæŒ‡å®šä¸ºå½¢å‚èµ‹å€¼çš„è¯·æ±‚å‚æ•°çš„å‚æ•°å</p><p>requiredï¼šè®¾ç½®æ˜¯å¦å¿…é¡»ä¼ è¾“æ­¤è¯·æ±‚å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºtrue</p><p>è‹¥è®¾ç½®ä¸ºtrueæ—¶ï¼Œåˆ™å½“å‰è¯·æ±‚å¿…é¡»ä¼ è¾“valueæ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°ï¼Œè‹¥æ²¡æœ‰ä¼ è¾“è¯¥è¯·æ±‚å‚æ•°ï¼Œä¸”æ²¡æœ‰è®¾ç½®defaultValueå±æ€§ï¼Œåˆ™é¡µé¢æŠ¥é”™400ï¼šRequired String parameter â€˜xxxâ€™ is not presentï¼›è‹¥è®¾ç½®ä¸ºfalseï¼Œåˆ™å½“å‰è¯·æ±‚ä¸æ˜¯å¿…é¡»ä¼ è¾“valueæ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°ï¼Œè‹¥æ²¡æœ‰ä¼ è¾“ï¼Œåˆ™æ³¨è§£æ‰€æ ‡è¯†çš„å½¢å‚çš„å€¼ä¸ºnull</p><p>defaultValueï¼šä¸ç®¡requiredå±æ€§å€¼ä¸ºtrueæˆ–falseï¼Œå½“valueæ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°æ²¡æœ‰ä¼ è¾“æˆ–ä¼ è¾“çš„å€¼ä¸ºâ€â€æ—¶ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ä¸ºå½¢å‚èµ‹å€¼</p><h3 id="4ã€-RequestHeader"><a href="#4ã€-RequestHeader" class="headerlink" title="4ã€@RequestHeader"></a>4ã€@RequestHeader</h3><p>@RequestHeaderæ˜¯å°†è¯·æ±‚å¤´ä¿¡æ¯å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚åˆ›å»ºæ˜ å°„å…³ç³»</p><p>@RequestHeaderæ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼švalueã€requiredã€defaultValueï¼Œç”¨æ³•åŒ@RequestParam</p><h3 id="5ã€-CookieValue"><a href="#5ã€-CookieValue" class="headerlink" title="5ã€@CookieValue"></a>5ã€@CookieValue</h3><p>@CookieValueæ˜¯å°†cookieæ•°æ®å’Œæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚åˆ›å»ºæ˜ å°„å…³ç³»</p><p>@CookieValueæ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼švalueã€requiredã€defaultValueï¼Œç”¨æ³•åŒ@RequestParam</p><h3 id="6ã€é€šè¿‡POJOè·å–è¯·æ±‚å‚æ•°"><a href="#6ã€é€šè¿‡POJOè·å–è¯·æ±‚å‚æ•°" class="headerlink" title="6ã€é€šè¿‡POJOè·å–è¯·æ±‚å‚æ•°"></a>6ã€é€šè¿‡POJOè·å–è¯·æ±‚å‚æ•°</h3><p>å¯ä»¥åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®è®¾ç½®ä¸€ä¸ªå®ä½“ç±»ç±»å‹çš„å½¢å‚ï¼Œæ­¤æ—¶è‹¥æµè§ˆå™¨ä¼ è¾“çš„è¯·æ±‚å‚æ•°çš„å‚æ•°åå’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¸€è‡´ï¼Œé‚£ä¹ˆè¯·æ±‚å‚æ•°å°±ä¼šä¸ºæ­¤å±æ€§èµ‹å€¼</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">"@{/testpojo}"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span><br>    ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    å¯†ç ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    æ€§åˆ«ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"sex"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ç”·"</span>&gt;</span>ç”·<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"sex"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"å¥³"</span>&gt;</span>å¥³<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    å¹´é¾„ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"age"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    é‚®ç®±ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testpojo")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testPOJO</span><span class="hljs-params">(User user)</span>{<br>    System.out.println(user);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br><span class="hljs-comment">//æœ€ç»ˆç»“æœ--&gt;User{id=null, username='å¼ ä¸‰', password='123', age=23, sex='ç”·', email='123@qq.com'}</span><br></code></pre></td></tr></tbody></table></figure><h3 id="7ã€è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜"><a href="#7ã€è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜" class="headerlink" title="7ã€è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜"></a>7ã€è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜</h3><p>è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨SpringMVCæä¾›çš„ç¼–ç è¿‡æ»¤å™¨CharacterEncodingFilterï¼Œä½†æ˜¯å¿…é¡»åœ¨web.xmlä¸­è¿›è¡Œæ³¨å†Œ</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--é…ç½®springMVCçš„ç¼–ç è¿‡æ»¤å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">init-param</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-name</span>&gt;</span>forceResponseEncoding<span class="hljs-tag">&lt;/<span class="hljs-name">param-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">param-value</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">param-value</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">init-param</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ³¨ï¼š</p><p>SpringMVCä¸­å¤„ç†ç¼–ç çš„è¿‡æ»¤å™¨ä¸€å®šè¦é…ç½®åˆ°å…¶ä»–è¿‡æ»¤å™¨ä¹‹å‰ï¼Œå¦åˆ™æ— æ•ˆ</p></blockquote><h1 id="äº”ã€åŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#äº”ã€åŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="äº”ã€åŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>äº”ã€åŸŸå¯¹è±¡å…±äº«æ•°æ®</h1><h3 id="1ã€ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#1ã€ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="1ã€ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>1ã€ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testServletAPI")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testServletAPI</span><span class="hljs-params">(HttpServletRequest request)</span>{<br>    request.setAttribute(<span class="hljs-string">"testScope"</span>, <span class="hljs-string">"hello,servletAPI"</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="2ã€ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#2ã€ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="2ã€ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>2ã€ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testModelAndView")</span><br><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title function_">testModelAndView</span><span class="hljs-params">()</span>{<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ModelAndViewæœ‰Modelå’ŒViewçš„åŠŸèƒ½</span><br><span class="hljs-comment">     * Modelä¸»è¦ç”¨äºå‘è¯·æ±‚åŸŸå…±äº«æ•°æ®</span><br><span class="hljs-comment">     * Viewä¸»è¦ç”¨äºè®¾ç½®è§†å›¾ï¼Œå®ç°é¡µé¢è·³è½¬</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">ModelAndView</span> <span class="hljs-variable">mav</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelAndView</span>();<br>    <span class="hljs-comment">//å‘è¯·æ±‚åŸŸå…±äº«æ•°æ®</span><br>    mav.addObject(<span class="hljs-string">"testScope"</span>, <span class="hljs-string">"hello,ModelAndView"</span>);<br>    <span class="hljs-comment">//è®¾ç½®è§†å›¾ï¼Œå®ç°é¡µé¢è·³è½¬</span><br>    mav.setViewName(<span class="hljs-string">"success"</span>);<br>    <span class="hljs-keyword">return</span> mav;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="3ã€ä½¿ç”¨Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#3ã€ä½¿ç”¨Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="3ã€ä½¿ç”¨Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>3ã€ä½¿ç”¨Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testModel")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testModel</span><span class="hljs-params">(Model model)</span>{<br>    model.addAttribute(<span class="hljs-string">"testScope"</span>, <span class="hljs-string">"hello,Model"</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="4ã€ä½¿ç”¨mapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#4ã€ä½¿ç”¨mapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="4ã€ä½¿ç”¨mapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>4ã€ä½¿ç”¨mapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testMap")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testMap</span><span class="hljs-params">(Map&lt;String, Object&gt; map)</span>{<br>    map.put(<span class="hljs-string">"testScope"</span>, <span class="hljs-string">"hello,Map"</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="5ã€ä½¿ç”¨ModelMapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"><a href="#5ã€ä½¿ç”¨ModelMapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®" class="headerlink" title="5ã€ä½¿ç”¨ModelMapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®"></a>5ã€ä½¿ç”¨ModelMapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testModelMap")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testModelMap</span><span class="hljs-params">(ModelMap modelMap)</span>{<br>    modelMap.addAttribute(<span class="hljs-string">"testScope"</span>, <span class="hljs-string">"hello,ModelMap"</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="6ã€Modelã€ModelMapã€Mapçš„å…³ç³»"><a href="#6ã€Modelã€ModelMapã€Mapçš„å…³ç³»" class="headerlink" title="6ã€Modelã€ModelMapã€Mapçš„å…³ç³»"></a>6ã€Modelã€ModelMapã€Mapçš„å…³ç³»</h3><p>Modelã€ModelMapã€Mapç±»å‹çš„å‚æ•°å…¶å®æœ¬è´¨ä¸Šéƒ½æ˜¯ BindingAwareModelMap ç±»å‹çš„</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">public interface Model{}<br>public class ModelMap extends LinkedHashMap&lt;String, Object&gt; {}<br>public class ExtendedModelMap extends ModelMap implements Model {}<br>public class BindingAwareModelMap extends ExtendedModelMap {}<br></code></pre></td></tr></tbody></table></figure><h3 id="7ã€å‘sessionåŸŸå…±äº«æ•°æ®"><a href="#7ã€å‘sessionåŸŸå…±äº«æ•°æ®" class="headerlink" title="7ã€å‘sessionåŸŸå…±äº«æ•°æ®"></a>7ã€å‘sessionåŸŸå…±äº«æ•°æ®</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testSession")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testSession</span><span class="hljs-params">(HttpSession session)</span>{<br>    session.setAttribute(<span class="hljs-string">"testSessionScope"</span>, <span class="hljs-string">"hello,session"</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="8ã€å‘applicationåŸŸå…±äº«æ•°æ®"><a href="#8ã€å‘applicationåŸŸå…±äº«æ•°æ®" class="headerlink" title="8ã€å‘applicationåŸŸå…±äº«æ•°æ®"></a>8ã€å‘applicationåŸŸå…±äº«æ•°æ®</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testApplication")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testApplication</span><span class="hljs-params">(HttpSession session)</span>{<br><span class="hljs-type">ServletContext</span> <span class="hljs-variable">application</span> <span class="hljs-operator">=</span> session.getServletContext();<br>    application.setAttribute(<span class="hljs-string">"testApplicationScope"</span>, <span class="hljs-string">"hello,application"</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h1 id="å…­ã€SpringMVCçš„è§†å›¾"><a href="#å…­ã€SpringMVCçš„è§†å›¾" class="headerlink" title="å…­ã€SpringMVCçš„è§†å›¾"></a>å…­ã€SpringMVCçš„è§†å›¾</h1><p>SpringMVCä¸­çš„è§†å›¾æ˜¯Viewæ¥å£ï¼Œè§†å›¾çš„ä½œç”¨æ¸²æŸ“æ•°æ®ï¼Œå°†æ¨¡å‹Modelä¸­çš„æ•°æ®å±•ç¤ºç»™ç”¨æˆ·</p><p>SpringMVCè§†å›¾çš„ç§ç±»å¾ˆå¤šï¼Œé»˜è®¤æœ‰è½¬å‘è§†å›¾å’Œé‡å®šå‘è§†å›¾</p><p>å½“å·¥ç¨‹å¼•å…¥jstlçš„ä¾èµ–ï¼Œè½¬å‘è§†å›¾ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºJstlView</p><p>è‹¥ä½¿ç”¨çš„è§†å›¾æŠ€æœ¯ä¸ºThymeleafï¼Œåœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®äº†Thymeleafçš„è§†å›¾è§£æå™¨ï¼Œç”±æ­¤è§†å›¾è§£æå™¨è§£æä¹‹åæ‰€å¾—åˆ°çš„æ˜¯ThymeleafView</p><h3 id="1ã€ThymeleafView"><a href="#1ã€ThymeleafView" class="headerlink" title="1ã€ThymeleafView"></a>1ã€ThymeleafView</h3><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°æ²¡æœ‰ä»»ä½•å‰ç¼€æ—¶ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¼šè¢«SpringMVCé…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè§†å›¾åç§°æ‹¼æ¥è§†å›¾å‰ç¼€å’Œè§†å›¾åç¼€æ‰€å¾—åˆ°çš„æœ€ç»ˆè·¯å¾„ï¼Œä¼šé€šè¿‡è½¬å‘çš„æ–¹å¼å®ç°è·³è½¬</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testHello")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testHello</span><span class="hljs-params">()</span>{<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"hello"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/img002.png" alt=""></p><h3 id="2ã€è½¬å‘è§†å›¾"><a href="#2ã€è½¬å‘è§†å›¾" class="headerlink" title="2ã€è½¬å‘è§†å›¾"></a>2ã€è½¬å‘è§†å›¾</h3><p>SpringMVCä¸­é»˜è®¤çš„è½¬å‘è§†å›¾æ˜¯InternalResourceView</p><p>SpringMVCä¸­åˆ›å»ºè½¬å‘è§†å›¾çš„æƒ…å†µï¼š</p><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°ä»¥â€forward:â€ä¸ºå‰ç¼€æ—¶ï¼Œåˆ›å»ºInternalResourceViewè§†å›¾ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¸ä¼šè¢«SpringMVCé…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè€Œæ˜¯ä¼šå°†å‰ç¼€â€forward:â€å»æ‰ï¼Œå‰©ä½™éƒ¨åˆ†ä½œä¸ºæœ€ç»ˆè·¯å¾„é€šè¿‡è½¬å‘çš„æ–¹å¼å®ç°è·³è½¬</p><p>ä¾‹å¦‚â€forward:/â€œï¼Œâ€forward:/employeeâ€</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testForward")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testForward</span><span class="hljs-params">()</span>{<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"forward:/testHello"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/img003.png" alt="image-20210706201316593"></p><h3 id="3ã€é‡å®šå‘è§†å›¾"><a href="#3ã€é‡å®šå‘è§†å›¾" class="headerlink" title="3ã€é‡å®šå‘è§†å›¾"></a>3ã€é‡å®šå‘è§†å›¾</h3><p>SpringMVCä¸­é»˜è®¤çš„é‡å®šå‘è§†å›¾æ˜¯RedirectView</p><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°ä»¥â€redirect:â€ä¸ºå‰ç¼€æ—¶ï¼Œåˆ›å»ºRedirectViewè§†å›¾ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¸ä¼šè¢«SpringMVCé…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè€Œæ˜¯ä¼šå°†å‰ç¼€â€redirect:â€å»æ‰ï¼Œå‰©ä½™éƒ¨åˆ†ä½œä¸ºæœ€ç»ˆè·¯å¾„é€šè¿‡é‡å®šå‘çš„æ–¹å¼å®ç°è·³è½¬</p><p>ä¾‹å¦‚â€redirect:/â€œï¼Œâ€redirect:/employeeâ€</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testRedirect")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRedirect</span><span class="hljs-params">()</span>{<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"redirect:/testHello"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/img004.png" alt="image-20210706201602267"></p><blockquote><p>æ³¨ï¼š</p><p>é‡å®šå‘è§†å›¾åœ¨è§£ææ—¶ï¼Œä¼šå…ˆå°†redirect:å‰ç¼€å»æ‰ï¼Œç„¶åä¼šåˆ¤æ–­å‰©ä½™éƒ¨åˆ†æ˜¯å¦ä»¥/å¼€å¤´ï¼Œè‹¥æ˜¯åˆ™ä¼šè‡ªåŠ¨æ‹¼æ¥ä¸Šä¸‹æ–‡è·¯å¾„</p></blockquote><h3 id="4ã€è§†å›¾æ§åˆ¶å™¨view-controller"><a href="#4ã€è§†å›¾æ§åˆ¶å™¨view-controller" class="headerlink" title="4ã€è§†å›¾æ§åˆ¶å™¨view-controller"></a>4ã€è§†å›¾æ§åˆ¶å™¨view-controller</h3><p>å½“æ§åˆ¶å™¨æ–¹æ³•ä¸­ï¼Œä»…ä»…ç”¨æ¥å®ç°é¡µé¢è·³è½¬ï¼Œå³åªéœ€è¦è®¾ç½®è§†å›¾åç§°æ—¶ï¼Œå¯ä»¥å°†å¤„ç†å™¨æ–¹æ³•ä½¿ç”¨view-controlleræ ‡ç­¾è¿›è¡Œè¡¨ç¤º</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">pathï¼šè®¾ç½®å¤„ç†çš„è¯·æ±‚åœ°å€</span><br><span class="hljs-comment">view-nameï¼šè®¾ç½®è¯·æ±‚åœ°å€æ‰€å¯¹åº”çš„è§†å›¾åç§°</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:view-controller</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/testView"</span> <span class="hljs-attr">view-name</span>=<span class="hljs-string">"success"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:view-controller</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ³¨ï¼š</p><p>å½“SpringMVCä¸­è®¾ç½®ä»»ä½•ä¸€ä¸ªview-controlleræ—¶ï¼Œå…¶ä»–æ§åˆ¶å™¨ä¸­çš„è¯·æ±‚æ˜ å°„å°†å…¨éƒ¨å¤±æ•ˆï¼Œæ­¤æ—¶éœ€è¦åœ¨SpringMVCçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¼€å¯mvcæ³¨è§£é©±åŠ¨çš„æ ‡ç­¾ï¼š</p><mvc:annotation-driven></mvc:annotation-driven></blockquote><h1 id="ä¸ƒã€RESTful"><a href="#ä¸ƒã€RESTful" class="headerlink" title="ä¸ƒã€RESTful"></a>ä¸ƒã€RESTful</h1><h3 id="1ã€RESTfulç®€ä»‹"><a href="#1ã€RESTfulç®€ä»‹" class="headerlink" title="1ã€RESTfulç®€ä»‹"></a>1ã€RESTfulç®€ä»‹</h3><p>RESTï¼š<strong>Re</strong>presentational <strong>S</strong>tate <strong>T</strong>ransferï¼Œè¡¨ç°å±‚èµ„æºçŠ¶æ€è½¬ç§»ã€‚</p><h5 id="a-gt-èµ„æº"><a href="#a-gt-èµ„æº" class="headerlink" title="a>èµ„æº"></a>a&gt;èµ„æº</h5><p>èµ„æºæ˜¯ä¸€ç§çœ‹å¾…æœåŠ¡å™¨çš„æ–¹å¼ï¼Œå³ï¼Œå°†æœåŠ¡å™¨çœ‹ä½œæ˜¯ç”±å¾ˆå¤šç¦»æ•£çš„èµ„æºç»„æˆã€‚æ¯ä¸ªèµ„æºæ˜¯æœåŠ¡å™¨ä¸Šä¸€ä¸ªå¯å‘½åçš„æŠ½è±¡æ¦‚å¿µã€‚å› ä¸ºèµ„æºæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œæ‰€ä»¥å®ƒä¸ä»…ä»…èƒ½ä»£è¡¨æœåŠ¡å™¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–‡ä»¶ã€æ•°æ®åº“ä¸­çš„ä¸€å¼ è¡¨ç­‰ç­‰å…·ä½“çš„ä¸œè¥¿ï¼Œå¯ä»¥å°†èµ„æºè®¾è®¡çš„è¦å¤šæŠ½è±¡æœ‰å¤šæŠ½è±¡ï¼Œåªè¦æƒ³è±¡åŠ›å…è®¸è€Œä¸”å®¢æˆ·ç«¯åº”ç”¨å¼€å‘è€…èƒ½å¤Ÿç†è§£ã€‚ä¸é¢å‘å¯¹è±¡è®¾è®¡ç±»ä¼¼ï¼Œèµ„æºæ˜¯ä»¥åè¯ä¸ºæ ¸å¿ƒæ¥ç»„ç»‡çš„ï¼Œé¦–å…ˆå…³æ³¨çš„æ˜¯åè¯ã€‚ä¸€ä¸ªèµ„æºå¯ä»¥ç”±ä¸€ä¸ªæˆ–å¤šä¸ªURIæ¥æ ‡è¯†ã€‚URIæ—¢æ˜¯èµ„æºçš„åç§°ï¼Œä¹Ÿæ˜¯èµ„æºåœ¨Webä¸Šçš„åœ°å€ã€‚å¯¹æŸä¸ªèµ„æºæ„Ÿå…´è¶£çš„å®¢æˆ·ç«¯åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡èµ„æºçš„URIä¸å…¶è¿›è¡Œäº¤äº’ã€‚</p><h5 id="b-gt-èµ„æºçš„è¡¨è¿°"><a href="#b-gt-èµ„æºçš„è¡¨è¿°" class="headerlink" title="b>èµ„æºçš„è¡¨è¿°"></a>b&gt;èµ„æºçš„è¡¨è¿°</h5><p>èµ„æºçš„è¡¨è¿°æ˜¯ä¸€æ®µå¯¹äºèµ„æºåœ¨æŸä¸ªç‰¹å®šæ—¶åˆ»çš„çŠ¶æ€çš„æè¿°ã€‚å¯ä»¥åœ¨å®¢æˆ·ç«¯-æœåŠ¡å™¨ç«¯ä¹‹é—´è½¬ç§»ï¼ˆäº¤æ¢ï¼‰ã€‚èµ„æºçš„è¡¨è¿°å¯ä»¥æœ‰å¤šç§æ ¼å¼ï¼Œä¾‹å¦‚HTML/XML/JSON/çº¯æ–‡æœ¬/å›¾ç‰‡/è§†é¢‘/éŸ³é¢‘ç­‰ç­‰ã€‚èµ„æºçš„è¡¨è¿°æ ¼å¼å¯ä»¥é€šè¿‡åå•†æœºåˆ¶æ¥ç¡®å®šã€‚è¯·æ±‚-å“åº”æ–¹å‘çš„è¡¨è¿°é€šå¸¸ä½¿ç”¨ä¸åŒçš„æ ¼å¼ã€‚</p><h5 id="c-gt-çŠ¶æ€è½¬ç§»"><a href="#c-gt-çŠ¶æ€è½¬ç§»" class="headerlink" title="c>çŠ¶æ€è½¬ç§»"></a>c&gt;çŠ¶æ€è½¬ç§»</h5><p>çŠ¶æ€è½¬ç§»è¯´çš„æ˜¯ï¼šåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´è½¬ç§»ï¼ˆtransferï¼‰ä»£è¡¨èµ„æºçŠ¶æ€çš„è¡¨è¿°ã€‚é€šè¿‡è½¬ç§»å’Œæ“ä½œèµ„æºçš„è¡¨è¿°ï¼Œæ¥é—´æ¥å®ç°æ“ä½œèµ„æºçš„ç›®çš„ã€‚</p><h3 id="2ã€RESTfulçš„å®ç°"><a href="#2ã€RESTfulçš„å®ç°" class="headerlink" title="2ã€RESTfulçš„å®ç°"></a>2ã€RESTfulçš„å®ç°</h3><p>å…·ä½“è¯´ï¼Œå°±æ˜¯ HTTP åè®®é‡Œé¢ï¼Œå››ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯ï¼šGETã€POSTã€PUTã€DELETEã€‚</p><p>å®ƒä»¬åˆ†åˆ«å¯¹åº”å››ç§åŸºæœ¬æ“ä½œï¼šGET ç”¨æ¥è·å–èµ„æºï¼ŒPOST ç”¨æ¥æ–°å»ºèµ„æºï¼ŒPUT ç”¨æ¥æ›´æ–°èµ„æºï¼ŒDELETE ç”¨æ¥åˆ é™¤èµ„æºã€‚</p><p>REST é£æ ¼æå€¡ URL åœ°å€ä½¿ç”¨ç»Ÿä¸€çš„é£æ ¼è®¾è®¡ï¼Œä»å‰åˆ°åå„ä¸ªå•è¯ä½¿ç”¨æ–œæ åˆ†å¼€ï¼Œä¸ä½¿ç”¨é—®å·é”®å€¼å¯¹æ–¹å¼æºå¸¦è¯·æ±‚å‚æ•°ï¼Œè€Œæ˜¯å°†è¦å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®ä½œä¸º URL åœ°å€çš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¿è¯æ•´ä½“é£æ ¼çš„ä¸€è‡´æ€§ã€‚</p><div class="table-container"><table><thead><tr><th>æ“ä½œ</th><th>ä¼ ç»Ÿæ–¹å¼</th><th>RESTé£æ ¼</th></tr></thead><tbody><tr><td>æŸ¥è¯¢æ“ä½œ</td><td>getUserById?id=1</td><td>user/1â€”&gt;getè¯·æ±‚æ–¹å¼</td></tr><tr><td>ä¿å­˜æ“ä½œ</td><td>saveUser</td><td>userâ€”&gt;postè¯·æ±‚æ–¹å¼</td></tr><tr><td>åˆ é™¤æ“ä½œ</td><td>deleteUser?id=1</td><td>user/1â€”&gt;deleteè¯·æ±‚æ–¹å¼</td></tr><tr><td>æ›´æ–°æ“ä½œ</td><td>updateUser</td><td>userâ€”&gt;putè¯·æ±‚æ–¹å¼</td></tr></tbody></table></div><h3 id="3ã€HiddenHttpMethodFilter"><a href="#3ã€HiddenHttpMethodFilter" class="headerlink" title="3ã€HiddenHttpMethodFilter"></a>3ã€HiddenHttpMethodFilter</h3><p>ç”±äºæµè§ˆå™¨åªæ”¯æŒå‘é€getå’Œpostæ–¹å¼çš„è¯·æ±‚ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•å‘é€putå’Œdeleteè¯·æ±‚å‘¢ï¼Ÿ</p><p>SpringMVC æä¾›äº† <strong>HiddenHttpMethodFilter</strong> å¸®åŠ©æˆ‘ä»¬<strong>å°† POST è¯·æ±‚è½¬æ¢ä¸º DELETE æˆ– PUT è¯·æ±‚</strong></p><p><strong>HiddenHttpMethodFilter</strong> å¤„ç†putå’Œdeleteè¯·æ±‚çš„æ¡ä»¶ï¼š</p><p>a&gt;å½“å‰è¯·æ±‚çš„è¯·æ±‚æ–¹å¼å¿…é¡»ä¸ºpost</p><p>b&gt;å½“å‰è¯·æ±‚å¿…é¡»ä¼ è¾“è¯·æ±‚å‚æ•°_method</p><p>æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œ<strong>HiddenHttpMethodFilter</strong> è¿‡æ»¤å™¨å°±ä¼šå°†å½“å‰è¯·æ±‚çš„è¯·æ±‚æ–¹å¼è½¬æ¢ä¸ºè¯·æ±‚å‚æ•°_methodçš„å€¼ï¼Œå› æ­¤è¯·æ±‚å‚æ•°_methodçš„å€¼æ‰æ˜¯æœ€ç»ˆçš„è¯·æ±‚æ–¹å¼</p><p>åœ¨web.xmlä¸­æ³¨å†Œ<strong>HiddenHttpMethodFilter</strong> </p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>org.springframework.web.filter.HiddenHttpMethodFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>HiddenHttpMethodFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>æ³¨ï¼š</p><p>ç›®å‰ä¸ºæ­¢ï¼ŒSpringMVCä¸­æä¾›äº†ä¸¤ä¸ªè¿‡æ»¤å™¨ï¼šCharacterEncodingFilterå’ŒHiddenHttpMethodFilter</p><p>åœ¨web.xmlä¸­æ³¨å†Œæ—¶ï¼Œå¿…é¡»å…ˆæ³¨å†ŒCharacterEncodingFilterï¼Œå†æ³¨å†ŒHiddenHttpMethodFilter</p><p>åŸå› ï¼š</p><ul><li><p>åœ¨ CharacterEncodingFilter ä¸­é€šè¿‡ request.setCharacterEncoding(encoding) æ–¹æ³•è®¾ç½®å­—ç¬¦é›†çš„</p></li><li><p>request.setCharacterEncoding(encoding) æ–¹æ³•è¦æ±‚å‰é¢ä¸èƒ½æœ‰ä»»ä½•è·å–è¯·æ±‚å‚æ•°çš„æ“ä½œ</p></li><li><p>è€Œ HiddenHttpMethodFilter æ°æ°æœ‰ä¸€ä¸ªè·å–è¯·æ±‚æ–¹å¼çš„æ“ä½œï¼š</p></li><li><p>```<br>String paramValue = request.getParameter(this.methodParam);</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"><br><br><br># å…«ã€RESTfulæ¡ˆä¾‹<br><br>### 1ã€å‡†å¤‡å·¥ä½œ<br><br>å’Œä¼ ç»Ÿ CRUD ä¸€æ ·ï¼Œå®ç°å¯¹å‘˜å·¥ä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥ã€‚<br><br>- æ­å»ºç¯å¢ƒ<br><br>- å‡†å¤‡å®ä½“ç±»<br><br> ```java<br> package com.atguigu.mvc.bean;<br> <br> public class Employee {<br> <br>    private Integer id;<br>    private String lastName;<br> <br>    private String email;<br>    //1 male, 0 female<br>    private Integer gender;<br>    <br>    public Integer getId() {<br>       return id;<br>    }<br> <br>    public void setId(Integer id) {<br>       this.id = id;<br>    }<br> <br>    public String getLastName() {<br>       return lastName;<br>    }<br> <br>    public void setLastName(String lastName) {<br>       this.lastName = lastName;<br>    }<br> <br>    public String getEmail() {<br>       return email;<br>    }<br> <br>    public void setEmail(String email) {<br>       this.email = email;<br>    }<br> <br>    public Integer getGender() {<br>       return gender;<br>    }<br> <br>    public void setGender(Integer gender) {<br>       this.gender = gender;<br>    }<br> <br>    public Employee(Integer id, String lastName, String email, Integer gender) {<br>       super();<br>       this.id = id;<br>       this.lastName = lastName;<br>       this.email = email;<br>       this.gender = gender;<br>    }<br> <br>    public Employee() {<br>    }<br> }<br></code></pre></td></tr></tbody></table></figure></li></ul></blockquote><ul><li><p>å‡†å¤‡daoæ¨¡æ‹Ÿæ•°æ®</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.mvc.dao;<br><br><span class="hljs-keyword">import</span> java.util.Collection;<br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-keyword">import</span> com.atguigu.mvc.bean.Employee;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Repository;<br><br><br><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmployeeDao</span> {<br><br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;Integer, Employee&gt; employees = <span class="hljs-literal">null</span>;<br>   <br>   <span class="hljs-keyword">static</span>{<br>      employees = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;Integer, Employee&gt;();<br><br>      employees.put(<span class="hljs-number">1001</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1001</span>, <span class="hljs-string">"E-AA"</span>, <span class="hljs-string">"aa@163.com"</span>, <span class="hljs-number">1</span>));<br>      employees.put(<span class="hljs-number">1002</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1002</span>, <span class="hljs-string">"E-BB"</span>, <span class="hljs-string">"bb@163.com"</span>, <span class="hljs-number">1</span>));<br>      employees.put(<span class="hljs-number">1003</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1003</span>, <span class="hljs-string">"E-CC"</span>, <span class="hljs-string">"cc@163.com"</span>, <span class="hljs-number">0</span>));<br>      employees.put(<span class="hljs-number">1004</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1004</span>, <span class="hljs-string">"E-DD"</span>, <span class="hljs-string">"dd@163.com"</span>, <span class="hljs-number">0</span>));<br>      employees.put(<span class="hljs-number">1005</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-number">1005</span>, <span class="hljs-string">"E-EE"</span>, <span class="hljs-string">"ee@163.com"</span>, <span class="hljs-number">1</span>));<br>   }<br>   <br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">initId</span> <span class="hljs-operator">=</span> <span class="hljs-number">1006</span>;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(Employee employee)</span>{<br>      <span class="hljs-keyword">if</span>(employee.getId() == <span class="hljs-literal">null</span>){<br>         employee.setId(initId++);<br>      }<br>      employees.put(employee.getId(), employee);<br>   }<br>   <br>   <span class="hljs-keyword">public</span> Collection&lt;Employee&gt; <span class="hljs-title function_">getAll</span><span class="hljs-params">()</span>{<br>      <span class="hljs-keyword">return</span> employees.values();<br>   }<br>   <br>   <span class="hljs-keyword">public</span> Employee <span class="hljs-title function_">get</span><span class="hljs-params">(Integer id)</span>{<br>      <span class="hljs-keyword">return</span> employees.get(id);<br>   }<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">delete</span><span class="hljs-params">(Integer id)</span>{<br>      employees.remove(id);<br>   }<br>}<br></code></pre></td></tr></tbody></table></figure></li></ul><h3 id="2ã€åŠŸèƒ½æ¸…å•"><a href="#2ã€åŠŸèƒ½æ¸…å•" class="headerlink" title="2ã€åŠŸèƒ½æ¸…å•"></a>2ã€åŠŸèƒ½æ¸…å•</h3><div class="table-container"><table><thead><tr><th>åŠŸèƒ½</th><th>URL åœ°å€</th><th>è¯·æ±‚æ–¹å¼</th></tr></thead><tbody><tr><td>è®¿é—®é¦–é¡µâˆš</td><td>/</td><td>GET</td></tr><tr><td>æŸ¥è¯¢å…¨éƒ¨æ•°æ®âˆš</td><td>/employee</td><td>GET</td></tr><tr><td>åˆ é™¤âˆš</td><td>/employee/2</td><td>DELETE</td></tr><tr><td>è·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢âˆš</td><td>/toAdd</td><td>GET</td></tr><tr><td>æ‰§è¡Œä¿å­˜âˆš</td><td>/employee</td><td>POST</td></tr><tr><td>è·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢âˆš</td><td>/employee/2</td><td>GET</td></tr><tr><td>æ‰§è¡Œæ›´æ–°âˆš</td><td>/employee</td><td>PUT</td></tr></tbody></table></div><h3 id="3ã€å…·ä½“åŠŸèƒ½ï¼šè®¿é—®é¦–é¡µ"><a href="#3ã€å…·ä½“åŠŸèƒ½ï¼šè®¿é—®é¦–é¡µ" class="headerlink" title="3ã€å…·ä½“åŠŸèƒ½ï¼šè®¿é—®é¦–é¡µ"></a>3ã€å…·ä½“åŠŸèƒ½ï¼šè®¿é—®é¦–é¡µ</h3><h5 id="a-gt-é…ç½®view-controller"><a href="#a-gt-é…ç½®view-controller" class="headerlink" title="a>é…ç½®view-controller"></a>a&gt;é…ç½®view-controller</h5><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mvc:view-controller</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/"</span> <span class="hljs-attr">view-name</span>=<span class="hljs-string">"index"</span>/&gt;</span><br></code></pre></td></tr></tbody></table></figure><h5 id="b-gt-åˆ›å»ºé¡µé¢"><a href="#b-gt-åˆ›å»ºé¡µé¢" class="headerlink" title="b>åˆ›å»ºé¡µé¢"></a>b&gt;åˆ›å»ºé¡µé¢</h5><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> &gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/employee}"</span>&gt;</span>è®¿é—®å‘˜å·¥ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h3 id="4ã€å…·ä½“åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®"><a href="#4ã€å…·ä½“åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®" class="headerlink" title="4ã€å…·ä½“åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®"></a>4ã€å…·ä½“åŠŸèƒ½ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥æ•°æ®</h3><h5 id="a-gt-æ§åˆ¶å™¨æ–¹æ³•"><a href="#a-gt-æ§åˆ¶å™¨æ–¹æ³•" class="headerlink" title="a>æ§åˆ¶å™¨æ–¹æ³•"></a>a&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = "/employee", method = RequestMethod.GET)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getEmployeeList</span><span class="hljs-params">(Model model)</span>{<br>    Collection&lt;Employee&gt; employeeList = employeeDao.getAll();<br>    model.addAttribute(<span class="hljs-string">"employeeList"</span>, employeeList);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"employee_list"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h5 id="b-gt-åˆ›å»ºemployee-list-html"><a href="#b-gt-åˆ›å»ºemployee-list-html" class="headerlink" title="b>åˆ›å»ºemployee_list.html"></a>b&gt;åˆ›å»ºemployee_list.html</h5><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Employee Info<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/static/js/vue.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">border</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">cellpadding</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">cellspacing</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"text-align: center;"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dataTable"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">"5"</span>&gt;</span>Employee Info<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>id<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>lastName<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>email<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>gender<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>options(<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/toAdd}"</span>&gt;</span>add<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>)<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">"employee : ${employeeList}"</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${employee.id}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${employee.lastName}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${employee.email}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">"${employee.gender}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"deleteA"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"deleteEmployee"</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{'/employee/'+${employee.id}}"</span>&gt;</span>delete<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{'/employee/'+${employee.id}}"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h3 id="5ã€å…·ä½“åŠŸèƒ½ï¼šåˆ é™¤"><a href="#5ã€å…·ä½“åŠŸèƒ½ï¼šåˆ é™¤" class="headerlink" title="5ã€å…·ä½“åŠŸèƒ½ï¼šåˆ é™¤"></a>5ã€å…·ä½“åŠŸèƒ½ï¼šåˆ é™¤</h3><h5 id="a-gt-åˆ›å»ºå¤„ç†deleteè¯·æ±‚æ–¹å¼çš„è¡¨å•"><a href="#a-gt-åˆ›å»ºå¤„ç†deleteè¯·æ±‚æ–¹å¼çš„è¡¨å•" class="headerlink" title="a>åˆ›å»ºå¤„ç†deleteè¯·æ±‚æ–¹å¼çš„è¡¨å•"></a>a&gt;åˆ›å»ºå¤„ç†deleteè¯·æ±‚æ–¹å¼çš„è¡¨å•</h5><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- ä½œç”¨ï¼šé€šè¿‡è¶…é“¾æ¥æ§åˆ¶è¡¨å•çš„æäº¤ï¼Œå°†postè¯·æ±‚è½¬æ¢ä¸ºdeleteè¯·æ±‚ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"delete_form"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- HiddenHttpMethodFilterè¦æ±‚ï¼šå¿…é¡»ä¼ è¾“_methodè¯·æ±‚å‚æ•°ï¼Œå¹¶ä¸”å€¼ä¸ºæœ€ç»ˆçš„è¯·æ±‚æ–¹å¼ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"_method"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"delete"</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h5 id="b-gt-åˆ é™¤è¶…é“¾æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶"><a href="#b-gt-åˆ é™¤è¶…é“¾æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶" class="headerlink" title="b>åˆ é™¤è¶…é“¾æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶"></a>b&gt;åˆ é™¤è¶…é“¾æ¥ç»‘å®šç‚¹å‡»äº‹ä»¶</h5><p>å¼•å…¥vue.js</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/static/js/vue.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>åˆ é™¤è¶…é“¾æ¥</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"deleteA"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"deleteEmployee"</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{'/employee/'+${employee.id}}"</span>&gt;</span>delete<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>é€šè¿‡vueå¤„ç†ç‚¹å‡»äº‹ä»¶</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> vue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">"#dataTable"</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>:{</span><br><span class="language-javascript">            <span class="hljs-comment">//eventè¡¨ç¤ºå½“å‰äº‹ä»¶</span></span><br><span class="language-javascript">            <span class="hljs-attr">deleteEmployee</span>:<span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {</span><br><span class="language-javascript">                <span class="hljs-comment">//é€šè¿‡idè·å–è¡¨å•æ ‡ç­¾</span></span><br><span class="language-javascript">                <span class="hljs-keyword">var</span> delete_form = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"delete_form"</span>);</span><br><span class="language-javascript">                <span class="hljs-comment">//å°†è§¦å‘äº‹ä»¶çš„è¶…é“¾æ¥çš„hrefå±æ€§ä¸ºè¡¨å•çš„actionå±æ€§èµ‹å€¼</span></span><br><span class="language-javascript">                delete_form.<span class="hljs-property">action</span> = event.<span class="hljs-property">target</span>.<span class="hljs-property">href</span>;</span><br><span class="language-javascript">                <span class="hljs-comment">//æäº¤è¡¨å•</span></span><br><span class="language-javascript">                delete_form.<span class="hljs-title function_">submit</span>();</span><br><span class="language-javascript">                <span class="hljs-comment">//é˜»æ­¢è¶…é“¾æ¥çš„é»˜è®¤è·³è½¬è¡Œä¸º</span></span><br><span class="language-javascript">                event.<span class="hljs-title function_">preventDefault</span>();</span><br><span class="language-javascript">            }</span><br><span class="language-javascript">        }</span><br><span class="language-javascript">    });</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h5 id="c-gt-æ§åˆ¶å™¨æ–¹æ³•"><a href="#c-gt-æ§åˆ¶å™¨æ–¹æ³•" class="headerlink" title="c>æ§åˆ¶å™¨æ–¹æ³•"></a>c&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = "/employee/{id}", method = RequestMethod.DELETE)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">deleteEmployee</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable("id")</span> Integer id)</span>{<br>    employeeDao.delete(id);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"redirect:/employee"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="6ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢"><a href="#6ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢" class="headerlink" title="6ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢"></a>6ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢</h3><h5 id="a-gt-é…ç½®view-controller-1"><a href="#a-gt-é…ç½®view-controller-1" class="headerlink" title="a>é…ç½®view-controller"></a>a&gt;é…ç½®view-controller</h5><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mvc:view-controller</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/toAdd"</span> <span class="hljs-attr">view-name</span>=<span class="hljs-string">"employee_add"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:view-controller</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h5 id="b-gt-åˆ›å»ºemployee-add-html"><a href="#b-gt-åˆ›å»ºemployee-add-html" class="headerlink" title="b>åˆ›å»ºemployee_add.html"></a>b&gt;åˆ›å»ºemployee_add.html</h5><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Add Employee<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">"@{/employee}"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span><br>    lastName:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"lastName"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    email:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    gender:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"gender"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>&gt;</span>male<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"gender"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0"</span>&gt;</span>female<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"add"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h3 id="7ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œä¿å­˜"><a href="#7ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œä¿å­˜" class="headerlink" title="7ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œä¿å­˜"></a>7ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œä¿å­˜</h3><h5 id="a-gt-æ§åˆ¶å™¨æ–¹æ³•-1"><a href="#a-gt-æ§åˆ¶å™¨æ–¹æ³•-1" class="headerlink" title="a>æ§åˆ¶å™¨æ–¹æ³•"></a>a&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = "/employee", method = RequestMethod.POST)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">addEmployee</span><span class="hljs-params">(Employee employee)</span>{<br>    employeeDao.save(employee);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"redirect:/employee"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="8ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢"><a href="#8ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢" class="headerlink" title="8ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢"></a>8ã€å…·ä½“åŠŸèƒ½ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢</h3><h5 id="a-gt-ä¿®æ”¹è¶…é“¾æ¥"><a href="#a-gt-ä¿®æ”¹è¶…é“¾æ¥" class="headerlink" title="a>ä¿®æ”¹è¶…é“¾æ¥"></a>a&gt;ä¿®æ”¹è¶…é“¾æ¥</h5><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{'/employee/'+${employee.id}}"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h5 id="b-gt-æ§åˆ¶å™¨æ–¹æ³•"><a href="#b-gt-æ§åˆ¶å™¨æ–¹æ³•" class="headerlink" title="b>æ§åˆ¶å™¨æ–¹æ³•"></a>b&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = "/employee/{id}", method = RequestMethod.GET)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getEmployeeById</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable("id")</span> Integer id, Model model)</span>{<br>    <span class="hljs-type">Employee</span> <span class="hljs-variable">employee</span> <span class="hljs-operator">=</span> employeeDao.get(id);<br>    model.addAttribute(<span class="hljs-string">"employee"</span>, employee);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"employee_update"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h5 id="c-gt-åˆ›å»ºemployee-update-html"><a href="#c-gt-åˆ›å»ºemployee-update-html" class="headerlink" title="c>åˆ›å»ºemployee_update.html"></a>c&gt;åˆ›å»ºemployee_update.html</h5><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">"http://www.thymeleaf.org"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Update Employee<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">"@{/employee}"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"_method"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"put"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">"${employee.id}"</span>&gt;</span><br>    lastName:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"lastName"</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">"${employee.lastName}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    email:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">th:value</span>=<span class="hljs-string">"${employee.email}"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        th:field="${employee.gender}"å¯ç”¨äºå•é€‰æ¡†æˆ–å¤é€‰æ¡†çš„å›æ˜¾</span><br><span class="hljs-comment">        è‹¥å•é€‰æ¡†çš„valueå’Œemployee.genderçš„å€¼ä¸€è‡´ï¼Œåˆ™æ·»åŠ checked="checked"å±æ€§</span><br><span class="hljs-comment">    --&gt;</span><br>    gender:<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"gender"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">th:field</span>=<span class="hljs-string">"${employee.gender}"</span>&gt;</span>male<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"gender"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">th:field</span>=<span class="hljs-string">"${employee.gender}"</span>&gt;</span>female<span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"update"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h3 id="9ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œæ›´æ–°"><a href="#9ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œæ›´æ–°" class="headerlink" title="9ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œæ›´æ–°"></a>9ã€å…·ä½“åŠŸèƒ½ï¼šæ‰§è¡Œæ›´æ–°</h3><h5 id="a-gt-æ§åˆ¶å™¨æ–¹æ³•-2"><a href="#a-gt-æ§åˆ¶å™¨æ–¹æ³•-2" class="headerlink" title="a>æ§åˆ¶å™¨æ–¹æ³•"></a>a&gt;æ§åˆ¶å™¨æ–¹æ³•</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(value = "/employee", method = RequestMethod.PUT)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">updateEmployee</span><span class="hljs-params">(Employee employee)</span>{<br>    employeeDao.save(employee);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"redirect:/employee"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h1 id="å…«ã€HttpMessageConverter"><a href="#å…«ã€HttpMessageConverter" class="headerlink" title="å…«ã€HttpMessageConverter"></a>å…«ã€HttpMessageConverter</h1><p>HttpMessageConverterï¼ŒæŠ¥æ–‡ä¿¡æ¯è½¬æ¢å™¨ï¼Œå°†è¯·æ±‚æŠ¥æ–‡è½¬æ¢ä¸ºJavaå¯¹è±¡ï¼Œæˆ–å°†Javaå¯¹è±¡è½¬æ¢ä¸ºå“åº”æŠ¥æ–‡</p><p>HttpMessageConverteræä¾›äº†ä¸¤ä¸ªæ³¨è§£å’Œä¸¤ä¸ªç±»å‹ï¼š@RequestBodyï¼Œ@ResponseBodyï¼ŒRequestEntityï¼Œ</p><p>ResponseEntity</p><h3 id="1ã€-RequestBody"><a href="#1ã€-RequestBody" class="headerlink" title="1ã€@RequestBody"></a>1ã€@RequestBody</h3><p>@RequestBodyå¯ä»¥è·å–è¯·æ±‚ä½“ï¼Œéœ€è¦åœ¨æ§åˆ¶å™¨æ–¹æ³•è®¾ç½®ä¸€ä¸ªå½¢å‚ï¼Œä½¿ç”¨@RequestBodyè¿›è¡Œæ ‡è¯†ï¼Œå½“å‰è¯·æ±‚çš„è¯·æ±‚ä½“å°±ä¼šä¸ºå½“å‰æ³¨è§£æ‰€æ ‡è¯†çš„å½¢å‚èµ‹å€¼</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">"@{/testRequestBody}"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span><br>    ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    å¯†ç ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testRequestBody")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRequestBody</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> String requestBody)</span>{<br>    System.out.println(<span class="hljs-string">"requestBody:"</span>+requestBody);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><p>è¾“å‡ºç»“æœï¼š</p><p>requestBody:username=admin&amp;password=123456</p><h3 id="2ã€RequestEntity"><a href="#2ã€RequestEntity" class="headerlink" title="2ã€RequestEntity"></a>2ã€RequestEntity</h3><p>RequestEntityå°è£…è¯·æ±‚æŠ¥æ–‡çš„ä¸€ç§ç±»å‹ï¼Œéœ€è¦åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä¸­è®¾ç½®è¯¥ç±»å‹çš„å½¢å‚ï¼Œå½“å‰è¯·æ±‚çš„è¯·æ±‚æŠ¥æ–‡å°±ä¼šèµ‹å€¼ç»™è¯¥å½¢å‚ï¼Œå¯ä»¥é€šè¿‡getHeaders()è·å–è¯·æ±‚å¤´ä¿¡æ¯ï¼Œé€šè¿‡getBody()è·å–è¯·æ±‚ä½“ä¿¡æ¯</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testRequestEntity")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testRequestEntity</span><span class="hljs-params">(RequestEntity&lt;String&gt; requestEntity)</span>{<br>    System.out.println(<span class="hljs-string">"requestHeader:"</span>+requestEntity.getHeaders());<br>    System.out.println(<span class="hljs-string">"requestBody:"</span>+requestEntity.getBody());<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><p>è¾“å‡ºç»“æœï¼š<br>requestHeader:[host:â€localhost:8080â€, connection:â€keep-aliveâ€, content-length:â€27â€, cache-control:â€max-age=0â€, sec-ch-ua:â€â€ Not A;Brandâ€;v=â€99â€, â€œChromiumâ€;v=â€90â€, â€œGoogle Chromeâ€;v=â€90â€â€, sec-ch-ua-mobile:â€?0â€, upgrade-insecure-requests:â€1â€, origin:â€<a href="http://localhost:8080">http://localhost:8080</a>â€œ, user-agent:â€Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36â€]<br>requestBody:username=admin&amp;password=123</p><h3 id="3ã€-ResponseBody"><a href="#3ã€-ResponseBody" class="headerlink" title="3ã€@ResponseBody"></a>3ã€@ResponseBody</h3><p>@ResponseBodyç”¨äºæ ‡è¯†ä¸€ä¸ªæ§åˆ¶å™¨æ–¹æ³•ï¼Œå¯ä»¥å°†è¯¥æ–¹æ³•çš„è¿”å›å€¼ç›´æ¥ä½œä¸ºå“åº”æŠ¥æ–‡çš„å“åº”ä½“å“åº”åˆ°æµè§ˆå™¨</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testResponseBody")</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testResponseBody</span><span class="hljs-params">()</span>{<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><p>ç»“æœï¼šæµè§ˆå™¨é¡µé¢æ˜¾ç¤ºsuccess</p><h3 id="4ã€SpringMVCå¤„ç†json"><a href="#4ã€SpringMVCå¤„ç†json" class="headerlink" title="4ã€SpringMVCå¤„ç†json"></a>4ã€SpringMVCå¤„ç†json</h3><p>@ResponseBodyå¤„ç†jsonçš„æ­¥éª¤ï¼š</p><p>a&gt;å¯¼å…¥jacksonçš„ä¾èµ–</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.12.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>b&gt;åœ¨SpringMVCçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨ï¼Œæ­¤æ—¶åœ¨HandlerAdaptorä¸­ä¼šè‡ªåŠ¨è£…é…ä¸€ä¸ªæ¶ˆæ¯è½¬æ¢å™¨ï¼šMappingJackson2HttpMessageConverterï¼Œå¯ä»¥å°†å“åº”åˆ°æµè§ˆå™¨çš„Javaå¯¹è±¡è½¬æ¢ä¸ºJsonæ ¼å¼çš„å­—ç¬¦ä¸²</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&lt;mvc:annotation-driven /&gt;<br></code></pre></td></tr></tbody></table></figure><p>c&gt;åœ¨å¤„ç†å™¨æ–¹æ³•ä¸Šä½¿ç”¨@ResponseBodyæ³¨è§£è¿›è¡Œæ ‡è¯†</p><p>d&gt;å°†Javaå¯¹è±¡ç›´æ¥ä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼è¿”å›ï¼Œå°±ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºJsonæ ¼å¼çš„å­—ç¬¦ä¸²</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testResponseUser")</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-keyword">public</span> User <span class="hljs-title function_">testResponseUser</span><span class="hljs-params">()</span>{<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1001</span>,<span class="hljs-string">"admin"</span>,<span class="hljs-string">"123456"</span>,<span class="hljs-number">23</span>,<span class="hljs-string">"ç”·"</span>);<br>}<br></code></pre></td></tr></tbody></table></figure><p>æµè§ˆå™¨çš„é¡µé¢ä¸­å±•ç¤ºçš„ç»“æœï¼š</p><p>{â€œidâ€:1001,â€usernameâ€:â€adminâ€,â€passwordâ€:â€123456â€,â€ageâ€:23,â€sexâ€:â€ç”·â€}</p><h3 id="5ã€SpringMVCå¤„ç†ajax"><a href="#5ã€SpringMVCå¤„ç†ajax" class="headerlink" title="5ã€SpringMVCå¤„ç†ajax"></a>5ã€SpringMVCå¤„ç†ajax</h3><p>a&gt;è¯·æ±‚è¶…é“¾æ¥ï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">"@{/testAjax}"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"testAjax"</span>&gt;</span>testAjax<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>b&gt;é€šè¿‡vueå’Œaxioså¤„ç†ç‚¹å‡»äº‹ä»¶ï¼š</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/static/js/vue.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">"@{/static/js/axios.min.js}"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> vue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">"#app"</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>:{</span><br><span class="language-javascript">            <span class="hljs-attr">testAjax</span>:<span class="hljs-keyword">function</span> (<span class="hljs-params">event</span>) {</span><br><span class="language-javascript">                <span class="hljs-title function_">axios</span>({</span><br><span class="language-javascript">                    <span class="hljs-attr">method</span>:<span class="hljs-string">"post"</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">url</span>:event.<span class="hljs-property">target</span>.<span class="hljs-property">href</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">params</span>:{</span><br><span class="language-javascript">                        <span class="hljs-attr">username</span>:<span class="hljs-string">"admin"</span>,</span><br><span class="language-javascript">                        <span class="hljs-attr">password</span>:<span class="hljs-string">"123456"</span></span><br><span class="language-javascript">                    }</span><br><span class="language-javascript">                }).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) {</span><br><span class="language-javascript">                    <span class="hljs-title function_">alert</span>(response.<span class="hljs-property">data</span>);</span><br><span class="language-javascript">                });</span><br><span class="language-javascript">                event.<span class="hljs-title function_">preventDefault</span>();</span><br><span class="language-javascript">            }</span><br><span class="language-javascript">        }</span><br><span class="language-javascript">    });</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>c&gt;æ§åˆ¶å™¨æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testAjax")</span><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testAjax</span><span class="hljs-params">(String username, String password)</span>{<br>    System.out.println(<span class="hljs-string">"username:"</span>+username+<span class="hljs-string">",password:"</span>+password);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"hello,ajax"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="6ã€-RestControlleræ³¨è§£"><a href="#6ã€-RestControlleræ³¨è§£" class="headerlink" title="6ã€@RestControlleræ³¨è§£"></a>6ã€@RestControlleræ³¨è§£</h3><p>@RestControlleræ³¨è§£æ˜¯springMVCæä¾›çš„ä¸€ä¸ªå¤åˆæ³¨è§£ï¼Œæ ‡è¯†åœ¨æ§åˆ¶å™¨çš„ç±»ä¸Šï¼Œå°±ç›¸å½“äºä¸ºç±»æ·»åŠ äº†@Controlleræ³¨è§£ï¼Œå¹¶ä¸”ä¸ºå…¶ä¸­çš„æ¯ä¸ªæ–¹æ³•æ·»åŠ äº†@ResponseBodyæ³¨è§£</p><h3 id="7ã€ResponseEntity"><a href="#7ã€ResponseEntity" class="headerlink" title="7ã€ResponseEntity"></a>7ã€ResponseEntity</h3><p>ResponseEntityç”¨äºæ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œè¯¥æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯å“åº”åˆ°æµè§ˆå™¨çš„å“åº”æŠ¥æ–‡</p><h1 id="ä¹ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"><a href="#ä¹ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="ä¹ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"></a>ä¹ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½</h1><h3 id="1ã€æ–‡ä»¶ä¸‹è½½"><a href="#1ã€æ–‡ä»¶ä¸‹è½½" class="headerlink" title="1ã€æ–‡ä»¶ä¸‹è½½"></a>1ã€æ–‡ä»¶ä¸‹è½½</h3><p>ä½¿ç”¨ResponseEntityå®ç°ä¸‹è½½æ–‡ä»¶çš„åŠŸèƒ½</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testDown")</span><br><span class="hljs-keyword">public</span> ResponseEntity&lt;<span class="hljs-type">byte</span>[]&gt; testResponseEntity(HttpSession session) <span class="hljs-keyword">throws</span> IOException {<br>    <span class="hljs-comment">//è·å–ServletContextå¯¹è±¡</span><br>    <span class="hljs-type">ServletContext</span> <span class="hljs-variable">servletContext</span> <span class="hljs-operator">=</span> session.getServletContext();<br>    <span class="hljs-comment">//è·å–æœåŠ¡å™¨ä¸­æ–‡ä»¶çš„çœŸå®è·¯å¾„</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">realPath</span> <span class="hljs-operator">=</span> servletContext.getRealPath(<span class="hljs-string">"/static/img/1.jpg"</span>);<br>    <span class="hljs-comment">//åˆ›å»ºè¾“å…¥æµ</span><br>    <span class="hljs-type">InputStream</span> <span class="hljs-variable">is</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(realPath);<br>    <span class="hljs-comment">//åˆ›å»ºå­—èŠ‚æ•°ç»„</span><br>    <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[is.available()];<br>    <span class="hljs-comment">//å°†æµè¯»åˆ°å­—èŠ‚æ•°ç»„ä¸­</span><br>    is.read(bytes);<br>    <span class="hljs-comment">//åˆ›å»ºHttpHeaderså¯¹è±¡è®¾ç½®å“åº”å¤´ä¿¡æ¯</span><br>    MultiValueMap&lt;String, String&gt; headers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeaders</span>();<br>    <span class="hljs-comment">//è®¾ç½®è¦ä¸‹è½½æ–¹å¼ä»¥åŠä¸‹è½½æ–‡ä»¶çš„åå­—</span><br>    headers.add(<span class="hljs-string">"Content-Disposition"</span>, <span class="hljs-string">"attachment;filename=1.jpg"</span>);<br>    <span class="hljs-comment">//è®¾ç½®å“åº”çŠ¶æ€ç </span><br>    <span class="hljs-type">HttpStatus</span> <span class="hljs-variable">statusCode</span> <span class="hljs-operator">=</span> HttpStatus.OK;<br>    <span class="hljs-comment">//åˆ›å»ºResponseEntityå¯¹è±¡</span><br>    ResponseEntity&lt;<span class="hljs-type">byte</span>[]&gt; responseEntity = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResponseEntity</span>&lt;&gt;(bytes, headers, statusCode);<br>    <span class="hljs-comment">//å…³é—­è¾“å…¥æµ</span><br>    is.close();<br>    <span class="hljs-keyword">return</span> responseEntity;<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="2ã€æ–‡ä»¶ä¸Šä¼ "><a href="#2ã€æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="2ã€æ–‡ä»¶ä¸Šä¼ "></a>2ã€æ–‡ä»¶ä¸Šä¼ </h3><p>æ–‡ä»¶ä¸Šä¼ è¦æ±‚formè¡¨å•çš„è¯·æ±‚æ–¹å¼å¿…é¡»ä¸ºpostï¼Œå¹¶ä¸”æ·»åŠ å±æ€§enctype=â€multipart/form-dataâ€</p><p>SpringMVCä¸­å°†ä¸Šä¼ çš„æ–‡ä»¶å°è£…åˆ°MultipartFileå¯¹è±¡ä¸­ï¼Œé€šè¿‡æ­¤å¯¹è±¡å¯ä»¥è·å–æ–‡ä»¶ç›¸å…³ä¿¡æ¯</p><p>ä¸Šä¼ æ­¥éª¤ï¼š</p><p>a&gt;æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>commons-fileupload<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>commons-fileupload<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>b&gt;åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¿…é¡»é€šè¿‡æ–‡ä»¶è§£æå™¨çš„è§£ææ‰èƒ½å°†æ–‡ä»¶è½¬æ¢ä¸ºMultipartFileå¯¹è±¡--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"multipartResolver"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>c&gt;æ§åˆ¶å™¨æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/testUp")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testUp</span><span class="hljs-params">(MultipartFile photo, HttpSession session)</span> <span class="hljs-keyword">throws</span> IOException {<br>    <span class="hljs-comment">//è·å–ä¸Šä¼ çš„æ–‡ä»¶çš„æ–‡ä»¶å</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> photo.getOriginalFilename();<br>    <span class="hljs-comment">//å¤„ç†æ–‡ä»¶é‡åé—®é¢˜</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">hzName</span> <span class="hljs-operator">=</span> fileName.substring(fileName.lastIndexOf(<span class="hljs-string">"."</span>));<br>    fileName = UUID.randomUUID().toString() + hzName;<br>    <span class="hljs-comment">//è·å–æœåŠ¡å™¨ä¸­photoç›®å½•çš„è·¯å¾„</span><br>    <span class="hljs-type">ServletContext</span> <span class="hljs-variable">servletContext</span> <span class="hljs-operator">=</span> session.getServletContext();<br>    <span class="hljs-type">String</span> <span class="hljs-variable">photoPath</span> <span class="hljs-operator">=</span> servletContext.getRealPath(<span class="hljs-string">"photo"</span>);<br>    <span class="hljs-type">File</span> <span class="hljs-variable">file</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(photoPath);<br>    <span class="hljs-keyword">if</span>(!file.exists()){<br>        file.mkdir();<br>    }<br>    <span class="hljs-type">String</span> <span class="hljs-variable">finalPath</span> <span class="hljs-operator">=</span> photoPath + File.separator + fileName;<br>    <span class="hljs-comment">//å®ç°ä¸Šä¼ åŠŸèƒ½</span><br>    photo.transferTo(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(finalPath));<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h1 id="åã€æ‹¦æˆªå™¨"><a href="#åã€æ‹¦æˆªå™¨" class="headerlink" title="åã€æ‹¦æˆªå™¨"></a>åã€æ‹¦æˆªå™¨</h1><h3 id="1ã€æ‹¦æˆªå™¨çš„é…ç½®"><a href="#1ã€æ‹¦æˆªå™¨çš„é…ç½®" class="headerlink" title="1ã€æ‹¦æˆªå™¨çš„é…ç½®"></a>1ã€æ‹¦æˆªå™¨çš„é…ç½®</h3><p>SpringMVCä¸­çš„æ‹¦æˆªå™¨ç”¨äºæ‹¦æˆªæ§åˆ¶å™¨æ–¹æ³•çš„æ‰§è¡Œ</p><p>SpringMVCä¸­çš„æ‹¦æˆªå™¨éœ€è¦å®ç°HandlerInterceptor</p><p>SpringMVCçš„æ‹¦æˆªå™¨å¿…é¡»åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.atguigu.interceptor.FirstInterceptor"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">"firstInterceptor"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ä»¥ä¸Šä¸¤ç§é…ç½®æ–¹å¼éƒ½æ˜¯å¯¹DispatcherServletæ‰€å¤„ç†çš„æ‰€æœ‰çš„è¯·æ±‚è¿›è¡Œæ‹¦æˆª --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mvc:interceptor</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/**"</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mvc:exclude-mapping</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"/testRequestEntity"</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ref</span> <span class="hljs-attr">bean</span>=<span class="hljs-string">"firstInterceptor"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ref</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mvc:interceptor</span>&gt;</span><br><span class="hljs-comment">&lt;!-- </span><br><span class="hljs-comment">ä»¥ä¸Šé…ç½®æ–¹å¼å¯ä»¥é€šè¿‡refæˆ–beanæ ‡ç­¾è®¾ç½®æ‹¦æˆªå™¨ï¼Œé€šè¿‡mvc:mappingè®¾ç½®éœ€è¦æ‹¦æˆªçš„è¯·æ±‚ï¼Œé€šè¿‡mvc:exclude-mappingè®¾ç½®éœ€è¦æ’é™¤çš„è¯·æ±‚ï¼Œå³ä¸éœ€è¦æ‹¦æˆªçš„è¯·æ±‚</span><br><span class="hljs-comment">--&gt;</span><br></code></pre></td></tr></tbody></table></figure><h3 id="2ã€æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•"><a href="#2ã€æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•" class="headerlink" title="2ã€æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•"></a>2ã€æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•</h3><p>SpringMVCä¸­çš„æ‹¦æˆªå™¨æœ‰ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•ï¼š</p><p>preHandleï¼šæ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡ŒpreHandle()ï¼Œå…¶booleanç±»å‹çš„è¿”å›å€¼è¡¨ç¤ºæ˜¯å¦æ‹¦æˆªæˆ–æ”¾è¡Œï¼Œè¿”å›trueä¸ºæ”¾è¡Œï¼Œå³è°ƒç”¨æ§åˆ¶å™¨æ–¹æ³•ï¼›è¿”å›falseè¡¨ç¤ºæ‹¦æˆªï¼Œå³ä¸è°ƒç”¨æ§åˆ¶å™¨æ–¹æ³•</p><p>postHandleï¼šæ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡ŒpostHandle()</p><p>afterComplationï¼šå¤„ç†å®Œè§†å›¾å’Œæ¨¡å‹æ•°æ®ï¼Œæ¸²æŸ“è§†å›¾å®Œæ¯•ä¹‹åæ‰§è¡ŒafterComplation()</p><h3 id="3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº"><a href="#3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº" class="headerlink" title="3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº"></a>3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº</h3><p>a&gt;è‹¥æ¯ä¸ªæ‹¦æˆªå™¨çš„preHandle()éƒ½è¿”å›true</p><p>æ­¤æ—¶å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºå’Œæ‹¦æˆªå™¨åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶çš„é…ç½®é¡ºåºæœ‰å…³ï¼š</p><p>preHandle()ä¼šæŒ‰ç…§é…ç½®çš„é¡ºåºæ‰§è¡Œï¼Œè€ŒpostHandle()å’ŒafterComplation()ä¼šæŒ‰ç…§é…ç½®çš„ååºæ‰§è¡Œ</p><p>b&gt;è‹¥æŸä¸ªæ‹¦æˆªå™¨çš„preHandle()è¿”å›äº†false</p><p>preHandle()è¿”å›falseå’Œå®ƒä¹‹å‰çš„æ‹¦æˆªå™¨çš„preHandle()éƒ½ä¼šæ‰§è¡Œï¼ŒpostHandle()éƒ½ä¸æ‰§è¡Œï¼Œè¿”å›falseçš„æ‹¦æˆªå™¨ä¹‹å‰çš„æ‹¦æˆªå™¨çš„afterComplation()ä¼šæ‰§è¡Œ</p><h1 id="åä¸€ã€å¼‚å¸¸å¤„ç†å™¨"><a href="#åä¸€ã€å¼‚å¸¸å¤„ç†å™¨" class="headerlink" title="åä¸€ã€å¼‚å¸¸å¤„ç†å™¨"></a>åä¸€ã€å¼‚å¸¸å¤„ç†å™¨</h1><h3 id="1ã€åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†"><a href="#1ã€åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†" class="headerlink" title="1ã€åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†"></a>1ã€åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†</h3><p>SpringMVCæä¾›äº†ä¸€ä¸ªå¤„ç†æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€å‡ºç°çš„å¼‚å¸¸çš„æ¥å£ï¼šHandlerExceptionResolver</p><p>HandlerExceptionResolveræ¥å£çš„å®ç°ç±»æœ‰ï¼šDefaultHandlerExceptionResolverå’ŒSimpleMappingExceptionResolver</p><p>SpringMVCæä¾›äº†è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†å™¨SimpleMappingExceptionResolverï¼Œä½¿ç”¨æ–¹å¼ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"exceptionMappings"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        propertiesçš„é”®è¡¨ç¤ºå¤„ç†å™¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸</span><br><span class="hljs-comment">        propertiesçš„å€¼è¡¨ç¤ºè‹¥å‡ºç°æŒ‡å®šå¼‚å¸¸æ—¶ï¼Œè®¾ç½®ä¸€ä¸ªæ–°çš„è§†å›¾åç§°ï¼Œè·³è½¬åˆ°æŒ‡å®šé¡µé¢</span><br><span class="hljs-comment">        --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"java.lang.ArithmeticException"</span>&gt;</span>error<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    exceptionAttributeå±æ€§è®¾ç½®ä¸€ä¸ªå±æ€§åï¼Œå°†å‡ºç°çš„å¼‚å¸¸ä¿¡æ¯åœ¨è¯·æ±‚åŸŸä¸­è¿›è¡Œå…±äº«</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"exceptionAttribute"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ex"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><h3 id="2ã€åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†"><a href="#2ã€åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†" class="headerlink" title="2ã€åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†"></a>2ã€åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//@ControllerAdviceå°†å½“å‰ç±»æ ‡è¯†ä¸ºå¼‚å¸¸å¤„ç†çš„ç»„ä»¶</span><br><span class="hljs-meta">@ControllerAdvice</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExceptionController</span> {<br><br>    <span class="hljs-comment">//@ExceptionHandlerç”¨äºè®¾ç½®æ‰€æ ‡è¯†æ–¹æ³•å¤„ç†çš„å¼‚å¸¸</span><br>    <span class="hljs-meta">@ExceptionHandler(ArithmeticException.class)</span><br>    <span class="hljs-comment">//exè¡¨ç¤ºå½“å‰è¯·æ±‚å¤„ç†ä¸­å‡ºç°çš„å¼‚å¸¸å¯¹è±¡</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">handleArithmeticException</span><span class="hljs-params">(Exception ex, Model model)</span>{<br>        model.addAttribute(<span class="hljs-string">"ex"</span>, ex);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"error"</span>;<br>    }<br><br>}<br></code></pre></td></tr></tbody></table></figure><h1 id="åäºŒã€æ³¨è§£é…ç½®SpringMVC"><a href="#åäºŒã€æ³¨è§£é…ç½®SpringMVC" class="headerlink" title="åäºŒã€æ³¨è§£é…ç½®SpringMVC"></a>åäºŒã€æ³¨è§£é…ç½®SpringMVC</h1><p>ä½¿ç”¨é…ç½®ç±»å’Œæ³¨è§£ä»£æ›¿web.xmlå’ŒSpringMVCé…ç½®æ–‡ä»¶çš„åŠŸèƒ½</p><h3 id="1ã€åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿web-xml"><a href="#1ã€åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿web-xml" class="headerlink" title="1ã€åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿web.xml"></a>1ã€åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿web.xml</h3><p>åœ¨Servlet3.0ç¯å¢ƒä¸­ï¼Œå®¹å™¨ä¼šåœ¨ç±»è·¯å¾„ä¸­æŸ¥æ‰¾å®ç°javax.servlet.ServletContainerInitializeræ¥å£çš„ç±»ï¼Œå¦‚æœæ‰¾åˆ°çš„è¯å°±ç”¨å®ƒæ¥é…ç½®Servletå®¹å™¨ã€‚<br>Springæä¾›äº†è¿™ä¸ªæ¥å£çš„å®ç°ï¼Œåä¸ºSpringServletContainerInitializerï¼Œè¿™ä¸ªç±»åè¿‡æ¥åˆä¼šæŸ¥æ‰¾å®ç°WebApplicationInitializerçš„ç±»å¹¶å°†é…ç½®çš„ä»»åŠ¡äº¤ç»™å®ƒä»¬æ¥å®Œæˆã€‚Spring3.2å¼•å…¥äº†ä¸€ä¸ªä¾¿åˆ©çš„WebApplicationInitializeråŸºç¡€å®ç°ï¼Œåä¸ºAbstractAnnotationConfigDispatcherServletInitializerï¼Œå½“æˆ‘ä»¬çš„ç±»æ‰©å±•äº†AbstractAnnotationConfigDispatcherServletInitializerå¹¶å°†å…¶éƒ¨ç½²åˆ°Servlet3.0å®¹å™¨çš„æ—¶å€™ï¼Œå®¹å™¨ä¼šè‡ªåŠ¨å‘ç°å®ƒï¼Œå¹¶ç”¨å®ƒæ¥é…ç½®Servletä¸Šä¸‹æ–‡ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebInit</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractAnnotationConfigDispatcherServletInitializer</span> {<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŒ‡å®šspringçš„é…ç½®ç±»</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> Class&lt;?&gt;[] getRootConfigClasses() {<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>[]{SpringConfig.class};<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŒ‡å®šSpringMVCçš„é…ç½®ç±»</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> Class&lt;?&gt;[] getServletConfigClasses() {<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>[]{WebConfig.class};<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æŒ‡å®šDispatcherServletçš„æ˜ å°„è§„åˆ™ï¼Œå³url-pattern</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> String[] getServletMappings() {<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[]{<span class="hljs-string">"/"</span>};<br>    }<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ·»åŠ è¿‡æ»¤å™¨</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> Filter[] getServletFilters() {<br>        <span class="hljs-type">CharacterEncodingFilter</span> <span class="hljs-variable">encodingFilter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CharacterEncodingFilter</span>();<br>        encodingFilter.setEncoding(<span class="hljs-string">"UTF-8"</span>);<br>        encodingFilter.setForceRequestEncoding(<span class="hljs-literal">true</span>);<br>        <span class="hljs-type">HiddenHttpMethodFilter</span> <span class="hljs-variable">hiddenHttpMethodFilter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HiddenHttpMethodFilter</span>();<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Filter</span>[]{encodingFilter, hiddenHttpMethodFilter};<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="2ã€åˆ›å»ºSpringConfigé…ç½®ç±»ï¼Œä»£æ›¿springçš„é…ç½®æ–‡ä»¶"><a href="#2ã€åˆ›å»ºSpringConfigé…ç½®ç±»ï¼Œä»£æ›¿springçš„é…ç½®æ–‡ä»¶" class="headerlink" title="2ã€åˆ›å»ºSpringConfigé…ç½®ç±»ï¼Œä»£æ›¿springçš„é…ç½®æ–‡ä»¶"></a>2ã€åˆ›å»ºSpringConfigé…ç½®ç±»ï¼Œä»£æ›¿springçš„é…ç½®æ–‡ä»¶</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringConfig</span> {<br><span class="hljs-comment">//ssmæ•´åˆä¹‹åï¼Œspringçš„é…ç½®ä¿¡æ¯å†™åœ¨æ­¤ç±»ä¸­</span><br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="3ã€åˆ›å»ºWebConfigé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶"><a href="#3ã€åˆ›å»ºWebConfigé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶" class="headerlink" title="3ã€åˆ›å»ºWebConfigé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶"></a>3ã€åˆ›å»ºWebConfigé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-comment">//æ‰«æç»„ä»¶</span><br><span class="hljs-meta">@ComponentScan("com.atguigu.mvc.controller")</span><br><span class="hljs-comment">//å¼€å¯MVCæ³¨è§£é©±åŠ¨</span><br><span class="hljs-meta">@EnableWebMvc</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> {<br><br>    <span class="hljs-comment">//ä½¿ç”¨é»˜è®¤çš„servletå¤„ç†é™æ€èµ„æº</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureDefaultServletHandling</span><span class="hljs-params">(DefaultServletHandlerConfigurer configurer)</span> {<br>        configurer.enable();<br>    }<br><br>    <span class="hljs-comment">//é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> CommonsMultipartResolver <span class="hljs-title function_">multipartResolver</span><span class="hljs-params">()</span>{<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CommonsMultipartResolver</span>();<br>    }<br><br>    <span class="hljs-comment">//é…ç½®æ‹¦æˆªå™¨</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> {<br>        <span class="hljs-type">FirstInterceptor</span> <span class="hljs-variable">firstInterceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FirstInterceptor</span>();<br>        registry.addInterceptor(firstInterceptor).addPathPatterns(<span class="hljs-string">"/**"</span>);<br>    }<br>    <br>    <span class="hljs-comment">//é…ç½®è§†å›¾æ§åˆ¶</span><br>    <br>    <span class="hljs-comment">/*@Override</span><br><span class="hljs-comment">    public void addViewControllers(ViewControllerRegistry registry) {</span><br><span class="hljs-comment">        registry.addViewController("/").setViewName("index");</span><br><span class="hljs-comment">    }*/</span><br>    <br>    <span class="hljs-comment">//é…ç½®å¼‚å¸¸æ˜ å°„</span><br>    <span class="hljs-comment">/*@Override</span><br><span class="hljs-comment">    public void configureHandlerExceptionResolvers(List&lt;HandlerExceptionResolver&gt; resolvers) {</span><br><span class="hljs-comment">        SimpleMappingExceptionResolver exceptionResolver = new SimpleMappingExceptionResolver();</span><br><span class="hljs-comment">        Properties prop = new Properties();</span><br><span class="hljs-comment">        prop.setProperty("java.lang.ArithmeticException", "error");</span><br><span class="hljs-comment">        //è®¾ç½®å¼‚å¸¸æ˜ å°„</span><br><span class="hljs-comment">        exceptionResolver.setExceptionMappings(prop);</span><br><span class="hljs-comment">        //è®¾ç½®å…±äº«å¼‚å¸¸ä¿¡æ¯çš„é”®</span><br><span class="hljs-comment">        exceptionResolver.setExceptionAttribute("ex");</span><br><span class="hljs-comment">        resolvers.add(exceptionResolver);</span><br><span class="hljs-comment">    }*/</span><br><br>    <span class="hljs-comment">//é…ç½®ç”Ÿæˆæ¨¡æ¿è§£æå™¨</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> ITemplateResolver <span class="hljs-title function_">templateResolver</span><span class="hljs-params">()</span> {<br>        <span class="hljs-type">WebApplicationContext</span> <span class="hljs-variable">webApplicationContext</span> <span class="hljs-operator">=</span> ContextLoader.getCurrentWebApplicationContext();<br>        <span class="hljs-comment">// ServletContextTemplateResolveréœ€è¦ä¸€ä¸ªServletContextä½œä¸ºæ„é€ å‚æ•°ï¼Œå¯é€šè¿‡WebApplicationContext çš„æ–¹æ³•è·å¾—</span><br>        <span class="hljs-type">ServletContextTemplateResolver</span> <span class="hljs-variable">templateResolver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletContextTemplateResolver</span>(<br>                webApplicationContext.getServletContext());<br>        templateResolver.setPrefix(<span class="hljs-string">"/WEB-INF/templates/"</span>);<br>        templateResolver.setSuffix(<span class="hljs-string">".html"</span>);<br>        templateResolver.setCharacterEncoding(<span class="hljs-string">"UTF-8"</span>);<br>        templateResolver.setTemplateMode(TemplateMode.HTML);<br>        <span class="hljs-keyword">return</span> templateResolver;<br>    }<br><br>    <span class="hljs-comment">//ç”Ÿæˆæ¨¡æ¿å¼•æ“å¹¶ä¸ºæ¨¡æ¿å¼•æ“æ³¨å…¥æ¨¡æ¿è§£æå™¨</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> SpringTemplateEngine <span class="hljs-title function_">templateEngine</span><span class="hljs-params">(ITemplateResolver templateResolver)</span> {<br>        <span class="hljs-type">SpringTemplateEngine</span> <span class="hljs-variable">templateEngine</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpringTemplateEngine</span>();<br>        templateEngine.setTemplateResolver(templateResolver);<br>        <span class="hljs-keyword">return</span> templateEngine;<br>    }<br><br>    <span class="hljs-comment">//ç”Ÿæˆè§†å›¾è§£æå™¨å¹¶æœªè§£æå™¨æ³¨å…¥æ¨¡æ¿å¼•æ“</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> ViewResolver <span class="hljs-title function_">viewResolver</span><span class="hljs-params">(SpringTemplateEngine templateEngine)</span> {<br>        <span class="hljs-type">ThymeleafViewResolver</span> <span class="hljs-variable">viewResolver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThymeleafViewResolver</span>();<br>        viewResolver.setCharacterEncoding(<span class="hljs-string">"UTF-8"</span>);<br>        viewResolver.setTemplateEngine(templateEngine);<br>        <span class="hljs-keyword">return</span> viewResolver;<br>    }<br><br><br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="4ã€æµ‹è¯•åŠŸèƒ½"><a href="#4ã€æµ‹è¯•åŠŸèƒ½" class="headerlink" title="4ã€æµ‹è¯•åŠŸèƒ½"></a>4ã€æµ‹è¯•åŠŸèƒ½</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping("/")</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">index</span><span class="hljs-params">()</span>{<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">"index"</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h1 id="åä¸‰ã€SpringMVCæ‰§è¡Œæµç¨‹"><a href="#åä¸‰ã€SpringMVCæ‰§è¡Œæµç¨‹" class="headerlink" title="åä¸‰ã€SpringMVCæ‰§è¡Œæµç¨‹"></a>åä¸‰ã€SpringMVCæ‰§è¡Œæµç¨‹</h1><h3 id="1ã€SpringMVCå¸¸ç”¨ç»„ä»¶"><a href="#1ã€SpringMVCå¸¸ç”¨ç»„ä»¶" class="headerlink" title="1ã€SpringMVCå¸¸ç”¨ç»„ä»¶"></a>1ã€SpringMVCå¸¸ç”¨ç»„ä»¶</h3><ul><li>DispatcherServletï¼š<strong>å‰ç«¯æ§åˆ¶å™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šç»Ÿä¸€å¤„ç†è¯·æ±‚å’Œå“åº”ï¼Œæ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œç”±å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚</p><ul><li>HandlerMappingï¼š<strong>å¤„ç†å™¨æ˜ å°„å™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šæ ¹æ®è¯·æ±‚çš„urlã€methodç­‰ä¿¡æ¯æŸ¥æ‰¾Handlerï¼Œå³æ§åˆ¶å™¨æ–¹æ³•</p><ul><li>Handlerï¼š<strong>å¤„ç†å™¨</strong>ï¼Œéœ€è¦å·¥ç¨‹å¸ˆå¼€å‘</li></ul><p>ä½œç”¨ï¼šåœ¨DispatcherServletçš„æ§åˆ¶ä¸‹Handlerå¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†</p><ul><li>HandlerAdapterï¼š<strong>å¤„ç†å™¨é€‚é…å™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šé€šè¿‡HandlerAdapterå¯¹å¤„ç†å™¨ï¼ˆæ§åˆ¶å™¨æ–¹æ³•ï¼‰è¿›è¡Œæ‰§è¡Œ</p><ul><li>ViewResolverï¼š<strong>è§†å›¾è§£æå™¨</strong>ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›</li></ul><p>ä½œç”¨ï¼šè¿›è¡Œè§†å›¾è§£æï¼Œå¾—åˆ°ç›¸åº”çš„è§†å›¾ï¼Œä¾‹å¦‚ï¼šThymeleafViewã€InternalResourceViewã€RedirectView</p><ul><li>Viewï¼š<strong>è§†å›¾</strong></li></ul><p>ä½œç”¨ï¼šå°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·</p><h3 id="2ã€DispatcherServletåˆå§‹åŒ–è¿‡ç¨‹"><a href="#2ã€DispatcherServletåˆå§‹åŒ–è¿‡ç¨‹" class="headerlink" title="2ã€DispatcherServletåˆå§‹åŒ–è¿‡ç¨‹"></a>2ã€DispatcherServletåˆå§‹åŒ–è¿‡ç¨‹</h3><p>DispatcherServlet æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Servletï¼Œæ‰€ä»¥å¤©ç„¶çš„éµå¾ª Servlet çš„ç”Ÿå‘½å‘¨æœŸã€‚æ‰€ä»¥å®è§‚ä¸Šæ˜¯ Servlet ç”Ÿå‘½å‘¨æœŸæ¥è¿›è¡Œè°ƒåº¦ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/img005.png" alt="images"></p><h5 id="a-gt-åˆå§‹åŒ–WebApplicationContext"><a href="#a-gt-åˆå§‹åŒ–WebApplicationContext" class="headerlink" title="a>åˆå§‹åŒ–WebApplicationContext"></a>a&gt;åˆå§‹åŒ–WebApplicationContext</h5><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.FrameworkServlet</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> WebApplicationContext <span class="hljs-title function_">initWebApplicationContext</span><span class="hljs-params">()</span> {<br>    <span class="hljs-type">WebApplicationContext</span> <span class="hljs-variable">rootContext</span> <span class="hljs-operator">=</span><br>        WebApplicationContextUtils.getWebApplicationContext(getServletContext());<br>    <span class="hljs-type">WebApplicationContext</span> <span class="hljs-variable">wac</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.webApplicationContext != <span class="hljs-literal">null</span>) {<br>        <span class="hljs-comment">// A context instance was injected at construction time -&gt; use it</span><br>        wac = <span class="hljs-built_in">this</span>.webApplicationContext;<br>        <span class="hljs-keyword">if</span> (wac <span class="hljs-keyword">instanceof</span> ConfigurableWebApplicationContext) {<br>            <span class="hljs-type">ConfigurableWebApplicationContext</span> <span class="hljs-variable">cwac</span> <span class="hljs-operator">=</span> (ConfigurableWebApplicationContext) wac;<br>            <span class="hljs-keyword">if</span> (!cwac.isActive()) {<br>                <span class="hljs-comment">// The context has not yet been refreshed -&gt; provide services such as</span><br>                <span class="hljs-comment">// setting the parent context, setting the application context id, etc</span><br>                <span class="hljs-keyword">if</span> (cwac.getParent() == <span class="hljs-literal">null</span>) {<br>                    <span class="hljs-comment">// The context instance was injected without an explicit parent -&gt; set</span><br>                    <span class="hljs-comment">// the root application context (if any; may be null) as the parent</span><br>                    cwac.setParent(rootContext);<br>                }<br>                configureAndRefreshWebApplicationContext(cwac);<br>            }<br>        }<br>    }<br>    <span class="hljs-keyword">if</span> (wac == <span class="hljs-literal">null</span>) {<br>        <span class="hljs-comment">// No context instance was injected at construction time -&gt; see if one</span><br>        <span class="hljs-comment">// has been registered in the servlet context. If one exists, it is assumed</span><br>        <span class="hljs-comment">// that the parent context (if any) has already been set and that the</span><br>        <span class="hljs-comment">// user has performed any initialization such as setting the context id</span><br>        wac = findWebApplicationContext();<br>    }<br>    <span class="hljs-keyword">if</span> (wac == <span class="hljs-literal">null</span>) {<br>        <span class="hljs-comment">// No context instance is defined for this servlet -&gt; create a local one</span><br>        <span class="hljs-comment">// åˆ›å»ºWebApplicationContext</span><br>        wac = createWebApplicationContext(rootContext);<br>    }<br><br>    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.refreshEventReceived) {<br>        <span class="hljs-comment">// Either the context is not a ConfigurableApplicationContext with refresh</span><br>        <span class="hljs-comment">// support or the context injected at construction time had already been</span><br>        <span class="hljs-comment">// refreshed -&gt; trigger initial onRefresh manually here.</span><br>        <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>.onRefreshMonitor) {<br>            <span class="hljs-comment">// åˆ·æ–°WebApplicationContext</span><br>            onRefresh(wac);<br>        }<br>    }<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.publishContext) {<br>        <span class="hljs-comment">// Publish the context as a servlet context attribute.</span><br>        <span class="hljs-comment">// å°†IOCå®¹å™¨åœ¨åº”ç”¨åŸŸå…±äº«</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">attrName</span> <span class="hljs-operator">=</span> getServletContextAttributeName();<br>        getServletContext().setAttribute(attrName, wac);<br>    }<br><br>    <span class="hljs-keyword">return</span> wac;<br>}<br></code></pre></td></tr></tbody></table></figure><h5 id="b-gt-åˆ›å»ºWebApplicationContext"><a href="#b-gt-åˆ›å»ºWebApplicationContext" class="headerlink" title="b>åˆ›å»ºWebApplicationContext"></a>b&gt;åˆ›å»ºWebApplicationContext</h5><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.FrameworkServlet</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> WebApplicationContext <span class="hljs-title function_">createWebApplicationContext</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> ApplicationContext parent)</span> {<br>    Class&lt;?&gt; contextClass = getContextClass();<br>    <span class="hljs-keyword">if</span> (!ConfigurableWebApplicationContext.class.isAssignableFrom(contextClass)) {<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApplicationContextException</span>(<br>            <span class="hljs-string">"Fatal initialization error in servlet with name '"</span> + getServletName() +<br>            <span class="hljs-string">"': custom WebApplicationContext class ["</span> + contextClass.getName() +<br>            <span class="hljs-string">"] is not of type ConfigurableWebApplicationContext"</span>);<br>    }<br>    <span class="hljs-comment">// é€šè¿‡åå°„åˆ›å»º IOC å®¹å™¨å¯¹è±¡</span><br>    <span class="hljs-type">ConfigurableWebApplicationContext</span> <span class="hljs-variable">wac</span> <span class="hljs-operator">=</span><br>        (ConfigurableWebApplicationContext) BeanUtils.instantiateClass(contextClass);<br><br>    wac.setEnvironment(getEnvironment());<br>    <span class="hljs-comment">// è®¾ç½®çˆ¶å®¹å™¨</span><br>    wac.setParent(parent);<br>    <span class="hljs-type">String</span> <span class="hljs-variable">configLocation</span> <span class="hljs-operator">=</span> getContextConfigLocation();<br>    <span class="hljs-keyword">if</span> (configLocation != <span class="hljs-literal">null</span>) {<br>        wac.setConfigLocation(configLocation);<br>    }<br>    configureAndRefreshWebApplicationContext(wac);<br><br>    <span class="hljs-keyword">return</span> wac;<br>}<br></code></pre></td></tr></tbody></table></figure><h5 id="c-gt-DispatcherServletåˆå§‹åŒ–ç­–ç•¥"><a href="#c-gt-DispatcherServletåˆå§‹åŒ–ç­–ç•¥" class="headerlink" title="c>DispatcherServletåˆå§‹åŒ–ç­–ç•¥"></a>c&gt;DispatcherServletåˆå§‹åŒ–ç­–ç•¥</h5><p>FrameworkServletåˆ›å»ºWebApplicationContextåï¼Œåˆ·æ–°å®¹å™¨ï¼Œè°ƒç”¨onRefresh(wac)ï¼Œæ­¤æ–¹æ³•åœ¨DispatcherServletä¸­è¿›è¡Œäº†é‡å†™ï¼Œè°ƒç”¨äº†initStrategies(context)æ–¹æ³•ï¼Œåˆå§‹åŒ–ç­–ç•¥ï¼Œå³åˆå§‹åŒ–DispatcherServletçš„å„ä¸ªç»„ä»¶</p><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.DispatcherServlet</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initStrategies</span><span class="hljs-params">(ApplicationContext context)</span> {<br>   initMultipartResolver(context);<br>   initLocaleResolver(context);<br>   initThemeResolver(context);<br>   initHandlerMappings(context);<br>   initHandlerAdapters(context);<br>   initHandlerExceptionResolvers(context);<br>   initRequestToViewNameTranslator(context);<br>   initViewResolvers(context);<br>   initFlashMapManager(context);<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="3ã€DispatcherServletè°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚"><a href="#3ã€DispatcherServletè°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚" class="headerlink" title="3ã€DispatcherServletè°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚"></a>3ã€DispatcherServletè°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚</h3><h5 id="a-gt-processRequest"><a href="#a-gt-processRequest" class="headerlink" title="a>processRequest()"></a>a&gt;processRequest()</h5><p>FrameworkServleté‡å†™HttpServletä¸­çš„service()å’ŒdoXxx()ï¼Œè¿™äº›æ–¹æ³•ä¸­è°ƒç”¨äº†processRequest(request, response)</p><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.FrameworkServlet</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRequest</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span><br>    <span class="hljs-keyword">throws</span> ServletException, IOException {<br><br>    <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();<br>    <span class="hljs-type">Throwable</span> <span class="hljs-variable">failureCause</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>    <span class="hljs-type">LocaleContext</span> <span class="hljs-variable">previousLocaleContext</span> <span class="hljs-operator">=</span> LocaleContextHolder.getLocaleContext();<br>    <span class="hljs-type">LocaleContext</span> <span class="hljs-variable">localeContext</span> <span class="hljs-operator">=</span> buildLocaleContext(request);<br><br>    <span class="hljs-type">RequestAttributes</span> <span class="hljs-variable">previousAttributes</span> <span class="hljs-operator">=</span> RequestContextHolder.getRequestAttributes();<br>    <span class="hljs-type">ServletRequestAttributes</span> <span class="hljs-variable">requestAttributes</span> <span class="hljs-operator">=</span> buildRequestAttributes(request, response, previousAttributes);<br><br>    <span class="hljs-type">WebAsyncManager</span> <span class="hljs-variable">asyncManager</span> <span class="hljs-operator">=</span> WebAsyncUtils.getAsyncManager(request);<br>    asyncManager.registerCallableInterceptor(FrameworkServlet.class.getName(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestBindingInterceptor</span>());<br><br>    initContextHolders(request, localeContext, requestAttributes);<br><br>    <span class="hljs-keyword">try</span> {<br><span class="hljs-comment">// æ‰§è¡ŒæœåŠ¡ï¼ŒdoService()æ˜¯ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œåœ¨DispatcherServletä¸­è¿›è¡Œäº†é‡å†™</span><br>        doService(request, response);<br>    }<br>    <span class="hljs-keyword">catch</span> (ServletException | IOException ex) {<br>        failureCause = ex;<br>        <span class="hljs-keyword">throw</span> ex;<br>    }<br>    <span class="hljs-keyword">catch</span> (Throwable ex) {<br>        failureCause = ex;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NestedServletException</span>(<span class="hljs-string">"Request processing failed"</span>, ex);<br>    }<br><br>    <span class="hljs-keyword">finally</span> {<br>        resetContextHolders(request, previousLocaleContext, previousAttributes);<br>        <span class="hljs-keyword">if</span> (requestAttributes != <span class="hljs-literal">null</span>) {<br>            requestAttributes.requestCompleted();<br>        }<br>        logResult(request, response, failureCause, asyncManager);<br>        publishRequestHandledEvent(request, response, startTime, failureCause);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h5 id="b-gt-doService"><a href="#b-gt-doService" class="headerlink" title="b>doService()"></a>b&gt;doService()</h5><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.DispatcherServlet</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doService</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception {<br>    logRequest(request);<br><br>    <span class="hljs-comment">// Keep a snapshot of the request attributes in case of an include,</span><br>    <span class="hljs-comment">// to be able to restore the original attributes after the include.</span><br>    Map&lt;String, Object&gt; attributesSnapshot = <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">if</span> (WebUtils.isIncludeRequest(request)) {<br>        attributesSnapshot = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        Enumeration&lt;?&gt; attrNames = request.getAttributeNames();<br>        <span class="hljs-keyword">while</span> (attrNames.hasMoreElements()) {<br>            <span class="hljs-type">String</span> <span class="hljs-variable">attrName</span> <span class="hljs-operator">=</span> (String) attrNames.nextElement();<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.cleanupAfterInclude || attrName.startsWith(DEFAULT_STRATEGIES_PREFIX)) {<br>                attributesSnapshot.put(attrName, request.getAttribute(attrName));<br>            }<br>        }<br>    }<br><br>    <span class="hljs-comment">// Make framework objects available to handlers and view objects.</span><br>    request.setAttribute(WEB_APPLICATION_CONTEXT_ATTRIBUTE, getWebApplicationContext());<br>    request.setAttribute(LOCALE_RESOLVER_ATTRIBUTE, <span class="hljs-built_in">this</span>.localeResolver);<br>    request.setAttribute(THEME_RESOLVER_ATTRIBUTE, <span class="hljs-built_in">this</span>.themeResolver);<br>    request.setAttribute(THEME_SOURCE_ATTRIBUTE, getThemeSource());<br><br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.flashMapManager != <span class="hljs-literal">null</span>) {<br>        <span class="hljs-type">FlashMap</span> <span class="hljs-variable">inputFlashMap</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.flashMapManager.retrieveAndUpdate(request, response);<br>        <span class="hljs-keyword">if</span> (inputFlashMap != <span class="hljs-literal">null</span>) {<br>            request.setAttribute(INPUT_FLASH_MAP_ATTRIBUTE, Collections.unmodifiableMap(inputFlashMap));<br>        }<br>        request.setAttribute(OUTPUT_FLASH_MAP_ATTRIBUTE, <span class="hljs-keyword">new</span> <span class="hljs-title class_">FlashMap</span>());<br>        request.setAttribute(FLASH_MAP_MANAGER_ATTRIBUTE, <span class="hljs-built_in">this</span>.flashMapManager);<br>    }<br><br>    <span class="hljs-type">RequestPath</span> <span class="hljs-variable">requestPath</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.parseRequestPath &amp;&amp; !ServletRequestPathUtils.hasParsedRequestPath(request)) {<br>        requestPath = ServletRequestPathUtils.parseAndCache(request);<br>    }<br><br>    <span class="hljs-keyword">try</span> {<br>        <span class="hljs-comment">// å¤„ç†è¯·æ±‚å’Œå“åº”</span><br>        doDispatch(request, response);<br>    }<br>    <span class="hljs-keyword">finally</span> {<br>        <span class="hljs-keyword">if</span> (!WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) {<br>            <span class="hljs-comment">// Restore the original attribute snapshot, in case of an include.</span><br>            <span class="hljs-keyword">if</span> (attributesSnapshot != <span class="hljs-literal">null</span>) {<br>                restoreAttributesAfterInclude(request, attributesSnapshot);<br>            }<br>        }<br>        <span class="hljs-keyword">if</span> (requestPath != <span class="hljs-literal">null</span>) {<br>            ServletRequestPathUtils.clearParsedRequestPath(request);<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h5 id="c-gt-doDispatch"><a href="#c-gt-doDispatch" class="headerlink" title="c>doDispatch()"></a>c&gt;doDispatch()</h5><p>æ‰€åœ¨ç±»ï¼šorg.springframework.web.servlet.DispatcherServlet</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception {<br>    <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">processedRequest</span> <span class="hljs-operator">=</span> request;<br>    <span class="hljs-type">HandlerExecutionChain</span> <span class="hljs-variable">mappedHandler</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">multipartRequestParsed</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-type">WebAsyncManager</span> <span class="hljs-variable">asyncManager</span> <span class="hljs-operator">=</span> WebAsyncUtils.getAsyncManager(request);<br><br>    <span class="hljs-keyword">try</span> {<br>        <span class="hljs-type">ModelAndView</span> <span class="hljs-variable">mv</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">Exception</span> <span class="hljs-variable">dispatchException</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-keyword">try</span> {<br>            processedRequest = checkMultipart(request);<br>            multipartRequestParsed = (processedRequest != request);<br><br>            <span class="hljs-comment">// Determine handler for the current request.</span><br>            <span class="hljs-comment">/*</span><br><span class="hljs-comment">            mappedHandlerï¼šè°ƒç”¨é“¾</span><br><span class="hljs-comment">                åŒ…å«handlerã€interceptorListã€interceptorIndex</span><br><span class="hljs-comment">            handlerï¼šæµè§ˆå™¨å‘é€çš„è¯·æ±‚æ‰€åŒ¹é…çš„æ§åˆ¶å™¨æ–¹æ³•</span><br><span class="hljs-comment">            interceptorListï¼šå¤„ç†æ§åˆ¶å™¨æ–¹æ³•çš„æ‰€æœ‰æ‹¦æˆªå™¨é›†åˆ</span><br><span class="hljs-comment">            interceptorIndexï¼šæ‹¦æˆªå™¨ç´¢å¼•ï¼Œæ§åˆ¶æ‹¦æˆªå™¨afterCompletion()çš„æ‰§è¡Œ</span><br><span class="hljs-comment">            */</span><br>            mappedHandler = getHandler(processedRequest);<br>            <span class="hljs-keyword">if</span> (mappedHandler == <span class="hljs-literal">null</span>) {<br>                noHandlerFound(processedRequest, response);<br>                <span class="hljs-keyword">return</span>;<br>            }<br><br>            <span class="hljs-comment">// Determine handler adapter for the current request.</span><br>           <span class="hljs-comment">// é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•åˆ›å»ºç›¸åº”çš„å¤„ç†å™¨é€‚é…å™¨ï¼Œè°ƒç”¨æ‰€å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•</span><br>            <span class="hljs-type">HandlerAdapter</span> <span class="hljs-variable">ha</span> <span class="hljs-operator">=</span> getHandlerAdapter(mappedHandler.getHandler());<br><br>            <span class="hljs-comment">// Process last-modified header, if supported by the handler.</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> request.getMethod();<br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">isGet</span> <span class="hljs-operator">=</span> <span class="hljs-string">"GET"</span>.equals(method);<br>            <span class="hljs-keyword">if</span> (isGet || <span class="hljs-string">"HEAD"</span>.equals(method)) {<br>                <span class="hljs-type">long</span> <span class="hljs-variable">lastModified</span> <span class="hljs-operator">=</span> ha.getLastModified(request, mappedHandler.getHandler());<br>                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletWebRequest</span>(request, response).checkNotModified(lastModified) &amp;&amp; isGet) {<br>                    <span class="hljs-keyword">return</span>;<br>                }<br>            }<br><br>            <span class="hljs-comment">// è°ƒç”¨æ‹¦æˆªå™¨çš„preHandle()</span><br>            <span class="hljs-keyword">if</span> (!mappedHandler.applyPreHandle(processedRequest, response)) {<br>                <span class="hljs-keyword">return</span>;<br>            }<br><br>            <span class="hljs-comment">// Actually invoke the handler.</span><br>            <span class="hljs-comment">// ç”±å¤„ç†å™¨é€‚é…å™¨è°ƒç”¨å…·ä½“çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œæœ€ç»ˆè·å¾—ModelAndViewå¯¹è±¡</span><br>            mv = ha.handle(processedRequest, response, mappedHandler.getHandler());<br><br>            <span class="hljs-keyword">if</span> (asyncManager.isConcurrentHandlingStarted()) {<br>                <span class="hljs-keyword">return</span>;<br>            }<br><br>            applyDefaultViewName(processedRequest, mv);<br>            <span class="hljs-comment">// è°ƒç”¨æ‹¦æˆªå™¨çš„postHandle()</span><br>            mappedHandler.applyPostHandle(processedRequest, response, mv);<br>        }<br>        <span class="hljs-keyword">catch</span> (Exception ex) {<br>            dispatchException = ex;<br>        }<br>        <span class="hljs-keyword">catch</span> (Throwable err) {<br>            <span class="hljs-comment">// As of 4.3, we're processing Errors thrown from handler methods as well,</span><br>            <span class="hljs-comment">// making them available for @ExceptionHandler methods and other scenarios.</span><br>            dispatchException = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NestedServletException</span>(<span class="hljs-string">"Handler dispatch failed"</span>, err);<br>        }<br>        <span class="hljs-comment">// åç»­å¤„ç†ï¼šå¤„ç†æ¨¡å‹æ•°æ®å’Œæ¸²æŸ“è§†å›¾</span><br>        processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);<br>    }<br>    <span class="hljs-keyword">catch</span> (Exception ex) {<br>        triggerAfterCompletion(processedRequest, response, mappedHandler, ex);<br>    }<br>    <span class="hljs-keyword">catch</span> (Throwable err) {<br>        triggerAfterCompletion(processedRequest, response, mappedHandler,<br>                               <span class="hljs-keyword">new</span> <span class="hljs-title class_">NestedServletException</span>(<span class="hljs-string">"Handler processing failed"</span>, err));<br>    }<br>    <span class="hljs-keyword">finally</span> {<br>        <span class="hljs-keyword">if</span> (asyncManager.isConcurrentHandlingStarted()) {<br>            <span class="hljs-comment">// Instead of postHandle and afterCompletion</span><br>            <span class="hljs-keyword">if</span> (mappedHandler != <span class="hljs-literal">null</span>) {<br>                mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response);<br>            }<br>        }<br>        <span class="hljs-keyword">else</span> {<br>            <span class="hljs-comment">// Clean up any resources used by a multipart request.</span><br>            <span class="hljs-keyword">if</span> (multipartRequestParsed) {<br>                cleanupMultipart(processedRequest);<br>            }<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h5 id="d-gt-processDispatchResult"><a href="#d-gt-processDispatchResult" class="headerlink" title="d>processDispatchResult()"></a>d&gt;processDispatchResult()</h5><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processDispatchResult</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response,</span><br><span class="hljs-params">                                   <span class="hljs-meta">@Nullable</span> HandlerExecutionChain mappedHandler, <span class="hljs-meta">@Nullable</span> ModelAndView mv,</span><br><span class="hljs-params">                                   <span class="hljs-meta">@Nullable</span> Exception exception)</span> <span class="hljs-keyword">throws</span> Exception {<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">errorView</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-keyword">if</span> (exception != <span class="hljs-literal">null</span>) {<br>        <span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">instanceof</span> ModelAndViewDefiningException) {<br>            logger.debug(<span class="hljs-string">"ModelAndViewDefiningException encountered"</span>, exception);<br>            mv = ((ModelAndViewDefiningException) exception).getModelAndView();<br>        }<br>        <span class="hljs-keyword">else</span> {<br>            <span class="hljs-type">Object</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> (mappedHandler != <span class="hljs-literal">null</span> ? mappedHandler.getHandler() : <span class="hljs-literal">null</span>);<br>            mv = processHandlerException(request, response, handler, exception);<br>            errorView = (mv != <span class="hljs-literal">null</span>);<br>        }<br>    }<br><br>    <span class="hljs-comment">// Did the handler return a view to render?</span><br>    <span class="hljs-keyword">if</span> (mv != <span class="hljs-literal">null</span> &amp;&amp; !mv.wasCleared()) {<br>        <span class="hljs-comment">// å¤„ç†æ¨¡å‹æ•°æ®å’Œæ¸²æŸ“è§†å›¾</span><br>        render(mv, request, response);<br>        <span class="hljs-keyword">if</span> (errorView) {<br>            WebUtils.clearErrorRequestAttributes(request);<br>        }<br>    }<br>    <span class="hljs-keyword">else</span> {<br>        <span class="hljs-keyword">if</span> (logger.isTraceEnabled()) {<br>            logger.trace(<span class="hljs-string">"No view rendering, null ModelAndView returned."</span>);<br>        }<br>    }<br><br>    <span class="hljs-keyword">if</span> (WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) {<br>        <span class="hljs-comment">// Concurrent handling started during a forward</span><br>        <span class="hljs-keyword">return</span>;<br>    }<br><br>    <span class="hljs-keyword">if</span> (mappedHandler != <span class="hljs-literal">null</span>) {<br>        <span class="hljs-comment">// Exception (if any) is already handled..</span><br>        <span class="hljs-comment">// è°ƒç”¨æ‹¦æˆªå™¨çš„afterCompletion()</span><br>        mappedHandler.triggerAfterCompletion(request, response, <span class="hljs-literal">null</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="4ã€SpringMVCçš„æ‰§è¡Œæµç¨‹"><a href="#4ã€SpringMVCçš„æ‰§è¡Œæµç¨‹" class="headerlink" title="4ã€SpringMVCçš„æ‰§è¡Œæµç¨‹"></a>4ã€SpringMVCçš„æ‰§è¡Œæµç¨‹</h3><p>1) ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¯·æ±‚è¢«SpringMVC å‰ç«¯æ§åˆ¶å™¨ DispatcherServletæ•è·ã€‚</p><p>2) DispatcherServletå¯¹è¯·æ±‚URLè¿›è¡Œè§£æï¼Œå¾—åˆ°è¯·æ±‚èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ï¼Œåˆ¤æ–­è¯·æ±‚URIå¯¹åº”çš„æ˜ å°„ï¼š</p><p>a) ä¸å­˜åœ¨</p><p>i. å†åˆ¤æ–­æ˜¯å¦é…ç½®äº†mvc:default-servlet-handler</p><p>ii. å¦‚æœæ²¡é…ç½®ï¼Œåˆ™æ§åˆ¶å°æŠ¥æ˜ å°„æŸ¥æ‰¾ä¸åˆ°ï¼Œå®¢æˆ·ç«¯å±•ç¤º404é”™è¯¯</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/img006.png" alt="image-20210709214911404"></p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/img007.png" alt="image-20210709214947432"></p><p>iii. å¦‚æœæœ‰é…ç½®ï¼Œåˆ™è®¿é—®ç›®æ ‡èµ„æºï¼ˆä¸€èˆ¬ä¸ºé™æ€èµ„æºï¼Œå¦‚ï¼šJS,CSS,HTMLï¼‰ï¼Œæ‰¾ä¸åˆ°å®¢æˆ·ç«¯ä¹Ÿä¼šå±•ç¤º404é”™è¯¯</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/img008.png" alt="image-20210709215255693"></p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/img009.png" alt="image-20210709215336097"></p><p>b) å­˜åœ¨åˆ™æ‰§è¡Œä¸‹é¢çš„æµç¨‹</p><p>3) æ ¹æ®è¯¥URIï¼Œè°ƒç”¨HandlerMappingè·å¾—è¯¥Handleré…ç½®çš„æ‰€æœ‰ç›¸å…³çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬Handlerå¯¹è±¡ä»¥åŠHandlerå¯¹è±¡å¯¹åº”çš„æ‹¦æˆªå™¨ï¼‰ï¼Œæœ€åä»¥HandlerExecutionChainæ‰§è¡Œé“¾å¯¹è±¡çš„å½¢å¼è¿”å›ã€‚</p><p>4) DispatcherServlet æ ¹æ®è·å¾—çš„Handlerï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„HandlerAdapterã€‚</p><p>5) å¦‚æœæˆåŠŸè·å¾—HandlerAdapterï¼Œæ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„preHandler(â€¦)æ–¹æ³•ã€æ­£å‘ã€‘</p><p>6) æå–Requestä¸­çš„æ¨¡å‹æ•°æ®ï¼Œå¡«å……Handlerå…¥å‚ï¼Œå¼€å§‹æ‰§è¡ŒHandlerï¼ˆController)æ–¹æ³•ï¼Œå¤„ç†è¯·æ±‚ã€‚åœ¨å¡«å……Handlerçš„å…¥å‚è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä½ çš„é…ç½®ï¼ŒSpringå°†å¸®ä½ åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼š</p><p>a) HttpMessageConveterï¼š å°†è¯·æ±‚æ¶ˆæ¯ï¼ˆå¦‚Jsonã€xmlç­‰æ•°æ®ï¼‰è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šçš„å“åº”ä¿¡æ¯</p><p>b) æ•°æ®è½¬æ¢ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®è½¬æ¢ã€‚å¦‚Stringè½¬æ¢æˆIntegerã€Doubleç­‰</p><p>c) æ•°æ®æ ¼å¼åŒ–ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®æ ¼å¼åŒ–ã€‚ å¦‚å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ ¼å¼åŒ–æ•°å­—æˆ–æ ¼å¼åŒ–æ—¥æœŸç­‰</p><p>d) æ•°æ®éªŒè¯ï¼š éªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼ˆé•¿åº¦ã€æ ¼å¼ç­‰ï¼‰ï¼ŒéªŒè¯ç»“æœå­˜å‚¨åˆ°BindingResultæˆ–Errorä¸­</p><p>7) Handleræ‰§è¡Œå®Œæˆåï¼Œå‘DispatcherServlet è¿”å›ä¸€ä¸ªModelAndViewå¯¹è±¡ã€‚</p><p>8) æ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„postHandle(â€¦)æ–¹æ³•ã€é€†å‘ã€‘ã€‚</p><p>9) æ ¹æ®è¿”å›çš„ModelAndViewï¼ˆæ­¤æ—¶ä¼šåˆ¤æ–­æ˜¯å¦å­˜åœ¨å¼‚å¸¸ï¼šå¦‚æœå­˜åœ¨å¼‚å¸¸ï¼Œåˆ™æ‰§è¡ŒHandlerExceptionResolverè¿›è¡Œå¼‚å¸¸å¤„ç†ï¼‰é€‰æ‹©ä¸€ä¸ªé€‚åˆçš„ViewResolverè¿›è¡Œè§†å›¾è§£æï¼Œæ ¹æ®Modelå’ŒViewï¼Œæ¥æ¸²æŸ“è§†å›¾ã€‚</p><p>10) æ¸²æŸ“è§†å›¾å®Œæ¯•æ‰§è¡Œæ‹¦æˆªå™¨çš„afterCompletion(â€¦)æ–¹æ³•ã€é€†å‘ã€‘ã€‚</p><p>11) å°†æ¸²æŸ“ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaåç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring5ç†è®ºå­¦ä¹ </title>
      <link href="/2022/10/11/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Spring%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/"/>
      <url>/2022/10/11/%E5%90%8E%E7%AB%AF%E5%AD%A6%E4%B9%A0/Spring%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring5"><a href="#Spring5" class="headerlink" title="Spring5"></a>Spring5</h1><h3 id="1-1Spring5å­¦ä¹ "><a href="#1-1Spring5å­¦ä¹ " class="headerlink" title="1.1Spring5å­¦ä¹ "></a>1.1Spring5å­¦ä¹ </h3><blockquote><p>IOCæ¦‚å¿µ</p></blockquote><ol><li>æ§åˆ¶åè½¬ï¼ŒæŠŠå¯¹è±¡åˆ›å»ºå’Œå¯¹è±¡ä¹‹é—´çš„è°ƒç”¨è¿‡ç¨‹ï¼Œäº¤ç»™Springè¿›è¡Œç®¡ç†</li><li>ä½¿ç”¨IOCç›®çš„ï¼Œä¸ºäº†è€¦åˆåº¦é™ä½</li><li>å…¥é—¨å°±æ˜¯IOCçš„å®ç°</li></ol><blockquote><p>IOCçš„åº•å±‚åŸç†</p></blockquote><ol><li>XMLè§£æã€å·¥å‚æ¨¡å¼ã€åå°„</li></ol><p>IOCè¿‡ç¨‹ï¼šç¬¬ä¸€æ­¥ xmlé…ç½®æ–‡ä»¶ï¼Œé…ç½®åˆ›å»ºçš„å¯¹è±¡</p><p>â€‹                ç¬¬äºŒæ­¥ï¼šæœ‰Serviceç±»å’Œdaoç±»ï¼Œåˆ›å»ºå·¥å‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Factory</span>{<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> UserDao <span class="hljs-title function_">getDao</span><span class="hljs-params">()</span>{<br>        <span class="hljs-type">String</span> <span class="hljs-variable">classValue</span> <span class="hljs-operator">=</span>classå±æ€§å€¼;<span class="hljs-comment">//1.xmlè§£æ</span><br>        Class clazz=Class.forName(classValue)  <span class="hljs-comment">//2.é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡</span><br>        <span class="hljs-keyword">return</span> (UserDao)clazz.newInstance();<br>        <span class="hljs-comment">//è¿›ä¸€æ­¥é™ä½è€¦åˆåº¦</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="2-IOC-BeanFactoryæ¥å£"><a href="#2-IOC-BeanFactoryæ¥å£" class="headerlink" title="2.IOC(BeanFactoryæ¥å£)"></a><strong>2.IOC(BeanFactoryæ¥å£)</strong></h4><p>1ã€IOC æ€æƒ³åŸºäº IOC å®¹å™¨å®Œæˆï¼ŒIOC å®¹å™¨åº•å±‚å°±æ˜¯å¯¹è±¡å·¥å‚</p><p>2ã€Spring æä¾› IOC å®¹å™¨å®ç°ä¸¤ç§æ–¹å¼ï¼šï¼ˆä¸¤ä¸ªæ¥å£ï¼‰</p><p>ï¼ˆ1ï¼‰BeanFactoryï¼šIOC å®¹å™¨åŸºæœ¬å®ç°ï¼Œæ˜¯ Spring å†…éƒ¨çš„ä½¿ç”¨æ¥å£ï¼Œä¸æä¾›å¼€å‘äººå‘˜è¿›è¡Œä½¿ç”¨åŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™ä¸ä¼šåˆ›å»ºå¯¹è±¡ï¼Œåœ¨è·å–å¯¹è±¡ï¼ˆä½¿ç”¨ï¼‰æ‰å»åˆ›å»ºå¯¹è±¡</p><p>ï¼ˆ2ï¼‰ApplicationContextï¼šBeanFactory æ¥å£çš„å­æ¥å£ï¼Œæä¾›æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œä¸€èˆ¬ç”±å¼€å‘äººå‘˜è¿›è¡Œä½¿ç”¨åŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™å°±ä¼šæŠŠåœ¨é…ç½®æ–‡ä»¶å¯¹è±¡è¿›è¡Œåˆ›å»º</p><p>  (3)  ApplicationContext æ¥å£æœ‰å®ç°ç±»</p><h4 id="3-IOCæ“ä½œBeanç®¡ç†"><a href="#3-IOCæ“ä½œBeanç®¡ç†" class="headerlink" title="3.IOCæ“ä½œBeanç®¡ç†"></a>3.IOCæ“ä½œBeanç®¡ç†</h4><p><strong>1ã€ä»€ä¹ˆæ˜¯ Bean ç®¡ç†</strong></p><p>ï¼ˆ0ï¼‰Bean ç®¡ç†æŒ‡çš„æ˜¯ä¸¤ä¸ªæ“ä½œ</p><p>ï¼ˆ1ï¼‰Spring åˆ›å»ºå¯¹è±¡</p><p>ï¼ˆ2ï¼‰Spirng æ³¨å…¥å±æ€§</p><p><strong>2ã€Bean ç®¡ç†æ“ä½œæœ‰ä¸¤ç§æ–¹å¼</strong></p><p>ï¼ˆ1ï¼‰åŸºäº xml é…ç½®æ–‡ä»¶æ–¹å¼å®ç°</p><ul><li>ï¼ˆ1ï¼‰åœ¨ spring é…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ bean æ ‡ç­¾ï¼Œæ ‡ç­¾é‡Œé¢æ·»åŠ å¯¹åº”å±æ€§ï¼Œå°±å¯ä»¥å®ç°å¯¹è±¡åˆ›å»º</li><li>ï¼ˆ2ï¼‰åœ¨ bean æ ‡ç­¾æœ‰å¾ˆå¤šå±æ€§ï¼Œä»‹ç»å¸¸ç”¨çš„å±æ€§ï¼ˆid å±æ€§ï¼šå”¯ä¸€æ ‡è¯† ã€ class å±æ€§ï¼šç±»å…¨è·¯å¾„ï¼ˆåŒ…ç±»è·¯å¾„ï¼‰</li><li>ï¼ˆ3ï¼‰åˆ›å»ºå¯¹è±¡æ—¶å€™ï¼Œé»˜è®¤ä¹Ÿæ˜¯æ‰§è¡Œæ— å‚æ•°æ„é€ æ–¹æ³•å®Œæˆå¯¹è±¡åˆ›å»º</li></ul><p>ï¼ˆ2ï¼‰åŸºäºæ³¨è§£æ–¹å¼å®ç°</p><p>DIï¼šä¾èµ–æ³¨å…¥ï¼Œå°±æ˜¯æ³¨å…¥å±æ€§ï¼›</p><p>3.ç¬¬ä¸€ç§æ³¨å…¥æ–¹å¼ï¼šä½¿ç”¨setæ–¹æ³•è¿›è¡Œæ³¨å…¥</p><p>ï¼ˆ1ï¼‰åˆ›å»ºç±»ï¼Œå®šä¹‰å±æ€§å’Œå¯¹åº”çš„setæ–¹æ³•</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221008191922438.png" alt=""></p><p>(2) åœ¨ spring é…ç½®æ–‡ä»¶é…ç½®å¯¹è±¡åˆ›å»ºï¼Œé…ç½®å±æ€§æ³¨å…¥</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml">    <span class="hljs-comment">&lt;!--é…ç½®--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.atguigu.spring5.User"</span>&gt;</span>  <br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"bname"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"æ˜“ç­‹ç»"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"bauthor"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"è¾¾æ‘©è€ç¥–"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-comment">&lt;!--ä½¿ç”¨ property å®Œæˆå±æ€§æ³¨å…¥  nameï¼šç±»é‡Œé¢å±æ€§åç§° valueï¼šå‘å±æ€§æ³¨å…¥çš„å€¼ --&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>4.<strong>ç¬¬äºŒç§æ³¨å…¥æ–¹å¼ï¼šä½¿ç”¨æœ‰å‚æ•°æ„é€ è¿›è¡Œæ³¨å…¥</strong></p><p>ï¼ˆ1ï¼‰åˆ›å»ºç±»ï¼Œå®šä¹‰å±æ€§ï¼Œåˆ›å»ºå±æ€§å¯¹åº”æœ‰å‚æ„é€ æ–¹æ³•</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> {<br>    <span class="hljs-keyword">private</span> String oname;<br>    <span class="hljs-keyword">private</span> String address;<br>    <span class="hljs-comment">//æœ‰å‚æ„é€ </span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Order</span><span class="hljs-params">(String oname, String address)</span> {<br>        <span class="hljs-built_in">this</span>.oname = oname;<br>        <span class="hljs-built_in">this</span>.address = address;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>(2) åœ¨ spring é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--3 æœ‰å‚æ•°æ„é€ æ³¨å…¥å±æ€§--&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"orders"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.atguigu.spring5.Orders"</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"oname"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ç”µè„‘"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">constructor-arg</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"address"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"China"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">constructor-arg</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>5ã€p åç§°ç©ºé—´æ³¨å…¥ï¼ˆäº†è§£</p><p>ï¼ˆ1ï¼‰ä½¿ç”¨ p åç§°ç©ºé—´æ³¨å…¥ï¼Œå¯ä»¥ç®€åŒ–åŸºäº xml é…ç½®æ–¹å¼ ç¬¬ä¸€æ­¥ æ·»åŠ  p åç§°ç©ºé—´åœ¨é…ç½®æ–‡ä»¶ä¸­</p><p>   (2)ç¬¬äºŒæ­¥ è¿›è¡Œå±æ€§æ³¨å…¥ï¼Œåœ¨ bean æ ‡ç­¾é‡Œé¢è¿›è¡Œæ“ä½œ</p><h4 id="4-IOC-æ“ä½œ-Bean-ç®¡ç†ï¼ˆxml-æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§ï¼‰"><a href="#4-IOC-æ“ä½œ-Bean-ç®¡ç†ï¼ˆxml-æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§ï¼‰" class="headerlink" title="4. IOC æ“ä½œ Bean ç®¡ç†ï¼ˆxml æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§ï¼‰"></a><strong>4. IOC</strong> <strong>æ“ä½œ</strong> <strong>Bean</strong> <strong>ç®¡ç†ï¼ˆxml </strong>æ³¨å…¥å…¶ä»–ç±»å‹å±æ€§ï¼‰</h4><p><strong>1</strong>ã€<strong>å­—é¢é‡</strong></p><p>(1)nullå€¼</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--null å€¼--&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"address"</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">null</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>ï¼ˆ2ï¼‰å±æ€§å€¼åŒ…å«ç‰¹æ®Šç¬¦å·</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å±æ€§å€¼åŒ…å«ç‰¹æ®Šç¬¦å·</span><br><span class="hljs-comment">1 æŠŠ&lt;&gt;è¿›è¡Œè½¬ä¹‰ &amp;lt; &amp;gt;</span><br><span class="hljs-comment"> 2 æŠŠå¸¦ç‰¹æ®Šç¬¦å·å†…å®¹å†™åˆ° CDATA</span><br><span class="hljs-comment">--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"address"</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>&lt;![CDATA[&lt;&lt;å—äº¬&gt;&gt;]]&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p><strong>2</strong>ã€<strong>æ³¨å…¥å±æ€§-å¤–éƒ¨</strong> <strong>bean</strong></p><p>ï¼ˆ1ï¼‰åˆ›å»ºä¸¤ä¸ªç±» service ç±»å’Œ dao ç±» </p><p>ï¼ˆ2ï¼‰åœ¨ service è°ƒç”¨ dao é‡Œé¢çš„æ–¹æ³•</p><p>ï¼ˆ3ï¼‰åœ¨ spring é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {<br> <span class="hljs-comment">//åˆ›å»º UserDao ç±»å‹å±æ€§ï¼Œç”Ÿæˆ set æ–¹æ³•</span><br> <span class="hljs-keyword">private</span> UserDao userDao;<br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUserDao</span><span class="hljs-params">(UserDao userDao)</span> {<br> <span class="hljs-built_in">this</span>.userDao = userDao;<br> }<br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">()</span> {<br> System.out.println(<span class="hljs-string">"service add..............."</span>);<br> userDao.update();<br> } }<br></code></pre></td></tr></tbody></table></figure><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--1 service å’Œ dao å¯¹è±¡åˆ›å»º--&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userService"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.atguigu.spring5.service.UserService"</span>&gt;</span><br> <span class="hljs-comment">&lt;!--æ³¨å…¥ userDao å¯¹è±¡</span><br><span class="hljs-comment"> name å±æ€§ï¼šç±»é‡Œé¢å±æ€§åç§°</span><br><span class="hljs-comment"> ref å±æ€§ï¼šåˆ›å»º userDao å¯¹è±¡ bean æ ‡ç­¾ id å€¼</span><br><span class="hljs-comment"> --&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"userDao"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"userDaoImpl"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userDaoImpl"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.atguigu.spring5.dao.UserDaoImpl"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p><strong>3.xmlçš„å…¶ä»–æ³¨å…¥</strong></p><p><strong>1</strong>ã€æ³¨å…¥æ•°ç»„ç±»å‹å±æ€§</p><p><strong>2</strong>ã€æ³¨å…¥ <strong>List</strong> <strong>é›†åˆç±»å‹å±æ€§</strong></p><p><strong>3</strong>ã€æ³¨å…¥ <strong>Map</strong> <strong>é›†åˆç±»å‹å±æ€§</strong></p><ul><li>é¦–å…ˆå®šä¹‰ä¸€ä¸ªç±»</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.spring5.collectiontype;<br><br><span class="hljs-keyword">import</span> java.util.Arrays;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Map;<br><span class="hljs-keyword">import</span> java.util.Set;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">stu</span> {<br>    <span class="hljs-comment">//æ•°ç»„ç±»å‹çš„å±æ€§</span><br>    <span class="hljs-keyword">private</span> String[]courses;<br>    <span class="hljs-keyword">private</span> List&lt;String&gt; list;<br>    <span class="hljs-keyword">private</span> Map&lt;String,String&gt; map;<br>    <span class="hljs-keyword">private</span> Set&lt;String&gt;set;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCourses</span><span class="hljs-params">(String[] courses)</span> {<br>        <span class="hljs-built_in">this</span>.courses = courses;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setList</span><span class="hljs-params">(List&lt;String&gt; list)</span> {<br>        <span class="hljs-built_in">this</span>.list = list;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMap</span><span class="hljs-params">(Map&lt;String, String&gt; map)</span> {<br>        <span class="hljs-built_in">this</span>.map = map;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSet</span><span class="hljs-params">(Set&lt;String&gt; set)</span> {<br>        <span class="hljs-built_in">this</span>.set = set;<br>    }<br>    <span class="hljs-keyword">public</span>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">text</span><span class="hljs-params">()</span>{<br>        System.out.println(Arrays.toString(courses));<br>        System.out.println(list);<br>        System.out.println(map);<br>        System.out.println(set);<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure><ul><li>æ¥ç€åœ¨xmlæ–‡ä»¶ä¸­æ³¨å…¥å±æ€§å€¼</li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"stu"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.atguigu.spring5.collectiontype.stu"</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"courses"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">array</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Javaè¯¾ç¨‹<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>æ•°æ®åº“è¯¾ç¨‹<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">array</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"list"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">list</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å¼ ä¸‰<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>å°ä¸‰<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">list</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"map"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">map</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"Java"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"java"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">entry</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"PHP"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"php"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">entry</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">map</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"set"</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>MySQL<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>Redis<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><ul><li>æœ€åå†™å‡ºtextæ–¹æ³•è¿›è¡Œè°ƒç”¨</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">textDemo1</span><span class="hljs-params">()</span> {<br>    <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">"bean1.xml"</span>);<br>    <span class="hljs-type">stu</span> <span class="hljs-variable">stu1</span> <span class="hljs-operator">=</span> context.getBean(<span class="hljs-string">"stu"</span>, stu.class);<br>    stu1.text();<br>}<br></code></pre></td></tr></tbody></table></figure><p> <strong>6.å·¥å‚FactoryBean</strong></p><p><strong>1</strong>ã€<strong>Spring</strong>æœ‰ä¸¤ç§ç±»å‹ <strong>bean</strong>ï¼Œä¸€ç§æ™®é€š bean<strong>ï¼Œå¦å¤–ä¸€ç§å·¥å‚</strong> <strong>bean</strong>ï¼ˆFactoryBeanï¼‰</p><p><strong>2</strong>ã€æ™®é€šbean<strong>ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­å®šä¹‰ </strong>bean <strong>ç±»å‹å°±æ˜¯è¿”å›ç±»å‹</strong></p><p><strong>3</strong>ã€å·¥å‚ <strong>bean</strong>ï¼šåœ¨é…ç½®æ–‡ä»¶å®šä¹‰ <strong>bean</strong> <strong>ç±»å‹å¯ä»¥å’Œè¿”å›ç±»å‹ä¸ä¸€æ ·</strong></p><h4 id="5-IOCæ“ä½œBeanç®¡ç†ï¼ˆBeanä½œç”¨åŸŸï¼‰"><a href="#5-IOCæ“ä½œBeanç®¡ç†ï¼ˆBeanä½œç”¨åŸŸï¼‰" class="headerlink" title="5. IOCæ“ä½œBeanç®¡ç†ï¼ˆBeanä½œç”¨åŸŸï¼‰"></a>5. IOCæ“ä½œBeanç®¡ç†ï¼ˆBeanä½œç”¨åŸŸï¼‰</h4><p><strong>1</strong>.<strong>åœ¨</strong> <strong>Spring</strong> <strong>é‡Œé¢ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œbean æ˜¯å•å®ä¾‹å¯¹è±¡</strong></p><p><strong>2</strong>ã€å¦‚ä½•è®¾ç½®å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹</p><p>ï¼ˆ1ï¼‰åœ¨ spring é…ç½®æ–‡ä»¶ bean æ ‡ç­¾é‡Œé¢æœ‰å±æ€§ï¼ˆscopeï¼‰ç”¨äºè®¾ç½®å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹</p><p>ï¼ˆ2ï¼‰scope å±æ€§å€¼</p><ul><li>ç¬¬ä¸€ä¸ªå€¼ é»˜è®¤å€¼ï¼Œsingletonï¼Œè¡¨ç¤ºæ˜¯å•å®ä¾‹å¯¹è±¡</li><li>ç¬¬äºŒä¸ªå€¼ prototypeï¼Œè¡¨ç¤ºæ˜¯å¤šå®ä¾‹å¯¹è±¡</li></ul><p>ï¼ˆ3ï¼‰singleton å’Œ prototype åŒºåˆ«</p><p>ç¬¬ä¸€ singleton å•å®ä¾‹ï¼Œprototype å¤šå®ä¾‹</p><p>ç¬¬äºŒ è®¾ç½® scope å€¼æ˜¯ singleton æ—¶å€™ï¼ŒåŠ è½½ spring é…ç½®æ–‡ä»¶æ—¶å€™å°±ä¼šåˆ›å»ºå•å®ä¾‹å¯¹è±¡ è®¾ç½® scope å€¼æ˜¯ prototype æ—¶å€™ï¼Œä¸æ˜¯åœ¨åŠ è½½ spring é…ç½®æ–‡ä»¶æ—¶å€™åˆ›å»º å¯¹è±¡ï¼Œåœ¨è°ƒç”¨getBean æ–¹æ³•æ—¶å€™åˆ›å»ºå¤šå®ä¾‹å¯¹è±¡ã€‚</p><h4 id="6-IOCæ“ä½œBeanç®¡ç†ï¼ˆBeançš„ç”Ÿå‘½å‘¨æœŸï¼‰"><a href="#6-IOCæ“ä½œBeanç®¡ç†ï¼ˆBeançš„ç”Ÿå‘½å‘¨æœŸï¼‰" class="headerlink" title="6. IOCæ“ä½œBeanç®¡ç†ï¼ˆBeançš„ç”Ÿå‘½å‘¨æœŸï¼‰"></a>6. IOCæ“ä½œBeanç®¡ç†ï¼ˆBeançš„ç”Ÿå‘½å‘¨æœŸï¼‰</h4><p>ï¼ˆ1ï¼‰é€šè¿‡æ„é€ å™¨åˆ›å»º bean å®ä¾‹ï¼ˆæ— å‚æ•°æ„é€ ï¼‰</p><p>ï¼ˆ2ï¼‰ä¸º bean çš„å±æ€§è®¾ç½®å€¼å’Œå¯¹å…¶ä»– bean å¼•ç”¨ï¼ˆè°ƒç”¨ set æ–¹æ³•ï¼‰</p><p>ï¼ˆ3ï¼‰è°ƒç”¨ bean çš„åˆå§‹åŒ–çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®åˆå§‹åŒ–çš„æ–¹æ³•ï¼‰</p><p>ï¼ˆ4ï¼‰bean å¯ä»¥ä½¿ç”¨äº†ï¼ˆå¯¹è±¡è·å–åˆ°äº†ï¼‰</p><p>ï¼ˆ5ï¼‰å½“å®¹å™¨å…³é—­æ—¶å€™ï¼Œè°ƒç”¨ bean çš„é”€æ¯çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®é”€æ¯çš„æ–¹æ³•ï¼‰</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Orders</span> {<br> <span class="hljs-comment">//æ— å‚æ•°æ„é€ </span><br> <span class="hljs-keyword">public</span> <span class="hljs-title function_">Orders</span><span class="hljs-params">()</span> {<br> System.out.println(<span class="hljs-string">"ç¬¬ä¸€æ­¥ æ‰§è¡Œæ— å‚æ•°æ„é€ åˆ›å»º bean å®ä¾‹"</span>);<br> }<br> <span class="hljs-keyword">private</span> String oname;<br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setOname</span><span class="hljs-params">(String oname)</span> {<br> <span class="hljs-built_in">this</span>.oname = oname;<br> System.out.println(<span class="hljs-string">"ç¬¬äºŒæ­¥ è°ƒç”¨ set æ–¹æ³•è®¾ç½®å±æ€§å€¼"</span>);<br> }<br> <span class="hljs-comment">//åˆ›å»ºæ‰§è¡Œçš„åˆå§‹åŒ–çš„æ–¹æ³•</span><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initMethod</span><span class="hljs-params">()</span> {<br> System.out.println(<span class="hljs-string">"ç¬¬ä¸‰æ­¥ æ‰§è¡Œåˆå§‹åŒ–çš„æ–¹æ³•"</span>);<br> }<br> <span class="hljs-comment">//åˆ›å»ºæ‰§è¡Œçš„é”€æ¯çš„æ–¹æ³•</span><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroyMethod</span><span class="hljs-params">()</span> {<br> System.out.println(<span class="hljs-string">"ç¬¬äº”æ­¥ æ‰§è¡Œé”€æ¯çš„æ–¹æ³•"</span>);<br> } }<br><br> <span class="hljs-meta">@Test</span><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testBean3</span><span class="hljs-params">()</span> {<br><span class="hljs-comment">// ApplicationContext context =</span><br><span class="hljs-comment">// new ClassPathXmlApplicationContext("bean4.xml");</span><br> <span class="hljs-type">ClassPathXmlApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span><br> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">"bean4.xml"</span>);<br> <span class="hljs-type">Orders</span> <span class="hljs-variable">orders</span> <span class="hljs-operator">=</span> context.getBean(<span class="hljs-string">"orders"</span>, Orders.class);<br> System.out.println(<span class="hljs-string">"ç¬¬å››æ­¥ è·å–åˆ›å»º bean å®ä¾‹å¯¹è±¡"</span>);<br> System.out.println(orders);<br> <span class="hljs-comment">//æ‰‹åŠ¨è®© bean å®ä¾‹é”€æ¯</span><br> context.close();<br> }<br></code></pre></td></tr></tbody></table></figure><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"orders"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.atguigu.spring5.bean.Orders"</span> <span class="hljs-attr">init</span><span class="hljs-attr">method</span>=<span class="hljs-string">"initMethod"</span> <span class="hljs-attr">destroy-method</span>=<span class="hljs-string">"destroyMethod"</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"oname"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"æ‰‹æœº"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221009164124690.png" alt=""></p><p><strong>2ã€ </strong>bean <strong>çš„åç½®å¤„ç†å™¨ï¼Œ </strong> <strong>bean</strong> <strong>ç”Ÿå‘½å‘¨æœŸæœ‰ä¸ƒæ­¥</strong></p><p>ï¼ˆ1ï¼‰é€šè¿‡æ„é€ å™¨åˆ›å»º bean å®ä¾‹ï¼ˆæ— å‚æ•°æ„é€ ï¼‰</p><p>ï¼ˆ2ï¼‰ä¸º bean çš„å±æ€§è®¾ç½®å€¼å’Œå¯¹å…¶ä»– bean å¼•ç”¨ï¼ˆè°ƒç”¨ set æ–¹æ³•ï¼‰</p><p>ï¼ˆ3ï¼‰æŠŠ bean å®ä¾‹ä¼ é€’ bean åç½®å¤„ç†å™¨çš„æ–¹æ³• postProcessBeforeInitialization </p><p>ï¼ˆ4ï¼‰è°ƒç”¨ bean çš„åˆå§‹åŒ–çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®åˆå§‹åŒ–çš„æ–¹æ³•ï¼‰</p><p>ï¼ˆ5ï¼‰æŠŠ <strong>bean</strong> <strong>å®ä¾‹ä¼ é€’</strong> <strong>bean</strong> <strong>åç½®å¤„ç†å™¨çš„æ–¹æ³•</strong> postProcessAfterInitialization</p><p>ï¼ˆ6ï¼‰bean å¯ä»¥ä½¿ç”¨äº†ï¼ˆå¯¹è±¡è·å–åˆ°äº†ï¼‰</p><p>ï¼ˆ7ï¼‰å½“å®¹å™¨å…³é—­æ—¶å€™ï¼Œè°ƒç”¨ bean çš„é”€æ¯çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®é”€æ¯çš„æ–¹æ³•ï¼‰</p><h4 id="6-IOCæ“ä½œBeanç®¡ç†-åŸºäºæ³¨è§£æ–¹æ³•"><a href="#6-IOCæ“ä½œBeanç®¡ç†-åŸºäºæ³¨è§£æ–¹æ³•" class="headerlink" title="6.IOCæ“ä½œBeanç®¡ç†(åŸºäºæ³¨è§£æ–¹æ³•)"></a>6.IOCæ“ä½œBeanç®¡ç†(åŸºäºæ³¨è§£æ–¹æ³•)</h4><p><strong>1</strong> <strong>ã€ä»€ä¹ˆæ˜¯æ³¨è§£</strong></p><p>ï¼ˆ1ï¼‰æ³¨è§£æ˜¯ä»£ç ç‰¹æ®Šæ ‡è®°ï¼Œæ ¼å¼ï¼š@æ³¨è§£åç§°(å±æ€§åç§°=å±æ€§å€¼, å±æ€§åç§°=å±æ€§å€¼..)</p><p>ï¼ˆ2ï¼‰ä½¿ç”¨æ³¨è§£ï¼Œæ³¨è§£ä½œç”¨åœ¨ç±»ä¸Šé¢ï¼Œæ–¹æ³•ä¸Šé¢ï¼Œå±æ€§ä¸Šé¢</p><p>ï¼ˆ3ï¼‰ä½¿ç”¨æ³¨è§£ç›®çš„ï¼šç®€åŒ– xml é…ç½®</p><p><strong>2</strong> <strong>ã€</strong> <strong>Spring</strong> <strong>é’ˆå¯¹</strong> <strong>Bean</strong> <strong>ç®¡ç†ä¸­åˆ›å»ºå¯¹è±¡æä¾›æ³¨è§£</strong></p><p>ï¼ˆ1ï¼‰@Component</p><p>ï¼ˆ2ï¼‰@Service</p><p>ï¼ˆ3ï¼‰@Controller</p><p>ï¼ˆ4ï¼‰@Repository</p><p>* ä¸Šé¢å››ä¸ªæ³¨è§£åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä»¥ç”¨æ¥åˆ›å»º bean å®ä¾‹</p><p><strong>3</strong> <strong>ã€åŸºäºæ³¨è§£æ–¹å¼å®ç°å¯¹è±¡åˆ›å»º</strong></p><ul><li>ç¬¬ä¸€æ­¥ å¼•å…¥ä¾èµ–</li><li>ç¬¬äºŒæ­¥ å¼€å¯ç»„ä»¶æ‰«æ</li><li>ç¬¬ä¸‰æ­¥ åˆ›å»ºç±»ï¼Œåœ¨ç±»ä¸Šé¢æ·»åŠ åˆ›å»ºå¯¹è±¡æ³¨è§£</li></ul><p><strong>4</strong> <strong>ã€å¼€å¯ç»„ä»¶æ‰«æç»†èŠ‚é…ç½®</strong></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--ç¤ºä¾‹ 1</span><br><span class="hljs-comment"> use-default-filters="false" è¡¨ç¤ºç°åœ¨ä¸ä½¿ç”¨é»˜è®¤ filterï¼Œè‡ªå·±é…ç½® filter</span><br><span class="hljs-comment"> context:include-filter ï¼Œè®¾ç½®æ‰«æå“ªäº›å†…å®¹</span><br><span class="hljs-comment">--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"com.atguigu"</span> <span class="hljs-attr">use-default</span><span class="hljs-attr">filters</span>=<span class="hljs-string">"false"</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">context:include-filter</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"annotation"</span> </span><br><span class="hljs-tag"> </span><br><span class="hljs-tag"><span class="hljs-attr">expression</span>=<span class="hljs-string">"org.springframework.stereotype.Controller"</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br><span class="hljs-comment">&lt;!--ç¤ºä¾‹ 2</span><br><span class="hljs-comment"> ä¸‹é¢é…ç½®æ‰«æåŒ…æ‰€æœ‰å†…å®¹</span><br><span class="hljs-comment"> context:exclude-filterï¼š è®¾ç½®å“ªäº›å†…å®¹ä¸è¿›è¡Œæ‰«æ</span><br><span class="hljs-comment">--&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"com.atguigu"</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">context:exclude-filter</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"annotation"</span> </span><br><span class="hljs-tag"> </span><br><span class="hljs-tag"><span class="hljs-attr">expression</span>=<span class="hljs-string">"org.springframework.stereotype.Controller"</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p><strong>5</strong> <strong>ã€åŸºäºæ³¨è§£æ–¹å¼å®ç°å±æ€§æ³¨å…¥</strong></p><ul><li><p>@Autowiredï¼šæ ¹æ®å±æ€§ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…</p><p>ç¬¬ä¸€æ­¥ æŠŠ service å’Œ dao å¯¹è±¡åˆ›å»ºï¼Œåœ¨ service å’Œ dao ç±»æ·»åŠ åˆ›å»ºå¯¹è±¡æ³¨è§£</p><p>ç¬¬äºŒæ­¥ åœ¨ service æ³¨å…¥ dao å¯¹è±¡ï¼Œåœ¨ service ç±»æ·»åŠ  dao ç±»å‹å±æ€§ï¼Œåœ¨å±æ€§ä¸Šé¢ä½¿ç”¨æ³¨è§£</p></li><li><p>@Qualifierï¼šæ ¹æ®åç§°è¿›è¡Œæ³¨å…¥</p><p>è¿™ä¸ª@Qualifier æ³¨è§£çš„ä½¿ç”¨ï¼Œå’Œä¸Šé¢@Autowired ä¸€èµ·ä½¿ç”¨</p><p><em>//æ·»åŠ æ³¨å…¥å±æ€§æ³¨è§£</em></p><p>@Autowired <em>//æ ¹æ®ç±»å‹è¿›è¡Œæ³¨å…¥</em></p><p>@Qualifier(value = <strong>â€œuserDaoImpl1â€</strong>) <em>//æ ¹æ®åç§°è¿›è¡Œæ³¨å…¥</em></p></li><li><p>@Resourceï¼šå¯ä»¥æ ¹æ®ç±»å‹æ³¨å…¥ï¼Œå¯ä»¥æ ¹æ®åç§°æ³¨å…¥   //@Resource(name = <strong>â€œuserDaoImpl1â€</strong>) <em>//æ ¹æ®åç§°è¿›è¡Œæ³¨å…¥</em></p></li><li><p>@Valueï¼šæ³¨å…¥æ™®é€šç±»å‹å±æ€§</p></li></ul><p><strong>6ã€å®Œå…¨æ³¨è§£å¼€å‘</strong> </p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">ï¼ˆ<span class="hljs-number">1</span>ï¼‰åˆ›å»ºé…ç½®ç±»ï¼Œæ›¿ä»£ xml é…ç½®æ–‡ä»¶<br><span class="hljs-meta">@Configuration</span> <span class="hljs-comment">//ä½œä¸ºé…ç½®ç±»ï¼Œæ›¿ä»£ xml é…ç½®æ–‡ä»¶</span><br><span class="hljs-meta">@ComponentScan(basePackages = {"com.atguigu"})</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringConfig</span> {<br>}<br></code></pre></td></tr></tbody></table></figure><h4 id="7-AOP-æ¦‚å¿µ"><a href="#7-AOP-æ¦‚å¿µ" class="headerlink" title="7.AOP(æ¦‚å¿µ)"></a>7.AOP(æ¦‚å¿µ)</h4><p><strong>1</strong> <strong>ã€ä»€ä¹ˆæ˜¯</strong> <strong>AOP</strong></p><p>ï¼ˆ1ï¼‰é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆæ–¹é¢ï¼‰ï¼Œåˆ©ç”¨ AOP å¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p><p>ï¼ˆ2ï¼‰é€šä¿—æè¿°ï¼šä¸é€šè¿‡ä¿®æ”¹æºä»£ç æ–¹å¼ï¼Œåœ¨ä¸»å¹²åŠŸèƒ½é‡Œé¢æ·»åŠ æ–°åŠŸèƒ½</p><p>ï¼ˆ3ï¼‰ä½¿ç”¨ç™»å½•ä¾‹å­è¯´æ˜ AOP</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221010165047937.png" alt="image-20221010165047937"></p><p><strong>1</strong> <strong>ã€</strong> <strong>AOP</strong> <strong>åº•å±‚ä½¿ç”¨åŠ¨æ€ä»£ç†</strong></p><p>ï¼ˆ1ï¼‰æœ‰ä¸¤ç§æƒ…å†µåŠ¨æ€ä»£ç†</p><p><strong>ç¬¬ä¸€ç§ æœ‰æ¥å£æƒ…å†µï¼Œä½¿ç”¨</strong> <strong>JDK</strong> <strong>åŠ¨æ€ä»£ç†</strong></p><p>âš« åˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³•</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221010165410954.png" alt="image-20221010165410954"></p><p><strong>ç¬¬äºŒç§ æ²¡æœ‰æ¥å£æƒ…å†µï¼Œä½¿ç”¨</strong> <strong>CGLIB</strong> <strong>åŠ¨æ€ä»£ç†</strong></p><p>âš« åˆ›å»ºå­ç±»çš„ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³•</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221010165427947.png" alt="image-20221010165427947"></p><p><strong>2.AOP</strong> <strong>ï¼ˆ</strong> <strong>JDK</strong> <strong>åŠ¨æ€ä»£ç†ï¼‰</strong></p><p>1ã€ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼Œä½¿ç”¨ Proxy ç±»é‡Œé¢çš„æ–¹æ³•åˆ›å»ºä»£ç†å¯¹è±¡</p><p>ï¼ˆ1ï¼‰è°ƒç”¨ newProxyInstance æ–¹æ³•</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221010165618081.png" alt="image-20221010165618081"></p><p>æ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li>ç¬¬ä¸€å‚æ•°ï¼Œç±»åŠ è½½å™¨</li><li>ç¬¬äºŒå‚æ•°ï¼Œå¢å¼ºæ–¹æ³•æ‰€åœ¨çš„ç±»ï¼Œè¿™ä¸ªç±»å®ç°çš„æ¥å£ï¼Œæ”¯æŒå¤šä¸ªæ¥å£</li><li>ç¬¬ä¸‰å‚æ•°ï¼Œå®ç°è¿™ä¸ªæ¥å£ InvocationHandlerï¼Œåˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå†™å¢å¼ºçš„éƒ¨åˆ†</li></ul><p><strong>2</strong> <strong>ã€ç¼–å†™</strong> <strong>JDK</strong> <strong>åŠ¨æ€ä»£ç†ä»£ç </strong></p><p>ï¼ˆ1ï¼‰åˆ›å»ºæ¥å£ï¼Œå®šä¹‰æ–¹æ³•</p><p>ï¼ˆ2ï¼‰åˆ›å»ºæ¥å£å®ç°ç±»ï¼Œå®ç°æ–¹æ³•</p><p>ï¼ˆ3ï¼‰ä½¿ç”¨ Proxy ç±»åˆ›å»ºæ¥å£ä»£ç†å¯¹è±¡</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//(1)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserDao</span> {<br> <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a,<span class="hljs-type">int</span> b)</span>;<br> <span class="hljs-keyword">public</span> String <span class="hljs-title function_">update</span><span class="hljs-params">(String id)</span>;<br>}<br><span class="hljs-comment">//(2)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDao</span> {<br> <span class="hljs-meta">@Override</span><br> <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {<br> <span class="hljs-keyword">return</span> a+b;<br> }<br> <span class="hljs-meta">@Override</span><br> <span class="hljs-keyword">public</span> String <span class="hljs-title function_">update</span><span class="hljs-params">(String id)</span> {<br> <span class="hljs-keyword">return</span> id;<br> } }<br><span class="hljs-comment">//(3)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JDKProxy</span> {<br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br> <span class="hljs-comment">//åˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†å¯¹è±¡</span><br> Class[] interfaces = {UserDao.class};<br>     <span class="hljs-type">UserDaoImpl</span> <span class="hljs-variable">userDao</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserDaoImpl</span>();<br> <span class="hljs-type">UserDao</span> <span class="hljs-variable">dao</span> <span class="hljs-operator">=</span> <br>(UserDao)Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces, <br><span class="hljs-keyword">new</span> <span class="hljs-title class_">UserDaoProxy</span>(userDao));<br> <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> dao.add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br> System.out.println(<span class="hljs-string">"result:"</span>+result);<br> } }<br><span class="hljs-comment">//åˆ›å»ºä»£ç†å¯¹è±¡ä»£ç </span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InvocationHandler</span> {<br> <span class="hljs-comment">//1 æŠŠåˆ›å»ºçš„æ˜¯è°çš„ä»£ç†å¯¹è±¡ï¼ŒæŠŠè°ä¼ é€’è¿‡æ¥</span><br> <span class="hljs-comment">//æœ‰å‚æ•°æ„é€ ä¼ é€’</span><br> <span class="hljs-keyword">private</span> Object obj;<br> <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserDaoProxy</span><span class="hljs-params">(Object obj)</span> {<br> <span class="hljs-built_in">this</span>.obj = obj;<br> }<br> <span class="hljs-comment">//å¢å¼ºçš„é€»è¾‘</span><br> <span class="hljs-meta">@Override</span><br> <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> <br>Throwable {<br> <span class="hljs-comment">//æ–¹æ³•ä¹‹å‰</span><br> System.out.println(<span class="hljs-string">"æ–¹æ³•ä¹‹å‰æ‰§è¡Œ...."</span>+method.getName()+<span class="hljs-string">" :ä¼ é€’çš„å‚</span><br><span class="hljs-string">æ•°..."</span>+ Arrays.toString(args));<br> <span class="hljs-comment">//è¢«å¢å¼ºçš„æ–¹æ³•æ‰§è¡Œ</span><br> <span class="hljs-type">Object</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> method.invoke(obj, args);<br> <span class="hljs-comment">//æ–¹æ³•ä¹‹å</span><br> System.out.println(<span class="hljs-string">"æ–¹æ³•ä¹‹åæ‰§è¡Œ...."</span>+obj);<br> <span class="hljs-keyword">return</span> res;<br> } }<br></code></pre></td></tr></tbody></table></figure><p><strong>3.AOP(æœ¯è¯­)</strong></p><p>1.é“¾æ¥ç‚¹</p><p>ç±»é‡Œé¢é‚£äº›æ–¹æ³•å¯ä»¥è¢«å¢å¼ºï¼Œè¿™äº›æ–¹æ³•ç§°ä¸ºé“¾æ¥ç‚¹</p><p>2.åˆ‡å…¥ç‚¹</p><p>å®é™…è¢«çœŸæ­£å¢å¼ºçš„æ–¹æ³•ï¼Œç§°ä¸ºåˆ‡å…¥ç‚¹</p><p>3.é€šçŸ¥ï¼ˆå¢å¼ºï¼‰</p><p>ï¼ˆ1ï¼‰å®é™…å¢å¼ºçš„é€»è¾‘éƒ¨åˆ†ç§°ä¸ºé€šçŸ¥ï¼ˆå¢å¼ºï¼‰</p><p>ï¼ˆ2ï¼‰é€šçŸ¥æœ‰å¤šç§ç±»å‹</p><ul><li>å‰ç½®é€šçŸ¥</li><li>åç½®é€šçŸ¥</li><li>ç¯ç»•é€šçŸ¥</li><li>å¼‚å¸¸é€šçŸ¥</li><li>æœ€ç»ˆé€šçŸ¥</li></ul><p>4.åˆ‡é¢</p><p>æ˜¯åŠ¨ä½œï¼šæŠŠé€šçŸ¥åº”ç”¨åˆ°åˆ‡å…¥ç‚¹è¿‡ç¨‹</p><h4 id="8-AOPæ“ä½œï¼ˆå‡†å¤‡å·¥ä½œï¼‰"><a href="#8-AOPæ“ä½œï¼ˆå‡†å¤‡å·¥ä½œï¼‰" class="headerlink" title="8.AOPæ“ä½œï¼ˆå‡†å¤‡å·¥ä½œï¼‰"></a>8.AOPæ“ä½œï¼ˆå‡†å¤‡å·¥ä½œï¼‰</h4><p><strong>1**</strong>ã€<strong>**Spring</strong> <strong>æ¡†æ¶ä¸€èˆ¬éƒ½æ˜¯åŸºäº</strong> <strong>AspectJ</strong> <strong>å®ç°</strong> <strong>AOP</strong> <strong>æ“ä½œ</strong></p><p>ï¼ˆ1ï¼‰AspectJ ä¸æ˜¯ Spring ç»„æˆéƒ¨åˆ†ï¼Œç‹¬ç«‹ AOP æ¡†æ¶ï¼Œä¸€èˆ¬æŠŠ AspectJ å’Œ Spirng æ¡†æ¶ä¸€èµ·ä½¿</p><p>ç”¨ï¼Œè¿›è¡Œ AOP æ“ä½œ</p><p><strong>2</strong> <strong>ã€åŸºäº</strong> <strong>AspectJ</strong> <strong>å®ç°</strong> <strong>AOP</strong> <strong>æ“ä½œ</strong></p><p>ï¼ˆ1ï¼‰åŸºäº xml é…ç½®æ–‡ä»¶å®ç°</p><p>ï¼ˆ2ï¼‰åŸºäºæ³¨è§£æ–¹å¼å®ç°ï¼ˆä½¿ç”¨ï¼‰</p><p><strong>3</strong> <strong>ã€åœ¨é¡¹ç›®å·¥ç¨‹é‡Œé¢å¼•å…¥</strong> <strong>AOP</strong> <strong>ç›¸å…³ä¾èµ–</strong></p><p><strong>4</strong> <strong>ã€åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</strong></p><p>ï¼ˆ1ï¼‰åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä½œç”¨ï¼šçŸ¥é“å¯¹å“ªä¸ªç±»é‡Œé¢çš„å“ªä¸ªæ–¹æ³•è¿›è¡Œå¢å¼º</p><p>ï¼ˆ2ï¼‰è¯­æ³•ç»“æ„ï¼š execution([æƒé™ä¿®é¥°ç¬¦] [è¿”å›ç±»å‹] [ç±»å…¨è·¯å¾„] [æ–¹æ³•åç§°] ([å‚æ•°åˆ—è¡¨]) )</p><ul><li><p>ä¸¾ä¾‹ 1ï¼šå¯¹ com.atguigu.dao.BookDao ç±»é‡Œé¢çš„ add è¿›è¡Œå¢å¼º execution(* com.atguigu.dao.BookDao.add(..))</p></li><li><p>ä¸¾ä¾‹ 2ï¼šå¯¹ com.atguigu.dao.BookDao ç±»é‡Œé¢çš„æ‰€æœ‰çš„æ–¹æ³•è¿›è¡Œå¢å¼º execution(<em> com.atguigu.dao.BookDao.</em> (..))</p></li><li><p>ä¸¾ä¾‹ 3ï¼šå¯¹ com.atguigu.dao åŒ…é‡Œé¢æ‰€æœ‰ç±»ï¼Œç±»é‡Œé¢æ‰€æœ‰æ–¹æ³•è¿›è¡Œå¢å¼º execution(<em> com.atguigu.dao.</em>.* (..))</p></li></ul><p><strong>5.AOP</strong> <strong>æ“ä½œï¼ˆ</strong> <strong>AspectJ</strong> <strong>æ³¨è§£ï¼‰</strong></p><p><strong>1</strong> <strong>ã€åˆ›å»ºç±»ï¼Œåœ¨ç±»é‡Œé¢å®šä¹‰æ–¹æ³•</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {<br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">()</span> {<br> System.out.println(<span class="hljs-string">"add......."</span>);<br> }<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>2</strong> <strong>ã€åˆ›å»ºå¢å¼ºç±»ï¼ˆç¼–å†™å¢å¼ºé€»è¾‘ï¼‰</strong></p><p>ï¼ˆ1ï¼‰åœ¨å¢å¼ºç±»é‡Œé¢ï¼Œåˆ›å»ºæ–¹æ³•ï¼Œè®©ä¸åŒæ–¹æ³•ä»£è¡¨ä¸åŒé€šçŸ¥ç±»å‹</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å¢å¼ºçš„ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserProxy</span> {<br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span> {<span class="hljs-comment">//å‰ç½®é€šçŸ¥</span><br> System.out.println(<span class="hljs-string">"before......"</span>);<br> } }<br></code></pre></td></tr></tbody></table></figure><p><strong>3</strong> <strong>ã€è¿›è¡Œé€šçŸ¥çš„é…ç½®</strong></p><p>ï¼ˆ1ï¼‰åœ¨ spring é…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å¯æ³¨è§£æ‰«æ</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">"http://www.springframework.org/schema/context"</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:aop</span>=<span class="hljs-string">"http://www.springframework.org/schema/aop"</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">                            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="hljs-string"><span class="hljs-tag">                            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--å¼€å¯ç»„ä»¶æ‰«æ--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"com.atguigu.spring5.aopanno"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">context:component-scan</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>ï¼ˆ2ï¼‰ä½¿ç”¨æ³¨è§£åˆ›å»º User å’Œ UserProxy å¯¹è±¡</p><p>ï¼ˆ3ï¼‰åœ¨å¢å¼ºç±»ä¸Šé¢æ·»åŠ æ³¨è§£ @Aspect</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//User.javaä¸­</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"add,......"</span>);<br>    }<br>}<br><span class="hljs-comment">//UserProxy.javaä¸­</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Aspect</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserProxy</span> {<br>    <span class="hljs-meta">@Before(value = "execution(* com.atguigu.spring5.aopanno.User.add(..))")</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span>{<br>        System.out.println(<span class="hljs-string">"before....."</span>);<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure><p>ï¼ˆ4ï¼‰åœ¨ spring é…ç½®æ–‡ä»¶ä¸­å¼€å¯ç”Ÿæˆä»£ç†å¯¹è±¡</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¼€å¯ Aspect ç”Ÿæˆä»£ç†å¯¹è±¡--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">aop:aspectj-autoproxy</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">aop:aspectj-autoproxy</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p><strong>4</strong> <strong>ã€é…ç½®ä¸åŒç±»å‹çš„é€šçŸ¥</strong></p><p>ï¼ˆ1ï¼‰åœ¨å¢å¼ºç±»çš„é‡Œé¢ï¼Œåœ¨ä½œä¸ºé€šçŸ¥æ–¹æ³•ä¸Šé¢æ·»åŠ é€šçŸ¥ç±»å‹æ³¨è§£ï¼Œä½¿ç”¨åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é…ç½®</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Aspect</span> <span class="hljs-comment">//ç”Ÿæˆä»£ç†å¯¹è±¡</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserProxy</span> {<br>    <span class="hljs-comment">//å‰ç½®é€šçŸ¥</span><br>    <span class="hljs-comment">//@Before æ³¨è§£è¡¨ç¤ºä½œä¸ºå‰ç½®é€šçŸ¥</span><br>    <span class="hljs-meta">@Before(value = "execution(* com.atguigu.spring5.aopanno.User.add(..))")</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">before</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"before........."</span>);<br>    }<br>    <span class="hljs-comment">//åç½®é€šçŸ¥ï¼ˆè¿”å›é€šçŸ¥ï¼‰</span><br>    <span class="hljs-meta">@AfterReturning(value = "execution(* </span><br><span class="hljs-meta">            com.atguigu.spring5.aopanno.User.add(..))")</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterReturning</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"afterReturning........."</span>);<br>    }<br><br>    <span class="hljs-comment">//æœ€ç»ˆé€šçŸ¥</span><br>    <span class="hljs-meta">@After(value = "execution(* com.atguigu.spring5.aopanno.User.add(..))")</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">after</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"after........."</span>);<br>    }<br>    <span class="hljs-comment">//å¼‚å¸¸é€šçŸ¥</span><br>    <span class="hljs-meta">@AfterThrowing(value = "execution(* </span><br><span class="hljs-meta">            com.atguigu.spring5.aopanno.User.add(..))")</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterThrowing</span><span class="hljs-params">()</span> {<br>        System.out.println(<span class="hljs-string">"afterThrowing........."</span>);<br>    }<br><br>    <span class="hljs-comment">//ç¯ç»•é€šçŸ¥</span><br>    <span class="hljs-meta">@Around(value = "execution(* com.atguigu.spring5.aopanno.User.add(..))")</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">around</span><span class="hljs-params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="hljs-keyword">throws</span><br>            Throwable {<br>        System.out.println(<span class="hljs-string">"ç¯ç»•ä¹‹å‰........."</span>);<br>        <span class="hljs-comment">//è¢«å¢å¼ºçš„æ–¹æ³•æ‰§è¡Œ</span><br>        proceedingJoinPoint.proceed();<br>        System.out.println(<span class="hljs-string">"ç¯ç»•ä¹‹å........."</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>5</strong> <strong>ã€ç›¸åŒçš„åˆ‡å…¥ç‚¹æŠ½å–</strong></p><p><em>//ç›¸åŒåˆ‡å…¥ç‚¹æŠ½å–</em></p><p>@Pointcut(value = <strong>â€œexecution(* com.atguigu.spring5.aopanno.User.add(..))â€</strong>)</p><p><strong>6</strong> <strong>ã€æœ‰å¤šä¸ªå¢å¼ºç±»å¤šåŒä¸€ä¸ªæ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œè®¾ç½®å¢å¼ºç±»ä¼˜å…ˆçº§</strong></p><p>ï¼ˆ1ï¼‰åœ¨å¢å¼ºç±»ä¸Šé¢æ·»åŠ æ³¨è§£ @Order(æ•°å­—ç±»å‹å€¼)ï¼Œæ•°å­—ç±»å‹å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Aspect</span><br><span class="hljs-meta">@Order(1)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PersonProxy</span><br></code></pre></td></tr></tbody></table></figure><h1 id="2-äº‹åŠ¡æ¦‚å¿µ"><a href="#2-äº‹åŠ¡æ¦‚å¿µ" class="headerlink" title="2.äº‹åŠ¡æ¦‚å¿µ"></a>2.äº‹åŠ¡æ¦‚å¿µ</h1><p><strong>1</strong> <strong>ã€ä»€ä¹ˆäº‹åŠ¡</strong></p><p>ï¼ˆ1ï¼‰äº‹åŠ¡æ˜¯æ•°æ®åº“æ“ä½œæœ€åŸºæœ¬å•å…ƒï¼Œé€»è¾‘ä¸Šä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¤±è´¥æ‰€æœ‰æ“</p><p>ä½œéƒ½å¤±è´¥</p><p>ï¼ˆ2ï¼‰å…¸å‹åœºæ™¯ï¼šé“¶è¡Œè½¬è´¦</p><p>* lucy è½¬è´¦ 100 å…ƒ ç»™ mary</p><p>* lucy å°‘ 100ï¼Œmary å¤š 100</p><p><strong>2</strong> <strong>ã€äº‹åŠ¡å››ä¸ªç‰¹æ€§ï¼ˆ</strong> <strong>ACID</strong> <strong>ï¼‰</strong> </p><p>ï¼ˆ1ï¼‰åŸå­æ€§</p><p>ï¼ˆ2ï¼‰ä¸€è‡´æ€§</p><p>ï¼ˆ3ï¼‰éš”ç¦»æ€§</p><p>ï¼ˆ4ï¼‰æŒä¹…æ€§</p><p><strong>3.äº‹åŠ¡æ“ä½œï¼ˆæ­å»ºäº‹åŠ¡æ“ä½œç¯å¢ƒï¼‰</strong></p><ul><li><p><strong>åˆ›å»ºæ•°æ®åº“è¡¨ï¼Œæ·»åŠ è®°å½•</strong></p></li><li><p><strong>åˆ›å»º</strong> <strong>service</strong> <strong>ï¼Œæ­å»º</strong> <strong>dao</strong> <strong>ï¼Œå®Œæˆå¯¹è±¡åˆ›å»ºå’Œæ³¨å…¥å…³ç³»</strong></p></li></ul><p>ï¼ˆ1ï¼‰service æ³¨å…¥ daoï¼Œåœ¨ dao æ³¨å…¥ JdbcTemplateï¼Œåœ¨ JdbcTemplate æ³¨å…¥ DataSource</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {<br> <span class="hljs-comment">//æ³¨å…¥ dao</span><br> <span class="hljs-meta">@Autowired</span><br> <span class="hljs-keyword">private</span> UserDao userDao; }<br><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDao</span> {<br> <span class="hljs-meta">@Autowired</span><br> <span class="hljs-keyword">private</span> JdbcTemplate jdbcTemplate; }<br></code></pre></td></tr></tbody></table></figure><ul><li><strong>åœ¨</strong> <strong>dao</strong> <strong>åˆ›å»ºä¸¤ä¸ªæ–¹æ³•ï¼šå¤šé’±å’Œå°‘é’±çš„æ–¹æ³•ï¼Œåœ¨</strong> <strong>service</strong> <strong>åˆ›å»ºæ–¹æ³•ï¼ˆè½¬è´¦çš„æ–¹æ³•ï¼‰</strong></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDao</span> {<br> <span class="hljs-meta">@Autowired</span><br> <span class="hljs-keyword">private</span> JdbcTemplate jdbcTemplate;<br> <span class="hljs-comment">//lucy è½¬è´¦ 100 ç»™ mary</span><br> <span class="hljs-comment">//å°‘é’±</span><br> <span class="hljs-meta">@Override</span><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reduceMoney</span><span class="hljs-params">()</span> {<br> <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"update t_account set money=money-? where username=?"</span>;<br> jdbcTemplate.update(sql,<span class="hljs-number">100</span>,<span class="hljs-string">"lucy"</span>);<br> }<br> <span class="hljs-comment">//å¤šé’±</span><br> <span class="hljs-meta">@Override</span><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addMoney</span><span class="hljs-params">()</span> {<br> <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"update t_account set money=money+? where username=?"</span>;<br> jdbcTemplate.update(sql,<span class="hljs-number">100</span>,<span class="hljs-string">"mary"</span>);<br> } }<br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {<br> <span class="hljs-comment">//æ³¨å…¥ dao</span><br> <span class="hljs-meta">@Autowired</span><br> <span class="hljs-keyword">private</span> UserDao userDao;<br> <span class="hljs-comment">//è½¬è´¦çš„æ–¹æ³•</span><br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accountMoney</span><span class="hljs-params">()</span> {<br> <span class="hljs-comment">//lucy å°‘ 100</span><br> userDao.reduceMoney();<br> <span class="hljs-comment">//mary å¤š 100</span><br> userDao.addMoney();<br> } }<br></code></pre></td></tr></tbody></table></figure><p><strong>4ã€äº‹åŠ¡æ“ä½œï¼ˆ</strong> <strong>Spring</strong> <strong>äº‹åŠ¡ç®¡ç†ä»‹ç»ï¼‰</strong></p><ul><li><strong>äº‹åŠ¡æ·»åŠ åˆ°</strong> <strong>JavaEE</strong> <strong>ä¸‰å±‚ç»“æ„é‡Œé¢</strong> <strong>Service</strong> <strong>å±‚ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰</strong></li><li><strong>åœ¨</strong> <strong>Spring</strong> <strong>è¿›è¡Œäº‹åŠ¡ç®¡ç†æ“ä½œ</strong></li><li><strong>ï¼ˆ</strong> <strong>1</strong> <strong>ï¼‰æœ‰ä¸¤ç§æ–¹å¼ï¼š</strong>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†<strong>å’Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼ˆä½¿ç”¨ï¼‰</strong></li><li><strong>å£°æ˜å¼äº‹åŠ¡ç®¡ç†</strong></li><li><strong>ï¼ˆ</strong> <strong>1</strong> <strong>ï¼‰åŸºäºæ³¨è§£æ–¹å¼ï¼ˆä½¿ç”¨ï¼‰</strong></li><li><strong>ï¼ˆ2ï¼‰åŸºäº xml é…ç½®æ–‡ä»¶æ–¹å¼</strong></li><li><strong>åœ¨</strong> <strong>Spring</strong> <strong>è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œåº•å±‚ä½¿ç”¨</strong> <strong>AOP</strong> <strong>åŸç†</strong></li><li><strong>Spring</strong> <strong>äº‹åŠ¡ç®¡ç†</strong> <strong>API</strong></li><li>ï¼ˆ1ï¼‰æä¾›ä¸€ä¸ªæ¥å£ï¼Œä»£è¡¨äº‹åŠ¡ç®¡ç†å™¨ï¼Œè¿™ä¸ªæ¥å£é’ˆå¯¹ä¸åŒçš„æ¡†æ¶æä¾›ä¸åŒçš„å®ç°ç±»</li></ul><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221011160228717.png" alt="image-20221011160228717"></p><p><strong>äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸º</strong></p><p><strong>3</strong> <strong>ã€</strong> <strong>ioslation</strong> <strong>ï¼šäº‹åŠ¡éš”ç¦»çº§åˆ«</strong></p><p>ï¼ˆ1ï¼‰äº‹åŠ¡æœ‰ç‰¹æ€§æˆä¸ºéš”ç¦»æ€§ï¼Œå¤šäº‹åŠ¡æ“ä½œä¹‹é—´ä¸ä¼šäº§ç”Ÿå½±å“ã€‚ä¸è€ƒè™‘éš”ç¦»æ€§äº§ç”Ÿå¾ˆå¤šé—®é¢˜</p><p>ï¼ˆ2ï¼‰æœ‰ä¸‰ä¸ªè¯»é—®é¢˜ï¼šè„è¯»ã€ä¸å¯é‡å¤è¯»ã€è™šï¼ˆå¹»ï¼‰è¯»</p><p>ï¼ˆ3ï¼‰è„è¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡çš„æ•°æ®</p><p>ï¼ˆ4ï¼‰ä¸å¯é‡å¤è¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€æäº¤äº‹åŠ¡ä¿®æ”¹æ•°æ®</p><p>ï¼ˆ5ï¼‰è™šè¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€æäº¤äº‹åŠ¡æ·»åŠ æ•°æ®</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221011160356263.png" alt="image-20221011160356263"></p><p><strong>4</strong> <strong>ã€</strong> <strong>timeout</strong> <strong>ï¼šè¶…æ—¶æ—¶é—´</strong></p><p>ï¼ˆ1ï¼‰äº‹åŠ¡éœ€è¦åœ¨ä¸€å®šæ—¶é—´å†…è¿›è¡Œæäº¤ï¼Œå¦‚æœä¸æäº¤è¿›è¡Œå›æ»š</p><p>ï¼ˆ2ï¼‰é»˜è®¤å€¼æ˜¯ -1 ï¼Œè®¾ç½®æ—¶é—´ä»¥ç§’å•ä½è¿›è¡Œè®¡ç®—</p><p><strong>5</strong> <strong>ã€</strong> <strong>readOnly</strong> <strong>ï¼šæ˜¯å¦åªè¯»</strong></p><p>ï¼ˆ1ï¼‰è¯»ï¼šæŸ¥è¯¢æ“ä½œï¼Œå†™ï¼šæ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ</p><p>ï¼ˆ2ï¼‰readOnly é»˜è®¤å€¼ falseï¼Œè¡¨ç¤ºå¯ä»¥æŸ¥è¯¢ï¼Œå¯ä»¥æ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ</p><p>ï¼ˆ3ï¼‰è®¾ç½® readOnly å€¼æ˜¯ trueï¼Œè®¾ç½®æˆ true ä¹‹åï¼Œåªèƒ½æŸ¥è¯¢</p><p><strong>6</strong> <strong>ã€</strong> <strong>rollbackFor</strong> <strong>ï¼šå›æ»š</strong></p><p>ï¼ˆ1ï¼‰è®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸è¿›è¡Œäº‹åŠ¡å›æ»š</p><p><strong>7</strong> <strong>ã€</strong> <strong>noRollbackFor</strong> <strong>ï¼šä¸å›æ»š</strong></p><p>ï¼ˆ1ï¼‰è®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸ä¸è¿›è¡Œäº‹åŠ¡å›æ»š</p><h1 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3.æ€»ç»“"></a>3.æ€»ç»“</h1><h3 id="1-Spring5-IOCåŸç†"><a href="#1-Spring5-IOCåŸç†" class="headerlink" title="1.Spring5 IOCåŸç†"></a>1.Spring5 IOCåŸç†</h3><p><strong>IOC :</strong> <strong>æ§åˆ¶åè½¬ï¼ŒæŠŠåˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹äº¤ç»™Springè¿›è¡Œç®¡ç†</strong></p><p><strong>1.1 åŸç†ç†è§£ï¼š</strong></p><p>IOCæ˜¯Inversion of Controlçš„ç¼©å†™ï¼Œå³æ§åˆ¶åè½¬ï¼Œå°±æ˜¯æŠŠå¯¹è±¡åˆ›å»ºå’Œå¯¹è±¡ä¹‹é—´è°ƒç”¨çš„è¿‡ç¨‹äº¤ç»™Springè¿›è¡Œç®¡ç†ï¼Œä½¿ç”¨ IOC çš„ç›®çš„æ˜¯ä¸ºäº†é™ä½è€¦åˆã€‚</p><p>å¯¹ IOC çš„ç†è§£å°±æ˜¯ï¼Œæ¯”å¦‚è¯´å¯¹è±¡ A è¦è°ƒç”¨å¯¹è±¡ B ï¼Œæ­£å¸¸å†™ä»£ç çš„æƒ…å†µä¸‹ï¼Œé€šå¸¸å°±æ˜¯å½“å¯¹è±¡ A éœ€è¦ç”¨åˆ°å¯¹è±¡ B çš„æ—¶å€™ï¼Œç„¶åå°±éœ€è¦è‡ªå·±ä¸»åŠ¨çš„ new ä¸€ä¸ªå¯¹è±¡ Bï¼Œä¸»åŠ¨æƒåœ¨å¯¹è±¡ A è‡ªå·±æ‰‹ä¸­ï¼Œä½†æ˜¯å¼•å…¥äº†IOC ä¹‹åï¼Œï¼Œå¦‚æœå¯¹è±¡Aåœ¨éœ€è¦è°ƒç”¨å¯¹è±¡Bï¼Œæ­¤æ—¶ IOC ä¼šä¸»åŠ¨çš„åˆ›å»ºä¸€ä¸ªBå¯¹è±¡ï¼Œç„¶åæ³¨å…¥åˆ°å¯¹è±¡ A éœ€è¦çš„åœ°æ–¹ã€‚è¿™æ ·å°±æ–­ç»äº†å¯¹è±¡ A å’Œ å¯¹è±¡ B ç›´æ¥çš„ç›´æ¥è”ç³»ã€‚è¿™ç‚¹ä¸ç”µè„‘è¯»å–USBä¸Šæ–‡ä»¶çš„åœºæ™¯éå¸¸ç›¸ä¼¼ã€‚</p><p>åœ¨ç”µè„‘è¯»å–USBä¸Šçš„æ–‡ä»¶æ—¶ï¼Œç”µè„‘ä¸ä¼šå…³å¿ƒè¿™ä¸ªæ˜¯é‚£ä¸ªUSBè®¾å¤‡ï¼Œåªè¦è¿™ä¸ªUSBæ˜¯å¯ç”¨çš„ï¼Œä»–å°±å¯ä»¥ä»ä¸Šé¢è¯»å–æ–‡ä»¶ï¼Œè€Œç”µè„‘è¯»å–ä»€ä¹ˆæ–‡ä»¶çš„å†³å®šæƒå°±åœ¨æˆ‘çš„æ‰‹ä¸Šï¼Œæˆ‘æƒ³è¦ç”µè„‘è¯»å–ä»€ä¹ˆæ–‡ä»¶ï¼Œæˆ‘å°±æ’å…¥ä»€ä¹ˆUSBï¼Œè¿™ä¸ªæ—¶å€™ æˆ‘ å°±æ‰®æ¼” IOC çš„è§’è‰²ã€‚</p><p> IOC å†…éƒ¨çš„åº•å±‚åŸç†ä¸»è¦åŒ…æ‹¬xmlè§£æ ã€ å·¥å‚æ¨¡å¼ ã€ åå°„ã€‚</p><p><strong>1.2 Springæä¾› IOC å®¹å™¨çš„å®ç°æ–¹å¼æœ‰ä¸¤ç§ï¼š</strong></p><p>BeanFactory : IOC å®¹å™¨çš„åŸºæœ¬å®ç°ï¼Œæ˜¯Springå†…éƒ¨çš„ä½¿ç”¨æ¥å£ï¼Œä¸æä¾›ç»™å¼€å‘äººå‘˜ä½¿ç”¨ï¼Œï¼ˆåŠ è½½é…ç½®æ–‡ä»¶æ—¶ä¸ä¼šåˆ›å»ºå¯¹è±¡ï¼Œåªæœ‰ä½¿ç”¨å¯¹è±¡æ—¶æ‰ä¼šåˆ›å»ºå¯¹è±¡ï¼Œä¸åˆ©äºç¨‹åºçš„æ—¶æ•ˆæ€§ï¼‰</p><p>ApplicationContext : BeanFactoryçš„å­æ¥å£ï¼Œæä¾›ç»™å¼€å‘äººå‘˜ä½¿ç”¨ï¼Œï¼ˆåŠ è½½é…ç½®æ–‡ä»¶çš„æ—¶å€™å°±ä¼šæŠŠåœ¨é…ç½®æ–‡ä»¶ä¸­çš„å¯¹è±¡åˆ›å»ºï¼Œæœ‰åˆ©äºç¨‹åºçš„æ—¶æ•ˆæ€§ï¼‰</p><p>IOC æ“ä½œbeanç®¡ç†</p><p>Beanç®¡ç†æ˜¯æŒ‡ä¸¤ä¸ªæ“ä½œ <strong>åˆ›å»ºå¯¹è±¡</strong> å’Œ <strong>æ³¨å…¥å±æ€§</strong></p><p>Beanç®¡ç†æœ‰ä¸¤ç§æ–¹å¼ <strong>åŸºäºxmlé…ç½®æ–‡ä»¶æ–¹å¼å®ç°</strong> å’Œ <strong>æ³¨è§£æ–¹å¼å®ç°</strong></p><h3 id="2-AOPçš„åŸºç¡€æ¦‚å¿µ"><a href="#2-AOPçš„åŸºç¡€æ¦‚å¿µ" class="headerlink" title="2.AOPçš„åŸºç¡€æ¦‚å¿µ"></a>2.AOPçš„åŸºç¡€æ¦‚å¿µ</h3><p><strong>2.1 AOPé¢å‘åˆ‡é¢ç¼–ç¨‹</strong>ï¼Œå¯ä»¥ä¸ä¿®æ”¹æºä»£ç è¿›è¡Œæ–¹æ³•å¢å¼ºï¼ŒAOPæ˜¯OOPï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼‰çš„å»¶ç»­ï¼Œä¸»è¦ç”¨äºæ—¥å¿—è®°å½•ã€æ€§èƒ½ç»Ÿè®¡ã€å®‰å…¨æ§åˆ¶ã€äº‹åŠ¡å¤„ç†ç­‰æ–¹é¢ã€‚å®ƒæ˜¯åŸºäºä»£ç†è®¾è®¡æ¨¡å¼ï¼Œè€Œä»£ç†è®¾è®¡æ¨¡å¼åˆåˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ï¼Œé™æ€ä»£ç†æ¯”è¾ƒç®€å•å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œåˆ†åˆ«ç”±ä¸€ä¸ªçœŸå®å®ç°å’Œä¸€ä¸ªä»£ç†å®ç°ï¼Œè€ŒåŠ¨æ€ä»£ç†åˆ†ä¸ºåŸºäºæ¥å£çš„JDKåŠ¨æ€ä»£ç†å’ŒåŸºäºç±»çš„cglibçš„åŠ¨æ€ä»£ç†ï¼Œå’±ä»¬æ­£å¸¸éƒ½æ˜¯é¢å‘æ¥å£å¼€å‘ï¼Œæ‰€ä»¥AOPä½¿ç”¨çš„æ˜¯åŸºäºæ¥å£çš„JDKåŠ¨æ€ä»£ç†ã€‚</p><p><strong>2.2 AOPä¸­çš„ä¸€äº›å¸¸ç”¨æ¦‚å¿µ</strong></p><p><strong>åˆ‡é¢(Aspect)</strong>ï¼šAOPæ ¸å¿ƒå°±æ˜¯åˆ‡é¢ï¼Œå®ƒå°†å¤šä¸ªç±»çš„é€šç”¨è¡Œä¸ºå°è£…æˆå¯é‡ç”¨çš„æ¨¡å—ï¼Œè¯¥æ¨¡å—å«æœ‰ä¸€ç»„APIæä¾›æ¨ªåˆ‡åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªæ—¥å¿—æ¨¡å—å¯ä»¥è¢«ç§°ä½œæ—¥å¿—çš„AOPåˆ‡é¢ã€‚æ ¹æ®éœ€æ±‚çš„ä¸åŒï¼Œä¸€ä¸ªåº”ç”¨ç¨‹åºå¯ä»¥æœ‰è‹¥å¹²åˆ‡é¢ã€‚åœ¨Spring AOPä¸­ï¼Œåˆ‡é¢é€šè¿‡å¸¦æœ‰@Aspectæ³¨è§£çš„ç±»å®ç°ã€‚</p><p><strong>è¿æ¥ç‚¹(Join Point)</strong>ï¼šå“ªäº›æ–¹æ³•éœ€è¦è¢«AOPå¢å¼ºï¼Œè¿™äº›æ–¹æ³•å°±å«åšè¿æ¥ç‚¹ã€‚</p><p><strong>é€šçŸ¥(Advice)</strong>ï¼šAOPåœ¨ç‰¹å®šçš„åˆ‡å…¥ç‚¹ä¸Šæ‰§è¡Œçš„å¢å¼ºå¤„ç†ï¼Œæœ‰</p><figure class="highlight text"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">before<br>after<br>afterReturning<br>afterThrowing<br>around<br></code></pre></td></tr></tbody></table></figure><p><strong>2.3 é€šçŸ¥ç±»å‹</strong></p><p>é€šçŸ¥(advice)æ˜¯ä½ åœ¨ä½ çš„ç¨‹åºä¸­æƒ³è¦åº”ç”¨åœ¨å…¶ä»–æ¨¡å—ä¸­çš„æ¨ªåˆ‡å…³æ³¨ç‚¹çš„å®ç°ã€‚Adviceä¸»è¦æœ‰ä»¥ä¸‹5ç§ç±»å‹ï¼š</p><ul><li><strong>å‰ç½®é€šçŸ¥(Before Advice)</strong>ï¼šåœ¨è¿æ¥ç‚¹ä¹‹å‰æ‰§è¡Œçš„Adviceï¼Œä¸è¿‡é™¤éå®ƒæŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™æ²¡æœ‰èƒ½åŠ›ä¸­æ–­æ‰§è¡Œæµã€‚ä½¿ç”¨@Beforeæ³¨è§£ä½¿ç”¨è¿™ä¸ªAdviceã€‚</li><li><strong>è¿”å›ä¹‹åé€šçŸ¥(After Retuning Advice)</strong>ï¼šåœ¨è¿æ¥ç‚¹æ­£å¸¸ç»“æŸä¹‹åæ‰§è¡Œçš„Adviceã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªæ–¹æ³•æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸æ­£å¸¸è¿”å›ã€‚é€šè¿‡ @AfterReturningæ³¨è§£ä½¿ç”¨å®ƒã€‚</li><li><strong>æŠ›å‡ºï¼ˆå¼‚å¸¸ï¼‰åæ‰§è¡Œé€šçŸ¥(After Throwing Advice)</strong>ï¼šå¦‚æœä¸€ä¸ªæ–¹æ³•é€šè¿‡æŠ›å‡ºå¼‚å¸¸æ¥é€€å‡ºçš„è¯ï¼Œè¿™ä¸ªAdviceå°±ä¼šè¢«æ‰§è¡Œã€‚é€šè¿‡ @AfterThrowingæ³¨è§£æ¥ä½¿ç”¨ã€‚</li><li><strong>åç½®é€šçŸ¥(After Advice)</strong>ï¼šæ— è®ºè¿æ¥ç‚¹æ˜¯é€šè¿‡ä»€ä¹ˆæ–¹å¼é€€å‡ºçš„(æ­£å¸¸è¿”å›æˆ–è€…æŠ›å‡ºå¼‚å¸¸)éƒ½ä¼šæ‰§è¡Œåœ¨ç»“æŸåæ‰§è¡Œè¿™äº›Adviceã€‚é€šè¿‡ @Afteræ³¨è§£ä½¿ç”¨ã€‚</li><li><strong>å›´ç»•é€šçŸ¥(Around Advice)</strong>ï¼šå›´ç»•è¿æ¥ç‚¹æ‰§è¡Œçš„Adviceï¼Œå°±ä½ ä¸€ä¸ªæ–¹æ³•è°ƒç”¨ã€‚è¿™æ˜¯æœ€å¼ºå¤§çš„Adviceã€‚é€šè¿‡@Aroundæ³¨è§£ä½¿ç”¨ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Javaåç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºç»„æˆåŸç†2</title>
      <link href="/2022/10/08/%E5%A4%A7%E4%B8%89%E4%B8%8A%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E7%AC%AC%E4%BA%8C%E4%B8%89%E7%AB%A0/"/>
      <url>/2022/10/08/%E5%A4%A7%E4%B8%89%E4%B8%8A%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E7%AC%AC%E4%BA%8C%E4%B8%89%E7%AB%A0/</url>
      
        <content type="html"><![CDATA[<h2 id="è®¡ç®—æœºç»„æˆåŸç†"><a href="#è®¡ç®—æœºç»„æˆåŸç†" class="headerlink" title="è®¡ç®—æœºç»„æˆåŸç†"></a>è®¡ç®—æœºç»„æˆåŸç†</h2><p>è®¡ç®—æœºç³»ç»Ÿ=ç¡¬ä»¶+è½¯ä»¶</p><blockquote><p>è½¯ä»¶</p></blockquote><p>ç³»ç»Ÿè½¯ä»¶ï¼šç”¨æ¥ç®¡ç†æ•´ä¸ªè®¡ç®—æœºç³»ç»Ÿ(æ“ä½œç³»ç»Ÿï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿ)</p><p>åº”ç”¨è½¯ä»¶ï¼šæŒ‰ä»»åŠ¡éœ€è¦ç¼–ç»‡æˆçš„å„ç§ç¨‹åº(æŠ–éŸ³ã€ç‹è€…)</p><p>ç¬¬ä¸€å°ç”µå­æ•°å­—è®¡ç®—æœº:ENIC(1964)  é€»è¾‘å…ƒä»¶ï¼šç”µå­ç®¡</p><p>ç¬¬ä¸€ä»£ï¼šç”µå­ç®¡                                     å†…å­˜ï¼šæ³µå»¶è¿Ÿçº¿ã€ç£é¼“</p><p>ç¬¬äºŒä»£ï¼šæ™¶ä½“ç®¡                                     å†…å­˜ï¼š ç£èŠ¯å­˜å‚¨å™¨    </p><p>ç¬¬ä¸‰ä»£ï¼šä¸­å°è§„æ¨¡ç»§æ‰¿ç”µè·¯                             åŠå¯¼ä½“å­˜å‚¨å™¨</p><p> ç¬¬å››ä»£ï¼šå¤§è§„æ¨¡ã€è¶…å¤§è§„æ¨¡é›†æˆç”µè·¯              åŠå¯¼ä½“å­˜å‚¨å™¨</p><p>å¾®å¤„ç†å™¨ï¼šCPUï¼Œå¾®å‹è®¡ç®—æœº</p><blockquote><p>ç¡¬ä»¶çš„å‘å±•</p></blockquote><ul><li>1947è´å°”å®éªŒå®¤ å‘æ˜äº†â€æ™¶ä½“ç®¡â€œ</li><li>1955ï¼Œè‚–å…‹åˆ©åœ¨ç¡…è°·åˆ›å»ºå…¬å¸</li><li>1959å¹´ ä»™ç«¥åŠå¯¼ä½“å…¬å¸å‘æ˜é›†æˆç”µè·¯</li><li>1968å¹´ æ‘©å°”ç­‰äººç¦»å¼€ä»™ç«¥åˆ›ç«‹Inter</li><li>1969å¹´ä»™ç«¥é”€å”®éƒ¨è´Ÿè´£äººæ¡‘å¾·æ–¯ç¦»å¼€ä»™ç«¥åˆ›ç«‹AMD</li></ul><blockquote><p>æ‘©å°”å®šå¾‹</p></blockquote><p>é›†æˆç”µè·¯ä¸Šå¯å®¹çº³çš„æ™¶ä½“ç®¡æ•°ç›®ï¼Œçº¦æ¯éš”18ä¸ªæœˆä¾¿ä¼šå¢åŠ ä¸€å€ï¼Œæ•ˆç‡ä¹Ÿæå‡ä¸€å€</p><blockquote><p>è½¯ä»¶çš„å‘å±•</p></blockquote><p>æœºå™¨è¯­è¨€â€”&gt;æ±‡ç¼–è¯­è¨€â€”-&gt;pascalã€C++ã€javaã€python</p><p>æ“ä½œç³»ç»Ÿ   DOSâ€”windowsâ€”-Linux</p><blockquote><p>ç›®å‰è¶‹åŠ¿</p></blockquote><p>ä¸¤çº§åˆ†åŒ–ï¼šä¸€ææ˜¯å¾®å‹è®¡ç®—æœºå‘è·Ÿå¾®å‹åŒ–ç½‘ç»œåŒ–ã€é«˜æ€§èƒ½ã€å¤šç”¨é€”æ–¹å‘å‘å±•</p><p>å¦ä¸€ææ˜¯å·¨å‹åŒ–ï¼Œå‘æ›´å·¨å‹åŒ–ã€è¶…é«˜é€Ÿã€å¹¶è¡Œå¤„ç†ã€æ™ºèƒ½åŒ–æ–¹å‘å‘å±•</p><blockquote><p> è®¡ç®—æœºç¡¬ä»¶çš„åŸºæœ¬ç»„æˆ</p></blockquote><p>å†¯è¯ºä¾æ›¼çš„è®¡ç®—æœº</p><ul><li>è®¡ç®—æœºç”±äº”å¤§éƒ¨ä»¶ç»„æˆ</li><li>æŒ‡ä»¤å’Œæ•°æ®ä»¥åŒç­‰çš„åœ°ä½å­˜äºå­˜å‚¨å™¨ä¸­ï¼Œå¯ä»¥æŒ‰åœ°å€è®¿é—®</li><li>æŒ‡ä»¤å’Œæ“ä½œæ•°ç”¨äºŒè¿›åˆ¶è¡¨ç¤º</li><li>æŒ‡ä»¤ç”±æ“ä½œç å’Œåœ°å€å—ç»„æˆ</li><li>å­˜å‚¨ç¨‹åº</li><li>ä»¥è¿ç®—å™¨ä¸ºä¸­å¿ƒ</li></ul><p>ENIAC æ‰‹åŠ¨æ¥çº¿æ¥æ§åˆ¶è®¡ç®—</p><blockquote><p>å­˜å‚¨ç¨‹åºæ¦‚å¿µ</p></blockquote><p>å°†æŒ‡ä»¤ä»¥äºŒè¿›åˆ¶ä»£ç çš„å½¢å¼äº‹å…ˆè¾“å…¥åˆ°è®¡ç®—æœºçš„ä¸»å­˜å‚¨å™¨ï¼Œç„¶åæŒ‰ç…§å…¶åœ¨å­˜å‚¨å™¨ä¸­çš„é¦–åœ°å€æ‰§è¡Œç¨‹åºçš„ç¬¬ä¸€æ¡æŒ‡ä»¤ï¼Œä»¥åå°±æŒ‰è¯¥ç¨‹åºçš„è§„å®šé¡ºåºæ‰§è¡Œå…¶å®ƒå‘½ä»¤ç›´è‡³ç¨‹åºæ‰§è¡Œç»“æŸã€‚</p><ul><li>è¾“å…¥è®¾å¤‡ï¼šå°†ä¿¡æ¯è½¬æ¢ä¸ºæœºå™¨èƒ½è¯†åˆ«çš„å½¢å¼</li><li>å­˜å‚¨å™¨ï¼šå­˜æ”¾ç¨‹åºå’Œæ•°æ®</li><li>è¿ç®—å™¨ï¼šç®—æœ¯é€»è¾‘è¿ç®—</li><li>æ§åˆ¶å™¨ï¼šæŒ‡æŒ¥ç¨‹åºè¿è¡Œ</li><li>è¾“å‡ºè®¾å¤‡ï¼šè½¬ä¸ºä¸ºäººä»¬ç†Ÿæ‚‰çš„å½¢å¼</li></ul><p>åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­è½¯ä»¶å’Œç¡¬ä»¶åœ¨é€»è¾‘ä¸Šæ˜¯ç­‰æ•ˆçš„ã€‚è½¯ä»¶å®ç°ï¼šæˆæœ¬ä½ã€æ•ˆç‡ä¹Ÿä½ ç¡¬ä»¶å®ç°ï¼šæ•ˆç‡é«˜æˆæœ¬ä¹Ÿé«˜ã€‚</p><p>ç°ä»£è®¡ç®—æœºï¼šä»¥å­˜å‚¨å™¨ä¸ºä¸­å¿ƒ CPU=è¿ç®—å™¨+æ§åˆ¶å™¨</p><blockquote><p>ç°ä»£è®¡ç®—æœºçš„ç»“æ„</p></blockquote><p>CPUï¼ˆè¿ç®—å™¨ã€æ§åˆ¶å™¨ï¼‰â€”-ä¸»å­˜å‚¨å™¨â€”â€”â€”ï¼ˆè¾“å…¥è®¾å¤‡ã€è¾“å‡ºè®¾å¤‡ï¼‰</p><blockquote><p>ä¸»å­˜å‚¨å™¨çš„åŸºæœ¬ç»„æˆ</p></blockquote><p>å­˜å‚¨ä½“â€”-ï¼ˆå­˜å‚¨åœ°å€å¯„å­˜å™¨MARã€å­˜å‚¨æ•°æ®å¯„å­˜å™¨MDR)</p><p>cpuå°†åœ°å€å†™åˆ°MDRä¸­ ç„¶åä¸»å­˜å‚¨å™¨æ ¹æ®åœ°å€åˆ°å­˜å‚¨ä½“ä¸­å–å‡ºæ•°æ®ï¼Œç„¶åä¸»å­˜å‚¨å™¨ä¸­çš„ä¸€äº›æ§åˆ¶é€»è¾‘å°†CPUæƒ³è¦çš„æ•°æ®å†™åˆ°(å­˜å‚¨æ•°æ®å¯„å­˜å™¨)MDRä¸­æœ€åCPUé€šè¿‡çº¿è·¯ä»MDRä¸­å–å‡ºæ•°æ®</p><p>CPUå†™å…¥æ•°æ®ï¼šå†™å…¥çš„ä½ç½®æ”¾åœ¨MARä¸­ï¼Œå†™å…¥çš„æ•°æ®æ”¾åœ¨MDRä¸­ å†é€šè¿‡åœ°å€æ€»çº¿å†™å…¥å­˜å‚¨ä½“</p><p>å­˜å‚¨ä½“ï¼šæ•°æ®åœ¨å­˜å‚¨ä½“å†…æŒ‰åœ°å€å­˜å‚¨</p><p>å­˜å‚¨å•å…ƒâ€æ¯ä¸ªå­˜å‚¨å•å…ƒå­˜æ”¾ä¸€ä¸²äºŒçº§åˆ¶ä»£ç </p><p>å­˜å‚¨å­—ï¼šå­˜å‚¨å•å…ƒçš„äºŒè¿›åˆ¶ä»£ç ç»„åˆ</p><p>å­˜å‚¨å­—é•¿ï¼šå­˜å‚¨å•å…ƒäºŒè¿›åˆ¶ä»£ç çš„ä½æ•°</p><p>å­˜å‚¨å…ƒï¼šå­˜å‚¨äºŒçº§åˆ¶ç”µå­å…ƒä»¶ï¼Œæ¯ä¸ªå­˜å‚¨å…ƒå¯ä»¥å­˜å‚¨1bitï¼ˆåŸç†ï¼šç”µå®¹ï¼‰</p><p>MARä½æ•°åæ˜ äº†å­˜å‚¨å•å…ƒçš„ä¸ªæ•°  MDRä½æ•°=å­˜å‚¨å­—é•¿</p><p>åˆ—é¢˜ï¼š</p><p>MAR=4ä½â€”&gt;æ€»å…±ç”±2^4ä¸ªå­˜å‚¨å•å…ƒ</p><p>MD=16ä½â€”â€”&gt;æ¯ä¸ªå­˜å‚¨å•å…ƒå¯ä»¥å­˜æ”¾16bitï¼Œä¸€ä¸ªå­—ï¼ˆwordï¼‰=16bit</p><p>ä¸€ä¸ªå­—èŠ‚byte=8bit</p><p>1B=1ä¸ªå­—èŠ‚ï¼Œ1b=1ä¸ªbit</p><blockquote><p>è¿ç®—å™¨çš„åŸºæœ¬ç»„æˆ</p></blockquote><p>è¿ç®—å™¨ï¼šç”¨äºå®ç°ç®—æœ¯è¿ç®—ï¼ˆå¦‚ï¼šåŠ å‡ä¹˜é™¤ï¼‰ã€é€»è¾‘è¿ç®—ï¼ˆå¦‚ï¼šä¸éï¼‰</p><ul><li>ACCï¼šç´¯åŠ å™¨ã€ç”¨äºå­˜æ”¾æ“ä½œæ•°ã€æˆ–è€…è¿ç®—ç»“æœ</li><li>MQï¼šä¹˜å•†å¯„å­˜å™¨ï¼Œåœ¨ä¹˜é™¤æ³•è¿ç®—æ—¶ï¼Œç”¨äºå­˜æ”¾æ“ä½œæ•°æˆ–è€…è¿ç®—ç»“æœ</li><li>Xï¼šé€šç”¨çš„æ“ä½œæ•°å¯„å­˜å™¨ï¼Œç”¨äºå­˜æ”¾æ“ä½œæ•°</li><li>ALUï¼šç®—æœ¯é€»è¾‘å•å…ƒã€é€šè¿‡å†…éƒ¨å¤æ‚çš„ç”µè·¯å®ç°ç®—æœ¯è¿ç®—ã€é€»è¾‘è¿ç®—</li></ul><blockquote><p>æ§åˆ¶å™¨çš„åŸºæœ¬ç»„æˆ</p></blockquote><ul><li>CU:æ§åˆ¶å•å…ƒï¼Œåˆ†ææŒ‡ä»¤ï¼Œç»™å‡ºæ§åˆ¶ä¿¡å·ï¼ˆControl Unitï¼‰</li><li>IRï¼šæŒ‡ä»¤å¯„å­˜å™¨ï¼Œå­˜æ”¾å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤(Instruction Register)</li><li>PCï¼šç¨‹åºè®¡æ•°å™¨ï¼Œå­˜æ”¾ä¸‹ä¸€æ¡æŒ‡ä»¤åœ°å€ï¼Œæœ‰è‡ªåŠ¨åŠ 1çš„åŠŸèƒ½(Program Counter)</li></ul><p>å®Œæˆä¸€æ¡æŒ‡ä»¤â€”-{å–æŒ‡ä»¤PCã€åˆ†ææŒ‡ä»¤IR}â€”-{æ‰§è¡ŒæŒ‡ä»¤CU}</p><blockquote><p>è®¡ç®—æœºç³»ç»Ÿçš„å¤šçº§å±‚æ¬¡ç»“æ„</p></blockquote><p>é«˜çº§è¯­è¨€æœºå™¨ è™šæ‹Ÿæœºå™¨M4    ç”¨ç¼–è¯‘ç¨‹åºç¿»è¯‘æˆæ±‡ç¼–è¯­è¨€ç¨‹åº</p><p> æ±‡ç¼–è¯­è¨€æœºå™¨å«åšè™šæ‹Ÿæœºå™¨M3           ï¼ˆç”¨æ±‡ç¼–ç¨‹åºç¿»è¯‘æˆæœºå™¨è¯­è¨€ç¨‹åºï¼‰</p><p>æ“ä½œç³»ç»Ÿæœºå™¨ï¼ˆè™šæ‹Ÿæœºå™¨M2ï¼‰           å‘ä¸Šæä¾›â€œå¹¿ä¹‰æŒ‡ä»¤â€ç³»ç»Ÿè°ƒç”¨</p><p>ä¼ ç»Ÿçš„æœºå™¨M1ç”¨æœºå™¨è¯­è¨€çš„æœºå™¨             æ‰§è¡ŒäºŒè¿›åˆ¶æœºå™¨æŒ‡ä»¤</p><p>å¾®ç¨‹åºæœºå™¨M0 ï¼ˆå¾®æŒ‡ä»¤ç³»ç»Ÿï¼‰                ç”±ç¡¬ä»¶ç›´æ¥æ‰§è¡Œçš„å¾®æŒ‡ä»¤</p><blockquote><p>ä¸‰ç§çº§åˆ«çš„è¯­è¨€</p></blockquote><p>æ±‡ç¼–è¯­è¨€ï¼šåŠ©è®°ç¬¦   é«˜çº§è¯­è¨€ ï¼šC++   æœºå™¨è¯­è¨€ï¼šäºŒçº§åˆ¶ä»£ç </p><p> ç¼–è¯‘ç¨‹åºï¼šå°†é«˜çº§è¯­è¨€ç¼–å†™çš„æºç¨‹åºå…¨éƒ¨è¯­å¥ä¸€æ¬¡æ€§çš„ç¿»è¯‘æˆæœºå™¨è¯­è¨€ç¨‹åºï¼Œè€Œååœ¨æ‰§è¡Œæœºå™¨è¯­è¨€ç¨‹åºï¼ˆåªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼‰ï¼ˆC++/C/Javaï¼‰</p><p>è§£é‡Šç¨‹åºï¼šå°†åŸç¨‹åºçš„ä¸€æ¡è¯­å¥ç¿»è¯‘æˆå¯¹åº”çš„æœºå™¨è¯­è¨€çš„è¯­å¥ï¼Œå¹¶ç«‹å³æ‰§è¡Œã€‚ç´§æ¥ç€å†ç¿»è¯‘ä¸‹ä¸€å¥ï¼ˆæ¯æ¬¡æ‰§è¡Œéƒ½è¦ç¿»è¯‘ï¼‰ï¼ˆJavaScriptã€Pythonã€Shellï¼‰</p><blockquote><p>å­˜å‚¨å™¨çš„æ€§èƒ½æŒ‡æ ‡</p></blockquote><p> ä¸»å­˜å‚¨å™¨ä¸­çš„MAR:ä½æ•°åæ˜ å­˜å‚¨å•å…ƒçš„ä¸ªæ•°ï¼ˆæœ€å¤šæ”¯æŒå¤šå°‘ä¸ªï¼‰</p><p>ä¸»å­˜å‚¨å™¨ä¸­çš„MDRï¼šä½æ•°=å­˜å‚¨å­—é•¿=æ¯ä¸ªå­˜å‚¨å•å…ƒçš„å¤§å°</p><p>æ€»å®¹é‡=å­˜å‚¨å•å…ƒçš„ä¸ªæ•°Ã—å­˜å‚¨å­—é•¿ bit     1Byte=8bit</p><p>â€‹            =å­˜å‚¨å•å…ƒçš„ä¸ªæ•°Ã—å­˜å‚¨å­—é•¿/8  Byte</p><p>Eg:  MARä¸º32ä½  MDRä¸º8ä½  æ€»å®¹é‡=2^(32)Ã—8bit=4GB</p><blockquote><p>CPUçš„æ€§èƒ½æŒ‡æ ‡</p></blockquote><p>CPUä¸»é¢‘ï¼ˆæ—¶é’Ÿé¢‘ç‡ï¼‰=1/ï¼ˆCPUçš„æ—¶é’Ÿå‘¨æœŸï¼‰</p><p>CPIï¼šæ‰§è¡Œä¸€æ¡æŒ‡ä»¤æ‰€éœ€è¦çš„æ—¶é’Ÿå‘¨æœŸæ•°</p><p>æ‰§è¡Œä¸€æ¡æŒ‡ä»¤çš„è€—æ—¶=CPIÃ—CPUçš„æ—¶é’Ÿå‘¨æœŸ</p><p>CPUæ‰§è¡Œæ—¶é—´=CPUæ—¶é’Ÿå‘¨æœŸæ•°/ä¸»é¢‘=ï¼ˆæŒ‡ä»¤æ¡æ•°*CPIï¼‰/ä¸»é¢‘</p><p>IPSï¼šæ¯ç§’æ‰§è¡Œå¤šå°‘æ¡æŒ‡ä»¤</p><p>IPS=ä¸»é¢‘/å¹³å‡CPI</p><p>FLOPS:æ¯ç§’æ‰§è¡Œå¤šå°‘æ¬¡æµ®ç‚¹è¿ç®—</p><blockquote><p>ç³»ç»Ÿæ•´ä½“çš„æ€§èƒ½æŒ‡æ ‡</p></blockquote><p>æ•°æ®é€šè·¯å¸¦å®½ï¼šæ•°æ®æ€»çº¿ä¸€æ¬¡æ‰€èƒ½è¿è¡Œå¹¶ä¼ é€ä¿¡æ¯çš„ä½æ•°</p><p>ååé‡ï¼šæŒ‡ç³»ç»Ÿåœ¨å•ä½æ—¶é—´å†…å¤„ç†è¯·æ±‚çš„æ•°é‡</p><p>å“åº”æ—¶é—´ï¼šæŒ‡ç”¨æˆ·å‘è®¡ç®—æœºå‘é€ä¸€ä¸ªè¯·æ±‚åˆ°ç³»ç»Ÿå¯¹è¯¥è¯·æ±‚åšå‡ºå“åº”å¹¶è·å–å®ƒæ‰€éœ€è¦çš„ç»“æœçš„ç­‰å¾…æ—¶é—´</p><blockquote><p> ASCLLç </p></blockquote><p>å¯å°åˆ·çš„å­—ç¬¦ï¼š32~126 å…¶ä½™çš„ä¸ºæ§åˆ¶ã€é€šä¿¡å­—ç¬¦</p><blockquote><p>æ±‰å­—çš„è¡¨ç¤ºå’Œç¼–ç </p></blockquote><p>GB 2312-80ï¼šæ±‰å­—+å„ç§ç¬¦å·å…±7445ä¸ª</p><blockquote><p>å­—ç¬¦ä¸²</p></blockquote><p>å¤§ç«¯æ¨¡å¼ï¼šå°†æ•°æ®çš„æœ€é«˜æœ‰æ•ˆå­—èŠ‚å­˜æ”¾åœ¨ä½åœ°å€å•å…ƒä¸­</p><p>å°ç«¯æ¨¡å¼ï¼šå°†æ•°æ®çš„æœ€é«˜æœ‰æ•ˆå­—èŠ‚å­˜æ”¾åœ¨é«˜åœ°å€çš„å•å…ƒä¸­</p><h2 id="ç¬¬ä¸‰ç« "><a href="#ç¬¬ä¸‰ç« " class="headerlink" title="ç¬¬ä¸‰ç« "></a>ç¬¬ä¸‰ç« </h2><h4 id="1-ä¸»å­˜å‚¨å™¨"><a href="#1-ä¸»å­˜å‚¨å™¨" class="headerlink" title="1.ä¸»å­˜å‚¨å™¨"></a>1.ä¸»å­˜å‚¨å™¨</h4><p>å­˜å‚¨ä½“ã€MARï¼ˆåœ°å€å¯„å­˜å™¨ï¼‰ã€MDRï¼ˆæ•°æ®å¯„å­˜å™¨ï¼‰</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221003174934941.png" alt="image-20221003174934941"></p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221003175031177.png" alt="image-20221003175031177"></p><p>ä¸€ä¸ªå­˜å‚¨å•å…ƒæœ‰å¤šä¸ªå­˜å‚¨å…ƒæ„æˆï¼Œä¸€ä¸ªå­˜å‚¨ä½“æœ‰å¤šä¸ªå­˜å‚¨å•å…ƒæ„æˆ</p><p>å­˜å‚¨å­—ï¼šä¸€ä¸²äºŒè¿›åˆ¶æ•°  å­˜å‚¨å­—é•¿:8bit  å­—èŠ‚ï¼š1Byte=8bit</p><p>nä½åœ°å€â€”-&gt;2^nä¸ªå­˜å‚¨å•å…ƒï¼ˆä»£è¡¨è¡Œæ•°ï¼‰ æ€»å®¹é‡=å­˜å‚¨å•å…ƒçš„ä¸ªæ•°Ã—å­˜å‚¨å­—é•¿</p><p><strong>å­˜å‚¨èŠ¯ç‰‡çš„åŸºæœ¬æ„æˆï¼š</strong></p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221003175639654.png" alt="image-20221003175639654"></p><h5 id="1-å¸¸è§çš„æè¿°"><a href="#1-å¸¸è§çš„æè¿°" class="headerlink" title="1.å¸¸è§çš„æè¿°"></a>1.å¸¸è§çš„æè¿°</h5><p>8Ã—8ä½çš„å­˜å‚¨èŠ¯ç‰‡ ï¼š</p><p>8KÃ—8 ä½ å³ 2^13^Ã—8bit</p><p>8KÃ—1ä½   å³2^13^ Ã—1bit</p><p>64KÃ—16ä½ å³2^16^ Ã—16bit</p><p>Kï¼š2^10^   M:2^20^  G : 2^30^  T : 2^40^  </p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221003181617497.png" alt="image-20221003181617497"></p><ul><li>å­˜å‚¨çŸ©é˜µï¼šæœ‰å¤§é‡ç›¸åŒçš„ä½å­˜å‚¨å•å…ƒé˜µåˆ—æ„æˆ</li><li>è¯‘ç é©±åŠ¨ï¼šå°†æ¥è‡ªåœ°å€æ€»çº¿çš„åœ°å€ä¿¡å·ç¿»è¯‘å¯¹åº”çš„å­˜å‚¨å•å…ƒçš„é€‰é€šä¿¡å·ï¼Œè¯¥ä¿¡å·åœ¨è¯»å†™ç”µè·¯çš„é…åˆä¸‹å®Œæˆå¯¹è¢«é€‰ä¸­å•å…ƒçš„è¯»/å†™æ“ä½œã€‚</li><li>è¯»å†™ç”µè·¯ï¼šåŒ…æ‹¬è¯»å‡ºæ”¾å¤§å™¨å’Œå†™å…¥ç”µè·¯ï¼Œç”¨æ¥å®Œæˆè¯»å†™æ“ä½œ</li><li>è¯»å†™æ§åˆ¶çº¿ï¼šå†³å®šèŠ¯ç‰‡è¿›è¡Œè¯»/å†™æ“ä½œ</li><li>ç‰‡é€‰çº¿ï¼šç¡®å®šé‚£ä¸ªå­˜å‚¨èŠ¯ç‰‡è¢«é€‰ä¸­ã€‚å¯ç”¨äºå®¹é‡æ‰©å……ï¼ˆå¼€å…³ 0 /1ï¼‰ </li><li>åœ°å€çº¿ï¼šæ˜¯å•å‘è¾“å…¥çš„ï¼Œå…¶ä½æ•°ä¸å­˜å‚¨å­—çš„ä¸ªæ•°æœ‰å…³ï¼ˆå†³å®šè¦æ“ä½œçš„æ•°æ®çš„åœ°å€ï¼‰</li><li>æ•°æ®çº¿ï¼šæ˜¯åŒå‘çš„ï¼Œå…¶ä½æ•°ä¸è¯»å†™æˆ–å†™å…¥çš„æ•°æ®ä½æ•°æœ‰å…³ã€‚</li><li>æ•°æ®çº¿æ•°å’Œåœ°å€çº¿æ•°å…±åŒçš„åæ˜ äº†å­˜å‚¨èŠ¯ç‰‡å®¹é‡çš„å¤§å°ã€‚ï¼ˆç¡®å®šå­˜å‚¨å™¨çš„å®¹é‡ï¼‰</li></ul><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221003194424078.png" alt="image-20221003194424078"></p><blockquote><p>DRAMçš„åˆ·æ–°</p></blockquote><p>åˆ·æ–°å‘¨æœŸä¸º2ms</p><p>æ¯æ¬¡åˆ·æ–°å¤šå°‘å­˜å‚¨å•å…ƒï¼Ÿä»¥è¡Œä¸ºå•ä½ï¼Œæ¯æ¬¡åˆ·æ–°ä¸€è¡Œå­˜å‚¨å•å…ƒ</p><p>ä½¿ç”¨è¡Œåˆ—åœ°å€ å¯ä»¥å¤§å¹…åº¦çš„å‡å°‘é€‰é€šçº¿çš„æ•°é‡ï¼›</p><p>å¦‚ä½•åˆ·æ–°ï¼Ÿ æœ‰ç¡¬ä»¶æ”¯æŒï¼Œè¯»å‡ºä¸€è¡Œçš„ä¿¡æ¯åé‡æ–°å†™å…¥å ç”¨ä¸€ä¸ªè¯»å†™å‘¨æœŸ</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221003195412025.png" alt="image-20221003195412025"></p><p>RAM:æ˜“å¤±å»æ€§å­˜å‚¨å™¨</p><p>ROM:åªè¯»å­˜å‚¨å™¨</p><blockquote><p>å­˜å‚¨å™¨çš„åˆ†ç±»</p></blockquote><p>1.ç£è¡¨é¢å­˜å‚¨å™¨ï¼šç£ç›˜ï¼ˆç›´æ¥å­˜å–ï¼šéæ˜“å¤±æ€§ï¼‰ã€ç£å¸¦ï¼ˆé¡ºåºå­˜å–ï¼šè®¿é—®é€Ÿåº¦æ…¢ï¼‰</p><p>2.ç£èŠ¯å­˜å‚¨å™¨</p><p>3.åŠå¯¼ä½“å­˜å‚¨å™¨ï¼ˆROMã€DRAMã€ç ´åæ€§è¯»å‡ºã€‘ éšæœºå­˜å–ï¼‰ï¼ˆå­˜å–æ—¶é—´ä¸ä½ç½®æ— å…³ï¼‰</p><p>4.å…‰å­˜å‚¨å™¨</p><p>æŒ‰ç…§ä¸åŒçš„ç‰¹æ€§åˆ†ï¼šå­˜å–æ–¹å¼å’Œä¿¡æ¯çš„å¯ä¿å­˜æ€§</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221005102304041.png" alt=""></p><blockquote><p>å­˜å‚¨å™¨çš„æ€§èƒ½æŒ‡æ ‡</p></blockquote><p>1.å­˜å‚¨å®¹é‡ï¼šå­˜å‚¨å­—æ•°Ã—å­—é•¿ï¼ˆå¦‚1MÃ—8ä½ï¼‰</p><p>2.å•ä½æˆæœ¬ï¼šæ¯ä½ä»·æ ¼=æ€»æˆæœ¬/æ€»å®¹é‡</p><p>3.å­˜å‚¨é€Ÿåº¦ï¼šæ•°æ®çš„ä¼ è¾“ç‡=æ•°æ®çš„å®½åº¦/å­˜å‚¨å‘¨æœŸ</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221005103458468.png" alt="image-20221005103458468"></p><blockquote><p>å­˜å‚¨å™¨çš„å±‚æ¬¡åŒ–ç»“æ„</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221005103643497.png" alt="image-20221005103643497"></p><h3 id="ä¸»å­˜ä¸CPUçš„é“¾æ¥"><a href="#ä¸»å­˜ä¸CPUçš„é“¾æ¥" class="headerlink" title="ä¸»å­˜ä¸CPUçš„é“¾æ¥"></a>ä¸»å­˜ä¸CPUçš„é“¾æ¥</h3><blockquote><p>ä¸»å­˜å‚¨å™¨å®¹é‡çš„æ‰©å±•-è¯‘ç å™¨</p></blockquote><p>çº¿é€‰æ³•â€”&gt;nä¸ªç‰‡é€‰ä¿¡å·ï¼šç”µè·¯ç®€å•ï¼šåœ°å€ç©ºé—´ä¸è¿ç»­</p><p>è¯‘ç ç‰‡é€‰æ³•â€”-&gt;2^n^ ä¸ªç‰‡é€‰ä¿¡å· :ç”µè·¯å¤æ‚ï¼šåœ°å€ç©ºé—´å¯è¿ç»­ï¼Œå¯ä»¥å¢åŠ é€»è¾‘è®¾è®¡</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221005115954352.png" alt="image-20221005115954352"></p><blockquote><p>æµæ°´çº¿ï¼š</p></blockquote><p>å¾®è§‚ï¼ˆè®¡ç®—é¢˜ï¼‰</p><p>æ¨¡å—æ•°m=4ï¼Œå­˜å‚¨å‘¨æœŸä¸ºTï¼Œå­—é•¿ä¸ºWï¼Œæ•°æ®æ€»çº¿å®½åº¦ä¸ºWï¼Œæ€»çº¿çš„ä¼ è¾“å‘¨æœŸä¸ºrï¼Œè¿ç»­å­˜å–nä¸ªå­—ï¼Œæ±‚äº¤å‰å­˜å‚¨å™¨çš„å®½åº¦ã€‚</p><p>æœ‰mä¸ªå­˜å‚¨ä½“ï¼Œå­˜å‚¨å‘¨æœŸä¸ºTï¼Œå­—é•¿ä¸ºwæ¯éš”ræ—¶é—´å¯åŠ¨ä¸‹ä¸€ä¸ªå­˜å‚¨ä½“ï¼Œè¿ç»­å­˜å–nä¸ªå­—ï¼Œæ±‚å­˜å‚¨å™¨çš„å­˜å–é€Ÿç‡ã€‚</p><p>è¿ç»­å­˜å–nä¸ªå­—è€—æ—¶=T+(n-1)r        m&gt;=T/r</p><p>å¸¦å®½=nÃ—W/ï¼ˆT+ï¼ˆn-1ï¼‰r)  </p><p>å½“nè¾ƒå¤§æ—¶ï¼Œå¸¦å®½â€”-&gt;W/r ç›¸å½“äºmä¸ªå­˜å‚¨ä½“å¹¶è¡Œå·¥ä½œï¼Œå¯¹æ¯”å•ä¸ªå­˜å‚¨ä½“çš„å¸¦å®½ï¼šW/T</p><p>å®è§‚ï¼ˆæ¦‚å¿µé¢˜ï¼‰</p><p>ä¸€ä¸ªå­˜å‚¨å‘¨æœŸå†…ï¼Œäº¤å‰å­˜å‚¨å™¨å¯ä»¥æä¾›æ•°æ®é‡ä¸ºå•ä¸ªæ¨¡å—çš„må€</p><p>è¡¥å……ï¼šå¯ä»¥å¹¶è¡Œå·¥ä½œå¦‚æ€»çº¿å®½åº¦ä¸ºmWæ—¶å¯ä»¥åŒæ—¶å–å‡ºé•¿åº¦ä¸ºmWçš„æ•°æ®</p><blockquote><p>é«˜é€Ÿç¼“å†²å­˜å‚¨å™¨</p></blockquote><p>æé«˜å­˜å‚¨å™¨çš„å·¥ä½œé€Ÿåº¦ï¼šå¦‚mä¸ªæ¨¡å—ç»„æˆçš„ä½ä½äº¤å‰ç¼–å€å­˜å‚¨å™¨ï¼Œå¯ä»¥å°†å¸¦å®½æå‡ä¸ºmå€ã€‚</p><p>ä¼˜åŒ–åé€Ÿåº¦ä¸CPUçš„å·®è·ä¾ç„¶å¾ˆå¤§â€”&gt;æ›´é«˜é€Ÿçš„å­˜å‚¨å•å…ƒè®¾è®¡â€”-&gt;å­˜å‚¨å™¨ä»·æ ¼é«˜å®¹é‡å°å’Œç¨‹åºè®¿é—®çš„å±€éƒ¨æ€§åŸç†â€”â€”&gt;å­˜å‚¨ä½“ç³»çš„æ”¹å–„â€Cache-ä¸»å­˜â€œå±‚æ¬¡</p><blockquote><p>å±€éƒ¨æ€§åŸç†</p></blockquote><p>ç©ºé—´å±€éƒ¨æ€§ï¼šåœ¨æœ€è¿‘çš„æœªæ¥è¦ä½¿ç”¨åˆ°çš„ä¿¡æ¯ï¼ˆæŒ‡ä»¤å’Œæ•°æ®ï¼‰ï¼Œå¾ˆå¯èƒ½ä¸ç°åœ¨æ­£åœ¨ä½¿ç”¨çš„ä¿¡æ¯åœ¨å­˜å‚¨ç©ºé—´ä¸Šæ˜¯ä¸´è¿‘çš„</p><p>æ—¶é—´å±€éƒ¨æ€§ï¼šåœ¨æœ€è¿‘çš„æœªæ¥è¦ä½¿ç”¨åˆ°çš„ä¿¡æ¯ï¼Œå¾ˆå¯èƒ½æ˜¯ç°åœ¨æ­£åœ¨ä½¿ç”¨çš„ä¿¡æ¯</p><blockquote><p>æ€§èƒ½åˆ†æ</p></blockquote><p>å‘½ä¸­ç‡Hï¼šCPUæ¬²è®¿é—®çš„ä¿¡æ¯å·²åœ¨Cacheä¸­çš„æ¯”ç‡</p><p>è®¾ä¸€ä¸ªç¨‹åºæ‰§è¡ŒæœŸé—´ï¼ŒCacheçš„æ€»å‘½ä¸­æ¬¡æ•°ä¸ºN~c~ è®¿é—®ä¸»å­˜çš„æ€»æ¬¡æ•°ä¸ºN~m~ åˆ™$\frac {N_c} {N_c+N_m}$    </p><p>ç¼ºå¤±ç‡M=1-H </p><p>è®¾t~c~ ä¸ºå‘½ä¸­æ—¶çš„Cacheè®¿é—®æ—¶é—´ï¼Œt~m~ ä¸ºæœªå‘½ä¸­æ—¶çš„è®¿é—®æ—¶é—´åˆ™ï¼šCacheâ€”ä¸»å­˜ç³»ç»Ÿçš„å¹³å‡è®¿é—®æ—¶é—´T~a~ ä¸º</p><p>T~a~ =Ht~c~ +(1-H)t~m~ </p><blockquote><p>Cacheçš„åŸºæœ¬å·¥ä½œåŸç†</p></blockquote><p>ä¸»å­˜ä¸­å¿«æ”¾åˆ°Cacheä¸­çš„ä½ç½®</p><ul><li>ç©ºä½éšæ„æ”¾ï¼Œå…¨ç›¸è”æ˜ å°„ï¼ˆä¸»å­˜å—åœ°å€+å­—å—å†…åœ°å€ï¼‰</li><li>å¯¹å·å…¥åº§ï¼ˆä¸»å­˜å­—å—æ ‡è®°+Cacheå­—å—åœ°å€+å­—å—å†…åœ°å€ï¼‰</li><li>æŒ‰å·åˆ†ç»„ï¼Œç»„å†…éšæ„æ”¾ï¼šç»„ç›¸è”æ˜ å°„ï¼ˆä¸»å­˜å­—å—æ ‡è®°+ç»„åœ°å€+å­—å—å†…åœ°å€ï¼‰</li></ul><blockquote><p>é«˜é€Ÿç¼“å†²</p></blockquote><p>æ›¿æ¢ç®—æ³•ï¼š</p><ul><li>éšæœºç®—æ³•</li></ul><p>éšæœºåœ°ç¡®å®šæ›¿æ¢Cacheå—ã€ã€‚ä»–çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œä½†æ²¡æœ‰ä¾æ®ç¨‹åºè®¿é—®çš„å±€éƒ¨æ€§åŸç†ï¼Œæ•…å¯èƒ½å‘½ä¸­ç‡è¾ƒä½</p><ul><li>å…ˆè¿›å…ˆå‡ºç®—æ³•</li></ul><p>é€‰æ‹©æœ€æ—©è°ƒå…¥çš„è¿›è¡Œæ›¿æ¢ã€‚å®ƒæ¯”è¾ƒå®¹æ˜“å®ç°ï¼Œä½†æ˜¯æ²¡æœ‰æ ¹æ®ç¨‹åºè®¿é—®çš„å±€éƒ¨æ€§åŸç†ï¼Œå¯èƒ½ä¼šæŠŠä¸€äº›éœ€è¦ç»å¸¸ä½¿ç”¨çš„ç¨‹åºå—ï¼ˆå¦‚å¾ªç¯ç¨‹åºï¼‰ä¹Ÿä½œä¸ºæœ€æ—©è¿›å…¥Cacheçš„å—æ›¿æ¢æ‰</p><ul><li>è¿‘æœŸæœ€å°‘ä½¿ç”¨çš„ç®—æ³•</li></ul><p>ä¾æ®ç¨‹åºè®¿é—®çš„å±€éƒ¨æ€§åŸç†é€‰æ‹©è¿‘æœŸå†…é•¿ä¹…æœªè®¿é—®è¿‡çš„å­˜å‚¨è¡Œä½œä¸ºæ›¿æ¢è¡Œï¼Œå¹³å‡å‘½ä¸­ç‡è¦æ¯”å…ˆè¿›å…ˆå‡ºè¦é«˜ï¼Œæ˜¯ä¸€ä¸ªå †æ ˆç±»çš„ç®—æ³•ã€‚ä»–çš„ç®—æ³•å¯¹æ¯è¡Œè®¾ç½®ä¸€ä¸ªè®¡æ•°å™¨ï¼ŒCacheæ¯å‘½ä¸­ä¸€æ¬¡ï¼Œå‘½ä¸­è¡Œè®¡æ•°å™¨æ¸…é›¶ï¼Œè€Œå…¶ä»–çš„å„è¡Œè®¡æ•°å™¨å‡åŠ 1ï¼Œéœ€è¦æ›¿æ¢æ—¶æ¯”è¾ƒä¸ªç‰¹å®šçš„è¡Œè®¡æ•°å€¼ï¼Œå°†è®¡æ•°å€¼æœ€å¤§çš„è¡Œæ¢å‡º</p><ul><li>æœ€ä¸ç»å¸¸ä½¿ç”¨ç®—æ³•</li></ul><p>å°†ä¸€æ®µæ—¶é—´å†…è¢«è®¿é—®æ¬¡æ•°æœ€å°‘çš„å­˜å‚¨è¡Œæ¢å‡ºï¼Œæ¯è¡Œä¹Ÿè®¾ç½®ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ–°å»ºç«‹åä»0å¼€å§‹è®¡æ•°ï¼Œï¼Œæ¯è®¿é—®ä¸€æ¬¡ï¼Œè¢«è®¿é—®çš„è¡Œè®¡æ•°å™¨åŠ 1ï¼Œéœ€è¦æ›¿æ¢æ—¶æ¯”è¾ƒä¸ªç‰¹å®šè¡Œçš„è®¡æ•°å€¼ï¼Œå°†è®¡æ•°å€¼æœ€å°çš„è¡Œæ¢å‡ºã€‚</p><blockquote><p>å­˜å‚¨ç³»ç»Ÿ</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221005160439585.png" alt="image-20221005160439585"></p><blockquote><p>æé«˜å­˜å‚¨ç³»ç»Ÿçš„å®¹é‡</p></blockquote><p>1.åœ°å€è½¬æ¢</p><p>2.è™šæ‹Ÿå­˜å‚¨å™¨çš„è®¿é—®è¿‡ç¨‹</p><p>è™šæ‹Ÿå­˜å‚¨å™¨æ˜¯ä¸€ä¸ªé€»è¾‘æ¨¡å‹</p><p>åŠŸèƒ½ï¼šç”¨æˆ·ç»™å‡ºä¸€ä¸ªåœ°å€ï¼Œå«åšè™šæ‹Ÿåœ°å€æˆ–è€…é€»è¾‘åœ°å€ï¼Œè™šæ‹Ÿå­˜å‚¨å™¨è¦ç»™å‡ºè¯¥åœ°å€å¯¹åº”çš„æ•°æ®</p><p>å®ç°ï¼šæœ‰è¾…åŠ©ç¡¬ä»¶å°†è™šåœ°å€æ˜ å°„åˆ°ä¸»å­˜å½“ä¸­çš„æŸä¸ªå•å…ƒï¼Œä¸»å­˜å•å…ƒåœ°å€ç§°ä¸ºå®åœ°å€æˆ–è€…ç‰©ç†åœ°å€</p><p>è¾…å­˜åœ°å€ï¼šç£ç›˜å·+ç›˜é¢å·+ç£é“å·+æ‰‡åŒºå·</p><blockquote><p>é¡µå¼è™šæ‹Ÿå­˜å‚¨</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221005163439651.png" alt="image-20221005163439651"></p><blockquote><p>æ®µå¼è™šæ‹Ÿå­˜å‚¨å™¨</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221005163651743.png" alt="image-20221005163651743"></p><blockquote><p>æ®µé¡µå¼è™šæ‹Ÿå­˜å‚¨</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221005163752969.png" alt="image-20221005163752969"></p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/image-20221005164040889.png" alt="image-20221005164040889"></p>]]></content>
      
      
      <categories>
          
          <category> è®¡ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript</title>
      <link href="/2022/09/26/JavaWeb%E5%AD%A6%E4%B9%A0/JavaScript/"/>
      <url>/2022/09/26/JavaWeb%E5%AD%A6%E4%B9%A0/JavaScript/</url>
      
        <content type="html"><![CDATA[<h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><p><strong>ä»Šæ—¥ç›®æ ‡</strong></p><blockquote><ul><li>æŒæ¡ JavaScript çš„åŸºç¡€è¯­æ³•</li><li>æŒæ¡ JavaScript çš„å¸¸ç”¨å¯¹è±¡ï¼ˆArrayã€Stringï¼‰</li><li>èƒ½æ ¹æ®éœ€æ±‚çµæ´»è¿ç”¨å®šæ—¶å™¨åŠé€šè¿‡ js ä»£ç è¿›è¡Œé¡µé¢è·³è½¬</li><li>èƒ½é€šè¿‡DOM å¯¹è±¡å¯¹æ ‡ç­¾è¿›è¡Œå¸¸è§„æ“ä½œ</li><li>æŒæ¡å¸¸ç”¨çš„äº‹ä»¶</li><li>èƒ½ç‹¬ç«‹å®Œæˆè¡¨å•æ ¡éªŒæ¡ˆä¾‹</li></ul></blockquote><h2 id="1ï¼ŒJavaScriptç®€ä»‹"><a href="#1ï¼ŒJavaScriptç®€ä»‹" class="headerlink" title="1ï¼ŒJavaScriptç®€ä»‹"></a>1ï¼ŒJavaScriptç®€ä»‹</h2><p>==JavaScript æ˜¯ä¸€é—¨è·¨å¹³å°ã€é¢å‘å¯¹è±¡çš„è„šæœ¬è¯­è¨€==ï¼Œè€ŒJavaè¯­è¨€ä¹Ÿæ˜¯è·¨å¹³å°çš„ã€é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œåªä¸è¿‡Javaæ˜¯ç¼–è¯‘è¯­è¨€ï¼Œæ˜¯éœ€è¦ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶æ‰èƒ½è¿è¡Œçš„ï¼›JavaScriptæ˜¯è„šæœ¬è¯­è¨€ï¼Œä¸éœ€è¦ç¼–è¯‘ï¼Œç”±æµè§ˆå™¨ç›´æ¥è§£æå¹¶æ‰§è¡Œã€‚</p><p>JavaScript æ˜¯ç”¨æ¥æ§åˆ¶ç½‘é¡µè¡Œä¸ºçš„ï¼Œå®ƒèƒ½ä½¿ç½‘é¡µå¯äº¤äº’ï¼›é‚£ä¹ˆå®ƒå¯ä»¥åšä»€ä¹ˆå‘¢ï¼Ÿå¦‚æ”¹å˜é¡µé¢å†…å®¹ã€ä¿®æ”¹æŒ‡å®šå…ƒç´ çš„å±æ€§å€¼ã€å¯¹è¡¨å•è¿›è¡Œæ ¡éªŒç­‰ï¼Œä¸‹é¢æ˜¯è¿™äº›åŠŸèƒ½çš„æ•ˆæœå±•ç¤ºï¼š</p><ul><li><p><strong>æ”¹å˜é¡µé¢å†…å®¹</strong></p><p><img src="assets/image-20210814173417834.png" alt="image-20210814173417834" style="zoom:80%;"></p><p>å½“æˆ‘ç‚¹å‡»ä¸Šé¢å·¦å›¾çš„ <code>ç‚¹å‡»æˆ‘</code> æŒ‰é’®ï¼ŒæŒ‰é’®ä¸Šé¢çš„æ–‡æœ¬å°±æ”¹ä¸ºä¸Šé¢å³å›¾å†…å®¹ï¼Œè¿™å°±æ˜¯js æ”¹å˜é¡µé¢å†…å®¹çš„åŠŸèƒ½ã€‚</p></li><li><p><strong>ä¿®æ”¹æŒ‡å®šå…ƒç´ çš„å±æ€§å€¼</strong></p><p><img src="assets/image-20210814173719505.png" alt="image-20210814173719505" style="zoom:70%;"></p><p>å½“æˆ‘ä»¬ç‚¹å‡»ä¸Šå›¾çš„ <code>å¼€ç¯</code> æŒ‰é’®ï¼Œæ•ˆæœå°±æ˜¯ä¸Šé¢å³å›¾æ•ˆæœï¼›å½“æˆ‘ç‚¹å‡» <code>å…³ç¯</code> æŒ‰é’®ï¼Œæ•ˆæœå°±æ˜¯ä¸Šé¢å·¦å›¾æ•ˆæœã€‚å…¶ä»–è¿™ä¸ªåŠŸèƒ½ä¸­æœ‰ä¸¤å¼ ç¯æ³¡çš„å›¾ç‰‡ï¼ˆä½¿ç”¨imgæ ‡ç­¾è¿›è¡Œå±•ç¤ºï¼‰ï¼Œé€šè¿‡ä¿®æ”¹ img æ ‡ç­¾çš„ src å±æ€§å€¼æ”¹å˜å±•ç¤ºçš„å›¾ç‰‡æ¥å®ç°ã€‚</p></li><li><p><strong>å¯¹è¡¨å•è¿›è¡Œæ ¡éªŒ</strong></p><p><img src="assets/image-20210814174242688.png" alt="image-20210814174242688" style="zoom:70%;"></p><p>åœ¨ä¸Šé¢å·¦å›¾çš„è¾“å…¥æ¡†è¾“å…¥ç”¨æˆ·åï¼Œå¦‚æœè¾“å…¥çš„ç”¨æˆ·åæ˜¯ä¸æ»¡è¶³è§„åˆ™çš„å°±å±•ç¤ºå³å›¾(ä¸Š) çš„æ•ˆæœï¼›å¦‚æœè¾“å…¥çš„ç”¨æˆ·åæ˜¯æ»¡è¶³è§„åˆ™çš„å°±å±•ç¤ºå³å›¾(ä¸‹) çš„æ•ˆæœã€‚</p></li></ul><p>JavaScript å’Œ Java æ˜¯å®Œå…¨ä¸åŒçš„è¯­è¨€ï¼Œä¸è®ºæ˜¯æ¦‚å¿µè¿˜æ˜¯è®¾è®¡ï¼Œåªæ˜¯åå­—æ¯”è¾ƒåƒè€Œå·²ã€‚ä½†æ˜¯==åŸºç¡€è¯­æ³•ç±»ä¼¼==ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰javaçš„å­¦ä¹ ç»éªŒï¼Œå†å­¦ä¹ JavaScript è¯­è¨€å°±ç›¸å¯¹æ¯”è¾ƒå®¹æ˜“äº›ã€‚</p><p>JavaScriptï¼ˆç®€ç§°ï¼šJSï¼‰ åœ¨ 1995 å¹´ç”± Brendan Eich å‘æ˜ï¼Œå¹¶äº 1997 å¹´æˆä¸ºä¸€éƒ¨ ECMA æ ‡å‡†ã€‚ECMA è§„å®šäº†ä¸€å¥—æ ‡å‡† å°±å« <code>ECMAScript</code> ï¼Œæ‰€æœ‰çš„å®¢æˆ·ç«¯æ ¡éªŒè¯­è¨€å¿…é¡»éµå®ˆè¿™ä¸ªæ ‡å‡†ï¼Œå½“ç„¶ JavaScript ä¹Ÿéµå®ˆäº†è¿™ä¸ªæ ‡å‡†ã€‚ECMAScript 6 (ç®€ç§°ES6) æ˜¯æœ€æ–°çš„ JavaScript ç‰ˆæœ¬ï¼ˆå‘å¸ƒäº 2015 å¹´)ï¼Œæˆ‘ä»¬çš„è¯¾ç¨‹å°±æ˜¯åŸºäºæœ€æ–°çš„ <code>ES6</code> è¿›è¡Œè®²è§£ã€‚</p><h2 id="2ï¼ŒJavaScriptå¼•å…¥æ–¹å¼"><a href="#2ï¼ŒJavaScriptå¼•å…¥æ–¹å¼" class="headerlink" title="2ï¼ŒJavaScriptå¼•å…¥æ–¹å¼"></a>2ï¼ŒJavaScriptå¼•å…¥æ–¹å¼</h2><p>JavaScript å¼•å…¥æ–¹å¼å°±æ˜¯ HTML å’Œ JavaScript çš„ç»“åˆæ–¹å¼ã€‚JavaScriptå¼•å…¥æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><ul><li>å†…éƒ¨è„šæœ¬ï¼šå°† JSä»£ç å®šä¹‰åœ¨HTMLé¡µé¢ä¸­</li><li>å¤–éƒ¨è„šæœ¬ï¼šå°† JSä»£ç å®šä¹‰åœ¨å¤–éƒ¨ JSæ–‡ä»¶ä¸­ï¼Œç„¶åå¼•å…¥åˆ° HTMLé¡µé¢ä¸­</li></ul><h3 id="2-1-å†…éƒ¨è„šæœ¬"><a href="#2-1-å†…éƒ¨è„šæœ¬" class="headerlink" title="2.1  å†…éƒ¨è„šæœ¬"></a>2.1  å†…éƒ¨è„šæœ¬</h3><p>åœ¨ HTML ä¸­ï¼ŒJavaScript ä»£ç å¿…é¡»ä½äº <code>&lt;script&gt;</code> ä¸ <code>&lt;/script&gt;</code> æ ‡ç­¾ä¹‹é—´</p><p><strong>ä»£ç å¦‚ä¸‹ï¼š</strong></p><p><code>alert(æ•°æ®)</code> æ˜¯ JavaScript çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä½œç”¨æ˜¯å°†å‚æ•°æ•°æ®ä»¥æµè§ˆå™¨å¼¹æ¡†çš„å½¢å¼è¾“å‡ºå‡ºæ¥ã€‚</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title function_">alert</span>(<span class="hljs-string">"hello js1"</span>);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p><strong>æ•ˆæœå¦‚ä¸‹ï¼š</strong></p><p><img src="assets/image-20210814181419691.png" alt="image-20210814181419691" style="zoom:70%;"></p><p>ä»ç»“æœå¯ä»¥çœ‹åˆ° js ä»£ç å·²ç»æ‰§è¡Œäº†ã€‚</p><blockquote><p>==æç¤ºï¼š==</p><ul><li><p>åœ¨ HTML æ–‡æ¡£ä¸­å¯ä»¥åœ¨ä»»æ„åœ°æ–¹ï¼Œæ”¾ç½®ä»»æ„æ•°é‡çš„<script>æ ‡ç­¾ã€‚å¦‚ä¸‹å›¾</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;hello js1&quot;</span>);</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;hello js1&quot;</span>);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;hello js1&quot;</span>);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>ä¸€èˆ¬æŠŠè„šæœ¬ç½®äº <body> å…ƒç´ çš„åº•éƒ¨ï¼Œå¯æ”¹å–„æ˜¾ç¤ºé€Ÿåº¦</p><p>å› ä¸ºæµè§ˆå™¨åœ¨åŠ è½½é¡µé¢çš„æ—¶å€™ä¼šä»ä¸Šå¾€ä¸‹è¿›è¡ŒåŠ è½½å¹¶è§£æã€‚ æˆ‘ä»¬åº”è¯¥è®©ç”¨æˆ·çœ‹åˆ°é¡µé¢å†…å®¹ï¼Œç„¶åå†å±•ç¤ºåŠ¨æ€çš„æ•ˆæœã€‚</p></li></ul></blockquote><h3 id="2-2-å¤–éƒ¨è„šæœ¬"><a href="#2-2-å¤–éƒ¨è„šæœ¬" class="headerlink" title="2.2  å¤–éƒ¨è„šæœ¬"></a>2.2  å¤–éƒ¨è„šæœ¬</h3><p><strong>ç¬¬ä¸€æ­¥ï¼šå®šä¹‰å¤–éƒ¨ js æ–‡ä»¶ã€‚å¦‚å®šä¹‰åä¸º demo.jsçš„æ–‡ä»¶</strong></p><p>é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="assets/image-20210814182345236.png" alt="image-20210814182345236" style="zoom:80%;" /></p><p>demo.js æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;hello js&quot;</span>);<br></code></pre></td></tr></table></figure><p><strong>ç¬¬äºŒæ­¥ï¼šåœ¨é¡µé¢ä¸­å¼•å…¥å¤–éƒ¨çš„jsæ–‡ä»¶</strong></p><p>åœ¨é¡µé¢ä½¿ç”¨ <code>script</code> æ ‡ç­¾ä¸­ä½¿ç”¨ <code>src</code> å±æ€§æŒ‡å®š js æ–‡ä»¶çš„ URL è·¯å¾„ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/demo.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>==æ³¨æ„ï¼š==</p><ul><li><p>å¤–éƒ¨è„šæœ¬ä¸èƒ½åŒ…å« <code>&lt;script&gt;</code> æ ‡ç­¾</p><p>åœ¨jsæ–‡ä»¶ä¸­ç›´æ¥å†™ js ä»£ç å³å¯ï¼Œä¸è¦åœ¨ jsæ–‡ä»¶ ä¸­å†™ <code>script</code> æ ‡ç­¾</p></li><li><p><code>&lt;script&gt;</code> æ ‡ç­¾ä¸èƒ½è‡ªé—­åˆ</p><p>åœ¨é¡µé¢ä¸­å¼•å…¥å¤–éƒ¨jsæ–‡ä»¶æ—¶ï¼Œä¸èƒ½å†™æˆ <code>&lt;script src=&quot;../js/demo.js&quot; /&gt;</code>ã€‚</p></li></ul></blockquote><h2 id="3ï¼ŒJavaScriptåŸºç¡€è¯­æ³•"><a href="#3ï¼ŒJavaScriptåŸºç¡€è¯­æ³•" class="headerlink" title="3ï¼ŒJavaScriptåŸºç¡€è¯­æ³•"></a>3ï¼ŒJavaScriptåŸºç¡€è¯­æ³•</h2><h3 id="3-1-ä¹¦å†™è¯­æ³•"><a href="#3-1-ä¹¦å†™è¯­æ³•" class="headerlink" title="3.1  ä¹¦å†™è¯­æ³•"></a>3.1  ä¹¦å†™è¯­æ³•</h3><ul><li><p>åŒºåˆ†å¤§å°å†™ï¼šä¸ Java ä¸€æ ·ï¼Œå˜é‡åã€å‡½æ•°åä»¥åŠå…¶ä»–ä¸€åˆ‡ä¸œè¥¿éƒ½æ˜¯åŒºåˆ†å¤§å°å†™çš„</p></li><li><p>æ¯è¡Œç»“å°¾çš„åˆ†å·å¯æœ‰å¯æ— </p><p>å¦‚æœä¸€è¡Œä¸Šå†™å¤šä¸ªè¯­å¥æ—¶ï¼Œå¿…é¡»åŠ åˆ†å·ç”¨æ¥åŒºåˆ†å¤šä¸ªè¯­å¥ã€‚</p></li><li><p>æ³¨é‡Š</p><ul><li>å•è¡Œæ³¨é‡Šï¼š// æ³¨é‡Šå†…å®¹</li><li>å¤šè¡Œæ³¨é‡Šï¼š/<em> æ³¨é‡Šå†…å®¹ </em>/</li></ul><blockquote><p>æ³¨æ„ï¼šJavaScript æ²¡æœ‰æ–‡æ¡£æ³¨é‡Š</p></blockquote></li><li><p>å¤§æ‹¬å·è¡¨ç¤ºä»£ç å—</p><p>ä¸‹é¢è¯­å¥å¤§å®¶è‚¯å®šèƒ½çœ‹æ‡‚ï¼Œå’Œ java ä¸€æ · å¤§æ‹¬å·è¡¨ç¤ºä»£ç å—ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">if</span> (count == <span class="hljs-number">3</span>) &#123; <br>   <span class="hljs-title function_">alert</span>(count); <br>&#125; <br></code></pre></td></tr></table></figure></li></ul><h3 id="3-2-è¾“å‡ºè¯­å¥"><a href="#3-2-è¾“å‡ºè¯­å¥" class="headerlink" title="3.2  è¾“å‡ºè¯­å¥"></a>3.2  è¾“å‡ºè¯­å¥</h3><p>js å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œå†…å®¹çš„è¾“å‡ºï¼Œåªä¸è¿‡ä¸åŒçš„è¯­å¥è¾“å‡ºåˆ°çš„ä½ç½®ä¸åŒ</p><ul><li><p><strong>ä½¿ç”¨ window.alert() å†™å…¥è­¦å‘Šæ¡†</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;hello js&quot;</span>);<span class="hljs-comment">//å†™å…¥è­¦å‘Šæ¡†</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç é€šè¿‡æµè§ˆå™¨æ‰“å¼€ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾å¼¹æ¡†æ•ˆæœ</p><p><img src="assets/image-20210814181419691.png" alt="image-20210814181419691" style="zoom:70%;" /></p></li><li><p><strong>ä½¿ç”¨ document.write() å†™å…¥ HTML è¾“å‡º</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">&quot;hello js 2~&quot;</span>);<span class="hljs-comment">//å†™å…¥htmlé¡µé¢</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç é€šè¿‡æµè§ˆå™¨æ‰“å¼€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢ä¸Šçœ‹åˆ° <code>document.write(å†…å®¹)</code> è¾“å‡ºçš„å†…å®¹</p><p><img src="assets/image-20210814190302845.png" alt="image-20210814190302845" style="zoom:80%;" /></p></li><li><p><strong>ä½¿ç”¨ console.log() å†™å…¥æµè§ˆå™¨æ§åˆ¶å°</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;hello js 3&quot;</span>);<span class="hljs-comment">//å†™å…¥æµè§ˆå™¨çš„æ§åˆ¶å°</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç é€šè¿‡æµè§ˆå™¨æ‰“å¼€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸èƒ½é¡µé¢ä¸Šçœ‹åˆ°  <code>console.log(å†…å®¹)</code> è¾“å‡ºçš„å†…å®¹ï¼Œå®ƒæ˜¯è¾“å‡ºåœ¨æ§åˆ¶å°äº†ï¼Œè€Œæ€ä¹ˆåœ¨æ§åˆ¶å°æŸ¥çœ‹è¾“å‡ºçš„å†…å®¹å‘¢ï¼Ÿåœ¨æµè§ˆå™¨ç•Œé¢æŒ‰ <code>F12</code> å°±å¯ä»¥çœ‹åˆ°ä¸‹å›¾çš„æ§åˆ¶å°</p><p><img src="assets/image-20210814190906202.png" alt="image-20210814190906202"></p></li></ul><h3 id="3-3-å˜é‡"><a href="#3-3-å˜é‡" class="headerlink" title="3.3  å˜é‡"></a>3.3  å˜é‡</h3><p>JavaScript ä¸­ç”¨ var å…³é”®å­—ï¼ˆvariable çš„ç¼©å†™ï¼‰æ¥å£°æ˜å˜é‡ã€‚æ ¼å¼ <code>var å˜é‡å = æ•°æ®å€¼;</code>ã€‚è€Œåœ¨JavaScript æ˜¯ä¸€é—¨å¼±ç±»å‹è¯­è¨€ï¼Œå˜é‡==å¯ä»¥å­˜æ”¾ä¸åŒç±»å‹çš„å€¼==ï¼›å¦‚ä¸‹åœ¨å®šä¹‰å˜é‡æ—¶èµ‹å€¼ä¸ºæ•°å­—æ•°æ®ï¼Œè¿˜å¯ä»¥å°†å˜é‡çš„å€¼æ”¹ä¸ºå­—ç¬¦ä¸²ç±»å‹çš„æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> test = <span class="hljs-number">20</span>;<br>test = <span class="hljs-string">&quot;å¼ ä¸‰&quot;</span>;<br></code></pre></td></tr></table></figure><p>js ä¸­çš„å˜é‡åå‘½åä¹Ÿæœ‰å¦‚ä¸‹è§„åˆ™ï¼Œå’Œjavaè¯­è¨€åŸºæœ¬éƒ½ç›¸åŒ</p><ul><li>ç»„æˆå­—ç¬¦å¯ä»¥æ˜¯ä»»ä½•å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰æˆ–ç¾å…ƒç¬¦å·ï¼ˆ$ï¼‰</li><li>æ•°å­—ä¸èƒ½å¼€å¤´</li><li>å»ºè®®ä½¿ç”¨é©¼å³°å‘½å</li></ul><p>JavaScript ä¸­ <code>var</code> å…³é”®å­—æœ‰ç‚¹ç‰¹æ®Šï¼Œæœ‰ä»¥ä¸‹åœ°æ–¹å’Œå…¶ä»–è¯­è¨€ä¸ä¸€æ ·</p><ul><li><p>ä½œç”¨åŸŸï¼šå…¨å±€å˜é‡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-keyword">var</span> age = <span class="hljs-number">20</span>;<br>&#125;<br><span class="hljs-title function_">alert</span>(age);  <span class="hljs-comment">// åœ¨ä»£ç å—ä¸­å®šä¹‰çš„age å˜é‡ï¼Œåœ¨ä»£ç å—å¤–è¾¹è¿˜å¯ä»¥ä½¿ç”¨</span><br></code></pre></td></tr></table></figure></li><li><p>å˜é‡å¯ä»¥é‡å¤å®šä¹‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-keyword">var</span> age = <span class="hljs-number">20</span>;<br>    <span class="hljs-keyword">var</span> age = <span class="hljs-number">30</span>;<span class="hljs-comment">//JavaScript ä¼šç”¨ 30 å°†ä¹‹å‰ age å˜é‡çš„ 20 æ›¿æ¢æ‰</span><br>&#125;<br><span class="hljs-title function_">alert</span>(age); <span class="hljs-comment">//æ‰“å°çš„ç»“æœæ˜¯ 30</span><br></code></pre></td></tr></table></figure></li></ul><p>é’ˆå¯¹å¦‚ä¸Šçš„é—®é¢˜ï¼Œ==ECMAScript 6 æ–°å¢äº† <code>let</code>å…³é”®å­—æ¥å®šä¹‰å˜é‡ã€‚==å®ƒçš„ç”¨æ³•ç±»ä¼¼äº <code>var</code>ï¼Œä½†æ˜¯æ‰€å£°æ˜çš„å˜é‡ï¼Œåªåœ¨ <code>let</code> å…³é”®å­—æ‰€åœ¨çš„ä»£ç å—å†…æœ‰æ•ˆï¼Œä¸”ä¸å…è®¸é‡å¤å£°æ˜ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-keyword">let</span> age = <span class="hljs-number">20</span>;<br>&#125;<br><span class="hljs-title function_">alert</span>(age); <br></code></pre></td></tr></table></figure><p>è¿è¡Œä¸Šé¢ä»£ç ï¼Œæµè§ˆå™¨å¹¶æ²¡æœ‰å¼¹æ¡†è¾“å‡ºç»“æœï¼Œè¯´æ˜è¿™æ®µä»£ç æ˜¯æœ‰é—®é¢˜çš„ã€‚é€šè¿‡ <code>F12</code> æ‰“å¼€å¼€å‘è€…æ¨¡å¼å¯ä»¥çœ‹åˆ°å¦‚ä¸‹é”™è¯¯ä¿¡æ¯</p><p><img src="assets/image-20210815170848426.png" alt="image-20210815170848426" style="zoom:80%;" /></p><p>è€Œå¦‚æœåœ¨ä»£ç å—ä¸­å®šä¹‰ä¸¤ä¸ªåŒåçš„å˜é‡ï¼ŒIDEA å¼€å‘å·¥å…·å°±ç›´æ¥æŠ¥é”™äº†</p><blockquote><p><img src="assets/image-20210815170952829.png" alt="image-20210815170952829" style="zoom:80%;" /></p></blockquote><p>==ECMAScript 6 æ–°å¢äº† constå…³é”®å­—ï¼Œç”¨æ¥å£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ã€‚ä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜ã€‚== é€šè¿‡ä¸‹é¢çš„ä»£ç çœ‹ä¸€ä¸‹å¸¸ç”¨çš„ç‰¹ç‚¹å°±å¯ä»¥äº†</p><blockquote><p><img src="assets/image-20210815171128095.png" alt="image-20210815171128095" style="zoom:80%;" /></p></blockquote><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç»™ PI è¿™ä¸ªå¸¸é‡é‡æ–°èµ‹å€¼æ—¶æŠ¥é”™äº†ã€‚</p><h3 id="3-4-æ•°æ®ç±»å‹"><a href="#3-4-æ•°æ®ç±»å‹" class="headerlink" title="3.4  æ•°æ®ç±»å‹"></a>3.4  æ•°æ®ç±»å‹</h3><p>JavaScript ä¸­æä¾›äº†ä¸¤ç±»æ•°æ®ç±»å‹ï¼šåŸå§‹ç±»å‹ å’Œ å¼•ç”¨ç±»å‹ã€‚</p><blockquote><p>ä½¿ç”¨ typeof è¿ç®—ç¬¦å¯ä»¥è·å–æ•°æ®ç±»å‹</p><p><code>alert(typeof age);</code> ä»¥å¼¹æ¡†çš„å½¢å¼å°† age å˜é‡çš„æ•°æ®ç±»å‹è¾“å‡º</p></blockquote><p>åŸå§‹æ•°æ®ç±»å‹ï¼š</p><ul><li><p><strong>number</strong>ï¼šæ•°å­—ï¼ˆæ•´æ•°ã€å°æ•°ã€NaN(Not a Number)ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> age = <span class="hljs-number">20</span>;<br><span class="hljs-keyword">var</span> price = <span class="hljs-number">99.8</span>;<br><br><span class="hljs-title function_">alert</span>(<span class="hljs-keyword">typeof</span> age); <span class="hljs-comment">// ç»“æœæ˜¯ ï¼š number</span><br><span class="hljs-title function_">alert</span>(<span class="hljs-keyword">typeof</span> price);<span class="hljs-comment">// ç»“æœæ˜¯ ï¼š number</span><br></code></pre></td></tr></table></figure><blockquote><p>==æ³¨æ„ï¼š== NaNæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„numberç±»å‹çš„å€¼ï¼Œåé¢ç”¨åˆ°å†è¯´</p></blockquote></li><li><p><strong>string</strong>ï¼šå­—ç¬¦ã€å­—ç¬¦ä¸²ï¼Œå•åŒå¼•çš†å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> ch = <span class="hljs-string">&#x27;a&#x27;</span>;<br><span class="hljs-keyword">var</span> name = <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>; <br><span class="hljs-keyword">var</span> addr = <span class="hljs-string">&quot;åŒ—äº¬&quot;</span>;<br><br><span class="hljs-title function_">alert</span>(<span class="hljs-keyword">typeof</span> ch); <span class="hljs-comment">//ç»“æœæ˜¯  string</span><br><span class="hljs-title function_">alert</span>(<span class="hljs-keyword">typeof</span> name); <span class="hljs-comment">//ç»“æœæ˜¯  string</span><br><span class="hljs-title function_">alert</span>(<span class="hljs-keyword">typeof</span> addr); <span class="hljs-comment">//ç»“æœæ˜¯  string</span><br></code></pre></td></tr></table></figure><blockquote><p>==æ³¨æ„ï¼š==åœ¨ js ä¸­ åŒå¼•å·å’Œå•å¼•å·éƒ½è¡¨ç¤ºå­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®</p></blockquote></li><li><p><strong>boolean</strong>ï¼šå¸ƒå°”ã€‚trueï¼Œfalse</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> flag = <span class="hljs-literal">true</span>;<br><span class="hljs-keyword">var</span> flag2 = <span class="hljs-literal">false</span>;<br><br><span class="hljs-title function_">alert</span>(<span class="hljs-keyword">typeof</span> flag); <span class="hljs-comment">//ç»“æœæ˜¯ boolean</span><br><span class="hljs-title function_">alert</span>(<span class="hljs-keyword">typeof</span> flag2); <span class="hljs-comment">//ç»“æœæ˜¯ boolean</span><br></code></pre></td></tr></table></figure></li><li><p><strong>null</strong>ï¼šå¯¹è±¡ä¸ºç©º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> obj = <span class="hljs-literal">null</span>;<br><br><span class="hljs-title function_">alert</span>(<span class="hljs-keyword">typeof</span> obj);<span class="hljs-comment">//ç»“æœæ˜¯ object</span><br></code></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆæ‰“å°ä¸Šé¢çš„ obj å˜é‡çš„æ•°æ®ç±»å‹ï¼Œç»“æœæ˜¯objectï¼›è¿™ä¸ªå®˜æ–¹ç»™å‡ºäº†è§£é‡Šï¼Œä¸‹é¢æ˜¯ä»å®˜æ–¹æ–‡æ¡£æˆªçš„å›¾</p><p><img src="assets/image-20210815173003408.png" alt="image-20210815173003408" style="zoom:80%;" /></p></li><li><p><strong>undefined</strong>ï¼šå½“å£°æ˜çš„å˜é‡æœªåˆå§‹åŒ–æ—¶ï¼Œè¯¥å˜é‡çš„é»˜è®¤å€¼æ˜¯ undefined</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> a ;<br><span class="hljs-title function_">alert</span>(<span class="hljs-keyword">typeof</span> a); <span class="hljs-comment">//ç»“æœæ˜¯ undefined</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="3-5-è¿ç®—ç¬¦"><a href="#3-5-è¿ç®—ç¬¦" class="headerlink" title="3.5  è¿ç®—ç¬¦"></a>3.5  è¿ç®—ç¬¦</h3><p>JavaScript æä¾›äº†å¦‚ä¸‹çš„è¿ç®—ç¬¦ã€‚å¤§éƒ¨åˆ†å’Œ Javaè¯­è¨€ éƒ½æ˜¯ä¸€æ ·çš„ï¼Œä¸åŒçš„æ˜¯ JS å…³ç³»è¿ç®—ç¬¦ä¸­çš„ <code>==</code> å’Œ <code>===</code>ï¼Œä¸€ä¼šæˆ‘ä»¬åªæ¼”ç¤ºè¿™ä¸¤ä¸ªçš„åŒºåˆ«ï¼Œå…¶ä»–è¿ç®—ç¬¦å°†ä¸åšæ¼”ç¤º</p><ul><li><p>ä¸€å…ƒè¿ç®—ç¬¦ï¼š++ï¼Œâ€”</p></li><li><p>ç®—æœ¯è¿ç®—ç¬¦ï¼š+ï¼Œ-ï¼Œ*ï¼Œ/ï¼Œ%</p></li><li><p>èµ‹å€¼è¿ç®—ç¬¦ï¼š=ï¼Œ+=ï¼Œ-=â€¦</p></li><li><p>å…³ç³»è¿ç®—ç¬¦ï¼š&gt;ï¼Œ&lt;ï¼Œ&gt;=ï¼Œ&lt;=ï¼Œ!=ï¼Œ\==ï¼Œ===â€¦</p></li><li><p>é€»è¾‘è¿ç®—ç¬¦ï¼š&amp;&amp;ï¼Œ||ï¼Œ!</p></li><li><p>ä¸‰å…ƒè¿ç®—ç¬¦ï¼šæ¡ä»¶è¡¨è¾¾å¼ ? true_value : false_value </p></li></ul><h4 id="3-5-1-å’Œ-åŒºåˆ«"><a href="#3-5-1-å’Œ-åŒºåˆ«" class="headerlink" title="3.5.1  \==å’Œ===åŒºåˆ«"></a>3.5.1  \==å’Œ===åŒºåˆ«</h4><p><strong>æ¦‚è¿°:</strong></p><ul><li><p>==ï¼š</p><ol><li><p>åˆ¤æ–­ç±»å‹æ˜¯å¦ä¸€æ ·ï¼Œå¦‚æœä¸ä¸€æ ·ï¼Œåˆ™è¿›è¡Œç±»å‹è½¬æ¢</p></li><li><p>å†å»æ¯”è¾ƒå…¶å€¼</p></li></ol></li><li><p>===ï¼šjs ä¸­çš„å…¨ç­‰äº</p><ol><li>åˆ¤æ–­ç±»å‹æ˜¯å¦ä¸€æ ·ï¼Œå¦‚æœä¸ä¸€æ ·ï¼Œç›´æ¥è¿”å›false</li><li>å†å»æ¯”è¾ƒå…¶å€¼</li></ol></li></ul><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> age1 = <span class="hljs-number">20</span>;<br><span class="hljs-keyword">var</span> age2 = <span class="hljs-string">&quot;20&quot;</span>;<br><br><span class="hljs-title function_">alert</span>(age1 == age2);<span class="hljs-comment">// true</span><br><span class="hljs-title function_">alert</span>(age1 === age2);<span class="hljs-comment">// false</span><br></code></pre></td></tr></table></figure><h4 id="3-5-2-ç±»å‹è½¬æ¢"><a href="#3-5-2-ç±»å‹è½¬æ¢" class="headerlink" title="3.5.2  ç±»å‹è½¬æ¢"></a>3.5.2  ç±»å‹è½¬æ¢</h4><p>ä¸Šè¿°è®²è§£ <code>==</code> è¿ç®—ç¬¦æ—¶ï¼Œå‘ç°ä¼šè¿›è¡Œç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯¦ç»†çš„è®²è§£ä¸€ä¸‹ JavaScript ä¸­çš„ç±»å‹è½¬æ¢ã€‚</p><ul><li><p>å…¶ä»–ç±»å‹è½¬ä¸ºnumber</p><ul><li><p>string è½¬æ¢ä¸º number ç±»å‹ï¼šæŒ‰ç…§å­—ç¬¦ä¸²çš„å­—é¢å€¼ï¼Œè½¬ä¸ºæ•°å­—ã€‚å¦‚æœå­—é¢å€¼ä¸æ˜¯æ•°å­—ï¼Œåˆ™è½¬ä¸ºNaN</p><p>å°† string è½¬æ¢ä¸º number æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><p>ä½¿ç”¨ <code>+</code> æ­£å·è¿ç®—ç¬¦ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> str = +<span class="hljs-string">&quot;20&quot;</span>;<br><span class="hljs-title function_">alert</span>(str + <span class="hljs-number">1</span>) <span class="hljs-comment">//21</span><br></code></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ <code>parseInt()</code> å‡½æ•°(æ–¹æ³•)ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;20&quot;</span>;<br><span class="hljs-title function_">alert</span>(<span class="hljs-built_in">parseInt</span>(str) + <span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure></li></ul><blockquote><p>==å»ºè®®ä½¿ç”¨ <code>parseInt()</code> å‡½æ•°è¿›è¡Œè½¬æ¢ã€‚==</p></blockquote></li><li><p>boolean è½¬æ¢ä¸º number ç±»å‹ï¼štrue è½¬ä¸º1ï¼Œfalseè½¬ä¸º0</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> flag = +<span class="hljs-literal">false</span>;<br><span class="hljs-title function_">alert</span>(flag); <span class="hljs-comment">// 0</span><br></code></pre></td></tr></table></figure></li></ul></li><li><p>å…¶ä»–ç±»å‹è½¬ä¸ºboolean</p><ul><li>number ç±»å‹è½¬æ¢ä¸º boolean ç±»å‹ï¼š0å’ŒNaNè½¬ä¸ºfalseï¼Œå…¶ä»–çš„æ•°å­—è½¬ä¸ºtrue</li><li>string ç±»å‹è½¬æ¢ä¸º boolean ç±»å‹ï¼šç©ºå­—ç¬¦ä¸²è½¬ä¸ºfalseï¼Œå…¶ä»–çš„å­—ç¬¦ä¸²è½¬ä¸ºtrue</li><li>nullç±»å‹è½¬æ¢ä¸º boolean ç±»å‹æ˜¯ false</li><li>undefined è½¬æ¢ä¸º boolean ç±»å‹æ˜¯ false</li></ul><p><strong>ä»£ç å¦‚ä¸‹ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// var flag = 3;</span><br><span class="hljs-comment">// var flag = &quot;&quot;;</span><br><span class="hljs-keyword">var</span> flag = <span class="hljs-literal">undefined</span>;<br><br><span class="hljs-keyword">if</span>(flag)&#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;è½¬ä¸ºtrue&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;è½¬ä¸ºfalse&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p><p>åœ¨ Java ä¸­ä½¿ç”¨å­—ç¬¦ä¸²å‰ï¼Œä¸€èˆ¬éƒ½ä¼šå…ˆåˆ¤æ–­å­—ç¬¦ä¸²ä¸æ˜¯nullï¼Œå¹¶ä¸”ä¸æ˜¯ç©ºå­—ç¬¦æ‰ä¼šåšå…¶ä»–çš„ä¸€äº›æ“ä½œï¼ŒJavaScriptä¹Ÿæœ‰ç±»å‹çš„æ“ä½œï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;abc&quot;</span>;<br><br><span class="hljs-comment">//å¥å£®æ€§åˆ¤æ–­</span><br><span class="hljs-keyword">if</span>(str != <span class="hljs-literal">null</span> &amp;&amp; str.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>)&#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;è½¬ä¸ºtrue&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;è½¬ä¸ºfalse&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯ç”±äº JavaScript ä¼šè‡ªåŠ¨è¿›è¡Œç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥ä¸Šè¿°çš„åˆ¤æ–­å¯ä»¥è¿›è¡Œç®€åŒ–ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;abc&quot;</span>;<br><br><span class="hljs-comment">//å¥å£®æ€§åˆ¤æ–­</span><br><span class="hljs-keyword">if</span>(str)&#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;è½¬ä¸ºtrue&quot;</span>);<br>&#125;<span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;è½¬ä¸ºfalse&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="3-6-æµç¨‹æ§åˆ¶è¯­å¥"><a href="#3-6-æµç¨‹æ§åˆ¶è¯­å¥" class="headerlink" title="3.6  æµç¨‹æ§åˆ¶è¯­å¥"></a>3.6  æµç¨‹æ§åˆ¶è¯­å¥</h3><p>JavaScript ä¸­æä¾›äº†å’Œ Java ä¸€æ ·çš„æµç¨‹æ§åˆ¶è¯­å¥ï¼Œå¦‚ä¸‹</p><ul><li>if </li><li>switch</li><li>for</li><li>while</li><li>dowhile</li></ul><h4 id="3-6-1-if-è¯­å¥"><a href="#3-6-1-if-è¯­å¥" class="headerlink" title="3.6.1  if è¯­å¥"></a>3.6.1  if è¯­å¥</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> count = <span class="hljs-number">3</span>;<br><span class="hljs-keyword">if</span> (count == <span class="hljs-number">3</span>) &#123;<br>    <span class="hljs-title function_">alert</span>(count);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-6-2-switch-è¯­å¥"><a href="#3-6-2-switch-è¯­å¥" class="headerlink" title="3.6.2  switch è¯­å¥"></a>3.6.2  switch è¯­å¥</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> num = <span class="hljs-number">3</span>;<br><span class="hljs-keyword">switch</span> (num) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;æ˜ŸæœŸä¸€&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;æ˜ŸæœŸäºŒ&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;æ˜ŸæœŸä¸‰&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;æ˜ŸæœŸå››&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;æ˜ŸæœŸäº”&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;æ˜ŸæœŸå…­&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;æ˜ŸæœŸæ—¥&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    <span class="hljs-attr">default</span>:<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;è¾“å…¥çš„æ˜ŸæœŸæœ‰è¯¯&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-6-3-for-å¾ªç¯è¯­å¥"><a href="#3-6-3-for-å¾ªç¯è¯­å¥" class="headerlink" title="3.6.3  for å¾ªç¯è¯­å¥"></a>3.6.3  for å¾ªç¯è¯­å¥</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> sum = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">100</span>; i++) &#123; <span class="hljs-comment">//å»ºè®®forå¾ªç¯å°æ‹¬å·ä¸­å®šä¹‰çš„å˜é‡ä½¿ç”¨let</span><br>    sum += i;<br>&#125;<br><span class="hljs-title function_">alert</span>(sum);<br></code></pre></td></tr></table></figure><h4 id="3-6-4-while-å¾ªç¯è¯­å¥"><a href="#3-6-4-while-å¾ªç¯è¯­å¥" class="headerlink" title="3.6.4  while å¾ªç¯è¯­å¥"></a>3.6.4  while å¾ªç¯è¯­å¥</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> sum = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">while</span> (i &lt;= <span class="hljs-number">100</span>) &#123;<br>    sum += i;<br>    i++;<br>&#125;<br><span class="hljs-title function_">alert</span>(sum);<br></code></pre></td></tr></table></figure><h4 id="3-6-5-dowhile-å¾ªç¯è¯­å¥"><a href="#3-6-5-dowhile-å¾ªç¯è¯­å¥" class="headerlink" title="3.6.5  dowhile å¾ªç¯è¯­å¥"></a>3.6.5  dowhile å¾ªç¯è¯­å¥</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> sum = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">do</span> &#123;<br>    sum += i;<br>    i++;<br>&#125;<br><span class="hljs-keyword">while</span> (i &lt;= <span class="hljs-number">100</span>);<br><span class="hljs-title function_">alert</span>(sum);<br></code></pre></td></tr></table></figure><h3 id="3-7-å‡½æ•°"><a href="#3-7-å‡½æ•°" class="headerlink" title="3.7  å‡½æ•°"></a>3.7  å‡½æ•°</h3><p>å‡½æ•°ï¼ˆå°±æ˜¯Javaä¸­çš„æ–¹æ³•ï¼‰æ˜¯è¢«è®¾è®¡ä¸ºæ‰§è¡Œç‰¹å®šä»»åŠ¡çš„ä»£ç å—ï¼›JavaScript å‡½æ•°é€šè¿‡ function å…³é”®è¯è¿›è¡Œå®šä¹‰ã€‚</p><h4 id="3-7-1-å®šä¹‰æ ¼å¼"><a href="#3-7-1-å®šä¹‰æ ¼å¼" class="headerlink" title="3.7.1  å®šä¹‰æ ¼å¼"></a>3.7.1  å®šä¹‰æ ¼å¼</h4><p>å‡½æ•°å®šä¹‰æ ¼å¼æœ‰ä¸¤ç§ï¼š</p><ul><li><p>æ–¹å¼1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> å‡½æ•°å(å‚æ•°<span class="hljs-number">1</span>,å‚æ•°<span class="hljs-number">2.</span>.)&#123;<br>    è¦æ‰§è¡Œçš„ä»£ç <br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ–¹å¼2</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> å‡½æ•°å = <span class="hljs-keyword">function</span> (<span class="hljs-params">å‚æ•°åˆ—è¡¨</span>)&#123;<br>    è¦æ‰§è¡Œçš„ä»£ç <br>&#125;<br></code></pre></td></tr></table></figure></li></ul><blockquote><p>==æ³¨æ„ï¼š==</p><ul><li><p>å½¢å¼å‚æ•°ä¸éœ€è¦ç±»å‹ã€‚å› ä¸ºJavaScriptæ˜¯å¼±ç±»å‹è¯­è¨€</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>)&#123;<br>    <span class="hljs-keyword">return</span> a + b;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°å‡½æ•°çš„å‚æ•° a å’Œ b ä¸éœ€è¦å®šä¹‰æ•°æ®ç±»å‹ï¼Œå› ä¸ºåœ¨æ¯ä¸ªå‚æ•°å‰åŠ ä¸Š var ä¹Ÿæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚</p></li><li><p>è¿”å›å€¼ä¹Ÿä¸éœ€è¦å®šä¹‰ç±»å‹ï¼Œå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨ç›´æ¥ä½¿ç”¨returnè¿”å›å³å¯</p></li></ul></blockquote><h4 id="3-7-2-å‡½æ•°è°ƒç”¨"><a href="#3-7-2-å‡½æ•°è°ƒç”¨" class="headerlink" title="3.7.2  å‡½æ•°è°ƒç”¨"></a>3.7.2  å‡½æ•°è°ƒç”¨</h4><p>å‡½æ•°è°ƒç”¨å‡½æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">å‡½æ•°åç§°(å®é™…å‚æ•°åˆ—è¡¨);<br></code></pre></td></tr></table></figure><p>egï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> result = <span class="hljs-title function_">add</span>(<span class="hljs-number">10</span>,<span class="hljs-number">20</span>);<br></code></pre></td></tr></table></figure><blockquote><p>==æ³¨æ„ï¼š==</p><ul><li><p>JSä¸­ï¼Œå‡½æ•°è°ƒç”¨å¯ä»¥ä¼ é€’ä»»æ„ä¸ªæ•°å‚æ•°</p></li><li><p>ä¾‹å¦‚  <code>let result = add(1,2,3);</code> </p><p>å®ƒæ˜¯å°†æ•°æ® 1 ä¼ é€’ç»™äº†å˜é‡aï¼Œå°†æ•°æ® 2 ä¼ é€’ç»™äº†å˜é‡ bï¼Œè€Œæ•°æ® 3 æ²¡æœ‰å˜é‡æ¥æ”¶ã€‚</p></li></ul></blockquote><h2 id="4ï¼ŒJavaScriptå¸¸ç”¨å¯¹è±¡"><a href="#4ï¼ŒJavaScriptå¸¸ç”¨å¯¹è±¡" class="headerlink" title="4ï¼ŒJavaScriptå¸¸ç”¨å¯¹è±¡"></a>4ï¼ŒJavaScriptå¸¸ç”¨å¯¹è±¡</h2><p>JavaScript æä¾›äº†å¾ˆå¤šå¯¹è±¡ä¾›ä½¿ç”¨è€…æ¥ä½¿ç”¨ã€‚è¿™äº›å¯¹è±¡æ€»å…±åˆ†ç±»ä¸‰ç±»</p><ul><li><p>åŸºæœ¬å¯¹è±¡</p><p><img src="assets/image-20210815183147297.png" alt="image-20210815183147297" style="zoom:80%;" /></p></li><li><p>BOM å¯¹è±¡</p><p><img src="assets/image-20210815183207660.png" alt="image-20210815183207660" style="zoom:80%;" /></p></li><li><p>DOMå¯¹è±¡</p><p>DOM ä¸­çš„å¯¹è±¡å°±æ¯”è¾ƒå¤šäº†ï¼Œä¸‹å›¾åªæ˜¯æˆªå–éƒ¨åˆ†</p><p><img src="assets/image-20210815183225718.png" alt="image-20210815183225718" style="zoom:80%;" /></p></li></ul><p>è¿™å°èŠ‚æˆ‘ä»¬å…ˆå­¦ä¹ åŸºæœ¬å¯¹è±¡ï¼Œè€Œæˆ‘ä»¬å…ˆå­¦ä¹  <code>Array</code> æ•°ç»„å¯¹è±¡å’Œ <code>String</code> å­—ç¬¦ä¸²å¯¹è±¡ã€‚</p><h3 id="4-1-Arrayå¯¹è±¡"><a href="#4-1-Arrayå¯¹è±¡" class="headerlink" title="4.1  Arrayå¯¹è±¡"></a>4.1  Arrayå¯¹è±¡</h3><p>JavaScript Arrayå¯¹è±¡ç”¨äºå®šä¹‰æ•°ç»„</p><h4 id="4-1-1-å®šä¹‰æ ¼å¼"><a href="#4-1-1-å®šä¹‰æ ¼å¼" class="headerlink" title="4.1.1  å®šä¹‰æ ¼å¼"></a>4.1.1  å®šä¹‰æ ¼å¼</h4><p>æ•°ç»„çš„å®šä¹‰æ ¼å¼æœ‰ä¸¤ç§ï¼š</p><ul><li><p>æ–¹å¼1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> å˜é‡å = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(å…ƒç´ åˆ—è¡¨); <br></code></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>); <span class="hljs-comment">//1,2,3 æ˜¯å­˜å‚¨åœ¨æ•°ç»„ä¸­çš„æ•°æ®ï¼ˆå…ƒç´ ï¼‰</span><br></code></pre></td></tr></table></figure></li><li><p>æ–¹å¼2</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> å˜é‡å = [å…ƒç´ åˆ—è¡¨];<br></code></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]; <span class="hljs-comment">//1,2,3 æ˜¯å­˜å‚¨åœ¨æ•°ç»„ä¸­çš„æ•°æ®ï¼ˆå…ƒç´ ï¼‰</span><br></code></pre></td></tr></table></figure><p>==æ³¨æ„ï¼šJavaä¸­çš„æ•°ç»„é™æ€åˆå§‹åŒ–ä½¿ç”¨çš„æ˜¯{}å®šä¹‰ï¼Œè€Œ JavaScript ä¸­ä½¿ç”¨çš„æ˜¯ [] å®šä¹‰==</p></li></ul><h4 id="4-1-2-å…ƒç´ è®¿é—®"><a href="#4-1-2-å…ƒç´ è®¿é—®" class="headerlink" title="4.1.2  å…ƒç´ è®¿é—®"></a>4.1.2  å…ƒç´ è®¿é—®</h4><p>è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ å’Œ Java è¯­è¨€çš„ä¸€æ ·ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">arr[ç´¢å¼•] = å€¼;<br></code></pre></td></tr></table></figure><p><strong>ä»£ç æ¼”ç¤ºï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"> <span class="hljs-comment">// æ–¹å¼ä¸€</span><br><span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>);<br><span class="hljs-comment">// alert(arr);</span><br><br><span class="hljs-comment">// æ–¹å¼äºŒ</span><br><span class="hljs-keyword">var</span> arr2 = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br><span class="hljs-comment">//alert(arr2);</span><br><br><span class="hljs-comment">// è®¿é—®</span><br>arr2[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span>;<br><span class="hljs-title function_">alert</span>(arr2)<br></code></pre></td></tr></table></figure><h4 id="4-1-3-ç‰¹ç‚¹"><a href="#4-1-3-ç‰¹ç‚¹" class="headerlink" title="4.1.3  ç‰¹ç‚¹"></a>4.1.3  ç‰¹ç‚¹</h4><p>JavaScript ä¸­çš„æ•°ç»„ç›¸å½“äº Java ä¸­é›†åˆã€‚æ•°ç»„çš„é•¿åº¦æ˜¯å¯ä»¥å˜åŒ–çš„ï¼Œè€Œ JavaScript æ˜¯å¼±ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥å­˜å‚¨ä»»æ„çš„ç±»å‹çš„æ•°æ®ã€‚</p><p>ä¾‹å¦‚å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// å˜é•¿</span><br><span class="hljs-keyword">var</span> arr3 = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br>arr3[<span class="hljs-number">10</span>] = <span class="hljs-number">10</span>;<br><span class="hljs-title function_">alert</span>(arr3[<span class="hljs-number">10</span>]); <span class="hljs-comment">// 10</span><br><span class="hljs-title function_">alert</span>(arr3[<span class="hljs-number">9</span>]);  <span class="hljs-comment">//undefined</span><br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç åœ¨å®šä¹‰æ•°ç»„ä¸­ç»™äº†ä¸‰ä¸ªå…ƒç´ ï¼Œåˆç»™ç´¢å¼•æ˜¯ 10 çš„ä½ç½®æ·»åŠ äº†æ•°æ® 10ï¼Œé‚£ä¹ˆ <code>ç´¢å¼•3</code> åˆ° <code>ç´¢å¼•9</code> ä½ç½®çš„å…ƒç´ æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬ä¹‹å‰å°±ä»‹ç»äº†ï¼Œåœ¨ JavaScript ä¸­æ²¡æœ‰èµ‹å€¼çš„è¯ï¼Œé»˜è®¤å°±æ˜¯ <code>undefined</code>ã€‚</p><p>å¦‚æœç»™ <code>arr3</code> æ•°ç»„æ·»åŠ å­—ç¬¦ä¸²çš„æ•°æ®ï¼Œä¹Ÿæ˜¯å¯ä»¥æ·»åŠ æˆåŠŸçš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">arr3[<span class="hljs-number">5</span>] = <span class="hljs-string">&quot;hello&quot;</span>;<br><span class="hljs-title function_">alert</span>(arr3[<span class="hljs-number">5</span>]); <span class="hljs-comment">// hello</span><br></code></pre></td></tr></table></figure><h4 id="4-1-4-å±æ€§"><a href="#4-1-4-å±æ€§" class="headerlink" title="4.1.4  å±æ€§"></a>4.1.4  å±æ€§</h4><p>Array å¯¹è±¡æä¾›äº†å¾ˆå¤šå±æ€§ï¼Œå¦‚ä¸‹å›¾æ˜¯å®˜æ–¹æ–‡æ¡£æˆªå–çš„</p><p><img src="assets/image-20210815190319166.png" alt="image-20210815190319166" style="zoom:80%;" /></p><p>è€Œæˆ‘ä»¬åªè®²è§£ <code>length</code> å±æ€§ï¼Œè¯¥æ•°ç»„å¯ä»¥åŠ¨æ€çš„è·å–æ•°ç»„çš„é•¿åº¦ã€‚è€Œæœ‰è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å°±å¯ä»¥éå†æ•°ç»„äº†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) &#123;<br>    <span class="hljs-title function_">alert</span>(arr[i]);<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-1-5-æ–¹æ³•"><a href="#4-1-5-æ–¹æ³•" class="headerlink" title="4.1.5  æ–¹æ³•"></a>4.1.5  æ–¹æ³•</h4><p>Array å¯¹è±¡åŒæ ·ä¹Ÿæä¾›äº†å¾ˆå¤šæ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ˜¯å®˜æ–¹æ–‡æ¡£æˆªå–çš„</p><p><img src="assets/image-20210815190601340.png" alt="image-20210815190601340" style="zoom:80%;" /></p><p>è€Œæˆ‘ä»¬åœ¨è¯¾å ‚ä¸­åªæ¼”ç¤º <code>push</code> å‡½æ•°å’Œ <code>splice</code> å‡½æ•°ã€‚</p><ul><li><p>push å‡½æ•°ï¼šç»™æ•°ç»„æ·»åŠ å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯åœ¨æ•°ç»„çš„æœ«å°¾æ·»åŠ å…ƒç´ </p><p>å‚æ•°è¡¨ç¤ºè¦æ·»åŠ çš„å…ƒç´ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// push:æ·»åŠ æ–¹æ³•</span><br><span class="hljs-keyword">var</span> arr5 = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br>arr5.<span class="hljs-title function_">push</span>(<span class="hljs-number">10</span>);<br><span class="hljs-title function_">alert</span>(arr5);  <span class="hljs-comment">//æ•°ç»„çš„å…ƒç´ æ˜¯ &#123;1,2,3,10&#125;</span><br></code></pre></td></tr></table></figure></li><li><p>splice å‡½æ•°ï¼šåˆ é™¤å…ƒç´ </p><p>å‚æ•°1ï¼šç´¢å¼•ã€‚è¡¨ç¤ºä»å“ªä¸ªç´¢å¼•ä½ç½®åˆ é™¤</p><p>å‚æ•°2ï¼šä¸ªæ•°ã€‚è¡¨ç¤ºåˆ é™¤å‡ ä¸ªå…ƒç´ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// splice:åˆ é™¤å…ƒç´ </span><br><span class="hljs-keyword">var</span> arr5 = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>];<br>arr5.<span class="hljs-title function_">splice</span>(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>); <span class="hljs-comment">//ä» 0 ç´¢å¼•ä½ç½®å¼€å§‹åˆ é™¤ï¼Œåˆ é™¤ä¸€ä¸ªå…ƒç´  </span><br><span class="hljs-title function_">alert</span>(arr5); <span class="hljs-comment">// &#123;2,3&#125;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="4-2-Stringå¯¹è±¡"><a href="#4-2-Stringå¯¹è±¡" class="headerlink" title="4.2  Stringå¯¹è±¡"></a>4.2  Stringå¯¹è±¡</h3><p>Stringå¯¹è±¡çš„åˆ›å»ºæ–¹å¼æœ‰ä¸¤ç§</p><ul><li><p>æ–¹å¼1ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> å˜é‡å = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(s); <br></code></pre></td></tr></table></figure></li><li><p>æ–¹å¼2ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> å˜é‡å = <span class="hljs-string">&quot;æ•°ç»„&quot;</span>; <br></code></pre></td></tr></table></figure></li></ul><p><strong>å±æ€§ï¼š</strong></p><p>Stringå¯¹è±¡æä¾›äº†å¾ˆå¤šå±æ€§ï¼Œä¸‹é¢ç»™å¤§å®¶åˆ—ä¸¾äº†ä¸€ä¸ªå±æ€§ <code>length</code> ï¼Œè¯¥å±æ€§æ˜¯ç”¨äºåŠ¨æ€çš„è·å–å­—ç¬¦ä¸²çš„é•¿åº¦</p><p><img src="assets/image-20210815192504884.png" alt="image-20210815192504884" style="zoom:60%;" /></p><p><strong>å‡½æ•°ï¼š</strong></p><p>Stringå¯¹è±¡æä¾›äº†å¾ˆå¤šå‡½æ•°ï¼ˆæ–¹æ³•ï¼‰ï¼Œä¸‹é¢ç»™å¤§å®¶åˆ—ä¸¾äº†ä¸¤ä¸ªæ–¹æ³•ã€‚</p><p><img src="assets/image-20210815192544172.png" alt="image-20210815192544172" style="zoom:70%;" /></p><p>Stringå¯¹è±¡è¿˜æœ‰ä¸€ä¸ªå‡½æ•° <code>trim()</code> ï¼Œè¯¥æ–¹æ³•åœ¨æ–‡æ¡£ä¸­æ²¡æœ‰ä½“ç°ï¼Œä½†æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒï¼›å®ƒæ˜¯ç”¨æ¥å»æ‰å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼ã€‚</p><p>ä»£ç æ¼”ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> str4 = <span class="hljs-string">&#x27;  abc   &#x27;</span>;<br><span class="hljs-title function_">alert</span>(<span class="hljs-number">1</span> + str4 + <span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¼šè¾“å‡ºå†…å®¹ <code>1  abc  1</code>ï¼Œå¾ˆæ˜æ˜¾å¯ä»¥çœ‹åˆ° abc å­—ç¬¦ä¸²å·¦å³ä¸¤è¾¹æ˜¯æœ‰ç©ºæ ¼çš„ã€‚æ¥ä¸‹æ¥ä½¿ç”¨ <code>trim()</code> å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> str4 = <span class="hljs-string">&#x27;  abc   &#x27;</span>;<br><span class="hljs-title function_">alert</span>(<span class="hljs-number">1</span> + str4.<span class="hljs-title function_">trim</span>() + <span class="hljs-number">1</span>);<br></code></pre></td></tr></table></figure><p>è¾“å‡ºçš„å†…å®¹æ˜¯ <code>1abc1</code> ã€‚è¿™å°±æ˜¯ <code>trim()</code> å‡½æ•°çš„ä½œç”¨ã€‚</p><p><code>trim()</code> å‡½æ•°åœ¨ä»¥åå¼€å‘ä¸­è¿˜æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œä¾‹å¦‚ä¸‹å›¾æ‰€ç¤ºæ˜¯ç™»é™†ç•Œé¢</p><p><img src="assets/image-20210815193420418.png" alt="image-20210815193420418" style="zoom:80%;"/> </p><p>ç”¨æˆ·åœ¨è¾“å…¥ç”¨æˆ·åå’Œå¯†ç æ—¶ï¼Œå¯èƒ½ä¼šä¹ æƒ¯çš„è¾“å…¥ä¸€äº›ç©ºæ ¼ï¼Œè¿™æ ·åœ¨æˆ‘ä»¬åç«¯ç¨‹åºä¸­åˆ¤æ–­ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®ï¼Œç»“æœè‚¯å®šæ˜¯å¤±è´¥ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šå¯¹ç”¨æˆ·è¾“å…¥çš„å­—ç¬¦ä¸²æ•°æ®è¿›è¡Œå»é™¤å‰åç©ºæ ¼çš„æ“ä½œã€‚</p><h3 id="4-3-è‡ªå®šä¹‰å¯¹è±¡"><a href="#4-3-è‡ªå®šä¹‰å¯¹è±¡" class="headerlink" title="4.3  è‡ªå®šä¹‰å¯¹è±¡"></a>4.3  è‡ªå®šä¹‰å¯¹è±¡</h3><p>åœ¨ JavaScript ä¸­è‡ªå®šä¹‰å¯¹è±¡ç‰¹åˆ«ç®€å•ï¼Œä¸‹é¢å°±æ˜¯è‡ªå®šä¹‰å¯¹è±¡çš„æ ¼å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> å¯¹è±¡åç§° = &#123;<br>    å±æ€§åç§°<span class="hljs-number">1</span>:å±æ€§å€¼<span class="hljs-number">1</span>,<br>    å±æ€§åç§°<span class="hljs-number">2</span>:å±æ€§å€¼<span class="hljs-number">2</span>,<br>    ...,<br>    å‡½æ•°åç§°:<span class="hljs-keyword">function</span> (<span class="hljs-params">å½¢å‚åˆ—è¡¨</span>)&#123;&#125;,<br>...<br>&#125;;<br></code></pre></td></tr></table></figure><p>è°ƒç”¨å±æ€§çš„æ ¼å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">å¯¹è±¡å.å±æ€§å<br></code></pre></td></tr></table></figure><p>è°ƒç”¨å‡½æ•°çš„æ ¼å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">å¯¹è±¡å.å‡½æ•°å()<br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥é€šè¿‡ä»£ç æ¼”ç¤ºä¸€ä¸‹ï¼Œè®©å¤§å®¶ä½“éªŒä¸€ä¸‹ JavaScript ä¸­è‡ªå®šä¹‰å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> person = &#123;<br>        name : <span class="hljs-string">&quot;zhangsan&quot;</span>,<br>        age : <span class="hljs-number">23</span>,<br>        <span class="hljs-attr">eat</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<br>            <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;å¹²é¥­~&quot;</span>);<br>        &#125;<br>    &#125;;<br><br><br><span class="hljs-title function_">alert</span>(person.<span class="hljs-property">name</span>);  <span class="hljs-comment">//zhangsan</span><br><span class="hljs-title function_">alert</span>(person.<span class="hljs-property">age</span>); <span class="hljs-comment">//23</span><br><br>person.<span class="hljs-title function_">eat</span>();  <span class="hljs-comment">//å¹²é¥­~</span><br></code></pre></td></tr></table></figure><h2 id="5ï¼ŒBOM"><a href="#5ï¼ŒBOM" class="headerlink" title="5ï¼ŒBOM"></a>5ï¼ŒBOM</h2><p>BOMï¼šBrowser Object Model æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ã€‚ä¹Ÿå°±æ˜¯ JavaScript å°†æµè§ˆå™¨çš„å„ä¸ªç»„æˆéƒ¨åˆ†å°è£…ä¸ºå¯¹è±¡ã€‚</p><p>æˆ‘ä»¬è¦æ“ä½œæµè§ˆå™¨çš„å„ä¸ªç»„æˆéƒ¨åˆ†å°±å¯ä»¥é€šè¿‡æ“ä½œ BOM ä¸­çš„å¯¹è±¡æ¥å®ç°ã€‚æ¯”å¦‚ï¼šæˆ‘ç°åœ¨æƒ³å°†æµè§ˆå™¨åœ°å€æ çš„åœ°å€æ”¹ä¸º <code>https://www.itheima.com</code> å°±å¯ä»¥é€šè¿‡ä½¿ç”¨ BOM ä¸­å®šä¹‰çš„ <code>Location</code> å¯¹è±¡çš„ <code>href</code> å±æ€§ï¼Œä»£ç ï¼š <code>location.href = &quot;https://itheima.com&quot;;</code> </p><p> BOM ä¸­åŒ…å«äº†å¦‚ä¸‹å¯¹è±¡ï¼š</p><ul><li>Windowï¼šæµè§ˆå™¨çª—å£å¯¹è±¡</li><li>Navigatorï¼šæµè§ˆå™¨å¯¹è±¡</li><li>Screenï¼šå±å¹•å¯¹è±¡</li><li>Historyï¼šå†å²è®°å½•å¯¹è±¡</li><li>Locationï¼šåœ°å€æ å¯¹è±¡</li></ul><p>ä¸‹å›¾æ˜¯ BOM ä¸­çš„å„ä¸ªå¯¹è±¡å’Œæµè§ˆå™¨çš„å„ä¸ªç»„æˆéƒ¨åˆ†çš„å¯¹åº”å…³ç³»</p><p><img src="assets/image-20210815194911914.png" alt="image-20210815194911914" style="zoom:70%;" /></p><p>BOM ä¸­çš„ <code>Navigator</code> å¯¹è±¡å’Œ <code>Screen</code> å¯¹è±¡åŸºæœ¬ä¸ä¼šä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„è¯¾å ‚åªå¯¹ <code>Window</code>ã€<code>History</code>ã€<code>Location</code> å¯¹è±¡è¿›è¡Œè®²è§£ã€‚</p><h3 id="5-1-Windowå¯¹è±¡"><a href="#5-1-Windowå¯¹è±¡" class="headerlink" title="5.1  Windowå¯¹è±¡"></a>5.1  Windowå¯¹è±¡</h3><p>window å¯¹è±¡æ˜¯ JavaScript å¯¹æµè§ˆå™¨çš„çª—å£è¿›è¡Œå°è£…çš„å¯¹è±¡ã€‚</p><h4 id="5-1-1-è·å–windowå¯¹è±¡"><a href="#5-1-1-è·å–windowå¯¹è±¡" class="headerlink" title="5.1.1  è·å–windowå¯¹è±¡"></a>5.1.1  è·å–windowå¯¹è±¡</h4><p>è¯¥å¯¹è±¡ä¸éœ€è¦åˆ›å»ºç›´æ¥ä½¿ç”¨ <code>window</code>ï¼Œå…¶ä¸­ <code>window.</code> å¯ä»¥çœç•¥ã€‚æ¯”å¦‚æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„ <code>alert()</code> å‡½æ•°ï¼Œå…¶å®å°±æ˜¯ <code>window</code> å¯¹è±¡çš„å‡½æ•°ï¼Œåœ¨è°ƒç”¨æ˜¯å¯ä»¥å†™æˆå¦‚ä¸‹ä¸¤ç§</p><ul><li><p>æ˜¾å¼ä½¿ç”¨ <code>window</code> å¯¹è±¡è°ƒç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;abc&quot;</span>);<br></code></pre></td></tr></table></figure></li><li><p>éšå¼è°ƒç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">alert(&quot;abc&quot;)<br></code></pre></td></tr></table></figure></li></ul><h4 id="5-1-2-windowå¯¹è±¡å±æ€§"><a href="#5-1-2-windowå¯¹è±¡å±æ€§" class="headerlink" title="5.1.2  windowå¯¹è±¡å±æ€§"></a>5.1.2  windowå¯¹è±¡å±æ€§</h4><p><code>window</code> å¯¹è±¡æä¾›äº†ç”¨äºè·å–å…¶ä»– BOM ç»„æˆå¯¹è±¡çš„å±æ€§</p><p><img src="assets/image-20210815200625592.png" alt="image-20210815200625592" style="zoom:80%;" /></p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æƒ³ä½¿ç”¨ <code>Location</code> å¯¹è±¡çš„è¯ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>window</code> å¯¹è±¡è·å–ï¼›å†™æˆ <code>window.location</code>ï¼Œè€Œ <code>window.</code> å¯ä»¥çœç•¥ï¼Œç®€åŒ–å†™æˆ <code>location</code> æ¥è·å– <code>Location</code> å¯¹è±¡ã€‚</p><h4 id="5-1-3-windowå¯¹è±¡å‡½æ•°"><a href="#5-1-3-windowå¯¹è±¡å‡½æ•°" class="headerlink" title="5.1.3  windowå¯¹è±¡å‡½æ•°"></a>5.1.3  windowå¯¹è±¡å‡½æ•°</h4><p><code>window</code> å¯¹è±¡æä¾›äº†å¾ˆå¤šå‡½æ•°ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œè€Œå¾ˆå¤šéƒ½ä¸å¸¸ç”¨ï¼›ä¸‹é¢ç»™å¤§å®¶åˆ—ä¸¾äº†ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„å‡½æ•°</p><p><img src="assets/image-20210815201323329.png" alt="image-20210815201323329" style="zoom:80%;" /></p><blockquote><p><code>setTimeout(function,æ¯«ç§’å€¼)</code> : åœ¨ä¸€å®šçš„æ—¶é—´é—´éš”åæ‰§è¡Œä¸€ä¸ªfunctionï¼Œåªæ‰§è¡Œä¸€æ¬¡<br><code>setInterval(function,æ¯«ç§’å€¼)</code> :åœ¨ä¸€å®šçš„æ—¶é—´é—´éš”åæ‰§è¡Œä¸€ä¸ªfunctionï¼Œå¾ªç¯æ‰§è¡Œ</p></blockquote><p><strong>confirmä»£ç æ¼”ç¤ºï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// confirm()ï¼Œç‚¹å‡»ç¡®å®šæŒ‰é’®ï¼Œè¿”å›trueï¼Œç‚¹å‡»å–æ¶ˆæŒ‰é’®ï¼Œè¿”å›false</span><br><span class="hljs-keyword">var</span> flag = <span class="hljs-title function_">confirm</span>(<span class="hljs-string">&quot;ç¡®è®¤åˆ é™¤ï¼Ÿ&quot;</span>);<br><br><span class="hljs-title function_">alert</span>(flag);<br></code></pre></td></tr></table></figure><p>ä¸‹å›¾æ˜¯ <code>confirm()</code> å‡½æ•°çš„æ•ˆæœã€‚å½“æˆ‘ä»¬ç‚¹å‡» <code>ç¡®å®š</code> æŒ‰é’®ï¼Œ<code>flag</code> å˜é‡å€¼è®°å½•çš„å°±æ˜¯ <code>true</code> ï¼›å½“æˆ‘ä»¬ç‚¹å‡» <code>å–æ¶ˆ</code> æŒ‰é’®ï¼Œ<code>flag</code> å˜é‡å€¼è®°å½•çš„å°±æ˜¯ <code>false</code>ã€‚</p><p><img src="assets/image-20210815201600493.png" alt="image-20210815201600493" style="zoom:80%;" /></p><p>è€Œä»¥åæˆ‘ä»¬åœ¨é¡µé¢åˆ é™¤æ•°æ®æ—¶å€™å¦‚ä¸‹å›¾æ¯ä¸€æ¡æ•°æ®åéƒ½æœ‰ <code>åˆ é™¤</code> æŒ‰é’®ï¼Œæœ‰å¯èƒ½æ˜¯ç”¨æˆ·çš„ä¸€äº›è¯¯æ“ä½œï¼Œæ‰€ä»¥å¯¹äºåˆ é™¤æ“ä½œéœ€è¦ç”¨æˆ·è¿›è¡Œå†æ¬¡ç¡®è®¤ï¼Œæ­¤æ—¶å°±éœ€è¦ç”¨åˆ° <code>confirm()</code> å‡½æ•°ã€‚</p><p><img src="assets/image-20210815202406490.png" alt="image-20210815202406490" style="zoom:70%;" /></p><p><strong>å®šæ—¶å™¨ä»£ç æ¼”ç¤ºï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;hehe&quot;</span>);<br>&#125;,<span class="hljs-number">3000</span>);<br></code></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨ï¼Œ3ç§’åæ‰ä¼šå¼¹æ¡†è¾“å‡º <code>hehe</code>ï¼Œå¹¶ä¸”åªä¼šå¼¹å‡ºä¸€æ¬¡ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;hehe&quot;</span>);<br>&#125;,<span class="hljs-number">2000</span>);<br></code></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨ï¼Œæ¯éš”2ç§’éƒ½ä¼šå¼¹æ¡†è¾“å‡º <code>hehe</code>ã€‚</p><h4 id="5-1-4-æ¡ˆä¾‹"><a href="#5-1-4-æ¡ˆä¾‹" class="headerlink" title="5.1.4  æ¡ˆä¾‹"></a>5.1.4  æ¡ˆä¾‹</h4><p><strong>éœ€æ±‚ï¼šæ¯éš”1ç§’ï¼Œç¯æ³¡åˆ‡æ¢ä¸€æ¬¡çŠ¶æ€</strong></p><p><img src="assets/image-20210815203345262.png" alt="image-20210815203345262" style="zoom:70%;" /></p><p>éœ€æ±‚è¯´æ˜ï¼š</p><p>æœ‰å¦‚ä¸‹é¡µé¢æ•ˆæœï¼Œå®ç°å®šæ—¶è¿›è¡Œå¼€ç¯ã€å…³ç¯åŠŸèƒ½</p><p><img src="assets/image-20210815203623739.png" alt="image-20210815203623739" style="zoom:80%;" /></p><p>åˆå§‹é¡µé¢ç¯å¢ƒ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>JavaScriptæ¼”ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;on()&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¼€ç¯&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myImage&quot;</span> <span class="hljs-attr">border</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../imgs/off.gif&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align:center;&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;off()&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å…³ç¯&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">on</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;myImage&#x27;</span>).<span class="hljs-property">src</span>=<span class="hljs-string">&#x27;../imgs/on.gif&#x27;</span>;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">off</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;myImage&#x27;</span>).<span class="hljs-property">src</span>=<span class="hljs-string">&#x27;../imgs/off.gif&#x27;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä»£ç å®ç°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>JavaScriptæ¼”ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;on()&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å¼€ç¯&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;myImage&quot;</span> <span class="hljs-attr">border</span>=<span class="hljs-string">&quot;0&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../imgs/off.gif&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;text-align:center;&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;off()&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å…³ç¯&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">on</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;myImage&#x27;</span>).<span class="hljs-property">src</span>=<span class="hljs-string">&#x27;../imgs/on.gif&#x27;</span>;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">off</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;myImage&#x27;</span>).<span class="hljs-property">src</span>=<span class="hljs-string">&#x27;../imgs/off.gif&#x27;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    </span><br><span class="language-javascript">    <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç”¨æ¥è®°å½•ç¯çš„çŠ¶æ€ï¼Œå¶æ•°æ˜¯å¼€ç¯çŠ¶æ€ï¼Œå¥‡æ•°æ˜¯å…³ç¯çŠ¶æ€</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>;</span><br><span class="language-javascript">    <span class="hljs-comment">//ä½¿ç”¨å¾ªç¯å®šæ—¶å™¨</span></span><br><span class="language-javascript">    <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">if</span>(x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>)&#123;<span class="hljs-comment">//è¡¨ç¤ºæ˜¯å¶æ•°ï¼Œå¼€ç¯çŠ¶æ€ï¼Œè°ƒç”¨ on() å‡½æ•°</span></span><br><span class="language-javascript">            <span class="hljs-title function_">on</span>();</span><br><span class="language-javascript">        &#125;<span class="hljs-keyword">else</span> &#123;  <span class="hljs-comment">//è¡¨ç¤ºæ˜¯å¥‡æ•°ï¼Œå…³ç¯çŠ¶æ€ï¼Œè°ƒç”¨ off() å‡½æ•°</span></span><br><span class="language-javascript">            <span class="hljs-title function_">off</span>();</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        x ++;<span class="hljs-comment">//æ”¹å˜å˜é‡çš„å€¼</span></span><br><span class="language-javascript">    &#125;,<span class="hljs-number">1000</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-2-Historyå¯¹è±¡"><a href="#5-2-Historyå¯¹è±¡" class="headerlink" title="5.2  Historyå¯¹è±¡"></a>5.2  Historyå¯¹è±¡</h3><p>History å¯¹è±¡æ˜¯ JavaScript å¯¹å†å²è®°å½•è¿›è¡Œå°è£…çš„å¯¹è±¡ã€‚</p><ul><li><p>History å¯¹è±¡çš„è·å–</p><p>ä½¿ç”¨ window.historyè·å–ï¼Œå…¶ä¸­window. å¯ä»¥çœç•¥</p></li><li><p>History å¯¹è±¡çš„å‡½æ•°</p><p><img src="assets/image-20210815224826535.png" alt="image-20210815224826535" style="zoom:70%;" /></p><p>è¿™ä¸¤ä¸ªå‡½æ•°æˆ‘ä»¬å¹³æ—¶åœ¨è®¿é—®å…¶ä»–çš„ä¸€äº›ç½‘ç«™æ—¶ç»å¸¸ä½¿ç”¨å¯¹åº”çš„æ•ˆæœï¼Œå¦‚ä¸‹å›¾</p><p><img src="assets/image-20210815225059114.png" alt="image-20210815225059114" style="zoom:80%;" /></p><p>å½“æˆ‘ä»¬ç‚¹å‡»å‘å·¦çš„ç®­å¤´ï¼Œå°±è·³è½¬åˆ°å‰ä¸€ä¸ªè®¿é—®çš„é¡µé¢ï¼Œè¿™å°±æ˜¯ <code>back()</code> å‡½æ•°çš„ä½œç”¨ï¼›å½“æˆ‘ä»¬ç‚¹å‡»å‘å³çš„ç®­å¤´ï¼Œå°±è·³è½¬åˆ°ä¸‹ä¸€ä¸ªè®¿é—®çš„é¡µé¢ï¼Œè¿™å°±æ˜¯ <code>forward()</code> å‡½æ•°çš„ä½œç”¨ã€‚</p></li></ul><h3 id="5-3-Locationå¯¹è±¡"><a href="#5-3-Locationå¯¹è±¡" class="headerlink" title="5.3  Locationå¯¹è±¡"></a>5.3  Locationå¯¹è±¡</h3><p><img src="assets/image-20210815225243560.png" alt="image-20210815225243560" style="zoom:80%;" /></p><p>Location å¯¹è±¡æ˜¯ JavaScript å¯¹åœ°å€æ å°è£…çš„å¯¹è±¡ã€‚å¯ä»¥é€šè¿‡æ“ä½œè¯¥å¯¹è±¡ï¼Œè·³è½¬åˆ°ä»»æ„é¡µé¢ã€‚</p><h4 id="5-3-1-è·å–Locationå¯¹è±¡"><a href="#5-3-1-è·å–Locationå¯¹è±¡" class="headerlink" title="5.3.1  è·å–Locationå¯¹è±¡"></a>5.3.1  è·å–Locationå¯¹è±¡</h4><p>ä½¿ç”¨ window.locationè·å–ï¼Œå…¶ä¸­window. å¯ä»¥çœç•¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.æ–¹æ³•();<br>location.æ–¹æ³•();<br></code></pre></td></tr></table></figure><h4 id="5-3-2-Locationå¯¹è±¡å±æ€§"><a href="#5-3-2-Locationå¯¹è±¡å±æ€§" class="headerlink" title="5.3.2  Locationå¯¹è±¡å±æ€§"></a>5.3.2  Locationå¯¹è±¡å±æ€§</h4><p>Locationå¯¹è±¡æä¾›äº†å¾ˆå¯¹å±æ€§ã€‚ä»¥åå¸¸ç”¨çš„åªæœ‰ä¸€ä¸ªå±æ€§ <code>href</code></p><p><img src="assets/image-20210815225707580.png" alt="image-20210815225707580" style="zoom:80%;" /></p><p><strong>ä»£ç æ¼”ç¤ºï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;è¦è·³è½¬äº†&quot;</span>);<br>location.<span class="hljs-property">href</span> = <span class="hljs-string">&quot;https://www.baidu.com&quot;</span>;<br></code></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨é¦–å…ˆä¼šå¼¹æ¡†æ˜¾ç¤º <code>è¦è·³è½¬äº†</code>ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»äº† <code>ç¡®å®š</code> å°±ä¼šè·³è½¬åˆ° ç™¾åº¦ çš„é¦–é¡µã€‚</p><h4 id="5-3-3-æ¡ˆä¾‹"><a href="#5-3-3-æ¡ˆä¾‹" class="headerlink" title="5.3.3  æ¡ˆä¾‹"></a>5.3.3  æ¡ˆä¾‹</h4><p><strong>éœ€æ±‚ï¼š3ç§’è·³è½¬åˆ°ç™¾åº¦é¦–é¡µ</strong></p><p><strong>åˆ†æï¼š</strong></p><ol><li>3ç§’è·³è½¬ï¼Œç”±æ­¤å¯ä»¥ç¡®å®šéœ€è¦ä½¿ç”¨åˆ°å®šæ—¶å™¨ï¼Œè€Œåªè·³è½¬ä¸€æ¬¡ï¼Œæ‰€ä»¥ä½¿ç”¨ <code>setTimeOut()</code></li><li>è¦è¿›è¡Œé¡µé¢è·³è½¬ï¼Œæ‰€ä»¥éœ€è¦ç”¨åˆ° <code>location</code> å¯¹è±¡çš„ <code>href</code> å±æ€§å®ç°</li></ol><p><strong>ä»£ç å®ç°ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">&quot;3ç§’è·³è½¬åˆ°é¦–é¡µ...&quot;</span>); <br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<br>    location.<span class="hljs-property">href</span> = <span class="hljs-string">&quot;https://www.baidu.com&quot;</span><br>&#125;,<span class="hljs-number">3000</span>);<br></code></pre></td></tr></table></figure><h2 id="6ï¼ŒDOM"><a href="#6ï¼ŒDOM" class="headerlink" title="6ï¼ŒDOM"></a>6ï¼ŒDOM</h2><h3 id="6-1-æ¦‚è¿°"><a href="#6-1-æ¦‚è¿°" class="headerlink" title="6.1  æ¦‚è¿°"></a>6.1  æ¦‚è¿°</h3><p>DOMï¼šDocument Object Model æ–‡æ¡£å¯¹è±¡æ¨¡å‹ã€‚ä¹Ÿå°±æ˜¯ JavaScript å°† HTML æ–‡æ¡£çš„å„ä¸ªç»„æˆéƒ¨åˆ†å°è£…ä¸ºå¯¹è±¡ã€‚</p><p>DOM å…¶å®æˆ‘ä»¬å¹¶ä¸é™Œç”Ÿï¼Œä¹‹å‰åœ¨å­¦ä¹  XML å°±æ¥è§¦è¿‡ï¼Œåªä¸è¿‡ XML æ–‡æ¡£ä¸­çš„æ ‡ç­¾éœ€è¦æˆ‘ä»¬å†™ä»£ç è§£æï¼Œè€Œ HTML æ–‡æ¡£æ˜¯æµè§ˆå™¨è§£æã€‚å°è£…çš„å¯¹è±¡åˆ†ä¸º</p><ul><li>Documentï¼šæ•´ä¸ªæ–‡æ¡£å¯¹è±¡</li><li>Elementï¼šå…ƒç´ å¯¹è±¡</li><li>Attributeï¼šå±æ€§å¯¹è±¡</li><li>Textï¼šæ–‡æœ¬å¯¹è±¡</li><li>Commentï¼šæ³¨é‡Šå¯¹è±¡</li></ul><p>å¦‚ä¸‹å›¾ï¼Œå·¦è¾¹æ˜¯ HTML æ–‡æ¡£å†…å®¹ï¼Œå³è¾¹æ˜¯ DOM æ ‘</p><p><img src="assets/image-20210815231028430.png" alt="image-20210815231028430"></p><p><strong>ä½œç”¨ï¼š</strong></p><p>JavaScript é€šè¿‡ DOMï¼Œ å°±èƒ½å¤Ÿå¯¹ HTMLè¿›è¡Œæ“ä½œäº†</p><ul><li>æ”¹å˜ HTML å…ƒç´ çš„å†…å®¹</li><li>æ”¹å˜ HTML å…ƒç´ çš„æ ·å¼ï¼ˆCSSï¼‰</li><li>å¯¹ HTML DOM äº‹ä»¶ä½œå‡ºååº”</li><li>æ·»åŠ å’Œåˆ é™¤ HTML å…ƒç´ </li></ul><p><strong>DOMç›¸å…³æ¦‚å¿µï¼š</strong></p><p>DOM æ˜¯ W3Cï¼ˆä¸‡ç»´ç½‘è”ç›Ÿï¼‰å®šä¹‰äº†è®¿é—® HTML å’Œ XML æ–‡æ¡£çš„æ ‡å‡†ã€‚è¯¥æ ‡å‡†è¢«åˆ†ä¸º 3 ä¸ªä¸åŒçš„éƒ¨åˆ†ï¼š</p><ol><li><p>æ ¸å¿ƒ DOMï¼šé’ˆå¯¹ä»»ä½•ç»“æ„åŒ–æ–‡æ¡£çš„æ ‡å‡†æ¨¡å‹ã€‚ XML å’Œ HTML é€šç”¨çš„æ ‡å‡†</p><ul><li><p>Documentï¼šæ•´ä¸ªæ–‡æ¡£å¯¹è±¡</p></li><li><p>Elementï¼šå…ƒç´ å¯¹è±¡</p></li><li><p>Attributeï¼šå±æ€§å¯¹è±¡</p></li><li><p>Textï¼šæ–‡æœ¬å¯¹è±¡</p></li><li><p>Commentï¼šæ³¨é‡Šå¯¹è±¡</p></li></ul></li><li><p>XML DOMï¼š é’ˆå¯¹ XML æ–‡æ¡£çš„æ ‡å‡†æ¨¡å‹</p></li><li><p>HTML DOMï¼š é’ˆå¯¹ HTML æ–‡æ¡£çš„æ ‡å‡†æ¨¡å‹</p><p>è¯¥æ ‡å‡†æ˜¯åœ¨æ ¸å¿ƒ DOM åŸºç¡€ä¸Šï¼Œå¯¹ HTML ä¸­çš„æ¯ä¸ªæ ‡ç­¾éƒ½å°è£…æˆäº†ä¸åŒçš„å¯¹è±¡</p><ul><li>ä¾‹å¦‚ï¼š<code>&lt;img&gt;</code> æ ‡ç­¾åœ¨æµè§ˆå™¨åŠ è½½åˆ°å†…å­˜ä¸­æ—¶ä¼šè¢«å°è£…æˆ <code>Image</code> å¯¹è±¡ï¼ŒåŒæ—¶è¯¥å¯¹è±¡ä¹Ÿæ˜¯ <code>Element</code> å¯¹è±¡ã€‚</li><li>ä¾‹å¦‚ï¼š<code>&lt;input type=&#39;button&#39;&gt;</code> æ ‡ç­¾åœ¨æµè§ˆå™¨åŠ è½½åˆ°å†…å­˜ä¸­æ—¶ä¼šè¢«å°è£…æˆ <code>Button</code> å¯¹è±¡ï¼ŒåŒæ—¶è¯¥å¯¹è±¡ä¹Ÿæ˜¯ <code>Element</code> å¯¹è±¡ã€‚</li></ul></li></ol><h3 id="6-2-è·å–-Elementå¯¹è±¡"><a href="#6-2-è·å–-Elementå¯¹è±¡" class="headerlink" title="6.2  è·å– Elementå¯¹è±¡"></a>6.2  è·å– Elementå¯¹è±¡</h3><p>HTML ä¸­çš„ Element å¯¹è±¡å¯ä»¥é€šè¿‡ <code>Document</code> å¯¹è±¡è·å–ï¼Œè€Œ <code>Document</code> å¯¹è±¡æ˜¯é€šè¿‡ <code>window</code> å¯¹è±¡è·å–ã€‚</p><p><code>Document</code> å¯¹è±¡ä¸­æä¾›äº†ä»¥ä¸‹è·å– <code>Element</code> å…ƒç´ å¯¹è±¡çš„å‡½æ•°</p><ul><li><code>getElementById()</code>ï¼šæ ¹æ®idå±æ€§å€¼è·å–ï¼Œè¿”å›å•ä¸ªElementå¯¹è±¡</li><li><code>getElementsByTagName()</code>ï¼šæ ¹æ®æ ‡ç­¾åç§°è·å–ï¼Œè¿”å›Elementå¯¹è±¡æ•°ç»„</li><li><code>getElementsByName()</code>ï¼šæ ¹æ®nameå±æ€§å€¼è·å–ï¼Œè¿”å›Elementå¯¹è±¡æ•°ç»„</li><li><code>getElementsByClassName()</code>ï¼šæ ¹æ®classå±æ€§å€¼è·å–ï¼Œè¿”å›Elementå¯¹è±¡æ•°ç»„</li></ul><p><strong>ä»£ç æ¼”ç¤ºï¼š</strong></p><p>ä¸‹é¢æœ‰æå‰å‡†å¤‡å¥½çš„é¡µé¢ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;light&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../imgs/off.gif&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cls&quot;</span>&gt;</span>ä¼ æ™ºæ•™è‚²<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cls&quot;</span>&gt;</span>é»‘é©¬ç¨‹åºå‘˜<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby&quot;</span>&gt;</span> ç”µå½±<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby&quot;</span>&gt;</span> æ—…æ¸¸<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby&quot;</span>&gt;</span> æ¸¸æˆ<br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">//åœ¨æ­¤å¤„ä¹¦å†™jsä»£ç </span></span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><ol><li><p>æ ¹æ® <code>id</code> å±æ€§å€¼è·å–ä¸Šé¢çš„ <code>img</code> å…ƒç´ å¯¹è±¡ï¼Œè¿”å›å•ä¸ªå¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;light&quot;</span>);<br><span class="hljs-title function_">alert</span>(img);<br></code></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="assets/image-20210815233232924.png" alt="image-20210815233232924" style="zoom:80%;" /></p><p>ä»å¼¹æ¡†è¾“å‡ºçš„å†…å®¹ï¼Œä¹Ÿå¯ä»¥çœ‹å‡ºæ˜¯ä¸€ä¸ªå›¾ç‰‡å…ƒç´ å¯¹è±¡ã€‚</p></li><li><p>æ ¹æ®æ ‡ç­¾åç§°è·å–æ‰€æœ‰çš„ <code>div</code> å…ƒç´ å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> divs = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">&quot;div&quot;</span>);<span class="hljs-comment">// è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­å­˜å‚¨çš„æ˜¯ div å…ƒç´ å¯¹è±¡</span><br><span class="hljs-comment">// alert(divs.length);  //è¾“å‡º æ•°ç»„çš„é•¿åº¦</span><br><span class="hljs-comment">//éå†æ•°ç»„</span><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; divs.<span class="hljs-property">length</span>; i++) &#123;<br>    <span class="hljs-title function_">alert</span>(divs[i]);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è·å–æ‰€æœ‰çš„æ»¡è¶³ <code>name = &#39;hobby&#39;</code> æ¡ä»¶çš„å…ƒç´ å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//3. getElementsByNameï¼šæ ¹æ®nameå±æ€§å€¼è·å–ï¼Œè¿”å›Elementå¯¹è±¡æ•°ç»„</span><br><span class="hljs-keyword">var</span> hobbys = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByName</span>(<span class="hljs-string">&quot;hobby&quot;</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; hobbys.<span class="hljs-property">length</span>; i++) &#123;<br>    <span class="hljs-title function_">alert</span>(hobbys[i]);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è·å–æ‰€æœ‰çš„æ»¡è¶³ <code>class=&#39;cls&#39;</code> æ¡ä»¶çš„å…ƒç´ å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//4. getElementsByClassNameï¼šæ ¹æ®classå±æ€§å€¼è·å–ï¼Œè¿”å›Elementå¯¹è±¡æ•°ç»„</span><br><span class="hljs-keyword">var</span> clss = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByClassName</span>(<span class="hljs-string">&quot;cls&quot;</span>);<br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; clss.<span class="hljs-property">length</span>; i++) &#123;<br>    <span class="hljs-title function_">alert</span>(clss[i]);<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h3 id="6-3-HTML-Elementå¯¹è±¡ä½¿ç”¨"><a href="#6-3-HTML-Elementå¯¹è±¡ä½¿ç”¨" class="headerlink" title="6.3  HTML Elementå¯¹è±¡ä½¿ç”¨"></a>6.3  HTML Elementå¯¹è±¡ä½¿ç”¨</h3><p>HTML ä¸­çš„ <code>Element</code> å…ƒç´ å¯¹è±¡æœ‰å¾ˆå¤šï¼Œä¸å¯èƒ½å…¨éƒ¨è®°ä½ï¼Œä»¥åæ˜¯æ ¹æ®å…·ä½“çš„éœ€æ±‚æŸ¥é˜…æ–‡æ¡£ä½¿ç”¨ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡å…·ä½“çš„æ¡ˆä¾‹ç»™å¤§å®¶æ¼”ç¤ºæ–‡æ¡£çš„æŸ¥è¯¢å’Œå¯¹è±¡çš„ä½¿ç”¨ï¼›ä¸‹é¢æå‰ç»™å¤§å®¶å‡†å¤‡å¥½çš„é¡µé¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;light&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../imgs/off.gif&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cls&quot;</span>&gt;</span>ä¼ æ™ºæ•™è‚²<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>   <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cls&quot;</span>&gt;</span>é»‘é©¬ç¨‹åºå‘˜<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby&quot;</span>&gt;</span> ç”µå½±<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby&quot;</span>&gt;</span> æ—…æ¸¸<br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hobby&quot;</span>&gt;</span> æ¸¸æˆ<br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">//åœ¨æ­¤å¤„å†™jsä½å—</span></span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>éœ€æ±‚ï¼š</strong></p><ol><li><p>ç‚¹äº®ç¯æ³¡</p><p>æ­¤æ¡ˆä¾‹ç”±äºéœ€è¦æ”¹å˜ <code>img</code> æ ‡ç­¾ çš„å›¾ç‰‡ï¼Œæ‰€ä»¥æˆ‘ä»¬æŸ¥è¯¢æ–‡æ¡£ï¼Œä¸‹å›¾æ˜¯æŸ¥çœ‹æ–‡æ¡£çš„æµç¨‹ï¼š</p><p><img src="assets/æŸ¥çœ‹æ–‡æ¡£.png" alt="image-20210815233232924" style="zoom:100%;" /></p><p>ä»£ç å®ç°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//1ï¼Œæ ¹æ® id=&#x27;light&#x27; è·å– img å…ƒç´ å¯¹è±¡</span><br><span class="hljs-keyword">var</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;light&quot;</span>);<br><span class="hljs-comment">//2ï¼Œä¿®æ”¹ img å¯¹è±¡çš„ src å±æ€§æ¥æ”¹å˜å›¾ç‰‡</span><br>img.<span class="hljs-property">src</span> = <span class="hljs-string">&quot;../imgs/on.gif&quot;</span>;<br></code></pre></td></tr></table></figure></li><li><p>å°†æ‰€æœ‰çš„ <code>div</code> æ ‡ç­¾çš„æ ‡ç­¾ä½“å†…å®¹æ›¿æ¢ä¸º <code>å‘µå‘µ</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//1ï¼Œè·å–æ‰€æœ‰çš„ div å…ƒç´ å¯¹è±¡</span><br><span class="hljs-keyword">var</span> divs = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">&quot;div&quot;</span>);<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">        style:è®¾ç½®å…ƒç´ cssæ ·å¼</span><br><span class="hljs-comment">        innerHTMLï¼šè®¾ç½®å…ƒç´ å†…å®¹</span><br><span class="hljs-comment">    */</span><br><span class="hljs-comment">//2ï¼Œéå†æ•°ç»„ï¼Œè·å–åˆ°æ¯ä¸€ä¸ª div å…ƒç´ å¯¹è±¡ï¼Œå¹¶ä¿®æ”¹å…ƒç´ å†…å®¹</span><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; divs.<span class="hljs-property">length</span>; i++) &#123;<br>    <span class="hljs-comment">//divs[i].style.color = &#x27;red&#x27;;</span><br>    divs[i].<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;å‘µå‘µ&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ä½¿æ‰€æœ‰çš„å¤é€‰æ¡†å‘ˆç°è¢«é€‰ä¸­çš„çŠ¶æ€</p><p>æ­¤æ¡ˆä¾‹æˆ‘ä»¬éœ€è¦çœ‹ å¤é€‰æ¡† å…ƒç´ å¯¹è±¡æœ‰ä»€ä¹ˆå±æ€§æˆ–è€…å‡½æ•°æ˜¯æ¥æ“ä½œ å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€ã€‚ä¸‹å›¾æ˜¯æ–‡æ¡£çš„æŸ¥çœ‹</p><p><img src="assets/image-20210816000520457.png" alt="image-20210816000520457"></p><p>ä»£ç å®ç°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//1ï¼Œè·å–æ‰€æœ‰çš„ å¤é€‰æ¡† å…ƒç´ å¯¹è±¡</span><br><span class="hljs-keyword">var</span> hobbys = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByName</span>(<span class="hljs-string">&quot;hobby&quot;</span>);<br><span class="hljs-comment">//2ï¼Œéå†æ•°ç»„ï¼Œé€šè¿‡å°† å¤é€‰æ¡† å…ƒç´ å¯¹è±¡çš„ checked å±æ€§å€¼è®¾ç½®ä¸º true æ¥æ”¹å˜å¤é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€</span><br><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; hobbys.<span class="hljs-property">length</span>; i++) &#123;<br>    hobbys[i].<span class="hljs-property">checked</span> = <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h2 id="7ï¼Œäº‹ä»¶ç›‘å¬"><a href="#7ï¼Œäº‹ä»¶ç›‘å¬" class="headerlink" title="7ï¼Œäº‹ä»¶ç›‘å¬"></a>7ï¼Œäº‹ä»¶ç›‘å¬</h2><p>è¦æƒ³çŸ¥é“ä»€ä¹ˆæ˜¯äº‹ä»¶ç›‘å¬ï¼Œé¦–å…ˆå…ˆèŠèŠä»€ä¹ˆæ˜¯äº‹ä»¶ï¼Ÿ</p><p>HTML äº‹ä»¶æ˜¯å‘ç”Ÿåœ¨ HTML å…ƒç´ ä¸Šçš„â€œäº‹æƒ…â€ã€‚æ¯”å¦‚ï¼šé¡µé¢ä¸Šçš„ <code>æŒ‰é’®è¢«ç‚¹å‡»</code>ã€<code>é¼ æ ‡ç§»åŠ¨åˆ°å…ƒç´ ä¹‹ä¸Š</code>ã€<code>æŒ‰ä¸‹é”®ç›˜æŒ‰é”®</code> ç­‰éƒ½æ˜¯äº‹ä»¶ã€‚</p><p>äº‹ä»¶ç›‘å¬æ˜¯JavaScript å¯ä»¥åœ¨äº‹ä»¶è¢«ä¾¦æµ‹åˆ°æ—¶==æ‰§è¡Œä¸€æ®µé€»è¾‘ä»£ç ã€‚==ä¾‹å¦‚ä¸‹å›¾å½“æˆ‘ä»¬ç‚¹å‡» <code>å¼€ç¯</code> æŒ‰é’®ï¼Œå°±éœ€è¦é€šè¿‡ js ä»£ç å®ç°æ›¿æ¢å›¾ç‰‡</p><p><img src="assets/image-20210816194143246.png" alt="image-20210816194143246" style="zoom:80%;" /></p><p>å†æ¯”å¦‚ä¸‹å›¾è¾“å…¥æ¡†ï¼Œå½“æˆ‘ä»¬è¾“å…¥äº†ç”¨æˆ·å <code>å…‰æ ‡ç¦»å¼€</code> è¾“å…¥æ¡†ï¼Œå°±éœ€è¦é€šè¿‡ js ä»£ç å¯¹è¾“å…¥çš„å†…å®¹è¿›è¡Œæ ¡éªŒï¼Œæ²¡é€šè¿‡æ ¡éªŒå°±åœ¨è¾“å…¥æ¡†åæç¤º <code>ç”¨æˆ·åæ ¼å¼æœ‰è¯¯!</code></p><p><img src="assets/image-20210816194333252.png" alt="image-20210816194333252" style="zoom:90%;" /></p><h3 id="7-1-äº‹ä»¶ç»‘å®š"><a href="#7-1-äº‹ä»¶ç»‘å®š" class="headerlink" title="7.1  äº‹ä»¶ç»‘å®š"></a>7.1  äº‹ä»¶ç»‘å®š</h3><p>JavaScript æä¾›äº†ä¸¤ç§äº‹ä»¶ç»‘å®šæ–¹å¼ï¼š</p><ul><li><p>æ–¹å¼ä¸€ï¼šé€šè¿‡ HTMLæ ‡ç­¾ä¸­çš„äº‹ä»¶å±æ€§è¿›è¡Œç»‘å®š</p><p>å¦‚ä¸‹é¢ä»£ç ï¼Œæœ‰ä¸€ä¸ªæŒ‰é’®å…ƒç´ ï¼Œæˆ‘ä»¬æ˜¯åœ¨è¯¥æ ‡ç­¾ä¸Šå®šä¹‰ <code>äº‹ä»¶å±æ€§</code>ï¼Œåœ¨äº‹ä»¶å±æ€§ä¸­ç»‘å®šå‡½æ•°ã€‚<code>onclick</code> å°±æ˜¯ <code>å•å‡»äº‹ä»¶</code> çš„äº‹ä»¶å±æ€§ã€‚<code>onclick=&#39;onï¼ˆï¼‰&#39;</code> è¡¨ç¤ºè¯¥ç‚¹å‡»äº‹ä»¶ç»‘å®šäº†ä¸€ä¸ªåä¸º <code>on()</code> çš„å‡½æ•°</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&#x27;on()â€™&gt;</span></span><br></code></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ç‚¹å‡»äº‹ä»¶ç»‘å®šçš„ <code>on()</code> å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">on</span>(<span class="hljs-params"></span>)&#123;<br><span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;æˆ‘è¢«ç‚¹äº†&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ–¹å¼äºŒï¼šé€šè¿‡ DOM å…ƒç´ å±æ€§ç»‘å®š</p><p>å¦‚ä¸‹é¢ä»£ç æ˜¯æŒ‰é’®æ ‡ç­¾ï¼Œåœ¨è¯¥æ ‡ç­¾ä¸Šæˆ‘ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨ <code>äº‹ä»¶å±æ€§</code>ï¼Œç»‘å®šäº‹ä»¶çš„æ“ä½œéœ€è¦åœ¨ js ä»£ç ä¸­å®ç°</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä¸‹é¢ js ä»£ç æ˜¯è·å–äº† <code>id=&#39;btn&#39;</code> çš„å…ƒç´ å¯¹è±¡ï¼Œç„¶åå°† <code>onclick</code> ä½œä¸ºè¯¥å¯¹è±¡çš„å±æ€§ï¼Œå¹¶ä¸”ç»‘å®šåŒ¿åå‡½æ•°ã€‚è¯¥å‡½æ•°æ˜¯åœ¨äº‹ä»¶è§¦å‘åè‡ªåŠ¨æ‰§è¡Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;btn&quot;</span>).<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;æˆ‘è¢«ç‚¹äº†&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p><strong>ä»£ç æ¼”ç¤ºï¼š</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--æ–¹å¼1ï¼šåœ¨ä¸‹é¢inputæ ‡ç­¾ä¸Šæ·»åŠ  onclick å±æ€§ï¼Œå¹¶ç»‘å®š on() å‡½æ•°--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;ç‚¹æˆ‘&quot;</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;on()&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;å†ç‚¹æˆ‘&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">function</span> <span class="hljs-title function_">on</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;æˆ‘è¢«ç‚¹äº†&quot;</span>);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      <span class="hljs-comment">//æ–¹å¼2ï¼šè·å– id=&quot;btn&quot; å…ƒç´ å¯¹è±¡ï¼Œé€šè¿‡è°ƒç”¨ onclick å±æ€§ ç»‘å®šç‚¹å‡»äº‹ä»¶</span></span><br><span class="language-javascript">        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;btn&quot;</span>).<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;æˆ‘è¢«ç‚¹äº†&quot;</span>);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="7-2-å¸¸è§äº‹ä»¶"><a href="#7-2-å¸¸è§äº‹ä»¶" class="headerlink" title="7.2  å¸¸è§äº‹ä»¶"></a>7.2  å¸¸è§äº‹ä»¶</h3><p>ä¸Šé¢æ¡ˆä¾‹ä¸­ä½¿ç”¨åˆ°äº† <code>onclick</code> äº‹ä»¶å±æ€§ï¼Œé‚£éƒ½æœ‰å“ªäº›äº‹ä»¶å±æ€§ä¾›æˆ‘ä»¬ä½¿ç”¨å‘¢ï¼Ÿä¸‹é¢å°±ç»™å¤§å®¶åˆ—ä¸¾ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„äº‹ä»¶å±æ€§</p><div class="table-container"><table><thead><tr><th>äº‹ä»¶å±æ€§å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>onclick</td><td>é¼ æ ‡å•å‡»äº‹ä»¶</td></tr><tr><td>onblur</td><td>å…ƒç´ å¤±å»ç„¦ç‚¹</td></tr><tr><td>onfocus</td><td>å…ƒç´ è·å¾—ç„¦ç‚¹</td></tr><tr><td>onload</td><td>æŸä¸ªé¡µé¢æˆ–å›¾åƒè¢«å®ŒæˆåŠ è½½</td></tr><tr><td>onsubmit</td><td>å½“è¡¨å•æäº¤æ—¶è§¦å‘è¯¥äº‹ä»¶</td></tr><tr><td>onmouseover</td><td>é¼ æ ‡è¢«ç§»åˆ°æŸå…ƒç´ ä¹‹ä¸Š</td></tr><tr><td>onmouseout</td><td>é¼ æ ‡ä»æŸå…ƒç´ ç§»å¼€</td></tr></tbody></table></div><ul><li><p><code>onfocus</code> è·å¾—ç„¦ç‚¹äº‹ä»¶ã€‚</p><p>å¦‚ä¸‹å›¾ï¼Œå½“ç‚¹å‡»äº†è¾“å…¥æ¡†åï¼Œè¾“å…¥æ¡†å°±è·å¾—äº†ç„¦ç‚¹ã€‚è€Œä¸‹å›¾ç¤ºä¾‹æ˜¯å½“è·å–ç„¦ç‚¹åä¼šæ›´æ”¹è¾“å…¥æ¡†çš„èƒŒæ™¯é¢œè‰²ã€‚</p><p><img src="assets/image-20210816214900928.png" alt="image-20210816214900928" style="zoom:80%;" /></p></li><li><p><code>onblur</code> å¤±å»ç„¦ç‚¹äº‹ä»¶ã€‚</p><p>å¦‚ä¸‹å›¾ï¼Œå½“ç‚¹å‡»äº†è¾“å…¥æ¡†åï¼Œè¾“å…¥æ¡†å°±è·å¾—äº†ç„¦ç‚¹ï¼›å†ç‚¹å‡»é¡µé¢å…¶ä»–ä½ç½®ï¼Œé‚£è¾“å…¥æ¡†å°±å¤±å»ç„¦ç‚¹äº†ã€‚ä¸‹å›¾ç¤ºä¾‹æ˜¯å°†è¾“å…¥çš„æ–‡æœ¬è½¬æ¢ä¸ºå¤§å†™ã€‚</p><p><img src="assets/image-20210816215235969.png" alt="image-20210816215235969" style="zoom:80%;" /></p></li><li><p><code>onmouseout</code> é¼ æ ‡ç§»å‡ºäº‹ä»¶ã€‚</p></li><li><p><code>onmouseover</code>  é¼ æ ‡ç§»å…¥äº‹ä»¶ã€‚</p><p>å¦‚ä¸‹å›¾ï¼Œå½“é¼ æ ‡ç§»å…¥åˆ° è‹¹æœ å›¾ç‰‡ä¸Šæ—¶ï¼Œè‹¹æœå›¾ç‰‡å˜å¤§ï¼›å½“é¼ æ ‡ç§»å‡º è‹¹æœå›¾ç‰‡æ—¶ï¼Œè‹¹æœå›¾ç‰‡å˜å°ã€‚</p><p><img src="assets/image-20210816220149093.png" alt="image-20210816220149093" style="zoom:70%;" /></p></li><li><p><code>onsubmit</code> è¡¨å•æäº¤äº‹ä»¶</p><p>å¦‚ä¸‹æ˜¯å¸¦æœ‰è¡¨å•çš„é¡µé¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;register&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;#&quot;</span> &gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æäº¤&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br>        <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¦‚ä¸Šä»£ç çš„è¡¨å•ï¼Œå½“æˆ‘ä»¬ç‚¹å‡» <code>æäº¤</code> æŒ‰é’®åï¼Œè¡¨å•å°±ä¼šæäº¤ï¼Œæ­¤å¤„é»˜è®¤ä½¿ç”¨çš„æ˜¯ <code>GET</code> æäº¤æ–¹å¼ï¼Œä¼šå°†æäº¤çš„æ•°æ®æ‹¼æ¥åˆ° URL åã€‚ç°éœ€è¦é€šè¿‡ js ä»£ç å®ç°é˜»æ­¢è¡¨å•æäº¤çš„åŠŸèƒ½ï¼Œjs ä»£ç å®ç°å¦‚ä¸‹ï¼š</p><ol><li>è·å– <code>form</code> è¡¨å•å…ƒç´ å¯¹è±¡ã€‚</li><li>ç»™ <code>form</code> è¡¨å•å…ƒç´ å¯¹è±¡ç»‘å®š <code>onsubmit</code> äº‹ä»¶ï¼Œå¹¶ç»‘å®šåŒ¿åå‡½æ•°ã€‚</li><li>è¯¥åŒ¿åå‡½æ•°å¦‚æœè¿”å›çš„æ˜¯trueï¼Œæäº¤è¡¨å•ï¼›å¦‚æœè¿”å›çš„æ˜¯falseï¼Œé˜»æ­¢è¡¨å•æäº¤ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;register&quot;</span>).<span class="hljs-property">onsubmit</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">//onsubmit è¿”å›trueï¼Œåˆ™è¡¨å•ä¼šè¢«æäº¤ï¼Œè¿”å›falseï¼Œåˆ™è¡¨å•ä¸æäº¤</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="8ï¼Œè¡¨å•éªŒè¯æ¡ˆä¾‹"><a href="#8ï¼Œè¡¨å•éªŒè¯æ¡ˆä¾‹" class="headerlink" title="8ï¼Œè¡¨å•éªŒè¯æ¡ˆä¾‹"></a>8ï¼Œè¡¨å•éªŒè¯æ¡ˆä¾‹</h2><h3 id="8-1-éœ€æ±‚"><a href="#8-1-éœ€æ±‚" class="headerlink" title="8.1  éœ€æ±‚"></a>8.1  éœ€æ±‚</h3><p><img src="assets/image-20210816225925955.png" alt="image-20210816225925955" style="zoom:60%;" /></p><p>æœ‰å¦‚ä¸‹æ³¨å†Œé¡µé¢ï¼Œå¯¹è¡¨å•è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœè¾“å…¥çš„ç”¨æˆ·åã€å¯†ç ã€æ‰‹æœºå·ç¬¦åˆè§„åˆ™ï¼Œåˆ™å…è®¸æäº¤ï¼›å¦‚æœä¸ç¬¦åˆè§„åˆ™ï¼Œåˆ™ä¸å…è®¸æäº¤ã€‚</p><p>å®Œæˆä»¥ä¸‹éœ€æ±‚ï¼š</p><ol><li><p>å½“è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹æ—¶ï¼ŒéªŒè¯è¾“å…¥å†…å®¹æ˜¯å¦ç¬¦åˆè¦æ±‚</p></li><li><p>å½“ç‚¹å‡»æ³¨å†ŒæŒ‰é’®æ—¶ï¼Œåˆ¤æ–­æ‰€æœ‰è¾“å…¥æ¡†çš„å†…å®¹æ˜¯å¦éƒ½ç¬¦åˆè¦æ±‚ï¼Œå¦‚æœä¸åˆç¬¦åˆ™é˜»æ­¢è¡¨å•æäº¤</p></li></ol><h3 id="8-2-ç¯å¢ƒå‡†å¤‡"><a href="#8-2-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="8.2  ç¯å¢ƒå‡†å¤‡"></a>8.2  ç¯å¢ƒå‡†å¤‡</h3><p>ä¸‹é¢æ˜¯åˆå§‹é¡µé¢</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ¬¢è¿æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../css/register.css&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-div&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reg-content&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ¬¢è¿æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å·²æœ‰å¸å·ï¼Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;reg-form&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;get&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>ç”¨æˆ·å<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;inputs&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;username_err&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;err_msg&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: none&quot;</span>&gt;</span>ç”¨æˆ·åä¸å¤ªå—æ¬¢è¿<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><br>                <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å¯†ç <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;inputs&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;password_err&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;err_msg&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: none&quot;</span>&gt;</span>å¯†ç æ ¼å¼æœ‰è¯¯<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><br>                <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>æ‰‹æœºå·<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;inputs&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;tel&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tel&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tel_err&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;err_msg&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: none&quot;</span>&gt;</span>æ‰‹æœºå·æ ¼å¼æœ‰è¯¯<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;buttons&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æ³¨ å†Œ&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;reg_btn&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">br</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;clear&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="8-3-éªŒè¯è¾“å…¥æ¡†"><a href="#8-3-éªŒè¯è¾“å…¥æ¡†" class="headerlink" title="8.3  éªŒè¯è¾“å…¥æ¡†"></a>8.3  éªŒè¯è¾“å…¥æ¡†</h3><p>æ­¤å°èŠ‚å®Œæˆå¦‚ä¸‹åŠŸèƒ½ï¼š</p><ul><li>æ ¡éªŒç”¨æˆ·åã€‚å½“ç”¨æˆ·åè¾“å…¥æ¡†å¤±å»ç„¦ç‚¹æ—¶ï¼Œåˆ¤æ–­è¾“å…¥çš„å†…å®¹æ˜¯å¦ç¬¦åˆ <code>é•¿åº¦æ˜¯ 6-12 ä½</code> è§„åˆ™ï¼Œä¸ç¬¦åˆä½¿ <code>id=&#39;username_err&#39;</code> çš„spanæ ‡ç­¾æ˜¾ç¤ºå‡ºæ¥ï¼Œç»™å‡ºç”¨æˆ·æç¤ºã€‚</li><li>æ ¡éªŒå¯†ç ã€‚å½“å¯†ç è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹æ—¶ï¼Œåˆ¤æ–­è¾“å…¥çš„å†…å®¹æ˜¯å¦ç¬¦åˆ <code>é•¿åº¦æ˜¯ 6-12 ä½</code> è§„åˆ™ï¼Œä¸ç¬¦åˆä½¿ <code>id=&#39;password_err&#39;</code> çš„spanæ ‡ç­¾æ˜¾ç¤ºå‡ºæ¥ï¼Œç»™å‡ºç”¨æˆ·æç¤ºã€‚</li><li>æ ¡éªŒæ‰‹æœºå·ã€‚å½“æ‰‹æœºå·è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹æ—¶ï¼Œåˆ¤æ–­è¾“å…¥çš„å†…å®¹æ˜¯å¦ç¬¦åˆ <code>é•¿åº¦æ˜¯ 11 ä½</code> è§„åˆ™ï¼Œä¸ç¬¦åˆä½¿ <code>id=&#39;tel_err&#39;</code> çš„spanæ ‡ç­¾æ˜¾ç¤ºå‡ºæ¥ï¼Œç»™å‡ºç”¨æˆ·æç¤ºã€‚</li></ul><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//1. éªŒè¯ç”¨æˆ·åæ˜¯å¦ç¬¦åˆè§„åˆ™</span><br><span class="hljs-comment">//1.1 è·å–ç”¨æˆ·åçš„è¾“å…¥æ¡†</span><br><span class="hljs-keyword">var</span> usernameInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;username&quot;</span>);<br><br><span class="hljs-comment">//1.2 ç»‘å®šonbluräº‹ä»¶ å¤±å»ç„¦ç‚¹</span><br>usernameInput.<span class="hljs-property">onblur</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//1.3 è·å–ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·å</span><br>    <span class="hljs-keyword">var</span> username = usernameInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();<br><br>    <span class="hljs-comment">//1.4 åˆ¤æ–­ç”¨æˆ·åæ˜¯å¦ç¬¦åˆè§„åˆ™ï¼šé•¿åº¦ 6~12</span><br>    <span class="hljs-keyword">if</span> (username.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">6</span> &amp;&amp; username.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">12</span>) &#123;<br>        <span class="hljs-comment">//ç¬¦åˆè§„åˆ™</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;username_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">//ä¸åˆç¬¦è§„åˆ™</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;username_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//1. éªŒè¯å¯†ç æ˜¯å¦ç¬¦åˆè§„åˆ™</span><br><span class="hljs-comment">//1.1 è·å–å¯†ç çš„è¾“å…¥æ¡†</span><br><span class="hljs-keyword">var</span> passwordInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;password&quot;</span>);<br><br><span class="hljs-comment">//1.2 ç»‘å®šonbluräº‹ä»¶ å¤±å»ç„¦ç‚¹</span><br>passwordInput.<span class="hljs-property">onblur</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//1.3 è·å–ç”¨æˆ·è¾“å…¥çš„å¯†ç </span><br>    <span class="hljs-keyword">var</span> password = passwordInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();<br><br>    <span class="hljs-comment">//1.4 åˆ¤æ–­å¯†ç æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼šé•¿åº¦ 6~12</span><br>    <span class="hljs-keyword">if</span> (password.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">6</span> &amp;&amp; password.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">12</span>) &#123;<br>        <span class="hljs-comment">//ç¬¦åˆè§„åˆ™</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;password_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">//ä¸åˆç¬¦è§„åˆ™</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;password_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">//1. éªŒè¯æ‰‹æœºå·æ˜¯å¦ç¬¦åˆè§„åˆ™</span><br><span class="hljs-comment">//1.1 è·å–æ‰‹æœºå·çš„è¾“å…¥æ¡†</span><br><span class="hljs-keyword">var</span> telInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;tel&quot;</span>);<br><br><span class="hljs-comment">//1.2 ç»‘å®šonbluräº‹ä»¶ å¤±å»ç„¦ç‚¹</span><br>telInput.<span class="hljs-property">onblur</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//1.3 è·å–ç”¨æˆ·è¾“å…¥çš„æ‰‹æœºå·</span><br>    <span class="hljs-keyword">var</span> tel = telInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();<br><br>    <span class="hljs-comment">//1.4 åˆ¤æ–­æ‰‹æœºå·æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼šé•¿åº¦ 11</span><br>    <span class="hljs-keyword">if</span> (tel.<span class="hljs-property">length</span> == <span class="hljs-number">11</span>) &#123;<br>        <span class="hljs-comment">//ç¬¦åˆè§„åˆ™</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;tel_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">//ä¸åˆç¬¦è§„åˆ™</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;tel_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="8-3-éªŒè¯è¡¨å•"><a href="#8-3-éªŒè¯è¡¨å•" class="headerlink" title="8.3  éªŒè¯è¡¨å•"></a>8.3  éªŒè¯è¡¨å•</h3><p>å½“ç”¨æˆ·ç‚¹å‡» <code>æ³¨å†Œ</code> æŒ‰é’®æ—¶ï¼Œéœ€è¦åŒæ—¶å¯¹è¾“å…¥çš„ <code>ç”¨æˆ·å</code>ã€<code>å¯†ç </code>ã€<code>æ‰‹æœºå·</code> ï¼Œå¦‚æœéƒ½ç¬¦åˆè§„åˆ™ï¼Œåˆ™æäº¤è¡¨å•ï¼›å¦‚æœæœ‰ä¸€ä¸ªä¸ç¬¦åˆè§„åˆ™ï¼Œåˆ™ä¸å…è®¸æäº¤è¡¨å•ã€‚å®ç°è¯¥åŠŸèƒ½éœ€è¦è·å–è¡¨å•å…ƒç´ å¯¹è±¡ï¼Œå¹¶ç»‘å®š <code>onsubmit</code> äº‹ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//1. è·å–è¡¨å•å¯¹è±¡</span><br><span class="hljs-keyword">var</span> regForm = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;reg-form&quot;</span>);<br><br><span class="hljs-comment">//2. ç»‘å®šonsubmit äº‹ä»¶</span><br>regForm.<span class="hljs-property">onsubmit</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p><code>onsubmit</code> äº‹ä»¶ç»‘å®šçš„å‡½æ•°éœ€è¦å¯¹è¾“å…¥çš„ <code>ç”¨æˆ·å</code>ã€<code>å¯†ç </code>ã€<code>æ‰‹æœºå·</code> è¿›è¡Œæ ¡éªŒï¼Œè¿™äº›æ ¡éªŒæˆ‘ä»¬ä¹‹å‰éƒ½å·²ç»å®ç°è¿‡äº†ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜éœ€è¦å†æ ¡éªŒä¸€æ¬¡å—ï¼Ÿä¸éœ€è¦ï¼Œåªéœ€è¦å¯¹ä¹‹å‰æ ¡éªŒçš„ä»£ç è¿›è¡Œæ”¹é€ ï¼ŒæŠŠæ¯ä¸ªæ ¡éªŒçš„ä»£ç ä¸“é—¨æŠ½è±¡åˆ°æœ‰åå­—çš„å‡½æ•°ä¸­ï¼Œæ–¹ä¾¿è°ƒç”¨ï¼›å¹¶ä¸”æ¯ä¸ªå‡½æ•°éƒ½è¦è¿”å›ç»“æœæ¥å»å†³å®šæ˜¯æäº¤è¡¨å•è¿˜æ˜¯é˜»æ­¢è¡¨å•æäº¤ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//1. éªŒè¯ç”¨æˆ·åæ˜¯å¦ç¬¦åˆè§„åˆ™</span><br><span class="hljs-comment">//1.1 è·å–ç”¨æˆ·åçš„è¾“å…¥æ¡†</span><br><span class="hljs-keyword">var</span> usernameInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;username&quot;</span>);<br><br><span class="hljs-comment">//1.2 ç»‘å®šonbluräº‹ä»¶ å¤±å»ç„¦ç‚¹</span><br>usernameInput.<span class="hljs-property">onblur</span> = checkUsername;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">checkUsername</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//1.3 è·å–ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·å</span><br>    <span class="hljs-keyword">var</span> username = usernameInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();<br><br>    <span class="hljs-comment">//1.4 åˆ¤æ–­ç”¨æˆ·åæ˜¯å¦ç¬¦åˆè§„åˆ™ï¼šé•¿åº¦ 6~12</span><br>    <span class="hljs-keyword">var</span> flag = username.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">6</span> &amp;&amp; username.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">12</span>;<br>    <span class="hljs-keyword">if</span> (flag) &#123;<br>        <span class="hljs-comment">//ç¬¦åˆè§„åˆ™</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;username_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">//ä¸åˆç¬¦è§„åˆ™</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;username_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> flag;<br>&#125;<br><br><span class="hljs-comment">//1. éªŒè¯å¯†ç æ˜¯å¦ç¬¦åˆè§„åˆ™</span><br><span class="hljs-comment">//1.1 è·å–å¯†ç çš„è¾“å…¥æ¡†</span><br><span class="hljs-keyword">var</span> passwordInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;password&quot;</span>);<br><br><span class="hljs-comment">//1.2 ç»‘å®šonbluräº‹ä»¶ å¤±å»ç„¦ç‚¹</span><br>passwordInput.<span class="hljs-property">onblur</span> = checkPassword;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">checkPassword</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//1.3 è·å–ç”¨æˆ·è¾“å…¥çš„å¯†ç </span><br>    <span class="hljs-keyword">var</span> password = passwordInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();<br><br>    <span class="hljs-comment">//1.4 åˆ¤æ–­å¯†ç æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼šé•¿åº¦ 6~12</span><br>    <span class="hljs-keyword">var</span> flag = password.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">6</span> &amp;&amp; password.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">12</span>;<br>    <span class="hljs-keyword">if</span> (flag) &#123;<br>        <span class="hljs-comment">//ç¬¦åˆè§„åˆ™</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;password_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">//ä¸åˆç¬¦è§„åˆ™</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;password_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> flag;<br>&#125;<br><br><span class="hljs-comment">//1. éªŒè¯æ‰‹æœºå·æ˜¯å¦ç¬¦åˆè§„åˆ™</span><br><span class="hljs-comment">//1.1 è·å–æ‰‹æœºå·çš„è¾“å…¥æ¡†</span><br><span class="hljs-keyword">var</span> telInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;tel&quot;</span>);<br><br><span class="hljs-comment">//1.2 ç»‘å®šonbluräº‹ä»¶ å¤±å»ç„¦ç‚¹</span><br>telInput.<span class="hljs-property">onblur</span> = checkTel;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">checkTel</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//1.3 è·å–ç”¨æˆ·è¾“å…¥çš„æ‰‹æœºå·</span><br>    <span class="hljs-keyword">var</span> tel = telInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();<br><br>    <span class="hljs-comment">//1.4 åˆ¤æ–­æ‰‹æœºå·æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼šé•¿åº¦ 11</span><br>    <span class="hljs-keyword">var</span> flag = tel.<span class="hljs-property">length</span> == <span class="hljs-number">11</span>;<br>    <span class="hljs-keyword">if</span> (flag) &#123;<br>        <span class="hljs-comment">//ç¬¦åˆè§„åˆ™</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;tel_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-comment">//ä¸åˆç¬¦è§„åˆ™</span><br>        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;tel_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> flag;<br>&#125;<br></code></pre></td></tr></table></figure><p>è€Œ <code>onsubmit</code> ç»‘å®šçš„å‡½æ•°éœ€è¦è°ƒç”¨ <code>checkUsername()</code> å‡½æ•°ã€<code>checkPassword()</code> å‡½æ•°ã€<code>checkTel()</code> å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//1. è·å–è¡¨å•å¯¹è±¡</span><br><span class="hljs-keyword">var</span> regForm = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;reg-form&quot;</span>);<br><br><span class="hljs-comment">//2. ç»‘å®šonsubmit äº‹ä»¶</span><br>regForm.<span class="hljs-property">onsubmit</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">//æŒ¨ä¸ªåˆ¤æ–­æ¯ä¸€ä¸ªè¡¨å•é¡¹æ˜¯å¦éƒ½ç¬¦åˆè¦æ±‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªä¸åˆç¬¦ï¼Œåˆ™è¿”å›false</span><br><br>    <span class="hljs-keyword">var</span> flag = <span class="hljs-title function_">checkUsername</span>() &amp;&amp; <span class="hljs-title function_">checkPassword</span>() &amp;&amp; <span class="hljs-title function_">checkTel</span>();<br><br>    <span class="hljs-keyword">return</span> flag;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="9ï¼ŒRegExpå¯¹è±¡"><a href="#9ï¼ŒRegExpå¯¹è±¡" class="headerlink" title="9ï¼ŒRegExpå¯¹è±¡"></a>9ï¼ŒRegExpå¯¹è±¡</h2><p>RegExp æ˜¯æ­£åˆ™å¯¹è±¡ã€‚æ­£åˆ™å¯¹è±¡æ˜¯åˆ¤æ–­æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆè§„åˆ™ã€‚</p><p>å¦‚ä¸‹å›¾æ˜¯ç™¾åº¦è´´å§ä¸­çš„å¸–å­</p><p><img src="assets/image-20210816235112754.png" alt="image-20210816235112754" style="zoom:70%;" /></p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡çˆ¬è™«æŠ€æœ¯å»çˆ¬å–è¯¥é¡µé¢æºä»£ç ï¼Œç„¶åè·å–é¡µé¢ä¸­æ‰€æœ‰çš„é‚®ç®±ï¼ŒåæœŸæˆ‘ä»¬å¯ä»¥ç»™è¿™äº›é‚®ç®±åœ°å€å‘é€æ¨å¹¿çš„é‚®ä»¶ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•æ‰èƒ½çŸ¥é“é¡µé¢å†…å®¹ä¸­å“ªäº›äº‹é‚®ç®±åœ°å€å‘¢ï¼Ÿè¿™é‡Œå°±å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…é‚®ç®±ã€‚</p><p>åœ¨ js ä¸­å¯¹æ­£åˆ™è¡¨è¾¾å¼å°è£…çš„å¯¹è±¡å°±æ˜¯æ­£åˆ™å¯¹è±¡ã€‚</p><h3 id="9-1-æ­£åˆ™å¯¹è±¡ä½¿ç”¨"><a href="#9-1-æ­£åˆ™å¯¹è±¡ä½¿ç”¨" class="headerlink" title="9.1  æ­£åˆ™å¯¹è±¡ä½¿ç”¨"></a>9.1  æ­£åˆ™å¯¹è±¡ä½¿ç”¨</h3><h4 id="9-1-1-åˆ›å»ºå¯¹è±¡"><a href="#9-1-1-åˆ›å»ºå¯¹è±¡" class="headerlink" title="9.1.1  åˆ›å»ºå¯¹è±¡"></a>9.1.1  åˆ›å»ºå¯¹è±¡</h4><p>æ­£åˆ™å¯¹è±¡æœ‰ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼š</p><ul><li><p>ç›´æ¥é‡æ–¹å¼ï¼šæ³¨æ„ä¸è¦åŠ å¼•å·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/æ­£åˆ™è¡¨è¾¾å¼/</span>;<br></code></pre></td></tr></table></figure></li><li><p>åˆ›å»º RegExp å¯¹è±¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">var</span> reg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">&quot;æ­£åˆ™è¡¨è¾¾å¼&quot;</span>);<br></code></pre></td></tr></table></figure></li></ul><h4 id="9-1-2-å‡½æ•°"><a href="#9-1-2-å‡½æ•°" class="headerlink" title="9.1.2  å‡½æ•°"></a>9.1.2  å‡½æ•°</h4><p><code>test(str)</code> ï¼šåˆ¤æ–­æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼Œè¿”å› trueæˆ– false</p><h3 id="9-2-æ­£åˆ™è¡¨è¾¾å¼"><a href="#9-2-æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="9.2  æ­£åˆ™è¡¨è¾¾å¼"></a>9.2  æ­£åˆ™è¡¨è¾¾å¼</h3><p>ä»ä¸Šé¢åˆ›å»ºæ­£åˆ™å¯¹è±¡çš„æ ¼å¼ä¸­å¯ä»¥çœ‹å‡ºä¸ç®¡å“ªç§æ–¹å¼éƒ½éœ€è¦æ­£åˆ™è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼å‘¢ï¼Ÿ</p><p>æ­£åˆ™è¡¨è¾¾å¼å®šä¹‰äº†å­—ç¬¦ä¸²ç»„æˆçš„è§„åˆ™ã€‚ä¹Ÿå°±æ˜¯åˆ¤æ–­æŒ‡å®šçš„å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆæŒ‡å®šçš„è§„åˆ™ï¼Œå¦‚æœç¬¦åˆè¿”å›trueï¼Œå¦‚æœä¸ç¬¦åˆè¿”å›falseã€‚</p><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯å’Œè¯­è¨€æ— å…³çš„ã€‚å¾ˆå¤šè¯­è¨€éƒ½æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼ŒJavaè¯­è¨€ä¹Ÿæ”¯æŒï¼Œåªä¸è¿‡æ­£åˆ™è¡¨è¾¾å¼åœ¨ä¸åŒçš„è¯­è¨€ä¸­çš„ä½¿ç”¨æ–¹å¼ä¸åŒï¼Œjs ä¸­éœ€è¦ä½¿ç”¨æ­£åˆ™å¯¹è±¡æ¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><p>æ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨çš„è§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li><p>^ï¼šè¡¨ç¤ºå¼€å§‹</p></li><li><p>$ï¼šè¡¨ç¤ºç»“æŸ</p></li><li><p>[ ]ï¼šä»£è¡¨æŸä¸ªèŒƒå›´å†…çš„å•ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚ï¼š [0-9] å•ä¸ªæ•°å­—å­—ç¬¦</p></li><li><p>.ï¼šä»£è¡¨ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œé™¤äº†æ¢è¡Œå’Œè¡Œç»“æŸç¬¦</p></li><li><p>\wï¼šä»£è¡¨å•è¯å­—ç¬¦ï¼šå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿(<em>)ï¼Œç›¸å½“äº [A-Za-z0-9</em>]</p></li><li><p>\dï¼šä»£è¡¨æ•°å­—å­—ç¬¦ï¼š ç›¸å½“äº [0-9]</p></li></ul><p>é‡è¯ï¼š</p><ul><li><p>+ï¼šè‡³å°‘ä¸€ä¸ª</p></li><li><p>*ï¼šé›¶ä¸ªæˆ–å¤šä¸ª</p></li><li><p>ï¼Ÿï¼šé›¶ä¸ªæˆ–ä¸€ä¸ª</p></li><li><p>{x}ï¼šxä¸ª</p></li><li><p>{m,}ï¼šè‡³å°‘mä¸ª</p></li><li><p>{m,n}ï¼šè‡³å°‘mä¸ªï¼Œæœ€å¤šnä¸ª</p></li></ul><p><strong>ä»£ç æ¼”ç¤ºï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// è§„åˆ™ï¼šå•è¯å­—ç¬¦ï¼Œ6~12</span><br><span class="hljs-comment">//1,åˆ›å»ºæ­£åˆ™å¯¹è±¡ï¼Œå¯¹æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œå°è£…</span><br><span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/^\w&#123;6,12&#125;$/</span>;<br><br><span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;abcccc&quot;</span>;<br><span class="hljs-comment">//2,åˆ¤æ–­ str å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆ reg å°è£…çš„æ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™</span><br><span class="hljs-keyword">var</span> flag = reg.<span class="hljs-title function_">test</span>(str);<br><span class="hljs-title function_">alert</span>(flag);<br></code></pre></td></tr></table></figure><h3 id="9-3-æ”¹è¿›è¡¨å•æ ¡éªŒæ¡ˆä¾‹"><a href="#9-3-æ”¹è¿›è¡¨å•æ ¡éªŒæ¡ˆä¾‹" class="headerlink" title="9.3  æ”¹è¿›è¡¨å•æ ¡éªŒæ¡ˆä¾‹"></a>9.3  æ”¹è¿›è¡¨å•æ ¡éªŒæ¡ˆä¾‹</h3><p>è¡¨å•æ ¡éªŒæ¡ˆä¾‹ä¸­çš„è§„åˆ™æ˜¯æˆ‘ä»¬è¿›è¡Œä¸€ç³»åˆ—çš„åˆ¤æ–­æ¥å®ç°çš„ï¼Œç°åœ¨å­¦ä¹ äº†æ­£åˆ™å¯¹è±¡åï¼Œå°±å¯ä»¥ä½¿ç”¨æ­£åˆ™å¯¹è±¡æ¥æ”¹è¿›è¿™ä¸ªæ¡ˆä¾‹ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ¬¢è¿æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;../css/register.css&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-div&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;reg-content&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ¬¢è¿æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å·²æœ‰å¸å·ï¼Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;reg-form&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;get&quot;</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>ç”¨æˆ·å<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;inputs&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;username_err&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;err_msg&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: none&quot;</span>&gt;</span>ç”¨æˆ·åä¸å¤ªå—æ¬¢è¿<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>å¯†ç <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;inputs&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;password_err&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;err_msg&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: none&quot;</span>&gt;</span>å¯†ç æ ¼å¼æœ‰è¯¯<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>æ‰‹æœºå·<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;inputs&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;tel&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tel&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;tel_err&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;err_msg&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: none&quot;</span>&gt;</span>æ‰‹æœºå·æ ¼å¼æœ‰è¯¯<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;buttons&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;æ³¨ å†Œ&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;reg_btn&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">br</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;clear&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//1. éªŒè¯ç”¨æˆ·åæ˜¯å¦ç¬¦åˆè§„åˆ™</span></span><br><span class="language-javascript">    <span class="hljs-comment">//1.1 è·å–ç”¨æˆ·åçš„è¾“å…¥æ¡†</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> usernameInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;username&quot;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//1.2 ç»‘å®šonbluräº‹ä»¶ å¤±å»ç„¦ç‚¹</span></span><br><span class="language-javascript">    usernameInput.<span class="hljs-property">onblur</span> = checkUsername;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkUsername</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">//1.3 è·å–ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·å</span></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> username = usernameInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">//1.4 åˆ¤æ–­ç”¨æˆ·åæ˜¯å¦ç¬¦åˆè§„åˆ™ï¼šé•¿åº¦ 6~12,å•è¯å­—ç¬¦ç»„æˆ</span></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/^\w&#123;6,12&#125;$/</span>;</span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> flag = reg.<span class="hljs-title function_">test</span>(username);</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">//var flag = username.length &gt;= 6 &amp;&amp; username.length &lt;= 12;</span></span><br><span class="language-javascript">        <span class="hljs-keyword">if</span> (flag) &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">//ç¬¦åˆè§„åˆ™</span></span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;username_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>;</span><br><span class="language-javascript">        &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">//ä¸åˆç¬¦è§„åˆ™</span></span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;username_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;&#x27;</span>;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> flag;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//1. éªŒè¯å¯†ç æ˜¯å¦ç¬¦åˆè§„åˆ™</span></span><br><span class="language-javascript">    <span class="hljs-comment">//1.1 è·å–å¯†ç çš„è¾“å…¥æ¡†</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> passwordInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;password&quot;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//1.2 ç»‘å®šonbluräº‹ä»¶ å¤±å»ç„¦ç‚¹</span></span><br><span class="language-javascript">    passwordInput.<span class="hljs-property">onblur</span> = checkPassword;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkPassword</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">//1.3 è·å–ç”¨æˆ·è¾“å…¥çš„å¯†ç </span></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> password = passwordInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">//1.4 åˆ¤æ–­å¯†ç æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼šé•¿åº¦ 6~12</span></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/^\w&#123;6,12&#125;$/</span>;</span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> flag = reg.<span class="hljs-title function_">test</span>(password);</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">//var flag = password.length &gt;= 6 &amp;&amp; password.length &lt;= 12;</span></span><br><span class="language-javascript">        <span class="hljs-keyword">if</span> (flag) &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">//ç¬¦åˆè§„åˆ™</span></span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;password_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>;</span><br><span class="language-javascript">        &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">//ä¸åˆç¬¦è§„åˆ™</span></span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;password_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;&#x27;</span>;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> flag;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//1. éªŒè¯æ‰‹æœºå·æ˜¯å¦ç¬¦åˆè§„åˆ™</span></span><br><span class="language-javascript">    <span class="hljs-comment">//1.1 è·å–æ‰‹æœºå·çš„è¾“å…¥æ¡†</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> telInput = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;tel&quot;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//1.2 ç»‘å®šonbluräº‹ä»¶ å¤±å»ç„¦ç‚¹</span></span><br><span class="language-javascript">    telInput.<span class="hljs-property">onblur</span> = checkTel;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">checkTel</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">//1.3 è·å–ç”¨æˆ·è¾“å…¥çš„æ‰‹æœºå·</span></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> tel = telInput.<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">//1.4 åˆ¤æ–­æ‰‹æœºå·æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼šé•¿åº¦ 11ï¼Œæ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä½æ˜¯1</span></span><br><span class="language-javascript">        <span class="hljs-comment">//var flag = tel.length == 11;</span></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> reg = <span class="hljs-regexp">/^[1]\d&#123;10&#125;$/</span>;</span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> flag = reg.<span class="hljs-title function_">test</span>(tel);</span><br><span class="language-javascript">        <span class="hljs-keyword">if</span> (flag) &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">//ç¬¦åˆè§„åˆ™</span></span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;tel_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;none&#x27;</span>;</span><br><span class="language-javascript">        &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">//ä¸åˆç¬¦è§„åˆ™</span></span><br><span class="language-javascript">            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;tel_err&quot;</span>).<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">&#x27;&#x27;</span>;</span><br><span class="language-javascript">        </span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> flag;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//1. è·å–è¡¨å•å¯¹è±¡</span></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> regForm = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;reg-form&quot;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//2. ç»‘å®šonsubmit äº‹ä»¶</span></span><br><span class="language-javascript">    regForm.<span class="hljs-property">onsubmit</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">//æŒ¨ä¸ªåˆ¤æ–­æ¯ä¸€ä¸ªè¡¨å•é¡¹æ˜¯å¦éƒ½ç¬¦åˆè¦æ±‚ï¼Œå¦‚æœæœ‰ä¸€ä¸ªä¸åˆç¬¦ï¼Œåˆ™è¿”å›false</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">var</span> flag = <span class="hljs-title function_">checkUsername</span>() &amp;&amp; <span class="hljs-title function_">checkPassword</span>() &amp;&amp; <span class="hljs-title function_">checkTel</span>();</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> flag;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure></script></p></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ’å…¥æ’åº</title>
      <link href="/2022/09/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/"/>
      <url>/2022/09/09/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h1 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h1><p>Leecodeç¬¬147é¢˜ï¼š</p><blockquote><p>é¢˜ç›®æè¿°</p></blockquote><p>ç»™å®šå•ä¸ªé“¾è¡¨çš„å¤´ head ï¼Œä½¿ç”¨ æ’å…¥æ’åº å¯¹é“¾è¡¨è¿›è¡Œæ’åºï¼Œå¹¶è¿”å› æ’åºåé“¾è¡¨çš„å¤´ ã€‚</p><p>æ’å…¥æ’åº ç®—æ³•çš„æ­¥éª¤:</p><p>æ’å…¥æ’åºæ˜¯è¿­ä»£çš„ï¼Œæ¯æ¬¡åªç§»åŠ¨ä¸€ä¸ªå…ƒç´ ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å¯ä»¥å½¢æˆä¸€ä¸ªæœ‰åºçš„è¾“å‡ºåˆ—è¡¨ã€‚<br>æ¯æ¬¡è¿­ä»£ä¸­ï¼Œæ’å…¥æ’åºåªä»è¾“å…¥æ•°æ®ä¸­ç§»é™¤ä¸€ä¸ªå¾…æ’åºçš„å…ƒç´ ï¼Œæ‰¾åˆ°å®ƒåœ¨åºåˆ—ä¸­é€‚å½“çš„ä½ç½®ï¼Œå¹¶å°†å…¶æ’å…¥ã€‚<br>é‡å¤ç›´åˆ°æ‰€æœ‰è¾“å…¥æ•°æ®æ’å…¥å®Œä¸ºæ­¢ã€‚<br>ä¸‹é¢æ˜¯æ’å…¥æ’åºç®—æ³•çš„ä¸€ä¸ªå›¾å½¢ç¤ºä¾‹ã€‚éƒ¨åˆ†æ’åºçš„åˆ—è¡¨(é»‘è‰²)æœ€åˆåªåŒ…å«åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚æ¯æ¬¡è¿­ä»£æ—¶ï¼Œä»è¾“å…¥æ•°æ®ä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ (çº¢è‰²)ï¼Œå¹¶å°±åœ°æ’å…¥å·²æ’åºçš„åˆ—è¡¨ä¸­ã€‚</p><p>å¯¹é“¾è¡¨è¿›è¡Œæ’å…¥æ’åºã€‚<br>é“¾æ¥ï¼š<a href="https://leetcode.cn/problems/insertion-sort-list">https://leetcode.cn/problems/insertion-sort-list</a><br><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/ccc.png" alt=""></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥: head = [4,2,1,3]<br>è¾“å‡º: [1,2,3,4]<br></code></pre></td></tr></tbody></table></figure><p>é¢˜è§£ä»£ç ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">insertionSortList</span><span class="hljs-params">(ListNode head)</span> {<br>     <span class="hljs-type">ListNode</span> <span class="hljs-variable">cur</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>();<br>     cur = head.next;<br>     <span class="hljs-type">ListNode</span> <span class="hljs-variable">pre</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>();<br>     pre = head;<br>     <span class="hljs-keyword">while</span> (cur.next != <span class="hljs-literal">null</span>) {<br>         <span class="hljs-keyword">if</span> (cur.val &lt; pre.val) {<br>             swap(cur, pre);<br>         }<br>         <span class="hljs-keyword">if</span> (pre.next == cur) {<br>             pre = head;<br>             cur = cur.next;<br>         } <span class="hljs-keyword">else</span> {<br>             pre = pre.next;<br>         }<br>     }<br>     <span class="hljs-keyword">return</span> head;<br> }<br> <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swap</span><span class="hljs-params">(ListNode cur, ListNode pre)</span> {<br>     <span class="hljs-type">int</span> temp;<br>     temp = cur.val;<br>     cur.val = pre.val;<br>     pre.val = temp;<br> }<br></code></pre></td></tr></tbody></table></figure><p>é¢˜è§£æ€è·¯ï¼š</p><ol><li>é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªæŒ‡é’ˆä¸€ä¸ªæŒ‡å‘headçš„preå’Œä¸€ä¸ªæŒ‡å‘head.nextçš„cur</li><li>æˆ‘ä»¬æ¥åˆ¤æ–­ç»ˆæ­¢çš„æ¡ä»¶å°±æ˜¯å½“curæŒ‡é’ˆæŒ‡å‘çš„æœ€åä¸€ä¸ªå…ƒç´ æ¯”è¾ƒå®Œæˆåç»“æŸä¹Ÿå°±æ˜¯(cur!=null)</li><li>åœ¨å¾ªç¯é‡Œé¢æˆ‘ä»¬è¦çŸ¥é“å¦‚æœå½“å‰çš„cur.val&lt;pre.valè¿™æ—¶æˆ‘ä»¬éœ€è¦äº¤æ¢ä¸¤è€…çš„æ•°æ®ã€‚</li><li><p>äº¤æ¢å®Œæ¯•åæœ‰ä¸¤ç§æƒ…å†µï¼š</p><ul><li>å½“pre.next==curæ—¶è¯æ˜ä¸¤è€…åˆšåˆšäº¤æ¢è¿‡æ­¤æ—¶ç›´æ¥è®©curæŒ‡å‘ä¸‹ä¸€ä½è€Œpreå›åˆ°head</li><li>å½“pre.next!=curæ—¶è¿™æ—¶å€™curä¸èƒ½æŒ‡å‘ä¸‹ä¸€ä½è€Œæ˜¯è®©preæŒ‡å‘ä¸‹ä¸€ä½è¿›è¡Œå’Œcurçš„å€¼è¿›è¡Œæ¯”è¾ƒå®Œæˆå¾ªç¯ã€‚</li></ul></li><li><p>æœ€ç»ˆç›´æ¥è¿”å›headçš„æŒ‡é’ˆã€‚</p></li></ol><blockquote><p>Leecodeé¢˜è§£æ—¶é—´æ›´å¿«</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">insertionSortList</span><span class="hljs-params">(ListNode head)</span> {<br>        <span class="hljs-comment">//é¦–å…ˆåˆ¤æ–­å¤´èŠ‚ç‚¹æ˜¯å¦ä¸ºç©º</span><br>        <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">null</span>) {<br>            <span class="hljs-keyword">return</span> head;<br>        }<br>        <span class="hljs-comment">//å…¶æ¬¡åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„å¤´èŠ‚ç‚¹</span><br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">dummyHead</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(<span class="hljs-number">0</span>);<br>        <span class="hljs-comment">//è®©è¯¥è™šæ‹Ÿå¤´èŠ‚ç‚¹æŒ‡å‘head</span><br>        dummyHead.next = head;<br>        <span class="hljs-comment">//æ¥ç€åˆ›å»ºä¸¤ä¸ªæŒ‡ç€ä¸€ä¸ªæŒ‡å‘å¤´ä¸€ä¸ªæŒ‡å‘å¤´çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">lastSorted</span> <span class="hljs-operator">=</span> head, curr = head.next;<br>        <span class="hljs-comment">//åˆ¤æ–­å½“æœ€å¿«åˆ°è¾¾é“¾è¡¨å°¾éƒ¨çš„å…ƒç´ ä¸ä¸ºç©ºæ—¶è¿›è¡Œå¾ªç¯</span><br>        <span class="hljs-keyword">while</span> (curr != <span class="hljs-literal">null</span>) {<br>            <span class="hljs-comment">//å¦‚æœå‘ç°é åçš„èŠ‚ç‚¹å°äºå½“å‰é å‰çš„èŠ‚ç‚¹ç›´æ¥è®©é åçš„èŠ‚ç‚¹++</span><br>            <span class="hljs-keyword">if</span> (lastSorted.val &lt;= curr.val) {<br>                lastSorted = lastSorted.next;<br>            } <span class="hljs-keyword">else</span> {<br>                <span class="hljs-comment">//å¦åˆ™çš„è¯ å°±åˆ›å»ºä¸€ä¸ªprevèŠ‚ç‚¹æŒ‡å‘è™šæ‹ŸèŠ‚ç‚¹</span><br>                <span class="hljs-type">ListNode</span> <span class="hljs-variable">prev</span> <span class="hljs-operator">=</span> dummyHead;<br>                <span class="hljs-comment">//ç›´è‡³prevæŒ‡å‘=å½“å‰é å‰èŠ‚ç‚¹</span><br>                <span class="hljs-keyword">while</span> (prev.next.val &lt;= curr.val) {<br>                    prev = prev.next;<br>                }<br>                <span class="hljs-comment">//ç„¶åè¿›è¡ŒèŠ‚ç‚¹çš„äº¤æ¢</span><br>                lastSorted.next = curr.next;<br>                curr.next = prev.next;<br>                prev.next = curr;<br>            }<br>            curr = lastSorted.next;<br>        }<br>        <span class="hljs-keyword">return</span> dummyHead.next;<br>    }<br><br>}<br></code></pre></td></tr></tbody></table></figure><p><strong><a href="https://www.runoob.com/data-structures/insertion-sort.html">æ’å…¥æ’åº</a>ç®—æ³•çš„å›¾è§£å’Œä»£ç è¯¦è§£ï¼›</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InsertionSort</span> {<br>    <span class="hljs-comment">//æ ¸å¿ƒä»£ç ---å¼€å§‹</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sort</span><span class="hljs-params">(Comparable[] arr)</span>{<br><span class="hljs-comment">//é¦–å…ˆè·å–æ•°ç»„çš„é•¿åº¦</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr.length;<br>        <span class="hljs-comment">//å…¶æ¬¡å¯¹æ•°ç»„è¿›è¡Œéå†</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) {<br>            <span class="hljs-comment">// jä»ç¬¬1å¼€å§‹æ¯æ¬¡å’Œå‰é¢çš„ä½œæ¯”è¾ƒå¦‚æœæ¯”å‰é¢çš„æ•°æ®å°åˆ™ç›´æ¥äº¤æ¢æ•°æ®åä¹‹åˆ™é€€å‡ºå†…å¾ªç¯</span><br>          <span class="hljs-comment">//è¿™ä¸ªç›¸å½“äºjæ¯æ¬¡--ä»åé¢å¼€å§‹ç›´è‡³æ¯”åˆ°æ¯”ä»–å°çš„æ•°ä¸ºæ­¢ä¹Ÿæ˜¯æ’å…¥æ’åºçš„ç²¾é«“</span><br>            <span class="hljs-keyword">for</span>( <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i ; j &gt; <span class="hljs-number">0</span> ; j -- )<br>                <span class="hljs-keyword">if</span>( arr[j].compareTo( arr[j-<span class="hljs-number">1</span>] ) &lt; <span class="hljs-number">0</span> )<br>                    swap( arr, j , j-<span class="hljs-number">1</span> );<br>                <span class="hljs-keyword">else</span><br>                    <span class="hljs-keyword">break</span>;<br>        }<br>    }<br>    <span class="hljs-comment">//äº¤æ¢ä¸¤ä¸ªæ•°ç»„çš„å†…å®¹</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swap</span><span class="hljs-params">(Object[] arr, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> {<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> arr[i];<br>        arr[i] = arr[j];<br>        arr[j] = t;<br>    }<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ’å…¥æ’åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaWebå­¦ä¹ </title>
      <link href="/2022/09/06/JavaWeb%E5%AD%A6%E4%B9%A0/MyBatis/"/>
      <url>/2022/09/06/JavaWeb%E5%AD%A6%E4%B9%A0/MyBatis/</url>
      
        <content type="html"><![CDATA[<h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><h3 id="1-ä»€ä¹ˆä½¿MyBatis"><a href="#1-ä»€ä¹ˆä½¿MyBatis" class="headerlink" title="1.ä»€ä¹ˆä½¿MyBatis"></a>1.ä»€ä¹ˆä½¿MyBatis</h3><ul><li>MyBatisæ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œç”¨äºç®€åŒ–JDBCå¼€å‘</li><li>MyBatisæœ¬äº‹APacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatis</li></ul><h3 id="2-æŒä¹…å±‚"><a href="#2-æŒä¹…å±‚" class="headerlink" title="2.æŒä¹…å±‚"></a>2.æŒä¹…å±‚</h3><ul><li>è´Ÿè´£å°†æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“çš„é‚£ä¸€å±‚ä»£ç </li><li>JavaEEä¸‰å±‚æ¶æ„ï¼šè¡¨ç°å±‚ã€ä¸šåŠ¡å±‚ã€æŒä¹…å±‚</li></ul><h3 id="3-æ¡†æ¶"><a href="#3-æ¡†æ¶" class="headerlink" title="3.æ¡†æ¶"></a>3.æ¡†æ¶</h3><ul><li>æ¡†æ¶å°±æ˜¯åœ¨ä¸€ä¸ªåŠæˆå“çš„è½¯ä»¶ä¸Šï¼Œæ˜¯ä¸€å¥—å¯é‡ç”¨çš„ï¼Œé€šç”¨çš„ã€è½¯ä»¶åŸºç¡€ä»£ç æ¨¡å‹</li><li>åœ¨æ¡†æ¶çš„åŸºç¡€ä¹‹ä¸Šæ„å»ºè½¯ä»¶ç¼–å†™æ›´åŠ é«˜æ•ˆã€è§„èŒƒã€é€šç”¨ã€å¯æ‰©å±•</li></ul><h3 id="4-JDBCçš„ç¼ºç‚¹"><a href="#4-JDBCçš„ç¼ºç‚¹" class="headerlink" title="4.JDBCçš„ç¼ºç‚¹"></a>4.JDBCçš„ç¼ºç‚¹</h3><ul><li>ç¡¬ç¼–ç  <ul><li>æ³¨å†Œé©±åŠ¨ï¼Œè·å–è¿æ¥</li><li>SQLè¯­å¥</li></ul></li><li>æ“ä½œç¹ç<ul><li>æ‰‹åŠ¨è®¾ç½®å‚æ•°</li><li>æ‰‹åŠ¨å°è£…ç»“æœé›†</li></ul></li></ul><p><strong>MyBatiså…é™¤äº†å‡ ä¹æ‰€æœ‰çš„JDBCä»£ç ä»¥åŠè®¾ç½®å‚æ•°å’Œè·å–ç»“æœé›†çš„å·¥ä½œ</strong></p><h1 id="MyBatiså¿«é€Ÿå…¥é—¨"><a href="#MyBatiså¿«é€Ÿå…¥é—¨" class="headerlink" title="MyBatiså¿«é€Ÿå…¥é—¨"></a>MyBatiså¿«é€Ÿå…¥é—¨</h1><blockquote><p>æŸ¥è¯¢userè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®</p></blockquote><ol><li>åˆ›å»ºuserè¡¨ï¼Œæ·»åŠ æ•°æ®(åœ¨æ•°æ®åº“ä¸­åˆ›å»º)</li><li>åˆ›å»ºæ¨¡å—ï¼Œå¯¼å…¥åæ ‡</li><li>ç¼–å†™MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶â€”-&gt;æ›¿æ¢è¿æ¥ä¿¡æ¯è§£å†³ç¡¬ç¼–ç é—®é¢˜</li><li>ç¼–å†™SQLæ˜ å°„æ–‡ä»¶â€”â€”&gt;ç»Ÿä¸€ç®¡ç†sqlè¯­å¥ï¼Œè§£å†³ç¡¬ç¼–ç é—®é¢˜</li><li>ç¼–ç <ol><li>å®šä¹‰PoJoç±»</li><li>åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶è·å–SqlSessionFactoryå¯¹è±¡</li></ol></li></ol><blockquote><p>æ“ä½œæ­¥éª¤</p></blockquote><p>1.æ–°å»ºæ–‡ä»¶åˆ›å»ºMavené¡¹ç›®æ¨¡å—</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/bu1.png" alt=""></p><p>2.åœ¨åˆ›å»ºå¥½çš„pom.xmlæ–‡ä»¶ä¸­å¯¼å…¥åæ ‡ï¼šåœ¨MyBatiså®˜ç½‘ä¸Šæœ‰å…¥é—¨æ“ä½œ</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--mybatisçš„ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>x.x.x<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>   <span class="hljs-comment">&lt;!--è‡ªå·±é€‰æ‹©ç‰ˆæœ¬å·--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>æ’å…¥åˆ°ä¸‹å›¾äºŒ</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/bu2.png" alt=""></p><p>3ã€å¯¼å…¥æ•°æ®åº“çš„é©±åŠ¨mysqlå’Œå•å…ƒæµ‹è¯•çš„é©±åŠ¨junit</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.28<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.13.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>4.å¯¼å…¥logback-coreä¾èµ–å¯ä»¥ç›´æ¥å¤åˆ¶å°±è¡Œ</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- æ·»åŠ slf4jæ—¥å¿—api --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.7.20<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æ·»åŠ logback-classicä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-classic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- æ·»åŠ logback-coreä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.2.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>5.åœ¨æ·»åŠ å®Œæˆåéœ€è¦é…ç½®æ–‡ä»¶åœ¨src/main/resourcesæ–‡ä»¶ç›®å½•ä¸‹å»ºç«‹<code>lockback.xml</code>æ–‡ä»¶æ·»åŠ ä»¥ä¸‹ä»£ç </p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">        CONSOLE ï¼šè¡¨ç¤ºå½“å‰çš„æ—¥å¿—ä¿¡æ¯æ˜¯å¯ä»¥è¾“å‡ºåˆ°æ§åˆ¶å°çš„ã€‚</span><br><span class="hljs-comment">    --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">appender</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Console"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">encoder</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>[%level] %blue(%d{HH:mm:ss.SSS}) %cyan([%thread]) %boldGreen(%logger{15}) - %msg %n<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">encoder</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">appender</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">logger</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"com.itheima"</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"DEBUG"</span> <span class="hljs-attr">additivity</span>=<span class="hljs-string">"false"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"Console"</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">logger</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">      level:ç”¨æ¥è®¾ç½®æ‰“å°çº§åˆ«ï¼Œå¤§å°å†™æ— å…³ï¼šTRACE, DEBUG, INFO, WARN, ERROR, ALL å’Œ OFF</span><br><span class="hljs-comment">     ï¼Œ é»˜è®¤debug</span><br><span class="hljs-comment">      &lt;root&gt;å¯ä»¥åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ª&lt;appender-ref&gt;å…ƒç´ ï¼Œæ ‡è¯†è¿™ä¸ªè¾“å‡ºä½ç½®å°†ä¼šè¢«æœ¬æ—¥å¿—çº§åˆ«æ§åˆ¶ã€‚</span><br><span class="hljs-comment">      --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">root</span> <span class="hljs-attr">level</span>=<span class="hljs-string">"DEBUG"</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">appender-ref</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"Console"</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">root</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br><br></code></pre></td></tr></tbody></table></figure><p>6.ç¼–å†™MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ˆæ›¿æ¢æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼‰åœ¨å®˜ç½‘ä¸Šçœ‹</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/bu5.png" alt=""></p><p>7.æ‰¾åˆ°åè¿”å›ideaç»§ç»­åœ¨src/main/resourcesæ–‡ä»¶ä¸‹å»ºç«‹<code>mybatis-config.xml</code>æ–‡ä»¶ã€‚å¹¶å°†ä¸‹åˆ—ä»£ç copyåˆ°è¯¥æ–‡ä»¶ä¸‹</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span></span><br><span class="hljs-meta">  <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="hljs-meta">  <span class="hljs-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>     <span class="hljs-comment">&lt;!--é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯å¯ä»¥é…ç½®å¤šä¸ªenvironmentsé€šè¿‡default</span><br><span class="hljs-comment">å±æ€§æ¥åˆ‡æ¢ä¸åŒçš„environments--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">"development"</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"development"</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"JDBC"</span>/&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"POOLED"</span>&gt;</span><br>          <span class="hljs-comment">&lt;!--æ•°æ®åº“è¿æ¥ä¿¡æ¯--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driver"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${driver}"</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${url}"</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${username}"</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"${password}"</span>/&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>      <span class="hljs-comment">&lt;!--åŠ è½½sqlæ˜ å°„æ–‡ä»¶--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">"org/mybatis/example/BlogMapper.xml"</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>8.æ‹·è´å®Œæˆåéœ€è¦å…¶ä¸­ä¿®æ”¹ç›¸å…³æ•°æ®åº“è¿æ¥ä¿¡æ¯:</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å°†${driver}æ”¹æˆjdbcçš„é©±åŠ¨è·¯å¾„--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driver"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.mysql.jdbc.Driver"</span>/&gt;</span> <br><span class="hljs-comment">&lt;!--å°†${url}æ”¹æˆjdbcçš„é©±åŠ¨è·¯å¾„--&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"jdbc:mysql://mybatis?useSSL=false"</span>/&gt;</span><br><span class="hljs-comment">&lt;!--ä¿®æ”¹è‡ªå·±æ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç --&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"root"</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"123456"</span>/&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>9.åŠ è½½sqlçš„æ˜ å°„æ–‡ä»¶ç›´æ¥åœ¨å®˜ç½‘ä¸Šæ‰¾ç›¸å…³æ˜ å°„å®åˆ—ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span></span><br><span class="hljs-meta">  <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="hljs-meta">  <span class="hljs-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span><br><span class="hljs-comment">&lt;!--namespaceè¿™ä¸ªéœ€è¦ä¿®æ”¹ä»–æ˜¯ä¸ªåç§°ç©ºé—´,ä»¥ä¸‹ä»£ç éœ€è¦ä¿®æ”¹--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"org.mybatis.example.BlogMapper"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectBlog"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"Blog"</span>&gt;</span><br>    select * from Blog where id = #{id}<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>10.æ‰¾åˆ°ååœ¨src/main/resourcesæ–‡ä»¶ä¸‹å»ºç«‹<code>UserMapper.xml</code>æ–‡ä»¶ è¿™ä¸ªåå­—å¯ä»¥ä¿®æ”¹ç”¨æˆ·ä¸ºUserMapperï¼Œæ±½è½¦ä¸ºCarMapperç­‰ç­‰ã€‚å®Œæˆåå°†9æ­¥éª¤çš„ä»£ç å¤åˆ¶åˆ°è¯¥æ–‡ä»¶ä¸‹ã€‚</p><p>11.ç„¶ååœ¨src/main/javaä¸‹åˆ›å»ºç›¸å…³çš„Userç±»</p><p>12.ä¿®æ”¹ç¬¬9æ­¥çš„ç›¸å…³ä¿¡æ¯</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"test"</span>&gt;</span>  <span class="hljs-comment">&lt;!--ä¿®æ”¹åç§°ç©ºé—´ä¸ºtest--&gt;</span><br>  <span class="hljs-comment">&lt;!--æŸ¥è¯¢æ•°æ®åº“æ‰€æœ‰æ”¹ä¸ºselectAll,åé¢çš„å‚æ•°ä¸ºUserç±»çš„è·¯å¾„ç›´æ¥å†™Userå°±å¯ä»¥--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectAll"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span>  <br>       <span class="hljs-comment">&lt;!--ä¿®æ”¹ç›¸å…³çš„sqlè¯­å¥æ“ä½œ,tb_userä¸ºè‡ªå·±å®šä¹‰çš„è¡¨çš„åå­—--&gt;</span><br>    select * from tb_user;  <br>  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>13.æ¥ç€ä¿®æ”¹ç¬¬ä¸ƒæ­¥é‡Œé¢çš„sqlæ˜ å°„æ–‡ä»¶ä¸º<code>UserMapper.xml</code></p><p><code>&lt;mapper resource="UserMapper.xml"/&gt;</code></p><h2 id="å¼€å§‹ç¼–ç "><a href="#å¼€å§‹ç¼–ç " class="headerlink" title="å¼€å§‹ç¼–ç "></a>å¼€å§‹ç¼–ç </h2><p>1.æ‰“å¼€Userç±»</p><p>åˆ›å»ºç›¸å…³æ•°æ®åº“å†…çš„ç›¸å…³å±æ€§ä¿¡æ¯å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.pojo;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String PASSWORD;<br>    <span class="hljs-keyword">private</span> String gender;<br>    <span class="hljs-keyword">private</span> String addr;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">"User{"</span> +<br>                <span class="hljs-string">"id="</span> + id +<br>                <span class="hljs-string">", username='"</span> + username + <span class="hljs-string">'\''</span> +<br>                <span class="hljs-string">", PASSWORD='"</span> + PASSWORD + <span class="hljs-string">'\''</span> +<br>                <span class="hljs-string">", gender='"</span> + gender + <span class="hljs-string">'\''</span> +<br>                <span class="hljs-string">", addr='"</span> + addr + <span class="hljs-string">'\''</span> +<br>                <span class="hljs-string">'}'</span>;<br>    }<br><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> id;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Integer id)</span> {<br>        <span class="hljs-built_in">this</span>.id = id;<br>    }<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUsername</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> username;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUsername</span><span class="hljs-params">(String username)</span> {<br>        <span class="hljs-built_in">this</span>.username = username;<br>    }<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getPASSWORD</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> PASSWORD;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPASSWORD</span><span class="hljs-params">(String PASSWORD)</span> {<br>        <span class="hljs-built_in">this</span>.PASSWORD = PASSWORD;<br>    }<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getGender</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> gender;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setGender</span><span class="hljs-params">(String gender)</span> {<br>        <span class="hljs-built_in">this</span>.gender = gender;<br>    }<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getAddr</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> addr;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAddr</span><span class="hljs-params">(String addr)</span> {<br>        <span class="hljs-built_in">this</span>.addr = addr;<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure><p>2.æ¥ç€å†™MyBatisçš„æµ‹è¯•ç±»ï¼šç›´æ¥åœ¨src/main/javaç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶<code>MyBatisDemo</code>ç„¶åè¿›å…¥å®˜ç½‘æ‹·è´ä»¥ä¸‹ä»£ç å¹¶ä¿®æ”¹</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">String</span> <span class="hljs-variable">resource</span> <span class="hljs-operator">=</span> <span class="hljs-string">"org/mybatis/example/mybatis-config.xml"</span>;<br><span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(resource);<br><span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(inputStream);<br></code></pre></td></tr></tbody></table></figure><p>ä¿®æ”¹resource=â€mybatis-config.xmlâ€ç¬¬äºŒå¥æœ‰å¼‚å¸¸ç›´æ¥try-catchæŠ›å‡ºå°±è¡Œå¯ä»¥ï¼Œæ¥ç€éœ€è¦è·å–SqlSessionå¯¹è±¡ï¼Œç”¨æ¥æ‰§è¡Œsqlæœ€åæ‰§è¡Œsqlè¯­å¥</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>     <span class="hljs-comment">//åŠ è½½MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶è·å–SqlSessionFactory</span><br>     <span class="hljs-type">String</span> <span class="hljs-variable">resource</span> <span class="hljs-operator">=</span> <span class="hljs-string">"mybatis-config.xml"</span>;<br>     <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>     <span class="hljs-keyword">try</span> {<br>         inputStream = Resources.getResourceAsStream(resource);<br>     } <span class="hljs-keyword">catch</span> (IOException e) {<br>         e.printStackTrace();<br>     }<br>     <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span>         <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(inputStream);<br>     <span class="hljs-comment">//è·å–SqlSessionå¯¹è±¡ ç”¨å®ƒæ¥æ‰§è¡Œsql</span><br>     <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();<br>     <span class="hljs-comment">//æ‰§è¡Œsqlè¯­å¥</span><br>    <span class="hljs-comment">//è°ƒç”¨selectListæ‹¬å·çš„å†…å®¹ä¸ºä¸Šé¢è‡ªå·±å®šä¹‰çš„åç§°ä½œç”¨åŸŸtestå’Œæ ‡è¯†(id)selectAll</span><br>     List&lt;User&gt; users = sqlSession.selectList(<span class="hljs-string">"test.selectAll"</span>);<br>    <span class="hljs-comment">//æ‰“å°ç»“æœ</span><br>     System.out.println(users);<br>     sqlSession.close();<br> }<br><br></code></pre></td></tr></tbody></table></figure><h1 id="Mapperä»£ç†å¼€å‘"><a href="#Mapperä»£ç†å¼€å‘" class="headerlink" title="Mapperä»£ç†å¼€å‘"></a>Mapperä»£ç†å¼€å‘</h1><h3 id="ä»£ç†æ­¥éª¤è¯¦è§£"><a href="#ä»£ç†æ­¥éª¤è¯¦è§£" class="headerlink" title="ä»£ç†æ­¥éª¤è¯¦è§£"></a>ä»£ç†æ­¥éª¤è¯¦è§£</h3><ul><li>å®šä¹‰ä¸SQLæ˜ å°„æ–‡ä»¶åŒåçš„Mapperæ¥å£ï¼Œå¹¶ä¸”å°†Mapperæ¥å£å’ŒSQLæ˜ å°„æ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹ã€‚</li></ul><p>éœ€è¦åœ¨mainä¸‹å»ºç«‹ä¸€ä¸ªmapperç±»ï¼Œè€Œä¸”åœ¨resourceæ–‡ä»¶ä¸‹å»ºç«‹ç›¸åº”çš„mapperè·¯å¾„ æ–‡ä»¶åç§°å±‚æ¬¡ä¸ç”¨<code>.</code>ç”¨<code>\</code>æ¥è¡¨ç¤ºå¹¶ä¸”å»ºç«‹å®Œæˆåå°†å¯¹åº”çš„UserMapper.xmlæ”¾åœ¨è¯¥è·¯å¾„ä¸‹å³å¯ã€‚ç¼–è¯‘åIDEAè‡ªåŠ¨å°†æ¥å£å’ŒSQLæ˜ å°„æ–‡ä»¶æ”¾åœ¨ä¸€èµ·.</p><ul><li>è®¾ç½®SQLæ˜ å°„æ–‡ä»¶çš„namespaceå±æ€§ä¸ºmapperæ¥å£çš„å…¨é™å®šå<span class="github-emoji"><span>ğŸ“‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4c2.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>UserMapper.xmlä¿®æ”¹ä»£ç </li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.itheima.mapper.UserMapper"</span>&gt;</span> <br>  <span class="hljs-comment">&lt;!---ä¿®æ”¹textä¸ºcom.itheima.mapper.UserMapper--&gt;</span><br><span class="hljs-comment">&lt;!--å°±æ˜¯ä½ çš„UserMapperæ”¾åœ¨çš„åœ°æ–¹è·¯å¾„--&gt;</span><br></code></pre></td></tr></tbody></table></figure><ul><li>åœ¨Mapperæ¥å£ä¸­å®šä¹‰æ–¹æ³•ï¼Œæ–¹æ³•åå°±æ˜¯SQLæ˜ å°„æ–‡ä»¶ä¸­çš„sqlè¯­å¥çš„idï¼Œå¹¶ä¿æŒå‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹çš„ä¸€è‡´</li></ul><p>åœ¨æ¥å£ç±»ï¼šUserMapperä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> {<br>    List&lt;User&gt; <span class="hljs-title function_">selectAll</span><span class="hljs-params">()</span>;   <br>    <span class="hljs-comment">//å› ä¸ºåœ¨é…ç½®æ–‡ä»¶UserMapper.xmlä¸­æœ‰</span><br>    <span class="hljs-comment">// &lt;select id="selectAll" resultType="com.itheima.pojo.User"&gt;</span><br>    <span class="hljs-comment">//ä¸Šé¢ä»£ç æœ‰æ ‡è¯†idå’Œè¿”å›å€¼ç±»å‹ä¸ºUseræ‰€ä»¥è¿™é‡Œå®šä¹‰çš„æ¥å£ä¸ºListå®¹å™¨æ¥ç››æ”¾å¤šä¸ªUserå¯¹è±¡</span><br>}<br></code></pre></td></tr></tbody></table></figure><p>å®Œæˆåéœ€è¦ä¿®æ”¹mybatis-config.xmlæ–‡ä»¶ä¸­çš„é…ç½®è·¯å¾„ï¼Œå› ä¸ºåˆšåˆšæˆ‘ä»¬æŠŠUserMapper.xmlæ–‡ä»¶æ”¾åœ¨äº†æ–°çš„ç›®å½•ä¸‹æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬éœ€è¦æ”¹å˜è·¯å¾„ï¼šå¤åˆ¶æ–‡ä»¶çš„è·¯å¾„ä¿®æ”¹ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>       <span class="hljs-comment">&lt;!--åŠ è½½sqlæ˜ å°„æ–‡ä»¶ æ›´æ”¹åä¿®æ”¹resourceè·¯å¾„--&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">"com/itheima/mapper/UserMapper.xml"</span>/&gt;</span>  <br>   <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><ul><li>ç¼–ç <ol><li>é€šè¿‡SqlSessionçš„getMapperæ–¹æ³•è·å–Mapperæ¥å£çš„ä»£ç†å¯¹è±¡</li><li>è°ƒç”¨å¯¹åº”çš„æ–¹æ³•å®Œæˆsqlçš„æ‰§è¡Œ</li></ol></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>     <span class="hljs-comment">//åŠ è½½MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶è·å–SqlSessionFactory</span><br>     <span class="hljs-type">String</span> <span class="hljs-variable">resource</span> <span class="hljs-operator">=</span> <span class="hljs-string">"mybatis-config.xml"</span>;<br>     <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>     <span class="hljs-keyword">try</span> {<br>         inputStream = Resources.getResourceAsStream(resource);<br>     } <span class="hljs-keyword">catch</span> (IOException e) {<br>         e.printStackTrace();<br>     }<br>     <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(inputStream);<br>     <span class="hljs-comment">//è·å–SqlSessionå¯¹è±¡ ç”¨å®ƒæ¥æ‰§è¡Œsql</span><br>     <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();<br>     <span class="hljs-comment">//æ‰§è¡Œsqlè¯­å¥(åœ¨Mapperä»£ç†ä¸­ä¸‹é¢è¿™å¥ä»£ç æ³¨é‡Šæ‰)</span><br>    <span class="hljs-comment">// List&lt;User&gt; users = sqlSession.selectList("test.selectAll");</span><br>     <span class="hljs-comment">//é‡ç‚¹ï¼ï¼ï¼è·å–å¯¹åº”userMapperä»£ç†å¯¹è±¡ </span><br>     <span class="hljs-type">UserMapper</span> <span class="hljs-variable">userMapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(UserMapper.class);<br>     List&lt;User&gt;users= userMapper.selectAll();<br>    <span class="hljs-comment">//é‡ç‚¹ä¸¤å¥ä»£ç </span><br>     System.out.println(users);<br>     sqlSession.close();<br> }<br></code></pre></td></tr></tbody></table></figure><p><strong>è¿è¡Œæµç¨‹åˆ†æï¼š</strong></p><ol><li>åˆ©ç”¨<code>SqlSession sqlSession = sqlSessionFactory.openSession();</code>è·å–sqlSession</li><li>é€šè¿‡sqlSessionå¯ä»¥è·å–UserMapperä»£ç†å¯¹è±¡å°±ç›´æ¥æ‰¾åˆ°UserMapper.javaæ¥å£</li><li>æ¥ç€åœ¨å½“å‰ç›®å½•ä¸‹æœ‰ä¸€ä¸ªåŒåçš„æ˜ å°„æ–‡ä»¶å°±å¯ä»¥æ‰¾åˆ°UserMapper.xmlçš„sqlè¯­å¥</li><li>é€šè¿‡æœ€åä¸€å¥<code>List&lt;User&gt;users= userMapper.selectAll();</code>è°ƒç”¨UserMapper.javaæ¥å£çš„æ–¹æ³•ç„¶è€Œè¯¥å‡½æ•°<code>List&lt;User&gt; selectAll();</code>åç§°ä¸ºUserMapper.xmlæ–‡ä»¶ä¸­sqlçš„idåå­—ï¼š<code>&lt;select id="selectAll" resultType="com.itheima.pojo.User"&gt;</code></li><li>æ‰€ä»¥æ¥ç€å°±æ‰§è¡Œidå¯¹åº”çš„sqlè¯­å¥ï¼Œæ‰§è¡Œå®Œæ¯•åå› ä¸ºæœ‰è¿”å›ç±»å‹Useræ‰€ä»¥å°±è¿”å›ç»™UserMapperæ¥å£ï¼Œåœ¨è°ƒç”¨æ–‡ä»¶ä¸­æˆ‘ä»¬ç”¨ä¸€ä¸ªList<user>æ¥æ¥æ”¶è¯¥è¿”å›å€¼å¹¶æ‰“å°è¾“å‡ºã€‚</user></li></ol><blockquote><p>ç»†èŠ‚</p></blockquote><p>â€‹    å¦‚æœMapperæ¥å£åç§°å’ŒSQLæ˜ å°„æ–‡ä»¶åç§°ç›¸åŒï¼Œå¹¶ä¸”åœ¨åŒä¸€ç›®å½•ä¸‹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åŒ…æ‰«æçš„æ–¹å¼ç®€åŒ–SQLæ˜ å°„çš„åŠ è½½</p><p><strong>ç›¸å…³æ“ä½œï¼š</strong>åœ¨mybatis-config.xmlæ–‡ä»¶ä¸­ä¿®æ”¹sqlæ˜ å°„æ–‡ä»¶ä»£ç ï¼š</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>       <span class="hljs-comment">&lt;!--åŠ è½½sqlæ˜ å°„æ–‡ä»¶,åœ¨è¿™é‡Œå¯ä»¥ç›´æ¥å¼•å…¥åŒä¸€ä¸ªåŒ…ä¸‹é¢çš„æ–‡ä»¶--&gt;</span><br>      <span class="hljs-comment">&lt;!-- &lt;mapper resource="com/itheima/mapper/UserMapper.xml"/&gt; --&gt;</span><br>    <span class="hljs-comment">&lt;!--Mapperä»£ç†æ–¹å¼ ä¸€è¡Œä»£ç å…¨éƒ¨æå®š--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"com.itheima.mapper"</span>/&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><p>æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;typeAliases&gt;  &lt;!--èµ·åˆ«å--&gt;<br>       &lt;<span class="hljs-keyword">package</span> name=<span class="hljs-string">"com.itheima.pojo"</span>/&gt;<br>   &lt;/typeAliases&gt;<br></code></pre></td></tr></tbody></table></figure><h3 id="é…ç½®æ–‡ä»¶å®Œæˆå¢åˆ æ”¹æŸ¥"><a href="#é…ç½®æ–‡ä»¶å®Œæˆå¢åˆ æ”¹æŸ¥" class="headerlink" title="é…ç½®æ–‡ä»¶å®Œæˆå¢åˆ æ”¹æŸ¥"></a>é…ç½®æ–‡ä»¶å®Œæˆå¢åˆ æ”¹æŸ¥</h3><h4 id="1-æŸ¥è¯¢æ‰€æœ‰æ•°æ®"><a href="#1-æŸ¥è¯¢æ‰€æœ‰æ•°æ®" class="headerlink" title="1.æŸ¥è¯¢æ‰€æœ‰æ•°æ®"></a>1.æŸ¥è¯¢æ‰€æœ‰æ•°æ®</h4><p>1.ç¼–å†™æ¥å£æ–¹æ³•ï¼šMapperæ¥å£</p><ul><li>å‚æ•°æ— </li><li>ç»“æœ:List<brand></brand></li></ul><p>2.ç¼–å†™SQLè¯­å¥,SQLæ˜ å°„æ–‡ä»¶</p><p>3.æ‰§è¡Œæ–¹æ³•ï¼Œæµ‹è¯•</p><blockquote><p>ç¼–å†™æ–¹æ³•</p></blockquote><p>å‚æ•°å ä½ç¬¦ 1.#{} ä¼šå°†å…¶æ›¿æ¢ä¸º? ä¸ºäº†é˜²æ­¢SQLæ³¨å…¥ </p><p>   2.${}   æ‹¼SQL ä¼šå­˜åœ¨SQLæ³¨å…¥é—®é¢˜</p><p>3.ä½¿ç”¨æ—¶æœº <strong>*åœ¨å‚æ•°ä¼ é€’çš„æ—¶å€™ï¼›#{}  ä¸ä½¿ç”¨${}</strong></p><p>å¯ä»¥æŒ‡å®šå‚æ•°ç±»å‹:</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectById"</span>  <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"brandResultMap"</span>&gt;</span> <br>    <span class="hljs-comment">&lt;!--è¿˜æœ‰ä¸€ä¸ªparameterType="å‚æ•°ç±»å‹" ä¸€èˆ¬ä¸å†™--&gt;</span><br>    select *from tb_brand where id=#{id};<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>å¯¹åº”çš„ç‰¹æ®Šå­—ç¬¦</p></blockquote><p>è§£å†³å°äºå·ä¸èƒ½ç”¨ï¼š</p><ol><li><p>è½¬ä¹‰å­—ç¬¦ &lt;(&amp;lt)</p></li><li><p>è¾“å…¥CDATAåŒº</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDBC</title>
      <link href="/2022/09/05/JavaWeb%E5%AD%A6%E4%B9%A0/JDBC/"/>
      <url>/2022/09/05/JavaWeb%E5%AD%A6%E4%B9%A0/JDBC/</url>
      
        <content type="html"><![CDATA[<h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><blockquote><p>è¯¦è§£DriveManager</p></blockquote><p>é©±åŠ¨ç®¡ç†ç±»(å·¥å…·ç±»)ï¼š</p><p>1.æ³¨å†Œé©±åŠ¨  â€”â€”å¯ä»¥çœç•¥æ³¨å†Œé©±åŠ¨è¿™ä¸ªæ­¥éª¤ <code>Class.forName("com.mysql.jdbc.Driver")</code></p><p>2.è·å–æ•°æ®åº“è¿æ¥ â€”â€”url:è¿æ¥è·¯å¾„ â€”â€”userï¼šç”¨æˆ·åâ€”password:å¯†ç </p><p>è¯­æ³•ï¼š<code>jdbc:mysql://127.0.0.1:3306/db1</code>  è§£é‡Š {//ipåœ°å€ï¼ˆåŸŸåï¼‰:ç«¯å£å·/æ•°æ®åº“åç§°?å‚æ•°é”®å€¼å¯¹1&amp;å‚æ•°é”®å€¼å¯¹2&amp;â€¦}</p><p>è·å–è¿æ¥ï¼›å¦‚æœè¿æ¥çš„æ˜¯æœ¬æœºçš„mysqlå¹¶ä¸”ç«¯å£å·æ˜¯é»˜è®¤çš„3306 å¯ä»¥ç®€åŒ–ä¹¦å†™<code>jdbc:mysql://db1</code></p><p>å¯ä»¥é…ç½®useSSL=false å¯ä»¥å»é™¤è­¦å‘Š</p><blockquote><p>Connectionè¯¦è§£</p></blockquote><p><strong>1.è·å–æ‰§è¡Œçš„SQLå¯¹è±¡</strong></p><ul><li>æ™®é€šæ‰§è¡ŒSQLå¯¹è±¡ï¼š<code>Statement creatStatement()</code></li><li>é¢„ç¼–è¯‘SQLçš„æ‰§è¡ŒSQLå¯¹è±¡ï¼šé˜²æ­¢SQLæ³¨å…¥<code>PreparedStatement prepareStatement(sql)</code></li><li>æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹çš„å¯¹è±¡ <code>CallableStatement prepareCall(sql)</code></li></ul><p><strong>2.æ‰§è¡Œäº‹åŠ¡</strong></p><ul><li>MySQLäº‹åŠ¡ç®¡ç†</li></ul><p>å¼€å¯äº‹åŠ¡ï¼š<code>BEGIN;/START TRANSACTION</code></p><p>æäº¤äº‹åŠ¡ï¼š<code>COMMIT</code></p><p>å›æ»šäº‹åŠ¡ï¼š<code>ROLLBACK</code></p><p>mysqlé»˜è®¤è‡ªåŠ¨æäº¤äº‹åŠ¡</p><ul><li>JDBC äº‹åŠ¡ç®¡ç†ï¼šConnectionæ¥å£ä¸­å®šä¹‰äº†3ä¸ªå¯¹åº”çš„æ–¹æ³•</li></ul><p>å¼€å¯äº‹åŠ¡ï¼š<code>setAutoCommit(boolean autoCommit):true ä¸ºè‡ªåŠ¨æäº¤äº‹åŠ¡ falseä¸ºæ‰‹åŠ¨æäº¤äº‹åŠ¡ï¼Œå³å¼€å¯äº‹åŠ¡</code></p><p>æäº¤äº‹åŠ¡ï¼š<code>COMMIT()</code></p><p>å›æ»šäº‹åŠ¡ï¼š<code>ROLLBACK()</code></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.itheima.jdbc;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.DriverManager;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.sql.Statement;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JDBCDemo3</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception {<br>        <span class="hljs-comment">//æ³¨å†Œé©±åŠ¨</span><br>        <span class="hljs-comment">// Class.forName("com.mysql.jdbc.Driver");</span><br>        <span class="hljs-comment">//è·å–è¿æ¥</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"jdbc:mysql://127.0.0.1:3306/db1?useSSL=false"</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">"root"</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">"123456"</span>;<br>        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, username, password);<br>        <span class="hljs-comment">//å®šä¹‰SQLè¯­å¥</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql1</span> <span class="hljs-operator">=</span> <span class="hljs-string">"update account set money =3000 where id =1"</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">sql2</span> <span class="hljs-operator">=</span> <span class="hljs-string">"update account set money =3000 where id =2"</span>;<br>        <span class="hljs-comment">//è·å–æ‰§è¡Œsqlçš„å¯¹è±¡Statement</span><br>        <span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> conn.createStatement();<br><br><br>        <span class="hljs-keyword">try</span> {<br>            <span class="hljs-comment">//**å¼€å¯äº‹åŠ¡</span><br>            conn.setAutoCommit(<span class="hljs-literal">false</span>); <span class="hljs-comment">//å¦‚æœæ³¨é‡Šæ‰åˆ™ä¼šä¿®æ”¹æ•°æ®</span><br>            <span class="hljs-comment">//æ‰§è¡Œsql</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">count1</span> <span class="hljs-operator">=</span> stmt.executeUpdate(sql1);  <span class="hljs-comment">//å—å½±å“çš„è¡Œæ•°</span><br>            <span class="hljs-comment">//å¤„ç†ç»“æœ</span><br>            System.out.println(count1);<br>           <span class="hljs-comment">// int i = 3 / 0;  //æ‰“å¼€æ‰‹åŠ¨åˆ¶é€ ä¸€ä¸ªå¼‚å¸¸</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">count2</span> <span class="hljs-operator">=</span> stmt.executeUpdate(sql2);  <span class="hljs-comment">//å—å½±å“çš„è¡Œæ•°</span><br>            <span class="hljs-comment">//å¤„ç†ç»“æœ</span><br>            System.out.println(count2);<br>            <span class="hljs-comment">//æäº¤äº‹åŠ¡</span><br>            conn.commit();<br>        } <span class="hljs-keyword">catch</span> (Exception throwables) {<br>            <span class="hljs-comment">//å›æ»šäº‹åŠ¡</span><br>            conn.rollback();<br>            throwables.printStackTrace();<br>        }<br><br><br>        <span class="hljs-comment">//é‡Šæ”¾èµ„æº</span><br>        stmt.close();<br>        conn.close();<br>        ;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><blockquote><p>Statementè¯¦è§£</p></blockquote><p>1.æ‰§è¡ŒSQLè¯­å¥</p><p><code>int executeUpdate(sql)</code>æ‰§è¡ŒDMLã€DDLè¯­å¥</p><p>â†’è¿”å›å€¼(1)DMLè¯­å¥å½±å“çš„è¡Œæ•°  ï¼ˆ2ï¼‰DDLè¯­å¥æ‰§è¡Œåï¼Œæ‰§è¡ŒæˆåŠŸä¹Ÿå¯èƒ½è¿”å›0</p><p><code>ResultSet executeQuery(sql)</code>æ‰§è¡ŒDQLè¯­å¥ â†’è¿”å›å€¼ï¼šResultSetç»“æœé›†å¯¹è±¡</p><blockquote><p>ResultSetè¯¦è§£</p></blockquote><ul><li>ResultSet(ç»“æœé›†å¯¹è±¡)ä½œç”¨ï¼š</li></ul><p>â€‹        1.å°è£…äº†DQLæŸ¥è¯¢è¯­å¥çš„ç»“æœ</p><p><code>ResultSet stmt.executrQuery(sql)</code> æ‰§è¡ŒDQLè¯­å¥ï¼Œè¿”å›ResultSetå¯¹è±¡</p><ul><li>è·å–æŸ¥è¯¢ç»“æœ</li></ul><p><code>boolean next()</code>(1)å°†å…‰æ ‡ä»å½“å‰ä½ç½®å‘å‰ç§»åŠ¨ä¸€è¡Œ(2)åˆ¤æ–­å½“å‰è¡Œæ˜¯å¦æœ‰æ•ˆè¡Œï¼›</p><p>â†’è¿”å›å€¼:</p><ul><li>true:æœ‰æ•ˆè¡Œï¼Œå½“å‰è¡Œæœ‰æ•°æ®</li><li>falseï¼šæ— æ•ˆè¡Œï¼Œå½“å‰è¡Œæ²¡æœ‰æ•°æ®</li></ul><p>xxx getXxx(å‚æ•°) è·å–æ•°æ®</p><p>â†’xxxï¼šæ•°æ®ç±»å‹ï¼›å¦‚int getlnt(å‚æ•°)ï¼›String getString(å‚æ•°)</p><p>â†’å‚æ•°ï¼š</p><ul><li>int :åˆ—çš„ç¼–å·ï¼Œä»ä¸€å¼€å§‹</li><li>String ï¼šåˆ—çš„åç§°</li></ul><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li>æ¸¸æ ‡å‘ä¸‹ç§»åŠ¨ä¸€è¡Œï¼Œå¹¶åˆ¤æ–­æ”¹è¡Œæ˜¯å¦æœ‰æ•°æ®:next()</li><li>è·å–æ•°æ®ï¼šgetXxx(å‚æ•°)</li></ol><blockquote><p>PreparedStatement</p></blockquote><p>ä½œç”¨ï¼š</p><ol><li>é¢„ç¼–è¯‘SQLè¯­å¥å¹¶æ‰§è¡Œ,é¢„é˜²SQLæ³¨å…¥é—®é¢˜</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">textResultSet</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>    <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"jdbc:mysql://127.0.0.1:3306/db1?useSSL=false"</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">"root"</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">"123456"</span>;<br>    <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, username, password);<br>    <span class="hljs-comment">//æ¥æ”¶ç”¨æˆ·åå’Œå¯†ç </span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"zhangsan"</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">pwd</span> <span class="hljs-operator">=</span> <span class="hljs-string">"123"</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"select * from tb_user where username='"</span> + name + <span class="hljs-string">"' and password='"</span> + pwd + <span class="hljs-string">"'"</span>;<br>    <span class="hljs-comment">//è·å–stmtå¯¹è±¡</span><br>    <span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> conn.createStatement();<br>    <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> stmt.executeQuery(sql);<br>    <span class="hljs-comment">//åˆ¤æ–­ç™»å½•æ˜¯å¦æˆåŠŸ</span><br>    <span class="hljs-keyword">if</span> (rs.next()) {<br>        System.out.println(<span class="hljs-string">"ç™»å½•æˆåŠŸï¼ï¼"</span>);<br>    } <span class="hljs-keyword">else</span> {<br>        System.out.println(<span class="hljs-string">"ç™»å½•å¤±è´¥~~"</span>);<br>    }<br>    rs.close();<br>    stmt.close();<br>    conn.close();<br><br>}<br></code></pre></td></tr></tbody></table></figure><ul><li>SQLæ³¨å…¥<ul><li>SQLæ³¨å…¥æ˜¯é€šè¿‡æ“ä½œè¾“å…¥æ¥ä¿®æ”¹äº‹å…ˆå®šä¹‰å¥½çš„SQLè¯­å¥ï¼Œç”¨ä»¥è¾¾åˆ°æ‰§è¡Œä»£ç å¯¹æœåŠ¡å™¨è¿›è¡Œæ”»å‡»çš„æ–¹æ³•ã€‚</li></ul></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * SQLæ³¨å…¥</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">textLogin_Inject</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>    <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"jdbc:mysql://127.0.0.1:3306/db1?useSSL=false"</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">"root"</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">"123456"</span>;<br>    <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, username, password);<br>    <span class="hljs-comment">//æ¥æ”¶ç”¨æˆ·åå’Œå¯†ç </span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"sadasdasd"</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">pwd</span> <span class="hljs-operator">=</span> <span class="hljs-string">"' or '1' = '1"</span>;  <span class="hljs-comment">//æ³¨å…¥è¯­æ³•</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"select * from tb_user where username='"</span> + name + <span class="hljs-string">"' and password='"</span> + pwd + <span class="hljs-string">"'"</span>;<br>    <span class="hljs-comment">//è·å–stmtå¯¹è±¡</span><br>    System.out.println(sql);<br>    <span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> conn.createStatement();<br>    <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> stmt.executeQuery(sql);<br>    <span class="hljs-comment">//åˆ¤æ–­ç™»å½•æ˜¯å¦æˆåŠŸ</span><br>    <span class="hljs-keyword">if</span> (rs.next()) {<br>        System.out.println(<span class="hljs-string">"ç™»å½•æˆåŠŸï¼ï¼"</span>);<br>    } <span class="hljs-keyword">else</span> {<br>        System.out.println(<span class="hljs-string">"ç™»å½•å¤±è´¥~~"</span>);<br>    }<br>    rs.close();<br>    stmt.close();<br>    conn.close();<br><br>}<br></code></pre></td></tr></tbody></table></figure><ul><li>é˜²æ­¢SQLæ³¨å…¥çš„æ–¹æ³•</li></ul><ol><li>è·å–<code>PreparedStatement</code>å¯¹è±¡</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//SQLè¯­å¥ä¸­çš„å‚æ•°å€¼ï¼Œä½¿ç”¨?å ä½ç¬¦æ¥ä»£æ›¿</span><br><br>String sql=<span class="hljs-string">"select *from user where username =? and password = ?"</span>;<br><br><span class="hljs-comment">//é€šè¿‡Connectionå¯¹è±¡è·å–ï¼Œå¹¶ä¸”ä¼ å…¥å¯¹åº”çš„SQLè¯­å¥</span><br>PrepareStatedment pstmt=conn.prepareStatement(sql);<br></code></pre></td></tr></tbody></table></figure><p>2.è®¾ç½®å‚æ•°å€¼</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">PreparedStatement å¯¹è±¡ ï¼šsetXxx(å‚æ•°<span class="hljs-number">1</span>ï¼Œå‚æ•°äºŒ):ç»™ï¼Ÿèµ‹å€¼<br>    â†’Xxxï¼šæ•°æ®ç±»å‹; å¦‚setInt(å‚æ•°ä¸€ï¼Œå‚æ•°äºŒ)<br>    â†’å‚æ•°ï¼š<br>        å‚æ•°<span class="hljs-number">1</span>ï¼š?çš„ä½ç½®ç¼–å·ä»ä¸€å¼€å§‹<br>        å‚æ•°<span class="hljs-number">2</span>: ?çš„å€¼<br></code></pre></td></tr></tbody></table></figure><p>3.æ‰§è¡ŒSQL</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">executeUpdate(); /executeQuery(); ï¼šä¸éœ€è¦åœ¨ä¼ é€’sql<br></code></pre></td></tr></tbody></table></figure><h3 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">textPreparedStatement</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {<br>    <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"jdbc:mysql://127.0.0.1:3306/db1?useSSL=false"</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> <span class="hljs-string">"root"</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">"123456"</span>;<br>    <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, username, password);<br>    <span class="hljs-comment">//æ¥æ”¶ç”¨æˆ·åå’Œå¯†ç </span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"zhangsan"</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">pwd</span> <span class="hljs-operator">=</span> <span class="hljs-string">"' or '1' = '1"</span>;  <span class="hljs-comment">//æ­¤æ—¶æ³¨å…¥æ— æ•ˆ</span><br>    <span class="hljs-comment">//å®šä¹‰SQL</span><br>    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"select*from tb_user where username=? and password=?"</span>;<br>    <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">pstmt</span> <span class="hljs-operator">=</span> conn.prepareStatement(sql);<br>    <span class="hljs-comment">//è®¾ç½®ï¼Ÿçš„å€¼</span><br>    pstmt.setString(<span class="hljs-number">1</span>, name);<br>    pstmt.setString(<span class="hljs-number">2</span>, pwd);<br>    <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> pstmt.executeQuery();<br><br><br>    <span class="hljs-comment">//åˆ¤æ–­ç™»å½•æ˜¯å¦æˆåŠŸ</span><br>    <span class="hljs-keyword">if</span> (rs.next()) {<br>        System.out.println(<span class="hljs-string">"ç™»å½•æˆåŠŸï¼ï¼"</span>);<br>    } <span class="hljs-keyword">else</span> {<br>        System.out.println(<span class="hljs-string">"ç™»å½•å¤±è´¥~~"</span>);<br>    }<br>    rs.close();<br>    pstmt.close();<br>    conn.close();<br>}<br></code></pre></td></tr></tbody></table></figure><h2 id="æ•°æ®åº“è¿æ¥æ± "><a href="#æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="æ•°æ®åº“è¿æ¥æ± "></a>æ•°æ®åº“è¿æ¥æ± </h2><blockquote><p>æ•°æ®åº“è¿æ¥æ± ç®€ä»‹</p></blockquote><ul><li>æ•°æ®åº“è¿æ¥æ± æ˜¯ä¸ªå®¹å™¨ï¼Œè´Ÿè´£åˆ†é…ç®¡ç†æ•°æ®åº“è¿æ¥</li><li>å®ƒå…è®¸åº”ç”¨ç¨‹åºé‡å¤ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“è¿æ¥ï¼Œè€Œä¸æ˜¯å†é‡æ–°å»ºç«‹ä¸€ä¸ª</li><li>é‡Šæ”¾ç©ºé—²çš„å®è·µè¶…è¿‡æœ€å¤§ç©ºé—²æ—¶é—´çš„æ•°æ®åº“è¿æ¥æ¥é¿å…å› ä¸ºæ²¡æœ‰é‡Šæ”¾æ•°æ®åº“è¿æ¥è€Œå¼•èµ·çš„æ•°æ®åº“é—æ¼</li><li>å¥½å¤„</li></ul><ol><li>èµ„æºé‡ç”¨</li><li>æå‡æ•°æ®åº“çš„å“åº”é€Ÿåº¦</li><li>é¿å…æ•°æ®åº“è¿æ¥é—æ¼</li></ol><blockquote><p>æ•°æ®åº“è¿æ¥æ± çš„å®ç°</p></blockquote><ul><li><p>æ ‡å‡†æ¥å£ï¼šDataSource</p><ul><li>å®˜æ–¹ï¼ˆSUNï¼‰æä¾›çš„æ•°æ®åº“è¿æ¥æ± æ ‡å‡†æ¥å£ï¼Œç”±ç¬¬ä¸‰æ–¹ç»„ç»‡å®ç°æ­¤æ¥å£</li><li>åŠŸèƒ½ï¼šè·å–è¿æ¥<code>Connection getConnection()</code></li></ul></li><li><p>å¸¸è§çš„æ•°æ®åº“è¿æ¥æ± </p><ul><li>DBCP</li><li>C3P0</li><li>Druid</li></ul></li><li><p>Druid(å¾·é²ä¼Š)</p><ul><li>Druidè¿æ¥æ± æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„æ•°æ®åº“è¿æ¥æ± é¡¹ç›®</li><li>åŠŸèƒ½å¼ºå¤§ï¼Œæ€§èƒ½ä¼˜ç§€ï¼Œæ˜¯javaè¯­è¨€æœ€å¥½çš„æ•°æ®åº“è¿æ¥æ± ä¹‹ä¸€</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AVLå’Œçº¢é»‘æ ‘</title>
      <link href="/2022/09/02/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/AVL%E6%A0%91/"/>
      <url>/2022/09/02/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/AVL%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="AVLæ ‘"><a href="#AVLæ ‘" class="headerlink" title="AVLæ ‘"></a>AVLæ ‘</h1><blockquote><p>AVLæ ‘çš„æ¦‚å¿µ</p></blockquote><p>åŸºäºäºŒå‰æœç´¢æ ‘ä¸Šçš„ä¼˜åŒ–ï¼Œå®ƒè§£å†³äº†å¦‚æœæ•°æ®æœ‰åºæˆ–è€…æ¥è¿‘æœ‰åºçš„äºŒå‰æœç´¢æ ‘å°†é€€åŒ–ä¸ºå•é“¾è¡¨æŸ¥æ‰¾å…ƒç´ ç›¸å½“äºåœ¨é¡ºåºè¡¨ä¸­æœç´¢å…ƒç´ ï¼Œæ•ˆç‡ä½ä¸‹ã€‚æ•…AVLæ ‘å½“å‘äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥æ–°çš„èŠ‚ç‚¹ï¼Œèƒ½å¤Ÿä¿æŒæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼Œä»è€Œå‡å°‘å¹³å‡æœç´¢çš„é•¿åº¦ï¼Œ</p><blockquote><p>ç‰¹ç‚¹</p></blockquote><p>â‘ å¶å­èŠ‚ç‚¹çš„æœ€å¤§é«˜åº¦ç›¸å·®ä¸ä¼šè¶…è¿‡1 å¹³è¡¡äºŒå‰æ ‘</p><p>â‘¡å¯¹äºä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå·¦å­æ ‘å’Œå³å­æ ‘çš„é«˜åº¦å·®ä¸èƒ½è¶…è¿‡1</p><p>â‘¢å¹³æ¨ªäºŒå‰æ ‘çš„é«˜åº¦å’ŒèŠ‚ç‚¹çš„æ•°é‡ä¹‹é—´çš„å…³ç³»ä¹Ÿæ˜¯O(logn)çš„</p><p>â‘£AVLå¸¸å¸¸ç”¨äºæŸ¥è¯¢è¾ƒå¤šçš„æƒ…å†µä¸‹</p><p>â‘¤ä»–çš„å·¦å³å­æ ‘å‡ä¸ºAVLæ ‘</p><p>â‘¥å¦‚æœä¸€æ£µäºŒå‰æ ‘æ˜¯é«˜åº¦å¹³è¡¡çš„ï¼Œä»–å°±æ˜¯AVLæ ‘ï¼Œå¦‚æœä»–æœ‰nä¸ªèŠ‚ç‚¹ï¼Œå…¶é«˜åº¦å¯ä¿æŒåœ¨<script type="math/tex">O(log_{2}N)</script>æœç´¢çš„æ—¶é—´å¤æ‚åº¦ä¸º<script type="math/tex">O(log_{2}N)</script>  </p><p>â‘¦AVLæ ‘ä¸­çš„ä»»æ„èŠ‚ç‚¹çš„BFåªå¯èƒ½æ˜¯-1 0 1ï¼›</p><p>å¦‚ä¸‹å›¾ä¸ºä¸€é¢—AVLæ ‘ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/ssss.png" alt=""></p><h2 id="AVLçš„å®ç°"><a href="#AVLçš„å®ç°" class="headerlink" title="AVLçš„å®ç°"></a>AVLçš„å®ç°</h2><blockquote><p>å®ç°AVLæ ‘çš„é€»è¾‘</p></blockquote><ol><li>é¦–å…ˆåœ¨<code>AVLTree</code>ä¸­å®šä¹‰ä¸€ä¸ªèŠ‚ç‚¹å†…éƒ¨ç±»Node;</li><li>æ„é€ å‡½æ•°åˆå§‹åŒ–AVLæ ‘</li><li>åŸºäºäºŒåˆ†æœç´¢æ ‘çš„å®ç°AVLæ ‘</li></ol><blockquote><p>å®ç°NodeèŠ‚ç‚¹çš„ä»£ç </p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> {<br>     <span class="hljs-keyword">public</span> K key;<br>     <span class="hljs-keyword">public</span> V value;<br>     <span class="hljs-keyword">public</span> Node left, right;<br>     <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> height;<br><br>     <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(K key, V value)</span> {<br>         <span class="hljs-built_in">this</span>.key = key;<br>         <span class="hljs-built_in">this</span>.value = value;<br>         left = <span class="hljs-literal">null</span>;<br>         right = <span class="hljs-literal">null</span>;<br>         height = <span class="hljs-number">1</span>;<br>     }<br> }<br></code></pre></td></tr></tbody></table></figure><p>å®šä¹‰ä¸€ä¸ªèŠ‚ç‚¹ä¸»è¦å­˜å‚¨ä»–çš„keyå’Œvalue ï¼ˆä¸€èˆ¬åªç”¨value å°±å¯ä»¥è¿™é‡Œå¤ç”¨äº†BSTMapçš„ç»“æ„ç®—æ³•ï¼‰</p><blockquote><p>å¯¹<code>AVLTree</code> æ ‘çš„åˆå§‹åŒ–</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ç§æœ‰æˆå‘˜å˜é‡rootå’Œsizeå¹¶åœ¨æ„é€ å‡½æ•°é‡Œé¢åˆå§‹åŒ–æ“ä½œ </span><br><span class="hljs-keyword">private</span> Node root;    <br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> size;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AVLTree</span><span class="hljs-params">()</span> {<br>        root = <span class="hljs-literal">null</span>;<br>        size = <span class="hljs-number">0</span>;<br>    }<br></code></pre></td></tr></tbody></table></figure><blockquote><p>åˆ¤æ–­è¯¥æ ‘æ˜¯å¦ä¸ºä¸€ä¸ªäºŒåˆ†æœç´¢æ ‘ï¼ˆè¿™ä¸ªå¯ä»¥çœç•¥ï¼‰</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦ä¸ºäºŒåˆ†æœç´¢æ ‘ </span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isBST</span><span class="hljs-params">()</span> {<br>        ArrayList&lt;K&gt; keys = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>       <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦æœ‰åº</span><br>    inOrder(root, keys);<br>    <span class="hljs-comment">//ç”±ä¸Šä¸€æ­¥å¯ä»¥çš„å‡ºæ•´æ£µæ ‘çš„é¡ºåºå‡åœ¨keyså®¹å™¨ä¸­å­˜æ”¾</span><br>    <span class="hljs-comment">//éå†å®¹å™¨è®©åè€…æ ¹å‰è€…æ¯”è¾ƒå¦‚æœåè€…å°äºå‰è€…åˆ™è¯æ˜ä¸æ˜¯ä¸ªäºŒåˆ†æœç´¢æ ‘</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; keys.size(); i++) {<br>            <span class="hljs-keyword">if</span> (keys.get(i - <span class="hljs-number">1</span>).compareTo(keys.get(i)) &gt; <span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    }<br><span class="hljs-comment">//ä¸­åºéå†æ³•ï¼šå¦‚æœæœ‰åºåˆ™ç»“æœä¹Ÿæœ‰åº</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">inOrder</span><span class="hljs-params">(Node node, ArrayList&lt;K&gt; keys)</span> {<br>        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) {<br>            <span class="hljs-keyword">return</span>;<br>        }<br>        inOrder(node.left, keys);<br>        <span class="hljs-comment">//å°†èŠ‚ç‚¹æ•°æ®æ‹¿å‡ºå‘ArrayListä¸­æ·»åŠ keyså€¼ä¾¿äºisBSTåˆ¤æ–­</span><br>        keys.add(node.key);<br>        inOrder(node.right, keys);<br>    }<br></code></pre></td></tr></tbody></table></figure><blockquote><p>ä¸€äº›è¾…åŠ©å‡½æ•°<code>contains() --set()---get()</code></p></blockquote><p><code>minimun()</code>å¾—åˆ°å¯¹åº”å­æ ‘ä¸‹çš„æœ€å°çš„èŠ‚ç‚¹å€¼å±äºä¸€ä¸ªé€’å½’å‡½æ•°</p><p><code>contains(K key)</code>è¯¥å‡½æ•°ä¸»è¦è¯æ˜æ‰€æŸ¥çš„èŠ‚ç‚¹æ˜¯å¦åœ¨è¯¥æ ‘å†…</p><p><code>get(K key)</code>å¾—åˆ°é”®å€¼ä¸ºkeyå¾—valueå€¼ï¼ˆå¯¹äºAVLæ ‘æ¥è¯´å¯ä»¥ä¸éœ€è¦ï¼‰</p><p><code>set(K key ,V newValue)</code>å°†é”®å€¼ä¸ºkeyå¾—åœ°æ–¹çš„å€¼ä¿®æ”¹ä¸ºvalue å¦‚æœå­˜åœ¨è¿›è¡Œè¦†ç›–</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ‹¿åˆ°ä¼ å…¥èŠ‚ç‚¹çš„æœ€å°çš„å€¼   </span><br><span class="hljs-keyword">private</span> Node <span class="hljs-title function_">minimum</span><span class="hljs-params">(Node node)</span> {<br>       <span class="hljs-comment">//é€’å½’ç»ˆæ­¢çš„æ¡ä»¶æœ€å·¦è¾¹ä¸ºnull</span><br>       <span class="hljs-keyword">if</span> (node.left == <span class="hljs-literal">null</span>) {<br>           <span class="hljs-keyword">return</span> node;<br>       }<br>       <span class="hljs-comment">//è¿›å…¥é€’å½’å°†å·¦å­æ ‘çš„å·¦å­æ ‘ä¼ å…¥</span><br>       <span class="hljs-keyword">return</span> minimum(node.left);<br>   }<br><br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(K key)</span> {<br>       <span class="hljs-keyword">return</span> getNode(root, key) != <span class="hljs-literal">null</span>;<br>   }<br><br><br>   <span class="hljs-keyword">public</span> V <span class="hljs-title function_">get</span><span class="hljs-params">(K key)</span> {<br>       <span class="hljs-type">Node</span> <span class="hljs-variable">node</span> <span class="hljs-operator">=</span> getNode(root, key);<br>       <span class="hljs-keyword">return</span> node == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : node.value;<br>   }<br><br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">set</span><span class="hljs-params">(K key, V newValue)</span> {<br>       <span class="hljs-type">Node</span> <span class="hljs-variable">node</span> <span class="hljs-operator">=</span> getNode(root, key);<br>       <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) {<br>           <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(key + <span class="hljs-string">"doesn't exist!"</span>);<br>       }<br>       node.value = newValue;<br>   }<br><span class="hljs-comment">//å¾—åˆ°æ•°çš„å…ƒç´ ä¸ªæ•°</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getSize</span><span class="hljs-params">()</span>{<br>       <span class="hljs-keyword">return</span> size;<br>   }<br>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span>{<br>       <span class="hljs-keyword">return</span> size==<span class="hljs-number">0</span>;<br>   }<br><span class="hljs-comment">//å¾—åˆ°ä»¥nodeä¸ºèŠ‚ç‚¹æ ‘çš„é«˜åº¦</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getHeight</span><span class="hljs-params">(Node node)</span>{<br>       <span class="hljs-keyword">if</span>(node==<span class="hljs-literal">null</span>){<br>           <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>       }<br>       <span class="hljs-keyword">return</span> node.height;<br>   }<br></code></pre></td></tr></tbody></table></figure><blockquote><p>è¾…åŠ©å‡½æ•°åˆ¤æ–­è¯¥æ ‘æ˜¯å¦ä¸ºä¸€é¢—äºŒå‰å¹³è¡¡æ ‘</p></blockquote><p><strong>è¿™é‡Œå¯ä»¥åˆ›å»ºä¸€ä¸ª<code>isBalanced()</code>å‡½æ•°é€šè¿‡é€’å½’è°ƒç”¨æœ€ç»ˆçš„å‡ºç»“æœ</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isBalanced</span><span class="hljs-params">()</span>{<br>    <span class="hljs-keyword">return</span> isBalanced(root);<br>}<br> <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isBalanced</span><span class="hljs-params">(Node node)</span> {<br>     <span class="hljs-comment">//é€’å½’ç»ˆæ­¢çš„æ¡ä»¶åªæœ‰å½“èŠ‚ç‚¹ä¸ºç©ºçš„æ—¶å€™è¿”å›true</span><br>        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>     <span class="hljs-comment">//å¾—åˆ°å½“å‰èŠ‚ç‚¹çš„å¹³è¡¡å› æ•°ï¼›</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">balanceFactor</span> <span class="hljs-operator">=</span> getBalanceFactor(node);<br>     <span class="hljs-comment">//å› ä¸ºå¹³è¡¡å› æ•°çš„ç»å¯¹å€¼ä¸å¯èƒ½å¤§äºä¸€ï¼Œä¸€æ—¦å¤§äºä¸€ç›´æ¥è¿”å›false</span><br>        <span class="hljs-keyword">if</span> (Math.abs(balanceFactor) &gt; <span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>     <span class="hljs-comment">//æœ€åé€’å½’è°ƒç”¨å·¦å­æ ‘å’Œå³å­æ ‘åˆ†åˆ«è¿›è¡Œåˆ¤æ–­ç›´è‡³å…¨éƒ¨éå†å®Œæˆ</span><br>        <span class="hljs-keyword">return</span> isBalanced(node.left) &amp;&amp; isBalanced(node.right);<br>    }<br><span class="hljs-comment">//ç§æœ‰å‡½æ•°èƒ½å¤Ÿçš„åˆ°å½“å‰çš„å¹³è¡¡å› æ•°è¿™é‡Œè§„å®šå·¦å­æ ‘çš„é«˜åº¦-å³å­æ ‘çš„é«˜åº¦</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getBalanceFactor</span><span class="hljs-params">(Node node)</span> {<br>        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) {<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        }<br>        <span class="hljs-keyword">return</span> getHeight(node.left) - getHeight(node.right);<br>    }<br></code></pre></td></tr></tbody></table></figure><blockquote><p>å‘<code>AVL</code>æ ‘ä¸­æ·»åŠ å…ƒç´ </p></blockquote><p><strong>åŸºæœ¬é€»è¾‘</strong></p><ol><li>ä¼ å…¥ä¸‰ä¸ªå…ƒç´  root ,key ,value å…ˆåˆ¤æ–­æ ¹èŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºæ˜¯çš„è¯ç»´æŠ¤size ç„¶ååˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ã€‚</li><li>å½“å…ƒç´ ä¸ä¸ºç©ºçš„æ—¶å€™æ¯”è¾ƒæ’å…¥çš„ä½ç½®æ˜¯å·¦å­æ ‘è¿˜æ˜¯å³å­æ ‘</li><li>å½“æ’å…¥å…ƒç´ ä»¥åæ›´æ–°æ ‘çš„é«˜åº¦ï¼Œå¯ä»¥åˆ©ç”¨ä¸Šé¢çš„è¾…åŠ©å‡½æ•°<code>getHeight()</code>å‡½æ•°ï¼Œå¾—åˆ°æ ¹èŠ‚ç‚¹çš„é«˜åº¦ã€‚</li><li>è®¡ç®—å¹³è¡¡å› å­ä»¥ä¾¿äºç»´æŠ¤AVLæ ‘çš„å¹³è¡¡</li><li>è¾…åŠ©å‡½æ•°LLã€RRã€LRã€RLå‡½æ•°å…±åŒæ¥ç»´æŒåŠ å…¥ä¸€ä¸ªå…ƒç´ åæ ‘çš„å¹³è¡¡æ€§ã€‚</li></ol><p>â‘ å½“æ·»åŠ ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹åæ„æˆLLï¼ˆå·¦å­æ ‘çš„å·¦å­©å­ï¼‰åˆ™éœ€è¦è¿›è¡Œå³æ—‹è½¬</p><p>â‘¡å½“æ·»åŠ ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹åæ„æˆRRï¼ˆå³å­æ ‘çš„å³å­©å­ï¼‰åˆ™éœ€è¦è¿›è¡Œå·¦æ—‹è½¬</p><p>â‘¢å½“æ·»åŠ ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹åæ„æˆLRï¼ˆå·¦å­æ ‘çš„å³å­©å­ï¼‰åˆ™éœ€è¦å¯¹å·¦å­æ ‘è¿›è¡Œå·¦æ—‹è½¬ï¼Œç„¶åæ•´ä½“å³æ—‹è½¬</p><p>â‘£å½“æ·»åŠ ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹åæ„æˆRLï¼ˆå³å­æ ‘çš„å·¦å­©å­ï¼‰åˆ™éœ€è¦å¯¹å³å­æ ‘è¿›è¡Œå³æ—‹è½¬ï¼Œç„¶åæ•´ä½“å·¦æ—‹è½¬</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/uuu1.png" alt=""></p><p>â€‹    å›¾ç‰‡è§£æ ä¸Šå›¾ä¸»è¦ä»‹ç»äº†ä¸‰ä¸ªæ—‹è½¬LLã€RRã€RLæ—‹è½¬LRæ—‹è½¬å’ŒRLæ—‹è½¬ç›¸ååº”è¯¥å…ˆå¯¹ä»¥å·¦å­æ ‘ä¸ºæ ¹èŠ‚ç‚¹è¿›è¡Œå·¦è½¬ï¼Œç„¶åå†ä»¥æ ¹èŠ‚ç‚¹ä¸ºä¸­å¿ƒè¿›è¡Œå³è½¬å¯ä»¥çš„åˆ°ï¼›</p><blockquote><p>å³æ—‹è½¬<code>rightRotate(Node y)</code> çš„å®ç°åŠå…¶åŸç†</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> Node <span class="hljs-title function_">rightRotate</span><span class="hljs-params">(Node y)</span>{<br>   <span class="hljs-comment">//é¦–å…ˆç”¨xæš‚å­˜èŠ‚ç‚¹yçš„å·¦å­æ ‘</span><br>    Node x=y.left;<br>    <span class="hljs-comment">//å…¶æ¬¡ç”¨èŠ‚ç‚¹tempå­˜å‚¨xçš„å³å­æ ‘</span><br>    Node temp=x.right;<br>    <span class="hljs-comment">//æ¥ç€è®©xçš„å³æŒ‡é’ˆæŒ‡å‘y</span><br>    x.rignt=y;<br>    <span class="hljs-comment">//æœ€åå°†xåŸæœ¬çš„å³å­æ ‘æŒ‚åˆ°yçš„å·¦å­æ ‘ä¸Š</span><br>    y.left=temp;<br>    <span class="hljs-comment">//æ—‹è½¬å®Œæˆåè¦æ›´æ–°heightçš„å€¼</span><br>    <span class="hljs-comment">//æ€»ä½“æ¥è¯´åªæœ‰yå’Œxçš„é«˜åº¦å˜äº†å…¶ä½™çš„é«˜åº¦æ­£å¸¸</span><br>    y.height=Math.max(getHeight(y.left),getHeight(y.right))+<span class="hljs-number">1</span>;<br>    x.height=Math.max(getHeight(x.left),getHeight(x.right))+<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">return</span> x;<br>}<br></code></pre></td></tr></tbody></table></figure><blockquote><p>å·¦æ—‹è½¬ <code>leftRotate(Node y)</code> çš„å®ç°åŠå…¶åŸç†å’Œå³å­æ ‘æ­£å¥½ç›¸å</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> Node <span class="hljs-title function_">leftRotate</span><span class="hljs-params">(Node y)</span> {  <br>    <span class="hljs-type">Node</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> y.right;<br>       <span class="hljs-type">Node</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> x.left;<br>       x.left = y;<br>       y.right = temp;<br>       <span class="hljs-comment">//æ›´æ–°heightçš„ å€¼</span><br>       y.height = Math.max(getHeight(y.left), getHeight(y.right)) + <span class="hljs-number">1</span>;<br>       x.height = Math.max(getHeight(x.left), getHeight(x.right)) + <span class="hljs-number">1</span>;<br>       <span class="hljs-keyword">return</span> x;<br>   }<br></code></pre></td></tr></tbody></table></figure><blockquote><p>addå‡½æ•°çš„å®ç°</p></blockquote><p>ä¸»è¦åŠŸèƒ½ï¼šå®ç°å…ƒç´ çš„å¢åŠ ï¼›ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(K key,V value)</span>{<br>    root=add(root,key,value);<br>}<br><br><span class="hljs-keyword">private</span> Node <span class="hljs-title function_">add</span><span class="hljs-params">(Node node,K key,V value)</span>{<br>    <span class="hljs-comment">//æœ€ç®€å•çš„æƒ…å†µ æ•´æ£µæ ‘ä¸ºnull</span><br>    <span class="hljs-keyword">if</span>(node==<span class="hljs-literal">null</span>){<br>        size++;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(key,value);<br>    }<br>    <span class="hljs-comment">//å¦‚æœkeyå°äºæ ¹èŠ‚ç‚¹ éå†åŠ å…¥å·¦å­æ ‘</span><br>    <span class="hljs-keyword">if</span>(key.compareTo(node.key)&lt;<span class="hljs-number">0</span>)<br>        node.left=add(node.left,key,value);<br>    <span class="hljs-comment">//å½“keyå¤§äºæ ¹èŠ‚ç‚¹åœ¨å³å­æ ‘ä¸Šæ’å…¥</span><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(key.compareTo(node.key) &gt; <span class="hljs-number">0</span>)<br>        node.right=add(node.right,key,value);<br>    <span class="hljs-comment">//åä¹‹å½“ä¸¤è€…ç›¸åŒæ—¶ æ›¿æ¢valueå€¼</span><br>    <span class="hljs-keyword">else</span><br>        node.value=value;<br>    <br>    <span class="hljs-comment">//ä»¥ä¸Šå®Œæˆæ’å…¥æ•°æ®åå¼€å§‹è°ƒèŠ‚å¹³è¡¡åº¦</span><br>    <span class="hljs-comment">//é¦–å…ˆå…ˆæ›´æ–°ä¸‹æ ‘çš„é«˜åº¦</span><br>    node.height=<span class="hljs-number">1</span>+Math.max(getHeight(node.left),getHeight(node.right));<br>    <span class="hljs-comment">//æ¥ç€å¾—åˆ°æ ‘çš„é«˜åº¦åå¼€å§‹è®¡ç®—å¹³è¡¡å› å­</span><br>    <span class="hljs-type">int</span> balanceFactor=getBalanceFactor(node);<br>    <span class="hljs-keyword">if</span>(Math.abs(balanceFactor)&gt;<span class="hljs-number">1</span>){<br>        System.out.println(<span class="hljs-string">"unbalanced:"</span>+balanceFactor);<br>    }<br>    <span class="hljs-comment">//å¾—åˆ°å¹³è¡¡å› æ•°åå¼€å§‹ç»´æŠ¤å¹³è¡¡æ€§</span><br>     <span class="hljs-comment">//LL  å› ä¸ºbalanceFactorå·¦å­æ ‘é«˜åº¦-å³å­æ ‘é«˜åº¦</span><br>    <span class="hljs-comment">//åä¸€ä¸ªå‚æ•°ç¡®å®šäº†è¯¥æ ‘å°±æ˜¯å·¦å·¦ç±»å‹çš„æ ‘ç›´æ¥è°ƒç”¨å³æ—‹è½¬</span><br>        <span class="hljs-keyword">if</span> (balanceFactor &gt; <span class="hljs-number">1</span> &amp;&amp; getBalanceFactor(node.left) &gt;= <span class="hljs-number">0</span>) {<br>            <span class="hljs-comment">//å³æ—‹è½¬</span><br>            <span class="hljs-keyword">return</span> rightRotate(node);<br>        }<br>        <span class="hljs-comment">//RR  &amp;&amp;åçš„å‚æ•°ç¡®ä¿äº†è¯¥æ ‘æ˜¯ä¸€ä¸ªRRæ ‘</span><br>        <span class="hljs-keyword">if</span> (balanceFactor &lt; -<span class="hljs-number">1</span> &amp;&amp; getBalanceFactor(node.right) &lt;= <span class="hljs-number">0</span>) {<br>            <span class="hljs-keyword">return</span> leftRotate(node);<br>        }<br>        <span class="hljs-comment">//LR</span><br>        <span class="hljs-keyword">if</span> (balanceFactor &gt; <span class="hljs-number">1</span> &amp;&amp; getBalanceFactor(node.left) &lt; <span class="hljs-number">0</span>) {<br>            <span class="hljs-comment">//å…ˆä»¥å·¦å­©å­ä¸ºèŠ‚ç‚¹è¿›è¡Œå·¦æ—‹è½¬</span><br>            node.left = leftRotate(node.left);<br>            <span class="hljs-comment">//å…¶æ¬¡åœ¨ä»¥nodeä¸ºæ ¹èŠ‚ç‚¹è¿›è¡Œå³æ—‹æ­£å¥½æ„å»ºæˆåŠŸ</span><br>            <span class="hljs-keyword">return</span> rightRotate(node);<br>        }<br>        <span class="hljs-comment">//RL</span><br>        <span class="hljs-keyword">if</span> (balanceFactor &lt; -<span class="hljs-number">1</span> &amp;&amp; getBalanceFactor(node.right) &gt; <span class="hljs-number">0</span>) {<br>            node.right = rightRotate(node.right);<br>            <span class="hljs-keyword">return</span> leftRotate(node);<br>        }<br>        <span class="hljs-keyword">return</span> node;<br>}<br></code></pre></td></tr></tbody></table></figure><h2 id="æºä»£ç "><a href="#æºä»£ç " class="headerlink" title="æºä»£ç "></a>æºä»£ç </h2><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> AVL_;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><br><span class="hljs-meta">@SuppressWarnings({"all"})</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AVLTree</span>&lt;K <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Comparable</span>&lt;K&gt;, V&gt; {<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> {<br>        <span class="hljs-keyword">public</span> K key;<br>        <span class="hljs-keyword">public</span> V value;<br>        <span class="hljs-keyword">public</span> Node left, right;<br>        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> height;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(K key, V value)</span> {<br>            <span class="hljs-built_in">this</span>.key = key;<br>            <span class="hljs-built_in">this</span>.value = value;<br>            left = <span class="hljs-literal">null</span>;<br>            right = <span class="hljs-literal">null</span>;<br>            height = <span class="hljs-number">1</span>;<br>        }<br>    }<br><br>    <span class="hljs-keyword">private</span> Node root;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> size;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AVLTree</span><span class="hljs-params">()</span> {<br>        root = <span class="hljs-literal">null</span>;<br>        size = <span class="hljs-number">0</span>;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isBST</span><span class="hljs-params">()</span> {<br>        ArrayList&lt;K&gt; keys = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        inOrder(root, keys);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; keys.size(); i++) {<br>            <span class="hljs-keyword">if</span> (keys.get(i - <span class="hljs-number">1</span>).compareTo(keys.get(i)) &gt; <span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    }<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">inOrder</span><span class="hljs-params">(Node node, ArrayList&lt;K&gt; keys)</span> {<br>        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) {<br>            <span class="hljs-keyword">return</span>;<br>        }<br>        inOrder(node.left, keys);<br>        keys.add(node.key);<br>        inOrder(node.right, keys);<br>    }<br><br>    <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€é¢—äºŒå‰å¹³è¡¡æ ‘</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isBalanced</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> isBalanced(root);<br>    }<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isBalanced</span><span class="hljs-params">(Node node)</span> {<br>        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">balanceFactor</span> <span class="hljs-operator">=</span> getBalanceFactor(node);<br>        <span class="hljs-keyword">if</span> (Math.abs(balanceFactor) &gt; <span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">return</span> isBalanced(node.left) &amp;&amp; isBalanced(node.right);<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getSize</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> size;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> size == <span class="hljs-number">0</span>;<br>    }<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getHeight</span><span class="hljs-params">(Node node)</span> {<br>        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) {<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        }<br>        <span class="hljs-keyword">return</span> node.height;<br>    }<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getBalanceFactor</span><span class="hljs-params">(Node node)</span> {<br>        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) {<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>        }<br>        <span class="hljs-keyword">return</span> getHeight(node.left) - getHeight(node.right);<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(K key, V value)</span> {<br>        root = add(root, key, value);<br>    }<br><br>    <span class="hljs-keyword">private</span> Node <span class="hljs-title function_">add</span><span class="hljs-params">(Node node, K key, V value)</span> {<br>        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) {<br>            size++;<br>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(key, value);<br>        }<br>        <span class="hljs-keyword">if</span> (key.compareTo(node.key) &lt; <span class="hljs-number">0</span>) {<br>            node.left = add(node.left, key, value);<br>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key.compareTo(node.key) &gt; <span class="hljs-number">0</span>) {<br>            node.right = add(node.right, key, value);<br>        } <span class="hljs-keyword">else</span> {<br>            node.value = value;<br>        }<br>        <span class="hljs-comment">//æ›´æ–°height</span><br>        node.height = <span class="hljs-number">1</span> + Math.max(getHeight(node.right), getHeight(node.left));<br>        <span class="hljs-comment">//è®¡ç®—å¹³è¡¡å› å­</span><br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">balanceFactor</span> <span class="hljs-operator">=</span> getBalanceFactor(node);<br>        <span class="hljs-keyword">if</span> (Math.abs(balanceFactor) &gt; <span class="hljs-number">1</span>) {<br>            System.out.println(<span class="hljs-string">"unbalanced:"</span> + balanceFactor);<br>        }<br>        <span class="hljs-comment">//ç»´æŠ¤å¹³è¡¡æ€§</span><br>        <span class="hljs-comment">//LL</span><br>        <span class="hljs-keyword">if</span> (balanceFactor &gt; <span class="hljs-number">1</span> &amp;&amp; getBalanceFactor(node.left) &gt;= <span class="hljs-number">0</span>) {<br>            <span class="hljs-comment">//å³æ—‹è½¬</span><br>            <span class="hljs-keyword">return</span> rightRotate(node);<br>        }<br>        <span class="hljs-comment">//RR</span><br>        <span class="hljs-keyword">if</span> (balanceFactor &lt; -<span class="hljs-number">1</span> &amp;&amp; getBalanceFactor(node.right) &lt;= <span class="hljs-number">0</span>) {<br>            <span class="hljs-keyword">return</span> leftRotate(node);<br>        }<br>        <span class="hljs-comment">//LR</span><br>        <span class="hljs-keyword">if</span> (balanceFactor &gt; <span class="hljs-number">1</span> &amp;&amp; getBalanceFactor(node.left) &lt; <span class="hljs-number">0</span>) {<br>            node.left = leftRotate(node.left);<br>            <span class="hljs-keyword">return</span> rightRotate(node);<br>        }<br>        <span class="hljs-comment">//RL</span><br>        <span class="hljs-keyword">if</span> (balanceFactor &lt; -<span class="hljs-number">1</span> &amp;&amp; getBalanceFactor(node.right) &gt; <span class="hljs-number">0</span>) {<br>            node.right = rightRotate(node.right);<br>            <span class="hljs-keyword">return</span> leftRotate(node);<br>        }<br>        <span class="hljs-keyword">return</span> node;<br>    }<br><br>    <span class="hljs-comment">//å³æ—‹è½¬</span><br>    <span class="hljs-keyword">private</span> Node <span class="hljs-title function_">rightRotate</span><span class="hljs-params">(Node y)</span> {<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> y.left;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> x.right;<br>        x.right = y;<br>        y.left = temp;<br>        <span class="hljs-comment">//æ›´æ–°heightå€¼</span><br>        y.height = Math.max(getHeight(y.left), getHeight(y.right)) + <span class="hljs-number">1</span>;<br>        x.height = Math.max(getHeight(x.left), getHeight(x.right)) + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">return</span> x;<br>    }<br><br>    <span class="hljs-comment">//å·¦æ—‹è½¬</span><br>    <span class="hljs-keyword">private</span> Node <span class="hljs-title function_">leftRotate</span><span class="hljs-params">(Node y)</span> {<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> y.right;<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> x.left;<br>        x.left = y;<br>        y.right = temp;<br>        <span class="hljs-comment">//æ›´æ–°heightçš„ å€¼</span><br>        y.height = Math.max(getHeight(y.left), getHeight(y.right)) + <span class="hljs-number">1</span>;<br>        x.height = Math.max(getHeight(x.left), getHeight(x.right)) + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">return</span> x;<br>    }<br><br>    <span class="hljs-keyword">private</span> Node <span class="hljs-title function_">getNode</span><span class="hljs-params">(Node node, K key)</span> {<br>        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) {<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        }<br>        <span class="hljs-keyword">if</span> (key.compareTo(node.key) == <span class="hljs-number">0</span>) {<br>            <span class="hljs-keyword">return</span> node;<br>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key.compareTo(node.key) &lt; <span class="hljs-number">0</span>) {<br>            <span class="hljs-keyword">return</span> getNode(node.left, key);<br>        } <span class="hljs-keyword">else</span><br>            <span class="hljs-keyword">return</span> getNode(node.right, key);<br>    }<br><br>    <span class="hljs-keyword">public</span> V <span class="hljs-title function_">remove</span><span class="hljs-params">(K key)</span> {<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">node</span> <span class="hljs-operator">=</span> getNode(root, key);<br>        <span class="hljs-keyword">if</span> (node != <span class="hljs-literal">null</span>) {<br>            root = remove(root, key);<br>            <span class="hljs-keyword">return</span> node.value;<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    }<br><br>    <span class="hljs-comment">//åˆ é™¤æ‰ä»¥nodeä¸ºæ ¹çš„äºŒåˆ†æœç´¢æ ‘ä¸­é”®ä¸ºkeyçš„èŠ‚ç‚¹ï¼Œé€’å½’ç®—æ³•</span><br>    <span class="hljs-comment">//è¿”å›åˆ é™¤èŠ‚ç‚¹åæ–°çš„äºŒåˆ†æœç´¢æ ‘çš„æ ¹</span><br>    <span class="hljs-keyword">private</span> Node <span class="hljs-title function_">remove</span><span class="hljs-params">(Node node, K key)</span> {<br>        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        Node retNode;<br>        <span class="hljs-keyword">if</span> (key.compareTo(node.key) &lt; <span class="hljs-number">0</span>) {<br>            node.left = remove(node.left, key);<br>            retNode = node;<br>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key.compareTo(node.key) &gt; <span class="hljs-number">0</span>) {<br>            node.right = remove(node.right, key);<br>            retNode = node;<br>        } <span class="hljs-keyword">else</span> {<br>            <span class="hljs-comment">//å¾…åˆ é™¤çš„å·¦å­æ ‘ä¸ºç©º</span><br>            <span class="hljs-keyword">if</span> (node.left == <span class="hljs-literal">null</span>) {<br>                <span class="hljs-type">Node</span> <span class="hljs-variable">rightNode</span> <span class="hljs-operator">=</span> node.right;<br>                node.right = <span class="hljs-literal">null</span>;<br>                size--;<br>                retNode = rightNode;<br>            }<br>            <span class="hljs-comment">//å¾…åˆ é™¤çš„å³å­æ ‘ä¸ºç©º</span><br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (node.right == <span class="hljs-literal">null</span>) {<br>                <span class="hljs-type">Node</span> <span class="hljs-variable">leftNode</span> <span class="hljs-operator">=</span> node.left;<br>                node.left = <span class="hljs-literal">null</span>;<br>                size--;<br>                retNode = leftNode;<br>            } <span class="hljs-keyword">else</span> {<br>                <span class="hljs-comment">//å¾…åˆ é™¤å·¦å³å­æ ‘éƒ½ä¸ä¸ºç©º</span><br>                <span class="hljs-type">Node</span> <span class="hljs-variable">successor</span> <span class="hljs-operator">=</span> minimum(node.right);<br>                successor.right = remove(node.right, successor.key);<br>                successor.left = node.left;<br>                node.left = node.right = <span class="hljs-literal">null</span>;<br>                retNode = successor;<br>            }<br>            <span class="hljs-keyword">if</span> (retNode == <span class="hljs-literal">null</span>) {<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>            }<br>            <span class="hljs-comment">//çœ‹æ˜¯å¦éœ€è¦ç»´æŠ¤å¹³è¡¡</span><br>            <span class="hljs-comment">//è®¡ç®—å¹³è¡¡å› å­</span><br>            <span class="hljs-comment">//æ›´æ–°height</span><br>            retNode.height = <span class="hljs-number">1</span> + Math.max(getHeight(retNode.right), getHeight(retNode.left));<br>            <span class="hljs-comment">//è®¡ç®—å¹³è¡¡å› å­</span><br><br>            <span class="hljs-type">int</span> <span class="hljs-variable">balanceFactor</span> <span class="hljs-operator">=</span> getBalanceFactor(retNode);<br>            <span class="hljs-keyword">if</span> (Math.abs(balanceFactor) &gt; <span class="hljs-number">1</span>) {<br>                System.out.println(<span class="hljs-string">"unbalanced:"</span> + balanceFactor);<br>            }<br><br>            <span class="hljs-comment">//ç»´æŠ¤å¹³è¡¡æ€§</span><br>            <span class="hljs-comment">//LL</span><br>            <span class="hljs-keyword">if</span> (balanceFactor &gt; <span class="hljs-number">1</span> &amp;&amp; getBalanceFactor(retNode.left) &gt;= <span class="hljs-number">0</span>) {<br>                <span class="hljs-comment">//å³æ—‹è½¬</span><br>                <span class="hljs-keyword">return</span> rightRotate(retNode);<br>            }<br>            <span class="hljs-comment">//RR</span><br>            <span class="hljs-keyword">if</span> (balanceFactor &lt; -<span class="hljs-number">1</span> &amp;&amp; getBalanceFactor(retNode.right) &lt;= <span class="hljs-number">0</span>) {<br>                <span class="hljs-keyword">return</span> leftRotate(retNode);<br>            }<br>            <span class="hljs-comment">//LR</span><br>            <span class="hljs-keyword">if</span> (balanceFactor &gt; <span class="hljs-number">1</span> &amp;&amp; getBalanceFactor(retNode.left) &lt; <span class="hljs-number">0</span>) {<br>                retNode.left = leftRotate(retNode.left);<br>                <span class="hljs-keyword">return</span> rightRotate(retNode);<br>            }<br>            <span class="hljs-comment">//RL</span><br>            <span class="hljs-keyword">if</span> (balanceFactor &lt; -<span class="hljs-number">1</span> &amp;&amp; getBalanceFactor(retNode.right) &gt; <span class="hljs-number">0</span>) {<br>                retNode.right = rightRotate(retNode.right);<br>                <span class="hljs-keyword">return</span> leftRotate(retNode);<br>            }<br>        }<br>        <span class="hljs-keyword">return</span> retNode;<br>    }<br><br>    <span class="hljs-keyword">private</span> Node <span class="hljs-title function_">minimum</span><span class="hljs-params">(Node node)</span> {<br>        <span class="hljs-keyword">if</span> (node.left == <span class="hljs-literal">null</span>) {<br>            <span class="hljs-keyword">return</span> node;<br>        }<br>        <span class="hljs-keyword">return</span> minimum(node.left);<br>    }<br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(K key)</span> {<br>        <span class="hljs-keyword">return</span> getNode(root, key) != <span class="hljs-literal">null</span>;<br>    }<br><br><br>    <span class="hljs-keyword">public</span> V <span class="hljs-title function_">get</span><span class="hljs-params">(K key)</span> {<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">node</span> <span class="hljs-operator">=</span> getNode(root, key);<br>        <span class="hljs-keyword">return</span> node == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : node.value;<br>    }<br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">set</span><span class="hljs-params">(K key, V newValue)</span> {<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">node</span> <span class="hljs-operator">=</span> getNode(root, key);<br>        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) {<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(key + <span class="hljs-string">"doesn't exist!"</span>);<br>        }<br>        node.value = newValue;<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure><h1 id="2-3æ ‘"><a href="#2-3æ ‘" class="headerlink" title="2-3æ ‘"></a>2-3æ ‘</h1><blockquote><p>å¼•å¯¼</p></blockquote><p>å­¦ä¹ çº¢é»‘æ ‘ä¹‹å‰æˆ‘ä»¬å…ˆæ¥äº†è§£2-3æ ‘ã€‚é¡¾åæ€ä¹‰ä¸€ä¸ªèŠ‚ç‚¹ä½ç½®æœ‰ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªå…ƒç´ ã€‚2-3æ ‘çš„åŸºæœ¬æ€§è´¨å¦‚ä¸‹ï¼š</p><p>â‘ æ»¡è¶³äºŒåˆ†æœç´¢æ ‘çš„åŸºæœ¬æ€§è´¨</p><p>â‘¡èŠ‚ç‚¹å¯ä»¥å­˜æ”¾ä¸€ä¸ªå…ƒç´ æˆ–è€…ä¸¤ä¸ªå…ƒç´ </p><p>â‘¢æ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­©å­æˆ–è€…ä¸‰ä¸ªå­©å­</p><p>â‘£ä¸¤ä¸ªå­©å­å«åš2èŠ‚ç‚¹ ä¸‰ä¸ªå­©å­å«åšä¸‰èŠ‚ç‚¹</p><p>â‘¤2-3æ ‘æ˜¯ä¸€æ£µç»å¯¹å¹³è¡¡çš„æ ‘</p><p>â‘¥çº¢é»‘æ ‘å’Œ2-3æ ‘ç­‰ä»·&amp;&amp;<strong>æ‰€æœ‰çš„çº¢è‰²èŠ‚ç‚¹éƒ½æ˜¯å‘å·¦å€¾æ–œï¼ˆè‡ªå®šä¹‰ï¼‰</strong></p><p>ä¸‹é¢æˆ‘ä»¬ç»™å‡ºä¸€ä¸ª2-3æ ‘çš„å›¾åƒï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/1231.png" alt=""></p><p>ç”±äºçº¢é»‘æ ‘çš„æ·»åŠ åˆ é™¤æ“ä½œè¾ƒä¸ºå¤æ‚è¿™é‡Œå€¼å†™å‡º2-3æ ‘çš„æ·»åŠ æ“ä½œå¦‚ä¸‹å›¾ï¼ˆå’Œçº¢é»‘æ ‘å®Œå…¨ç›¸åŒï¼‰ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/ggg.png" alt=""></p><p>æ¯æ¬¡åŠ å…¥å…ƒç´ åéƒ½èƒ½ä¿æŒæ•°çš„ç»å¯¹å¹³è¡¡ã€‚</p><h2 id="çº¢é»‘æ ‘çš„å®ç°"><a href="#çº¢é»‘æ ‘çš„å®ç°" class="headerlink" title="çº¢é»‘æ ‘çš„å®ç°"></a>çº¢é»‘æ ‘çš„å®ç°</h2><h3 id="å®ç°å‡†å¤‡"><a href="#å®ç°å‡†å¤‡" class="headerlink" title="å®ç°å‡†å¤‡"></a>å®ç°å‡†å¤‡</h3><ol><li>é¦–å…ˆå®šä¹‰çº¢é»‘è‰²å¸¸é‡å€¼</li><li>åˆå§‹å€¼å‡ä¸ºçº¢è‰²</li><li>æ„å»ºä¸€ä¸ªåˆ¤æ–­æ˜¯å¦ä¸ºçº¢è‰²èŠ‚ç‚¹çš„å‡½æ•°</li><li>æ„å»ºå·¦æ—‹è½¬<code>leftRotate()</code>å³æ—‹è½¬<code>rightRotate()</code>å’Œé¢œè‰²ç¿»è½¬å‡½æ•°<code>flipColors()</code>å‡½æ•°</li><li>è·Ÿæ®ä»¥ä¸Šå‡†å¤‡å®ç°çº¢é»‘æ ‘</li></ol><h3 id="åŸç†åˆ†æ"><a href="#åŸç†åˆ†æ" class="headerlink" title="åŸç†åˆ†æ"></a>åŸç†åˆ†æ</h3><blockquote><p>ç»“è®º</p></blockquote><p><strong>1.æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯çº¢è‰²è¦ä¹ˆæ˜¯é»‘è‰²</strong><br><strong>2.æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²çš„</strong><br><strong>3.æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆæœ€åçš„ç©ºèŠ‚ç‚¹ï¼‰æ˜¯é»‘è‰²çš„</strong><br><strong>4.å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ é‚£ä¹ˆä»–çš„å­©å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ï¼Œé»‘è‰²èŠ‚ç‚¹çš„å³å­©å­ä¸€å®šæ˜¯é»‘è‰²çš„</strong><br><strong>5.ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ï¼Œç»è¿‡çš„é»‘è‰²èŠ‚ç‚¹æ˜¯ä¸€æ ·çš„</strong></p><p><strong>çº¢é»‘æ ‘çš„æ€§èƒ½åˆ†æï¼šæœ€å¤§é«˜åº¦2*logn æ—¶é—´å¤æ‚åº¦O(logn)</strong></p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/lllkk.png" alt=""></p><hr><p>æ€»ä½“å’ŒAVLæ ‘ä¸€æ ·ä¸è¿‡å¤šäº†ä¸€ä¸ªé¢œè‰²çš„åˆ¤æ–­ï¼›</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">BLACK</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">RED</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<br><span class="hljs-comment">//åœ¨NodeèŠ‚ç‚¹ä¸­åŠ å…¥ä¸€ä¸ªcolorå…±æœ‰å±æ€§ å¸ƒå°”ç±»å‹çš„å€¼</span><br><span class="hljs-comment">//å¹¶åœ¨Nodeçš„æ„é€ å‡½æ•°ä¸­ä½¿é¢œè‰²åˆå§‹å€¼ä¸ºRED</span><br></code></pre></td></tr></tbody></table></figure><blockquote><p>å®Œæˆå®ç°å‡†å¤‡çš„ä»£ç </p><p>é¢œè‰²ç¿»è½¬ä»£ç ï¼š</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//é¢œè‰²ç¿»è½¬</span><br> <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">flipColors</span><span class="hljs-params">(Node node)</span> {<br>     node.color = RED;<br>     node.left.color = BLACK;<br>     node.right.color = BLACK;<br> }<br></code></pre></td></tr></tbody></table></figure><blockquote><p><strong>æ·»åŠ æ–°çš„å…ƒç´ ä»£ç ï¼š</strong></p></blockquote><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">//åƒçº¢é»‘æ ‘ä¸­æ·»åŠ æ–°çš„å…ƒç´ <br> public void add(K key, V value) {<br>     root = add(root, key, value);<br>     root.color = BLACK;<br> }<br></code></pre></td></tr></tbody></table></figure><p><strong>åˆ¤æ–­æ˜¯å¦ä¸ºçº¢è‰²ï¼š</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isRed</span><span class="hljs-params">(Node node)</span> {<br>     <span class="hljs-comment">//ä¸»è¦è§„é¿nullå¶å­èŠ‚ç‚¹  </span><br>    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) <br>          <span class="hljs-keyword">return</span> BLACK;<br>      <span class="hljs-keyword">return</span> node.color;<br>  }<br></code></pre></td></tr></tbody></table></figure><blockquote><p><strong>å¦‚æœçº¢é»‘æ ‘çš„æ·»åŠ èŠ‚ç‚¹åè¯¥èŠ‚ç‚¹å³å­æ ‘ä¸ºçº¢è‰²å¹¶ä¸”å…¶å·¦å­æ ‘ä¸ä¸ºçº¢è‰²åˆ™éœ€è¦è¿›è¡Œå·¦åè½¬ï¼š</strong></p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> Node <span class="hljs-title function_">leftRotate</span><span class="hljs-params">(Node node)</span> {<br>    <span class="hljs-comment">//å·¦æ—‹è½¬</span><br>    <span class="hljs-type">Node</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> node.right;<br>    node.right = x.left;<br>    x.left = node;<br>    <span class="hljs-comment">//å½“ç¿»è½¬å®Œæˆå éœ€è¦å¯¹é¢œè‰²è¿›è¡Œè°ƒæ¢</span><br>    x.color = node.color;<br>    node.color = RED;<br>    <span class="hljs-keyword">return</span> x;<br>}<br></code></pre></td></tr></tbody></table></figure><blockquote><p><strong>å¦‚æœçº¢é»‘æ ‘çš„æ·»åŠ èŠ‚ç‚¹åè¯¥èŠ‚ç‚¹å·¦å­æ ‘ä¸ºçº¢è‰²å¹¶ä¸”å…¶å·¦å­æ ‘çš„å·¦å­©å­ä¸ºçº¢è‰²åˆ™éœ€è¦è¿›è¡Œå³åè½¬ï¼š</strong></p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> Node <span class="hljs-title function_">rightRotate</span><span class="hljs-params">(Node node)</span> {<br>    <span class="hljs-comment">//å³æ—‹è½¬</span><br>      <span class="hljs-type">Node</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> node.left;<br>      node.left = x.right;<br>      x.right = node;<br>    <span class="hljs-comment">//é¢œè‰²è°ƒæ¢</span><br>      x.color = node.color;<br>      node.color = RED;<br>      <span class="hljs-keyword">return</span> x;<br>  }<br></code></pre></td></tr></tbody></table></figure><blockquote><p><strong>å½“æ·»åŠ å…ƒç´ çš„å·¦å­©å­å’Œå³å­©å­å‡ä¸ºçº¢è‰²çš„æ—¶å€™éœ€è¦è¿›è¡Œé¢œè‰²çš„ç¿»è½¬</strong>æœ€ç»ˆå®ç°çš„addå‡½æ•°ä¸º</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å‘ä»¥nodeä¸ºæ ¹çš„çº¢é»‘æ ‘ä¸­æ’å…¥æ–°çš„å…ƒç´ </span><br><span class="hljs-keyword">private</span> Node <span class="hljs-title function_">add</span><span class="hljs-params">(Node node, K key, V value)</span> {<br>    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) {<br>        size++;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(key, value);  <span class="hljs-comment">//é»˜è®¤æ’å…¥ä¸€ä¸ªçº¢è‰²çš„èŠ‚ç‚¹</span><br>    }<br>    <span class="hljs-keyword">if</span> (key.compareTo(node.key) &lt; <span class="hljs-number">0</span>) {<br>        node.left = add(node.left, key, value);<br>    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key.compareTo(node.key) &gt; <span class="hljs-number">0</span>) {<br>        node.right = add(node.right, key, value);<br>    } <span class="hljs-keyword">else</span> {<br>        node.value = value;<br>    }<br>    <span class="hljs-comment">//çº¢é»‘æ ‘çš„ç»´æŠ¤è¿‡ç¨‹</span><br>    <span class="hljs-keyword">if</span> (isRed(node.right) &amp;&amp; !isRed(node.left)) {<br>        node = leftRotate(node);<br>    }<br>    <span class="hljs-keyword">if</span> (isRed(node.left) &amp;&amp; isRed(node.left.left))<br>        node = rightRotate(node);<br>    <span class="hljs-keyword">if</span> (isRed(node.left) &amp;&amp; isRed(node.right))<br>        flipColors(node);<br><br>    <span class="hljs-keyword">return</span> node;<br>}<br><br></code></pre></td></tr></tbody></table></figure><h3 id="çº¢é»‘æ ‘çš„æ€»ç»“"><a href="#çº¢é»‘æ ‘çš„æ€»ç»“" class="headerlink" title="çº¢é»‘æ ‘çš„æ€»ç»“"></a>çº¢é»‘æ ‘çš„æ€»ç»“</h3><p>1.å¯¹äºå®Œå…¨éšæœºçš„æ•°æ®ï¼Œæ™®é€šçš„äºŒåˆ†æœç´¢æ ‘å¾ˆå¥½ç”¨ ç¼ºç‚¹ï¼šæç«¯æƒ…å†µä¸‹é€€åŒ–æˆé“¾è¡¨ï¼ˆé«˜åº¦ä¸å¹³è¡¡ï¼‰</p><p>2.å¯¹äºæŸ¥è¯¢è¾ƒå¤šçš„æƒ…å†µä¸‹ AVLå¾ˆå¥½ç”¨</p><p>3.çº¢é»‘æ ‘ç‰ºç‰²äº†å¹³è¡¡æ€§ï¼ˆ2lognçš„é«˜åº¦ï¼‰</p><p>4.ç»Ÿè®¡æ€§èƒ½æ›´ä¼˜ï¼ˆå¸¸ç”¨äºå¢åˆ æ”¹æŸ¥çš„æ‰€æœ‰æ“ä½œï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AVLå’Œçº¢é»‘æ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¹¶æŸ¥é›†</title>
      <link href="/2022/09/01/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/%E5%B9%B6%E6%9F%A5%E9%9B%86/"/>
      <url>/2022/09/01/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/%E5%B9%B6%E6%9F%A5%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<h1 id="å¹¶æŸ¥é›†"><a href="#å¹¶æŸ¥é›†" class="headerlink" title="å¹¶æŸ¥é›†"></a>å¹¶æŸ¥é›†</h1><h2 id="1-æ¦‚è®º"><a href="#1-æ¦‚è®º" class="headerlink" title="1.æ¦‚è®º"></a>1.æ¦‚è®º</h2><blockquote><p><strong>å®šä¹‰</strong></p></blockquote><p>å¹¶æŸ¥é›†æ˜¯ä¸€ç§æ ‘å½¢çš„æ•°æ®ç»“æ„ï¼Œç”¨äºå¤„ç†ä¸€äº›ä¸ç›¸äº¤é›†åˆçš„åˆå¹¶ä»¥åŠæŸ¥è¯¢çš„é—®é¢˜ï¼Œä»–çš„æœ¬è´¨æ˜¯é€šè¿‡ä¸€ä¸ªä¸€ç»´æ•°ç»„æ¥ç»´æŠ¤ä¸€ä¸ªæ£®æ—ï¼Œå¼€å§‹æ—¶æ£®æ—ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å­¤ç«‹çš„ï¼Œå„æˆä¸€ä¸ªæ ‘ï¼Œè¿›è¡Œè‹¥å¹²æ¬¡çš„åˆå¹¶æ“ä½œï¼Œæ¯æ¬¡åˆå¹¶å°†ä¸¤ä¸ªæ ‘åˆå¹¶ä¸ºä¸€ä¸ªæ›´å¤§çš„æ ‘ã€‚</p><p>â€‹       <strong>ä¸»è¦è§£å†³é—®é¢˜ï¼šé“¾æ¥é—®é¢˜å’Œè·¯å¾„é—®é¢˜</strong>ã€‚</p><p>â€‹    <strong>å¹¶æŸ¥é›†åœ¨ä¸€äº›æœ‰Nä¸ªå…ƒç´ çš„é›†åˆåº”ç”¨é—®é¢˜ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸æ˜¯åœ¨å¼€å§‹æ—¶è®©æ¯ä¸ªå…ƒç´ æ„æˆä¸€ä¸ªå•å…ƒç´ çš„é›†åˆï¼Œç„¶åæŒ‰ä¸€å®šé¡ºåºå°†å±äºåŒä¸€ç»„çš„å…ƒç´ æ‰€åœ¨çš„é›†åˆ<code>åˆå¹¶</code>ï¼Œå…¶é—´è¦åå¤<code>æŸ¥æ‰¾</code>ä¸€ä¸ªå…ƒç´ åœ¨å“ªä¸ªé›†åˆä¸­ã€‚</strong></p><blockquote><p>æ“ä½œ</p></blockquote><ol><li>å°†ä¸¤ä¸ªé›†åˆåˆå¹¶</li><li>è¯¢é—®ä¸¤ä¸ªæ•°æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­</li></ol><blockquote><p>åŸºæœ¬åŸç†</p></blockquote><p>æ¯ä¸ªé›†åˆç”¨ä¸€æ£µæ ‘æ¥è¡¨ç¤ºã€‚æ ‘æ ¹çš„ç¼–å·å°±æ˜¯æ•´ä¸ªé›†åˆçš„ç¼–å·ï¼Œæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨ä»–çš„çˆ¶èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯å­©å­æŒ‡å‘çˆ¶äº²ã€‚</p><h2 id="ç”±ç®€å•åˆ°æ·±å…¥"><a href="#ç”±ç®€å•åˆ°æ·±å…¥" class="headerlink" title="ç”±ç®€å•åˆ°æ·±å…¥"></a>ç”±ç®€å•åˆ°æ·±å…¥</h2><p>å…¬å…±æ¥å£:    è®¾è®¡ä¸¤ä¸ªæ¥å£ ä¸»è¦å¯¹å…¶ä¸‹æ ‡è¿›è¡Œæ¯”è¾ƒ <code>isConnected</code> åˆ¤æ–­æ˜¯å¦è”åˆï¼Œ<code>unionElements</code> è”åˆä¸¤ä¸ªèŠ‚ç‚¹ã€‚ </p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">int getSize();<br>boolean isConnected(int p,int q);<br>void unionElements(int p,int q);<br></code></pre></td></tr></tbody></table></figure><p>id               0        1        2         3         4        5        6        7        8        9</p><p>parent      0        1        0         1          0        1        0        1        0        1</p><blockquote><p>â‘ ç”±ä¸Šè¿°æ ¼å¼å¯çŸ¥é“åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯å¦è¿æ¥å¯ä»¥æ¯”è¾ƒä»–ä»¬çš„ä¸‹æ ‡å€¼æ˜¯å¦ç›¸åŒã€‚å®Œæˆ<code>find()</code> å‡½æ•°ã€‚</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> p)</span>{<br>    <span class="hljs-keyword">if</span>(p&lt;<span class="hljs-number">0</span>&amp;&amp;p&gt;=id.length){<br>         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"p is out of bound!"</span>);<br>    }<br>    <span class="hljs-keyword">return</span> id[p];        <br>}<br></code></pre></td></tr></tbody></table></figure><blockquote><p>â‘¡æ¥ç€å®ç°<code>isConnected()</code> å‡½æ•° ä¸»è¦åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯å¦å±äºåŒä¸€ä¸ªå…¶ä¸­p,qæ˜¯ç¼–å·</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isConnected</span><span class="hljs-params">(<span class="hljs-type">int</span> p, <span class="hljs-type">int</span> q)</span> {<br>       <span class="hljs-keyword">return</span> find(p)==find(q);<br>   }<br></code></pre></td></tr></tbody></table></figure><blockquote><p>â‘¢å®ç°ä¸¤ä¸ªç¼–å·ä¸‹å…ƒç´ çš„èåˆ<code>unionElements()</code> </p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">pubilc <span class="hljs-keyword">void</span> <span class="hljs-title function_">unionElements</span><span class="hljs-params">(<span class="hljs-type">int</span> p,<span class="hljs-type">int</span> q)</span>{<br>    <span class="hljs-type">int</span> pID=find(p);<br>    <span class="hljs-type">int</span> qID=find(q);<br>    <span class="hljs-keyword">if</span>(pID==qID){<br>        <span class="hljs-keyword">return</span>;<br>    }<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;id.length;i++){<br>        <span class="hljs-keyword">if</span>(id[i]==pID)<br>            id[i]=qID;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>è¿™é‡Œæˆ‘ä»¬é‚£ä¸Šä¸ªid å’Œparent çš„ä¾‹å­å½“ç¼–å·1å’Œ4èåˆåçš„ç»“æœä¸º</p><p>id               0        1        2         3         4        5        6        7        8        9</p><p>parent      0        0        0         0          0        0        0        0        0        0</p><p>å› ä¸ºä¸Šé¢çš„ä¸€å·¥å¯ä»¥åˆ†ä¸ºä¸¤æ³¢ï¼Œå½“æŠŠä»–ä»¬ä¸åŒçš„ä¸¤ä¸ªè¿æ¥èµ·æ¥ç›¸å½“äºæ•´ä¸ªå…ƒç´ å…¨éƒ¨è¿æ¥äº†èµ·æ¥</p><h3 id="é¦–å…ˆå®šä¹‰ä¸€ä¸ªå…¬å…±çš„æ¥å£ç±»-ä»¥ä¸‹ä¸åŒçš„æé«˜å‡éœ€è¦ç”¨åˆ°"><a href="#é¦–å…ˆå®šä¹‰ä¸€ä¸ªå…¬å…±çš„æ¥å£ç±»-ä»¥ä¸‹ä¸åŒçš„æé«˜å‡éœ€è¦ç”¨åˆ°" class="headerlink" title="é¦–å…ˆå®šä¹‰ä¸€ä¸ªå…¬å…±çš„æ¥å£ç±» ä»¥ä¸‹ä¸åŒçš„æé«˜å‡éœ€è¦ç”¨åˆ°"></a>é¦–å…ˆå®šä¹‰ä¸€ä¸ªå…¬å…±çš„æ¥å£ç±» ä»¥ä¸‹ä¸åŒçš„æé«˜å‡éœ€è¦ç”¨åˆ°</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UF</span> {<br>    <span class="hljs-comment">//è®¾è®¡ä¸¤ä¸ªæ¥å£ ä¸»è¦å¯¹å…¶ä¸‹æ ‡è¿›è¡Œæ¯”è¾ƒ</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">getSize</span><span class="hljs-params">()</span>;<br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isConnected</span><span class="hljs-params">(<span class="hljs-type">int</span> p,<span class="hljs-type">int</span> q)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">unionElements</span><span class="hljs-params">(<span class="hljs-type">int</span> p,<span class="hljs-type">int</span> q)</span>;<br>}<br><br></code></pre></td></tr></tbody></table></figure><h3 id="ç¨‹åºæºä»£ç "><a href="#ç¨‹åºæºä»£ç " class="headerlink" title="ç¨‹åºæºä»£ç "></a>ç¨‹åºæºä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnionFind1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UF</span> {<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] id;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UnionFind1</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span> {<br>        id = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; id.length; i++) {<br>            id[i] = i;<br>        }<br>    }<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> p)</span> {<br>        <span class="hljs-keyword">if</span> (p &lt; <span class="hljs-number">0</span> &amp;&amp; p &gt;= id.length) {<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"p is out of bound!"</span>);<br>        }<br>        <span class="hljs-keyword">return</span> id[p];<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getSize</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> id.length;<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isConnected</span><span class="hljs-params">(<span class="hljs-type">int</span> p, <span class="hljs-type">int</span> q)</span> {<br>        <span class="hljs-keyword">return</span> find(p) == find(q);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unionElements</span><span class="hljs-params">(<span class="hljs-type">int</span> p, <span class="hljs-type">int</span> q)</span> {<br>        <span class="hljs-type">int</span> <span class="hljs-variable">pID</span> <span class="hljs-operator">=</span> find(p);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">qID</span> <span class="hljs-operator">=</span> find(q);<br>        <span class="hljs-keyword">if</span> (pID == qID) {<br>            <span class="hljs-keyword">return</span>;<br>        }<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; id.length; i++) {<br>            <span class="hljs-keyword">if</span> (id[i] == pID)<br>                id[i] = qID;<br>        }<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure><h2 id="Quick-Union"><a href="#Quick-Union" class="headerlink" title="Quick Union"></a>Quick Union</h2><p>  <strong>å°†æ¯ä¸€ä¸ªå…ƒç´ ï¼Œçœ‹åšæ˜¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚</strong> è¯¥è¿‡ç¨‹é€‚ç”¨äºæœ‰åºåºåˆ—ä»0å¼€å§‹</p><p>id               0        1        2         3         4        5        6        7        8        9</p><p>parent      0        1        2         3         4        5        6        7        8        9</p><p><strong>å¯¹äºä»¥ä¸Šæ¥è¯´æ ¹æ®ä¸‹å›¾å¯ä»¥çœ‹å‡ºè”åˆè¿‡ç¨‹æ¯æ¬¡è”åˆå…ƒç´ éƒ½æ‰¾åˆ°ä»–çš„ç¥–å…ˆ ,è®©ç¥–å…ˆè¿›è¡Œè¿æ¥</strong>ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/QQ01233319.png" alt=""></p><p>å›¾ç‰‡è§£æï¼šå¯¹äº<code>union(4,3)</code> è¿™é‡Œè§„å®šå°†4è¿æ¥åˆ°3ï¼›èµ·åˆä»–ä»¬éƒ½æ˜¯å­¤ç«‹çš„èŠ‚ç‚¹æŒ‡å‘è‡ªå·±æœ¬èº«å³ p=parent(p);è¿æ¥4ï¼Œ3æ—¶é¦–å…ˆæ‰¾åˆ°4ï¼Œ3çš„æ ¹èŠ‚ç‚¹éƒ½ä¸ºå…¶æœ¬èº«ï¼Œå…¶æ¬¡è®©4çš„æ ¹èŠ‚ç‚¹æŒ‡å‘3å³ 4çš„ç¥–å…ˆæŒ‡å‘3 å…ˆå­˜å‚¨4ï¼Œ3çš„ç¥–å…ˆä¸ºpRootï¼ŒqRootç„¶åè¿æ¥ parent[pRoot]=qRoot;ç„¶åå°±å®ç°äº†è¿æ¥ </p><blockquote><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¯¹<code>find()</code>å‡½æ•°è¿›è¡Œä¿®æ”¹æ¯æ¬¡éœ€è¦æ‰¾åˆ°ä»–çš„ç¥–å…ˆ,åˆå§‹åŒ–çš„æ—¶å€™è®©id==parent</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> p)</span>{<br>     <span class="hljs-keyword">if</span>(p&lt;<span class="hljs-number">0</span>&amp;&amp;p&gt;=id.length){<br>         <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"p is out of bound!"</span>);<br>    }<br>    <span class="hljs-comment">//æ­¤å¤„å¼€å§‹å¯»æ‰¾å…¶ç¥–å…ˆ</span><br>    <span class="hljs-keyword">while</span>(p!=parent[p]){<br>        p=parent[p];<br>    }<br>    <span class="hljs-keyword">return</span> p;<br>}<br></code></pre></td></tr></tbody></table></figure><blockquote><p>å¯¹å…¶è”åˆä¸¤ç»„å…ƒç´ æƒ…å†µä»£ç æœ€ç»ˆè®©patentæŒ‡å‘æ ¹èŠ‚ç‚¹</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unionElements</span><span class="hljs-params">(<span class="hljs-type">int</span> p, <span class="hljs-type">int</span> q)</span> {<br>    <span class="hljs-comment">//å¾—åˆ°pçš„æ ¹èŠ‚ç‚¹   </span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">pRoot</span> <span class="hljs-operator">=</span> find(p);<br>    <span class="hljs-comment">//å¾—åˆ°qçš„æ ¹èŠ‚ç‚¹</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">qRoot</span> <span class="hljs-operator">=</span> find(q);<br>     <span class="hljs-keyword">if</span> (pRoot == qRoot) {<br>           <span class="hljs-keyword">return</span>;<br>       }<br>    <span class="hljs-comment">//æœ€ç»ˆè®©pRootæŒ‡å‘qRootå®ç°äº†è¿æ¥</span><br>       parent[pRoot] = qRoot;<br>   }<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¨‹åºæºä»£ç -1"><a href="#ç¨‹åºæºä»£ç -1" class="headerlink" title="ç¨‹åºæºä»£ç "></a>ç¨‹åºæºä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Arrays;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnionFind2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UF</span> {<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] parent;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UnionFind2</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span> {<br>        parent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size; i++) {<br>            parent[i] = i;<br>        }<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getSize</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> parent.length;<br>    }<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> p)</span> {<br>        <span class="hljs-keyword">if</span> (p &lt; <span class="hljs-number">0</span> &amp;&amp; p &gt;= parent.length)<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"p is out of bound"</span>);<br>        <span class="hljs-keyword">while</span> (p != parent[p]) {<br>            p = parent[p];<br>        }<br>        <span class="hljs-keyword">return</span> p;<br>    }<br><br>    <span class="hljs-comment">//åˆ¤æ–­på’Œqæ˜¯å¦åœ¨åŒä¸€ä¸ªé›†åˆ</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isConnected</span><span class="hljs-params">(<span class="hljs-type">int</span> p, <span class="hljs-type">int</span> q)</span> {<br>        <span class="hljs-keyword">return</span> find(p) == find(q);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unionElements</span><span class="hljs-params">(<span class="hljs-type">int</span> p, <span class="hljs-type">int</span> q)</span> {<br>        <span class="hljs-type">int</span> <span class="hljs-variable">pRoot</span> <span class="hljs-operator">=</span> find(p);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">qRoot</span> <span class="hljs-operator">=</span> find(q);<br>        <span class="hljs-keyword">if</span> (pRoot == qRoot) {<br>            <span class="hljs-keyword">return</span>;<br>        }<br>        parent[pRoot] = qRoot;<br>    }<br>}<br><br></code></pre></td></tr></tbody></table></figure><h2 id="åŸºäºsizeçš„ä¼˜åŒ–"><a href="#åŸºäºsizeçš„ä¼˜åŒ–" class="headerlink" title="åŸºäºsizeçš„ä¼˜åŒ–"></a>åŸºäºsizeçš„ä¼˜åŒ–</h2><p>â€‹    åœ¨ç¬¬äºŒç‰ˆæœ¬çš„å¹¶æŸ¥é›†ä¸­<code>find()</code> æ˜¯ä¸€ä¸ªä¸æ–­ç´¢å¼•çš„è¿‡ç¨‹ ä¸æ˜¯é¡ºæ¬¡çš„è®¿é—®ï¼Œè€Œæ˜¯åœ¨ä¸åŒçš„åœ°å€è·³è½¬æ‰€ä»¥è®¿é—®è¾ƒæ…¢ï¼Œå…¶å¤æ‚åº¦ä¸ºO(h)ï¼Œ<code>isConnected()</code>å¤æ‚åº¦é«˜ã€‚</p><p>â€‹     ä¸ºäº†ä½¿å½¢æˆçš„æ ‘ä¸ä¼šå› ä¸ºä¸æ–­è¿æ¥è€Œå½¢æˆä¸€æ¡é“¾è¡¨ï¼Œæ‰€ä»¥æˆ‘ä»¬è®©å…ƒç´ å°‘çš„æ ¹èŠ‚ç‚¹æŒ‡å‘å…ƒç´ å¤šçš„æ ¹èŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/asd123.png" alt=""></p><p>æŒ‰ç…§æ­£å¸¸æƒ…å†µè¿æ¥æˆä¸€æ¡é“¾è¡¨å¢åŠ äº†æ ‘çš„é«˜åº¦æå‡äº†æ—¶é—´å¤æ‚åº¦ä½¿æ•ˆç‡å˜æ…¢ã€‚ä½†æ˜¯è€ƒè™‘åˆ°size()æƒ…å†µåå¯ä»¥è®©å…ƒç´ å°‘çš„æŒ‡å‘å…ƒç´ å¤šçš„ï¼Œè¿™æ ·å°±é¿å…äº†å•é“¾è¡¨çš„å½¢æˆã€‚</p><blockquote><p>å…·ä½“ä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š</p></blockquote><p>â‘ é¦–å…ˆæ·»åŠ ç§æœ‰æˆå‘˜å˜é‡<code>private int []sz</code> ä¾¿æ˜¯ä»¥iä¸ºæ ¹çš„é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°</p><p>â‘¡ä¿®æ”¹æ„é€ å‡½æ•°ä¸­å¯¹äºåˆå§‹åŒ–çš„æ•°ç»„æ¯ä¸ªèŠ‚ç‚¹æ·»åŠ <code>sz[i]=1</code>;</p><p>â‘¢<code>find()</code>å‡½æ•°å’Œç¬¬ç‰ˆä¸€è‡´</p><p>â‘£<code>unionElements()</code>å‡½æ•°è¿›è¡Œä¿®æ”¹æ“ä½œå¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unionElements</span><span class="hljs-params">(<span class="hljs-type">int</span> p,<span class="hljs-type">int</span> q)</span>{<br>    <span class="hljs-type">int</span> pRoot=find(p);<br>    <span class="hljs-type">int</span> qRoot=fin(q);<br>    <span class="hljs-keyword">if</span>(pRoot==qRoot){<br>        <span class="hljs-keyword">return</span>;<br>    }<br>    <span class="hljs-comment">//ä»¥ä¸‹åˆ¤æ–­sizeçš„å¤§å°è¿›è¡Œä¸åŒçš„è¿æ¥æ–¹å¼å¯ä»¥å®ç°æ ‘çš„æ·±åº¦é™ä½;</span><br>    <span class="hljs-keyword">if</span>(sz[pRoot]&lt;sz[qRoot]){<br>        parent(pRoot)=qRoot;<br>        sz[qRoot]+=sz(pRoot);<br>    }<span class="hljs-keyword">else</span>{<br>        parent[qRoot]=pRoot;<br>        sz[pRoot]+=sz[qRoot];<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¨‹åºæºä»£ç -2"><a href="#ç¨‹åºæºä»£ç -2" class="headerlink" title="ç¨‹åºæºä»£ç "></a>ç¨‹åºæºä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Arrays;<br><br><span class="hljs-comment">//åŸºäºsizeçš„ä¼˜åŒ–</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnionFind3</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UF</span> {<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] parent;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] sz;  <span class="hljs-comment">//sz[i]è¡¨ç¤ºä»¥iä¸ºæ ¹çš„é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UnionFind3</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span> {<br>        parent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];<br>        sz = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size; i++) {<br>            parent[i] = i;<br>            sz[i] = <span class="hljs-number">1</span>;<br>        }<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getSize</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> parent.length;<br>    }<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> p)</span> {<br>        <span class="hljs-keyword">if</span> (p &lt; <span class="hljs-number">0</span> &amp;&amp; p &gt;= parent.length)<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"p is out of bound"</span>);<br>        <span class="hljs-keyword">while</span> (p != parent[p]) {<br>            p = parent[p];<br>        }<br>        <span class="hljs-keyword">return</span> p;<br>    }<br><br>    <span class="hljs-comment">//åˆ¤æ–­på’Œqæ˜¯å¦åœ¨åŒä¸€ä¸ªé›†åˆ</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isConnected</span><span class="hljs-params">(<span class="hljs-type">int</span> p, <span class="hljs-type">int</span> q)</span> {<br>        <span class="hljs-keyword">return</span> find(p) == find(q);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unionElements</span><span class="hljs-params">(<span class="hljs-type">int</span> p, <span class="hljs-type">int</span> q)</span> {<br>        <span class="hljs-type">int</span> <span class="hljs-variable">pRoot</span> <span class="hljs-operator">=</span> find(p);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">qRoot</span> <span class="hljs-operator">=</span> find(q);<br>        <span class="hljs-keyword">if</span> (pRoot == qRoot) {<br>            <span class="hljs-keyword">return</span>;<br>        }<br>        <span class="hljs-keyword">if</span> (sz[pRoot] &lt; sz[qRoot]) {<br>            parent[pRoot] = qRoot;<br>            sz[qRoot] += sz[pRoot];<br>        } <span class="hljs-keyword">else</span> {<br>            parent[qRoot] = pRoot;<br>            sz[pRoot] += sz[qRoot];<br>        }<br><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h2 id="åŸºäºrankçš„ä¼˜åŒ–"><a href="#åŸºäºrankçš„ä¼˜åŒ–" class="headerlink" title="åŸºäºrankçš„ä¼˜åŒ–"></a>åŸºäºrankçš„ä¼˜åŒ–</h2><p>ç›®çš„ï¼šä¸ºäº†ä½¿æ¯æ¬¡ä¸¤ä¸ªä¸åŒçš„é›†åˆè¿æ¥åæ•°çš„é«˜åº¦å°½é‡ä¸å¢åŠ æ­¤å¤„æˆ‘ä»¬è¿›è¡Œrankä¼˜åŒ–ä»£ç ä¸åŸºäºsizeä¼˜åŒ–ä»£ç ç±»ä¼¼ åªä¸è¿‡å°†<code>private int []sz</code> æ”¹ä¸º<code>private int []rank</code> å¹¶ä¸”åœ¨æ„é€ å‡½æ•°ä¸­èµ‹äºˆåˆå§‹é«˜åº¦ä¸º1ï¼›</p><p>ä¸‹é¢ä¸»è¦ä¿®æ”¹<code>unionElements()</code>å‡½æ•°</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/zzzz11.png" alt=""></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unionElements</span><span class="hljs-params">(<span class="hljs-type">int</span> p,<span class="hljs-type">int</span> q)</span>{<br>    <span class="hljs-type">int</span> pRoot=find(p);<br>    <span class="hljs-type">int</span> <span class="hljs-variable">qRoot</span> <span class="hljs-operator">=</span> find(q);<br>    <span class="hljs-keyword">if</span> (pRoot == qRoot) {<br>       <span class="hljs-keyword">return</span>;<br>     }<br>    <span class="hljs-comment">//æ ¹æ®ä¸¤ä¸ªå…ƒç´ æ‰€åœ¨æ ‘çš„rankä¸åŒåˆ¤æ–­åˆå¹¶çš„æ–¹å‘</span><br>    <span class="hljs-comment">//å°†rankä½çš„é›†åˆåˆå¹¶åˆ°ranké«˜çš„é›†åˆä¸Š,ä»£ç å®ç°é€»è¾‘å¦‚ä¸‹</span><br>    <span class="hljs-keyword">if</span>(rank[pRoot]&lt;rank[qRoot]){<br>        parent[pRoot]=qRoot;<br>    }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(rank[qRoot]&lt;rank[pRoot]){<br>        parent[qRoot]=pRoot;<br>    }<span class="hljs-keyword">else</span>{<br>        <span class="hljs-comment">//å½“ä¸¤ä¸ªçš„rankç›¸åŒæ—¶åˆ™åˆå¹¶åæ•´ä½“é«˜åº¦+1</span><br>        parent[qRoot]=pRoot;<br>        rank[pRoot]+=<span class="hljs-number">1</span>;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h2 id="åŸºäºrankçš„ä¼˜åŒ–å’Œè·¯å¾„å‹ç¼©"><a href="#åŸºäºrankçš„ä¼˜åŒ–å’Œè·¯å¾„å‹ç¼©" class="headerlink" title="åŸºäºrankçš„ä¼˜åŒ–å’Œè·¯å¾„å‹ç¼©"></a>åŸºäºrankçš„ä¼˜åŒ–å’Œè·¯å¾„å‹ç¼©</h2><p>ç›®çš„ï¼šè§£å†³å•é“¾è¡¨çš„é—®é¢˜ï¼Œè¿™ä¸ªè§£å†³æ–¹æ³•å‘ç”Ÿåœ¨findè¿‡ç¨‹ä¸­ï¼Œåœ¨findè¿‡ç¨‹ä¸­å®ç°è·¯å¾„å‹ç¼©åœ¨å‘ä¸Šéå†çš„æ—¶å€™æ‰§è¡Œ<code>parent[p]=parent[parent[p]]</code>  æ•´ä½“ä»£ç å’ŒåŸºäºrankçš„ä»£ç ç›¸åŒ åŸç†å›¾å¦‚ä¸‹ï¼š</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/yyyy11.png" alt=""></p><p>å›¾ç‰‡è§£æï¼šé¦–å…ˆå½“<code>find(4)</code>çš„æ—¶å€™è®©å…¶parentæŒ‡å‘çˆ¶äº²çš„çˆ¶äº²ä¹Ÿå°±æ˜¯2ã€‚å…¶æ¬¡æ„æˆæ ‘â…¡ç„¶åèµ°å‘èŠ‚ç‚¹2è®©å…¶parentæŒ‡å‘çˆ¶äº²çš„çˆ¶äº²æ„æˆæ ‘â…¢ï¼Œå½“p!=parent[p]æ—¶ç»ˆæ­¢æ¡ä»¶æ­¤æ—¶çš„ä¼˜åŒ–å·²ç»å®Œæˆã€‚</p><p><code>find()</code>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java">  <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> p)</span> {<br>        <span class="hljs-keyword">if</span> (p &lt; <span class="hljs-number">0</span> &amp;&amp; p &gt;= parent.length)<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"p is out of bound"</span>);<br>        <span class="hljs-keyword">while</span> (p != parent[p]) {<br>            parent[p] = parent[parent[p]];<br>            p = parent[p];<br>        }<br>        <span class="hljs-keyword">return</span> p;<br>    }<br><br><span class="hljs-comment">//ä¹Ÿå¯ä»¥é€’å½’çš„å®ç°findçš„è·¯å¾„å‹ç¼©</span><br>   <span class="hljs-comment">//findçš„é€’å½’å®ç°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> p)</span> {<br>        <span class="hljs-keyword">if</span> (p &lt; <span class="hljs-number">0</span> &amp;&amp; p &gt;= parent.length)<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"p is out of bound"</span>);<br>        <span class="hljs-keyword">if</span> (p != parent[p]) {<br>            <span class="hljs-comment">//è·¯å¾„å‹ç¼©</span><br>            parent[p] = find(parent[p]);<br>        }<br>        <span class="hljs-keyword">return</span> parent[p];<br>    }<br></code></pre></td></tr></tbody></table></figure><h3 id="ç¨‹åºæºä»£ç -3"><a href="#ç¨‹åºæºä»£ç -3" class="headerlink" title="ç¨‹åºæºä»£ç "></a>ç¨‹åºæºä»£ç </h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Arrays;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnionFind6</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UF</span> {<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] parent;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] rank;  <span class="hljs-comment">//sz[i]è¡¨ç¤ºä»¥iä¸ºæ ¹çš„é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UnionFind6</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span> {<br>        parent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];<br>        rank = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size; i++) {<br>            parent[i] = i;<br>            rank[i] = <span class="hljs-number">1</span>;<br>        }<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getSize</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> parent.length;<br>    }<br><br>    <span class="hljs-comment">//findçš„é€’å½’å®ç°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> p)</span> {<br>        <span class="hljs-keyword">if</span> (p &lt; <span class="hljs-number">0</span> &amp;&amp; p &gt;= parent.length)<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"p is out of bound"</span>);<br>        <span class="hljs-keyword">if</span> (p != parent[p]) {<br>            <span class="hljs-comment">//è·¯å¾„å‹ç¼©</span><br>            parent[p] = find(parent[p]);<br>        }<br>        <span class="hljs-keyword">return</span> parent[p];<br>    }<br>    <span class="hljs-comment">//åˆ¤æ–­på’Œqæ˜¯å¦åœ¨åŒä¸€ä¸ªé›†åˆ</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isConnected</span><span class="hljs-params">(<span class="hljs-type">int</span> p, <span class="hljs-type">int</span> q)</span> {<br>        <span class="hljs-keyword">return</span> find(p) == find(q);<br>    }<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unionElements</span><span class="hljs-params">(<span class="hljs-type">int</span> p, <span class="hljs-type">int</span> q)</span> {<br>        <span class="hljs-type">int</span> <span class="hljs-variable">pRoot</span> <span class="hljs-operator">=</span> find(p);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">qRoot</span> <span class="hljs-operator">=</span> find(q);<br>        <span class="hljs-keyword">if</span> (pRoot == qRoot) {<br>            <span class="hljs-keyword">return</span>;<br>        }<br>        <span class="hljs-comment">//æ ¹æ®ä¸¤ä¸ªå…ƒç´ æ‰€åœ¨æ ‘çš„rankä¸åŒåˆ¤æ–­åˆå¹¶çš„æ–¹å‘</span><br>        <span class="hljs-comment">//å°†rankä½çš„é›†åˆåˆå¹¶åˆ°ranké«˜çš„é›†åˆä¸Š</span><br>        <span class="hljs-keyword">if</span> (rank[pRoot] &lt; rank[qRoot]) {<br>            parent[pRoot] = qRoot;<br>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rank[qRoot] &lt; rank[pRoot]) {<br>            parent[qRoot] = pRoot;<br>        } <span class="hljs-keyword">else</span> {<br>            parent[qRoot] = pRoot;<br>            rank[pRoot] += <span class="hljs-number">1</span>;<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¹¶æŸ¥é›† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®¡ç®—æœºç»„æˆåŸç†</title>
      <link href="/2022/08/31/%E5%A4%A7%E4%B8%89%E4%B8%8A%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/"/>
      <url>/2022/08/31/%E5%A4%A7%E4%B8%89%E4%B8%8A%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¡ç®—æœºç³»ç»Ÿæ¦‚è¿°"><a href="#è®¡ç®—æœºç³»ç»Ÿæ¦‚è¿°" class="headerlink" title="è®¡ç®—æœºç³»ç»Ÿæ¦‚è¿°"></a>è®¡ç®—æœºç³»ç»Ÿæ¦‚è¿°</h1><p>ï¼ˆä¸€ï¼‰è®¡ç®—æœºçš„å‘å±•å†ç¨‹</p><p>ï¼ˆäºŒï¼‰è®¡ç®—æœºçš„ç³»ç»Ÿå±‚æ¬¡ç»“æ„</p><ol><li>è®¡ç®—æœºç³»ç»Ÿçš„åŸºæœ¬ç»„æˆ</li><li>è®¡ç®—æœºç¡¬ä»¶çš„åŸºæœ¬ç»„æˆ</li><li>è®¡ç®—æœºè½¯ä»¶å’Œç¡¬ä»¶çš„å…³ç³»</li><li>è®¡ç®—æœºçš„å·¥ä½œè¿‡ç¨‹</li></ol><p>ï¼ˆä¸‰ï¼‰è®¡ç®—æœºçš„æ€§èƒ½æŒ‡æ ‡</p><p>ååé‡ã€å“åº”æ—¶é—´ã€CPUæ—¶é’Ÿå‘¨æœŸã€ä¸»é¢‘ã€CPIã€CPUæ‰§è¡Œæ—¶é—´ã€MIPSã€MFLOPSã€GFLOPSã€TFLOPSã€PFLOPS</p><h2 id="æ ¸å¿ƒè€ƒç‚¹"><a href="#æ ¸å¿ƒè€ƒç‚¹" class="headerlink" title="æ ¸å¿ƒè€ƒç‚¹"></a>æ ¸å¿ƒè€ƒç‚¹</h2><p>1.å†¯Â·è¯ºä¾æ›¼è®¡ç®—æœºçš„åŸºæœ¬ç‰¹ç‚¹ä¸æŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹</p><p>2.è®¡ç®—æœºçš„å„ç§æ€§èƒ½æŒ‡æ ‡</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/adadad.png" alt=""></p><h2 id="1-1è®¡ç®—æœºçš„åˆ†ç±»"><a href="#1-1è®¡ç®—æœºçš„åˆ†ç±»" class="headerlink" title="1.1è®¡ç®—æœºçš„åˆ†ç±»"></a>1.1è®¡ç®—æœºçš„åˆ†ç±»</h2><blockquote><p>ç”µå­æ¨¡æ‹Ÿè®¡ç®—æœº</p></blockquote><p>  æ¨¡æ‹Ÿè®¡ç®—æœºæ ¹æ®ç›¸ä¼¼åŸç†ï¼Œç”¨ä¸€ç§è¿ç»­å˜åŒ–çš„ <strong>æ¨¡æ‹Ÿé‡</strong> ä½œä¸ºè¢«è¿ç®—å¯¹è±¡ã€‚æ¨¡æ‹Ÿè®¡ç®—æœºä»¥<strong>ç”µå­çº¿è·¯</strong>æ„æˆåŸºæœ¬éƒ¨ä»¶ï¼Œä¸»è¦ç”±è¿ç®—éƒ¨ä»¶ã€æ§åˆ¶éƒ¨ä»¶ã€è¾“å…¥è¾“å‡ºè®¾å¤‡ç­‰ç»„æˆï¼Œæ ¸å¿ƒéƒ¨ä»¶æ˜¯<strong>è¿ç®—æ”¾å¤§å™¨</strong>ã€‚</p><blockquote><p>ç”µå­æ•°å­—è®¡ç®—æœº</p></blockquote><p>â€‹    æ•°å­—è®¡ç®—æœºæ ¹æ®<strong>ç®—ç›˜åŸç†</strong>å‘å±•è€Œæ¥ï¼Œç”¨ç¦»æ•£æ•°å­—è¡¨ç¤ºæ•°é‡çš„å¤§å°ã€‚æ•°å­—è®¡ç®—æœºçš„ä¸»è¦ç‰¹ç‚¹æ˜¯<strong>æŒ‰ä½è¿ç®—</strong>ï¼Œå¹¶ä¸”é€šè¿‡<strong>ç¨‹åºæ§åˆ¶</strong>æ–¹å¼ä¸è¿ç»­åœ°è·³åŠ¨è®¡ç®—ã€‚</p><p><strong>ENIAC å®£å‘Šäººç±»è¿›å…¥ç”µå­è®¡ç®—æœºæ—¶ä»£ã€‚</strong> ä»–æ˜¯ä¸–ç•Œä¸Šç¬¬ä¸€å°å®é™…è¿è¡Œçš„å­˜å‚¨ç¨‹åºå¼ç”µå­è®¡ç®—æœºã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/aa143712.png" alt=""></p><blockquote><p>æ•°å­—è®¡ç®—æœºçš„åˆ†ç±»</p></blockquote><p>æ ¹æ®è®¡ç®—æœºçš„æ•ˆç‡ã€é€Ÿåº¦ä»·æ ¼å’Œè¿è¡Œç»æµæ€§é€‚åº”æ€§åˆ†ä¸ºä¸¤ç±»ï¼šä¸“ç”¨è®¡ç®—æœºå’Œé€šç”¨è®¡ç®—æœº</p><blockquote><p>é€šç”¨è®¡ç®—æœºçš„åˆ†ç±»</p></blockquote><p>è¶…çº§è®¡ç®—æœºã€å¤§å‹æœºã€æœåŠ¡å™¨ã€PCæœºã€å•ç‰‡æœº</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/uyuu144108.png" alt=""></p><h2 id="1-2-è®¡ç®—æœºå‘å±•ç®€å²"><a href="#1-2-è®¡ç®—æœºå‘å±•ç®€å²" class="headerlink" title="1.2 è®¡ç®—æœºå‘å±•ç®€å²"></a>1.2 è®¡ç®—æœºå‘å±•ç®€å²</h2><blockquote><p>è®¡ç®—æœºçš„æ€§èƒ½æŒ‡æ ‡</p></blockquote><p><strong>ååé‡</strong>ï¼šè¡¨å¾ä¸€å°è®¡ç®—æœºåœ¨æŸä¸€æ—¶é—´é—´éš”å†…èƒ½å¤Ÿå¤„ç†çš„ä¿¡æ¯é‡ï¼Œå•ä½æ˜¯å­—èŠ‚/ç§’ï¼ˆB/Sï¼‰</p><p><strong>å“åº”æ—¶é—´</strong>ï¼šè¡¨å¾ä»è¾“å…¥æœ‰æ•ˆåˆ°ç³»ç»Ÿäº§ç”Ÿå“åº”ä¹‹é—´çš„æ—¶é—´åº¦é‡ï¼Œç”¨æ—¶é—´å•ä½æ¥åº¦é‡ å¾®å¦™ï¼ˆ10^-6^Sï¼‰ã€çº³ç§’(10^-9^S)</p><p><strong>åˆ©ç”¨ç‡</strong>ï¼šè¡¨ç¤ºåœ¨ç»™å®šçš„æ—¶é—´é—´éš”å†…ï¼Œç³»ç»Ÿè¢«å®é™…ä½¿ç”¨çš„æ—¶é—´æ‰€å çš„æ¯”ç‡ï¼Œä¸€èˆ¬ç”¨ç™¾åˆ†æ¯”è¡¨ç¤ºã€‚</p><p><strong>å¤„ç†æœºå­—é•¿</strong>ï¼šæŒ‡å¤„ç†æœºè¿ç®—å™¨ä¸­ä¸€æ¬¡èƒ½å¤Ÿå®ŒæˆäºŒè¿›åˆ¶æ•°è¿ç®—çš„ä½æ•°ã€‚å½“å‰å¤„ç†æœºçš„å­—é•¿æœ‰8ä½ã€16ä½ã€32ä½ã€64ä½ã€‚</p><p><strong>å­—é•¿è¶Šé•¿ï¼Œè¡¨ç¤ºè®¡ç®—çš„ç²¾åº¦è¶Šé«˜ã€‚è®¡ç®—æœºçš„æ€§èƒ½æŒ‡æ ‡</strong></p><p><strong>æ€»çº¿å®½åº¦</strong>ï¼šCPUè¿ç®—å™¨ä¸å­˜å‚¨å™¨ä¹‹é—´è¿›è¡Œäº’è¿çš„å†…éƒ¨æ€»çº¿äºŒè¿›åˆ¶ä½æ•°ã€‚</p><p><strong>å­˜å‚¨å™¨å®¹é‡</strong>ï¼šå­˜å‚¨å™¨ä¸­æ‰€æœ‰å­˜å‚¨å•å…ƒçš„æ€»æ•°ç›®ï¼Œé€šå¸¸ç”¨KBã€MBã€GBã€TBæ¥è¡¨ç¤ºã€‚å…¶K=210ï¼ŒM=220ï¼ŒG=230ï¼ŒT=240ï¼ŒB=8ä½ï¼ˆ1ä¸ªå­—èŠ‚  ï¼‰ã€‚å­˜å‚¨å™¨å®¹é‡è¶Šå¤§ï¼Œè®°å¿†çš„äºŒè¿›åˆ¶æ•°è¶Šå¤šã€‚</p><p><strong>å­˜å‚¨å™¨å¸¦å®½</strong>ï¼šå­˜å‚¨å™¨çš„é€Ÿåº¦æŒ‡æ ‡ï¼Œå•ä½æ—¶é—´å†…ä»å­˜å‚¨å™¨è¯»å‡ºçš„äºŒè¿›åˆ¶æ•°ä¿¡æ¯é‡ï¼Œä¸€èˆ¬ç”¨å­—èŠ‚æ•°/ç§’è¡¨ç¤ºã€‚</p><p><strong>ä¸»é¢‘/æ—¶é’Ÿå‘¨æœŸ</strong>ï¼šCPUçš„å·¥ä½œèŠ‚æ‹å—ä¸»æ—¶é’Ÿæ§åˆ¶ï¼Œä¸»æ—¶é’Ÿä¸æ–­äº§ç”Ÿå›ºå®šé¢‘ç‡çš„æ—¶é’Ÿï¼Œä¸»æ—¶é’Ÿçš„é¢‘ç‡ï¼ˆfï¼‰å«CPUçš„ä¸»é¢‘ã€‚åº¦é‡å•ä½æ˜¯MHzï¼ˆå…†èµ«å…¹ï¼‰ã€GHzï¼ˆå‰èµ«å…¹ï¼‰</p><p>ä¸»é¢‘çš„å€’æ•°ç§°ä¸ºCPUçš„æ—¶é’Ÿå‘¨æœŸï¼ˆTï¼‰å³T=1/fï¼Œåº¦é‡å•ä½æ˜¯å¾®ç§’ã€çº³ç§’ã€‚</p><p>CPUçš„æ‰§è¡Œæ—¶é—´ï¼šè¡¨ç¤ºCPUæ‰§è¡Œä¸€æ®µç¨‹åºæ‰€å ç”¨çš„CPUæ—¶é—´ï¼Œç”¨ä¸‹åˆ—å¼å­è®¡ç®—ï¼š</p><p>â€‹     <strong>CPUæ‰§è¡Œæ—¶é—´ =CPUæ—¶é’Ÿå‘¨æœŸæ•°Ã—CPUæ—¶é’Ÿå‘¨æœŸé•¿</strong></p><p>CPIè¡¨ç¤ºæ¯æ¡æŒ‡ä»¤å æ®çš„å‘¨æœŸæ•°ï¼Œå³æ‰§è¡Œä¸€æ¡æŒ‡ä»¤æ‰€éœ€çš„å¹³å‡æ—¶é’Ÿå‘¨æœŸæ•°ã€‚ç”¨ä¸‹å¼è®¡ç®—ï¼š</p><script type="math/tex; mode=display">CPI=\frac{æ‰§è¡ŒæŸæ®µç¨‹åºæ‰€éœ€çš„CPUæ—¶é’Ÿå‘¨æœŸæ•°}{è¯¥ç¨‹åºåŒ…å«çš„æŒ‡ä»¤æ¡æ•°}</script><p>MIPS  è¡¨ç¤ºæ¯æ¡ç™¾ä¸‡æ¡æŒ‡ä»¤æ•°ç›®ï¼Œç”¨ä¸‹å¼è®¡ç®—ï¼š</p><script type="math/tex; mode=display">MIPS=\frac{æŒ‡ä»¤æ¡æ•°}{ç¨‹åºæ‰§è¡Œæ—¶é—´Ã—10^6}=\frac{æ—¶é’Ÿé¢‘ç‡}{CPIÃ—10^6}</script><p>ç¨‹åºæ‰§è¡Œæ—¶é—´Teä¸ºï¼š</p><script type="math/tex; mode=display">ç¨‹åºæ‰§è¡Œæ—¶é—´ä¸ºTe=\frac{æŒ‡ä»¤æ¡æ•°}{MIPÃ—10^6}</script><p>MFLOPS è¡¨ç¤ºæ¯ç§’ç™¾ä¸‡æ¬¡æµ®ç‚¹æ“ä½œæ¬¡æ•°ï¼Œç”¨ä¸‹å¼è®¡ç®—ï¼š</p><script type="math/tex; mode=display">MFLOPS=\frac{ç¨‹åºä¸­çš„æµ®ç‚¹æ•°}{ç¨‹åºæ‰§è¡Œæ—¶é—´Ã—10^6}</script><p>MIPSæ˜¯å•ä½æ—¶é—´å†…æ‰§è¡Œçš„ç™¾ä¸‡æ¡é¡¶ç‚¹æŒ‡ä»¤æ•°ï¼ŒMIPSå€¼è¶Šé«˜è¯´æ˜æå…¶é€Ÿåº¦è¶Šå¿«</p><p>MFLOPSæ˜¯åŸºäºæ“ä½œè€ŒéæŒ‡ä»¤çš„ï¼Œåªèƒ½ç”¨æ¥è¡¡é‡æœºå™¨æµ®ç‚¹æ“ä½œçš„æ€§èƒ½ï¼Œè€Œä¸èƒ½ä½“ç°æœºå™¨çš„æ•´ä½“æ€§èƒ½ã€‚</p><p>TFLOPSè¡¨ç¤ºæ¯ç§’ä¸‡äº¿æ¬¡æµ®ç‚¹æ“ä½œæ¬¡æ•°ï¼Œè¯¥æŠ€æœ¯æŒ‡æ ‡ä¸€èˆ¬åœ¨è¶…çº§è®¡ç®—æœºä¸­ä½¿ç”¨ã€‚</p><h2 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h2><p>ã€ä¾‹1.1ã€‘å¯¹äºä¸€ä¸ªç»™å®šçš„ç¨‹åºï¼Œ<strong><script type="math/tex">I_N</script></strong>è¡¨ç¤ºæ‰§è¡Œç¨‹åºä¸­çš„æŒ‡ä»¤æ€»æ•°ï¼Œ<strong><script type="math/tex">t_{CPU}</script></strong>è¡¨ç¤ºæ‰§è¡Œè¯¥ç¨‹åºæ‰€éœ€çš„<strong>CPU</strong>æ—¶é—´ï¼Œ<strong>T</strong>ä¸ºæ—¶é’Ÿå‘¨æœŸï¼Œ<strong>f</strong>ä¸ºæ—¶é’Ÿé¢‘ç‡ï¼ˆTçš„å€’æ•°ï¼‰ï¼Œ<strong><script type="math/tex">N_C</script></strong>ä¸º<strong>CPU</strong>æ—¶é’Ÿå‘¨æœŸæ•°ã€‚è®¾<strong>CPI</strong>è¡¨ç¤ºæ¯æ¡æŒ‡ä»¤çš„å¹³å‡æ—¶é’Ÿå‘¨æœŸæ•°ï¼Œ<strong>MIPS</strong>è¡¨ç¤ºæ¯ç§’é’Ÿæ‰§è¡Œçš„ç™¾ä¸‡æ¡æŒ‡ä»¤ï¼Œè¯·å†™å‡ºå¦‚ä¸‹å››ç§å‚æ•°çš„è¡¨è¾¾å¼ï¼š</p><script type="math/tex; mode=display">(1) t_{CPU}     (2)CPI      (3)MIPS     (4)N_C</script><blockquote><p>è§£ï¼šæœ‰é¢˜å¯çŸ¥</p></blockquote><script type="math/tex; mode=display">(1)t_{CPU}=N_{C}Ã—T=N_CÃ·f=I_NÃ—CPIÃ—T=\sum_{i=1}^{n}(CPI~i~Ã—\frac{I_i}{I_N})</script><script type="math/tex; mode=display">(2) CPI=\frac{N_C}{I_N}=\sum_{i=1}^{n}(CPI_iÃ—\frac{I_i}{I_N}) --- CPI_iè¡¨ç¤ºiç§æŒ‡ä»¤æ‰€éœ€å¹³å‡æ—¶é’Ÿå‘¨æœŸæ•°</script><script type="math/tex; mode=display">(3)MIPS=\frac{I_N}{t_{CPU}}Ã—10^{-6}=\frac{f}{CPIÃ—10^6}----nä¸ºæŒ‡ä»¤ç§ç±»</script><script type="math/tex; mode=display">\frac{1}{MIPS}Ã—10^{-6}=\frac{t_{CPU}}{I_N}=\frac{CPI}{f}=CPIÃ—T-----è¡¨ç¤ºæ¯æ¡æŒ‡ä»¤çš„å¹³å‡æ‰§è¡Œæ—¶é—´</script><script type="math/tex; mode=display">ï¼ˆ4ï¼‰N_C=\sum_{i=1}^{n}(CPI_iÃ—I_i) -----I_iè¡¨ç¤ºiç§æŒ‡ä»¤åœ¨ç¨‹åºä¸­æ‰§è¡Œçš„æ¬¡æ•°</script><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/å±å¹•æˆªå›¾ 2022-08-31 161257.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/20220831161503.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/20220831161746.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/20220831161954.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/20220831162025.png" alt=""></p><blockquote><p>CPUçš„æ—¶é’Ÿé¢‘ç‡è¶Šé«˜ï¼Œæœºå™¨çš„é€Ÿåº¦å°±è¶Šå¿«ï¼Œå¯¹å—?</p></blockquote><p>â€‹     åœ¨å…¶ä»–å› ç´ ä¸å˜çš„æƒ…å†µä¸‹ï¼ŒCPUçš„æ—¶é’Ÿé¢‘ç‡è¶Šé«˜ï¼Œæœºå™¨çš„é€Ÿåº¦è‚¯å®šè¶Šå¿«ã€‚ä½†æ˜¯ï¼Œ  ç¨‹åºæ‰§è¡Œçš„é€Ÿåº¦é™¤äº†ä¸CPUçš„é€Ÿåº¦æœ‰å…³å¤–ï¼Œè¿˜ä¸å­˜å‚¨å™¨å’ŒIOæ¨¡å—çš„å­˜å–é€Ÿåº¦ã€æ€»çº¿çš„ä¼ è¾“é€Ÿåº¦ã€Cacheçš„è®¾è®¡ç­–ç•¥ç­‰æœ‰å¾ˆå¤§å…³ç³»ã€‚å› æ­¤ï¼Œæœºå™¨çš„é€Ÿåº¦ä¸æ˜¯åªç”±CPUçš„æ—¶é’Ÿé¢‘ç‡å†³å®šçš„.</p><blockquote><p>æ‰§è¡Œæ—¶é—´(å“åº”æ—¶é—´)ä¸CPIæ˜¯ä»€ä¹ˆå…³ç³»?</p></blockquote><p>â€‹    é€šå¸¸ï¼Œä¸€æ¡ç‰¹å®šæŒ‡ä»¤çš„CPIæ˜¯ä¸€ä¸ªç¡®å®šçš„å€¼ï¼Œè€ŒæŸä¸ªç¨‹åºçš„CPIæ˜¯ä¸€ä¸ªå¹³å‡å€¼ã€‚ä¸€ä¸ªç¨‹åºçš„æ‰§è¡Œæ—¶é—´å–å†³äºè¯¥ç¨‹åºæ‰€åŒ…å«çš„æŒ‡ä»¤æ•°ã€CPIå’Œæ—¶é’Ÿå‘¨æœŸã€‚åœ¨æŒ‡ä»¤æ•°å’Œæ—¶é’Ÿå‘¨æœŸä¸€å®šçš„æƒ…å†µä¸‹ï¼ŒCPIè¶Šå¤§ï¼Œæ‰§è¡Œæ—¶é—´è¶Šé•¿.</p><h2 id="æ•°å­—è®¡ç®—æœºåŸºæœ¬ç»„æˆ"><a href="#æ•°å­—è®¡ç®—æœºåŸºæœ¬ç»„æˆ" class="headerlink" title="æ•°å­—è®¡ç®—æœºåŸºæœ¬ç»„æˆ"></a>æ•°å­—è®¡ç®—æœºåŸºæœ¬ç»„æˆ</h2><p>æ§åˆ¶å™¨ï¼šäººçš„å¤§è„‘çš„æ“ä½œæ§åˆ¶åŠŸèƒ½</p><p>è¿ç®—å™¨ï¼šäººçš„å¤§è„‘çš„è®¡ç®—åŠŸèƒ½</p><p>å­˜å‚¨å™¨ï¼šäººçš„å¤§è„‘çš„è®°å¿†åŠŸèƒ½</p><p>è¾“å…¥è®¾å¤‡ï¼šäº¤äº’æ¥å£ï¼Œç¬”</p><p>è¾“å‡ºè®¾å¤‡ï¼šäº¤äº’æ¥å£ï¼Œçº¸</p><blockquote><p>å†¯è¯ºä¾æ›¼è®¡ç®—æœº</p></blockquote><p>â€‹    ï¼ˆ1ï¼‰è®¡ç®—æœºç”±è¿ç®—å™¨ã€å­˜å‚¨å™¨ã€æ§åˆ¶å™¨ã€è¾“å…¥è®¾å¤‡å’Œè¾“å‡ºè®¾å¤‡äº”å¤§éƒ¨ä»¶ç»„æˆã€‚</p><p>â€‹    ï¼ˆ2ï¼‰æŒ‡ä»¤å’Œæ•°æ®ä»¥åŒç­‰çš„åœ°ä½ä¿å­˜äºå­˜å‚¨å™¨å†…ï¼Œå¹¶å¯æŒ‰ç…§åœ°å€è®¿é—®å­˜å‚¨å™¨ã€‚</p><p>â€‹    ï¼ˆ3ï¼‰æŒ‡ä»¤å’Œæ•°æ®å‡ç”¨äºŒè¿›åˆ¶ä»£ç è¡¨ç¤ºã€‚</p><p>â€‹    ï¼ˆ4ï¼‰æŒ‡ä»¤ç”± æ“ä½œç å’Œåœ°å€ç ç»„æˆï¼Œæ“ä½œç ç”¨æ¥è¡¨ç¤ºæ“ä½œçš„æ€§è´¨ï¼ˆæ˜¯åŠ æ³•è¿˜æ˜¯å‡æ³•ï¼Œæˆ–è€…å…¶ä»–æ“ä½œï¼‰ï¼Œåœ°å€ç ç”¨æ¥è¡¨ç¤ºæ“ä½œæ•°åœ¨å­˜å‚¨å™¨ä¸­çš„ä½ç½®ã€‚</p><p>â€‹    ï¼ˆ5ï¼‰æŒ‡ä»¤åœ¨å­˜å‚¨å™¨å†…æŒ‰é¡ºåºå­˜æ”¾ã€‚é€šå¸¸æŒ‡ä»¤æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œåœ¨ç‰¹å®šæ¡ä»¶ä¸‹ï¼Œå¯æ ¹æ®è¿ç®—ç»“æœæˆ–è®¾å®šçš„æ¡ä»¶æ”¹å˜æ‰§è¡Œé¡ºåº</p><p>â€‹    ï¼ˆ6ï¼‰æœºå™¨ä»¥è¿ç®—å™¨ä¸ºä¸­å¿ƒï¼Œ  è¾“å…¥/è¾“å‡ºè®¾å¤‡ä¸å­˜å‚¨å™¨ä¹‹é—´çš„æ•°æ®ä¼ é€é€šè¿‡è¿ç®—å™¨å®Œæˆ</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/20220831163834.png" alt=""></p><blockquote><p>ï¼ˆ1ï¼‰å­˜å‚¨å™¨</p></blockquote><p>â€‹    å­˜å‚¨å™¨åˆ†ä¸ºä¸»å­˜å‚¨å™¨ï¼ˆç®€ç§°ä¸»å­˜ï¼Œ  ä¹Ÿç§°å†…å­˜å‚¨å™¨ï¼‰å’Œè¾…åŠ©å­˜å‚¨å™¨ï¼ˆç®€ç§°è¾…å­˜ï¼Œä¹Ÿç§°å¤–å­˜å‚¨å™¨)ã€‚CPUèƒ½å¤Ÿ<strong>ç›´æ¥è®¿é—®</strong>çš„å­˜å‚¨å™¨æ˜¯ä¸»å­˜å‚¨å™¨ã€‚<strong>ä¸»å­˜å‚¨å™¨</strong>æ˜¯å­˜æ”¾ç¨‹åºå’Œæ•°æ®çš„éƒ¨ä»¶ã€‚</p><p>â€‹    <strong>è¾…åŠ©å­˜å‚¨å™¨</strong>ç”¨äºå¸®åŠ©ä¸»å­˜å‚¨å™¨è®°å¿†æ›´å¤šçš„ä¿¡æ¯ï¼Œè¾…åŠ©å­˜å‚¨å™¨ä¸­çš„ä¿¡æ¯å¿…é¡»è°ƒå…¥ä¸»å­˜åï¼Œæ‰èƒ½è¢«CPUè®¿é—®</p><blockquote><p>ï¼ˆ2ï¼‰æ§åˆ¶å™¨</p></blockquote><p>â€‹    æŒ‡ä»¤å’Œç¨‹åºï¼šæŒ‡ä»¤çš„å½¢å¼ï¼ˆæ“ä½œå’Œåœ°å€ç ã€å­˜å‚¨ç¨‹åºçš„æ¦‚å¿µã€æŒ‡ä»¤ä¸­ç¨‹åºå’Œæ•°æ®çš„å­˜æ”¾ã€æŒ‡ä»¤ç³»ç»Ÿã€‚</p><p>â€‹           æ“ä½œç â€”â€”â€”â€”â€”â€”â€”-åœ°å€ç </p><p>â€‹    <strong>æ“ä½œç </strong>æŒ‡å‡ºæŒ‡ä»¤æ‰€è¿›è¡Œçš„æ“ä½œï¼Œå¦‚åŠ ã€å‡ã€ä¹˜ã€é™¤ã€å–æ•°ã€  å­˜æ•°ç­‰ã€‚</p><p>â€‹    <strong>åœ°å€ç </strong>è¡¨ç¤ºå‚åŠ è¿ç®—çš„æ•°æ®åº”ä»å­˜å‚¨å™¨çš„å“ªä¸ªå•å…ƒä¸­å–æ¥ï¼Œæˆ–è¿ç®—çš„ç»“æœåº”è¯¥å­˜åˆ°å“ªä¸ªå•å…ƒä¸­å»ã€‚</p><p>â€‹    <strong>æŒ‡ä»¤</strong>çš„æ“ä½œç å’Œåœ°å€ç ç”¨äºŒè¿›åˆ¶ä»£ç æ¥è¡¨ç¤ºã€‚</p><blockquote><p>æŒ‡ä»¤å’Œæ•°æ®å­˜å‚¨</p></blockquote><p>â€‹    å­˜å‚¨å™¨æ—¢å¯å­˜æ”¾æ•°æ®ä¹Ÿå¯å­˜æ”¾æŒ‡ä»¤ï¼Œå°†ç¨‹åº(æŒ‡ä»¤åºåˆ—)å­˜æ”¾åˆ°å­˜å‚¨å™¨ä¸­ç§°ä¸ºå­˜å‚¨ç¨‹åºï¼Œè€Œæ§åˆ¶å™¨  ä¾æ®å­˜å‚¨çš„ç¨‹åºæ¥æ§åˆ¶-åè°ƒå®Œæˆè®¡ç®—ä»»åŠ¡å«åšç¨‹åºæ§åˆ¶ã€‚</p><p><strong>æ§åˆ¶å™¨çš„ä»»åŠ¡</strong>ï¼š æŒ‰ç…§é¡ºåºä¸€æ¡ä¸€æ¡çš„æ‰§è¡ŒæŒ‡ä»¤ï¼ˆå–æŒ‡ä»¤ï¼ŒæŒ‡ä»¤è¯‘ç ã€æ‰§è¡ŒæŒ‡ä»¤ï¼‰ã€‚å–å€å‘¨æœŸå’Œæ‰§è¡Œå‘¨æœŸã€‚ä¹Ÿå¯ä»¥åŒºåˆ†å¼€é‚£äº›æ˜¯æŒ‡ä»¤å­—ï¼Œé‚£äº›æ˜¯æ•°æ®å­—ã€‚å–æŒ‡å‘¨æœŸä¸­ä»å†…å­˜è¯»å‡ºçš„ä¿¡æ¯æµæ˜¯æŒ‡ä»¤æµï¼Œå®ƒæµå‘æ§åˆ¶å™¨ï¼›è€Œåœ¨æ‰§è¡Œå™¨å‘¨æœŸä¸­ä»å†…å­˜è¯»å‡ºçš„ä¿¡æ¯æµæ˜¯æ•°æ®æµï¼Œå®ƒç”±å†…å­˜æµå‘è¿ç®—å™¨ã€‚</p><h1 id="ä½œä¸š"><a href="#ä½œä¸š" class="headerlink" title="ä½œä¸š"></a>ä½œä¸š</h1><blockquote><p>1.æ¯”è¾ƒç”µå­æ•°å­—è®¡ç®—æœºå’Œç”µå­æ¨¡æ‹Ÿè®¡ç®—æœºçš„ç‰¹ç‚¹ã€‚</p></blockquote><p>ç”µå­æ•°å­—è®¡ç®—æœºï¼šæ•°æ®è¡¨å¼ä¸ºæ•°å­—0å’Œ1 ï¼Œè®¡ç®—æ–¹å¼ä¸º æ•°å­—è®¡æ•° æ§åˆ¶æ–¹å¼ä¸ºï¼šç¨‹åºæ§åˆ¶ ç²¾åº¦é«˜ï¼Œæ•°æ®å­˜å‚¨é‡å¤§ï¼Œé€»è¾‘åˆ¤æ–­èƒ½åŠ›å¼ºã€‚</p><p>ç”µå­æ¨¡æ‹Ÿè®¡ç®—æœºï¼šæ•°æ®è¡¨ç¤ºæ–¹å¼ä¸ºç”µå‹ï¼Œè®¡ç®—æ–¹å¼ä¸ºç”µå‹ç»„åˆå’Œæµ‹é‡å€¼ï¼Œæ§åˆ¶æ–¹å¼ä¸ºï¼šç›˜ä¸Šè¿çº¿ï¼Œç²¾åº¦ä½ã€æ•°æ®å­˜å‚¨é‡å°ã€æ— é€»è¾‘åˆ¤æ–­èƒ½åŠ›ã€‚</p><blockquote><p>2.å†¯è¯ºä¾æ›¼è®¡ç®—æœºçš„ä¸»è¦è®¾è®¡æ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿå®ƒåŒ…æ‹¬é‚£äº›ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼Ÿ</p></blockquote><p>ä¸»è¦è®¾è®¡æ€æƒ³ï¼š</p><p>â‘ é‡‡ç”¨äºŒçº§åˆ¶è¡¨ç¤ºæ•°æ®å’ŒæŒ‡ä»¤ï¼ŒæŒ‡ä»¤ç”±æ“ä½œç å’Œåœ°å€ç ç»„æˆã€‚</p><p>â‘¡å­˜å‚¨ç¨‹åºï¼Œç¨‹åºæ§åˆ¶ï¼šå°†ç¨‹åºå’Œæ•°æ®å­˜æ”¾åœ¨å­˜å‚¨å™¨ä¸­ï¼Œå¹¶å¯æŒ‰ç…§åœ°å€è®¿é—®å­˜å‚¨å™¨å®Œæˆè®¡ç®—ã€‚</p><p>â‘¢æŒ‡ä»¤åœ¨å­˜å‚¨å™¨å†…æŒ‰é¡ºåºå­˜æ”¾ã€‚é€šå¸¸æŒ‡ä»¤æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œåœ¨ç‰¹å®šæ¡ä»¶ä¸‹ï¼Œå¯æ ¹æ®è¿ç®—ç»“æœæˆ–è®¾å®šçš„æ¡ä»¶æ”¹å˜æ‰§è¡Œé¡ºåº</p><p>â‘£æœºå™¨ä»¥è¿ç®—å™¨ä¸ºä¸­å¿ƒï¼Œ  è¾“å…¥/è¾“å‡ºè®¾å¤‡ä¸å­˜å‚¨å™¨ä¹‹é—´çš„æ•°æ®ä¼ é€é€šè¿‡è¿ç®—å™¨å®Œæˆ</p><p>ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼šå­˜å‚¨å™¨ã€è¿ç®—å™¨ã€æ§åˆ¶å™¨ã€è¾“å…¥è®¾å¤‡ã€è¾“å‡ºè®¾å¤‡</p><blockquote><p>3.ä»€ä¹ˆæ˜¯å­˜å‚¨å®¹é‡ï¼Ÿä»€ä¹ˆæ˜¯å•å…ƒåœ°å€ï¼Ÿä»€ä¹ˆæ˜¯æ•°æ®å­—ï¼Ÿä»€ä¹ˆæ˜¯æŒ‡ä»¤å­—ï¼Ÿ</p></blockquote><p><strong>å­˜å‚¨å®¹é‡</strong>ï¼šå­˜å‚¨å™¨æ‰€æœ‰å­˜å‚¨å•å…ƒçš„æ€»æ•°ç§°ä¸ºå­˜å‚¨å™¨çš„å­˜å‚¨å®¹é‡ï¼Œé€šå¸¸ç”¨å•ä½KBã€MBæ¥è¡¨ç¤ºå­˜å‚¨å®¹é‡è¶Šå¤§ï¼Œè¡¨ç¤ºè®¡ç®—æœºè®°å¿†å­˜å‚¨çš„ä¿¡æ¯è¶Šå¤š</p><p><strong>å•å…ƒåœ°å€</strong>ï¼šï¼š å•å…ƒåœ°å€ç®€ç§°åœ°å€ï¼Œ åœ¨å­˜å‚¨å™¨ä¸­æ¯ä¸ªå­˜å‚¨å•å…ƒéƒ½æœ‰å”¯ä¸€çš„åœ°å€ç¼–å·ï¼Œ ç§°ä¸ºå•å…ƒåœ°<br>å€ã€‚</p><p><strong>æ•°æ®å­—</strong>ï¼šæŸå­—ä»£è¡¨è¦å¤„ç†çš„æ•°æ®</p><p><strong>æŒ‡ä»¤å­—</strong>ï¼šæŸå­—ä¸ºä¸€æ¡æŒ‡ä»¤</p><blockquote><p>6.ä»€ä¹ˆæ˜¯æŒ‡ä»¤ï¼Ÿä»€ä¹ˆæ˜¯ç¨‹åºï¼Ÿ</p></blockquote><p>æ¯ä¸€ä¸ªåŸºæœ¬æ“ä½œå°±å«åšæ¡æŒ‡ä»¤ï¼Œè€Œè§£ç®—æŸä¸€é—®é¢˜çš„ä¸€ä¸²æŒ‡ä»¤åºåˆ—å«åšè¯¥é—®é¢˜çš„è®¡ç®—ç¨‹åºç®€ç§°ä¸ºç¨‹åº</p><blockquote><p>7.æŒ‡ä»¤å’Œæ•°æ®å‡å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œè®¡ç®—æœºå¦‚ä½•åŒºåˆ†ä»–ä»¬æ˜¯æŒ‡ä»¤è¿˜æ˜¯æ•°æ®ï¼Ÿ</p></blockquote><p>åœ¨å–æŒ‡å‘¨æœŸä¸­ä»å­˜å‚¨å™¨è¯»å‡ºçš„ä¿¡æ¯å³æŒ‡ä»¤ä¿¡æ¯ï¼Œ è€Œåœ¨æ‰§è¡Œå‘¨æœŸä¸­ä»å­˜å‚¨å™¨ä¸­è¯»å‡ºçš„ä¿¡æ¯å³ä¸ºæ•°æ®ä¿¡æ¯</p><blockquote><p>8.ä»€ä¹ˆæ˜¯å†…å­˜ï¼Ÿä»€ä¹ˆæ˜¯å¤–å­˜ï¼Ÿä»€ä¹ˆæ˜¯CPUï¼Ÿä»€ä¹ˆæ˜¯é€‚é…å™¨ï¼Ÿç®€è¿°å…¶åŠŸèƒ½ã€‚</p></blockquote><p> ä¸€èˆ¬ç”±åŠå¯¼ä½“å­˜å‚¨å™¨æ„æˆï¼Œ è£…åœ¨åº•ç‰ˆä¸Šï¼Œ å¯ç›´æ¥å’Œ CPU äº¤æ¢ä¿¡æ¯çš„å­˜å‚¨å™¨ç§°ä¸ºå†…å­˜å‚¨å™¨ï¼Œ ç®€ç§°å†…å­˜ã€‚</p><p>å¤–å­˜ï¼š ä¸ºäº†æ‰©å¤§å­˜å‚¨å®¹é‡ï¼Œ åˆä¸ä½¿æˆæœ¬æœ‰å¾ˆå¤§çš„æé«˜ï¼Œ åœ¨è®¡ç®—æœºä¸­è¿˜é…å¤‡äº†å­˜å‚¨å®¹é‡æ›´å¤§çš„<br>ç£ç›˜å­˜å‚¨å™¨å’Œå…‰ç›˜å­˜å‚¨å™¨ï¼Œ ç§°ä¸ºå¤–å­˜å‚¨å™¨ï¼Œ ç®€ç§°å¤–å­˜ã€‚ å¤–å­˜å¯å­˜å‚¨å¤§é‡çš„ä¿¡æ¯ï¼Œ è®¡ç®—æœºéœ€è¦ä½¿ç”¨æ—¶ï¼Œ å†è°ƒå…¥å†…å­˜ã€‚</p><p>CPUï¼š åŒ…æ‹¬è¿ç®—å™¨å’Œæ§åˆ¶å™¨ã€‚ åŸºæœ¬åŠŸèƒ½ä¸ºï¼š æŒ‡ä»¤æ§åˆ¶ã€ æ“ä½œæ§åˆ¶ã€æ—¶é—´æ§åˆ¶ã€ æ•°æ®åŠ å·¥ã€‚</p><p>é€‚é…å™¨ï¼š è¿æ¥ä¸»æœºå’Œå¤–è®¾çš„éƒ¨ä»¶ï¼Œ èµ·ä¸€ä¸ªè½¬æ¢å™¨çš„ä½œç”¨ï¼Œ ä»¥ä½¿ä¸»æœºå’Œå¤–è®¾åè°ƒå·¥ä½œã€‚</p><blockquote><p>10.è¯´æ˜è½¯ä»¶çš„å‘å±•çš„æ¼”å˜è¿‡ç¨‹</p></blockquote><p> æ±‡ç¼–è¯­è¨€çš„å‘å±•  æ‰‹ç¼–ç¨‹åºâ€”&gt;æ±‡ç¼–è¯­è¨€ç¨‹åºâ€”â€”&gt;é«˜çº§ç¨‹åº</p><p>ç³»ç»Ÿè½¯ä»¶çš„å‘å±•ï¼šæ“ä½œç³»ç»Ÿâ€”â€”â€”-&gt;æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ</p><blockquote><p>12.ä¸ºä»€ä¹ˆè½¯ä»¶èƒ½å¤Ÿè½¬æ¢ä¸ºç¡¬ä»¶ï¼Œç¡¬ä»¶èƒ½å¤Ÿè½¬æ¢ä¸ºè½¯ä»¶ï¼Ÿå®ç°è¿™ç§è½¬æ¢çš„åª’ä»‹æ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><p>â€‹    éšç€å¤§è§„æ¨¡é›†æˆç”µè·¯æŠ€æœ¯çš„å‘å±•å’Œè½¯ä»¶ç¡¬åŒ–çš„è¶‹åŠ¿,è¦æ˜ç¡®åˆ’åˆ†è®¡ç®—æœºç³»ç»Ÿè½¯ã€ç¡¬ä»¶ç•Œé™å·²ç»æ˜¾å¾—æ¯”è¾ƒå›°éš¾äº†,å› ä¸ºä»»ä½•æ“ä½œå¯ä»¥ç”±è½¯ä»¶æ¥å®ç°,ä¹Ÿå¯ä»¥ç”±è½¯ä»¶æ¥å®Œæˆ,å¯¹äºæŸä¸€æœºå™¨åŠŸèƒ½é‡‡ç”¨ç¡¬ä»¶æ–¹æ¡ˆè¿˜æ˜¯è½¯ä»¶æ–¹æ¡ˆ,å–å†³äºä»·æ ¼ã€é€Ÿåº¦ã€å¯é æ€§ã€å­˜å‚¨å®¹é‡ã€å˜æ›´å‘¨æœŸç­‰å› ç´ ã€‚</p><blockquote><p>13.CPUçš„æ€§èƒ½æŒ‡æ ‡æœ‰å“ªäº›ï¼Ÿå…¶æ¦‚å¿µæ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><p>cpuçš„æ€§èƒ½æŒ‡æ ‡æœ‰ä¸»é¢‘ã€å¤–é¢‘ã€å€é¢‘ç³»æ•°å’Œåˆ¶ç¨‹æŠ€æœ¯</p><p>ä¸»é¢‘ï¼šCPUçš„æ—¶é’Ÿé¢‘ç‡ï¼Œä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå®Œæˆçš„æŒ‡ä»¤æ•°æ˜¯å›ºå®šçš„ï¼Œä¸»é¢‘è¶Šé«˜ï¼ŒCPUçš„é€Ÿåº¦ä¹Ÿå°±è¶Šå¿«</p><p>å¤–é¢‘ï¼šå¤–é¢‘æ˜¯CPUçš„åŸºå‡†é¢‘ç‡ï¼ŒCPUçš„å¤–é¢‘å†³å®šç€æ•´å—ä¸»æ¿çš„è¿è¡Œé€Ÿåº¦ã€‚</p><p>å€é¢‘ç³»æ•°ï¼šå€é¢‘ç³»æ•°æ˜¯æŒ‡CPUä¸»é¢‘ä¸å¤–é¢‘ä¹‹é—´çš„ç›¸å¯¹æ¯”ä¾‹å…³ç³»ã€‚åœ¨ç›¸åŒçš„å¤–é¢‘ä¸‹ï¼Œå€é¢‘è¶Šé«˜CPUçš„é¢‘ç‡ä¹Ÿè¶Šé«˜ã€‚</p><p>åˆ¶ç¨‹æŠ€æœ¯ï¼šåˆ¶ç¨‹è¶Šå°å‘çƒ­é‡è¶Šå°ï¼Œè¿™æ ·å°±å¯ä»¥é›†æˆæ›´å¤šçš„æ™¶ä½“ç®¡ï¼ŒCPUæ•ˆç‡ä¹Ÿå°±æ›´é«˜</p><blockquote><p>è®¡ç®—é¢˜1</p></blockquote><p>è®¾æœ‰ä¸»é¢‘24MHz çš„CPUï¼Œå¹³å‡æ¯æ¡æŒ‡ä»¤çš„æ‰§è¡Œæ—¶é—´ä¸º2ä¸ªæœºå™¨å‘¨æœŸï¼Œæ¯ä¸ªæœºå™¨å‘¨æœŸç”±2ä¸ªæ—¶é’Ÿå‘¨æœŸç»„æˆè¯•æ±‚:</p><p>1ï¼‰æœºå™¨çš„å·¥ä½œé€Ÿåº¦ã€‚</p><p>2ï¼‰å‡å¦‚æ¯ä¸ªæŒ‡ä»¤å‘¨æœŸä¸­æœ‰ä¸€ä¸ªæ˜¯è®¿å­˜å‘¨æœŸï¼Œéœ€æ’å…¥2ä¸ªæ—¶é’Ÿå‘¨æœŸçš„ç­‰å¾…æ—¶é—´ï¼Œæ±‚æœºå™¨çš„å·¥ä½œé€Ÿåº¦ã€‚</p><blockquote><p>è®¡ç®—é¢˜äºŒ</p></blockquote><p>ç”¨ä¸€ä¸ªæ—¶é’Ÿé¢‘ç‡ä¸º40MHzçš„å¤„ç†å™¨æ‰§è¡Œæ ‡å‡†æµ‹è¯•ç¨‹åºï¼Œå®ƒæ‰€åŒ…å«çš„æ··åˆæŒ‡ä»¤æ•°å’Œå“åº”æ‰€éœ€çš„æ—¶é’Ÿå‘¨æœŸè§è¡¨1-10ã€‚è¯•æ±‚å‡ºæœ‰æ•ˆçš„CPIã€MIPSé€Ÿç‡å’Œç¨‹åºçš„æ‰§è¡Œæ—¶é—´ï¼ˆå‡è®¾æœ‰Næ¡æŒ‡ä»¤)ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/20220831190857.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> è®¡ç»„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç»„ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çº¿æ®µæ ‘å­¦ä¹ </title>
      <link href="/2022/08/30/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
      <url>/2022/08/30/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/%E7%BA%BF%E6%AE%B5%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="çº¿æ®µæ ‘"><a href="#çº¿æ®µæ ‘" class="headerlink" title="çº¿æ®µæ ‘"></a>çº¿æ®µæ ‘</h1><p>â€‹     ç”¨é€”ï¼šçº¿æ®µæ ‘ä¸»è¦ç”¨æ¥æœå¯»ä¸€ä¸ªåŒºé—´é‡Œçš„æœ€å¤§æˆ–è€…æœ€å°å€¼äº¦æˆ–è€…ä¸€ä¸ªåŒºé—´å†…çš„æ•°æ®ä¹‹å’Œï¼Œçº¿æ®µæ ‘æ˜¯ä¸€ç§<a href="https://baike.baidu.com/item/äºŒå‰æœç´¢æ ‘/7077855?fromModule=lemma_inlink">äºŒå‰æœç´¢æ ‘</a>ï¼Œä¸<a href="https://baike.baidu.com/item/åŒºé—´æ ‘/5772433?fromModule=lemma_inlink">åŒºé—´æ ‘</a>ç›¸ä¼¼ï¼Œå®ƒå°†ä¸€ä¸ªåŒºé—´åˆ’åˆ†æˆä¸€äº›å•å…ƒåŒºé—´ï¼Œæ¯ä¸ªå•å…ƒåŒºé—´å¯¹åº”çº¿æ®µæ ‘ä¸­çš„ä¸€ä¸ªå¶ç»“ç‚¹ï¼Œä½¿ç”¨çº¿æ®µæ ‘å¯ä»¥å¿«é€Ÿçš„æŸ¥æ‰¾æŸä¸€ä¸ªèŠ‚ç‚¹åœ¨è‹¥å¹²æ¡çº¿æ®µä¸­å‡ºç°çš„æ¬¡æ•°ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(logN)ã€‚è€Œæœªä¼˜åŒ–çš„ç©ºé—´å¤æ‚åº¦æœª2Nï¼Œå®é™…åº”ç”¨æ—¶ä¸€èˆ¬è¿˜è¦å¼€4Nçš„æ•°ç»„å·²å…è¶Šç•Œï¼Œå› æ­¤æœ‰æ—¶å€™éœ€è¦ç¦»æ•£åŒ–è®©ç©ºé—´å‹ç¼©ã€‚</p><h2 id="1-çº¿æ®µæ ‘çš„åŸç†"><a href="#1-çº¿æ®µæ ‘çš„åŸç†" class="headerlink" title="1.çº¿æ®µæ ‘çš„åŸç†"></a>1.çº¿æ®µæ ‘çš„åŸç†</h2><ol><li><code>E[]tree</code>  çº¿æ®µæ ‘   <code>E[] data</code>çº¿æ®µæ ‘çš„ç§æœ‰æ•°ç»„ å­˜å‚¨ä¼ è¿›æ¥çš„æ•°ç»„  <code>Merger&lt;E&gt; merger</code> ä¸€ä¸ªå‡½æ•°æ¥å£ ç”¨äºå¯¹çº¿æ®µæ ‘æ‰¾åˆ°çš„ä¸€ä¸ªåŒºé—´å†…çš„å€¼è¿›è¡Œæ¯”è¾ƒã€‚</li><li><code>public SegmentTree(E[]arr,Merger&lt;E&gt;merger)</code> å¯¹ä¼ å…¥çš„æ•°ç»„è¿›è¡Œåˆå§‹åŒ–åˆ°<code>data</code>æ•°ç»„ä¸­,å¯¹æ¥å£ä¹Ÿè¿›è¡Œåˆå§‹åŒ– ç„¶ååœ¨è°ƒç”¨<code>buildSegmentTree()</code> å‡½æ•°ã€‚</li><li><code>buildSegmentTree(int treeIndex,int l,int r)</code>è¯¥å‡½æ•°æ˜¯å»ºé€ çº¿æ®µæ ‘</li><li><code>E get(int index)</code> å¾—åˆ°ä¸‹æ ‡ä¸ºindexçš„å€¼</li><li><code>getSize()</code> å¾—åˆ°ä¼ å…¥æ•°ç»„çš„å¤§å°</li><li><code>leftChild(index) rightChild</code> å¾—åˆ°ä¸‹æ ‡ä¸ºindexçš„å·¦å³å­©å­çš„ä¸‹æ ‡</li><li><code>query(int queryL,int queryR)</code> å…¬å…±æ¥å£è°ƒç”¨é‡æ„å‡½æ•°<code>query(treeIndex,l,R,quaryL,quaryR)</code> å‡½æ•°</li><li><code>query(int treeIndex, int l, int r, int queryL, int queryR)</code> è¯¥å‡½æ•°å®ç°æŸ¥æ‰¾ä¸€ä¸ªåŒºé—´å†…å…ƒç´ å¹¶è¿›è¡ŒMergeræ“ä½œï¼›</li><li><code>set(int index,E e)</code> è¯¥å‡½æ•°å¯»æ‰¾ä¸‹æ ‡ä¸ºindexçš„å€¼å¹¶å¯¹å…¶è¿›è¡Œä¿®æ”¹æ“ä½œé€’å½’è°ƒç”¨å…¶ç§æœ‰å‡½æ•°<code>set(int treeIndex, int l, int r, int index, E e)</code> </li><li><code>set(int treeIndex, int l, int r, int index, E e)</code> å½“ä¿®æ”¹å…ƒç´ æˆåŠŸå å¯¹ä¸€ä¸ªåŒºé—´å†…çš„å…ƒç´ è¿›è¡ŒMergeræ“ä½œå®ç°åŠ¨æ€æ“ä½œ</li></ol><ul><li><p>çº¿æ®µæ ‘çš„åŸç†ï¼šçº¿æ®µæ ‘é™¤äº†æœ€åä¸€å±‚ä¹‹å¤–ï¼Œæ˜¯ä¸€é¢—æ»¡<a href="https://so.csdn.net/so/search?q=äºŒå‰æ ‘&amp;spm=1001.2101.3001.7020">äºŒå‰æ ‘</a>ï¼Œå‡è®¾åŒºé—´ä¸­å­˜åœ¨nä¸ªæ•°æ®ï¼Œåˆ™å€’æ•°ç¬¬äºŒå±‚èŠ‚ç‚¹æ•°å¤§äºä¸ºnï¼Œä»ç¬¬ä¸€å±‚åˆ°å€’æ•°ç¬¬ä¸‰å±‚çš„èŠ‚ç‚¹æ•°å¤§çº¦ä¸ºn-1ï¼Œæœ€åä¸€å±‚èŠ‚ç‚¹æ•°å¾ˆå°‘ï¼Œä½†æ˜¯ä¸ºäº†ä½¿ç”¨æ•°ç»„å­˜å‚¨æ•´æ£µæ ‘ï¼Œæœ€åä¸€å±‚å¤§çº¦éœ€è¦å¼€2nçš„ç©ºé—´ï¼Œå› æ­¤ä¸€å…±éœ€è¦å¼€è¾Ÿ4nçš„ç©ºé—´å­˜å‚¨çº¿æ®µæ ‘ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/195253.png" alt=""></p></li></ul><p><strong>ä¸ºäº†ä½¿è¯¥çº¿æ®µæ ‘æ–¹ä¾¿æ„é€ A[0]ä¸‹é¢åº”è¯¥ä¹Ÿæœ‰ä¸¤ä¸ªnullçš„å·¦å³å­æ ‘åŒç†A[1]~A[7]éƒ½æœ‰</strong></p><p><u>åœ¨è¿™é‡Œæˆ‘ä»¬è®©å·¦å­æ ‘çš„æ•°ç›®å°‘äºå³å­æ ‘ å³å½“åŒºé—´åˆ†å‰²æ—¶å‘ä¸‹å–æ•´</u> </p><p>ç†è®ºåŸç†ï¼šå‡å¦‚æˆ‘ä»¬æœå¯»åŒºé—´ä¸‹æ ‡[2-5]åˆ™ä»æ ¹èŠ‚ç‚¹å‡ºå‘ å› ä¸º mid :7/2=3(å‘ä¸‹å–æ•´) 2&lt;3 &amp;&amp;5&gt;3 æ‰€ä»¥è¯¥åŒºé—´åœ¨æ ¹èŠ‚ç‚¹çš„å·¦å³å­æ ‘ä¸Š  ç„¶åæˆ‘ä»¬æ¥åˆ°å·¦å­æ ‘ ä»¥å·¦å­æ ‘[0,3]ä½œä¸ºæ ¹èŠ‚ç‚¹ mid: 3/2=1 å› ä¸º2&gt;1æ•…æ”¹åŒºé—´ä¸º[2,3]  åŒç† å¯ä»¥æ±‚å‡ºå³å­æ ‘ä¸Šçš„åŒºé—´èŒƒå›´ä¸º[4,5];æœ€åå°†ä¸¤ä¸ªåŒºé—´è¿›è¡Œåˆå¹¶æ±‚mergeræ“ä½œï¼›</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//(1)SegmentTree æ„é€ å‡½æ•°</span><br> <span class="hljs-keyword">public</span> <span class="hljs-title function_">SegmentTree</span><span class="hljs-params">(E[] arr, Merger&lt;E&gt; merger)</span> {<br>          <span class="hljs-comment">//å¯¹æ”¹mergeræ“ä½œè¿›è¡Œåˆå§‹åŒ–</span><br>        <span class="hljs-built_in">this</span>.merger = merger;     <br>        <span class="hljs-comment">//!!å°†dataç±»å‹ æ ¼å¼è½¬åŒ–ä¸ºObjiect å¹¶èµ‹äºˆä¸arr.length ä¸€æ ·çš„ç©ºé—´</span><br>        data = (E[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[arr.length];  <br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; arr.length; i++) {<br>            data[i] = arr[i];  <span class="hljs-comment">//arrå°†æ•°ç»„ä¸­çš„å€¼è¿›è¡Œæ‹·è´åˆ°data</span><br>        }<br>     <span class="hljs-comment">//é¦–å…ˆå¯¹çº¿æ®µæ ‘çš„å†…å­˜ç©ºé—´è¿›è¡Œåˆå§‹åŒ– å¹¶å¯¹å…¶è¿›è¡Œç±»å‹çš„è½¬æ¢ç„¶åæ‰èƒ½æ¥æ”¶åˆ°data[]å†…çš„å€¼</span><br>        tree = (E[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[<span class="hljs-number">4</span> * arr.length]; <br>        <span class="hljs-comment">//å»ºé€ çº¿æ®µæ ‘ (èŠ‚ç‚¹0ï¼Œæœ€å°ä¸‹æ ‡ï¼Œå’Œæœ€å¤§ä¸‹æ ‡)</span><br>       <span class="hljs-comment">//è°ƒç”¨å»ºé€ çº¿æ®µæ ‘çš„å‡½æ•°</span><br>        buildSegmentTree(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, data.length - <span class="hljs-number">1</span>); <br>    }<br>   <span class="hljs-comment">//å½“ä¸€åˆ‡éƒ½è¿›è¡Œåˆå§‹åŒ–å®Œæ¯•ç„¶åå°±è°ƒç”¨ç§æœ‰å‡½æ•°buildSegmentTree</span><br></code></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildSegmentTree</span><span class="hljs-params">(<span class="hljs-type">int</span> treeIndex, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> {<br>        <span class="hljs-comment">// è¯¥å‡½æ•°æ˜¯ä¸ªé€’å½’å‡½æ•° å…ˆè€ƒè™‘ç»“æŸæƒ…å†µå½“r==læ˜¯ç¨‹åºç»“æŸ ä¹Ÿå°±æ˜¯åªå‰©ä¸‹ä¸€ä¸ªå¶å­èŠ‚ç‚¹ </span><br>        <span class="hljs-keyword">if</span> (r == l) {<br>            tree[treeIndex] = data[r];  <span class="hljs-comment">//å°†å¶å­èŠ‚ç‚¹æŒ‚åœ¨treeæ ‘ä¸Š</span><br>            <span class="hljs-keyword">return</span>;      <br>        }<br>      <span class="hljs-comment">//çº¿æ®µæ ‘çš„å»ºé€ æµç¨‹ </span><br>       <span class="hljs-comment">//é¦–å…ˆè¿›è¡Œä¸­é—´ä¸‹æ ‡çš„æ±‚è§£ è¿™æ ·å†™æ˜¯ä¸ºäº†é˜²æ­¢è¶Šç•Œ</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> l + (r - l) / <span class="hljs-number">2</span>;    <br>      <span class="hljs-comment">//å¾—åˆ°å·¦å³å­©å­çš„ä¸‹æ ‡ç”¨äºä½œä¸ºæ ¹èŠ‚ç‚¹è¿›è¡Œé€’å½’è°ƒç”¨ </span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">leftTreeIndex</span> <span class="hljs-operator">=</span> leftChild(treeIndex);  <br>        <span class="hljs-type">int</span> <span class="hljs-variable">rightTreeIndex</span> <span class="hljs-operator">=</span> rightChild(treeIndex); <br>    <span class="hljs-comment">//å¼€å§‹é€’å½’çš„è°ƒç”¨è¯¥å‡½æ•°é¦–å…ˆä»¥å·¦å­©å­ä¸‹æ ‡ä¸ºè·ŸèŠ‚ç‚¹å»ºé€  åŒºé—´ï¼ˆL,midï¼‰åŒç†å³å­©å­ä¸º(mid+1,r)</span><br>        buildSegmentTree(leftTreeIndex, l, mid);<br>        buildSegmentTree(rightTreeIndex, mid + <span class="hljs-number">1</span>, r);<br>    <span class="hljs-comment">//å½“è°ƒç”¨åˆ°åº•å±‚çš„æ—¶å€™ä¹Ÿå°±æ˜¯ å¶å­èŠ‚ç‚¹ ä»–ä»¬å­˜çš„å€¼ä¸º è‡ªå·±å·¦å³å­©å­è¿›è¡Œå¤–éƒ¨æ¥å£çš„mergeræ“ä½œåå­˜å…¥è¯¥èŠ‚ç‚¹ åŒç†é€’å½’çš„å¾€ä¸Šè°ƒç”¨</span><br>        tree[treeIndex] = merger.merge(tree[leftTreeIndex], tree[rightTreeIndex]);<br>    }<br></code></pre></td></tr></tbody></table></figure><blockquote><p><strong>å½“çº¿æ®µæ ‘æ„é€ å®Œæˆä»¥åå®Œæˆä¸€äº›ä»¥ä¸Šå‡½æ•°æ‰€è°ƒç”¨çš„å‡½æ•°</strong></p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> E <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> {   <br>       <span class="hljs-comment">//è·å–ä¸‹æ ‡ä¸ºindexçš„å€¼ éœ€è¦åˆ¤æ–­æ•°ç»„æ˜¯å¦è¶Šç•Œäº†</span><br>       <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span> || index &gt;= data.length)<br>           <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Index is illegal"</span>);<br>         <span class="hljs-comment">//ç„¶ååœ¨dataæ•°ç»„ä¸­ç›´æ¥è¿”å›</span><br>       <span class="hljs-keyword">return</span> data[index];  <br>   }<br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getSize</span><span class="hljs-params">()</span> {<br>       <span class="hljs-keyword">return</span> data.length;<br>   }<br>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">leftChild</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> {<br>       <span class="hljs-comment">//æ ¹æ®äºŒå‰æ ‘çš„æ€§è´¨å¯ä»¥å¾—å‡ºå·¦å­©å­ä¸‹æ ‡å’Œæœ‰å­©å­ä¸‹æ ‡</span><br>       <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * index + <span class="hljs-number">1</span>;  <br>   }<br>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">rightChild</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> {<br>       <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * index + <span class="hljs-number">2</span>;<br>   }<br></code></pre></td></tr></tbody></table></figure><blockquote><p><strong>å½“ä»¥ä¸Šä¸¤æ­¥éƒ½å®Œæˆçš„æ—¶å€™ï¼Œå¯ä»¥è¿›è¡ŒæŸ¥è¯¢åŒºé—´çš„æ“ä½œ</strong></p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//è¯¥å‡½æ•°å› ä¸ºéœ€è¦é€’å½’è°ƒç”¨ æ‰€ä»¥è¦ä¼ å…¥æ ¹èŠ‚ç‚¹ å·¦å³ä¸‹æ ‡å’Œ æŸ¥è¯¢çš„å·¦å³åŒºé—´ä¸‹æ ‡  </span><br><span class="hljs-keyword">private</span> E <span class="hljs-title function_">query</span><span class="hljs-params">(<span class="hljs-type">int</span> treeIndex, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> queryL, <span class="hljs-type">int</span> queryR)</span> {<br>    <span class="hljs-comment">//é¦–å…ˆå¯¹é€’å½’åˆ°ç¬¬çš„æƒ…å†µè¿›è¡Œåˆ¤æ–­ å°±æ˜¯å½“lå’Œrä¸æŸ¥è¯¢çš„queryL,queryRçš„ä¸‹æ ‡ç›¸åŒæ—¶ç›´æ¥è¿”å›æ ¹èŠ‚ç‚¹çš„å€¼   </span><br>    <span class="hljs-keyword">if</span> (l == queryL &amp;&amp; r == queryR) {  <br>            <span class="hljs-keyword">return</span> tree[treeIndex];<br>        }<br>    <span class="hljs-comment">//æ­£å¸¸æµç¨‹å…ˆ æ±‚å–ä¸­é—´å€¼çš„ä¸‹æ ‡</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> l + (r - l) / <span class="hljs-number">2</span>;<br>    <span class="hljs-comment">//å¾—åˆ°å·¦å³å­©å­çš„ä¸‹æ ‡</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">leftTreeIndex</span> <span class="hljs-operator">=</span> leftChild(treeIndex);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rightTreeIndex</span> <span class="hljs-operator">=</span> rightChild(treeIndex);<br>    <span class="hljs-comment">//åˆ¤æ–­è¯¥åŒºé—´æ˜¯å¦åœ¨ çº¿æ®µæ ‘çš„å³å­æ ‘å¦‚æœæ˜¯çš„åŒ–å°±ä»¥å³å­©å­ä¸ºæ ¹èŠ‚ç‚¹æœå¯»[mid+1,r]å†…çš„å€¼</span><br>        <span class="hljs-keyword">if</span> (queryL &gt;= mid + <span class="hljs-number">1</span>) {<br>            <span class="hljs-keyword">return</span> query(rightTreeIndex, mid + <span class="hljs-number">1</span>, r, queryL, queryR);<br>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (queryR &lt;= mid) { <br>            <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦åœ¨å·¦å­æ ‘ä¸Š å¦‚æœæ˜¯åˆ™é€’å½’è°ƒç”¨queryç›´è‡³æ‰¾åˆ°</span><br>            <span class="hljs-keyword">return</span> query(leftTreeIndex, l, mid, queryL, queryR);<br>        }<br>    <span class="hljs-comment">//å½“å³ä¸å†å·¦å­æ ‘åˆä¸åœ¨å³å­æ ‘ä¸Šçš„æ—¶å€™å°±æ˜¯midåœ¨ã€queryL,queryRã€‘çš„ä¸­é—´</span><br>    <span class="hljs-comment">//åˆ™éœ€è¦é¡¶ä¸€ä¸ªE ç±»å‹çš„å˜é‡åˆ†åˆ«æ¥æ”¶æœ€åè¿”å›çš„ã€l,midã€‘å’Œ[mid+1,r]çš„å€¼</span><br>    <span class="hljs-comment">//ç„¶åå¯¹ä¸¤ä¸ªåŒºé—´çš„ç»“æœè¿›è¡Œmergeræ“ä½œå¹¶è¿”å›</span><br>        <span class="hljs-type">E</span> <span class="hljs-variable">leftResult</span> <span class="hljs-operator">=</span> query(leftTreeIndex, l, mid, queryL, mid);<br>        <span class="hljs-type">E</span> <span class="hljs-variable">rightResult</span> <span class="hljs-operator">=</span> query(rightTreeIndex, mid + <span class="hljs-number">1</span>, r, mid + <span class="hljs-number">1</span>, queryR);<br>        <span class="hljs-keyword">return</span> merger.merge(leftResult, rightResult);<br>    }<br><br></code></pre></td></tr></tbody></table></figure><h2 id="2-çº¿æ®µæ ‘çš„åŠ¨æ€æŸ¥è¯¢"><a href="#2-çº¿æ®µæ ‘çš„åŠ¨æ€æŸ¥è¯¢" class="headerlink" title="2.çº¿æ®µæ ‘çš„åŠ¨æ€æŸ¥è¯¢"></a>2.çº¿æ®µæ ‘çš„åŠ¨æ€æŸ¥è¯¢</h2><blockquote><p>æ‹“å±•</p></blockquote><p>ä»¥ä¸Šæ˜¯å¯¹äºä¸€ä¸ªå›ºå®šåŒºé—´å›ºå®šæ•°å€¼çš„æ“ä½œç„¶è€Œç°å®ä¸­ä¹Ÿéœ€è¦ï¼Œå½“ä¿®æ”¹ä¸€ä¸ªæ•°æ®åèƒ½å¤Ÿæ›´æ–°æ•´ä¸ªçº¿æ®µæ ‘ç„¶ååœ¨æŸ¥æ‰¾ä¸€ä¸ªåŒºé—´è¿›è¡Œç›¸å…³çš„æ“ä½œå…·ä½“å‡½æ•°å¦‚ä¸‹ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//é¦–å…ˆå°†ä½äºindexä¸‹æ ‡çš„å€¼è¿›è¡Œä¿®æ”¹</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">set</span><span class="hljs-params">(<span class="hljs-type">int</span> index, E e)</span> {<br>    <span class="hljs-comment">//æ¯æ¬¡è¿›è¡Œä¸‹æ ‡æœæŸ¥éœ€è¦è€ƒè™‘æ˜¯å¦è¶Šç•Œå’Œä¸‹æ ‡æ˜¯å¦åˆæ³•</span><br>        <span class="hljs-keyword">if</span> (index &lt; <span class="hljs-number">0</span> || index &gt;= data.length)<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Index is illegal"</span>);<br>        data[index] = e;     <span class="hljs-comment">//ä¿®æ”¹</span><br>        <span class="hljs-comment">//è°ƒç”¨setçš„é‡æ„å‡½æ•°å¯¹åŒºé—´ã€0,data.lengt-1ã€‘å†…çš„ä¸€ä¸ªä¸‹æ ‡è¿›è¡Œä¿®æ”¹ä¸ºe</span><br>      set(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, data.length - <span class="hljs-number">1</span>, index, e); <br>    }<br> <span class="hljs-comment">//é‡æ„å‡½æ•°å®šä¹‰ä¸ºç§æœ‰å˜é‡é˜²æ­¢å¤–éƒ¨è°ƒç”¨å‚æ•°æ„ä¹‰ï¼ˆæ ¹èŠ‚ç‚¹,å·¦èŒƒå›´ï¼Œå³èŒƒå›´,ç´¢å¼•å€¼ï¼Œè¦ä¿®æ”¹çš„å€¼ï¼‰</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">set</span><span class="hljs-params">(<span class="hljs-type">int</span> treeIndex, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> index, E e)</span> {<br>        <span class="hljs-comment">//é€’å½’ç»ˆæ­¢çš„æ¡ä»¶å°±æ˜¯å½“l==rä¹Ÿå°±æ˜¯æ‰¾åˆ°é‚£ä¸ªå…ƒç´ äº†</span><br>        <span class="hljs-keyword">if</span> (l == r) {  <br>            tree[treeIndex] = e;  <span class="hljs-comment">//ä¿®æ”¹</span><br>            <span class="hljs-keyword">return</span>;  <br>        }<br>        <span class="hljs-comment">//æ­£å¸¸æµç¨‹ é¦–å…ˆå¾—åˆ°ä¸­é—´çš„ä¸‹æ ‡</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> l + (r - l) / <span class="hljs-number">2</span>;<br>        <span class="hljs-comment">//å…¶æ¬¡å¾—åˆ°å·¦å³å­©å­çš„ä¸‹æ ‡ åé¢é€’å½’ä½¿ç”¨</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">leftTreeIndex</span> <span class="hljs-operator">=</span> leftChild(treeIndex);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rightTreeIndex</span> <span class="hljs-operator">=</span> rightChild(treeIndex);<br>        <span class="hljs-comment">//æ¥ç€ `index &gt;= mid + 1`:å¦‚æœè¦æœæŸ¥çš„å€¼åœ¨å³å­æ ‘åˆ™å¯¹å³å­æ ‘é€’å½’è°ƒç”¨ä»¥ rightTreeIndexä¸ºæ ¹èŠ‚ç‚¹ </span><br>        <span class="hljs-keyword">if</span> (index &gt;= mid + <span class="hljs-number">1</span>) {<br>            set(rightTreeIndex, mid + <span class="hljs-number">1</span>, r, index, e);<br>        } <span class="hljs-keyword">else</span> {  <span class="hljs-comment">//åä¹‹åˆ™åœ¨å·¦å­æ ‘åŒå³å­æ ‘ç›¸åŒä¸è¿‡æ ¹èŠ‚ç‚¹æ¢æˆäº†å·¦å­©å­çš„ä¸‹æ ‡å€¼</span><br>            set(leftTreeIndex, l, mid, index, e);<br>        }<br>        <span class="hljs-comment">//å½“æ‰¾åˆ°åä¸æ˜¯æ•´ä¸ªçº¿æ®µæ ‘çš„èŠ‚ç‚¹å€¼éƒ½æ”¹å˜åœ¨indexä»¥åçš„å€¼èŠ‚ç‚¹ä¿æŒä¸å˜è€Œåœ¨indexä»¥å‰çš„èŠ‚ç‚¹å€¼è¦æ”¹å˜</span><br>        <span class="hljs-comment">//æ‰€ä»¥è¿™é‡Œç›´æ¥è°ƒç”¨è°ƒç”¨mergerå‡½æ•°å³å¯ä»¥è‡ªåŠ¨å®ç°ã€‚</span><br>        tree[treeIndex] = merger.merge(tree[leftTreeIndex], tree[rightTreeIndex]);<br>    }<br></code></pre></td></tr></tbody></table></figure><h2 id="3-LeeCodeç»ƒä¹ é¢˜è®²è§£"><a href="#3-LeeCodeç»ƒä¹ é¢˜è®²è§£" class="headerlink" title="3.LeeCodeç»ƒä¹ é¢˜è®²è§£"></a>3.LeeCodeç»ƒä¹ é¢˜è®²è§£</h2><h3 id="ç¬¬ä¸€é¢˜"><a href="#ç¬¬ä¸€é¢˜" class="headerlink" title="ç¬¬ä¸€é¢˜"></a>ç¬¬ä¸€é¢˜</h3><p>åŠ›æ‰£é¢˜303<a href="[303. åŒºåŸŸå’Œæ£€ç´¢ - æ•°ç»„ä¸å¯å˜ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/range-sum-query-immutable/">åŒºåŸŸå’Œæ£€ç´¢-æ•°ç»„ä¸å¯å˜</a>)   è¯¥é¢˜æ˜¯è¦å®ç°ä¸€ä¸ªNumArrayç±»å®ç°ä¸€ä¸ªåŒºé—´å†…å…ƒç´ çš„æ€»å’Œæ‰€ä»¥è§£é¢˜æ­¥éª¤ï¼š</p><ol><li>é¦–å…ˆå®šä¹‰ä¸€ä¸ªç§æœ‰å˜é‡sumæ•°ç»„å­˜å‚¨ä»0-n ä¸ªåŒºé—´çš„æ€»å’Œ ä¾‹å¦‚sum[6]è¡¨ç¤º sum[0]+â€¦+sum[5] æ•…æœ‰æ­¤æƒ…å½¢å¯ä»¥çŸ¥é“sumçš„ç©ºé—´å¼€è¾Ÿå¤§å°ä¸ºnums.length+1 ,è€Œä¸”sum[0]=0;</li><li>å¯¹æ•°æ®æˆå‘˜å¯¹è±¡çš„åˆå§‹åŒ–å°† numså†…çš„å…ƒç´ ç›¸åŠ å’Œæ‹·è´åˆ°sumæ•°ç»„ä¸­</li><li>å®ç°sumRangeç±» è¿”å›ç»“è¿‡ ä¾‹å¦‚ï¼šå¦‚æœè¦æ±‚ä¸‹æ ‡ã€4ï¼Œ8ã€‘åŒºé—´å†…å…ƒç´ çš„æ€»å’Œåˆ™éœ€è¦sum[9]-sum[4] å°±å¯ä»¥ã€‚</li></ol><blockquote><p>ä»£ç å¦‚ä¸‹æ‰€ç¤º</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NumArray</span> {<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> []sum;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">NumArray</span><span class="hljs-params">(<span class="hljs-type">int</span> []nums)</span>{<br>        sum=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[nums.length+<span class="hljs-number">1</span>];<br>        sum[<span class="hljs-number">0</span>]=<span class="hljs-number">0</span>;<br>        <span class="hljs-comment">//å¯¹sum[1]~sum[n]é€ä¸ªè¿›è¡Œèµ‹å€¼ ä»i=1å¼€å§‹ sum[1]=sum[0]+nums[0];sum[2]=sum[1]+nums[1]...</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; sum.length; i++) {<br>            sum[i]=sum[i-<span class="hljs-number">1</span>]+nums[i-<span class="hljs-number">1</span>];<br>        }<br>    }<br>    <span class="hljs-comment">//è¿”å›æœ€ç»ˆç»“æœ</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">sumRange</span><span class="hljs-params">(<span class="hljs-type">int</span> i,<span class="hljs-type">int</span> j)</span>{<br>        <span class="hljs-keyword">return</span> sum[j+<span class="hljs-number">1</span>]-sum[i];<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><h1 id="Trieå‰ç¼€æ ‘"><a href="#Trieå‰ç¼€æ ‘" class="headerlink" title="Trieå‰ç¼€æ ‘"></a><code>Trie</code>å‰ç¼€æ ‘</h1><blockquote><p>æ¦‚å¿µä»‹ç»</p></blockquote><p>å‰ç¼€æ ‘åˆç§°ä¸ºå­—å…¸æ ‘ï¼Œæ˜¯ä¸€ç§æœ‰åºçš„æ ‘ï¼Œå®ƒç”¨äºä¿å­˜å…³è”çš„æ•°ç»„ï¼Œå…¶ä¸­çš„é”®é€šå¸¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªèŠ‚ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œè€Œæ ¹èŠ‚ç‚¹å¯¹åº”å­—ç¬¦ä¸²ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸æ˜¯æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æœ‰å¯¹åº”çš„å€¼ï¼Œåªæœ‰å¶å­èŠ‚ç‚¹å’Œéƒ¨åˆ†çš„å†…éƒ¨èŠ‚ç‚¹æ‰€å¯¹åº”çš„é”®æ‰æœ‰çš„ç›¸å…³çš„å€¼ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/7756JokerQAQ/picodemoo/img/hehehe.png" alt=""></p><blockquote><p>å‰ç¼€æ ‘çš„3ä¸ªåŸºæœ¬æ€§è´¨</p></blockquote><ol><li>æ ¹èŠ‚ç‚¹ä¸åŒ…å«å­—ç¬¦ï¼Œé™¤æ ¹èŠ‚ç‚¹å¤–æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½åªåŒ…å«ä¸€ä¸ªå­—ç¬¦ã€‚</li><li>ä»æ ¹èŠ‚ç‚¹åˆ°æŸä¸€èŠ‚ç‚¹ï¼Œè·¯å¾„ä¸Šç»è¿‡çš„å­—ç¬¦è¿æ¥èµ·æ¥ï¼Œä¸ºè¯¥èŠ‚ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸²</li><li>æ¯ä¸ªèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹åŒ…å«çš„å­—ç¬¦éƒ½ä¸ç›¸åŒã€‚</li></ol><blockquote><p>tireæ ‘çš„åº”ç”¨</p></blockquote><p>å¸¸ç”¨äºæœç´¢çš„æç¤ºï¼Œä¾‹å¦‚è¾“å…¥ä¸€ä¸ªç½‘å€å‡ºç°å¯èƒ½çš„ç»“æœï¼Œè¿˜ç”¨äºå¾®ä¿¡èŠå¤©è®°å½•çš„æœå¯»ã€‚æ—¶é—´å¤æ‚åº¦O(longN)</p><blockquote><p>tireæ ‘çš„å®ç°</p></blockquote><ul><li>é¦–å…ˆå®šä¹‰ä¸€ä¸ªèŠ‚ç‚¹ç±»<code>class Node</code> å…¶ä¸­å‡½æ•°å¦‚ä¸‹</li><li><code>public boolean isWorld</code> è¡¨ç¤ºåˆ°è¯¥èŠ‚ç‚¹æ˜¯å¦ä¸ºä¸€ä¸ªå•è¯</li><li><code>public TreeMap&lt;Character,Node&gt;next</code> è¡¨ç¤ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ‰€å­˜å‚¨çš„ç»“æ„</li><li><code>Node(boolean isWorld)</code> å¯¹èŠ‚ç‚¹çš„åˆå§‹åŒ–å’Œnextçš„åˆå§‹åŒ–</li><li>æ­¤å¤„å¼€å§‹å®šä¹‰<code>class Trie</code> å†…çš„å‡½æ•° <code>Node root</code> å®šä¹‰ä¸€ä¸ªèŠ‚ç‚¹ <code>int size</code> è¯¥tireæ ‘çš„å¤§å°ã€‚</li><li><code>add(String word)</code> æ·»åŠ ä¸€ä¸ªå•è¯word</li><li><code>containsï¼ˆString wordï¼‰</code> æŸ¥è¯¢å•è¯wordæ˜¯å¦åœ¨Tireä¸­</li><li><code>isPrefix(String prefix)</code> åˆ¤æ–­è¯¥å•è¯æ˜¯å¦æ˜¯å‰ç¼€</li></ul><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>ï¼ˆ1ï¼‰é¦–å…ˆå®šä¹‰ä¸€ä¸ªèŠ‚ç‚¹å†…éƒ¨ç±»</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java">  <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> {<br>        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> isWorld;<br>        <span class="hljs-comment">//Characteræ˜¯ä¸ªå‡è®¾ å¯ä»¥é€‚ç”¨äºä¸åŒçš„æƒ…å†µ èƒ½å¤Ÿåˆ†ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å•å…ƒ</span><br>        <span class="hljs-keyword">public</span> TreeMap&lt;Character, Node&gt; next;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(<span class="hljs-type">boolean</span> isWorld)</span> {<br>            <span class="hljs-built_in">this</span>.isWorld = isWorld;<br>            next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>&lt;&gt;();<br>        }<br><span class="hljs-comment">//å½“è¯¥èŠ‚ç‚¹ä¸æ˜¯ä¸ªå•è¯çš„æ—¶å€™ç›´æ¥èµ‹å€¼ä¸ºfalse </span><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">()</span> {<br>            <span class="hljs-built_in">this</span>(<span class="hljs-literal">false</span>);<br>        }<br>    }<br></code></pre></td></tr></tbody></table></figure><p>ï¼ˆ2ï¼‰åœ¨Trieç±»ä¸­å®šä¹‰ç›¸å…³çš„å‡½æ•°å’Œç§æœ‰å˜é‡</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"> <span class="hljs-keyword">private</span> Node root;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> size;<br><span class="hljs-comment">//åˆå§‹åŒ– Tire å¹¶å¯¹æˆå‘˜å˜é‡åˆå§‹åŒ–èµ‹å€¼</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Trie</span><span class="hljs-params">()</span> {<br>        root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>();<br>        size = <span class="hljs-number">0</span>;<br>    }<br><span class="hljs-comment">//å¾—åˆ°è¯¥Trieæ ‘ä¸­å•è¯çš„æ•°ç›®</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getSize</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> size;<br>    }<br></code></pre></td></tr></tbody></table></figure><p>ï¼ˆ3ï¼‰å®ç°addå‡½æ•° å‘Tireä¸­æ·»åŠ å•è¯word</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(String word)</span> {<br>    <span class="hljs-comment">//é¦–ç›¸ä»æ ¹èŠ‚ç‚¹å¼€å§‹ é¡¶ä¸€ä¸ªcuræŒ‡é’ˆæŒ‡å‘æ ¹èŠ‚ç‚¹</span><br>     <span class="hljs-type">Node</span> <span class="hljs-variable">cur</span> <span class="hljs-operator">=</span> root;<br>     <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; word.length(); i++) { <span class="hljs-comment">//å…¶å¯¹å¯¹ä¼ å…¥çš„å•è¯è¿›è¡Œéå†</span><br>         <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> word.charAt(i);  <span class="hljs-comment">//å°†ç¬¬iä¸ªå­—æ¯èµ‹å€¼ç»™c</span><br>         <span class="hljs-keyword">if</span> (cur.next.get(c) == <span class="hljs-literal">null</span>) {  <span class="hljs-comment">//åˆ¤æ–­curçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºå¦‚æœæ˜¯çš„è¯ï¼Œåˆ™æ–°å»ºä¸€ä¸ªèŠ‚ç‚¹ç›´æ¥å°†è¯¥å­—æ¯æ”¾åœ¨cur.nextçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br>             cur.next.put(c, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>());<br>         }<br>         <span class="hljs-comment">//å¦‚æœä¸ä¸ºç©ºçš„è¯è®©curæŒ‡é’ˆæŒ‡å‘è¯¥ä¸ä¸ºç©ºçš„èŠ‚ç‚¹ä¾¿äºä¸‹æ¬¡å¾ªç¯æ“ä½œ</span><br>         cur = cur.next.get(c);<br>     }<br>    <span class="hljs-comment">//å½“æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½addä¸Šäº†å æ­¤æ—¶åˆ¤æ–­è¯¥èŠ‚ç‚¹ä¸‹çš„isWorldæ˜¯å¦ä¸ºtrue,ä¸æ˜¯çš„è¯æ”¹ä¸ºtrueå¹¶ä¸”size++</span><br>     <span class="hljs-keyword">if</span> (!cur.isWorld) {<br>         cur.isWorld = <span class="hljs-literal">true</span>;<br>         size++;<br>     }<br> }<br></code></pre></td></tr></tbody></table></figure><p>(3) contains å‡½æ•°çš„å®ç°ç±»ä¼¼äºaddå‡½æ•°</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æŸ¥è¯¢å•è¯ wordæ˜¯å¦åœ¨Trieä¸­</span><br> <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(String word)</span>{<br>     Node cur=root;  <span class="hljs-comment">//å®šä¹‰æŒ‡é’ˆæŒ‡å‘æ ¹èŠ‚ç‚¹</span><br>     <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; word.length(); i++) { <span class="hljs-comment">//éå†wordå•è¯</span><br>         <span class="hljs-type">char</span> c=word.charAt(i);<br>         <span class="hljs-keyword">if</span>(cur.next.get(c)==<span class="hljs-literal">null</span>){ <span class="hljs-comment">//å¦‚æœcur.nextä¸ºç©ºçš„è¯åˆ™ç›´æ¥åˆ¤æ–­ä¸å­˜åœ¨</span><br>             <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>         }<br>         cur= cur.next.get(c);  <span class="hljs-comment">//ä¸ä¸ºç©ºçš„è¯ å¼€å§‹å¯¹ä¸‹ä¸€ä¸ªå­—æ¯è¿›è¡Œæ ¡éªŒ</span><br>     }<br>     <span class="hljs-keyword">return</span> cur.isWorld;  <span class="hljs-comment">//å½“ä¸Šé¢çš„whileå¾ªç¯å®Œæˆ åˆ™ç›´æ¥è¿”å›cur.isWroldè¯æ˜è¯¥å•è¯å­˜åœ¨</span><br> }<br></code></pre></td></tr></tbody></table></figure><p>ï¼ˆ4ï¼‰isPrefixå‡½æ•°åˆ¤æ–­è¯¥å‰ç¼€æ˜¯å¦å­˜åœ¨tireæ ‘å†…äºä»¥ä¸Šä¸¤ç§æ–¹æ³•ç›¸ä¼¼</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isPrefix</span><span class="hljs-params">(String prefix)</span>{<br>    Node cur=root;   <br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;prefix.length();i++){<br>        <span class="hljs-type">char</span> c=prefix.charAt(i);<br>        <span class="hljs-keyword">if</span>(cur.next.get(c)==<span class="hljs-literal">null</span>){<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        }<br>        cur=cur.next.get(c);<br>    }<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>}<br></code></pre></td></tr></tbody></table></figure><h2 id="LeeCodeé¢˜ç›®è®²è§£"><a href="#LeeCodeé¢˜ç›®è®²è§£" class="headerlink" title="LeeCodeé¢˜ç›®è®²è§£"></a>LeeCodeé¢˜ç›®è®²è§£</h2><p>1.<a href="[208. å®ç° Trie (å‰ç¼€æ ‘">å®ç°Trieå‰ç¼€æ ‘</a> - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](<a href="https://leetcode.cn/problems/implement-trie-prefix-tree/">https://leetcode.cn/problems/implement-trie-prefix-tree/</a>)) è·Ÿä»¥ä¸Šè¿‡ç¨‹å®Œå…¨ç›¸ä¼¼</p><p>ï¼ˆ1ï¼‰å­˜åœ¨å››ä¸ªå‡½æ•°</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Trie</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Trie</span><span class="hljs-params">()</span> {  <span class="hljs-comment">//åˆå§‹åŒ–</span><br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(String word)</span> {  <span class="hljs-comment">//å¢åŠ </span><br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">search</span><span class="hljs-params">(String word)</span> {  <span class="hljs-comment">//æŸ¥æ‰¾</span><br>    }    <br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">startsWith</span><span class="hljs-params">(String prefix)</span> {  <span class="hljs-comment">//å‰ç¼€</span><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><blockquote><p>ä»£ç å®ç°</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Trie</span> {<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> {<br>        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> isWorld;<br>        <span class="hljs-comment">//Characteræ˜¯ä¸ªå‡è®¾ å¯ä»¥é€‚ç”¨äºä¸åŒçš„æƒ…å†µ èƒ½å¤Ÿåˆ†ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å•å…ƒ</span><br>        <span class="hljs-keyword">public</span> TreeMap&lt;Character, Node&gt; next;<br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(<span class="hljs-type">boolean</span> isWorld)</span> {<br>            <span class="hljs-built_in">this</span>.isWorld = isWorld;<br>            next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>&lt;&gt;();<br>        }<br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">()</span> {<br>            <span class="hljs-built_in">this</span>(<span class="hljs-literal">false</span>);<br>        }<br>    }<br>    <span class="hljs-keyword">private</span> Node root;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Trie</span><span class="hljs-params">()</span> {<br>        root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>();<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(String word)</span> {<br>        <span class="hljs-type">Node</span> <span class="hljs-variable">cur</span> <span class="hljs-operator">=</span> root;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; word.length(); i++) {<br>            <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> word.charAt(i);<br>            <span class="hljs-keyword">if</span> (cur.next.get(c) == <span class="hljs-literal">null</span>) {<br>                cur.next.put(c, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>());<br>            }<br>            cur = cur.next.get(c);<br>        }<br>        <span class="hljs-keyword">if</span> (!cur.isWorld) {<br>            cur.isWorld = <span class="hljs-literal">true</span>;<br><br>        }<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">search</span><span class="hljs-params">(String word)</span> {<br>        Node cur=root;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; word.length(); i++) {<br>            <span class="hljs-type">char</span> c=word.charAt(i);<br>            <span class="hljs-keyword">if</span>(cur.next.get(c)==<span class="hljs-literal">null</span>){<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            }<br>            cur= cur.next.get(c);<br>        }<br>        <span class="hljs-keyword">return</span> cur.isWorld;<br>    }<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">startsWith</span><span class="hljs-params">(String prefix)</span> {<br>        Node cur=root;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; prefix.length(); i++) {<br>            <span class="hljs-type">char</span> c=prefix.charAt(i);<br>            <span class="hljs-keyword">if</span>(cur.next.get(c)==<span class="hljs-literal">null</span>)<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            cur=cur.next.get(c);<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>2.[<a href="https://leetcode.cn/problems/design-add-and-search-words-data-structure/">211. æ·»åŠ ä¸æœç´¢å•è¯ </a>] é¢˜ç›®ç®€ä»‹è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„ï¼ŒæŒ‡å‡ºæ·»åŠ æ–°çš„å•è¯å’ŒæŸ¥æ‰¾å­—ç¬¦ä¸²æ˜¯å¦ä¸ä»»ä½•å…ˆå‰æ·»åŠ çš„å­—ç¬¦ä¸²åŒ¹é…ã€‚</p><ul><li>è¿˜æœ‰å†…éƒ¨èŠ‚ç‚¹Nodeç±» å…¶ä¸­çš„å®šä¹‰ä¸ä¸Šæ–‡ç›¸åŒè¿™é‡Œä¸éœ€è¦å®šä¹‰ç§æœ‰å˜é‡sizeã€‚</li><li><code>WordDictionary</code> å¯¹è¯¥å­—å…¸ç±»çš„åˆå§‹åŒ–</li><li><code>addWorld</code> ä¸ä¸Šæ–‡çš„addå‡½æ•°ç›¸åŒ</li><li>é‡ç‚¹å®ç°<code>search(String word)</code> å‡½æ•°</li></ul><blockquote><p>ç›¸åŒä»£ç é¢„è§ˆ</p></blockquote><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span> {<br>      <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> isWorld;<br>      <span class="hljs-comment">//Characteræ˜¯ä¸ªå‡è®¾ å¯ä»¥é€‚ç”¨äºä¸åŒçš„æƒ…å†µ èƒ½å¤Ÿåˆ†ä¸ºä¸€ä¸ªä¸€ä¸ªçš„å•å…ƒ</span><br>      <span class="hljs-keyword">public</span> TreeMap&lt;Character, Node&gt; next;<br>      <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">(<span class="hljs-type">boolean</span> isWorld)</span> {<br>          <span class="hljs-built_in">this</span>.isWorld = isWorld;<br>          next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>&lt;&gt;();<br>      }<br>      <span class="hljs-keyword">public</span> <span class="hljs-title function_">Node</span><span class="hljs-params">()</span> {<br>          <span class="hljs-built_in">this</span>(<span class="hljs-literal">false</span>);<br>      }<br>  }<br>  <span class="hljs-keyword">private</span> Node root;<br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">WordDictionary</span><span class="hljs-params">()</span> {<br>      root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>();<br>  }<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addWord</span><span class="hljs-params">(String word)</span> {<br>      <span class="hljs-type">Node</span> <span class="hljs-variable">cur</span> <span class="hljs-operator">=</span> root;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; word.length(); i++) {<br>          <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> word.charAt(i);<br>          <span class="hljs-keyword">if</span> (cur.next.get(c) == <span class="hljs-literal">null</span>) {<br>              cur.next.put(c, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>());<br>          }<br>          cur = cur.next.get(c);<br>      }<br>      cur.isWorld = <span class="hljs-literal">true</span>;<br>  }<br></code></pre></td></tr></tbody></table></figure><p><strong>(2)é‡ç‚¹å®ç°çš„searchå‡½æ•°å’Œmatchå‡½æ•°</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">search</span><span class="hljs-params">(String word)</span> {<br>     <span class="hljs-keyword">return</span> match(root, word, <span class="hljs-number">0</span>);  <span class="hljs-comment">//è°ƒç”¨matchå‡½æ•°ä»æ ¹èŠ‚ç‚¹å¼€å§‹ wordå•è¯ 0ä¸ºä¸‹æ ‡</span><br> }<br></code></pre></td></tr></tbody></table></figure><p><strong>æ¥ç€å®ç°matchå‡½æ•°</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ä»æ ¹èŠ‚ç‚¹å¼€å§‹ æœæŸ¥å•è¯ä¸ºword ä¸‹æ ‡ä¸ºindex=0å¼€å§‹</span><br><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">match</span><span class="hljs-params">(Node node, String word, <span class="hljs-type">int</span> index)</span> {<br>        <span class="hljs-keyword">if</span> (index == word.length()) {  <span class="hljs-comment">//é¦–å…ˆåˆ¤æ–­é€’å½’åˆ°åº•çš„æƒ…å†µå°±æ˜¯index=å•è¯çš„é•¿åº¦</span><br>            <span class="hljs-keyword">return</span> node.isWorld;  <span class="hljs-comment">//è¿”å›true è¯æ˜æ‰¾åˆ°äº†</span><br>        }<br>    <span class="hljs-comment">//å…ˆå–å‡ºwordçš„ç¬¬ä¸€ä¸ªå­—æ¯è¿›è¡ŒåŒ¹é…</span><br>        <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> word.charAt(index);  <br>        <span class="hljs-keyword">if</span> (c != <span class="hljs-string">'.'</span>) {  <span class="hljs-comment">//å› ä¸ºä½“æ„Ÿè¯´'.'è¡¨ç¤ºä¸€ä¸ªä»»æ„çš„å­—æ¯ å½“ä¸ä¸º.çš„æ—¶å€™</span><br>            <span class="hljs-keyword">if</span> (node.next.get(c) == <span class="hljs-literal">null</span>) {  <span class="hljs-comment">//å…ˆåˆ¤æ–­cçš„ä¸‹ä¸€ä¸ªå•è¯æ˜¯å¦å­˜åœ¨ ä¸å­˜åœ¨ç›´æ¥è¿”å›false</span><br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            }<br>            <span class="hljs-comment">//å¦‚æœå­˜åœ¨çš„è¯å°±é€’å½’è°ƒç”¨ä»¥å½“å‰node.next.get(C)ä¸ºèŠ‚ç‚¹ index+1 ä¸ºä¸‹æ ‡çš„åŒ¹é…å‡½æ•°</span><br>            <span class="hljs-keyword">return</span> match(node.next.get(c), word, index + <span class="hljs-number">1</span>); <br>        } <span class="hljs-keyword">else</span> {<br>            <span class="hljs-comment">//å½“ç„¶å½“ä¸‹ä¸€ä¸ªå•è¯ä¸º'.'çš„æ—¶å€™å¯ä»¥ç›´æ¥éå†nextCharæ•°ç»„çš„ â€˜keySetï¼ˆï¼‰â€™--å®ƒè¡¨ç¤ºçš„æ˜¯å–å‡ºwordçš„ä¸‹ä¸€ä¸ªå­—æ¯ </span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> nextChar :<br>                    node.next.keySet()) {<br>                <span class="hljs-comment">// æ­¤å¤„ä»¥ä¸‹ä¸€ä¸ªå­—æ¯ä¸ºæ ¹èŠ‚ç‚¹ æŸ¥æ‰¾word ç„¶åä¸‹æ ‡ç»§ç»­ä¸ºindex+1</span><br>                <span class="hljs-keyword">if</span> (match(node.next.get(nextChar), word, index + <span class="hljs-number">1</span>))<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            }<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        }<br>    }<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®æœºæ¥å£</title>
      <link href="/2022/08/29/%E5%A4%A7%E4%B8%89%E4%B8%8A%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0/%E5%BE%AE%E6%9C%BA%E6%8E%A5%E5%8F%A3%E6%8A%80%E6%9C%AF/"/>
      <url>/2022/08/29/%E5%A4%A7%E4%B8%89%E4%B8%8A%E8%AF%BE%E7%A8%8B%E5%AD%A6%E4%B9%A0/%E5%BE%AE%E6%9C%BA%E6%8E%A5%E5%8F%A3%E6%8A%80%E6%9C%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="å¾®æœºæ¥å£æŠ€æœ¯"><a href="#å¾®æœºæ¥å£æŠ€æœ¯" class="headerlink" title="å¾®æœºæ¥å£æŠ€æœ¯"></a>å¾®æœºæ¥å£æŠ€æœ¯</h2><h4 id="è¯¾ç¨‹å­¦ä¹ å†…å®¹åŠç›®çš„"><a href="#è¯¾ç¨‹å­¦ä¹ å†…å®¹åŠç›®çš„" class="headerlink" title="è¯¾ç¨‹å­¦ä¹ å†…å®¹åŠç›®çš„"></a>è¯¾ç¨‹å­¦ä¹ å†…å®¹åŠç›®çš„</h4><p>  <strong>æˆç»©=æœŸæœ«Ã—0.7+å¹³æ—¶Ã—0.3</strong></p><p>1.æ±‡ç¼–è¯­è¨€å°±æ˜¯æœºå™¨è¯­è¨€ï¼Œç†ŸçŸ¥åº•å±‚ç¼–ç¨‹ï¼Œäº†è§£è®¡ç®—æœºå·¥ä½œåŸç†</p><p>2.å¾®æœºæ¥å£æŠ€æœ¯å°±æ˜¯æŠŠå¤„ç†å™¨ã€å­˜å‚¨å™¨ç­‰ç»„æˆçš„åŸºæœ¬ç³»ç»Ÿä¸å¤–éƒ¨è®¾å¤‡è¿æ¥èµ·æ¥ï¼Œä»è€Œå®ç°è®¡ç®—æœºæˆ–è€…ï¼ˆCPUï¼‰ä¸å¤–éƒ¨è®¾å¤‡é€šä¿¡çš„ä¸€é—¨æŠ€æœ¯ï¼Œå­¦ä¹ å¾®æœºæ¥å£æŠ€æœ¯å¯¹å¾®æœºåœ¨å·¥ä¸šæ§åˆ¶ï¼Œæ•°æ®é‡‡é›†å’Œç³»ç»Ÿæ§åˆ¶ç­‰é¢†åŸŸçš„åº”ç”¨å…·æœ‰éå¸¸é‡è¦çš„ä½œç”¨ï¼›</p><h2 id="ç¬¬ä¸€ç« "><a href="#ç¬¬ä¸€ç« " class="headerlink" title="ç¬¬ä¸€ç« "></a>ç¬¬ä¸€ç« </h2><h3 id="1-1-å¾®å‹è®¡ç®—æœºç³»ç»Ÿçš„ç»„æˆ"><a href="#1-1-å¾®å‹è®¡ç®—æœºç³»ç»Ÿçš„ç»„æˆ" class="headerlink" title="1.1 å¾®å‹è®¡ç®—æœºç³»ç»Ÿçš„ç»„æˆ"></a>1.1 å¾®å‹è®¡ç®—æœºç³»ç»Ÿçš„ç»„æˆ</h3><pre><code>   åº”ç”¨è½¯ä»¶- -&gt;  æ“ä½œç³»ç»Ÿ --&gt; ç¡¬ä»¶é©±åŠ¨å±‚ï¼ˆè½¯ä»¶ï¼‰- -&gt;  æŒ‡ä»¤å±‚(ISA) --&gt; ç¡¬ä»¶å±‚(ä¸»æ¿)     `è®¡ç®—æœºç³»ç»Ÿå±‚æ¬¡ç»“æ„`</code></pre><p>ç¡¬ä»¶åŒ…æ‹¬ å¤„ç†èŠ¯ç‰‡å’Œå¤–å›´ç¡¬ä»¶</p><p>è½¯ä»¶ï¼šæ“ä½œç³»ç»Ÿ ç¼–è¯‘å™¨ å„ç§åº”ç”¨è½¯ä»¶</p><p>1.ç¡¬ä»¶å±‚ï¼šå…¶åŠŸèƒ½å®åœ¨ç¨‹åºæ§åˆ¶ä¸‹çš„è‡ªåŠ¨å®Œæˆè®¡ç®—æœºçš„ç‰©ç†æ“ä½œ</p><p>2.ç¡¬ä»¶é©±åŠ¨å±‚ï¼šï¼ˆæŠ½è±¡å±‚ï¼‰ï¼šè¿™äº›é©±åŠ¨å±‚çš„è½¯ä»¶ç›´æ¥æ§åˆ¶ç€åº•å±‚ç¡¬ä»¶çš„è¿è¡Œã€‚è¿™ç§ç»„ç»‡ç»“æ„ï¼Œæ˜¯çš„ç”¨æˆ·å¯¹ç¡¬ä»¶åŠŸèƒ½çš„è°ƒç”¨ä¸å¿…äº†è§£å…¶åŸç†ï¼›</p><p>3.æ“ä½œç³»ç»Ÿï¼šè®¡ç®—æœºçš„æ‰€æœ‰è½¯ç¡¬ä»¶èµ„æºçš„æ§åˆ¶ç€ï¼Œå†³å®šç€è®¡ç®—æœºå„ç§èµ„æºçš„ä½¿ç”¨å’Œåˆ†é…ã€‚</p><p>4.åº”ç”¨è½¯ä»¶ï¼šé€šè¿‡æ“ä½œç³»ç»Ÿæä¾›çš„æœåŠ¡ï¼ŒBIOSæä¾›çš„æœåŠ¡å³ä½¿å¯¹è®¡ç®—æœºåº•å±‚ç¡¬ä»¶çš„ç›´æ¥æ§åˆ¶ï¼Œå®Œæˆå¯¹è®¡ç®—æœºå„ä¸ªæ–¹é¢åº”ç”¨çš„å…·ä½“è¦æ±‚ã€‚</p><p>5.æŒ‡ä»¤é›†ï¼šæŒ‡ç¤ºè®¡ç®—æœºç¡¬ä»¶æ‰§è¡ŒæŸç§è¿ç®—ã€å¤„ç†åŠŸèƒ½çš„å‘½ä»¤ç§°ä¸ºæŒ‡ä»¤ï¼ŒCPUå›ºæœ‰çš„æŒ‡ä»¤ç³»ç»Ÿ</p><h4 id="1-1-2-å«æ˜Ÿè®¡ç®—æœºè½¯ä»¶"><a href="#1-1-2-å«æ˜Ÿè®¡ç®—æœºè½¯ä»¶" class="headerlink" title="1.1.2 å«æ˜Ÿè®¡ç®—æœºè½¯ä»¶"></a>1.1.2 å«æ˜Ÿè®¡ç®—æœºè½¯ä»¶</h4><h4 id="1-1-3-å¾®å‹è®¡ç®—æœºçš„åŸºæœ¬å·¥ä½œæ–¹æ³•"><a href="#1-1-3-å¾®å‹è®¡ç®—æœºçš„åŸºæœ¬å·¥ä½œæ–¹æ³•" class="headerlink" title="1.1.3 å¾®å‹è®¡ç®—æœºçš„åŸºæœ¬å·¥ä½œæ–¹æ³•"></a>1.1.3 å¾®å‹è®¡ç®—æœºçš„åŸºæœ¬å·¥ä½œæ–¹æ³•</h4><p>1.æŒ‡ä»¤</p><p>æŒ‡ä»¤åœ¨å¾®å¤„ç†å™¨å†…æ˜¯ä»¥äºŒè¿›åˆ¶ä»£ç å½¢å¼å‡ºç°å’Œæ–½å±•æ§åˆ¶çš„ï¼Œæ¯ä¸€æ¡æŒ‡ä»¤éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æŒ‡ä»¤ä»£ç ï¼›</p><p>2.ç¨‹åº</p><p>â€‹    å½“äººä»¬è¦ç”¨è®¡ç®—æœºæˆ‘å¼„æˆæŸé¡¹å·¥ä½œæ—¶ï¼Œå°±è¦æŠŠæŒ‡ä»¤æ’åˆ—èµ·æ¥ è¿™å°±æ˜¯ç¨‹åºã€‚</p><p>3.å­˜å‚¨ç¨‹åºå’Œæ§åˆ¶ç¨‹åº</p><p>å¾®å¤„ç†å™¨å°±é¡ºåºçš„ã€å‘¨è€Œå¤å§‹çš„ä»å†…å­˜ä¸­å–å‡ºæŒ‡ä»¤ï¼Œå…«è‡³é›¶ç å˜æˆæ§åˆ¶åºåˆ—ä¿¡å·ï¼ˆæŒ‡ä»¤è¯‘ç ï¼‰å®ŒæˆæŒ‡ä»¤è§„å®šçš„æ“ä½œï¼ˆç§°ä¸ºæŒ‡ä»¤æ‰§è¡Œï¼‰å®Œæˆå…¨éƒ¨æŒ‡ä»¤ç§°ä¸ºï¼ˆæ‰§è¡Œç¨‹åºï¼‰    â€”â€”-æ‰§è¡Œç¨‹åºå¿…é¡»è°ƒå…¥å†…å­˜è¿è¡Œã€‚</p><h4 id="1-1-4-å¾®æœºç³»ç»Ÿçš„å¯åŠ¨å’Œæ“ä½œç³»ç»Ÿçš„è£…è½½"><a href="#1-1-4-å¾®æœºç³»ç»Ÿçš„å¯åŠ¨å’Œæ“ä½œç³»ç»Ÿçš„è£…è½½" class="headerlink" title="1.1.4 å¾®æœºç³»ç»Ÿçš„å¯åŠ¨å’Œæ“ä½œç³»ç»Ÿçš„è£…è½½"></a>1.1.4 å¾®æœºç³»ç»Ÿçš„å¯åŠ¨å’Œæ“ä½œç³»ç»Ÿçš„è£…è½½</h4><p>1.BIOSï¼ˆä¸»æ¿è‡ªå¸¦çš„è½¯ä»¶ï¼‰æ˜¯ä¸€ä¸ªROM</p><p>2.å­˜å‚¨å™¨åœ°å€  </p><h3 id="1-2-IA-32-å¾®å¤„ç†å™¨ä½“ç³»ç»“æ„"><a href="#1-2-IA-32-å¾®å¤„ç†å™¨ä½“ç³»ç»“æ„" class="headerlink" title="1.2 IA-32 å¾®å¤„ç†å™¨ä½“ç³»ç»“æ„"></a>1.2 IA-32 å¾®å¤„ç†å™¨ä½“ç³»ç»“æ„</h3><p>1.EU  æŒ‡ä»¤</p><p>2.BIU æ¥å£</p><p> CS SS DS ES IP  å†…éƒ¨æš‚å­˜å™¨â€”â€”&gt;é€šè¿‡åœ°å€çš„åŠ æ³•å™¨ â€”â€”&gt;æ€»çº¿æ§åˆ¶é€»è¾‘ â€”â€”&gt;æŒ‡ä»¤å¯¹ç«‹å¯„å­˜å™¨</p>]]></content>
      
      
      <categories>
          
          <category> å¾®æœºè¯¾ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®æœºç†è®º </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¬”è®°æ¨¡æ¿</title>
      <link href="/2022/08/27/%E4%BB%A3%E7%A0%81%E5%BF%AB%E6%BC%94%E7%A4%BA/%E6%BC%94%E7%A4%BA/"/>
      <url>/2022/08/27/%E4%BB%A3%E7%A0%81%E5%BF%AB%E6%BC%94%E7%A4%BA/%E6%BC%94%E7%A4%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="Page-æ¨¡æ¿"><a href="#Page-æ¨¡æ¿" class="headerlink" title="Page æ¨¡æ¿"></a>Page æ¨¡æ¿</h1><p> title: ã€å¿…é¡»ã€‘ é¡µé¢æ ‡é¢˜<br> date: ã€å¿…éœ€ã€‘é¡µé¢åˆ›å»ºæ—¥æœŸ<br> updated: ã€å¯é€‰ã€‘é¡µé¢æ›´æ–°æ—¥æœŸ<br> type: ã€å¿…éœ€ã€‘æ ‡ç­¾ã€åˆ†ç±»å’Œå‹æƒ…é“¾æ¥ä¸‰ä¸ªé¡µé¢éœ€è¦é…ç½®<br> comments: ã€å¯é€‰ã€‘æ˜¾ç¤ºé¡µé¢è¯„è®ºæ¨¡å—(é»˜è®¤ true)<br> description: ã€å¯é€‰ã€‘é¡µé¢æè¿°<br> keywords: ã€å¯é€‰ã€‘é¡µé¢å…³é”®å­—<br> top_img: ã€å¯é€‰ã€‘é¡µé¢é¡¶éƒ¨å›¾ç‰‡<br> highlight_shrink: ã€å¯é€‰ã€‘é…ç½®ä»£ç æ¡†æ˜¯å¦å±•å¼€(true/false)(é»˜è®¤ä¸ºè®¾ç½®ä¸­highlight_shrinkçš„é…ç½®)</p><p> git config â€”global http.sslVerify â€œfalseâ€<br> git config â€”global â€”unset http.proxy<br> git config â€”global â€”unset https.proxy</p><h3 id="ç›´æ¥å¤åˆ¶"><a href="#ç›´æ¥å¤åˆ¶" class="headerlink" title="ç›´æ¥å¤åˆ¶"></a>ç›´æ¥å¤åˆ¶</h3><p> title:<br> date:<br> type:<br> comments:<br> description:<br> keywords:<br> updated:<br> top_img:<br> highlight_shrink:</p><h1 id="æ–‡ç« è®¾ç½®"><a href="#æ–‡ç« è®¾ç½®" class="headerlink" title="æ–‡ç« è®¾ç½®"></a>æ–‡ç« è®¾ç½®</h1><p> title: ã€å¿…éœ€ã€‘æ–‡ç« æ ‡é¢˜<br> date: ã€å¿…éœ€ã€‘æ–‡ç« åˆ›å»ºæ—¥æœŸ<br> updated: ã€å¯é€‰ã€‘æ–‡ç« æ›´æ–°æ—¥æœŸ<br> tags: ã€å¯é€‰ã€‘æ–‡ç« æ ‡ç­¾<br> categories: ã€å¯é€‰ã€‘æ–‡ç« åˆ†ç±»<br> keywords: ã€å¯é€‰ã€‘æ–‡ç« å…³é”®å­—<br> description: ã€å¯é€‰ã€‘æ–‡ç« æè¿°<br> top_img: ã€å¯é€‰ã€‘æ–‡ç« é¡¶éƒ¨å›¾ç‰‡<br> cover:ã€å¯é€‰ã€‘æ–‡ç« ç¼©ç•¥å›¾(å¦‚æœæ²¡æœ‰è®¾ç½®top_img,æ–‡ç« é¡µé¡¶éƒ¨å°†æ˜¾ç¤ºç¼©ç•¥å›¾ï¼Œå¯è®¾ä¸ºfalse/å›¾ç‰‡åœ°å€/ç•™ç©º)<br> copyright: ã€å¯é€‰ã€‘æ˜¾ç¤ºæ–‡ç« ç‰ˆæƒæ¨¡å—(é»˜è®¤ä¸ºè®¾ç½®ä¸­post_copyrightçš„enableé…ç½®<br> copyright_author: ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…<br> copyright_author_href: ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« ä½œè€…é“¾æ¥<br> copyright_url: ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„æ–‡ç« è¿ç»“é“¾æ¥<br> copyright_info: ã€å¯é€‰ã€‘æ–‡ç« ç‰ˆæƒæ¨¡å—çš„ç‰ˆæƒå£°æ˜æ–‡å­— </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>LeeCode</title>
      <link href="/2022/03/11/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/Leecode%E5%88%B7%E9%A2%98/"/>
      <url>/2022/03/11/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0/Leecode%E5%88%B7%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="Leecodeåˆ·é¢˜"><a href="#Leecodeåˆ·é¢˜" class="headerlink" title="Leecodeåˆ·é¢˜"></a>Leecodeåˆ·é¢˜</h1><ol><li>ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º <code>n</code> çš„æ•´æ•°æ•°ç»„ <code>height</code> ã€‚æœ‰ <code>n</code> æ¡å‚çº¿ï¼Œç¬¬ <code>i</code> æ¡çº¿çš„ä¸¤ä¸ªç«¯ç‚¹æ˜¯ <code>(i, 0)</code> å’Œ <code>(i, height[i])</code> ã€‚</li></ol><p>æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ <code>x</code> è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚</p><p>è¿”å›å®¹å™¨å¯ä»¥å‚¨å­˜çš„æœ€å¤§æ°´é‡ã€‚</p><p><strong>è¯´æ˜ï¼š</strong>ä½ ä¸èƒ½å€¾æ–œå®¹å™¨ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303131403806.jpeg" alt="img"></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">è¾“å…¥ï¼š[<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">8</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>]<br>è¾“å‡ºï¼š<span class="hljs-number">49</span> <br>è§£é‡Šï¼šå›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„ [<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">8</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>]ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º <span class="hljs-number">49</span>ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>æ€è·¯åˆ†æ</strong>:å¯¹äºè¯¥æƒ…å†µæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆçš„æ€æƒ³æ¥è¿›è¡Œæ±‚è§£ï¼Œé¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘ä¸¤ä¾§ï¼Œå°±å¦‚ç¬¬0æ ¹å’Œç¬¬8æ ¹ç„¶åå¾—å‡ºå½“å‰çš„å®¹é‡å¤§å°ä¸º1<em>8=8ï¼Œå› ä¸ºä¸¤æ ¹æŸ±å­çš„æœ€ä½é«˜åº¦ä¸º1ï¼Œé€‰æœ€ä½çš„è¿›è¡Œè®¡ç®—ï¼Œä¸‹æ¥æˆ‘ä»¬ç»§ç»­åˆ†æè¿™ç§æƒ…å†µå› ä¸ºè¦æ±‚è§£æœ€å¤§å®¹é‡ï¼Œä¸ºäº†å‰è¿›å¿…é¡»æ’é™¤æŸ±å­ï¼Œæˆ‘ä»¬ä»ä¸¤æ ¹æœ€ä½çš„æŸ±å­è¿›è¡Œæ’é™¤ï¼Œç¬¬0æ ¹æŸ±å­é«˜åº¦ä¸º1ï¼Œæƒ³ä¸€ä¸‹å¦‚æœç¬¬0æ ¹æŸ±å­åŒ¹é…åˆ°1~7æ ¹æŸ±å­çš„æ—¶å€™ï¼Œå®ƒçš„å®½åº¦å†é™ä½ï¼Œè€Œä»–çš„<strong>æœ€ç»ˆè®¡ç®—çš„é«˜åº¦ï¼ˆä¸¤æ ¹æŸ±å­çš„æœ€å°å€¼ï¼‰</strong>ç»å¯¹ä¸ä¼šè¶…è¿‡å½“å‰<strong>ç¬¬0æ ¹æŸ±å­</strong>æ‰€ä»¥å½“å‰çš„å®¹é‡å°±æ˜¯ç¬¬0æ ¹æŸ±å­å‚ä¸æ‰€èƒ½å¾—åˆ°çš„æœ€å¤§å®¹é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥<strong>è®°å½•å½“å‰çš„å®¹é‡</strong>ï¼Œæ¥ç€<em>*æ’é™¤ç¬¬0æ ¹æŸ±å­</em></em>ã€‚</p><p>   å½“ç¬¬0æ ¹æŸ±å­æ’é™¤ä»¥åï¼Œå®šä¹‰çš„åŒæŒ‡é’ˆå‡è®¾iä¸ºå·¦æŒ‡é’ˆjä¸ºå³æŒ‡é’ˆï¼Œæ’é™¤0åi++,jè¿˜æ˜¯ç­‰äº8ï¼Œæ­¤æ—¶å®¹å™¨çš„åŒºé—´ä¸º1~8ï¼Œè®¡ç®—å…¶å®¹é‡ä¸º7<em>7=49ï¼Œæœ€å°çš„æŸ±å­ä¸ºç¬¬8æ ¹ï¼Œæ¥ç€æˆ‘ä»¬ç»§ç»­æƒ³ä¸‹å»ï¼Œå’Œç¬¬8æ ¹è¿›è¡ŒåŒ¹é…çš„æŸ±å­æ˜¯ä¸æ˜¯å½“å‰çš„å®¹é‡æ˜¯æœ€å¤§çš„ï¼Œ<em>*ä¸ç›¸ä¿¡ï¼Ÿ</em></em><span class="github-emoji"><span>ğŸ¤£</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f923.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> ä½ æ¥ç€æ‹¿ç¬¬ 2~7æ ¹æŸ±å­åˆ†æä¸€æ³¢ï¼Œä½ ä¼šæƒŠå¥‡çš„å‘ç°ï¼Œå’¦ï¼Ÿ<span class="github-emoji"><span>ğŸ˜³</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f633.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> å®ƒçš„å®½åº¦é€æ¸é™ä½ï¼Œç„¶è€Œå®ƒçš„æœ€é«˜çš„é«˜åº¦ä¹Ÿä¸ä¼šè¶…è¿‡ç¬¬8æ ¹æŸ±å­ï¼Œå“ˆå“ˆå“ˆå¥‡å¦™å§ï¼æ‰€ä»¥å½“å‰çš„å®¹é‡è®°å½•çš„å°±æ˜¯ç¬¬8æ ¹æŸ±å­èƒ½è¾¾åˆ°çš„æœ€å¤§å®¹é‡ï¼Œç„¶åæ›´æ–°å½“å‰çš„å®¹é‡å€¼ï¼Œç»§ç»­æ‹¿ä¸‹ä¸€ä¸ªæŸ±å­å¼€åˆ€ï¼Œå½“ç„¶æ˜¯è¦ä»ä½ å½“å‰è®°å½•çš„é‚£ä¸ªæŸ±å­å¼€å§‹äº†ï¼Œå¦‚æœæŸ±å­åœ¨å·¦è¾¹i++ï¼ŒæŸ±å­åœ¨å³ä¾§jâ€”;æ‰€ä»¥æ€è·¯å°±å¾ˆæ˜ç¡®å•¦ï¼š</p><ol><li>å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆi,jåˆ†åˆ«æŒ‡å‘0å’Œlen-1ï¼Œæ¥ç€å®šä¹‰ä¸€ä¸ªæœ€å¤§å®¹é‡maxCup;<span class="github-emoji"><span>âœ”</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></li><li>ä¸€ä¸ªå¾ªç¯åªæœ‰å½“ç¬¦åˆi<jæ˜¯å¾ªç¯ç»§ç»­å˜¿å˜¿<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"><span class="github-emoji"><span>âœ”</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2714.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></jæ˜¯å¾ªç¯ç»§ç»­å˜¿å˜¿<span></li><li>åœ¨å†…æµ‹é¦–å…ˆéœ€è¦å¾—åˆ°å½“å‰çš„å®¹é‡ç®€å•çš„è®¡ç®—(j-i)*(æœ€å°çš„é«˜åº¦minHeight(i,j))ï¼Œè®¡ç®—åæ›´æ–°æœ€å¤§å€¼</li><li>ç„¶åå®¹å™¨çš„å®½åº¦å¼€å§‹æ”¶ç¼©ï¼Œå¦‚æœheight[i]&lt;height[j]è¯´æ˜å³è¾¹ä¸åŠ¨ï¼Œå·¦è¾¹æ”¶ç¼©å“ˆå“ˆå“ˆï¼Œå¾ˆniceåä¹‹å°±å³è¾¹æ”¶ç¼©ï¼Œå¦‚æœä¸¤è€…ç›¸ç­‰ï¼Œæ”¶ç¼©é‚£è¾¹éƒ½å¯ä»¥è¿™æ ·å°±è§£å†³äº†ã€‚</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">maxArea</span><span class="hljs-params">(<span class="hljs-type">int</span>[] height)</span> {<br>    <span class="hljs-type">int</span> res=<span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> j=height.length-<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (i&lt;j){<br>    <span class="hljs-type">int</span> area=(j-i)*Math.min(height[i],height[j]);<br>    res=Math.max(area,res);<br>    <span class="hljs-keyword">if</span> (height[i]&lt;height[j]){<br>    i++;<br>}<span class="hljs-keyword">else</span> {<br>    j--;<br>}<br>}<br>    <span class="hljs-keyword">return</span> res;<br>    }<br>}<br>}<br></code></pre></td></tr></tbody></table></figure><p>15.ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ <code>[nums[i], nums[j], nums[k]]</code> æ»¡è¶³ <code>i != j</code>ã€<code>i != k</code> ä¸” <code>j != k</code> ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ <code>nums[i] + nums[j] + nums[k] == 0</code> ã€‚è¯·</p><p>ä½ è¿”å›æ‰€æœ‰å’Œä¸º <code>0</code> ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p><p><strong>æ³¨æ„ï¼š</strong>ç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4]<br>è¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]]<br>è§£é‡Šï¼š<br>nums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0 ã€‚<br>nums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0 ã€‚<br>nums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0 ã€‚<br>ä¸åŒçš„ä¸‰å…ƒç»„æ˜¯ [-1,0,1] å’Œ [-1,-1,2] ã€‚<br>æ³¨æ„ï¼Œè¾“å‡ºçš„é¡ºåºå’Œä¸‰å…ƒç»„çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnums = [0,1,1]<br>è¾“å‡ºï¼š[]<br>è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸ä¸º 0 ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>3 &lt;= nums.length &lt;= 3000</code></li><li><code>-105 &lt;= nums[i] &lt;= 105</code></li></ul><p><strong>è§£é¢˜æ€è·¯ï¼š</strong></p><p>å¦‚æœéœ€è¦è¿›è¡Œæœå¯»ä¸‰æ•°ä¹‹å’Œå…ˆæ¥ç…ç…å¤§ä¸»çº¿çš„æ–¹å‘</p><ul><li>å…ˆå¯¹numsæ•°ç»„è¿›è¡Œæ’åºï¼ˆä»å°åˆ°å¤§è¿›è¡Œæ’åºï¼‰</li><li>å›ºå®šä¸€ä¸ªå€¼ï¼Œæ¥è¿›è¡Œä¸¤æ•°ä¹‹å’Œçš„æ±‚å€¼</li><li>å»é™¤é‡å¤çš„æ•°ç»„å…ƒç´ </li></ul><p>æ‰€ä»¥ä¸‹æ¥åˆ†æå°±å¯ä»¥å¾ˆå®¹æ˜“å¾—çŸ¥é“ä¸€ä¸ªå¥½çš„è§£é¢˜æ€è·¯å°±ä¸Šæ¥äº†<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>é¦–å…ˆå¯¹æ•°ç»„æ’åºä¼šæŠŠï¼Œä¸€ä¸ªsortå‡½æ•°ï¼Œå…¶æ¬¡å¼€å§‹è¿›è¡Œä¸€ä¸ªå…ƒç´ å¾—å›ºå®šï¼Œç®€å•ä¸€ä¸ªwhileå¾ªç¯ï¼Œä»i=0å¼€å§‹åˆ°æ•°ç»„å¾—é•¿åº¦å‡å»2ä¸ºæ­¢ï¼ˆåˆ‡è®°ä¸èƒ½ç›´æ¥éå†åˆ°æœ€åä¸€ä½äº†ï¼Œä¹Ÿå°±æ˜¯æœ€èµ·ç ä½ å¾—ç•™ä¸€ä¸ªä¸‰å…ƒç»„åœ¨é‡Œå§<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¹Ÿå°±æ˜¯åˆ°å€’æ•°ç¬¬ä¸‰ä¸ªå…ƒç´ å°±å¾—åˆ¹è½¦ ï¼ï¼‰</p><p>ä¸¾ä¸ª<span class="github-emoji"><span>ğŸŒŸ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f31f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ•°ç»„[-4,-1,-1,-1,0,1,2]é¦–å…ˆæˆ‘ä»¬å›ºå®šç¬¬ä¸€ä¸ªå…ƒç´ ä¹Ÿå°±æ˜¯-4ï¼Œç„¶åç®€åŒ–ä¸‰æ•°ä¹‹å’Œä¸ºä¸¤æ•°ä¹‹å’Œï¼Œå¯ä»¥ç”¨ä¸¤ä¸ªæŒ‡é’ˆä¸€ä¸ªæŒ‡å‘-1ä¸€ä¸ªæŒ‡å‘2ï¼Œç„¶åæˆ‘ä»¬è¿›è¡Œä¸€ä¸ªéå†æ±‚å’Œæ“ä½œï¼Œæ¯æ¬¡æ“ä½œåªè¦æŠŠ-4å¸¦ä¸Šå°±è¡Œ<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å°±å¥½æ¯”ä»–æ˜¯ä¸€ä¸ªå·²ç»çŸ¥é“å¾—å…ƒç´ ï¼Œä½ è¿™æ ·çœ‹é¦–å…ˆæ˜¯-1+2-4=-3&lt;0ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥è€ƒè™‘å°†å·¦æŒ‡é’ˆå‘å‰ç§»åŠ¨ä¸€ä½å‘ç°è¿˜æ˜¯-1-4+2=-3ï¼Œä¸ç€æ€¥æ¥ç€å·¦ç§»-4+2+0=-2ï¼Œæ¥ç€å·¦ç§»ç›´åˆ°ç§»åˆ°æœ€åä¸€ä½å¾—æ—¶å€™å‘ç°ï¼Œå’¦?<span class="github-emoji"><span>â“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2753.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç«Ÿç„¶å…¨æ˜¯å°äº0å¾—æ•°å­—ï¼Œæ‰€ä»¥ç»“æœæ˜¯æ‰¾ä¸åˆ°ï¼Œä»å¼€å§‹åŠ åˆ°ç°åœ¨æˆ‘ä»¬å‘ç°ä¸€ä¸ªå¾ˆæœ‰è¶£å¾—ç°è±¡ï¼Œå°±æ˜¯æ‰€æœ‰çš„ç»“æœå…¨éƒ¨éƒ½å°äºé›¶æ‰€ä»¥å½“å‰ä½ å›ºå®šçš„ç¬¬ä¸€ä¸ªæ•°-4æ˜¯æ— æ•ˆçš„ <span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>æ‰€ä»¥å’±å°±å›ºå®šç¬¬äºŒä¸ªæ•°å§ï¼Œä¸ç€æ€¥ç¬¬äºŒä¸ªæ•°å­—æ˜¯-1ï¼Œæ¥ç€æŒ‰ç…§ä¸Šè¿°çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥å¿«ä¹çš„å‘ç°-1-1+2=0å’¦<span class="github-emoji"><span>â“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2753.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ˜¥å¤©æ¥äº†ï¼Œæ‰¾åˆ°ä¸€ä¸ªï¼Œç„¶åå¾ˆç®€å•ç›´æ¥åŠ å…¥å°±è¡Œï¼ŒåŠ å…¥åä½ ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå†æ¬¡å¾ªç¯æ“ä½œä¸€ç•ªåå‘ç°ä¸‰ä¸ª-1è¿æ‹å‡ºç°äº†ç»“æœ[-1,-1,2]å‡ºç°äº†ä¸¤æ¬¡ï¼Œæ‰€ä»¥æ˜¯ä¸æ˜¯æƒ³åˆ°äº†å»é‡<span class="github-emoji"><span>ğŸ˜¸</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f638.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å¾ˆç®€å•ï¼Œå› ä¸ºè¿™ä¸ªæ•°ç»„æ˜¯æœ‰åºçš„èƒ½æƒ³åŒï¼Œè¯´æ˜è¿™ä¸ªæ•°å­—é‡å¤çš„å‡ºç°äº†ï¼Œæ‰€ä»¥è®°å½•å½“å‰é‡å¤çš„æ•°(å¯ä¸æ˜¯å›ºå®šçš„æ•°å­—ç†¬å°±æ¯”å¦‚å›ºå®šæ•°å­—-1é‡å¤æ•°å­—-2é‚£å°±è®°å½•-2)ç„¶åè®©æŒ‡é’ˆè¿›è¡Œ++è¿›è¡Œä¸€ä¸ªåç§»é—´æ¥çš„å»é™¤é‡å¤å…ƒç»„.</p><p>æœ€åå‘¢ï¼Œä½ ä»¥ä¸ºå®Œäº†ï¼Œnononoè¿˜æœ‰å‘¢å½“ä½ è¿”å›åˆ°å›ºå®šçš„æ•°å­—ï¼Œæœ‰æ²¡æœ‰è€ƒè™‘åˆ°ï¼Œå›ºå®šçš„æ•°å­—ä¹Ÿèƒ½é‡å¤ï¼Œåˆæ˜¯ä¸€ä¸ªå¤§å‘ï¼Œæ‰€ä»¥åœ¨å›ºå®šæ•°å­—çš„åœ°æ–¹ä¹Ÿè¿›è¡Œä¸€ä¸ªé‡å¤å»é‡ï¼Œæœ€åç»“æœå°±å‡ºæ¥äº†;ä»£ç å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>       <span class="hljs-keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="hljs-title function_">threeSum</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> {<br>           <span class="hljs-comment">//å›ºå®šä¸€ä¸ªå€¼ç„¶åè¿›è¡Œè½¬åŒ–ï¼Œæ±‚è§£ä¸¤æ•°ä¹‹å’Œçš„é—®é¢˜</span><br>           <span class="hljs-comment">//éœ€è¦å»é™¤é‡å¤çš„ä¸‰å…ƒç»„</span><br>           Arrays.sort(nums);<br>           <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, len = nums.length;<br>           List&lt;List&lt;Integer&gt;&gt; res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>           <span class="hljs-comment">//æ­¤å¤„çš„iä»æœ€å·¦è¾¹å¼€å§‹ä¸ä¼šåˆ°è¾¾æœ€å³è¾¹</span><br>           <span class="hljs-keyword">while</span> (i &lt; len - <span class="hljs-number">2</span>) {<br>               TwoSum(i, nums, res);<br>               <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> nums[i];<br>               <span class="hljs-comment">//æ¥ç€å»é™¤é‡å¤çš„å…ƒç´ </span><br>               <span class="hljs-keyword">while</span> (i &lt; len - <span class="hljs-number">2</span> &amp;&amp; nums[i] == temp) {<br>                   i++;<br>               }<br>           }<br>           <span class="hljs-keyword">return</span> res;<br>       }<br><br>       <span class="hljs-comment">//-4 -1 -1 0 1 2</span><br>       <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">TwoSum</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span>[] nums, List&lt;List&lt;Integer&gt;&gt; res)</span> {<br>           <span class="hljs-type">int</span> <span class="hljs-variable">p1</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>;<br>           <span class="hljs-type">int</span> <span class="hljs-variable">p2</span> <span class="hljs-operator">=</span> nums.length - <span class="hljs-number">1</span>;<br>           <span class="hljs-comment">//è¿™é‡Œæ˜¯å§iç»™å›ºå®šäº†æ‰€ä»¥åªéœ€è¦æ±‚è§£p1å’Œp2ä¹‹å’Œå°±å¯ä»¥äº†</span><br>           <span class="hljs-keyword">while</span> (p1 &lt; p2) {<br>               <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> nums[p1] + nums[p2] + nums[i];<br>               <span class="hljs-keyword">if</span> (temp &gt; <span class="hljs-number">0</span>) {<br>                   p2--;<br>               } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (temp &lt; <span class="hljs-number">0</span>) {<br>                   p1++;<br>               } <span class="hljs-keyword">else</span> {<br>                   List&lt;Integer&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>                   list.add(nums[p1]);<br>                   list.add(nums[p2]);<br>                   list.add(nums[i]);<br>                   res.add(list);<br>                   <span class="hljs-type">int</span> <span class="hljs-variable">temp1</span> <span class="hljs-operator">=</span> nums[p1];<br>                   <span class="hljs-comment">//éœ€è¦é™¤å»é‡å¤çš„ä¸‰å…ƒç»„</span><br>                   <span class="hljs-keyword">while</span> (p1 &lt; p2 &amp;&amp; nums[p1] == temp1) {<br>                       p1++;<br>                   }<br>               }<br>           }<br><br>       }<br>   }<br></code></pre></td></tr></tbody></table></figure><p>17.ç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­— <code>2-9</code> çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚ç­”æ¡ˆå¯ä»¥æŒ‰ <strong>ä»»æ„é¡ºåº</strong> è¿”å›ã€‚</p><p>ç»™å‡ºæ•°å­—åˆ°å­—æ¯çš„æ˜ å°„å¦‚ä¸‹ï¼ˆä¸ç”µè¯æŒ‰é”®ç›¸åŒï¼‰ã€‚æ³¨æ„ 1 ä¸å¯¹åº”ä»»ä½•å­—æ¯ã€‚</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303132137796.png" alt="img"></p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šdigits = "23"<br>è¾“å‡ºï¼š["ad","ae","af","bd","be","bf","cd","ce","cf"]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šdigits = ""<br>è¾“å‡ºï¼š[]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šdigits = "2"<br>è¾“å‡ºï¼š["a","b","c"]<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>0 &lt;= digits.length &lt;= 4</code></li><li><code>digits[i]</code> æ˜¯èŒƒå›´ <code>['2', '9']</code> çš„ä¸€ä¸ªæ•°å­—ã€‚</li></ul><p><strong>è§£é¢˜æ€è·¯ï¼š</strong></p><p>æœ¬é¢˜çš„ä¸»è¦æ–¹å¼æ˜¯é€’å½’å›æº¯ç®—æ³•ï¼šå…·ä½“çš„è§£é¢˜æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„è‚¯å®šæ˜¯æ‰“è¡¨<span class="github-emoji"><span>ğŸ˜¸</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f638.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¸ä¼šè¿™ä¸ªéƒ½æƒ³ä¸åˆ°å§<span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ‰€ä»¥æ ¹æ®å¾—åˆ°çš„æ•°å­—å¯ä»¥è¿›è¡Œè®¡ç®—äº†ï¼Œæ ¹æ®ç¤ºä¾‹æƒ³åˆ°çš„æ˜¯ä»€ä¹ˆï¼Ÿæ²¡é”™å°±æ˜¯ç¬›å¡å°”ç§¯ï¼Œè¿™ç©æ„å¦‚æœä½ æ‹†å¼€ä¸€ä¸ªä¸€ä¸ªçš„ä¹˜ï¼Œç´¯ä¸æ­»äººæ‰æ€ªï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½å¦è¾Ÿè¹Šå¾„æ¥è§£é¢˜äº†ã€‚è¿™æ¬¡æ¯”è¾ƒæœºåˆ¶çš„æ˜¯å°†ç»“æœå®šä¹‰æˆç§æœ‰å˜é‡ï¼Œå°‘äº†ä¸€ä¸ªä¼ å‚çš„å¿…è¦<span class="github-emoji"><span>ğŸ˜™</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f619.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>åŒæ—¶ä¹Ÿå®šä¹‰ä¸€ä¸ªç§æœ‰çš„StringBuilderæ¥è¿›è¡Œå­—ç¬¦ä¸²çš„<strong>æ‹¼æ¥</strong>ï¼Œæ‹¼æ¥ï¼Ÿå¯¹æ²¡é”™å°±æ˜¯æ‹¼æ¥å˜¿å˜¿ï¼Œçœ‹çœ‹è¿™ä¸ª<strong>éªšæ“ä½œ</strong>å§ï¼é€’å½’çš„è¿›è¡Œ:happy:é€’å½’çš„å‡½æ•°ä¹ŸæŒºç®€å•çš„å‘ƒåªéœ€è¦ä¸€ä¸ªStringå’ŒStringBuilderä»¥åŠä¸€ä¸ªindexï¼ˆè¿™ç©æ„ç”¨äºåˆ é™¤ç”¨çš„ï¼‰æ–¹ä¾¿çš„é€’å½’.</p><p>ä¸‹é¢é€’å½’çš„å¼€å§‹:æœªå¼€å§‹å…ˆè€ƒè™‘ç»“æŸçš„æƒ…å†µ<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä»€ä¹ˆæƒ…å†µç»“æŸå‘¢ï¼Ÿé¦–å…ˆå°±æ˜¯ä¼ å…¥çš„å­—ç¬¦ä¸²çš„é•¿åº¦ä¸º0ä¸ç”¨è¯´ç›´æ¥è¿”å›ï¼Œè¿˜æœ‰ä¸€ç§å°±æ˜¯å½“å‰ä¼ å…¥çš„indexçš„å¤§å°æ­£å¥½ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦<span class="github-emoji"><span>ğŸ˜¸</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f638.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æƒ³åˆ°äº†ä»€ä¹ˆ<span class="github-emoji"><span>â“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2753.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ²¡é”™ç¬›å¡å°”ç§¯çš„ç»“æœï¼Œå¦‚æœdigitalä¸ºä¸¤ä½æ•°é‚£ä¹ˆå®ƒçš„ç¬›å¡å°”ç§¯ç»“æœæ¯ä¸€é¡¹éƒ½æ˜¯ä¸¤ä½æ•°ï¼Œæ‰€ä»¥ä½ æƒ³ä»€ä¹ˆå‘¢?ç›´æ¥å­˜åˆ°ç»“æœä¸­å‘€ï¼ï¼Œå½“ç„¶è¿™æ˜¯æœ€åé€’å½’çš„ç»“æœï¼Œä¸‹é¢å¼€å§‹å™è¿°é€»è¾‘äº†ï¼šå¼€è½¦å¼€å§‹ï¼Œç®€å•æ¯ä¸ªå¾ªç¯é¦–å…ˆå¾—åˆ°çš„è‚¯å®šæ˜¯å½“å‰çš„indexå¯¹åº”çš„å­—ç¬¦ä¸²ï¼Œç„¶åå°±è¿›è¡Œä¸€ä¸ªå­—ç¬¦ä¸²é•¿åº¦çš„éå†ï¼Œé‡è¦çš„æ¥äº†ï¼<strong>é‡è¦çš„æ¥äº†ï¼</strong> åœ¨å¾ªç¯é‡Œé¢ï¼Œé¦–å…ˆå°±æ˜¯å¯¹sbè¿›è¡Œç»­æ¥ï¼Œæ¥ä¸Šåå°±è¦é€’å½’è¿›å»äº†ç„¶åå¦‚æœè¿˜æœ‰çš„è¯å°±ç»§ç»­é€’å½’è¿›å»ï¼Œé‚£æ˜¯å¦ä½ æœ‰ä¸ªé—®é¢˜å°±æ˜¯sbä¼šè¶Šæ¥è¶Šé•¿ï¼<strong>èªæ˜</strong>ï¼Œ ä¸è¿‡åˆ«æ€¥è¿˜æœ‰åæ‹›å‘¢ï¼Œåœ¨é€’å½’ç»“æŸçš„æœ€åæˆ‘ä»¬éœ€è¦æŠŠæ¯æ¬¡æˆ‘ä»¬æ·»åŠ çš„å…ƒç´ åœ¨åˆ é™¤äº†ï¼Œè¿™ä¸å°±æ²¡äº†å—<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æƒŠä¸æƒŠå–œæ„ä¸æ„å¤–<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ‰€ä»¥æ€»ä½“æ¥è¯´å°±æ˜¯åŠ ä¸€ä¸ªåˆ é™¤ä¸€ä¸ªï¼Œå“ˆå“ˆå“ˆçœ‹çœ‹å…·ä½“çš„å®ä¾‹è¿‡ç¨‹ä½ å°±æ˜ç™½äº†.</p><p>æ¯”å¦‚ä¸¤ä¸ªå­—ç¬¦ä¸²ç¬›å¡å°”ç§¯  abcã€efgï¼š</p><ul><li>é¦–å…ˆå–å‡ºaæ¥å…¥sbä¸­,æ¥ç€é€’å½’è¿›å»å°±åˆ°äº†efgæ¥ç€å†å–å‡ºeæ¥ç»­åˆ°açš„åé¢ï¼Œå½“å†é€’å½’è¿›å»çš„æ—¶å€™ä¼šå‘ç°str=indexæ‰€ä»¥è¿™ä¸ªefå°±æ·»åŠ åˆ°äº†ç»“æœä¸­ï¼Œæ¥ç€å›æº¯åˆ°ä¸Šä¸€çº§å°±æ˜¯åˆšåˆšæŠŠeæ·»åŠ å†å°¾éƒ¨,æ¥ç€å’±å†æŠŠè¿™ä¸ªeä¸ªå»é™¤äº†ï¼Œåœ¨ä¸€ä¸ªforå¾ªç¯ä¸­æ¥ç€å¼€å§‹å¯¹fè¿›è¡Œæ‹¼æ¥<span class="github-emoji"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></li><li>å½“aå’Œefgé€ä¸ªæ‹¼æ¥å®Œæˆåï¼Œå†é€’å½’å‡ºæœ€å¤–å±‚ï¼Œå°†aç»™åˆ é™¤äº†ä¸‹æ¥å°±è¿›è¡Œbçš„é€’å½’<span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></li><li>ç„¶åå°±ç›´æ¥è¾“å‡ºç»“æœå°±è¡Œäº†</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>       <span class="hljs-comment">//å›æº¯ç®—æ³•</span><br>    <span class="hljs-comment">//é¦–å…ˆè¿›è¡Œæ‰“è¡¨</span><br>       String digitsMap[] = {<span class="hljs-string">""</span>, <span class="hljs-string">""</span>, <span class="hljs-string">"abc"</span>, <span class="hljs-string">"def"</span>, <span class="hljs-string">"ghi"</span>, <span class="hljs-string">"jkl"</span>, <span class="hljs-string">"mno"</span>, <span class="hljs-string">"pqrs"</span>, <span class="hljs-string">"tuv"</span>, <span class="hljs-string">"wxyz"</span>};<br>       List&lt;String&gt; res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    <span class="hljs-comment">//è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹æ³•</span><br>       <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">stringBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br><br>       <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">letterCombinations</span><span class="hljs-params">(String digits)</span> {<br>           combination(digits, stringBuilder, <span class="hljs-number">0</span>);<br>           <span class="hljs-keyword">return</span> res;<br>       }<br>        <span class="hljs-keyword">void</span> <span class="hljs-title function_">combination</span><span class="hljs-params">(String str, StringBuilder sb, <span class="hljs-type">int</span> index)</span> {<br>           <span class="hljs-keyword">if</span> (str.length() == <span class="hljs-number">0</span>) {<br>               <span class="hljs-keyword">return</span>;<br>           }<br>           <span class="hljs-keyword">if</span> (index == str.length()) {<br>               res.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(sb));<br>               <span class="hljs-keyword">return</span>;<br>           }<br>           <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> str.charAt(index);<br>           <span class="hljs-type">int</span> <span class="hljs-variable">pos</span> <span class="hljs-operator">=</span> c - <span class="hljs-string">'0'</span>;<br>           <span class="hljs-type">String</span> <span class="hljs-variable">currentStr</span> <span class="hljs-operator">=</span> digitsMap[pos];<br>           <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; currentStr.length(); i++) {<br>               sb.append(currentStr.charAt(i));<br>               <span class="hljs-comment">//æ·±å…¥é€’å½’ç®—æ³•</span><br>               combination(str, sb, index + <span class="hljs-number">1</span>);<br>               sb.deleteCharAt(index);<br>           }<br>       }<br>   }<br></code></pre></td></tr></tbody></table></figure><p>21.å°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ <strong>å‡åº</strong> é“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303132313967.jpeg" alt="img"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šl1 = [1,2,4], l2 = [1,3,4]<br>è¾“å‡ºï¼š[1,1,2,3,4,4]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šl1 = [], l2 = []<br>è¾“å‡ºï¼š[]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šl1 = [], l2 = [0]<br>è¾“å‡ºï¼š[0]<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li>ä¸¤ä¸ªé“¾è¡¨çš„èŠ‚ç‚¹æ•°ç›®èŒƒå›´æ˜¯ <code>[0, 50]</code></li><li><code>-100 &lt;= Node.val &lt;= 100</code></li><li><code>l1</code> å’Œ <code>l2</code> å‡æŒ‰ <strong>éé€’å‡é¡ºåº</strong> æ’åˆ—</li></ul><p><strong>è§£é¢˜æ€è·¯ï¼š</strong></p><p>æœ¬é¢˜è¯´éš¾çš„è¯ç‰¹åˆ«éš¾ï¼Œè¯´ç®€å•çš„è¯ç‰¹åˆ«ç®€å•ï¼Œåªè¦æœ‰ä¸€ä¸ªé€’å½’çš„æ€æƒ³<span class="github-emoji"><span>ğŸ˜º</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f63a.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å•¥éƒ½ä¸æ˜¯äº‹ï¼Œè€è€å®å®çš„å¼€å§‹å¼€è½¦è®²è§£ï¼š</p><p>è¿™å°±æ˜¯ä¸€ä¸ªç®€å•çš„åŒé“¾è¡¨è¿›è¡Œåˆå¹¶ï¼Œæ ¹æ®é¢˜ç›®å¯ä»¥çŸ¥é“å¦‚æœlist1ä¸ºç©ºè¿”å›list2ï¼Œåä¹‹åˆ™è¿”å›list1ï¼Œæ‰€ä»¥ä¸€åˆ‡è²Œä¼¼å˜å¾—ç®€å•äº†èµ·æ¥ï¼Œæˆ‘ä»¬ä»¥ä¸¤ä¸ªé“¾è¡¨æ¥çœ‹,å¦‚æœlist1çš„å€¼å°äºlist2çš„å€¼åˆ™å¯¹list1é“¾è¡¨æ¥è¿›è¡Œæ“ä½œï¼Œè®©list1çš„ä¸‹ä¸€ä¸ªæŒ‡å‘å¦å¤–ä¸¤ä¸ªé“¾è¡¨çš„åˆå¹¶ï¼Œå¦‚æœlist1çš„å€¼å¤§äºç­‰äºlist2åˆ™è®©list2çš„ä¸‹ä¸€ä¸ªæŒ‡å‘å¦å¤–ä¸¤ä¸ªé“¾è¡¨çš„åˆå¹¶ï¼Œè¿™é‡Œæˆ‘ä¹Ÿè¯´çš„æ¨¡æ¨¡ç³Šç³Šçš„å¤§æ¦‚å°±æ˜¯è¿™ä¸ªæ„æ€é€’å½’çš„åŠ å…¥é“¾è¡¨ï¼Œæ¯æ¬¡éƒ½åŠ å…¥æœ€å°çš„å€¼ã€‚</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"> <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">mergeTwoLists</span><span class="hljs-params">(ListNode list1, ListNode list2)</span> {<br><span class="hljs-keyword">if</span> (list1 == <span class="hljs-literal">null</span>){<br><span class="hljs-keyword">return</span> list2;<br>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (list2 == <span class="hljs-literal">null</span>){<br><span class="hljs-keyword">return</span> list1;<br>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (list1.val&lt; list2.val){<br>list1.next=mergeTwoLists(list1.next,list2);<br><span class="hljs-keyword">return</span> list1;<br>}<span class="hljs-keyword">else</span> {<br>list2.next=mergeTwoLists(list1,list2.next);<br><span class="hljs-keyword">return</span> list2;<br>}<br>   }<br></code></pre></td></tr></tbody></table></figure><p>22.æ‹¬å·çš„ç”Ÿæˆ</p><p>æ•°å­— <code>n</code> ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” <strong>æœ‰æ•ˆçš„</strong> æ‹¬å·ç»„åˆã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šn = 3<br>è¾“å‡ºï¼š["((()))","(()())","(())()","()(())","()()()"]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šn = 1<br>è¾“å‡ºï¼š["()"]<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= n &lt;= 8</code></li></ul><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303140839555.png" alt="æ ‘çš„åˆ†ç±»"></p><p><strong>è§£é¢˜æ€è·¯ï¼š</strong></p><p>å…¶å®è¿™é“é¢˜ä¹Ÿéå¸¸çš„ç®€å•<span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å°±å¦‚ä¸Šé¢çš„å›¾æ¸…æ™°æ˜ç™½å§ï¼Œå¾ˆå¥½çš„æƒ³æ³•ï¼Œç»™ä½ æ•°å­—nï¼Œé‚£ä¹ˆå³ä¾§å·¦ä¾§å…¨æœ‰nä¸ªï¼Œæˆ‘ä»¬ç”»å‡ºå…³é”®çš„æ ‘<span class="github-emoji"><span>ğŸ˜‹</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60b.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>,ç„¶åå°±å¾—åˆ°äº†ä¸Šè¿°å›¾ï¼Œæˆ‘ä»¬ä¼šæƒŠå¥‡çš„å‘ç°<span class="github-emoji"><span>ğŸ˜®</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f62e.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç«Ÿç„¶è¿˜æœ‰æˆªè‚¢ï¼Œå½“ç„¶å½“å·¦æ‹¬å·çš„æ•°ç›®å°äºå³æ‹¬å·ï¼Œæ— è®ºä½ æ€ä¹ˆåŠ éƒ½ç¬¦åˆä¸äº†ï¼Œå¯¹å§ï¼Ÿ<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç„¶åä¸‹æ¥å°±å¥½æ•´äº†,å…¶ä¸­æœ‰ä¸€ä¸ªå°±æ˜¯<strong>æˆªè‚¢</strong>ï¼Œå¯¹äºç¬¦åˆçš„æˆ‘ä»¬å…ˆé€’å½’çš„è¿›è¡Œé¦–å…ˆå¯¹å·¦å­æ ‘ä¸€è·¯é€’å½’åˆ°åº•ï¼Œæ¯æ¬¡left-1ï¼Œç„¶å<strong>strä¸Šé¢è¿›è¡ŒåŠ ä¸Šâ€™(â€˜</strong>,å¿˜äº†å¿˜äº†ï¼Œ<strong>å’±ä»¬é€’å½’å…ˆè€ƒè™‘çš„æ˜¯å•¥ï¼Ÿï¼Ÿ</strong><span class="github-emoji"><span>ğŸ˜…</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å½“ç„¶æ˜¯é€’å½’ç»“æŸï¼Œ<span class="github-emoji"><span>ğŸ˜¨</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f628.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ‰€ä»¥å‘¢ï¼Œç»“æŸçš„æ ‡å¿—æ˜¯ä»€ä¹ˆï¼Ÿå½“ç„¶æ˜¯left=right=0äº†ï¼Œæ ¹æ®ä¸Šå›¾å°±èƒ½çœ‹å‡ºï¼Œæ‰€ä»¥å’±ä»¬çš„é€’å½’çš„å‚æ•°å°±æœ‰4ä¸ªç¬¬ä¸€ä¸ªæ˜¯æ¯æ¬¡è¿›è¡ŒåŠ æ‹¬å·çš„strç¬¬äºŒç¬¬ä¸‰ä¸ªæ˜¯leftå’Œrightçš„æ•°å€¼ä¹Ÿå°±æ˜¯nï¼Œæœ€åä¸€ä¸ªåˆ«æƒ³äº†å°±æ˜¯å­˜ç»“æœçš„List<span class="github-emoji"><span>ğŸ˜ª</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f62a.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>,é‚£ä¹ˆæƒ³æ³•å°±éå¸¸ç®€å•äº†ï¼Œå°±å¾€æ­»é‡Œé€’å½’å°±è¡Œäº†ï¼Œå½“ä¸¤ä¸ªéƒ½ç­‰äº0ç›´æ¥åŠ å…¥ç»“æœé€€å‡ºå¾ªç¯ï¼Œåä¹‹å¦‚æœleft&gt;0å°±è°ƒç”¨é€’å½’å‡½æ•°ï¼Œä¸€ç›´é€’å½’åˆ°left=0ï¼Œæ¥ç€å†è°ƒç”¨right&gt;0çš„éƒ¨åˆ†ç›´è‡³é€’å½’åˆ°leftä¹Ÿ=0,<span class="github-emoji"><span>ğŸ˜š</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f61a.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç„¶åç»“æœå°±å‡ºæ¥äº†.å¦‚ä¸‹æ‰€ç¤º:</p><p>kao!çªç„¶å¿˜äº†è¿˜æœ‰æˆªè‚¢å‘¢ï¼Œå°±æ˜¯åœ¨é€’å½’çš„é€”ä¸­å¦‚æœå‘ç°ï¼Œleft&gt;rightç›´æ¥returnä¸ç”¨æƒ³è¿è§„äº†<span class="github-emoji"><span>ğŸ˜ª</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f62a.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å°±è¿™æ ·ï¼</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">generateParenthesis</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> {<br><span class="hljs-comment">//å¯ä»¥è€ƒè™‘æ·±åº¦ä¼˜å…ˆéå†</span><br><br>ArrayList&lt;String&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><span class="hljs-keyword">if</span> (n==<span class="hljs-number">0</span>){<br><span class="hljs-keyword">return</span> result;<br>}<br>dfs(<span class="hljs-string">""</span>,n,n,result);<br><span class="hljs-keyword">return</span> result;<br>}<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(String curStr,<span class="hljs-type">int</span> left,<span class="hljs-type">int</span> right,List&lt;String&gt;res)</span>{<br>    <span class="hljs-keyword">if</span> (left==<span class="hljs-number">0</span>&amp;&amp;right==<span class="hljs-number">0</span>){<br>    res.add(curStr);<br><br>    <span class="hljs-keyword">return</span>;<br>}<br>    <span class="hljs-comment">//éœ€è¦åˆ é™¤ä¸éœ€è¦å½“å·¦ä¾§å‰©ä½™å¤§äºå³ä¾§ä¹Ÿå°±æ˜¯ä¸æ»¡è¶³äº†æ‹¬å·çš„åŒ¹é…æ³•åˆ™</span><br>    <span class="hljs-keyword">if</span> (left&gt;right){<br>    <span class="hljs-keyword">return</span>;<br>}<br>        <span class="hljs-comment">//å¾€å·¦å­æ ‘æ­»é‡Œé€’å½’</span><br>    <span class="hljs-keyword">if</span> (left&gt;<span class="hljs-number">0</span>){<br>    dfs(curStr+<span class="hljs-string">"("</span>,left-<span class="hljs-number">1</span>,right,res);<br>}<br>        <span class="hljs-comment">//å³å­æ ‘æ­»é‡Œé€’å½’</span><br>    <span class="hljs-keyword">if</span> (right&gt;<span class="hljs-number">0</span>){<br>    dfs(curStr+<span class="hljs-string">")"</span>,left,right-<span class="hljs-number">1</span>,res);<br>}<br>}<br></code></pre></td></tr></tbody></table></figure><p>31.æ•´æ•°æ•°ç»„çš„ä¸€ä¸ª <strong>æ’åˆ—</strong> å°±æ˜¯å°†å…¶æ‰€æœ‰æˆå‘˜ä»¥åºåˆ—æˆ–çº¿æ€§é¡ºåºæ’åˆ—ã€‚</p><ul><li>ä¾‹å¦‚ï¼Œ<code>arr = [1,2,3]</code> ï¼Œä»¥ä¸‹è¿™äº›éƒ½å¯ä»¥è§†ä½œ <code>arr</code> çš„æ’åˆ—ï¼š<code>[1,2,3]</code>ã€<code>[1,3,2]</code>ã€<code>[3,1,2]</code>ã€<code>[2,3,1]</code> ã€‚</li></ul><p>æ•´æ•°æ•°ç»„çš„ <strong>ä¸‹ä¸€ä¸ªæ’åˆ—</strong> æ˜¯æŒ‡å…¶æ•´æ•°çš„ä¸‹ä¸€ä¸ªå­—å…¸åºæ›´å¤§çš„æ’åˆ—ã€‚æ›´æ­£å¼åœ°ï¼Œå¦‚æœæ•°ç»„çš„æ‰€æœ‰æ’åˆ—æ ¹æ®å…¶å­—å…¸é¡ºåºä»å°åˆ°å¤§æ’åˆ—åœ¨ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œé‚£ä¹ˆæ•°ç»„çš„ <strong>ä¸‹ä¸€ä¸ªæ’åˆ—</strong> å°±æ˜¯åœ¨è¿™ä¸ªæœ‰åºå®¹å™¨ä¸­æ’åœ¨å®ƒåé¢çš„é‚£ä¸ªæ’åˆ—ã€‚å¦‚æœä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ’åˆ—ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°ç»„å¿…é¡»é‡æ’ä¸ºå­—å…¸åºæœ€å°çš„æ’åˆ—ï¼ˆå³ï¼Œå…¶å…ƒç´ æŒ‰å‡åºæ’åˆ—ï¼‰ã€‚</p><ul><li>ä¾‹å¦‚ï¼Œ<code>arr = [1,2,3]</code> çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ <code>[1,3,2]</code> ã€‚</li><li>ç±»ä¼¼åœ°ï¼Œ<code>arr = [2,3,1]</code> çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ <code>[3,1,2]</code> ã€‚</li><li>è€Œ <code>arr = [3,2,1]</code> çš„ä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ <code>[1,2,3]</code> ï¼Œå› ä¸º <code>[3,2,1]</code> ä¸å­˜åœ¨ä¸€ä¸ªå­—å…¸åºæ›´å¤§çš„æ’åˆ—ã€‚</li></ul><p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œæ‰¾å‡º <code>nums</code> çš„ä¸‹ä¸€ä¸ªæ’åˆ—ã€‚</p><p>å¿…é¡»<strong><a href="https://baike.baidu.com/item/åŸåœ°ç®—æ³•"> åŸåœ° </a></strong>ä¿®æ”¹ï¼Œåªå…è®¸ä½¿ç”¨é¢å¤–å¸¸æ•°ç©ºé—´ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnums = [1,2,3]<br>è¾“å‡ºï¼š[1,3,2]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnums = [3,2,1]<br>è¾“å‡ºï¼š[1,2,3]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnums = [1,1,5]<br>è¾“å‡ºï¼š[1,5,1]<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= nums.length &lt;= 100</code></li><li><code>0 &lt;= nums[i] &lt;= 100</code></li></ul><p><strong>é¢˜è§£æ€è·¯ï¼š</strong></p><p>æœ¬é¢˜å§ï¼Œæˆ‘æ˜¯æ²¡æœ‰åšå‡ºæ¥ï¼Œä½†æ˜¯ç­”æ¡ˆæ˜¯çœ‹æ‡‚äº†ï¼Œå®ƒè¯´çš„è¿™ä¹ˆå¤šå°±æ˜¯ä¸€ä¸ªæ„æ€ï¼Œç»™ä½ ä¸€ä¸ªå½“å‰çš„æ•°å­—ï¼Œä½ ç»™æˆ‘æ‰¾å‡ºæ¥ï¼Œè¿™äº›æ•°å­—éšæœºç»„åˆåå¹¶è¿›è¡Œæ’åºåï¼Œå½“å‰æ•°å­—çš„ä¸‹ä¸€ä¸ªæœ€å¤§çš„æ•°å­—ï¼Œç­‰ç­‰<span class="github-emoji"><span>ğŸ˜§</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f627.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä½ ä¸ä¼šçœŸçš„å°†ä»–ä»¬éšæœºç»„åˆåŠ æ’åºå§ï¼ï¼ï¼è¿™æ ·èƒ½ç´¯æ­»äººçš„å¥½å§ï¼Œå’±ä»¬æƒ³ä¸€ä¸ªå¥½çš„æ–¹æ³•ä¸é¦™å—ï¼ŸæŒ‰ç…§æˆ‘çš„æ€è·¯æ¥ï¼Œç«Ÿç„¶æ˜¯è¦ç…§ä¸€ä¸ªæ¯”ä»–å¤§ä¸€ä¸¢ä¸¢çš„æ•°å­—ï¼Œå¾ˆç®€å•äº†ï¼Œå’±ä»¬å°±æ”¹åŠ¨æœ€å°ï¼Œè®©å…¶å¢åŠ çš„æœ€å¤šå°±å¥½äº†ï¼Œå…³é”®ç‚¹äº†<strong>æ•²é»‘æ¿</strong><span class="github-emoji"><span>ğŸ˜ˆ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f608.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å’±ä»¬ä»æœ€åçš„ä¸€ä¸ªæ•°å­—å¼€å§‹è¿›è¡ŒæŸ¥æ‰¾ï¼Œå½“ç„¶å¦‚æœè¦äº¤æ¢å‡†ç¡®çš„æ˜¯é‡å€’æ•°ç¬¬äºŒä¸ªæ•°å­—å¼€å§‹ï¼š<span class="github-emoji"><span>ğŸ˜—</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f617.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç„¶åæˆ‘ä»¬æ‰¾åˆ°å½“å‰çš„æ•°å­—å°äºå®ƒçš„ä¸‹ä¸€ä¸ªæ•°å­—çš„ä¸‹æ ‡ï¼Œè¿™ä¸ªç©æ„æ˜¯ä¸ºäº†ç¡®ä¿içš„ä½ç½®ï¼Œä»¥åŠé¢„é˜²ä¸€ç§æƒ…å†µå°±æ˜¯ï¼Œå½“è¿™ä¸ªæ•°å­—æ­£å¥½æ˜¯ä»å°åˆ°å¤§æ’çš„ï¼Œå¦‚æœä¸è¿™æ ·çš„è¯åˆ°æœ€åç›´æ¥G,æ‰€ä»¥æ‰¾åˆ°å½“å‰çš„iå€¼åè¯´æ˜i~n-1ä¸€å®šæœ‰ä¸€ä¸ªæ•°æ˜¯ä»–å°äºçš„ï¼Œæ¥ç€å’±æ‰¾éœ€è¦äº¤æ¢çš„æ•°å­—ï¼Œå†æ¬¡å¾ªç¯ï¼Œæ ¹æ®å¾—åˆ°çš„iæ‰¾åˆ°ç¬¬ä¸€ä¸ª<code>nums[j]&gt;nums[i]</code>çš„å€¼<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ‰¾åˆ°åä¸ç”¨æƒ³å®šä½jï¼Œç›´æ¥å¯¹iï¼Œjä½ç½®çš„å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œä½ ä»¥ä¸ºè¿™æ ·å°±å®Œäº†ï¼Ÿï¼Ÿæƒ³çš„å¤ªç¾å¥½äº†å°±ä¾‹å¦‚ 231ä½ æ‰¾åˆ°äº†i=0,j=1ä¹Ÿå°±æ˜¯2å’Œ3è¿›è¡Œäº¤æ¢ç»“æœ321å®Œç¾ï¼å‘¼æ­»ä½ <span class="github-emoji"><span>ğŸ˜‡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f607.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä½ æŠŠæˆ‘312åƒäº†ï¼Œæˆ‘æ¯”ä½ æ›´æ¥è¿‘å¥½å§ï¼Œæ‰€ä»¥åˆ«å¿ƒæ€¥ï¼Œè¿˜éœ€è¦å¯¹iä¹‹åçš„å…ƒç´ è¿›è¡Œä¸€ä¸ªæ’åºè¿™æ ·å°±å®Œç¾çš„è§£å†³äº†é—®é¢˜!!</p><ul><li>ä»åå¾€å‰æ‰¾åˆ°ç¬¬ä¸€ä¸ªï¼ˆæœ€å¤§ç´¢å¼•ï¼‰æ¯”è‡ªå·±åä¸€ä½å°çš„å…ƒç´ ï¼Œç¡®å®šiçš„ä½ç½®</li><li>ä»åå¾€å‰æ‰¾ç¬¬ä¸€ä¸ªæ¯”nums[i]å¤§çš„å…ƒç´ ä¸‹æ ‡ä¸ºjï¼Œäº¤æ¢ä¸¤ä¸ªä½ç½®çš„å…ƒç´ </li><li>ç¿»è½¬i+1åˆ°n-1çš„å…ƒç´ ,å¾—åˆ°ä¸‹ä¸€ä¸ªåºåˆ—</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">nextPermutation</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> {<br>          <span class="hljs-comment">//153162 iè¦æ‰¾åˆ°æœ€å°çš„ï¼Œjè¦æ‰¾åˆ°åˆšåˆšå¤§äºiä¸€ç‚¹ç‚¹çš„</span><br>          <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> nums.length - <span class="hljs-number">2</span>;<br>          <span class="hljs-comment">//æ‰¾åˆ°å¯¹åº”å¾—iå€¼</span><br>          <span class="hljs-keyword">while</span> (i &gt;= <span class="hljs-number">0</span> &amp;&amp; nums[i] &gt;= nums[i + <span class="hljs-number">1</span>]) {<br>              i--;<br>          }<br>          <span class="hljs-comment">//æ‰¾åˆ°jå¾—å€¼ã€‚å‰ææ˜¯i&gt;0å¦‚æœä¸å¤§äºé›¶è¯´æ˜å•¥ï¼Ÿä»è¯¥åºåˆ—ä»å¤§åˆ°å°å¾—æ’åºï¼Œç›´æ¥åè½¬åºåˆ—å°±è¡Œäº†ï¼Œè¿˜ç®¡å•¥jå¾—äº‹æƒ…</span><br>          <span class="hljs-keyword">if</span> (i &gt;= <span class="hljs-number">0</span>) {<br>              <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> nums.length - <span class="hljs-number">1</span>;<br>              <span class="hljs-keyword">while</span> (j &gt;= <span class="hljs-number">0</span> &amp;&amp; nums[j] &lt;= nums[i]) {<br>                  j--;<br>              }<br>              swap(nums, i, j);<br>          }<br>          reverse(nums, i + <span class="hljs-number">1</span>);<br>      }<br><br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swap</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> {<br>          <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> nums[j];<br>          nums[j] = nums[i];<br>          nums[i] = temp;<br>      }<br>      <span class="hljs-comment">//æé«˜ç®—æ³•å¾—æ•ˆç‡è¿™ä¸ªiä¹‹åå¾—åºåˆ—æ˜¯æœ‰è§„å¾‹çš„ç›´æ¥å¯¹é½è¿›è¡Œé«˜ä½ä½çš„äº¤æ¢å°±è¡Œäº†</span><br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reverse</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> start)</span> {<br>          <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> start;<br>          <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> nums.length - <span class="hljs-number">1</span>;<br>          <span class="hljs-keyword">while</span> (left &lt; right) {<br>              swap(nums, left, right);<br>              left++;<br>              right--;<br>          }<br>      }<br>  }<br></code></pre></td></tr></tbody></table></figure><p>39.ç»™ä½ ä¸€ä¸ª <strong>æ— é‡å¤å…ƒç´ </strong> çš„æ•´æ•°æ•°ç»„ <code>candidates</code> å’Œä¸€ä¸ªç›®æ ‡æ•´æ•° <code>target</code> ï¼Œæ‰¾å‡º <code>candidates</code> ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•° <code>target</code> çš„ æ‰€æœ‰ <strong>ä¸åŒç»„åˆ</strong> ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼è¿”å›ã€‚ä½ å¯ä»¥æŒ‰ <strong>ä»»æ„é¡ºåº</strong> è¿”å›è¿™äº›ç»„åˆã€‚</p><p><code>candidates</code> ä¸­çš„ <strong>åŒä¸€ä¸ª</strong> æ•°å­—å¯ä»¥ <strong>æ— é™åˆ¶é‡å¤è¢«é€‰å–</strong> ã€‚å¦‚æœè‡³å°‘ä¸€ä¸ªæ•°å­—çš„è¢«é€‰æ•°é‡ä¸åŒï¼Œåˆ™ä¸¤ç§ç»„åˆæ˜¯ä¸åŒçš„ã€‚</p><p>å¯¹äºç»™å®šçš„è¾“å…¥ï¼Œä¿è¯å’Œä¸º <code>target</code> çš„ä¸åŒç»„åˆæ•°å°‘äº <code>150</code> ä¸ªã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šcandidates = [2,3,6,7], target = 7<br>è¾“å‡ºï¼š[[2,2,3],[7]]<br>è§£é‡Šï¼š<br>2 å’Œ 3 å¯ä»¥å½¢æˆä¸€ç»„å€™é€‰ï¼Œ2 + 2 + 3 = 7 ã€‚æ³¨æ„ 2 å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚<br>7 ä¹Ÿæ˜¯ä¸€ä¸ªå€™é€‰ï¼Œ 7 = 7 ã€‚<br>ä»…æœ‰è¿™ä¸¤ç§ç»„åˆã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥: candidates = [2,3,5], target = 8<br>è¾“å‡º: [[2,2,2,2],[2,3,3],[3,5]]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥: candidates = [2], target = 1<br>è¾“å‡º: []<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= candidates.length &lt;= 30</code></li><li><code>2 &lt;= candidates[i] &lt;= 40</code></li><li><code>candidates</code> çš„æ‰€æœ‰å…ƒç´  <strong>äº’ä¸ç›¸åŒ</strong></li><li><code>1 &lt;= target &lt;= 40</code></li></ul><p><strong>è§£é¢˜æ€è·¯ï¼š</strong></p><p>çœ‹åˆ°è¿™é“é¢˜æ˜¯ä¸æ˜¯æœ‰ç§ä¼¼æ›¾ç›¸è¯†çš„æ„Ÿè§‰ï¼Ÿ<span class="github-emoji"><span>ğŸ˜‡</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f607.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼æ²¡æœ‰ï¼Ÿæ‰‡ç»™ä½ ä¸¤ä¸ªå…«å¼ ï¼Œå›æº¯å‘€ï¼å¤šä¹ˆå®¹æ˜“å°±èƒ½çœ‹å‡ºçš„æ„Ÿè§‰ï¼Œä½ çœ‹çœ‹è¿™targetæ¯æ¬¡å‡å°‘å®ƒä¸€ç‚¹ç„¶åå†é€’å½’é€’å½’å®Œæˆåå†åŠ è½½è¿‡æ¥ä¸å°±è¡Œäº†è›®,æ‰€ä»¥è›®å…·ä½“æ€è·¯æ¸…æ™°äº†ï¼Œæˆ‘ä»¬å¼€å§‹æ¥è®¨è®ºå‚æ•°äº†ï¼Œç®€å•å›æº¯çš„å‚æ•°è¿™ä¸ªè¿˜ç¡®å®æœ‰ç‚¹å¤šï¼Œè®©äººå¤´å¤§<span class="github-emoji"><span>ğŸ˜ˆ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f608.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¸è¿‡æ²¡å…³ç³»æ…¢æ…¢çš„åˆ†æå°±ç®€æ´æ˜äº†äº†ï¼Œé¦–å…ˆé‚£ä¸ªcandidatesè‚¯å®šæ˜¯éœ€è¦çš„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ªå•¥ï¼Ÿå›æº¯ï¼è‚¯å®šæ˜¯éå†çš„èµ·å§‹å’Œç»“æŸæ•´æ•°å•¦ï¼Œç„¶åè¿˜éœ€è¦ä¸€ä¸ªèƒ½å­˜å‚¨ç»“æœé›†çš„List<list<interger>&gt;æœ€åéœ€è¦ä¸€ä¸ªæ ˆå‘€æ¥ä¾æ¬¡å­˜æ”¾æ·»åŠ çš„å…ƒç´ ä¹Ÿå¯ä»¥ä½¿ç”¨é“¾è¡¨éƒ½å¯ä»¥æ— ä¼¤å¤§é›…<span class="github-emoji"><span>ğŸ˜¯</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f62f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç„¶åä¸€åˆ‡å‡†å¤‡å°±ç»ªå°±å¼€å§‹é€’å½’éå†å•¦ï¼ï¼Ÿï¼Ÿï¼Ÿ<span class="github-emoji"><span>â“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2753.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä½ æ˜¯å¦å¿˜æ‰äº†å•¥ï¼æ²¡é”™é€’å½’ç»“æŸçš„æ¡ä»¶å‘€ï¼ŒçœŸç¬¨ï¼Œè¿™éƒ½ä¸å†™ï¼Œä½ æƒ³ä¸€è¾ˆå­é€’å½’ä¸‹å»ï¼Ÿæ‰€ä»¥ç®€å•çš„åˆ†æä¸€æ³¢ï¼Œé€’å½’çš„ç»“æŸæ— éä¸¤ç§ï¼Œä¸€ç§å°±æ˜¯æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„æ•°ç»„ï¼Œç›´æ¥è¿”å›ï¼Œå¦ä¸€ç§æ˜¯æœ‰ç»“æœäº†ï¼Œå°±æ·»åŠ åˆ°resä¸­å°±è¡Œäº†<span class="github-emoji"><span>ğŸ˜Š</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60a.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ‰€ä»¥å‘¢ï¼Œä½ å°±ç›´æ¥æ·»åŠ å‘€res.add(new ArrayList(stack))è¿™å°±é»˜è®¤ç›´æ¥è½¬æ¢äº†è¿™ä¸å°±ç›´æ¥æ·»åŠ äº†ã€‚</list<interger></p><p>æ¥ç€å°±éœ€è¦äº†è§£å°å›æº¯çš„éƒ¨åˆ†äº†ï¼Œä»–æ¯æ¬¡éƒ½å¾—åˆ°å½“å‰çš„candidatesçš„å€¼å…ˆåŠ å…¥stackä¸­ç„¶åè®©targetå‡å»è¯¥å€¼æ¥ç€æ”¾å…¥åˆ°é€’å½’ä¸­ï¼Œå½“æœ€åçš„ç»“æœå®Œæˆäº†è¿˜éœ€è¦å›æº¯å‘¢ï¼Œéœ€è¦å°†å®ƒçš„å€¼å†åŠ å›æ¥è€Œä¸”ä¹Ÿè¦ç§»é™¤stackçš„æœ€åä¸€ä½å…ƒç´ ï¼Œè¿™æ ·å›æº¯å°±å®Œæˆäº†ä»£ç å¦‚ä¸‹:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="hljs-title function_">combinationSum</span><span class="hljs-params">(<span class="hljs-type">int</span>[] candidates, <span class="hljs-type">int</span> target)</span> {<br><span class="hljs-comment">//ä¸€ä¸ªå›æº¯çš„ç®—æ³•å¾ˆå®¹æ˜“æ€è€ƒçš„</span><br><span class="hljs-type">int</span> len=candidates.length;<br>List&lt;List&lt;Integer&gt;&gt;res=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><span class="hljs-keyword">if</span> (len==<span class="hljs-number">0</span>){<br><span class="hljs-keyword">return</span> res;<br>}<br>Deque&lt;Integer&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>dfs(candidates,<span class="hljs-number">0</span>,len,res,stack,target);<br><span class="hljs-keyword">return</span>  res;<br>}<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> []candidates,<span class="hljs-type">int</span> begin,<span class="hljs-type">int</span> len,List&lt;List&lt;Integer&gt;&gt;res,Deque&lt;Integer&gt; stack,<span class="hljs-type">int</span> target)</span>{<br><span class="hljs-keyword">if</span> (target&lt;<span class="hljs-number">0</span>){<br><span class="hljs-keyword">return</span>;<br>}<br><span class="hljs-keyword">if</span> (target==<span class="hljs-number">0</span>){<br>res.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(stack));<br><span class="hljs-keyword">return</span>;<br>}<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=begin;i&lt;len;i++){<br>stack.addLast(candidates[i]);<br>target-=candidates[i];<br>dfs(candidates,i,len,res,stack,target);<br>stack.removeLast();<br>target+=candidates[i];<br>}<br>}<br>}<br></code></pre></td></tr></tbody></table></figure><p>46.ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ <code>nums</code> ï¼Œè¿”å›å…¶ <em>æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—</em> ã€‚ä½ å¯ä»¥ <strong>æŒ‰ä»»æ„é¡ºåº</strong> è¿”å›ç­”æ¡ˆã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnums = [1,2,3]<br>è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnums = [0,1]<br>è¾“å‡ºï¼š[[0,1],[1,0]]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnums = [1]<br>è¾“å‡ºï¼š[[1]]<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= nums.length &lt;= 6</code></li><li><code>-10 &lt;= nums[i] &lt;= 10</code></li><li><code>nums</code> ä¸­çš„æ‰€æœ‰æ•´æ•° <strong>äº’ä¸ç›¸åŒ</strong></li></ul><p><strong>æ€è·¯é¢˜è§£ï¼š</strong></p><p>çœŸæ˜¯æœäº†æœ‰ä¸€æ¬¡æ²¡åšå‡ºæ¥<span class="github-emoji"><span>ğŸ˜°</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f630.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å’‹å˜äº†ä¸ªæ ·å­æœ‰å¿˜äº†åŸå…ˆçš„å¥—è·¯äº†å‘¢ï¼Œè¿™æ¬¡è¦å¥½å¥½çš„æƒ³æƒ³äº†ï¼ŒçœŸæ˜¯çœ‹äº†é¢˜è§£æ‰ä¸€åˆ‡éƒ½æ˜äº†<span class="github-emoji"><span>ğŸ˜­</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å¤šä¹ˆç§’çš„è§£æ³•å‘€ï¼è‡ªå·±è§£çš„æ—¶å€™å…³é”®çš„ç‚¹åœ¨äºé‚£ä¸ªä¸é‡å¤çš„æ•°å­—çš„æ•°ç»„ï¼Œæ‰€ä»¥è‡ªå·±æå¾—ä¸€å¤§åº¦111,222,112è¿™ä¸ªä¸é‡å¤æ²¡æœ‰è§£å†³å“~<span class="github-emoji"><span>ğŸ˜¬</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f62c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¸è¿‡è¿™æ¬¡æœ‰è¿›æ­¥ï¼Œæ‡‚å¾—äº†éœ€è¦ä¸é‡å¤å¯ä»¥åˆ›å»ºä¸€ä¸ªbooleanæ•°ç»„æ¥è®°å½•å½“å‰çš„æ•°ç»„æ˜¯å¦ä½¿ç”¨è¿‡äº†å°±å¯ä»¥äº†è›®ï¼Œæ‰€ä»¥ä¸€åˆ‡ğŸ‘‰å›å½’äº†åŸå§‹ï¼š<span class="github-emoji"><span>ğŸ‘½</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f47d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>é€’å½’çš„éå†æœ‰æ·±åº¦(depth)å’Œæ˜¯å¦ä½¿ç”¨è¿‡ (used)ä»¥åŠå½“å‰çš„æ•°ç»„ç»“æœå’Œé•¿åº¦,å…ˆè€ƒè™‘ç»“æŸçš„æƒ…å†µå°±æ˜¯å½“len=depthæ˜¯è¿›è¡ŒåŠ å…¥ç»“æœæ“ä½œï¼Œå¯¹äºå›æº¯éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥æ¯æ¬¡ä»0å¼€å§‹éå†åˆ°æŸä¸ªæ•°å­—åŠ å…¥åˆ°é¢„å…ˆå®šä¹‰çš„æ ˆä¸­ï¼Œå¹¶ä¸”å°†å½“å‰çš„usedè®¾ç½®ä¸ºtrueæ¥ç€è°ƒç”¨dfsè°ƒç”¨å®Œåå†å°†usedè®¾ç½®ä¸ºfalseå°±å¯ä»¥äº†ä»£ç å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="hljs-title function_">permute</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> {<br><span class="hljs-type">int</span> len=nums.length;<br>List&lt;List&lt;Integer&gt;&gt;res=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>Deque&lt;Integer&gt;stack=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br><span class="hljs-type">boolean</span> used[]=<span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[len];<br>dfs(nums,<span class="hljs-number">0</span>,len,res,stack,used);<br>    <span class="hljs-keyword">return</span> res;<br>    }<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> []nums,<span class="hljs-type">int</span> depth,<span class="hljs-type">int</span> len,List&lt;List&lt;Integer&gt;&gt;res,Deque&lt;Integer&gt;stack,<span class="hljs-type">boolean</span>[] used)</span>{<br>    <span class="hljs-keyword">if</span> (depth==len){<br>    res.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(stack));<br>    <span class="hljs-keyword">return</span>;<br>}<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;len;i++){<br>    <span class="hljs-keyword">if</span> (used[i]){<br>    <span class="hljs-keyword">continue</span>;<br>}<br>    stack.addLast(nums[i]);<br>    used[i]=<span class="hljs-literal">true</span>;<br>    dfs(nums,depth+<span class="hljs-number">1</span>,len,res,stack,used);<br>    stack.removeLast();<br>    used[i]=<span class="hljs-literal">false</span>;<br>}<br>}<br>}<br></code></pre></td></tr></tbody></table></figure><p>55.ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œä½ æœ€åˆä½äºæ•°ç»„çš„ <strong>ç¬¬ä¸€ä¸ªä¸‹æ ‡</strong> ã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ã€‚åˆ¤æ–­ä½ æ˜¯å¦èƒ½å¤Ÿåˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnums = [2,3,1,1,4]<br>è¾“å‡ºï¼štrue<br>è§£é‡Šï¼šå¯ä»¥å…ˆè·³ 1 æ­¥ï¼Œä»ä¸‹æ ‡ 0 åˆ°è¾¾ä¸‹æ ‡ 1, ç„¶åå†ä»ä¸‹æ ‡ 1 è·³ 3 æ­¥åˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnums = [3,2,1,0,4]<br>è¾“å‡ºï¼šfalse<br>è§£é‡Šï¼šæ— è®ºæ€æ ·ï¼Œæ€»ä¼šåˆ°è¾¾ä¸‹æ ‡ä¸º 3 çš„ä½ç½®ã€‚ä½†è¯¥ä¸‹æ ‡çš„æœ€å¤§è·³è·ƒé•¿åº¦æ˜¯ 0 ï¼Œ æ‰€ä»¥æ°¸è¿œä¸å¯èƒ½åˆ°è¾¾æœ€åä¸€ä¸ªä¸‹æ ‡ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= nums.length &lt;= 3 * 104</code></li><li><code>0 &lt;= nums[i] &lt;= 105</code></li></ul><p><strong>è§£é¢˜æ€è·¯ï¼š</strong>å¯ä»¥åˆ©ç”¨è´ªå¿ƒæ¥è¿›è¡Œæ“ä½œï¼Œæ¯æ¬¡å¾—åˆ°çš„æ¬¡æ•°éƒ½è¿›è¡Œä¸€ä¸ªæ¯”è¾ƒæ›´æ–°å®ƒèƒ½è·³çš„æœ€è¿œçš„å€¼</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">canJump</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> {<br>    <span class="hljs-comment">//è§£é¢˜æ€è·¯ç›´æ¥æ¯ä¸€æ­¥éƒ½è¿›è¡Œè·³è·ƒå°±å¯ä»¥äº†,æ¯æ¬¡è®°å½•ä»–èƒ½è·³è·ƒçš„æœ€è¿œè·ç¦»</span><br><span class="hljs-type">int</span> k=<span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;nums.length;i++){<br>            <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿåˆ°è¾¾å½“i&gt;kçš„æ—¶å€™å°±è¯´æ˜æ¥ä¸‹æ¥æ— è®ºå¦‚ä½•éƒ½ä¸ä¼šåœ¨è¿›è¡Œå‰è¿›äº†</span><br>            <span class="hljs-keyword">if</span>(i&gt;k)<span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            <span class="hljs-comment">//(i+nums[i])è¿™ä¸ªå¯ä»¥æ±‚å‡ºæ¯ä¸€é¡¹å…ƒç´ èƒ½è·³çš„æœ€è¿œè·ç¦»ä¸å½“å‰èƒ½è·³çš„æœ€è¿œè·ç¦»è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå¤§äºå°±æ›´æ–°ï¼Œåä¹‹å°±ä¿æŒåŸæœ¬çš„ä¸å˜</span><br>            k=Math.max(k,i+nums[i])<br>        }<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>62.ä¸€ä¸ªæœºå™¨äººä½äºä¸€ä¸ª <code>m x n</code> ç½‘æ ¼çš„å·¦ä¸Šè§’ ï¼ˆèµ·å§‹ç‚¹åœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œStartâ€ ï¼‰ã€‚</p><p>æœºå™¨äººæ¯æ¬¡åªèƒ½å‘ä¸‹æˆ–è€…å‘å³ç§»åŠ¨ä¸€æ­¥ã€‚æœºå™¨äººè¯•å›¾è¾¾åˆ°ç½‘æ ¼çš„å³ä¸‹è§’ï¼ˆåœ¨ä¸‹å›¾ä¸­æ ‡è®°ä¸º â€œFinishâ€ ï¼‰ã€‚</p><p>é—®æ€»å…±æœ‰å¤šå°‘æ¡ä¸åŒçš„è·¯å¾„ï¼Ÿ</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303142002569.png" alt="img"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šm = 3, n = 7<br>è¾“å‡ºï¼š28<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šm = 3, n = 2<br>è¾“å‡ºï¼š3<br>è§£é‡Šï¼š<br>ä»å·¦ä¸Šè§’å¼€å§‹ï¼Œæ€»å…±æœ‰ 3 æ¡è·¯å¾„å¯ä»¥åˆ°è¾¾å³ä¸‹è§’ã€‚<br>1. å‘å³ -&gt; å‘ä¸‹ -&gt; å‘ä¸‹<br>2. å‘ä¸‹ -&gt; å‘ä¸‹ -&gt; å‘å³<br>3. å‘ä¸‹ -&gt; å‘å³ -&gt; å‘ä¸‹<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= m, n &lt;= 100</code></li><li>é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆå°äºç­‰äº <code>2 * 109</code></li></ul><p><strong>é¢˜è§£æ€è·¯ï¼š</strong></p><p>æ ¹æ®é¢˜ç›®æˆ‘ä»¬å¾ˆå®¹çš„çŸ¥é“è¿™é“é¢˜æ˜¯ä¸ªåŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œå“åˆæ˜¯ä¸ä¼šçš„ä¸€é“ï¼Œæ„Ÿè§‰æ€æƒ³è²Œä¼¼æ‰­ä½äº†ï¼Œçœ‹äº†é¢˜è§£é¡¿æ—¶æç„¶å¤§æ‚Ÿã€‚ã€‚ã€‚<span class="github-emoji"><span>ğŸ˜¨</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f628.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å…¶å®åŠ¨æ€è§„åˆ’å¾ˆç®€å•çš„æ„æ€å°±æ˜¯è€ƒè™‘éƒ¨åˆ†ï¼Œå°±æ‹¿æœºå™¨äººæ¥è¯´ï¼Œæœ€ç®€å•çš„è€ƒè™‘å°±æ˜¯ä»start-finishçš„è·¯å¾„æœ€ç®€å•çš„ç†è§£å°±æ˜¯ä» m+n-2æ­¥ä¸­æŒ‘å‡ºä¸‹ç§»çš„æ­¥éª¤ä¹Ÿå°±æ˜¯m-1æ€»ä½“æ¥è¯´å°±æ˜¯C(m-1,m+n-2)çš„äºŒé¡¹å…¬å¼<span class="github-emoji"><span>ğŸ˜¨</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f628.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç„¶åå‘¢æˆ‘ä»¬è¦ä»¥ä»£ç çš„æ€ç»´æ¥è§£å†³è¿™é“é¢˜ï¼Œå°±æ‹¿ä»»æ„ä¸€ä¸ªç‚¹æˆ‘ä»¬å¾ˆå®¹æ˜“çŸ¥é“å®ƒçš„æ¥æºè·¯å¾„dp[i-1][j]æˆ–è€…dp[i][j-1]ä¹Ÿå°±æ˜¯dp[i][j]=dp[i-1][j]+dp[i][j-1],æ‰€ä»¥æ ¹æ®è¿™ä¸ªå…¬å¼ä¸€åˆ‡éƒ½å˜å¾—ç®€å•äº†æˆ‘ä»¬ä»å¤´å¼€å§‹èµ°æ¯æ¬¡ç»å†ä¸‹ä¸€ä¸ªéƒ½ä¼šå°†dpä¸­ä¸‹ä¸€ä¸ªæ•°å­—è¿›è¡Œæ›´æ–°ï¼Œç›´è‡³å…¨éƒ¨çš„dpè¡¨æ›´æ–°å®Œæˆå°±è¡Œï¼Œæ¯ä¸ªdp[i][j]å†…å®¹éƒ½æ˜¯ä»å¼€å§‹åˆ°è¾¾(i,j)çš„è·¯å¾„æ¡æ•°,ä½†æ˜¯å¯¹äºè¾¹ç•Œéœ€è¦ç‰¹æ®Šçš„å¤„ç†ä¹Ÿå°±æ˜¯ä»–ä»¬åªèƒ½ä¸€æ¡æ–¹å‘ç§»åŠ¨ä¹Ÿå°±æ˜¯ä»–ä»¬çš„åˆå§‹åŒ–ç»“æœä¸º1ï¼šæ‰€ä»¥ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤º</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">uniquePaths</span><span class="hljs-params">(<span class="hljs-type">int</span> m, <span class="hljs-type">int</span> n)</span> {<br><span class="hljs-type">int</span> [][]dp=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[m][n];<br><span class="hljs-comment">//åŠ¨æ€è§„åˆ’é¦–å…ˆå°†è¾¹ç•Œä¸Šçš„å€¼éƒ½å®šä¸º1å› ä¸ºä»–ä»¬åªèƒ½ä»ä¸€ä¸ªæ–¹å‘ç§»åŠ¨</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++)dp[<span class="hljs-number">0</span>][i]=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;m;i++)dp[i][<span class="hljs-number">0</span>]=<span class="hljs-number">1</span>;<br><span class="hljs-comment">//æ ¹æ®dp[i][j]å®ƒå¯ä»¥æ˜¯ä»dp[i-1][j]æ¥çš„ä¹Ÿå¯ä»¥æ˜¯dp[i][j-1]æ¥çš„</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;m;i++){<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;n;j++){<br>dp[i][j]=dp[i-<span class="hljs-number">1</span>][j]+dp[i][j-<span class="hljs-number">1</span>];<br>}<br>}<br><span class="hljs-comment">//åªéœ€è¦è€ƒè™‘å®ƒçš„æ¥æºå°±è¡Œäº†</span><br><span class="hljs-keyword">return</span> dp[m-<span class="hljs-number">1</span>][n-<span class="hljs-number">1</span>];<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>96.ç»™ä½ ä¸€ä¸ªæ•´æ•° <code>n</code> ï¼Œæ±‚æ°ç”± <code>n</code> ä¸ªèŠ‚ç‚¹ç»„æˆä¸”èŠ‚ç‚¹å€¼ä» <code>1</code> åˆ° <code>n</code> äº’ä¸ç›¸åŒçš„ <strong>äºŒå‰æœç´¢æ ‘</strong> æœ‰å¤šå°‘ç§ï¼Ÿè¿”å›æ»¡è¶³é¢˜æ„çš„äºŒå‰æœç´¢æ ‘çš„ç§æ•°ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303151030746.jpeg" alt="img"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šn = 3<br>è¾“å‡ºï¼š5<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šn = 1<br>è¾“å‡ºï¼š1<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= n &lt;= 19</code></li></ul><p><strong>æ€è·¯é¢˜è§£ï¼š</strong></p><p>çº¯çº¯çš„æ•°å­¦é—®é¢˜ï¼Œå¦‚æœç†è§£äº†è¿™ä¸ªæ•°å­¦åŸç†è¿™ä¸ªå°é¢˜è¿˜æ˜¯æ‰‹åˆ°æ“’æ¥<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> ä½ è¿™æ ·æ¥çœ‹ä¸€ä¸‹æˆ‘å…ˆå»å·å‡ å¼ å›¾ç‰‡</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303151034600.png" alt="image-20230315103427506"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303151035388.png" alt="image-20230315103510335"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303151035345.png" alt="image-20230315103523291"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303151035946.png" alt="image-20230315103535885"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303151035135.png" alt="image-20230315103549071"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303151036372.png" alt="image-20230315103602307"></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303151036259.png" alt="image-20230315103612193"></p><p>çœ‹æ‡‚äº†å—ï¼Ÿå¤§æ¦‚å°±æ˜¯å½“ä½ ä»¥æŸä¸ªå€¼ä¸ºæ ¹èŠ‚ç‚¹çš„æ—¶å€™å°±éœ€è¦åˆ†æˆä¸¤éƒ¨åˆ†å³å­æ ‘(i-1)å’Œå·¦å­æ ‘(n-i)é‚£ä¹ˆæ€»çš„æƒ…å†µå°±æ˜¯ä¸¤è€…ç›¸ä¹˜ï¼Œ<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç„¶åå¥½ç©çš„æ¥äº†ï¼Œå¯¹äºå³å­æ ‘æ˜¯ä¸æ˜¯è¿˜å¯ä»¥ç»§ç»­å‘ä¸‹é€’å½’ï¼Œå·¦å­æ ‘åŒç†ï¼Œç„¶åå°±æŠŠè‡ªå·±ç»™é€’å½’æ­»äº†<span class="github-emoji"><span>ğŸ˜­</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ä¸è¦ç€æ€¥,é€’å½’æ€»æœ‰ä¸ªå¤´ï¼Œå¤´æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå½“ç„¶æ˜¯n=1å’Œn=0å‘€ä»–ä»¬ä¸¤ä¸ªçš„ç»“æœéƒ½ä¸º1ï¼Œæ‰€ä»¥ä¸€åˆ‡çš„å˜å¾—å¥½èµ·æ¥äº†</p><p>è¿˜æœ‰å€¼å¾—æä¸€å˜´çš„æ˜¯ï¼šäºŒå‰æ ‘çš„å·¦å­æ ‘æ•°å€¼å°äºå³å­æ ‘ï¼Œä¹Ÿå°±æ˜¯ä¸­åºéå†çš„æ˜¯æœ‰åºçš„ï¼ï¼</p><p>æ‰€ä»¥ä»£ç æ€æƒ³å°±æ˜¯ï¼šé¦–å…ˆè§„å®šé€’å½’çš„ç»“æŸå°±æ˜¯n=1||n=0è¿”å›1,<span class="github-emoji"><span>ğŸ˜¸</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f638.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> è€Œä¸”ç»™ä¸€ä¸ªæ€»çš„countæ¥è®°å½•å½“å‰çš„å€¼å¼€å§‹ä»i=1å¼€å§‹è®©æ¯ä¸€ä¸ªæ•°å­—éƒ½å½“ä¸€æ¬¡æ ¹èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ¯æ¬¡éƒ½è®°å½•å…¶å·¦å­æ ‘å’Œå³å­æ ‘çš„ç§ç±»ï¼Œå¹¶ä¸”å°†å…¶ç›¸ä¹˜çš„ç»“æœä¸countç´¯åŠ ï¼›ä½†æ˜¯åæ¥ä½ ä¼šå‘ç°ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜å°±æ˜¯ï¼Œå¤§é‡çš„é‡å¤é€’å½’<span class="github-emoji"><span>â“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2753.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ€ä¹ˆè§£å†³å‘¢ï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯æ¯æ¬¡æ¯ä¸ªæ ¹èŠ‚ç‚¹å¯¹åº”çš„countå€¼æ˜¯ç›¸åŒçš„ï¼Œé‚£æˆ‘ä»¬æŠŠä»–è®°å½•ä¸‹æ¥ï¼Œå½“ä¸‹æ¬¡éœ€è¦çš„æ—¶å€™ç›´æ¥æŸ¥è¯¢å°±å¥½äº†!!<span class="github-emoji"><span>ğŸšš</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f69a.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç®€å•ä¸€ä¸ªmapå®¹å™¨å°±å®ç°äº†è¿™ä¸ªé€»è¾‘,å…¨å±€æ„å»ºä¸€ä¸ªmapå®¹å™¨,å°†æ¯æ¬¡é€’å½’çš„ç»“æœæ”¾å…¥mapï¼ˆn,countï¼‰ç„¶ååœ¨æ¯æ¬¡é€’å½’çš„å‰é¢è¿›è¡Œåˆ¤æ–­ï¼Œå½“å‰å®¹å™¨æ˜¯å¦è¿˜æœ‰nçš„countå€¼æœ‰çš„è¯ç›´æ¥å°±returnå°±è¡Œäº†ï¼Œçœçš„æ¥ç€é€’å½’<span class="github-emoji"><span>ğŸ˜„</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>ä»£ç å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>Map&lt;Integer,Integer&gt; map=<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">numTrees</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> {<br>    <span class="hljs-comment">// 1 2 5 14 42</span><br><span class="hljs-keyword">if</span> (n==<span class="hljs-number">1</span>||n==<span class="hljs-number">0</span>){<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>}<br>        <span class="hljs-comment">//åˆ¤æ–­å½“å‰çš„å®¹å™¨æ˜¯å¦æœ‰nå¯¹åº”çš„countå€¼æœ‰çš„è¯ç›´æ¥returnæ²¡æœ‰åœ¨é€’å½’éå†</span><br><span class="hljs-keyword">if</span> (map.containsKey(n)){<br><span class="hljs-keyword">return</span> map.get(n);<br>}<br><span class="hljs-type">int</span> count=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=n;i++){<br><span class="hljs-type">int</span> leftNum=numTrees(i-<span class="hljs-number">1</span>);<br><span class="hljs-type">int</span> rightNum=numTrees(n-i);<br>count+=leftNum*rightNum;<br>}<br>        <span class="hljs-comment">//å°†æ¯æ¬¡çš„né€’å½’çš„ç»“æœè¿›è¡Œä¿å­˜</span><br>map.put(n,count);<br><span class="hljs-keyword">return</span> count;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>114.ç»™ä½ äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹ <code>root</code> ï¼Œè¯·ä½ å°†å®ƒå±•å¼€ä¸ºä¸€ä¸ªå•é“¾è¡¨ï¼š</p><ul><li>å±•å¼€åçš„å•é“¾è¡¨åº”è¯¥åŒæ ·ä½¿ç”¨ <code>TreeNode</code> ï¼Œå…¶ä¸­ <code>right</code> å­æŒ‡é’ˆæŒ‡å‘é“¾è¡¨ä¸­ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼Œè€Œå·¦å­æŒ‡é’ˆå§‹ç»ˆä¸º <code>null</code> ã€‚</li><li>å±•å¼€åçš„å•é“¾è¡¨åº”è¯¥ä¸äºŒå‰æ ‘ <a href="https://baike.baidu.com/item/å…ˆåºéå†/6442839?fr=aladdin"><strong>å…ˆåºéå†</strong></a> é¡ºåºç›¸åŒã€‚</li></ul><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303152012442.jpeg" alt="img"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šroot = [1,2,5,3,4,null,6]<br>è¾“å‡ºï¼š[1,null,2,null,3,null,4,null,5,null,6]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šroot = []<br>è¾“å‡ºï¼š[]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šroot = [0]<br>è¾“å‡ºï¼š[0]<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li>æ ‘ä¸­ç»“ç‚¹æ•°åœ¨èŒƒå›´ <code>[0, 2000]</code> å†…</li><li><code>-100 &lt;= Node.val &lt;= 100</code></li></ul><p><strong>é¢˜ç›®è§£æï¼š</strong></p><p>æœ¬é“é¢˜å¾ˆç®€å•çš„æ€è·¯ï¼š<strong>å›ç‚‰é‡é€ !!</strong><span class="github-emoji"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å¾ˆç®€å•å§ï¼Œå‰åºéå†ä½ ä¼šæŠŠï¼Œæ„é€ ä¸€ä¸ªæ–°çš„æ ‘ä½ ä¹Ÿä¼šæŠŠï¼Œç„¶åä¸€åˆ‡éƒ½ç®€å•äº†å“ˆå“ˆå“ˆ <span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç®€å•çš„éå†å°†æ‰€æœ‰çš„èŠ‚ç‚¹å­˜å‚¨èµ·æ¥ï¼Œç„¶åå†å¯¹å‚¨å­˜çš„èŠ‚ç‚¹è¿›è¡Œéå†æ¯æ¬¡éå†éƒ½è®©å…¶å·¦å­æ ‘ä¸ºnullä¸‹ä¸€ä¸ªæŒ‡å‘å³å­æ ‘:å°±è¿™éº½ç®€å• ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">flatten</span><span class="hljs-params">(TreeNode root)</span> {<br>List&lt;TreeNode&gt;list=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>creatTree(root,list);<br><span class="hljs-type">int</span> size=list.size();<br>        <span class="hljs-comment">//å¯¹é›†åˆè¿›è¡Œé‡æ–°çš„æ„é€  easy</span><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;size;i++){<br>TreeNode prev=list.get(i-<span class="hljs-number">1</span>),curr=list.get(i);<br>prev.left=<span class="hljs-literal">null</span>;<br>prev.right=curr;<br>}<br><br>    }<br>    <span class="hljs-comment">//å¾—åˆ°èŠ‚ç‚¹çš„é›†åˆ</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">creatTree</span><span class="hljs-params">(TreeNode root,List&lt;TreeNode&gt; list)</span>{<br>    <span class="hljs-keyword">if</span> (root!=<span class="hljs-literal">null</span>){<br>    list.add(root);<br>    creatTree(root.left,list);<br>    creatTree(root.right,list);<br>}<br><br>}<br>}<br></code></pre></td></tr></tbody></table></figure><p>148.ç»™ä½ é“¾è¡¨çš„å¤´ç»“ç‚¹ <code>head</code> ï¼Œè¯·å°†å…¶æŒ‰ <strong>å‡åº</strong> æ’åˆ—å¹¶è¿”å› <strong>æ’åºåçš„é“¾è¡¨</strong> ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303160917576.jpeg" alt="img"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šhead = [4,2,1,3]<br>è¾“å‡ºï¼š[1,2,3,4]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303160917579.jpeg" alt="img"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šhead = [-1,5,3,4,0]<br>è¾“å‡ºï¼š[-1,0,3,4,5]<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 3ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šhead = []<br>è¾“å‡ºï¼š[]<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li>é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®åœ¨èŒƒå›´ <code>[0, 5 * 104]</code> å†…</li><li><code>-105 &lt;= Node.val &lt;= 105</code></li></ul><p><strong>æ€è·¯è§£æï¼š</strong></p><p>çœ‹åˆ°è¿™é“é¢˜è¿›è¡Œæ’åºä¸€ä¸ªå¤§èƒ†è€Œåˆç®€å•çš„æ–¹æ³•æµ®ç°å†è„‘ä¸­é¦–å…ˆå¯¹æ”¶é›†æ‰€æœ‰çš„å…ƒç´ <span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œç„¶åæ’åºï¼Œæœ€åæ„é€ æ–°çš„é“¾è¡¨<span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ï¼ˆè¿™ä¸ªæ–¹æ³•åˆ‡å®å¯è¡Œéƒ½æå‡ºæ¥äº†ï¼‰å°±æ˜¯æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æœ‰äº›é«˜ï¼Œä¸ä¼šå§ä¸ä¼šè¿™æ ·æå§ï¼å½“ç„¶ä¸æ˜¯äº†<span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span> è¿›å…¥æ­£é¢˜,æˆ‘ä»¬çœ‹åˆ°æ’åºè¿™é“é¢˜è€Œä¸”åˆè¦å¿«é€Ÿçš„è¿›è¡Œï¼Œé¦–å…ˆæƒ³åˆ°çš„ä¸äºŒæ³•é—¨å°±æ˜¯å½’å¹¶æ’åº:å¾ˆæ–¹ä¾¿çš„å¦‚ä¸‹å›¾:</p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303160928100.png" alt="image-20230316092841019"></p><p>é€šè¿‡é€’å½’å®ç°å½’å¹¶æ’åºä¸»è¦åŒ…å«ä¸¤ä¸ªæ­¥éª¤ï¼š</p><ul><li><strong>åˆ†å‰²cutç¯èŠ‚</strong>ï¼šå°±æ˜¯æ‰¾åˆ°é“¾è¡¨çš„ä¸­ç‚¹ï¼Œç„¶åè¿›è¡Œåˆ‡å¼€ï¼Œä¸€ä¸ªå¯è¡Œçš„æ–¹æ¡ˆå°±æ˜¯å¿«æ…¢æŒ‡é’ˆ,ä¸€ä¸ªæ¯æ¬¡èµ°ä¸€ä¸‹ï¼Œä¸€ä¸ªèµ°ä¸¤ä¸‹æ˜¯ä¸æ˜¯ä»–ä»¬ä¹‹é—´çš„å·®è·å°±æ˜¯äºŒå€<span class="github-emoji"><span>ğŸ˜¼</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f63c.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>,å½“æˆ‘ä»¬æ‰¾åˆ°ä¸­ç‚¹çš„æ—¶å€™è¦å¹²å˜›ï¼Œå½“ç„¶æ˜¯åˆ‡å¼€é“¾è¡¨äº†!ç¬¨!,åˆ‡å¼€åå°±åˆ†å¼€è¿›è¡Œé€’å½’æ“ä½œï¼Œå°†ä¸¤æ¡é“¾è¡¨çš„å¤´èŠ‚ç‚¹ä¼ å…¥é€’å½’å‡½æ•°ä¸­ï¼Œå½“ç„¶è¦é€’å½’è‚¯å®šè¦è€ƒè™‘é€’å½’çš„ç»ˆæ­¢æ¡ä»¶å‘€ï¼Œæƒ³æƒ³ï¼Œå½“é€’å½’åˆ°æœ€åå‘ç°ä»€ä¹ˆ<span class="github-emoji"><span>â“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2753.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ˜¯ä¸æ˜¯åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹äº†ä¹Ÿå°±æ˜¯å¤´,æ‰€ä»¥ç»“æŸçš„æ¡ä»¶å¾ˆç®€å•head.next=nullè¯´æ˜é€’å½’ç»“æŸå•¦!!</li><li><strong>åˆå¹¶mergeç¯èŠ‚</strong> ï¼šå°†ä¸¤ä¸ªæ’åºåçš„é“¾è¡¨è¿›è¡Œåˆå¹¶ï¼Œè½¬åŒ–ä¸ºä¸€ä¸ªé“¾è¡¨</li></ul><p>è¿™æ­¥æ“ä½œå°±æœ‰äº›æƒ³å¤´äº†<span class="github-emoji"><span>ğŸ˜¹</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f639.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å› ä¸ºéœ€è¦ä¸¤æ¡é“¾è¡¨çš„åˆå¹¶ï¼Œå¹¶ä¸æ˜¯é‚£ä¹ˆå·æ“ä½œï¼Œæ‰€ä»¥ç»¼åˆè€ƒè™‘å°±è¿›è¡Œä¸€ä¸ªå¾ˆå¸¸è§çš„æ“ä½œä¹Ÿå°±æ˜¯åŒæŒ‡é’ˆåˆå¹¶å‘ï¼Œéœ€è¦ä¸€ä¸ªè¾…åŠ©æŒ‡é’ˆhä½œä¸ºå¤´éƒ¨è¿›è¡Œåˆå¹¶æ“ä½œã€‚</p><p>å…·ä½“æ–¹æ³•å°±æ˜¯è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘ä¸¤é“¾è¡¨çš„å¤´éƒ¨ï¼Œæ¯”è¾ƒä¸¤æŒ‡é’ˆå¤„èŠ‚ç‚¹å€¼å¾—å¤§å°ï¼Œæœ‰å°åˆ°å¤§åŠ å…¥åˆå¹¶é“¾è¡¨å¤´éƒ¨ï¼ŒæŒ‡é’ˆäº¤æ›¿å‰è¿›ï¼Œç›´è‡³æ·»åŠ å®Œæˆä¸¤ä¸ªé“¾è¡¨å°±è¡Œå•¦,æ˜¯ä¸æ˜¯å¾ˆå¥½ç†è§£<span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>å…¶å®è¿™é‡Œä¸éœ€è¦è¿›è¡Œæ–°èŠ‚ç‚¹çš„åˆ›å»ºï¼Œå’±ä»¬åªéœ€è¦æ”¹å˜æŒ‡é’ˆçš„æŒ‡å‘å°±okäº†åœ¨ä¸€ä¸ªæ–°çš„é“¾è¡¨ä¸Šé¢ï¼Œè®©ä»–ç–¯ç‹‚çš„æŒ‡æ¥æŒ‡å»,å½“ç„¶å½“åˆå¹¶å®Œæˆåï¼Œå¯è¿˜æ²¡æœ‰ç»“æŸè€ƒè™‘ä¸€ç§å½“å·¦é“¾è¡¨æ¯”è¾ƒçŸ­ï¼Œå½“é€æ¸çš„åŠ å…¥åå·¦é“¾è¡¨å…ƒç´ ç”¨å®Œäº†æ€ä¹ˆåŠï¼Ÿè¿™é‡Œéœ€è¦ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ³•:å“ˆå“ˆå“ˆå·¦è¾¹å®Œäº†ï¼Œç›´æ¥å°†å³è¾¹çš„å…¨éƒ¨æ‹¼æ¥ä¸Šæ¥ä¸ä¹…è¡Œäº†æ…¢ï¼Œç›´æ¥ä¸€æ¡é“èµ°å‘æˆåŠŸï¼šä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">sortList</span><span class="hljs-params">(ListNode head)</span> {<br>        <span class="hljs-comment">//ç»“æŸçš„æ¡ä»¶ä¹Ÿå°±æ˜¯å¤´èŠ‚ç‚¹ä¸ºç©ºï¼ˆé˜²æ­¢ç©ºé“¾è¡¨ï¼‰æˆ–è€…åªå‰©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="hljs-keyword">if</span> (head==<span class="hljs-literal">null</span>||head.next==<span class="hljs-literal">null</span>){<br><span class="hljs-keyword">return</span> head;<br>}<br>        <span class="hljs-comment">//å¿«æ…¢æŒ‡é’ˆæ‰¾åˆ°ä¸­é—´çš„å€¼</span><br>ListNode fast=head.next,slow=head;<br><span class="hljs-keyword">while</span> (fast!=<span class="hljs-literal">null</span>&amp;&amp;fast.next!=<span class="hljs-literal">null</span>){<br>slow=slow.next;<br>fast=fast.next.next;<br>}<br>        <span class="hljs-comment">//å› ä¸ºæ…¢æŒ‡é’ˆä¼šæ…¢ä¸€æ­¥ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹å­˜å‚¨ç¬¬äºŒæ¡é“¾è¡¨çš„å¤´éƒ¨</span><br>ListNode tmp=slow.next;<br>        <span class="hljs-comment">//æ–­å¼€é“¾è¡¨</span><br>slow.next=<span class="hljs-literal">null</span>;<br>        <span class="hljs-comment">//å¯¹å·¦é“¾è¡¨è¿›è¡Œé€’å½’</span><br>ListNode left=sortList(head);<br>        <span class="hljs-comment">//å¯¹å³é“¾è¡¨è¿›è¡Œé€’å½’</span><br>ListNode right=sortList(tmp);<br>        <span class="hljs-comment">//ä¸€ä¸ªå‚¨å­˜ç»“æœçš„é“¾è¡¨</span><br>ListNode h=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(<span class="hljs-number">0</span>);<br>ListNode res=h;<br>        <span class="hljs-comment">//åŠ å…¥é“¾è¡¨çš„ç»“æŸæ¡ä»¶å°±æ˜¯ä¸¤ä¸ªé“¾è¡¨éƒ½ä¸ä¸ºnull</span><br><span class="hljs-keyword">while</span> (left!=<span class="hljs-literal">null</span>&amp;&amp;right!=<span class="hljs-literal">null</span>){<br><span class="hljs-keyword">if</span> (left.val&lt;right.val){<br>h.next=left;<br>left=left.next;<br>}<span class="hljs-keyword">else</span> {<br>h.next=right;<br>right=right.next;<br>}<br>h=h.next;<br>}<br>        <span class="hljs-comment">//å½“å‡ºç°å·¦é“¾è¡¨éƒ½ç©ºçš„è¯ç›´æ¥æŠŠå³é“¾è¡¨å…¨éƒ¨æ¬è¿‡æ¥:å®Œï¼</span><br>h.next=left!=<span class="hljs-literal">null</span>?left:right;<br><span class="hljs-keyword">return</span> res.next;<br>}<br>}<br></code></pre></td></tr></tbody></table></figure><p>152.ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code> ï¼Œè¯·ä½ æ‰¾å‡ºæ•°ç»„ä¸­ä¹˜ç§¯æœ€å¤§çš„éç©ºè¿ç»­å­æ•°ç»„ï¼ˆè¯¥å­æ•°ç»„ä¸­è‡³å°‘åŒ…å«ä¸€ä¸ªæ•°å­—ï¼‰ï¼Œå¹¶è¿”å›è¯¥å­æ•°ç»„æ‰€å¯¹åº”çš„ä¹˜ç§¯ã€‚</p><p>æµ‹è¯•ç”¨ä¾‹çš„ç­”æ¡ˆæ˜¯ä¸€ä¸ª <strong>32-ä½</strong> æ•´æ•°ã€‚</p><p><strong>å­æ•°ç»„</strong> æ˜¯æ•°ç»„çš„è¿ç»­å­åºåˆ—ã€‚</p><p><strong>ç¤ºä¾‹ 1:</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥: nums = [2,3,-2,4]<br>è¾“å‡º: 6<br>è§£é‡Š: å­æ•°ç»„ [2,3] æœ‰æœ€å¤§ä¹˜ç§¯ 6ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2:</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥: nums = [-2,0,-1]<br>è¾“å‡º: 0<br>è§£é‡Š: ç»“æœä¸èƒ½ä¸º 2, å› ä¸º [-2,-1] ä¸æ˜¯å­æ•°ç»„ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤º:</strong></p><ul><li><code>1 &lt;= nums.length &lt;= 2 * 104</code></li><li><code>-10 &lt;= nums[i] &lt;= 10</code></li><li><code>nums</code> çš„ä»»ä½•å‰ç¼€æˆ–åç¼€çš„ä¹˜ç§¯éƒ½ <strong>ä¿è¯</strong> æ˜¯ä¸€ä¸ª <strong>32-ä½</strong> æ•´æ•°</li></ul><p><strong>è§£é¢˜æ€è·¯ï¼š</strong></p><p>æƒ³éƒ½ä¸ç”¨æƒ³ä¸€çœ‹å°±æ˜¯åŠ¨æ€è§„åˆ’çš„æ€æƒ³ï¼Œä¸è¿‡è¿™é‡Œæœ‰ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„æƒ…å†µï¼Œå°±æ˜¯éœ€è¦è€ƒè™‘å¤æ•°çš„æƒ…å†µï¼Œæ¯æ¬¡è®°å½•çš„ä¹˜ç§¯ç»“æœæ ¹æ®ä¸‹ä¸€ä¸ªå€¼å¾—ä¸åŒè€Œè¿›è¡ŒåŠ¨æ€æ”¹å˜ <span class="github-emoji"><span>ğŸ˜</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç„¶åæˆ‘ä»¬éœ€è¦å°†maxå’Œminä¸€èµ·ä½œä¸ºä»£è¡¨ï¼Œæ‰èƒ½å¾ˆå¥½å¾—ç»“æœè¿™é“é¢˜ç›®ï¼Œfmax[i]ã€fin[i]è¡¨ç¤ºä»¥iç»“å°¾å¾—æœ€å¤§ï¼Œæœ€å°ä¹˜ç§¯å¾—æ•°ç»„,ä¸€åˆ‡éƒ½å˜å¾—å¥½ç†è§£äº†ï¼Œç›´æ¥æ‰“è¡¨ï¼Œå¯¹æ¯ä¸€ä¸ªä»¥iç»“å°¾å¾—æ•°ç»„è¿›è¡Œç›¸åº”å¾—æ“ä½œï¼Œå’±ä»¬ä¸éœ€è¦è€ƒè™‘æ˜¯å¦æˆªå–äº†æŸä¸€æ®µï¼Œåæ­£æœ€åå¾—ç»“æœåªæ˜¯éœ€è¦æŸä¸€æ®µçš„ä¹˜ç§¯æœ€å¤§å€¼<span class="github-emoji"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>æ‰€ä»¥å‘¢å°±å¯ä»¥å¾—åˆ°å¾ˆå¥½çš„çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¼:<br><code>fmax[i] = max{fmax[i-1]*nums[i], fmin[i-1]*nums[i],nums[i]}</code></p><p><code>fmin[i] = min{fmax[i-1]*nums[i], fmin[i-1]*nums[i],nums[i]}</code></p><p>æ ¹æ®ä»¥ä¸Šçš„å¼å­å°±å¯ä»¥æ±‚å‡ºæ¯ä¸ªä»¥iç»“å°¾çš„å­é¡¹çš„æœ€å¤§æœ€å°å€¼</p><p>æœ€åä¸€ä¸ªéå†å¾ªç¯æ‰¾å‡ºfmaxä¸­çš„æœ€å¤§å€¼å°±å¯ä»¥äº†<span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">maxProduct</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> {<br>    <span class="hljs-type">int</span> n=nums.length;<br>    <span class="hljs-type">int</span>[]fmax=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>    <span class="hljs-type">int</span>[]fmin=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>    fmin[<span class="hljs-number">0</span>]=nums[<span class="hljs-number">0</span>];<br>    fmax[<span class="hljs-number">0</span>]=nums[<span class="hljs-number">0</span>];<br>        <span class="hljs-comment">//è¿™ä¸ªéœ€è¦å¥½å¥½çš„æ€è€ƒä¸€ä¸‹ï¼Œå¾ˆå¥½çš„å­˜å‚¨äº†å½“å‰iä¹‹å‰çš„æœ€å¤§æœ€å°å€¼ï¼Œè€Œä¸”æœ‰ä¸€ç‚¹å°±æ˜¯å®ƒæ˜¯åŸæ•°ç»„çš„å­é›†æ˜¯èƒ½è¿ç»­èµ·æ¥çš„!</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;n;i++){<br>    fmax[i]=Math.max(Math.max(nums[i]*fmax[i-<span class="hljs-number">1</span>],nums[i]*fmin[i-<span class="hljs-number">1</span>]),nums[i]);<br>    fmin[i]=Math.min(Math.min(nums[i]*fmax[i-<span class="hljs-number">1</span>],nums[i]*fmin[i-<span class="hljs-number">1</span>]),nums[i]);<br>}<br>    <span class="hljs-type">int</span> ans=fmax[<span class="hljs-number">0</span>];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;n;i++){<br>    ans=Math.max(ans,fmax[i]);<br>}<br>    <span class="hljs-keyword">return</span> ans;<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p><strong>æ–¹æ³•äºŒï¼šæ›´å¥½ç†è§£</strong></p><p>è¯¥é¢˜æ˜æ˜¾å°±æ˜¯ä¸€ä¸ªåŠ¨æ€è§„åˆ’é—®é¢˜ï¼šä»å°å·çš„è§’åº¦å‡ºå‘ï¼Œæ¯æ¬¡å½“ä»–åˆ°è¾¾ä¸€ä¸ªåœ°ç‚¹æ— éä¸¤ç§é€‰æ‹©ï¼Œè¦ä¹ˆå·è¦ä¹ˆä¸å·<span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è€Œä¸”æœ‰æ„æ€çš„æ˜¯ä¸ºäº†ä¿è¯æœ€åçš„é‡‘é¢æœ€å¤§ï¼Œæ¯æ¬¡å·å–ç›¸é‚»çš„ä¸‰ä¸ªä¹‹å†…å¿…å®šè¦æœ‰ä¸€ä¸ªè¢«å·ï¼Œæ‰€ä»¥è¿™é‡Œè®°å½•ä¸€ä¸ªfã€iã€‘è¡¨ç¤ºå‰iä¸ªèƒ½å·çš„æœ€å¤§é‡‘é¢ï¼Œé¦–å…ˆå°±æ˜¯åˆå§‹åŒ–å°†fã€0ã€‘å’Œfã€1ã€‘è¿›è¡Œåˆå§‹åŒ–åï¼Œç›´æ¥å¯¹numsè¿›è¡Œéå†ï¼Œå½“éå†åˆ°ä¸€ä¸ªæ•°çš„æ—¶å€™ä¸¤ç§æƒ…å†µï¼Œå·çš„è¯å°±æ˜¯nums[i]+f[n-2]ï¼Œä¸å·çš„è¯å°±æ˜¯f[i-1]å»ä¸¤è€…çš„æœ€å¤§å€¼å°±è¡Œäº†ä»£ç å®ç°å¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">rob</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> {<br><span class="hljs-comment">//ä¸€ä¸ªåŠ¨æ€è§„åˆ’çš„é¢˜ç›®</span><br><span class="hljs-type">int</span> n=nums.length;<br><span class="hljs-keyword">if</span> (n==<span class="hljs-number">0</span>){<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>}<br><span class="hljs-keyword">if</span> (n==<span class="hljs-number">1</span>){<br><span class="hljs-keyword">return</span> nums[<span class="hljs-number">0</span>];<br>}<br><span class="hljs-type">int</span>[]f=<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>f[<span class="hljs-number">0</span>]=nums[<span class="hljs-number">0</span>];<br>f[<span class="hljs-number">1</span>]=Math.max(nums[<span class="hljs-number">1</span>],nums[<span class="hljs-number">0</span>]);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>;i&lt;n;i++){<br>f[i]=Math.max(nums[i]+f[i-<span class="hljs-number">2</span>],f[i-<span class="hljs-number">1</span>]);<br>}<br><span class="hljs-keyword">return</span> f[n-<span class="hljs-number">1</span>];<br><br>    }<br>}<br></code></pre></td></tr></tbody></table></figure><p>207.ä½ è¿™ä¸ªå­¦æœŸå¿…é¡»é€‰ä¿® <code>numCourses</code> é—¨è¯¾ç¨‹ï¼Œè®°ä¸º <code>0</code> åˆ° <code>numCourses - 1</code> ã€‚</p><p>åœ¨é€‰ä¿®æŸäº›è¯¾ç¨‹ä¹‹å‰éœ€è¦ä¸€äº›å…ˆä¿®è¯¾ç¨‹ã€‚ å…ˆä¿®è¯¾ç¨‹æŒ‰æ•°ç»„ <code>prerequisites</code> ç»™å‡ºï¼Œå…¶ä¸­ <code>prerequisites[i] = [ai, bi]</code> ï¼Œè¡¨ç¤ºå¦‚æœè¦å­¦ä¹ è¯¾ç¨‹ <code>ai</code> åˆ™ <strong>å¿…é¡»</strong> å…ˆå­¦ä¹ è¯¾ç¨‹ <code>bi</code> ã€‚</p><ul><li>ä¾‹å¦‚ï¼Œå…ˆä¿®è¯¾ç¨‹å¯¹ <code>[0, 1]</code> è¡¨ç¤ºï¼šæƒ³è¦å­¦ä¹ è¯¾ç¨‹ <code>0</code> ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ <code>1</code> ã€‚</li></ul><p>è¯·ä½ åˆ¤æ–­æ˜¯å¦å¯èƒ½å®Œæˆæ‰€æœ‰è¯¾ç¨‹çš„å­¦ä¹ ï¼Ÿå¦‚æœå¯ä»¥ï¼Œè¿”å› <code>true</code> ï¼›å¦åˆ™ï¼Œè¿”å› <code>false</code> ã€‚</p><p><strong>ç¤ºä¾‹ 1ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0]]<br>è¾“å‡ºï¼štrue<br>è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å®Œæˆè¯¾ç¨‹ 0 ã€‚è¿™æ˜¯å¯èƒ½çš„ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>ç¤ºä¾‹ 2ï¼š</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">è¾“å…¥ï¼šnumCourses = 2, prerequisites = [[1,0],[0,1]]<br>è¾“å‡ºï¼šfalse<br>è§£é‡Šï¼šæ€»å…±æœ‰ 2 é—¨è¯¾ç¨‹ã€‚å­¦ä¹ è¯¾ç¨‹ 1 ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆå®Œæˆè¯¾ç¨‹ 0 ï¼›å¹¶ä¸”å­¦ä¹ è¯¾ç¨‹ 0 ä¹‹å‰ï¼Œä½ è¿˜åº”å…ˆå®Œæˆè¯¾ç¨‹ 1 ã€‚è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚<br></code></pre></td></tr></tbody></table></figure><p><strong>æç¤ºï¼š</strong></p><ul><li><code>1 &lt;= numCourses &lt;= 105</code></li><li><code>0 &lt;= prerequisites.length &lt;= 5000</code></li><li><code>prerequisites[i].length == 2</code></li><li><code>0 &lt;= ai, bi &lt; numCourses</code></li><li><code>prerequisites[i]</code> ä¸­çš„æ‰€æœ‰è¯¾ç¨‹å¯¹ <strong>äº’ä¸ç›¸åŒ</strong></li></ul><p><strong>è§£é¢˜æ€è·¯:</strong></p><p>åšè¿™é“é¢˜ä¸€å¼€å§‹æ²¡ä»€ä¹ˆæ€è·¯ï¼Œæƒ³æ³•æ˜¯æœ‰çš„å°±æ˜¯ä¼˜ç‚¹éš¾ä»¥å®ç°<span class="github-emoji"><span>ğŸ˜‚</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f602.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç¬¬ä¸€ä¸ªæƒ³æ³•å°±æ˜¯æˆ‘èƒ½ä¸èƒ½æ„é€ ä¸€ä¸ªé“¾è¡¨<span class="github-emoji"><span>â“</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/2753.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>ç„¶åå†åˆ©ç”¨å¿«æ…¢æŒ‡é’ˆï¼Œå› ä¸ºå¦‚æœä¸ç¬¦åˆé¢˜æ„å¾—è¦æ±‚è‚¯å®šæ˜¯å­˜åœ¨ç¯è·¯ï¼Œå’±åªéœ€è¦å¿«æŒ‡é’ˆèƒ½è¿½å¾—ä¸Šæ»¡æŒ‡é’ˆå°±è¡Œäº†ï¼Œç„¶åä»”ç»†ä¸€æƒ³ï¼Œä¸å¯¹å‘€ï¼<span class="github-emoji"><span>ğŸ˜¹</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f639.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span>è¿™ä¸ªé“¾è¡¨ä¸æ­¢æœ‰ä¸€æ¡ï¼Œæœ‰è®¸å¤šæ¡ï¼Œè¿™ä¸ªè‚¯å®šè¡Œä¸é€šï¼Œç„¶åå°±æ€ç´¢ç¬¬äºŒæ¡å‡ºè·¯,è¿™éƒ¨å‚è€ƒä¸€ä¸‹ï¼Œniceç«Ÿç„¶ä½¿ç”¨äº†å›¾çš„æ–¹æ³•æ„é€ ä¸€ä¸ªå…¥åº¦è¡¨ï¼Œæ¯æ¬¡è®©å…¥åº¦ä¸ºé›¶çš„ç‚¹å‡ºæ ˆï¼Œå¯¹åˆ«çš„ç‚¹è¿›è¡Œæ¶ˆè¾¹ï¼Œå¦‚æœåˆ«çš„ç‚¹çš„å…¥åº¦ä¸ºé›¶ç»§ç»­å…¥æ ˆï¼Œç„¶åå‡ºæ ˆï¼Œç­‰ç­‰ç­‰æœ‰äº›è¿·çªäº†ï¼Ÿçœ‹å›¾è¯´è¯<span class="github-emoji"><span>ğŸ˜ƒ</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p><img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303172031159.png" alt="207-1.png">,<img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303172031176.png" alt="207-2.png">,<img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303172031412.png" alt="207-3.png">,<img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303172031101.png" alt="207-4.png">,<img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303172031270.png" alt="207-5.png">,<img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303172031105.png" alt="207-6.png">,<img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303172031710.png" alt="207-7.png">,<img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303172031688.png" alt="207-8.png">,<img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303172031752.png" alt="207-9.png">,<img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303172031698.png" alt="207-10.png">,<img src="https://pic.leetcode-cn.com/e91ef7c5d01de19f3ef7126e3503430867f897d01f81b7a7607dd551a8743786-207-11.png" alt="207-11.png">,<img src="https://pic.leetcode-cn.com/7fcc5454f1562a1b231aa1fba29bd023c719730257776a10a64c5f5282660fb8-207-12.png" alt="207-12.png">,<img src="https://joker-qaq1-1314468534.cos.ap-beijing.myqcloud.com/learn/202303172031516.png" alt="207-13.png"></p><p>å¯¹å¯¹å¯¹å°±æ˜¯è¿™ä¸ªæ€è·¯ï¼Œå’±å°±ä¸€ä¸ªä¸€ä¸ªç‚¹çš„åˆ é™¤å½“åˆ é™¤åˆ°æœ€åçœ‹çœ‹æ˜¯ä¸æ˜¯å°†åŸæœ¬ä¼ å…¥çš„numCoursesç½®ä½0äº†å¦‚æœæˆåŠŸï¼Œæ­å–œä½ ï¼šä¸€åˆ‡éƒ½æˆåŠŸäº†ï¼Œä¸‹é¢çœ‹ä»£ç è¯´è¯ï¼Œè¿™ä¸ªç¨‹åºä»£ç ä¼˜ç‚¹ç»•ï¼Œå¥¶å¥¶çš„ç¡®å®ç»•!çœ‹çœ‹ç†è§£ç†è§£å§</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {<br>      <span class="hljs-comment">//[[3, 0], [3, 1], [4, 1], [4, 2], [5, 3], [5, 4]]ä¸€ä¸ªèƒ½å®Œæˆçš„ä¾‹å­</span><br>       <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">canFinish</span><span class="hljs-params">(<span class="hljs-type">int</span> numCourses, <span class="hljs-type">int</span>[][] prerequisites)</span> {<br>           <span class="hljs-comment">//åˆå§‹åŒ–å…¥åº¦çš„ç‚¹é›†åˆéƒ½è®©ä»–çš„å…¥åº¦ä¸º0</span><br>           <span class="hljs-type">int</span>[] RuDu = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[numCourses];<br>           <span class="hljs-comment">//å»ºç«‹ä¸€ä¸ªç‚¹çš„é›†åˆï¼Œè¿™ä¸ªç”¨æ¥å­˜æ”¾ï¼ˆB---&gt;Aï¼‰ä¸­çš„Aï¼Œå› ä¸ºå¯¹äºBæ¥è¯´å­¦ä¹ å®Œæˆåå¯ä»¥å­¦ä¹ å¤šä¸ªA</span><br>           List&lt;List&lt;Integer&gt;&gt; DianJi = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>           <span class="hljs-comment">//è¿™ä¸ªæ˜¯åˆå§‹åŒ–é˜Ÿåˆ—ä¸»è¦ç”¨äºå­˜æ”¾é‚£äº›å…¥åº¦ä¸º0çš„è¯¾ç¨‹å·ï¼Œä»¥ä¾¿åæ¥çš„é€ä¸ªè¿›è¡Œå»é™¤å¦‚ä¸Šå›¾æ‰€ç¤º</span><br>           Queue&lt;Integer&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();<br>           <span class="hljs-comment">//è¿™ä¸ªå°±æœ‰æ„æ€äº†å› ä¸ºæˆ‘ä»¬ä¹‹å‰æ„é€ äº†ä¸€ä¸ªDianjiè¿™é‡Œæˆ‘ä»¬è¦å§å®ƒçš„å¤§å°æ‰©å……åˆ°numCourseå“ˆå“ˆè¿™é‡Œæ˜¯ä¸ºäº†ä½¿ç”¨å®ƒçš„ä¸‹æ ‡æ¥è¡¨æ˜æ˜¯é‚£ä¸ªè¯¾ç¨‹</span><br>           <span class="hljs-comment">//ç„¶åå†å¯¹åº”çš„è¯¾ç¨‹ä¸‹é¢å­˜æ”¾äº†ä¸€äº›ä»–éœ€è¦ä¿®è¡Œçš„å…ˆè¡Œè¯¾ä¹Ÿå°±æ˜¯ä¸‹æ ‡ä»£è¡¨B,é‡Œé¢çš„listé›†åˆä»£è¡¨A</span><br>           <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; numCourses; i++) {<br>               DianJi.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());<br>           }<br>           <span class="hljs-comment">//è¿™ä¸ªå°±æ˜¯å¼€å§‹è¿›è¡Œä¸€ä¸ªRuDuçš„åˆå§‹åŒ–ä»¥åŠï¼Œå¯¹ä¿®è¯¾ç¨‹Bæ‰€éœ€è¦çš„è¯¾ç¨‹Aè¿›è¡Œæ„é€ </span><br>           <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span>[] cp : prerequisites) {<br>               <span class="hljs-comment">//æœ‰æ•°æ®çš„ç»“æ„å¦‚[A,B]==&gt; B---&gt;Aä¹Ÿå°±æ˜¯Açš„ä¼˜å…ˆçº§è¦é«˜Bæ›´æ¬¡çº§æ‰€ä»¥è¿™é‡Œçš„å…¥åº¦å°±æ˜¯cp[0]</span><br>               RuDu[cp[<span class="hljs-number">0</span>]]++;<br>               <span class="hljs-comment">//è¿™ä¸ªå¥½å¥½æ€è™‘ä¸€æ³¢è¿™ä¸ªæ„æ€å°±æ˜¯å†è¯¾ç¨‹Bçš„ä¸‹æ ‡å‡ºæ·»åŠ ä»–ä¿®å®Œåèƒ½ç»§ç»­ä¿®ä¹ Aè¯¾ç¨‹çš„é›†åˆ</span><br>               <span class="hljs-comment">//å…ˆå°†ç›¸åŒçš„Bå¯¹åº”Açš„é›†åˆå­˜å…¥ï¼Œç„¶ååœ¨é˜Ÿåˆ—ä¸­æ‰¾åˆ°ä¸€ä¸ªè¯¾ç¨‹Bå¹¶å–å‡ºé›†åˆAçš„å…ƒç´ ï¼Œæœ‰è¿™ä¸ªå…ƒç´ å¯ä»¥å¯¹åº”åˆ°å…¥åº¦æ•°ç»„è¿›è¡Œ--æ“ä½œ</span><br>               DianJi.get(cp[<span class="hljs-number">1</span>]).add(cp[<span class="hljs-number">0</span>]);<br>           }<br>           <span class="hljs-comment">//ç¬¬ä¸€æ¬¡é¦–å…ˆå°†å…¥åº¦ä¸º0çš„ç»™è®°å½•å…¥æ ˆ</span><br>           <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; numCourses; i++) {<br>               <span class="hljs-keyword">if</span> (RuDu[i] == <span class="hljs-number">0</span>) queue.add(i);<br>           }<br>           <span class="hljs-comment">//å½“æ ˆä¸ä¸ºç©ºå°±å¾ªç¯</span><br>           <span class="hljs-keyword">while</span> (!queue.isEmpty()) {<br>               <span class="hljs-comment">//å…ˆå–å‡ºåº¦æ•°ä¸º0çš„è¯¾ç¨‹ä¹Ÿå°±æ˜¯ä¸€ä¸ªè¯¾ç¨‹ç‚¹å‡ºæ ˆ</span><br>               <span class="hljs-type">int</span> <span class="hljs-variable">pre</span> <span class="hljs-operator">=</span> queue.poll();<br>               numCourses--;<br>               <span class="hljs-comment">//åœ¨DianJiä¸­æ‰¾åˆ°å¯¹åº”çš„Aé›†åˆä¸­çš„å…ƒç´ ï¼Œå¦‚æœåœ¨RuDuçš„é›†åˆä¸­ä¸ä¸º0å°±è¿›è¡Œ--æ“ä½œï¼Œå½“å‡åˆ°ä¸º0å°±å…¥æ ˆ</span><br>               <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> cur : DianJi.get(pre))<br>                   <span class="hljs-keyword">if</span> (--RuDu[cur] == <span class="hljs-number">0</span>) queue.add(cur);<br>           }<br>           <span class="hljs-comment">//å¯¹ç»“æœè¿›è¡Œä¸€ä¸ªåˆ¤æ–­</span><br>           <span class="hljs-keyword">return</span> numCourses == <span class="hljs-number">0</span>;<br>       }<br>   }<br></code></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åŠ›æ‰£ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
